<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:CodeTutor.Native.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:avaloniaEdit="https://github.com/avaloniaui/avaloniaedit"
        mc:Ignorable="d" d:DesignWidth="1400" d:DesignHeight="900"
        x:Class="CodeTutor.Native.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/icon.ico"
        Title="Code Tutor - Native Desktop Application"
        Width="1400" Height="900">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*">

        <!-- Top Bar -->
        <Border Grid.Row="0" Background="#1E1E1E" Padding="16">
            <StackPanel Orientation="Horizontal" Spacing="12">
                <TextBlock Text="Code Tutor"
                          FontSize="20"
                          FontWeight="Bold"
                          VerticalAlignment="Center"/>

                <TextBlock Text="True Native Desktop Application - No Electron, No React"
                          FontSize="12"
                          Opacity="0.7"
                          VerticalAlignment="Center"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1" ColumnDefinitions="250,*,*">

            <!-- Sidebar: Course List -->
            <Border Grid.Column="0" Background="#252526" Padding="12">
                <StackPanel>
                    <TextBlock Text="Available Courses"
                              FontSize="16"
                              FontWeight="Bold"
                              Margin="0,0,0,12"/>

                    <ListBox ItemsSource="{Binding Courses}"
                            Background="Transparent"
                            BorderThickness="0">
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="0,8">
                                    <TextBlock Text="{Binding Title}" FontWeight="Bold"/>
                                    <TextBlock Text="{Binding Description}"
                                              Opacity="0.7"
                                              FontSize="11"
                                              TextWrapping="Wrap"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </StackPanel>
            </Border>

            <!-- Center: Code Editor -->
            <Grid Grid.Column="1" RowDefinitions="Auto,*,Auto" Background="#1E1E1E">

                <StackPanel Grid.Row="0"
                           Orientation="Horizontal"
                           Padding="12"
                           Background="#2D2D30">
                    <TextBlock Text="Language:"
                              VerticalAlignment="Center"
                              Margin="0,0,8,0"/>

                    <ComboBox SelectedItem="{Binding SelectedLanguage}"
                             Width="120">
                        <ComboBoxItem Content="python"/>
                        <ComboBoxItem Content="javascript"/>
                        <ComboBoxItem Content="java"/>
                        <ComboBoxItem Content="rust"/>
                        <ComboBoxItem Content="csharp"/>
                    </ComboBox>

                    <Button Content="â–¶ Run Code"
                           Command="{Binding ExecuteCodeAsync}"
                           IsEnabled="{Binding !IsExecuting}"
                           Margin="12,0,0,0"
                           Background="#0E639C"
                           Foreground="White"
                           Padding="16,6"/>
                </StackPanel>

                <!-- Code Editor (using AvaloniaEdit - native text editor) -->
                <Border Grid.Row="1" Margin="12">
                    <avaloniaEdit:TextEditor Name="CodeEditor"
                                            Text="{Binding Code}"
                                            FontFamily="Consolas,Courier New,monospace"
                                            FontSize="14"
                                            ShowLineNumbers="True"
                                            Background="#1E1E1E"
                                            Foreground="#D4D4D4"/>
                </Border>

                <TextBlock Grid.Row="2"
                          Text="Native code editor - No Monaco, No web tech"
                          Padding="12"
                          Opacity="0.5"
                          FontSize="11"/>
            </Grid>

            <!-- Right: Output Panel -->
            <Grid Grid.Column="2" RowDefinitions="Auto,*" Background="#1E1E1E">

                <Border Grid.Row="0"
                       Background="#2D2D30"
                       Padding="12">
                    <TextBlock Text="Output" FontWeight="Bold"/>
                </Border>

                <ScrollViewer Grid.Row="1" Padding="12">
                    <TextBlock Text="{Binding Output}"
                              FontFamily="Consolas,Courier New,monospace"
                              FontSize="13"
                              TextWrapping="Wrap"/>
                </ScrollViewer>
            </Grid>

        </Grid>
    </Grid>
</Window>
