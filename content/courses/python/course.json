{
  "id": "python",
  "language": "python",
  "title": "Python Backend Development",
  "description": "Master Python from fundamentals to backend development with APIs, databases, async programming, and Python 3.11+ features like Exception Groups and TaskGroups through 90+ interactive lessons.",
  "difficulty": "beginner",
  "estimatedHours": 56,
  "prerequisites": [],
  "modules": [
    {
      "id": "module-01",
      "title": "The Absolute Basics",
      "description": "Introduction to programming and Python fundamentals",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "module-01-lesson-01",
          "title": "What is Programming, Really?",
          "moduleId": "module-01",
          "order": 1,
          "estimatedMinutes": 10,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're teaching a very literal-minded friend how to make a peanut butter and jelly sandwich. You can't just say 'make a sandwich'‚Äîyou have to break it down into tiny, specific steps:\n\n- Pick up the bread bag\n- Open the bag\n- Take out two slices of bread\n- Place them on the counter\n- Pick up the jar of peanut butter\n- Twist the lid counter-clockwise to open it\n- ...and so on\n\n**That's exactly what programming is.**\n\nA computer is like that very literal friend. It's incredibly fast and never gets tired, but it only does <em>exactly</em> what you tell it to do, in <em>exactly</em> the order you tell it. If you forget a step or put them in the wrong order, it won't figure it out‚Äîit'll either do the wrong thing or stop and say \"I don't understand.\"\n\n**Python is the language you'll use to give these instructions.** Just like English or Spanish is a language humans use to communicate, Python is a language humans use to communicate with computers.\n\nThe beautiful thing? Python was designed to be as close to plain English as possible, so it reads almost like a recipe or a set of instructions you'd give to a friend."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This is the classic first program every developer writes. The print() function displays text to the console. **Expected Output:**\n```\nHello, World!\n```",
              "code": "# This is your first Python program!\n# The '#' symbol creates a comment - notes for humans that the computer ignores\n\n# Tell the computer to print (display) a message\nprint(\"Hello, World!\")\n\n# That's it! This simple instruction tells Python:\n# \"Show the text 'Hello, World!' on the screen\"",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's break down what just happened:\n\n- **`print()`** - This is a **function** (we'll learn more about these later). Think of it as a command or action word, like 'display' or 'show'. It tells Python: 'take whatever is inside the parentheses and show it to the user.'\n- **`(\"Hello, World!\")`** - The parentheses `( )` are like a lunchbox‚Äîthey carry the information that `print` needs. Inside, we have `\"Hello, World!\"` wrapped in quotes.\n- **`\"Hello, World!\"`** - The quotation marks tell Python: 'This is text (what programmers call a **string**), not a command.' Without quotes, Python would think `Hello` is a command and get confused.\n- **`#`** - Everything after a `#` on a line is a **comment**. Python completely ignores it. Comments are notes you leave for yourself or other programmers to explain what the code does.\n\n**Why does this matter?** Because if you wrote `print(Hello, World!)` without quotes, Python would say 'Error! I don't know what Hello is!' The quotes are crucial."
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- Programming is like giving very detailed, step-by-step instructions to a computer\n- Python is a language designed to be readable and beginner-friendly\n- `print()` is your first Python command‚Äîit displays text on the screen\n- Text (strings) must be wrapped in quotation marks: `\"like this\"` or `'like this'`\n- Comments (lines starting with `#`) are notes for humans‚ÄîPython ignores them\n- Python is case-sensitive: `print` works, but `Print` doesn't"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-01-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Turn!**\n\nNow it's time to write your own code. In the code editor below, you'll see some starter code with blanks (shown as `____`).\n\n**Your task:** Replace the blanks to make Python print your own message.\n\n- Replace `____` with the command that displays text\n- Inside the parentheses, write **your own message** (remember the quotes!)\n- Click 'Run Code' to see your message appear\n\n**Bonus Challenge:** Add a second `print()` line to display a second message!",
              "instructions": "**Your Turn!**\n\nNow it's time to write your own code. In the code editor below, you'll see some starter code with blanks (shown as `____`).\n\n**Your task:** Replace the blanks to make Python print your own message.\n\n- Replace `____` with the command that displays text\n- Inside the parentheses, write **your own message** (remember the quotes!)\n- Click 'Run Code' to see your message appear\n\n**Bonus Challenge:** Add a second `print()` line to display a second message!",
              "starterCode": "# Welcome to your first Python exercise!\n# Replace the ____ below with the correct code\n\n____(\"Your message here\")\n\n# Bonus: Add another print() line below to display a second message",
              "solution": "# Welcome to your first Python exercise!\n# Here's the solution!\n\nprint(\"Your message here\")\n\n# Bonus: Here's a second print statement\nprint(\"I'm learning Python!\")\n\n# You could have written ANY message, like:\n# print(\"My name is Alice\")\n# print(\"Python is fun!\")\n# print(\"2025 is my year!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors and produces output",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** The command to display text is `print`. Remember to keep the quotation marks around your message!\n\nYour code should look like: `print(\"Your message here\")`"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "print(Hello)  ‚ùå Wrong - Python thinks Hello is a variable",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "Print(\"Hello\")  ‚ùå Wrong - capital P",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "PRINT(\"Hello\")  ‚ùå Wrong - all caps",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print \"Hello\"  ‚ùå Wrong in Python 3",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(\"Hello')  ‚ùå Wrong - starts with \" but ends with '",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-01-lesson-02",
          "title": "Your First Python Playground",
          "moduleId": "module-01",
          "order": 2,
          "estimatedMinutes": 12,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Before you can speak Python to a computer, you need a place where the computer can listen and respond. Think of it like this:\n\n- If you want to cook, you need a **kitchen**\n- If you want to paint, you need a **canvas**\n- If you want to write Python code, you need a **development environment**\n\nDon't let that fancy term scare you! A 'development environment' is just a place where you write code and see what happens when you run it. It's your programming workspace.\n\n**Good news:** Code Tutor has a built-in code editor! Just write your code in the editor panel and click 'Run Code' to execute it.\n\n**To run Python code, you'll need Python installed:**\n\n1. Download Python from https://www.python.org/downloads/\n2. During installation, check 'Add Python to PATH'\n3. Restart Code Tutor\n\nOnce Python is installed, you can write and run code directly in this app!\n\n**Think of it like learning to drive:** You don't buy a car on day one. You use a driving school's car first, then get your own when you're ready. Code Tutor is your driving school!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nüêç Welcome to your Python Playground!\nPython can do math: 5 + 3 = 8\nPython can:\n  - Display text\n  - Calculate numbers\n  - And much, much more!\n\nüéâ Your Python environment is working perfectly!\n```",
              "code": "# Let's test that everything is working!\n# This code will perform a few simple tasks\n\n# 1. Display a welcome message\nprint(\"üêç Welcome to your Python Playground!\")\n\n# 2. Do some simple math\nprint(\"Python can do math: 5 + 3 =\", 5 + 3)\n\n# 3. Display multiple lines\nprint(\"Python can:\")\nprint(\"  - Display text\")\nprint(\"  - Calculate numbers\")\nprint(\"  - And much, much more!\")\n\n# 4. Celebrate!\nprint(\"\\nüéâ Your Python environment is working perfectly!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's examine some new things in this code:\n\n<li>**`print(\"text\", 5 + 3)`** - You can print multiple things in one line! Separate them with commas. Python will display them with a space in between.\n\n<pre>`print(\"The answer is\", 42)  # Shows: The answer is 42`</pre></li><li>**`\\n`** - This is a special code that means 'new line' or 'press Enter'. It's like hitting the Enter key in the middle of your text.\n\n<pre>`print(\"Line 1\\nLine 2\")  # Shows two separate lines`</pre></li><li>**`5 + 3`** - When you write math without quotes, Python actually calculates it! The result (8) gets printed.\n\n```\nprint(5 + 3)     # Shows: 8\nprint(\"5 + 3\")   # Shows: 5 + 3 (just text)\n```\n</li><li>**Emojis** - Yes, Python supports emojis in strings! You can use them just like any other text. They make your output more fun and readable.\n\n</li>\n**The key concept:** Anything inside quotation marks is displayed exactly as written. Anything outside quotes (like `5 + 3`) is executed as Python code."
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- You can use web-based Python environments (playgrounds) to write and run code without installing anything\n- `print()` can display multiple items separated by commas\n- `\\n` creates a new line in your output\n- Math without quotes gets calculated; math in quotes is just text\n- Python can use emojis and special characters in strings\n- The asterisk (*) means multiplication in Python\n- Your code is personal‚Äîmake it yours!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-01-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a program that introduces yourself!\n\n**Requirements:**\n\n- Print a welcome message with your name\n- Print your favorite hobby or interest\n- Use Python to calculate your age in months (your age √ó 12)\n- Print a fun fact about yourself\n\n**Challenge yourself:** Use `\\n` to add blank lines between sections to make it easier to read!",
              "instructions": "**Your Mission:** Create a program that introduces yourself!\n\n**Requirements:**\n\n- Print a welcome message with your name\n- Print your favorite hobby or interest\n- Use Python to calculate your age in months (your age √ó 12)\n- Print a fun fact about yourself\n\n**Challenge yourself:** Use `\\n` to add blank lines between sections to make it easier to read!",
              "starterCode": "# Create your introduction program!\n\n# 1. Welcome message\nprint(\"____\")  # Replace with a greeting and your name\n\n# 2. Print a blank line for spacing\nprint(\"\\n\")\n\n# 3. Your hobby\nprint(\"My favorite hobby is: ____\")  # Fill in your hobby\n\n# 4. Calculate your age in months\n# If you're 25 years old, you'd write: print(\"I am\", 25 * 12, \"months old\")\nprint(\"I am\", ____ * 12, \"months old\")  # Replace ____ with your age\n\n# 5. A fun fact\nprint(\"____\")  # Add any fun fact about yourself!",
              "solution": "# Create your introduction program!\n\n# 1. Welcome message\nprint(\"üëã Hello! My name is Alex\")\n\n# 2. Print a blank line for spacing\nprint(\"\\n\")\n\n# 3. Your hobby\nprint(\"My favorite hobby is: reading science fiction books\")\n\n# 4. Calculate age in months\nprint(\"I am\", 25 * 12, \"months old\")\n\n# 5. A fun fact\nprint(\"Fun fact: I can solve a Rubik's cube in under 2 minutes!\")\n\n# Bonus: Add a closing message\nprint(\"\\nüöÄ I'm excited to learn Python!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Age calculation displays months correctly",
                  "expectedOutput": "300 months old",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Uses print with multiple arguments",
                  "expectedOutput": "I am",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- For the welcome message, try something like: `print(\"Hello! My name is Alex\")`\n- Remember to put text in quotation marks: `\"text goes here\"`\n- For math, you DON'T use quotes: `25 * 12` (not `\"25 * 12\"`)\n- The asterisk (*) means multiplication in Python"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "print(\"25 * 12\")  ‚ùå Shows: 25 * 12 (just text)",
                  "consequence": "Outputs the text '25 * 12' instead of calculating 300",
                  "correction": "Remove the quotes: print(25 * 12) to calculate"
                },
                {
                  "mistake": "print(\"I am\" 25 \"years old\")  ‚ùå Error!",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(\"/n\")   ‚ùå Wrong slash - just prints /n",
                  "consequence": "Outputs '/n' literally instead of a newline",
                  "correction": "Use backslash: print(\"\\n\") for a newline"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-01-lesson-03",
          "title": "Making the Computer Talk",
          "moduleId": "module-01",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at a drive-through restaurant. You pull up to the speaker and say your order. The speaker talks back: 'That'll be $8.50. Please pull forward.' Then you drive to the window, hand over your money, and receive your food.\n\n**That's a conversation!** You give information, they respond. Back and forth.\n\nIn programming, we call this **input and output**:\n\n- **Output** = The computer talking to YOU (like displaying text on screen)\n- **Input** = YOU talking to the computer (like typing something)\n\nSo far, we've only done output with `print()`. Now we're going to learn input, which lets your program ask questions and wait for answers. This transforms your code from a one-way announcement into a two-way conversation!\n\n**Real-world examples:**\n\n- When Netflix asks \"Who's watching?\" and you click your profile - that's input\n- When you type your password and hit Enter - that's input\n- When a game asks \"What's your name?\" and you type it - that's input\n\nNow YOUR programs can do the same thing!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nHello! What's your name?\n[User types: Sarah]\nNice to meet you, Sarah !\n\nWhat's your favorite color?\n[User types: blue]\nWow! blue is a great color!\n```",
              "code": "# Let's create our first interactive program!\n\n# Output: Ask the user for their name\nprint(\"Hello! What's your name?\")\n\n# Input: Wait for the user to type their name and press Enter\nname = input()\n\n# Output: Greet them personally\nprint(\"Nice to meet you,\", name, \"!\")\n\n# Let's ask another question\nprint(\"\\nWhat's your favorite color?\")\ncolor = input()\n\n# Respond\nprint(\"Wow!\", color, \"is a great color!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's break down this new concept:\n\n<li>**`name = input()`** - This is a BIG moment! Let's unpack it:\n\n- `input()` - This is a function (like `print()`) that pauses your program and waits for the user to type something and press Enter\n- `name =` - This creates a **variable** (a labeled storage box) called `name` and puts whatever the user typed into that box\n\nThink of it like this: `input()` is like a mailbox. When mail arrives, you put it in a labeled envelope (`name`) so you can find it later.\n\n</li><li>**Using the variable:** Once you've stored something in a variable, you can use it anywhere!\n\n<pre>`print(\"Nice to meet you,\", name, \"!\")`</pre>Python looks in the `name` box, finds \"Sarah\" (or whatever the user typed), and uses it.\n\n</li><li>**The equals sign (=):** In Python, `=` doesn't mean \"equals\" like in math. It means \"store this value in this variable.\" We call it the **assignment operator**.\n\n<pre>`color = input()  # Means: \"Take whatever input() gets and store it in 'color'\"`</pre></li>"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- `input()` pauses your program and waits for the user to type something and press Enter\n- Variables are like labeled storage boxes that hold information\n- You create a variable with: `variable_name = value`\n- The `=` sign means \"store this value\" (not \"equals\" like in math)\n- Variable names should be descriptive: `name`, `age`, `color` (not `x`, `y`, `z`)\n- When using a variable in `print()`, DON'T put it in quotes\n- You can put the prompt text inside `input()`: `input(\"Your question here: \")`\n- Variables let you store information and reuse it throughout your program"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-01-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a \"Getting to Know You\" program!\n\n**Your program should:**\n\n- Ask for the user's name and store it in a variable\n- Ask for their age and store it in a variable\n- Ask for their favorite food and store it in a variable\n- Print a summary that uses ALL three pieces of information\n\n**Example output:**\n\n<pre>What's your name? Alex\nHow old are you? 25\nWhat's your favorite food? pizza\n\nNice to meet you, Alex!\nYou are 25 years old and you love pizza!\nThat's awesome!</pre>",
              "instructions": "**Your Mission:** Create a \"Getting to Know You\" program!\n\n**Your program should:**\n\n- Ask for the user's name and store it in a variable\n- Ask for their age and store it in a variable\n- Ask for their favorite food and store it in a variable\n- Print a summary that uses ALL three pieces of information\n\n**Example output:**\n\n<pre>What's your name? Alex\nHow old are you? 25\nWhat's your favorite food? pizza\n\nNice to meet you, Alex!\nYou are 25 years old and you love pizza!\nThat's awesome!</pre>",
              "starterCode": "# Getting to Know You program\n\n# Ask for name\nprint(\"What's your name?\")\nname = ____  # Get the user's input\n\n# Ask for age\nprint(\"How old are you?\")\n____ = input()  # Create a variable called 'age' and store the input\n\n# Ask for favorite food\n____(\"What's your favorite food?\")\nfood = ____\n\n# Now create a summary using all three variables\nprint(\"\\nNice to meet you,\", ____, \"!\")\nprint(\"You are\", age, \"years old and you love\", ____, \"!\")\nprint(\"That's awesome!\")",
              "solution": "# Getting to Know You program - SOLUTION\n\n# Ask for name\nprint(\"What's your name?\")\nname = input()  # Get the user's input\n\n# Ask for age\nprint(\"How old are you?\")\nage = input()  # Create a variable called 'age' and store the input\n\n# Ask for favorite food\nprint(\"What's your favorite food?\")\nfood = input()\n\n# Now create a summary using all three variables\nprint(\"\\nNice to meet you,\", name, \"!\")\nprint(\"You are\", age, \"years old and you love\", food, \"!\")\nprint(\"That's awesome!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Program outputs greeting message",
                  "expectedOutput": "Nice to meet you,",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Program outputs final message",
                  "expectedOutput": "That's awesome!",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- To get user input, use: `input()`\n- To store it in a variable: `variable_name = input()`\n- To display text, use: `print(\"your text\")`\n- To use a variable in print, just write its name without quotes: `print(name)`\n- The blanks should be filled with either `input()`, `print`, or variable names like `name`, `age`, or `food`"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "print(\"Nice to meet you,\", \"name\", \"!\")  ‚ùå Shows: Nice to meet you, name !",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "input()  ‚ùå Input is collected but immediately forgotten",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(\"Hello,\", username, \"!\")  ‚ùå Error: 'username' is not defined",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(\"Hello,\", nama, \"!\")  ‚ùå Error: 'nama' is not defined (should be 'name')",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-01-lesson-04",
          "title": "Listening to the User",
          "moduleId": "module-01",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Remember when we learned that `input()` is like having a conversation with the computer? Well, there's a little trick that makes those conversations much smoother.\n\n**The current way (kind of clunky):**\n\n```\nprint(\"What's your name?\")\nname = input()\n```\nThis works, but it takes two lines to ask one question. Imagine if every time someone asked you a question, they had to:\n\n- First say \"I'm going to ask you a question now\"\n- Then actually ask the question\n\nThat would be weird, right?\n\n**The better way (smooth and natural):**\n\n<pre>`name = input(\"What's your name? \")`</pre>This does BOTH things in one line! It asks the question AND waits for the answer. Much more natural!\n\n**Think of it like this:**\n\nThe old way is like a robot: \"STATEMENT: I require your name. WAITING FOR INPUT.\"\n\nThe new way is like a friend: \"Hey, what's your name?\"\n\nSame result, but much friendlier and more efficient!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nWhat's your name? Jordan\nWhat city are you from? Seattle\nWhat's your favorite hobby? hiking\n\n========================================\n       GETTING TO KNOW YOU\n========================================\nName: Jordan\nCity: Seattle\nHobby: hiking\n========================================\n\nWelcome, Jordan from {city}!\nI hope you enjoy hiking today!\n```",
              "code": "# A smooth, conversational program\n\n# Ask questions with the prompt inside input()\nname = input(\"What's your name? \")\ncity = input(\"What city are you from? \")\nhobby = input(\"What's your favorite hobby? \")\n\n# Now let's use all that information\nprint(\"\\n\" + \"=\" * 40)  # Print a line of equal signs\nprint(\"       GETTING TO KNOW YOU\")\nprint(\"=\" * 40)\nprint(f\"Name: {name}\")\nprint(f\"City: {city}\")\nprint(f\"Hobby: {hobby}\")\nprint(\"=\" * 40)\nprint(f\"\\nWelcome, {name} from {city}!\")\nprint(f\"I hope you enjoy {hobby} today!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "There are some exciting new techniques in this code!\n\n<li>**`input(\"What's your name? \")`** - The text inside `input()` is called a **prompt**. It's displayed to the user, then Python waits for their response.\n\n**Notice the space!** The prompt ends with `\"name? \"` (with a space after the ?). This makes the user's typing appear one space after the question, which looks better:\n\n```\nWhat's your name? Jordan    ‚úÖ Looks good\nWhat's your name?Jordan     ‚ùå Squished together\n```\n</li><li>**`\"=\" * 40`** - Whoa! Multiply text? Yes! In Python, you can multiply strings:\n\n```\n\"=\" * 40        # Creates: ========================================\n\"Hi\" * 3        # Creates: HiHiHi\n\"-\" * 20        # Creates: --------------------\n```\nThis is super useful for creating lines, borders, or patterns!\n\n</li><li>**`f\"Name: {name}\"`** - This is called an **f-string** (formatted string). It's a modern, clean way to insert variables into text.\n\nThe `f` before the quote tells Python: \"This string has variables in it.\" Anything inside `{curly braces}` gets replaced with its value.\n\n```\nname = \"Alex\"\nage = 25\n\n# Old way (still works):\nprint(\"My name is\", name, \"and I am\", age, \"years old\")\n\n# New way with f-strings (cleaner!):\nprint(f\"My name is {name} and I am {age} years old\")\n```\nBoth show the same thing, but f-strings are cleaner and easier to read!\n\n</li>"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- You can put a prompt directly inside `input()`: `input(\"Your question here: \")`\n- Always add a space at the end of your prompt for better formatting\n- You can multiply strings: `\"=\" * 20` creates 20 equal signs\n- F-strings (formatted strings) are the modern way to insert variables into text\n- F-strings syntax: `f\"text {variable} more text\"`\n- The `f` goes BEFORE the opening quote\n- Variables go inside `{curly braces}` WITHOUT quotes\n- F-strings make your code cleaner and easier to read than using lots of commas in `print()`"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-01-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a \"Mad Libs\" style story generator!\n\nMad Libs is a game where you ask for random words, then plug them into a story. The results are usually hilarious!\n\n**Your program should:**\n\n- Ask the user for:\n<li>An adjective (describing word like \"silly\" or \"sparkly\")\n- A noun (a thing, like \"banana\" or \"dinosaur\")\n- A verb (an action, like \"dancing\" or \"flying\")\n- Another adjective\n- A place (like \"the moon\" or \"a library\")\n\n</li>- Use those words to create a short, silly story\n- Use f-strings to make your code clean\n\n**Bonus:** Make your story funny and creative!",
              "instructions": "**Your Mission:** Create a \"Mad Libs\" style story generator!\n\nMad Libs is a game where you ask for random words, then plug them into a story. The results are usually hilarious!\n\n**Your program should:**\n\n- Ask the user for:\n<li>An adjective (describing word like \"silly\" or \"sparkly\")\n- A noun (a thing, like \"banana\" or \"dinosaur\")\n- A verb (an action, like \"dancing\" or \"flying\")\n- Another adjective\n- A place (like \"the moon\" or \"a library\")\n\n</li>- Use those words to create a short, silly story\n- Use f-strings to make your code clean\n\n**Bonus:** Make your story funny and creative!",
              "starterCode": "# Mad Libs Story Generator\n\nprint(\"Let's create a silly story together!\")\nprint(\"I'll ask for some words, and you provide them.\\n\")\n\n# Collect the words\nadjective1 = input(\"Give me an adjective (describing word): \")\nnoun = input(\"Give me a noun (a thing): \")\n____ = input(\"Give me a verb ending in 'ing' (an action): \")\nadjective2 = ____\nplace = input(\"Give me a place: \")\n\n# Create the story using f-strings\nprint(\"\\n\" + \"=\" * 50)\nprint(\"           YOUR SILLY STORY\")\nprint(\"=\" * 50)\nprint(f\"Once upon a time, there was a {____} {noun}.\")\nprint(f\"It loved {verb} in {place}.\")\nprint(f\"One day, it became very {____}!\")\nprint(f\"The {noun} lived happily ever after.\")\nprint(\"=\" * 50)",
              "solution": "# Mad Libs Story Generator - SOLUTION\n\nprint(\"Let's create a silly story together!\")\nprint(\"I'll ask for some words, and you provide them.\\n\")\n\n# Collect the words\nadjective1 = input(\"Give me an adjective (describing word): \")\nnoun = input(\"Give me a noun (a thing): \")\nverb = input(\"Give me a verb ending in 'ing' (an action): \")\nadjective2 = input(\"Give me another adjective: \")\nplace = input(\"Give me a place: \")\n\n# Create the story using f-strings\nprint(\"\\n\" + \"=\" * 50)\nprint(\"           YOUR SILLY STORY\")\nprint(\"=\" * 50)\nprint(f\"Once upon a time, there was a {adjective1} {noun}.\")\nprint(f\"It loved {verb} in {place}.\")\nprint(f\"One day, it became very {adjective2}!\")\nprint(f\"The {noun} lived happily ever after.\")\nprint(\"=\" * 50)\n\n# Example output:\n# Once upon a time, there was a sparkly banana.\n# It loved dancing in the moon.\n# One day, it became very confused!\n# The banana lived happily ever after.",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Story title is displayed",
                  "expectedOutput": "YOUR SILLY STORY",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Story uses f-string with noun",
                  "expectedOutput": "Once upon a time, there was a",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Story has a happy ending",
                  "expectedOutput": "lived happily ever after",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- For the missing variable name (verb), you need to create a variable that stores the action word\n- For `adjective2`, you need to prompt the user for another adjective: `input(\"prompt here\")`\n- In the story, use the variable names inside curly braces `{}` in your f-strings\n- Remember: f-strings start with `f` before the opening quote: `f\"text {variable} more text\"`"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "print(\"The {noun} was {adjective}\")  ‚ùå Prints: The {noun} was {adjective}",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(f\"Hello {\"name\"}\")   ‚ùå Error! Quotes mess up the string",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(f&ldquo;Hello {name}&rdquo;)  ‚ùå",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-01-lesson-05",
          "title": "Mini-Project: A Conversation Program",
          "moduleId": "module-01",
          "order": 5,
          "estimatedMinutes": 20,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "**Congratulations!** You've learned the fundamentals of Python:\n\n- ‚úÖ How to display output with `print()`\n- ‚úÖ How to get input from users with `input()`\n- ‚úÖ How to store information in variables\n- ‚úÖ How to create clean, readable output with f-strings\n\nNow it's time to put it all together in a real project!\n\n**Project Goal:** Create an interactive chatbot that has a multi-turn conversation with the user.\n\n**Think of it like building with LEGO blocks:**\n\nYou've been learning about individual blocks (print, input, variables, f-strings). Now we're going to snap them together to build something cool! Each block you've learned is simple on its own, but when combined, they can create something that feels almost magical.\n\n**What makes a good conversation program?**\n\n- **It's personal** - Uses the person's name and remembers what they said\n- **It's engaging** - Asks interesting questions\n- **It's responsive** - Reacts to what the user tells it\n- **It's polite** - Greets and says goodbye\n\nYour program will do all of these things!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n==================================================\n    WELCOME TO YOUR PERSONAL ASSISTANT\n==================================================\n\nHello! What's your name? Emma\n\nNice to meet you, Emma!\nHow are you feeling today, Emma? excited\nI'm glad you're feeling excited!\n\nHow old are you? 24\n\nWow! That means you've been alive for approximately:\n  üóìÔ∏è  288 months\n  üìÖ  8760 days\n\nWhat's one goal you have this year, Emma? learn Python\nThat's awesome! I believe you can achieve learn Python!\nWhat's your favorite food? sushi\nWhat's your favorite color? blue\n\n==================================================\n           CONVERSATION SUMMARY\n==================================================\nName: Emma\nAge: 24 years old (288 months!)\nFeeling: excited\nGoal: learn Python\nFavorite Food: sushi\nFavorite Color: blue\n==================================================\n\nThank you for chatting with me, Emma!\nI hope you enjoy some blue sushi today!\nGood luck with your goals! üöÄ\n```",
              "code": "# Personal Assistant Chatbot - Example Project\n\nprint(\"=\"*50)\nprint(\"    WELCOME TO YOUR PERSONAL ASSISTANT\")\nprint(\"=\"*50)\n\n# Get to know the user\nname = input(\"\\nHello! What's your name? \")\nprint(f\"\\nNice to meet you, {name}!\")\n\n# Ask about their day\nfeeling = input(f\"How are you feeling today, {name}? \")\nprint(f\"I'm glad you're feeling {feeling}!\")\n\n# Get their age and calculate fun facts\nage = input(\"\\nHow old are you? \")\nage_months = int(age) * 12  # Convert age to months\nage_days = int(age) * 365   # Approximate days lived\n\nprint(f\"\\nWow! That means you've been alive for approximately:\")\nprint(f\"  üóìÔ∏è  {age_months} months\")\nprint(f\"  üìÖ  {age_days} days\")\n\n# Future plans\ngoal = input(f\"\\nWhat's one goal you have this year, {name}? \")\nprint(f\"That's awesome! I believe you can achieve {goal}!\")\n\n# Favorite things\nfav_food = input(\"What's your favorite food? \")\nfav_color = input(\"What's your favorite color? \")\n\n# Summary\nprint(\"\\n\" + \"=\"*50)\nprint(\"           CONVERSATION SUMMARY\")\nprint(\"=\"*50)\nprint(f\"Name: {name}\")\nprint(f\"Age: {age} years old ({age_months} months!)\")\nprint(f\"Feeling: {feeling}\")\nprint(f\"Goal: {goal}\")\nprint(f\"Favorite Food: {fav_food}\")\nprint(f\"Favorite Color: {fav_color}\")\nprint(\"=\"*50)\n\nprint(f\"\\nThank you for chatting with me, {name}!\")\nprint(f\"I hope you enjoy some {fav_color} {fav_food} today!\")\nprint(\"Good luck with your goals! üöÄ\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "This project introduces one new concept: **converting text to numbers**.\n\n<li>**`int(age)`** - This converts text to an integer (whole number).\n\n**Why is this necessary?** When you use `input()`, Python treats everything as text (a string), even if the user types a number.\n\n```\nage = input(\"How old are you? \")  # If user types \"24\", age = \"24\" (text)\nage_months = age * 12              # ‚ùå Error! Can't multiply text\n\nage = input(\"How old are you? \")   # User types \"24\", age = \"24\" (text)\nage_months = int(age) * 12         # ‚úÖ Works! int() converts \"24\" to 24 (number)\n```\n</li><li>**The `int()` function explained:**\n\n- `int` is short for \"integer\" (a whole number)\n- It takes text that looks like a number and converts it to an actual number\n- `int(\"24\")` ‚Üí `24`\n- `int(\"100\")` ‚Üí `100`\n\n</li><li>**Using the converted number:**\n\n```\nage_months = int(age) * 12\nage_days = int(age) * 365\n```\nNow we can do math! `*` means multiply, so if age is 24: - `24 * 12 = 288` months - `24 * 365 = 8,760` days\n\n</li><li>**Everything else:** The rest is just clever use of what you already know:\n\n- Variables to remember information\n- F-strings to create personalized messages\n- String multiplication (`\"=\"*50`) for decorative lines\n- Good prompts to make the conversation natural\n\n</li>"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- You can combine `print()`, `input()`, variables, and f-strings to create interactive programs\n- `input()` always returns text (a string), even if the user types a number\n- Use `int()` to convert text to a whole number before doing math\n- Good programs are more than just question-and-answer‚Äîthey process information and provide value\n- Planning your program's structure before coding makes it easier to build\n- Visual formatting (lines, spacing, emojis) makes output more readable and engaging\n- Using variables lets you reference information throughout your program\n- The best programs reflect your creativity and interests!\n\n<p class='congratulations-box' style='background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 10px; margin-top: 20px;'>**üéâ Congratulations!**\nYou've completed Module 1! You now understand:\n‚Ä¢ What programming is\n‚Ä¢ How to use Python basics\n‚Ä¢ How to create interactive programs\n\nYou're ready to learn about storing and organizing information in Module 2!</p>"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-01-lesson-05-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create your OWN conversation program! Make it unique and fun.\n\n**Requirements - your program must:**\n\n- Have a creative title/greeting\n- Ask at least 5 different questions\n- Store all answers in variables\n- Use f-strings to create personalized responses\n- Include at least ONE calculation (like the age example)\n- Display a summary at the end using all the collected information\n- Have a friendly goodbye message\n\n**Ideas to get you started:**\n\n- **A Travel Advisor:** Ask where they want to go, their budget, how many days, etc.\n- **A Future Teller:** Ask their age, calculate what year they'll turn 100, etc.\n- **A Recipe Helper:** Ask for ingredients, calculate servings, etc.\n- **A Fitness Buddy:** Ask about exercise goals, calculate calories, etc.\n- **A Study Planner:** Ask about subjects, calculate study hours needed, etc.\n\n**Be creative!** This is YOUR program. Make it about something YOU find interesting!",
              "instructions": "**Your Mission:** Create your OWN conversation program! Make it unique and fun.\n\n**Requirements - your program must:**\n\n- Have a creative title/greeting\n- Ask at least 5 different questions\n- Store all answers in variables\n- Use f-strings to create personalized responses\n- Include at least ONE calculation (like the age example)\n- Display a summary at the end using all the collected information\n- Have a friendly goodbye message\n\n**Ideas to get you started:**\n\n- **A Travel Advisor:** Ask where they want to go, their budget, how many days, etc.\n- **A Future Teller:** Ask their age, calculate what year they'll turn 100, etc.\n- **A Recipe Helper:** Ask for ingredients, calculate servings, etc.\n- **A Fitness Buddy:** Ask about exercise goals, calculate calories, etc.\n- **A Study Planner:** Ask about subjects, calculate study hours needed, etc.\n\n**Be creative!** This is YOUR program. Make it about something YOU find interesting!",
              "starterCode": "# My Conversation Program\n# Created by: [Your Name]\n\n# Create a title/greeting\nprint(\"=\"*50)\nprint(\"    YOUR CREATIVE TITLE HERE\")\nprint(\"=\"*50)\n\n# Start the conversation\n# Ask your first question\nquestion1 = input(\"\\nYour first question here: \")\n\n# Add more questions (you need at least 5 total!)\n\n\n# Do a calculation with one of the answers\n# Example: number_answer = int(question1) * 2\n\n\n# Create a summary section\nprint(\"\\n\" + \"=\"*50)\nprint(\"           SUMMARY\")\nprint(\"=\"*50)\n# Display all the information you collected\n\n\n# Goodbye message\nprint(\"\\nThank you for using [Your Program Name]!\")",
              "solution": "# Future Year Calculator - SAMPLE SOLUTION\n# Created by: The Python Team\n\nprint(\"=\"*50)\nprint(\"    FUTURE YEAR CALCULATOR\")\nprint(\"    Discover Your Future Milestones!\")\nprint(\"=\"*50)\n\n# Get user information\nname = input(\"\\nWhat's your name? \")\nprint(f\"\\nHello, {name}! Let's explore your future together.\")\n\nage = input(\"How old are you right now? \")\ncurrent_year = input(\"What year is it? \")\n\n# Ask about goals\nmilestone_age = input(\"At what age would you like to achieve a major goal? \")\ngoal = input(\"What goal do you want to achieve? \")\nfavorite_place = input(\"What's your dream travel destination? \")\n\n# Calculate future milestones\nage_100 = int(current_year) + (100 - int(age))\nyears_to_milestone = int(milestone_age) - int(age)\nmilestone_year = int(current_year) + years_to_milestone\n\n# Create an exciting summary\nprint(\"\\n\" + \"=\"*50)\nprint(\"        YOUR FUTURE MILESTONES\")\nprint(\"=\"*50)\nprint(f\"Name: {name}\")\nprint(f\"Current Age: {age} years old\")\nprint(f\"Current Year: {current_year}\")\nprint(\"\\n--- EXCITING PREDICTIONS ---\")\nprint(f\"üéÇ You'll turn 100 in the year {age_100}!\")\nprint(f\"üéØ In {years_to_milestone} years (year {milestone_year}),\")\nprint(f\"   you'll be {milestone_age} and achieve: {goal}\")\nprint(f\"‚úàÔ∏è  Don't forget to visit {favorite_place}!\")\nprint(\"=\"*50)\n\nprint(f\"\\nAmazing, {name}! The future is bright! üåü\")\nprint(f\"Start working towards {goal} today!\")\nprint(\"\\nThank you for using the Future Year Calculator!\")\nprint(\"Good luck on your journey! üöÄ\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Program has a title section with decorative line",
                  "expectedOutput": "==================================================",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Program has a summary section",
                  "expectedOutput": "SUMMARY",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Program includes a goodbye message",
                  "expectedOutput": "Thank you",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- **Structure your program in sections:**\n<li>Title/Greeting\n- Questions (5+ with good prompts)\n- Calculations (at least 1)\n- Summary\n- Goodbye\n\n</li>- **For calculations:** Use `int(variable_name)` to convert text to a number first\n- **Make it personal:** Use the user's name throughout the conversation\n- **Use f-strings:** `f\"Thanks, {name}! You said {answer}.\"`\n- **Add decorative elements:** `\"=\"*50`, emojis, spacing with `\\n`\n- **Test your program:** Run it yourself first to make sure it makes sense!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "future = age + 10     # ‚ùå Error! Can't add number to text",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "result = int(name)      # ‚ùå Error! Can't convert \"Emma\" to a number",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "‚ùå Bad: Ask for age, then just print the age",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-02",
      "title": "Variables",
      "description": "Understanding variables and data storage",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "module-02-lesson-01",
          "title": "The Labeled Box (Variables Explained)",
          "moduleId": "module-02",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're moving into a new apartment. You have lots of boxes, but if they're not labeled, you'll never find anything! You need to write on each box:\n\n- üì¶ 'Kitchen Stuff'\n- üì¶ 'Books'\n- üì¶ 'Clothes'\n- üì¶ 'Electronics'\n\nNow when you need a specific item, you know exactly which box to open.\n\n**Variables work exactly like labeled moving boxes!**\n\nA variable is a container that stores information, and you give it a name (label) so you can find that information later. Without variables, your program would forget everything immediately‚Äîlike having boxes with no labels!\n\n**Real-world analogy:**\n\n- Your phone saves contacts with names (variables): 'Mom', 'Best Friend', 'Pizza Place'\n- Without names, you'd just have a list of random numbers‚Äîimpossible to use!\n- The name 'Mom' points to a phone number, just like a variable name points to a value\n\nIn Python, you create a variable by giving it a name and assigning it a value using the equals sign (=)."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nCustomer Information:\nName: Sarah\nAge: 28\nItem Price: $19.99\nStudent Discount Eligible: True\n\nUpdated Age: 29\n```",
              "code": "# Creating variables - like labeling boxes\n\n# A variable that stores text (a person's name)\nname = \"Sarah\"\n\n# A variable that stores a number (age)\nage = 28\n\n# A variable that stores a decimal number (price)\nprice = 19.99\n\n# A variable that stores a True/False value\nis_student = True\n\n# Now let's use these variables\nprint(\"Customer Information:\")\nprint(f\"Name: {name}\")\nprint(f\"Age: {age}\")\nprint(f\"Item Price: ${price}\")\nprint(f\"Student Discount Eligible: {is_student}\")\n\n# You can change what's in a variable (relabel the box)\nage = 29  # Happy birthday!\nprint(f\"\\nUpdated Age: {age}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's understand the rules for creating and using variables:\n\n<li>**Creating a variable:** `variable_name = value`\n\n<pre>`name = \"Sarah\"  # Create a variable called 'name', put \"Sarah\" in it`</pre>The `=` sign is like a label maker. It says: \"From now on, whenever I say 'name', I mean 'Sarah'.\"\n\n</li><li>**Variable naming rules:**\n\n- Can contain letters, numbers, and underscores: `my_age_2` ‚úÖ\n- Must start with a letter or underscore, NOT a number: `age2` ‚úÖ, `2age` ‚ùå\n- Cannot contain spaces: `user_name` ‚úÖ, `user name` ‚ùå\n- Case-sensitive: `Name` and `name` are different variables\n- Cannot use Python keywords (like `print`, `if`, `for`)\n\n</li><li>**Good variable names are descriptive:**\n\n```\n# Bad - what does 'x' mean?\nx = 25\n\n# Good - clearly stores someone's age\nage = 25\n```\n</li><li>**Changing a variable's value:**\n\n```\nscore = 100   # Start with 100\nscore = 150   # Change it to 150\n# The old value (100) is gone; score now holds 150\n```\nIt's like taking items out of a labeled box and putting different items in!\n\n</li>"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- Variables are like labeled boxes that store information\n- Create a variable with: `variable_name = value`\n- Variable names should be descriptive: `age` not `x`\n- Variable naming rules: start with letter, no spaces, use underscores\n- Text (strings) needs quotes: `\"Sarah\"`\n- Numbers don't need quotes: `25`\n- True/False are special values (Booleans): `True`, `False`\n- You can change a variable's value anytime\n- Good variable names make your code readable and maintainable"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-02-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a profile card for yourself using variables!\n\n**Requirements:**\n\n- Create variables for:\n<li>Your first name\n- Your last name\n- Your age\n- Your favorite number\n- Whether you like pizza (True or False)\n- Your city\n\n</li>- Use f-strings to display all this information in a nicely formatted profile\n- Calculate and display your age in months\n- Change one variable and print the updated value",
              "instructions": "**Your Mission:** Create a profile card for yourself using variables!\n\n**Requirements:**\n\n- Create variables for:\n<li>Your first name\n- Your last name\n- Your age\n- Your favorite number\n- Whether you like pizza (True or False)\n- Your city\n\n</li>- Use f-strings to display all this information in a nicely formatted profile\n- Calculate and display your age in months\n- Change one variable and print the updated value",
              "starterCode": "# Personal Profile Card\n\n# Create your variables\nfirst_name = \"____\"  # Your first name\nlast_name = \"____\"   # Your last name\nage = ____           # Your age (number, no quotes)\nfavorite_number = ____\nlikes_pizza = ____   # True or False (no quotes)\ncity = \"____\"\n\n# Calculate age in months\nage_in_months = age * 12\n\n# Display your profile\nprint(\"=\" * 40)\nprint(\"       PERSONAL PROFILE CARD\")\nprint(\"=\" * 40)\nprint(f\"Name: {first_name} {last_name}\")\nprint(f\"Age: {age} years ({age_in_months} months)\")\nprint(f\"City: {____}\")\nprint(f\"Favorite Number: {____}\")\nprint(f\"Likes Pizza: {____}\")\nprint(\"=\" * 40)\n\n# Update one variable\nage = ____  # Change your age\nprint(f\"\\nUpdated Age: {age}\")",
              "solution": "# Personal Profile Card - SOLUTION\n\n# Create your variables\nfirst_name = \"Alex\"\nlast_name = \"Johnson\"\nage = 25\nfavorite_number = 7\nlikes_pizza = True\ncity = \"Portland\"\n\n# Calculate age in months\nage_in_months = age * 12\n\n# Display your profile\nprint(\"=\" * 40)\nprint(\"       PERSONAL PROFILE CARD\")\nprint(\"=\" * 40)\nprint(f\"Name: {first_name} {last_name}\")\nprint(f\"Age: {age} years ({age_in_months} months)\")\nprint(f\"City: {city}\")\nprint(f\"Favorite Number: {favorite_number}\")\nprint(f\"Likes Pizza: {likes_pizza}\")\nprint(\"=\" * 40)\n\n# Update one variable\nage = 26  # Birthday!\nage_in_months = age * 12  # Recalculate\nprint(f\"\\nUpdated Age: {age} years ({age_in_months} months)\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Profile card title is displayed",
                  "expectedOutput": "PERSONAL PROFILE CARD",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Age is calculated in months",
                  "expectedOutput": "months",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Updated age is shown",
                  "expectedOutput": "Updated Age:",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- Text values need quotes: `\"Sarah\"`\n- Numbers DON'T need quotes: `25`\n- True and False are special values (no quotes, capital first letter): `True` or `False`\n- To use a variable in an f-string: `f\"Text {variable_name} more text\"`\n- Make sure all variable names in the print statements match the names you created above!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "age = \"25\"  ‚ùå This is text, not a number!",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "name = Sarah  ‚ùå Python looks for a variable called Sarah",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "</li><li>**Wrong capitalization for True/False:**",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "likes_pizza = true   ‚ùå Lowercase doesn't work",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "likes_pizza = TRUE   ‚ùå All caps doesn't work",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(f\"Number: {fav_num}\")  ‚ùå 'fav_num' was never created!",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-02-lesson-02",
          "title": "Different Kinds of Boxes (Data Types: Strings, Integers, Floats)",
          "moduleId": "module-02",
          "order": 2,
          "estimatedMinutes": 18,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're organizing your garage. You have different types of containers for different things:\n\n- üì¶ **Cardboard boxes** for storing books and papers (fragile text items)\n- üß∞ **Plastic bins with numbers** for counting screws and nails (whole numbers)\n- ‚öñÔ∏è **Containers with measurement scales** for liquids like paint (precise amounts with decimals)\n- ‚úÖ **Yes/No labels** for items that are either here or not (True/False)\n\nYou wouldn't store liquid paint in a cardboard box, right? And you wouldn't count screws with a measuring cup. **You use the right container for the right type of thing.**\n\n**Python works the same way!** It has different \"types\" of data, and each type is suited for a specific purpose:\n\n- **Strings (str)** - Text and words. Like labels on boxes: `\"Hello\"`, `\"Sarah\"`, `\"123 Main St\"`\n- **Integers (int)** - Whole numbers for counting. Like counting screws: `5`, `100`, `-42`\n- **Floats (float)** - Numbers with decimal points for precise measurements. Like measuring paint: `3.14`, `19.99`, `-0.5`\n- **Booleans (bool)** - True or False values. Like yes/no questions: `True`, `False`\n\n**Why does this matter?**\n\nBecause you can't do math with text, and you can't make \"HELLO\" uppercase if it's a number! Python needs to know what kind of data you're working with so it knows what operations make sense.\n\nThink of it like this: if someone hands you a container, you need to know if it holds text, numbers, or true/false values before you know what you can do with it."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nSTRINGS (text):\nname = Alice\nType: <class 'str'>\n\nINTEGERS (whole numbers):\nage = 25\nType: <class 'int'>\n\nFLOATS (decimal numbers):\nprice = 19.99\nType: <class 'float'>\n\nBOOLEANS (True/False):\nis_student = True\nType: <class 'bool'>\n\nMIXING TYPES:\nString + String: Hello World\nInteger + Integer: 15\nFloat + Integer: 5.5\nString * Integer: HaHaHa\n```",
              "code": "# Let's explore Python's main data types!\n\n# STRING - text wrapped in quotes\nname = \"Alice\"\ngreeting = 'Hello, World!'\naddress = \"123 Main Street\"\n\nprint(\"STRINGS (text):\")\nprint(f\"name = {name}\")\nprint(f\"Type: {type(name)}\")\nprint()\n\n# INTEGER - whole numbers (no quotes, no decimal point)\nage = 25\nstudents = 100\ntemperature = -5\n\nprint(\"INTEGERS (whole numbers):\")\nprint(f\"age = {age}\")\nprint(f\"Type: {type(age)}\")\nprint()\n\n# FLOAT - numbers with decimal points\nprice = 19.99\npi = 3.14159\ntemperature_precise = 98.6\n\nprint(\"FLOATS (decimal numbers):\")\nprint(f\"price = {price}\")\nprint(f\"Type: {type(price)}\")\nprint()\n\n# BOOLEAN - True or False (capital T and F, no quotes)\nis_student = True\nhas_license = False\n\nprint(\"BOOLEANS (True/False):\")\nprint(f\"is_student = {is_student}\")\nprint(f\"Type: {type(is_student)}\")\nprint()\n\n# What happens when you mix types?\nprint(\"MIXING TYPES:\")\nprint(f\"String + String: {'Hello' + ' ' + 'World'}\")\nprint(f\"Integer + Integer: {10 + 5}\")\nprint(f\"Float + Integer: {3.5 + 2}\")\nprint(f\"String * Integer: {'Ha' * 3}\")\n# print(f\"String + Integer: {'Age: ' + 25}\")  # This would cause an ERROR!",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's break down each data type and understand the rules:\n\n### 1. Strings (str) - The Text Type\n\n<li>**What they are:** Any text wrapped in quotes (single `'` or double `\"`)\n\n```\nname = \"Alice\"     # Double quotes\ngreeting = 'Hi!'   # Single quotes (works the same)\nmessage = \"123\"    # Even numbers in quotes are strings!\n```\n</li><li>**Key rule:** MUST have matching quotes at start and end\n\n```\n\"Hello\"  ‚úÖ Correct\n'Hello'  ‚úÖ Also correct\n\"Hello'  ‚ùå Error - quotes don't match!\n```\n</li><li>**The `type()` function:** Tells you what type a value is\n\n<pre>`print(type(\"Alice\"))  # Shows: <class 'str'>`</pre>Think of `type()` as asking \"What kind of container is this?\"\n\n</li>\n### 2. Integers (int) - The Whole Number Type\n\n<li>**What they are:** Whole numbers with NO decimal point and NO quotes\n\n```\nage = 25        # Positive integer\ncount = 0       # Zero is an integer\ndebt = -500     # Negative integer\n```\n</li><li>**Key rule:** NO quotes, NO decimal point\n\n```\nage = 25       ‚úÖ Integer\nage = \"25\"     ‚ùå String (has quotes)\nage = 25.0     ‚ùå Float (has decimal point)\n```\n</li><li>**You can do math:** +, -, *, /, //, %, **\n\n```\nstudents = 20 + 5   # Addition: 25\ngroups = 20 // 5    # Division (whole number): 4\nsquared = 5 ** 2    # Exponent: 25\n```\n</li>\n### 3. Floats (float) - The Decimal Number Type\n\n<li>**What they are:** Numbers with a decimal point\n\n```\nprice = 19.99\npi = 3.14159\ntemperature = -2.5\nexact_value = 5.0  # Even whole numbers with .0 are floats!\n```\n</li><li>**Key rule:** MUST have a decimal point (even if it's .0)\n\n```\nprice = 19.99  ‚úÖ Float\nprice = 20     ‚ùå Integer (no decimal point)\n```\n</li><li>**Mixing int and float:** Result is always a float\n\n```\nresult = 5 + 2.5   # 5 (int) + 2.5 (float) = 7.5 (float)\nprint(type(result))  # <class 'float'>\n```\n</li><li>**IEEE 754 Standard:** Python uses 64-bit precision for floats (about 15-17 decimal digits of accuracy)\n\n</li>\n### 4. Booleans (bool) - The True/False Type\n\n<li>**What they are:** Only TWO possible values: `True` or `False`\n\n```\nis_raining = True\nhas_license = False\n```\n</li><li>**Key rules:**\n\n- Must be capitalized: `True` and `False` (not `true` or `false`)\n- NO quotes (with quotes they become strings)\n\n```\nis_student = True    ‚úÖ Boolean\nis_student = true    ‚ùå Error (not capitalized)\nis_student = \"True\"  ‚ùå String (has quotes)\n```\n</li>\n### 5. Mixing Types - What Works and What Doesn't\n<table><thead><tr><th>Operation</th><th>Example</th><th>Result</th></tr></thead><tbody><tr><td>String + String</td><td>`\"Hello\" + \" World\"`</td><td>‚úÖ `\"Hello World\"`</td></tr><tr><td>Integer + Integer</td><td>`5 + 3`</td><td>‚úÖ `8`</td></tr><tr><td>Float + Integer</td><td>`5.5 + 2`</td><td>‚úÖ `7.5`</td></tr><tr><td>String * Integer</td><td>`\"Ha\" * 3`</td><td>‚úÖ `\"HaHaHa\"`</td></tr><tr><td>String + Integer</td><td>`\"Age: \" + 25`</td><td>‚ùå TypeError!</td></tr></tbody></table>**The golden rule:** You can't directly combine strings and numbers with `+`. You need to convert them first (we'll learn this next lesson!)."
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- Python has four main basic data types: **str** (strings), **int** (integers), **float** (decimals), and **bool** (True/False)\n- **Strings** are text in quotes: `\"Hello\"` or `'Hello'`\n- **Integers** are whole numbers without quotes: `42`, `-5`, `0`\n- **Floats** are decimal numbers: `3.14`, `19.99`, `-2.5`\n- **Booleans** are `True` or `False` (capitalized, no quotes)\n- Use `type(variable)` to check what type of data a variable holds\n- You can do math with integers and floats, but NOT directly with strings\n- Mixing int and float in math gives you a float result\n- You CAN multiply a string by an integer to repeat it: `\"Hi\" * 3` = `\"HiHiHi\"`\n- Each type has its own \"rules\" and \"superpowers\" - use the right type for the right job!\n- Python follows IEEE 754 standard for floats (64-bit, ~15-17 decimal digits precision)"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-02-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a \"Player Profile\" program that demonstrates all four data types!\n\n**Requirements:**\n\n- Create variables for:\n<li>Player name (string)\n- Player level (integer)\n- Health points (float)\n- Is online (boolean)\n\n</li>- Use `type()` to verify each variable's type\n- Display a formatted profile showing all the information\n- Perform at least one math operation with numbers\n- Try multiplying a string by an integer\n\n**Bonus Challenge:** Calculate the player's health percentage (current health / max health * 100) and display it!",
              "instructions": "**Your Mission:** Create a \"Player Profile\" program that demonstrates all four data types!\n\n**Requirements:**\n\n- Create variables for:\n<li>Player name (string)\n- Player level (integer)\n- Health points (float)\n- Is online (boolean)\n\n</li>- Use `type()` to verify each variable's type\n- Display a formatted profile showing all the information\n- Perform at least one math operation with numbers\n- Try multiplying a string by an integer\n\n**Bonus Challenge:** Calculate the player's health percentage (current health / max health * 100) and display it!",
              "starterCode": "# Player Profile Program\n\n# Create your variables (replace the ____ )\nplayer_name = \"____\"        # A string (use quotes)\nplayer_level = ____         # An integer (no quotes, no decimal)\nhealth_points = ____        # A float (use decimal point)\nis_online = ____            # True or False (no quotes, capital T/F)\n\n# Display the profile\nprint(\"=\" * 40)\nprint(\"       PLAYER PROFILE\")\nprint(\"=\" * 40)\nprint(f\"Name: {player_name}\")\nprint(f\"Level: {player_level}\")\nprint(f\"Health: {health_points} HP\")\nprint(f\"Status: {'Online' if is_online else 'Offline'}\")\nprint(\"=\" * 40)\n\n# Check the types\nprint(\"\\nDATA TYPES:\")\nprint(f\"player_name type: {type(____)}\")     # Fill in the variable name\nprint(f\"player_level type: {type(____)}\")   # Fill in the variable name\nprint(f\"health_points type: {type(____)}\")  # Fill in the variable name\nprint(f\"is_online type: {type(____)}\")      # Fill in the variable name\n\n# Do some math\nnext_level = player_level + ____  # Add 1 to level\nprint(f\"\\nNext level will be: {next_level}\")\n\n# String multiplication\nbattle_cry = \"____\" * 3  # Repeat any word 3 times\nprint(f\"Battle cry: {battle_cry}\")\n\n# BONUS: Calculate health percentage\nmax_health = 100.0  # Maximum health\nhealth_percent = (health_points / max_health) * 100\nprint(f\"\\nHealth: {health_percent}%\")",
              "solution": "# Player Profile Program - SOLUTION\n\n# Create your variables\nplayer_name = \"DragonSlayer\"    # String\nplayer_level = 42               # Integer\nhealth_points = 87.5            # Float\nis_online = True                # Boolean\n\n# Display the profile\nprint(\"=\" * 40)\nprint(\"       PLAYER PROFILE\")\nprint(\"=\" * 40)\nprint(f\"Name: {player_name}\")\nprint(f\"Level: {player_level}\")\nprint(f\"Health: {health_points} HP\")\nprint(f\"Status: {'Online' if is_online else 'Offline'}\")\nprint(\"=\" * 40)\n\n# Check the types\nprint(\"\\nDATA TYPES:\")\nprint(f\"player_name type: {type(player_name)}\")\nprint(f\"player_level type: {type(player_level)}\")\nprint(f\"health_points type: {type(health_points)}\")\nprint(f\"is_online type: {type(is_online)}\")\n\n# Do some math\nnext_level = player_level + 1\nprint(f\"\\nNext level will be: {next_level}\")\n\n# String multiplication\nbattle_cry = \"Victory\" * 3\nprint(f\"Battle cry: {battle_cry}\")\n\n# BONUS: Calculate health percentage\nmax_health = 100.0\nhealth_percent = (health_points / max_health) * 100\nprint(f\"\\nHealth: {health_percent}%\")\n\n# Additional examples:\nprint(\"\\n--- EXTRA EXAMPLES ---\")\nprint(f\"Level squared: {player_level ** 2}\")\nprint(f\"Half health: {health_points / 2}\")\nprint(f\"Name in uppercase: {player_name.upper()}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Player profile title is displayed",
                  "expectedOutput": "PLAYER PROFILE",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Data types section is present",
                  "expectedOutput": "DATA TYPES:",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Battle cry uses string multiplication",
                  "expectedOutput": "Battle cry:",
                  "isVisible": false
                },
                {
                  "id": "test-5",
                  "description": "Health percentage is calculated",
                  "expectedOutput": "Health:",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- **Strings:** Use quotes: `\"DragonSlayer\"`\n- **Integers:** Whole numbers, no quotes: `25`\n- **Floats:** Include decimal point: `87.5`\n- **Booleans:** Capital T or F, no quotes: `True`\n- **type():** Put the variable name inside: `type(player_name)`\n- **String multiplication:** `\"Attack\" * 3` gives `\"AttackAttackAttack\"`\n- For the ternary operator (`if...else` in the print statement), just leave it as is - it's a preview of what you'll learn in Module 3!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "age = \"25\"       # ‚ùå This is a STRING",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "age = age + 1    # ‚ùå Error! Can't add number to string",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "</li><li>**Wrong capitalization for booleans:**",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "is_ready = true    ‚ùå Error: 'true' is not defined",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "is_ready = TRUE    ‚ùå Error: 'TRUE' is not defined",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "# ‚ùå This doesn't work:",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "print(type(age))  # ‚ùå This just CHECKS the type, doesn't change it!",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-02-lesson-03",
          "title": "Converting Between Data Types (Type Conversion & Casting)",
          "moduleId": "module-02",
          "order": 3,
          "estimatedMinutes": 20,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at an international airport with different currency exchange booths. You have US dollars, but you need euros to buy coffee at a French cafe. The exchange booth **converts** your dollars into euros.\n\nThe money is still <em>money</em>, but it's in a different <em>form</em> that works in a different context.\n\n**Python works the same way with data types!**\n\nSometimes you have a number stored as text (like `\"25\"` from user input), but you need to do math with it. Or you have a number like `42`, but you need to combine it with text in a sentence. Python can't do this automatically‚Äîyou need to **convert** (or \"cast\") the data from one type to another.\n\n**Real-world example:**\n\n- User types their age: `\"25\"` (string)\n- You need to calculate their birth year: `2025 - age`\n- Problem: Can't subtract a string from a number!\n- Solution: Convert the string to an integer first\n\n**Two types of conversion:**\n\n<li>**Implicit Conversion (Automatic):** Python does it for you\n\n```\nresult = 5 + 2.5  # Python automatically converts 5 to 5.0\n# 5 (int) + 2.5 (float) = 7.5 (float)\n```\n</li><li>**Explicit Conversion (Casting):** You tell Python to convert\n\n<pre>`age = int(\"25\")  # YOU explicitly convert \"25\" (string) to 25 (int)`</pre></li>\nThink of it like this: Implicit conversion is like a vending machine that automatically gives you change. Explicit conversion is like you manually exchanging bills at a currency booth‚Äîyou have to ask for it!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nString '25' ‚Üí Integer 25\nType: <class 'str'> ‚Üí <class 'int'>\n\nString '19.99' ‚Üí Float 19.99\n\nInteger 100 ‚Üí String '100'\nNow we can combine: 'Your score is ' + score_text\nYour score is 100\n\nFloat 98.6 ‚Üí Integer 98\n‚ö†Ô∏è Notice: The .6 is gone! int() truncates (cuts off) decimals.\n\nIMPLICIT CONVERSION:\n5 (int) + 2.5 (float) = 7.5 (type: float)\nPython automatically converted 5 to 5.0 to match the float!\n\nPRACTICAL EXAMPLE - Birth Year Calculator:\nIf you're 28, you were born around 1997\n\nCOMMON MISTAKES:\n‚ùå Error: can only concatenate str (not \"int\") to str\nFix: Use str(25) or f-string\n‚úÖ Correct: Age: 25\n```",
              "code": "# Type Conversion Examples\n\n# ===== EXPLICIT CONVERSION (You control it) =====\n\n# String to Integer\nage_text = \"25\"                    # This is a string\nage_number = int(age_text)         # Convert to integer\nprint(f\"String '{age_text}' ‚Üí Integer {age_number}\")\nprint(f\"Type: {type(age_text)} ‚Üí {type(age_number)}\")\nprint()\n\n# String to Float\nprice_text = \"19.99\"\nprice_number = float(price_text)   # Convert to float\nprint(f\"String '{price_text}' ‚Üí Float {price_number}\")\nprint()\n\n# Number to String\nscore = 100\nscore_text = str(score)            # Convert to string\nprint(f\"Integer {score} ‚Üí String '{score_text}'\")\nprint(f\"Now we can combine: 'Your score is ' + score_text\")\nprint(\"Your score is \" + score_text)  # This works!\nprint()\n\n# Float to Integer (CAREFUL: Decimals are lost!)\ntemperature = 98.6\ntemp_whole = int(temperature)      # Cuts off .6\nprint(f\"Float {temperature} ‚Üí Integer {temp_whole}\")\nprint(\"‚ö†Ô∏è Notice: The .6 is gone! int() truncates (cuts off) decimals.\")\nprint()\n\n# ===== IMPLICIT CONVERSION (Python does it automatically) =====\n\nprint(\"IMPLICIT CONVERSION:\")\nresult1 = 5 + 2.5                  # int + float\nprint(f\"5 (int) + 2.5 (float) = {result1} (type: {type(result1).__name__})\")\nprint(\"Python automatically converted 5 to 5.0 to match the float!\")\nprint()\n\n# ===== PRACTICAL EXAMPLE =====\n\nprint(\"PRACTICAL EXAMPLE - Birth Year Calculator:\")\nage_input = \"28\"  # User typed this (always comes as string)\ncurrent_year = 2025\n\n# Must convert age_input to int before math\nbirth_year = current_year - int(age_input)\nprint(f\"If you're {age_input}, you were born around {birth_year}\")\nprint()\n\n# ===== WHAT DOESN'T WORK =====\n\nprint(\"COMMON MISTAKES:\")\ntry:\n    # This will cause an ERROR:\n    result = \"Age: \" + 25  # Can't add string + int\nexcept TypeError as e:\n    print(f\"‚ùå Error: {e}\")\n    print(\"Fix: Use str(25) or f-string\")\n    print(f\"‚úÖ Correct: Age: {25}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's understand the three main conversion functions:\n\n### 1. int() - Convert to Integer\n\n<li>**What it does:** Converts text or float to a whole number\n\n```\nint(\"42\")    # \"42\" (string) ‚Üí 42 (int)\nint(3.9)     # 3.9 (float) ‚Üí 3 (int)  ‚ö†Ô∏è Loses .9!\nint(3.1)     # 3.1 (float) ‚Üí 3 (int)  ‚ö†Ô∏è Loses .1!\n```\n</li><li>**Important:** int() doesn't round‚Äîit **truncates** (cuts off) decimals\n\n```\nint(9.9)  # Result: 9 (not 10!)\nint(9.1)  # Result: 9\n```\nThink of it like cutting pizza: int(3.9) gives you 3 <em>whole</em> slices. The 0.9 piece is thrown away!\n\n</li><li>**Common error:** Converting invalid strings\n\n```\nint(\"hello\")    # ‚ùå ValueError: invalid literal\nint(\"12.5\")     # ‚ùå ValueError: can't convert \"12.5\" directly\nint(float(\"12.5\"))  # ‚úÖ Works! Convert to float first, then int\n```\n</li>\n### 2. float() - Convert to Decimal Number\n\n<li>**What it does:** Converts text or integer to a decimal number\n\n```\nfloat(\"3.14\")    # \"3.14\" (string) ‚Üí 3.14 (float)\nfloat(\"10\")      # \"10\" (string) ‚Üí 10.0 (float)\nfloat(5)         # 5 (int) ‚Üí 5.0 (float)\n```\n</li><li>**Always adds a decimal point:**\n\n<pre>`float(100)  # Result: 100.0 (not 100)`</pre></li><li>**Can handle string decimals:**\n\n```\nprice = float(\"19.99\")  # ‚úÖ Works perfectly\ntemp = float(\"98.6\")    # ‚úÖ Works perfectly\n```\n</li>\n### 3. str() - Convert to String (Text)\n\n<li>**What it does:** Converts anything to text\n\n```\nstr(42)      # 42 (int) ‚Üí \"42\" (string)\nstr(3.14)    # 3.14 (float) ‚Üí \"3.14\" (string)\nstr(True)    # True (bool) ‚Üí \"True\" (string)\n```\n</li><li>**Why you need it:** To combine numbers with text\n\n```\n# ‚ùå Doesn't work:\nprint(\"Age: \" + 25)  # TypeError\n\n# ‚úÖ Works:\nprint(\"Age: \" + str(25))  # \"Age: 25\"\n\n# ‚úÖ Better way (f-string):\nprint(f\"Age: {25}\")  # \"Age: 25\"\n```\n</li><li>**str() works on everything:**\n\n```\nstr(100)      # \"100\"\nstr(3.14)     # \"3.14\"\nstr(True)     # \"True\"\nstr([1,2,3])  # \"[1, 2, 3]\"\n```\n</li>\n### 4. Implicit Conversion (Python's Autopilot)\n\n<li>**When Python auto-converts:**\n\n```\nresult = 5 + 2.5  # Python converts 5 ‚Üí 5.0, then adds\n# 5.0 + 2.5 = 7.5\n```\nPython always promotes to the \"higher\" type (float is higher than int)\n\n</li><li>**Rule:** int + float = float\n\n```\n10 + 5.0   # 15.0 (float)\n3 * 2.5    # 7.5 (float)\n100 / 2    # 50.0 (float) ‚Üê Division ALWAYS gives float!\n```\n</li>\n### 5. Common Conversion Patterns\n<table><thead><tr><th>From</th><th>To</th><th>Function</th><th>Example</th></tr></thead><tbody><tr><td>String</td><td>Integer</td><td>`int()`</td><td>`int(\"42\")` ‚Üí `42`</td></tr><tr><td>String</td><td>Float</td><td>`float()`</td><td>`float(\"3.14\")` ‚Üí `3.14`</td></tr><tr><td>Integer</td><td>String</td><td>`str()`</td><td>`str(42)` ‚Üí `\"42\"`</td></tr><tr><td>Float</td><td>String</td><td>`str()`</td><td>`str(3.14)` ‚Üí `\"3.14\"`</td></tr><tr><td>Float</td><td>Integer</td><td>`int()`</td><td>`int(3.9)` ‚Üí `3` ‚ö†Ô∏è</td></tr><tr><td>Integer</td><td>Float</td><td>`float()`</td><td>`float(5)` ‚Üí `5.0`</td></tr></tbody></table>### 6. The Golden Rule\n**If you're not sure what type something is, check it:**\n\n```\nmystery_value = \"100\"\nprint(type(mystery_value))  # <class 'str'>\n\nconverted = int(mystery_value)\nprint(type(converted))      # <class 'int'>\n```\nAlways use `type()` when debugging conversion issues!"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Type conversion** (casting) changes data from one type to another\n- Three main conversion functions: `int()`, `float()`, `str()`\n- `input()` always returns a **string**, even if the user types a number\n- `int()` converts to whole numbers and **truncates** (doesn't round) decimals\n- `float()` converts to decimal numbers\n- `str()` converts anything to text (for combining with strings)\n- **Implicit conversion:** Python auto-converts in math (int + float = float)\n- **Explicit conversion:** You tell Python to convert with int(), float(), str()\n- Always convert **before** doing math on user input\n- Use `type()` to check what type a variable is\n- Format money with `:.2f` for exactly 2 decimal places\n- Division (`/`) always returns a float, even with integers\n- Common error: `ValueError` when trying to convert invalid strings like `int(\"hello\")`\n- Choose the right type: int for counts, float for measurements/prices"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-02-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "**Your Mission:** Create a \"Shopping Cart Calculator\" that handles user input and calculates totals!\n\n**Requirements:**\n\n- Ask the user for:\n<li>Item name (string)\n- Item price (comes as string, convert to float)\n- Quantity (comes as string, convert to int)\n- Tax rate percentage (comes as string, convert to float)\n\n</li>- Calculate:\n<li>Subtotal (price √ó quantity)\n- Tax amount (subtotal √ó tax rate / 100)\n- Final total (subtotal + tax)\n\n</li>- Display a formatted receipt showing all values\n- Use proper type conversions throughout\n\n**Bonus Challenge:**\n\n- Format the prices to 2 decimal places\n- Handle the case where quantity is a decimal (round it down)",
              "instructions": "**Your Mission:** Create a \"Shopping Cart Calculator\" that handles user input and calculates totals!\n\n**Requirements:**\n\n- Ask the user for:\n<li>Item name (string)\n- Item price (comes as string, convert to float)\n- Quantity (comes as string, convert to int)\n- Tax rate percentage (comes as string, convert to float)\n\n</li>- Calculate:\n<li>Subtotal (price √ó quantity)\n- Tax amount (subtotal √ó tax rate / 100)\n- Final total (subtotal + tax)\n\n</li>- Display a formatted receipt showing all values\n- Use proper type conversions throughout\n\n**Bonus Challenge:**\n\n- Format the prices to 2 decimal places\n- Handle the case where quantity is a decimal (round it down)",
              "starterCode": "# Shopping Cart Calculator\n\nprint(\"=\" * 40)\nprint(\"    SHOPPING CART CALCULATOR\")\nprint(\"=\" * 40)\n\n# Get user input (all input comes as strings!)\nitem_name = input(\"Enter item name: \")\nitem_price = input(\"Enter item price: $\")       # String like \"19.99\"\nquantity = input(\"Enter quantity: \")            # String like \"3\"\ntax_rate = input(\"Enter tax rate (%): \")       # String like \"8.5\"\n\n# Convert to correct types\nprice = ____(item_price)      # Convert to float\nqty = ____(quantity)          # Convert to integer\ntax_percent = ____(tax_rate)  # Convert to float\n\n# Calculate totals\nsubtotal = price * qty\ntax_amount = subtotal * (tax_percent / 100)\ntotal = subtotal + tax_amount\n\n# Display receipt\nprint(\"\\n\" + \"=\" * 40)\nprint(\"           RECEIPT\")\nprint(\"=\" * 40)\nprint(f\"Item: {item_name}\")\nprint(f\"Price: ${____}\")\nprint(f\"Quantity: {____}\")\nprint(f\"Subtotal: ${____}\")\nprint(f\"Tax ({tax_percent}%): ${____}\")\nprint(\"=\" * 40)\nprint(f\"TOTAL: ${____}\")\nprint(\"=\" * 40)\n\n# BONUS: Format prices to 2 decimal places\n# Use this format: f\"{price:.2f}\" to show exactly 2 decimals",
              "solution": "# Shopping Cart Calculator - SOLUTION\n\nprint(\"=\" * 40)\nprint(\"    SHOPPING CART CALCULATOR\")\nprint(\"=\" * 40)\n\n# Get user input (all input comes as strings!)\nitem_name = input(\"Enter item name: \")\nitem_price = input(\"Enter item price: $\")\nquantity = input(\"Enter quantity: \")\ntax_rate = input(\"Enter tax rate (%): \")\n\n# Convert to correct types\nprice = float(item_price)      # \"19.99\" ‚Üí 19.99\nqty = int(quantity)            # \"3\" ‚Üí 3\ntax_percent = float(tax_rate)  # \"8.5\" ‚Üí 8.5\n\n# Calculate totals\nsubtotal = price * qty\ntax_amount = subtotal * (tax_percent / 100)\ntotal = subtotal + tax_amount\n\n# Display receipt\nprint(\"\\n\" + \"=\" * 40)\nprint(\"           RECEIPT\")\nprint(\"=\" * 40)\nprint(f\"Item: {item_name}\")\nprint(f\"Price: ${price:.2f}\")           # Format to 2 decimals\nprint(f\"Quantity: {qty}\")\nprint(f\"Subtotal: ${subtotal:.2f}\")\nprint(f\"Tax ({tax_percent}%): ${tax_amount:.2f}\")\nprint(\"=\" * 40)\nprint(f\"TOTAL: ${total:.2f}\")\nprint(\"=\" * 40)\n\n# Example run:\n# Item name: Laptop\n# Price: $999.99\n# Quantity: 2\n# Tax: 8.5%\n# Output:\n# Subtotal: $1999.98\n# Tax (8.5%): $169.998 ‚Üí $170.00\n# TOTAL: $2169.98",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Shopping cart title is displayed",
                  "expectedOutput": "SHOPPING CART CALCULATOR",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Receipt section is displayed",
                  "expectedOutput": "RECEIPT",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Total is calculated and displayed",
                  "expectedOutput": "TOTAL:",
                  "isVisible": false
                },
                {
                  "id": "test-5",
                  "description": "Tax calculation is shown",
                  "expectedOutput": "Tax",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hints:**\n\n- **String to float:** Use `float()` for prices and decimals\n- **String to int:** Use `int()` for whole numbers (quantity)\n- **Display numbers:** Just use the variable name in f-strings: `f\"{price}\"`\n- **Two decimal places:** Use `f\"{price:.2f}\"` - the `:.2f` means \"2 decimal places\"\n<li>**Conversion pattern:**```\nuser_input = input(\"Enter number: \")  # Always a string\nnumber = float(user_input)            # Convert to float\n# OR:\nnumber = int(user_input)              # Convert to int\n```\n</li>"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "future = age + 10     # ‚ùå TypeError: can only concatenate str to str",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "price = int(\"19.99\")  # ‚ùå ValueError: invalid literal",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "tax = price * 0.1  # ‚ùå Error! Can't multiply string by float",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "<pre>`age = int(input(\"Age: \"))  # ‚ùå Crashes if user types \"twenty\"`</pre>For now, assume users enter valid input. Later (Module 7), you'll learn to handle errors with try/except!",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                },
                {
                  "mistake": "# ‚ùå Python does NOT auto-convert with strings:",
                  "consequence": "This will cause an error",
                  "correction": "Review the correct syntax in the examples"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-02-lesson-04",
          "title": "Box Math: Basic Operators",
          "moduleId": "module-02",
          "order": 4,
          "estimatedMinutes": 20,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you have a toolbox for working with numbers. Each tool does a specific job:\n\n- **The Addition Tool (+)**: Combines two numbers together, like stacking blocks\n- **The Subtraction Tool (-)**: Takes one number away from another, like removing blocks\n- **The Multiplication Tool (*)**: Repeats a number multiple times, like having 3 bags with 5 apples each\n- **The Division Tool (/)**: Splits a number into equal parts, like cutting a pizza into slices\n- **The Floor Division Tool (//)**: Splits and keeps only whole pieces, discarding any leftovers\n- **The Remainder Tool (%)**: Tells you what's left over after dividing, like the extra pizza slices that don't fit evenly\n- **The Power Tool (**):** Multiplies a number by itself multiple times, like 2√ó2√ó2\n\nThese are your **arithmetic operators** - the basic math tools in Python. Just like a carpenter picks the right tool for each job, you'll pick the right operator for each calculation.\n\n### Real-World Examples:\n\n- **Shopping (+, -, *)**: Calculate totals, apply discounts, multiply quantities\n- **Sharing food (/, //)**: Divide 10 cookies among 3 friends ‚Üí each gets 3 cookies (//), with 1 left over (%)\n- **Time calculations (%)**: Converting 100 minutes ‚Üí 1 hour and 40 minutes (100 // 60 = 1 hour, 100 % 60 = 40 minutes)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nTotal fruit: 8\nMoney left: $38\nTotal cookies: 48\nEach person gets: 3.3333333333333335 slices\nWhole slices each: 3\nLeftover slices: 1\n5 squared: 25\n2 cubed: 8\n```",
              "code": "# The 7 Basic Math Operators in Python\n\n# 1. Addition (+): Combine numbers\napples = 5\noranges = 3\ntotal_fruit = apples + oranges\nprint(f\"Total fruit: {total_fruit}\")  # Output: 8\n\n# 2. Subtraction (-): Take away\nmoney = 50\nprice = 12\nleft_over = money - price\nprint(f\"Money left: ${left_over}\")  # Output: $38\n\n# 3. Multiplication (*): Repeat a value\ncookies_per_box = 12\nboxes = 4\ntotal_cookies = cookies_per_box * boxes\nprint(f\"Total cookies: {total_cookies}\")  # Output: 48\n\n# 4. Division (/): Split into parts (always gives decimal)\npizza_slices = 10\npeople = 3\nslices_each = pizza_slices / people\nprint(f\"Each person gets: {slices_each} slices\")  # Output: 3.3333...\n\n# 5. Floor Division (//): Whole parts only (no decimals)\nslices_each_whole = pizza_slices // people\nprint(f\"Whole slices each: {slices_each_whole}\")  # Output: 3\n\n# 6. Modulo (%): The remainder (what's left over)\nleftover_slices = pizza_slices % people\nprint(f\"Leftover slices: {leftover_slices}\")  # Output: 1\n\n# 7. Exponentiation (**): Power/repeated multiplication\nsquare = 5 ** 2  # 5 √ó 5\nprint(f\"5 squared: {square}\")  # Output: 25\n\ncube = 2 ** 3  # 2 √ó 2 √ó 2\nprint(f\"2 cubed: {cube}\")  # Output: 8",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Understanding the Tools:\n#### 1. Addition (+) and Subtraction (-)\nThe simplest operators - they work exactly like you learned in elementary school:\n\n```\ntotal = 10 + 5    # Result: 15\ndifference = 10 - 5  # Result: 5\n\n```\n#### 2. Multiplication (*)\n**Important:** In Python, we use the asterisk (*), not the √ó symbol:\n\n```\nresult = 6 * 7  # Correct\nresult = 6 √ó 7  # ERROR! This won't work\n\n```\n#### 3. Division (/) vs Floor Division (//)\nThis is where Python has TWO division tools:\n\n```\n# Regular Division (/): Always gives a decimal (float)\n10 / 3   # Result: 3.3333333333333335\n10 / 2   # Result: 5.0 (still a float, even though it's a whole number!)\n\n# Floor Division (//): Gives only the whole number part\n10 // 3  # Result: 3 (drops the .333 part)\n10 // 2  # Result: 5 (an integer)\n\n```\n**Memory trick:** Regular division (/) gives you the <em>complete answer</em> with decimals. Floor division (//) gives you just the <em>whole pieces</em>.\n\n#### 4. Modulo (%): The Leftover Finder\nThe modulo operator answers the question: \"What's left over after dividing?\"\n\n```\n10 % 3  # Result: 1 (because 10 √∑ 3 = 3 with 1 left over)\n15 % 4  # Result: 3 (because 15 √∑ 4 = 3 with 3 left over)\n10 % 5  # Result: 0 (because 10 √∑ 5 = 2 with nothing left over)\n\n```\n**Common uses:**\n\n- Check if a number is even: `number % 2 == 0`\n- Find remainders in division\n- Convert minutes to hours/minutes: `100 % 60 = 40 minutes`\n\n#### 5. Exponentiation (**): Power Up!\nThis multiplies a number by itself multiple times:\n\n```\n2 ** 3  # 2 √ó 2 √ó 2 = 8\n5 ** 2  # 5 √ó 5 = 25\n10 ** 0 # Always equals 1 (any number to the power of 0 is 1)\n\n```\n#### 6. Operator Precedence (Order of Operations)\nPython follows **PEMDAS** just like math class:\n\n- **P**arentheses: `()`\n- **E**xponents: `**`\n- **M**ultiplication/Division: `* / // %` (left to right)\n- **A**ddition/Subtraction: `+ -` (left to right)\n\n```\nresult = 2 + 3 * 4      # Result: 14 (not 20! Multiplication first)\nresult = (2 + 3) * 4    # Result: 20 (parentheses force addition first)\nresult = 10 - 2 ** 3    # Result: 2 (exponent first: 10 - 8)\n\n```\n**Best practice:** When in doubt, use parentheses to make your intention clear!\n\n#### 7. Mixing Data Types\nWhen you mix integers and floats, Python gives you a float:\n\n```\n5 + 2.0    # Result: 7.0 (float)\n10 / 2     # Result: 5.0 (division always returns float)\n10 // 2    # Result: 5 (floor division returns int when both inputs are ints)\n\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **7 Arithmetic Operators**: `+`, `-`, `*`, `/`, `//`, `%`, `**`\n- **Division has two tools**:\n<li>`/` (regular) always gives a decimal (float)\n- `//` (floor) gives only the whole number part (int)\n\n</li>- **Modulo (%)** gives you the <em>remainder</em> after division - perfect for finding leftovers\n- **Order matters**: Python follows PEMDAS - use parentheses to control the order\n- **Power operator (**)** is for exponentiation, not ^ (which means something else in Python)\n- **Mixing types**: Operations with floats produce floats; division (/) always produces a float\n- **The floor + modulo duo** is your best friend for breaking numbers into parts (like hours/minutes)\n\n### Before Moving On:\nMake sure you can:\n\n- Explain the difference between `/` and `//`\n- Know when to use `%` to find remainders\n- Use parentheses to control the order of operations\n- Combine operators to solve real-world math problems\n\n### Coming Up Next:\nIn the next lesson, you'll build a **Simple Calculator** that puts all these operators to work, letting users choose which operation to perform. You'll tie together everything you've learned about variables, data types, type conversion, and operators into one complete mini-project!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-02-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Time Converter** program that converts total minutes into hours and minutes.\n\n**Your task:**\n\n- Ask the user to enter a number of minutes\n- Use floor division (//) to calculate the number of whole hours\n- Use modulo (%) to find the remaining minutes\n- Display the result in a friendly format: \"X hours and Y minutes\"\n\n**Example:**\n\n```\nEnter total minutes: 135\nThat's 2 hours and 15 minutes\n```\n\n**Hints:**\n\n- There are 60 minutes in an hour\n- Use `total_minutes // 60` to get hours\n- Use `total_minutes % 60` to get remaining minutes\n- Remember to convert the input to an integer!",
              "instructions": "Build a **Time Converter** program that converts total minutes into hours and minutes.\n\n**Your task:**\n\n- Ask the user to enter a number of minutes\n- Use floor division (//) to calculate the number of whole hours\n- Use modulo (%) to find the remaining minutes\n- Display the result in a friendly format: \"X hours and Y minutes\"\n\n**Example:**\n\n```\nEnter total minutes: 135\nThat's 2 hours and 15 minutes\n```\n\n**Hints:**\n\n- There are 60 minutes in an hour\n- Use `total_minutes // 60` to get hours\n- Use `total_minutes % 60` to get remaining minutes\n- Remember to convert the input to an integer!",
              "starterCode": "# Time Converter Program\n# Convert total minutes to hours and minutes\n\n# Get input from user\ntotal_minutes = int(input(\"Enter total minutes: \"))\n\n# Your code here:\n# Calculate hours using floor division (//)\nhours = \n\n# Calculate remaining minutes using modulo (%)\nminutes = \n\n# Display the result\nprint(f\"That's {hours} hours and {minutes} minutes\")",
              "solution": "# Time Converter Program - SOLUTION\n# Convert total minutes to hours and minutes\n\n# Get input from user\ntotal_minutes = int(input(\"Enter total minutes: \"))\n\n# Calculate hours using floor division (//)\nhours = total_minutes // 60\n\n# Calculate remaining minutes using modulo (%)\nminutes = total_minutes % 60\n\n# Display the result\nprint(f\"That's {hours} hours and {minutes} minutes\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output contains hours and minutes",
                  "expectedOutput": "hours and",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output ends with minutes",
                  "expectedOutput": "minutes",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use floor division (//) with 60 to get hours, and modulo (%) with 60 to get the leftover minutes. For example: hours = total_minutes // 60 and minutes = total_minutes % 60"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using ^ instead of ** for exponentiation",
                  "consequence": "^ is bitwise XOR in Python, not power",
                  "correction": "Use ** for exponentiation: 2 ** 3 gives 8"
                },
                {
                  "mistake": "Confusing / and // (division vs floor division)",
                  "consequence": "/ always returns a float, // returns an integer",
                  "correction": "Use / for decimal results, // for whole numbers only"
                },
                {
                  "mistake": "Dividing by zero",
                  "consequence": "ZeroDivisionError crashes your program",
                  "correction": "Always check that the divisor is not zero before dividing"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-02-lesson-05",
          "title": "Mini-Project: Simple Calculator",
          "moduleId": "module-02",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Congratulations! You've reached your first **mini-project** - a complete program that ties together everything you've learned in Module 2.\n\nThink of this as building your first real tool. Up until now, you've been learning individual skills:\n\n- **Variables**: Storing information in labeled boxes\n- **Data types**: Understanding str, int, float, bool\n- **Type conversion**: Converting between data types\n- **Operators**: Performing calculations with +, -, *, /, //, %, **\n\nNow you're going to combine all of these into a **Simple Calculator** that works like this:\n\n<pre>Welcome to Simple Calculator!\n\nChoose an operation:\n1. Addition (+)\n2. Subtraction (-)\n3. Multiplication (*)\n4. Division (/)\n5. Floor Division (//)\n6. Modulo (%)\n7. Exponentiation (**)\n\nEnter your choice (1-7): 1\nEnter first number: 10\nEnter second number: 5\n\nResult: 10 + 5 = 15\n</pre>This isn't just a learning exercise - you're building a <em>real, functional program</em> that you could actually use!\n\n### Real-World Connection:\nEvery calculator app on your phone, every spreadsheet formula, every e-commerce checkout total - they all work on these same principles. You're learning the foundation of computational thinking."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nWelcome to Simple Calculator!\n\nChoose an operation:\n1. Addition (+)\n2. Subtraction (-)\n3. Multiplication (*)\n4. Division (/)\n5. Floor Division (//)\n6. Modulo (%)\n7. Exponentiation (**)\n\nEnter your choice (1-7): 1\nEnter first number: 15.5\nEnter second number: 4.5\n\nResult: 15.5 + 4.5 = 20.0\n\nThank you for using Simple Calculator!\n```",
              "code": "# Simple Calculator - Complete Example\n# Demonstrates all Module 2 concepts in one program\n\nprint(\"Welcome to Simple Calculator!\")\nprint()\n\n# Display menu (using print statements)\nprint(\"Choose an operation:\")\nprint(\"1. Addition (+)\")\nprint(\"2. Subtraction (-)\")\nprint(\"3. Multiplication (*)\")\nprint(\"4. Division (/)\")\nprint(\"5. Floor Division (//)\")\nprint(\"6. Modulo (%)\")\nprint(\"7. Exponentiation (**)\")\nprint()\n\n# Get user's choice (string input ‚Üí int conversion)\nchoice = int(input(\"Enter your choice (1-7): \"))\n\n# Get numbers from user (string input ‚Üí float conversion)\nnum1 = float(input(\"Enter first number: \"))\nnum2 = float(input(\"Enter second number: \"))\n\nprint()  # Blank line for readability\n\n# Perform calculation based on choice\nif choice == 1:\n    result = num1 + num2\n    print(f\"Result: {num1} + {num2} = {result}\")\nelif choice == 2:\n    result = num1 - num2\n    print(f\"Result: {num1} - {num2} = {result}\")\nelif choice == 3:\n    result = num1 * num2\n    print(f\"Result: {num1} * {num2} = {result}\")\nelif choice == 4:\n    result = num1 / num2\n    print(f\"Result: {num1} / {num2} = {result}\")\nelif choice == 5:\n    result = num1 // num2\n    print(f\"Result: {num1} // {num2} = {result}\")\nelif choice == 6:\n    result = num1 % num2\n    print(f\"Result: {num1} % {num2} = {result}\")\nelif choice == 7:\n    result = num1 ** num2\n    print(f\"Result: {num1} ** {num2} = {result}\")\nelse:\n    print(\"Invalid choice! Please choose 1-7.\")\n\nprint(\"\\nThank you for using Simple Calculator!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Breaking Down the Calculator:\n#### 1. The Menu Display\n```\nprint(\"Choose an operation:\")\nprint(\"1. Addition (+)\")\nprint(\"2. Subtraction (-)\")\n# ... etc\n\n```\nSimple print statements to show options. Nothing fancy - just clear communication with the user.\n\n#### 2. Getting User Input\n```\nchoice = int(input(\"Enter your choice (1-7): \"))\nnum1 = float(input(\"Enter first number: \"))\nnum2 = float(input(\"Enter second number: \"))\n\n```\n**Key decisions here:**\n\n- `choice` is converted to `int` because menu options are whole numbers (1, 2, 3...)\n- `num1` and `num2` are converted to `float` to handle both whole numbers and decimals (15, 15.5, etc.)\n\n#### 3. The if-elif-else Chain\n```\nif choice == 1:\n    result = num1 + num2\n    print(f\"Result: {num1} + {num2} = {result}\")\nelif choice == 2:\n    result = num1 - num2\n    print(f\"Result: {num1} - {num2} = {result}\")\n# ... more elif statements\nelse:\n    print(\"Invalid choice! Please choose 1-7.\")\n\n```\n**What's happening:**\n\n- `if choice == 1:` checks if the user entered 1\n- `elif` means \"else if\" - checks the next condition only if previous ones were false\n- `else:` catches everything that doesn't match (like entering 10 or 99)\n\n**Note:** We're introducing `if-elif-else` here as a preview! You'll learn these \"conditional statements\" in detail in Module 3. For now, just understand that they let us choose different actions based on the user's choice.\n\n#### 4. F-Strings for Output\n```\nprint(f\"Result: {num1} + {num2} = {result}\")\n\n```\nUsing f-strings to create a nicely formatted output showing the calculation and result.\n\n#### 5. Blank Lines for Readability\n```\nprint()  # Blank line\nprint(\"\\n...\")  # \\n creates a new line\n\n```\nSmall touches like this make your program easier to read. Professional programmers care about user experience!\n\n### Module 2 Concepts in Action:\n<table border=\"1\" cellpadding=\"5\"><tr><th>Concept</th><th>How We Used It</th></tr><tr><td>**Variables**</td><td>Stored choice, num1, num2, result</td></tr><tr><td>**Data Types**</td><td>Used int for choice, float for numbers, str in print()</td></tr><tr><td>**Type Conversion**</td><td>Converted input() strings to int and float</td></tr><tr><td>**Operators**</td><td>All 7 arithmetic operators (+, -, *, /, //, %, **)</td></tr><tr><td>**F-Strings**</td><td>Formatted output to show calculations clearly</td></tr></table>"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **You can build real programs** with just the basics: variables, data types, operators, and input/output\n- **Type conversion is crucial**: `input()` always returns strings - convert them to int or float as needed\n- **Combining concepts** creates powerful programs - the whole is greater than the sum of its parts\n- **User experience matters**: Clear menus, formatted output, and friendly messages make programs better\n- **Conditional logic (if-elif-else)** lets programs make decisions based on user input\n- **Planning before coding** helps - think through: input ‚Üí processing ‚Üí output\n- **Every large program** is built from these same fundamentals\n\n### Module 2 Complete! üéâ\nYou've mastered:\n\n- ‚úÖ Variables and how Python stores data\n- ‚úÖ The four basic data types (str, int, float, bool)\n- ‚úÖ Converting between data types\n- ‚úÖ All 7 arithmetic operators\n- ‚úÖ Building a complete, functional program\n\n### What's Next:\nIn **Module 3: Making Decisions**, you'll dive deep into conditional logic:\n\n- if-elif-else statements\n- Comparison operators (>, <, ==, !=)\n- Logical operators (and, or, not)\n- Nested conditions\n- Building programs that make intelligent decisions\n\nYou got a preview of if-elif-else in this calculator - now you'll master it!\n\n**Before moving on:** Take the Module 2 Quiz to test your understanding. Aim for 70% or higher to ensure you're ready for Module 3."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-02-lesson-05-challenge-1",
              "title": "Practice Exercise",
              "description": "Build your own **Enhanced Calculator** with these improvements:\n\n- **Add a title banner** using multiple print statements to make it look professional\n- **Display all 7 operations** in the menu (we've given you the structure)\n- **Get the user's choice and two numbers**\n- **Perform the calculation** using if-elif-else for each operation\n- **Format the output nicely** using f-strings\n\n**Bonus Challenge:** Add a farewell message that includes the user's name! Ask for their name at the beginning and use it in the goodbye message.\n\n**Example output:**\n\n<pre>===================================\n   SUPER CALCULATOR PRO 3000\n===================================\n\nWhat's your name? Alice\n\nHi Alice! Let's do some math!\n\nChoose an operation:\n1. Addition (+)\n2. Subtraction (-)\n... etc ...\n\nEnter your choice (1-7): 4\nEnter first number: 20\nEnter second number: 4\n\nResult: 20.0 / 4.0 = 5.0\n\nThanks for calculating, Alice! See you next time!\n</pre>",
              "instructions": "Build your own **Enhanced Calculator** with these improvements:\n\n- **Add a title banner** using multiple print statements to make it look professional\n- **Display all 7 operations** in the menu (we've given you the structure)\n- **Get the user's choice and two numbers**\n- **Perform the calculation** using if-elif-else for each operation\n- **Format the output nicely** using f-strings\n\n**Bonus Challenge:** Add a farewell message that includes the user's name! Ask for their name at the beginning and use it in the goodbye message.\n\n**Example output:**\n\n<pre>===================================\n   SUPER CALCULATOR PRO 3000\n===================================\n\nWhat's your name? Alice\n\nHi Alice! Let's do some math!\n\nChoose an operation:\n1. Addition (+)\n2. Subtraction (-)\n... etc ...\n\nEnter your choice (1-7): 4\nEnter first number: 20\nEnter second number: 4\n\nResult: 20.0 / 4.0 = 5.0\n\nThanks for calculating, Alice! See you next time!\n</pre>",
              "starterCode": "# Enhanced Calculator - YOUR VERSION\n# Make it your own!\n\n# Title banner (make it creative!)\nprint(\"===================================\")\nprint(\"   SUPER CALCULATOR PRO 3000\")\nprint(\"===================================\")\nprint()\n\n# YOUR CODE HERE:\n# 1. Ask for the user's name\nname = \n\nprint(f\"\\nHi {name}! Let's do some math!\")\nprint()\n\n# 2. Display the menu\nprint(\"Choose an operation:\")\n# ... add all 7 options here ...\n\n# 3. Get user's choice\nchoice = \n\n# 4. Get two numbers\nnum1 = \nnum2 = \n\nprint()\n\n# 5. Perform the calculation based on choice\nif choice == 1:\n    # Addition\n    result = \n    print(f\"Result: {num1} + {num2} = {result}\")\nelif choice == 2:\n    # Subtraction\n    result = \n    print(f\"Result: {num1} - {num2} = {result}\")\n# ... add the rest of the operations ...\nelse:\n    print(\"Invalid choice! Please choose 1-7.\")\n\n# 6. Farewell message\nprint(f\"\\nThanks for calculating, {name}! See you next time!\")",
              "solution": "# Enhanced Calculator - SOLUTION\n# A complete, functional calculator program\n\n# Title banner\nprint(\"===================================\")\nprint(\"   SUPER CALCULATOR PRO 3000\")\nprint(\"===================================\")\nprint()\n\n# Get user's name for personalization\nname = input(\"What's your name? \")\n\nprint(f\"\\nHi {name}! Let's do some math!\")\nprint()\n\n# Display menu\nprint(\"Choose an operation:\")\nprint(\"1. Addition (+)\")\nprint(\"2. Subtraction (-)\")\nprint(\"3. Multiplication (*)\")\nprint(\"4. Division (/)\")\nprint(\"5. Floor Division (//)\")\nprint(\"6. Modulo (%)\")\nprint(\"7. Exponentiation (**)\")\nprint()\n\n# Get user's choice\nchoice = int(input(\"Enter your choice (1-7): \"))\n\n# Get two numbers\nnum1 = float(input(\"Enter first number: \"))\nnum2 = float(input(\"Enter second number: \"))\n\nprint()\n\n# Perform calculation\nif choice == 1:\n    result = num1 + num2\n    print(f\"Result: {num1} + {num2} = {result}\")\nelif choice == 2:\n    result = num1 - num2\n    print(f\"Result: {num1} - {num2} = {result}\")\nelif choice == 3:\n    result = num1 * num2\n    print(f\"Result: {num1} * {num2} = {result}\")\nelif choice == 4:\n    result = num1 / num2\n    print(f\"Result: {num1} / {num2} = {result}\")\nelif choice == 5:\n    result = num1 // num2\n    print(f\"Result: {num1} // {num2} = {result}\")\nelif choice == 6:\n    result = num1 % num2\n    print(f\"Result: {num1} % {num2} = {result}\")\nelif choice == 7:\n    result = num1 ** num2\n    print(f\"Result: {num1} ** {num2} = {result}\")\nelse:\n    print(\"Invalid choice! Please choose 1-7.\")\n\n# Farewell message\nprint(f\"\\nThanks for calculating, {name}! See you next time!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Calculator title is displayed",
                  "expectedOutput": "SUPER CALCULATOR",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Menu shows operations",
                  "expectedOutput": "Choose an operation",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Farewell message is displayed",
                  "expectedOutput": "Thanks for calculating",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember to convert input to the right type: int() for the menu choice, float() for numbers that might have decimals. Use the operators you learned: +, -, *, /, //, %, **. Copy the pattern from the code example for the if-elif-else chain."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-03",
      "title": "Boolean Logic",
      "description": "Making decisions with True and False",
      "difficulty": "beginner",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-03-lesson-01",
          "title": "Boolean Logic: The Language of Yes and No",
          "moduleId": "module-03",
          "order": 1,
          "estimatedMinutes": 18,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at a door with an electronic lock. The lock doesn't care about your story, your excuses, or your good intentions. It asks one simple question:\n\n<p style='text-align: center; font-size: 18px; font-weight: bold;'>\"Is the code correct?\"</p>The answer can only be:\n\n- **YES** ‚Üí The door unlocks\n- **NO** ‚Üí The door stays locked\n\nThere's no \"maybe,\" no \"almost,\" no \"it depends.\" Just YES or NO. TRUE or FALSE.\n\nThis is **Boolean logic** - named after mathematician George Boole, who realized that all logical reasoning boils down to true/false questions.\n\n### Real-World Examples of Boolean Thinking:\n\n- **Traffic light**: \"Is the light green?\" ‚Üí True = Go, False = Stop\n- **Email login**: \"Is the password correct?\" ‚Üí True = Log in, False = Show error\n- **Shopping cart**: \"Is the total over $50?\" ‚Üí True = Free shipping, False = Pay shipping\n- **Age verification**: \"Is age >= 18?\" ‚Üí True = Allow, False = Deny\n\nEvery decision a computer makes starts with these yes/no questions. In Python, we call these questions **Boolean expressions**, and the answers are **Boolean values**: `True` or `False`.\n\n### The Foundation of All Programming Decisions:\nRemember the calculator from Module 2? When we checked `if choice == 1:`, we were asking a Boolean question:\n\n<pre>\"Is the user's choice equal to 1?\"</pre>The answer (True or False) determined which path the program took. Now you'll learn how to ask these questions deliberately and powerfully!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nIs it raining? True\nIs it sunny? False\nData type: <class 'bool'>\n\nIs age exactly 25? True\nIs age exactly 30? False\nIs age NOT 30? True\nIs age greater than min_age? True\nIs age less than min_age? False\nIs age >= min_age? True\nIs age <= 30? True\n\nPrice: $45\nQualifies for free shipping? False\n```",
              "code": "# Boolean Values: True and False\n# These are actual values in Python, just like numbers or strings\n\nis_raining = True\nis_sunny = False\n\nprint(\"Is it raining?\", is_raining)  # Output: True\nprint(\"Is it sunny?\", is_sunny)       # Output: False\nprint(\"Data type:\", type(is_raining)) # Output: <class 'bool'>\n\nprint()\n\n# Comparison Operators: Asking Questions\n# These operators RETURN boolean values (True or False)\n\nage = 25\nmin_age = 18\n\n# Equal to (==)\nprint(\"Is age exactly 25?\", age == 25)      # True\nprint(\"Is age exactly 30?\", age == 30)      # False\n\n# Not equal to (!=)\nprint(\"Is age NOT 30?\", age != 30)           # True\n\n# Greater than (>)\nprint(\"Is age greater than min_age?\", age > min_age)  # True (25 > 18)\n\n# Less than (<)\nprint(\"Is age less than min_age?\", age < min_age)     # False (25 is not < 18)\n\n# Greater than or equal (>=)\nprint(\"Is age >= min_age?\", age >= min_age)  # True (25 >= 18)\n\n# Less than or equal (<=)\nprint(\"Is age <= 30?\", age <= 30)            # True (25 <= 30)\n\nprint()\n\n# Booleans in Action: Making Decisions\nprice = 45\nfree_shipping_threshold = 50\n\nqualifies_for_free_shipping = price >= free_shipping_threshold\nprint(f\"Price: ${price}\")\nprint(f\"Qualifies for free shipping?\", qualifies_for_free_shipping)\n# Output: False (because 45 < 50)",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Understanding Boolean Values:\n#### 1. True and False - The Only Boolean Values\n```\nis_valid = True   # Capitalized!\nis_error = False  # Capitalized!\n\n```\n**Critical:** Boolean values MUST be capitalized in Python:\n\n- ‚úÖ `True` - Correct\n- ‚ùå `true` - Error! Python won't recognize it\n- ‚úÖ `False` - Correct\n- ‚ùå `false` - Error! Python won't recognize it\n\nPython is case-sensitive, so capitalization matters!\n\n#### 2. The Six Comparison Operators\nThese operators <em>ask questions</em> and <em>return</em> True or False:\n\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Operator</th><th>Meaning</th><th>Example</th><th>Result</th></tr><tr><td>`==`</td><td>Equal to</td><td>`5 == 5`</td><td>True</td></tr><tr><td>`!=`</td><td>Not equal to</td><td>`5 != 3`</td><td>True</td></tr><tr><td>`&gt;`</td><td>Greater than</td><td>`10 &gt; 5`</td><td>True</td></tr><tr><td>`&lt;`</td><td>Less than</td><td>`3 &lt; 10`</td><td>True</td></tr><tr><td>`&gt;=`</td><td>Greater than or equal</td><td>`5 &gt;= 5`</td><td>True</td></tr><tr><td>`&lt;=`</td><td>Less than or equal</td><td>`3 &lt;= 5`</td><td>True</td></tr></table>#### 3. Common Beginner Confusion: == vs =\n```\n# WRONG: Using = (assignment) when you mean == (comparison)\nage = 18      # Assignment: \"Make age equal to 18\"\nif age = 18:  # ERROR! This is trying to assign, not compare\n\n# CORRECT: Using == (comparison)\nage = 18      # Assignment: \"Make age equal to 18\"\nif age == 18: # Comparison: \"Is age equal to 18?\" (Returns True/False)\n\n```\n**Memory trick:**\n\n- `=` (one equal sign) ‚Üí **Make it equal** (assignment)\n- `==` (two equal signs) ‚Üí **Check if equal** (comparison)\n\n#### 4. Storing Boolean Results in Variables\nYou can store the result of a comparison in a variable:\n\n```\nis_adult = age >= 18          # Stores True or False\nhas_permission = score > 80   # Stores True or False\nis_valid_username = len(name) >= 3  # Stores True or False\n\n```\nThis makes your code more readable!\n\n#### 5. Comparing Strings\nComparison operators work with strings too:\n\n```\nname = \"Alice\"\n\nprint(name == \"Alice\")   # True (exact match, case-sensitive!)\nprint(name == \"alice\")   # False (different case)\nprint(name != \"Bob\")     # True (not equal)\n\n# Alphabetical comparison\nprint(\"apple\" < \"banana\")  # True ('a' comes before 'b')\nprint(\"Zoo\" < \"apple\")     # True (capital letters come before lowercase!)\n\n```\n**Important:** String comparison is case-sensitive! \"Hello\" != \"hello\"\n\n#### 6. Truthy and Falsy Values (Advanced Preview)\nIn Python, almost any value can be treated as True or False in a Boolean context:\n\n```\n# Falsy values (treated as False):\n0              # Zero is False\n0.0            # Zero float is False\n\"\"             # Empty string is False\nNone           # None is False\n\n# Truthy values (treated as True):\n1, -5, 100     # Any non-zero number is True\n\"hello\", \"0\"   # Any non-empty string is True (even \"0\"!)\n\n```\n**Note:** You'll use this more in later modules. For now, focus on True, False, and comparison operators."
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using = Instead of == for Comparison**\n```python\n# WRONG - This is assignment, not comparison!\nif age = 18:  # SyntaxError!\n\n# CORRECT - Use == to compare\nif age == 18:  # Checks if age equals 18\n```\n\n**2. Forgetting Case Sensitivity**\n```python\nTrue   # ‚úÖ Correct\ntrue   # ‚ùå NameError: 'true' is not defined\nFalse  # ‚úÖ Correct\nfalse  # ‚ùå NameError: 'false' is not defined\n```\n\n**3. Case-Sensitive String Comparisons**\n```python\nname = \"Alice\"\nname == \"alice\"  # False! Capital A ‚â† lowercase a\nname.lower() == \"alice\"  # True - convert to same case first\n```\n\n**4. Floating-Point Comparison Gotcha**\n```python\n0.1 + 0.2 == 0.3  # False! (Due to floating-point representation)\n# Use math.isclose() for float comparisons in Python 3.5+\nimport math\nmath.isclose(0.1 + 0.2, 0.3)  # True\n```\n\n**5. Comparing Different Types**\n```python\n\"5\" == 5   # False - string is not equal to integer\nint(\"5\") == 5  # True - convert string to int first\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Boolean values** are `True` or `False` (capitalized!) - the foundation of all program decisions\n- **Comparison operators** ask questions and return Boolean values:\n<li>`==` equal, `!=` not equal\n- `&gt;` greater, `&lt;` less\n- `&gt;=` greater or equal, `&lt;=` less or equal\n\n</li>- **Don't confuse:**\n<li>`=` (assignment: \"make it equal\")\n- `==` (comparison: \"check if equal\")\n\n</li>- **Store Boolean results** in variables with descriptive names for readable code\n- **String comparisons** are case-sensitive: \"Hello\" ‚â† \"hello\"\n- **The data type** is called `bool` (check with `type()`)\n- **Mathematical truth:** `True == 1` and `False == 0` (useful for counting!)\n\n### Before Moving On:\nMake sure you can:\n\n- Write comparisons using all six operators\n- Explain the difference between `=` and `==`\n- Store Boolean results in variables\n- Predict what a comparison will return (True or False)\n\n### Coming Up Next:\nIn **Lesson 2: Logical Operators**, you'll learn how to combine multiple Boolean questions:\n\n- `and` - \"Is this true AND that true?\"\n- `or` - \"Is this true OR that true?\"\n- `not` - \"Is this NOT true?\"\n\nThis lets you ask complex questions like: \"Is the user an adult AND has a valid ID?\" or \"Is it the weekend OR a holiday?\""
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Movie Ticket Validator** that checks if someone can watch different movie ratings.\n\n**Your task:**\n\n- Ask the user for their age\n- Create Boolean variables that check if they can watch movies rated:\n<li>**G** (General - any age)\n- **PG-13** (13 and older)\n- **R** (17 and older)\n\n</li>- Display which ratings they can watch\n\n**Example output:**\n\n<pre>Enter your age: 15\n\nMovie Rating Access:\n‚Ä¢ G-rated movies: True\n‚Ä¢ PG-13 movies: True\n‚Ä¢ R-rated movies: False\n\nYou can watch 2 out of 3 rating categories!\n</pre>**Hints:**\n\n- Use `&gt;=` to check if age meets the minimum\n- G-rated has no minimum (everyone can watch)\n- Count how many ratings are True",
              "instructions": "Build a **Movie Ticket Validator** that checks if someone can watch different movie ratings.\n\n**Your task:**\n\n- Ask the user for their age\n- Create Boolean variables that check if they can watch movies rated:\n<li>**G** (General - any age)\n- **PG-13** (13 and older)\n- **R** (17 and older)\n\n</li>- Display which ratings they can watch\n\n**Example output:**\n\n<pre>Enter your age: 15\n\nMovie Rating Access:\n‚Ä¢ G-rated movies: True\n‚Ä¢ PG-13 movies: True\n‚Ä¢ R-rated movies: False\n\nYou can watch 2 out of 3 rating categories!\n</pre>**Hints:**\n\n- Use `&gt;=` to check if age meets the minimum\n- G-rated has no minimum (everyone can watch)\n- Count how many ratings are True",
              "starterCode": "# Movie Ticket Validator\n# Check which movie ratings someone can watch\n\n# Get user's age\nage = int(input(\"Enter your age: \"))\n\nprint(\"\\nMovie Rating Access:\")\n\n# YOUR CODE HERE:\n# Create Boolean variables for each rating\ncan_watch_g = True  # G-rated: Everyone can watch\n\ncan_watch_pg13 =   # PG-13: Age 13 and older\n\ncan_watch_r =      # R-rated: Age 17 and older\n\n# Display results\nprint(f\"‚Ä¢ G-rated movies: {can_watch_g}\")\nprint(f\"‚Ä¢ PG-13 movies: {can_watch_pg13}\")\nprint(f\"‚Ä¢ R-rated movies: {can_watch_r}\")\n\n# Bonus: Count how many True values\n# (Hint: In Python, True == 1 and False == 0, so you can add them!)\ntotal_accessible = can_watch_g + can_watch_pg13 + can_watch_r\nprint(f\"\\nYou can watch {total_accessible} out of 3 rating categories!\")",
              "solution": "# Movie Ticket Validator - SOLUTION\n# Check which movie ratings someone can watch\n\n# Get user's age\nage = int(input(\"Enter your age: \"))\n\nprint(\"\\nMovie Rating Access:\")\n\n# Create Boolean variables for each rating\ncan_watch_g = True  # G-rated: Everyone can watch\n\ncan_watch_pg13 = age >= 13  # PG-13: Age 13 and older\n\ncan_watch_r = age >= 17  # R-rated: Age 17 and older\n\n# Display results\nprint(f\"‚Ä¢ G-rated movies: {can_watch_g}\")\nprint(f\"‚Ä¢ PG-13 movies: {can_watch_pg13}\")\nprint(f\"‚Ä¢ R-rated movies: {can_watch_r}\")\n\n# Bonus: Count how many True values\n# (Because True == 1 and False == 0, we can add them!)\ntotal_accessible = can_watch_g + can_watch_pg13 + can_watch_r\nprint(f\"\\nYou can watch {total_accessible} out of 3 rating categories!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Movie Rating Access section displayed",
                  "expectedOutput": "Movie Rating Access:",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "G-rated result is shown",
                  "expectedOutput": "G-rated movies:",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Total count is shown",
                  "expectedOutput": "out of 3 rating categories",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use the >= operator to check if the age meets the minimum. For example: can_watch_pg13 = age >= 13 will return True if age is 13 or higher, False otherwise. For can_watch_g, since everyone can watch G-rated movies, it's always True!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-02",
          "title": "Logical Operators: Combining Questions",
          "moduleId": "module-03",
          "order": 2,
          "estimatedMinutes": 22,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're a bouncer at an exclusive nightclub. You have a list of rules to check before letting someone in:\n\n- They must be 21 or older\n- They must have a valid ID\n- They must NOT be on the banned list\n\nSomeone walks up to the door. You need to check:\n\n<p style='text-align: center; font-size: 16px; font-weight: bold;'>\"Is age >= 21 <span style='color: blue;'>AND</span> has_valid_id <span style='color: blue;'>AND NOT</span> is_banned?\"</p>If ALL of these are true, they get in. If ANY condition fails, they're turned away.\n\nThis is **combining Boolean questions** using **logical operators**:\n\n- **and** ‚Üí \"Both/all must be true\"\n- **or** ‚Üí \"At least one must be true\"\n- **not** ‚Üí \"Reverse the truth value\"\n\n### Real-World Examples:\n\n- **Restaurant seating (OR)**:\n\"Seat available **OR** willing to wait?\" ‚Üí At least one must be true to continue\n- **Online purchase (AND)**:\n\"Item in stock **AND** payment valid **AND** shipping address complete?\" ‚Üí All must be true to process order\n- **Alarm system (NOT)**:\n\"**NOT** authorized?\" ‚Üí If not authorized (True), trigger alarm\n- **Weekend plans (OR + AND)**:\n\"(Saturday **OR** Sunday) **AND** weather is good?\" ‚Üí Complex combination!\n\nIn Lesson 1, you learned to ask single questions (\"Is age >= 18?\"). Now you'll learn to combine multiple questions into powerful compound conditions!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nNightclub entry: True\nAge check: True\nID check: True\nNot banned: True\nFinal result (AND): True\n\nCan sleep in? True\nCan sleep in? (weekday) False\n\nIs raining? True\nCan go outside without umbrella? False\n\nAge 15, Student: True\nGets discount? True\n\nShort-circuit AND: False\nShort-circuit OR: True\n```",
              "code": "# Logical Operators: and, or, not\n# Combine Boolean questions for complex decision-making\n\n# Example 1: AND - All conditions must be True\nage = 25\nhas_id = True\nis_banned = False\n\n# Nightclub bouncer logic\ncan_enter = age >= 21 and has_id and not is_banned\nprint(\"Nightclub entry:\", can_enter)  # True (all conditions met)\n\n# Breaking it down:\nprint(\"Age check:\", age >= 21)        # True (25 >= 21)\nprint(\"ID check:\", has_id)            # True\nprint(\"Not banned:\", not is_banned)   # True (not False = True)\nprint(\"Final result (AND):\", age >= 21 and has_id and not is_banned)  # True\n\nprint()\n\n# Example 2: OR - At least one condition must be True\nis_weekend = True\nis_holiday = False\n\ncan_sleep_in = is_weekend or is_holiday\nprint(\"Can sleep in?\", can_sleep_in)  # True (weekend is True)\n\n# Both false example:\nis_weekend = False\nis_holiday = False\ncan_sleep_in = is_weekend or is_holiday\nprint(\"Can sleep in? (weekday)\", can_sleep_in)  # False (both False)\n\nprint()\n\n# Example 3: NOT - Reverses True/False\nis_raining = True\nshould_bring_umbrella = is_raining\ncan_go_outside_without_umbrella = not is_raining\n\nprint(\"Is raining?\", is_raining)      # True\nprint(\"Can go outside without umbrella?\", can_go_outside_without_umbrella)  # False\n\nprint()\n\n# Example 4: Complex Combinations\n# Movie ticket pricing logic\nage = 15\nis_student = True\nis_senior = False\n\n# Gets discount if: (child OR senior) OR (student AND weekday)\nis_child = age < 13\nis_weekday = True\n\ngets_discount = (is_child or is_senior) or (is_student and is_weekday)\nprint(f\"Age {age}, Student: {is_student}\")\nprint(\"Gets discount?\", gets_discount)  # True (student on weekday)\n\nprint()\n\n# Example 5: Short-circuit evaluation (advanced)\n# Python stops checking as soon as it knows the answer\nx = 5\ny = 10\n\n# AND: If first is False, doesn't check the second\nresult = (x > 10) and (y > 5)  # Python sees x > 10 is False, stops there\nprint(\"Short-circuit AND:\", result)  # False (didn't need to check y)\n\n# OR: If first is True, doesn't check the second  \nresult = (x < 10) or (y > 100)  # Python sees x < 10 is True, stops there\nprint(\"Short-circuit OR:\", result)  # True (didn't need to check y)",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### The Three Logical Operators:\n#### 1. AND Operator - All Must Be True\n```\ncondition1 and condition2 and condition3\n\n```\n**Truth table for AND:**\n\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Condition 1</th><th>Condition 2</th><th>Result</th></tr><tr><td>True</td><td>True</td><td>**True**</td></tr><tr><td>True</td><td>False</td><td>False</td></tr><tr><td>False</td><td>True</td><td>False</td></tr><tr><td>False</td><td>False</td><td>False</td></tr></table>**Memory trick:** Think of AND as a strict gatekeeper - everything must be true!\n\n```\n# Real examples:\nage >= 18 and has_license  # Both must be True to drive\nusername_correct and password_correct  # Both must be True to log in\nin_stock and payment_valid  # Both must be True to buy\n\n```\n#### 2. OR Operator - At Least One Must Be True\n```\ncondition1 or condition2 or condition3\n\n```\n**Truth table for OR:**\n\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Condition 1</th><th>Condition 2</th><th>Result</th></tr><tr><td>True</td><td>True</td><td>**True**</td></tr><tr><td>True</td><td>False</td><td>**True**</td></tr><tr><td>False</td><td>True</td><td>**True**</td></tr><tr><td>False</td><td>False</td><td>False</td></tr></table>**Memory trick:** Think of OR as a lenient gatekeeper - any reason works!\n\n```\n# Real examples:\nis_weekend or is_holiday  # Either one means no work!\nis_admin or is_owner  # Either one has full access\npaid_with_card or paid_with_cash  # Either payment method works\n\n```\n#### 3. NOT Operator - Reverses True/False\n```\nnot condition\n\n```\n**Truth table for NOT:**\n\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Condition</th><th>Result</th></tr><tr><td>True</td><td>**False**</td></tr><tr><td>False</td><td>**True**</td></tr></table>**Memory trick:** NOT flips the switch!\n\n```\n# Real examples:\nnot is_logged_in  # True if NOT logged in (need to show login page)\nnot is_empty  # True if NOT empty (has content)\nnot game_over  # True if NOT game over (keep playing)\n\n```\n#### 4. Combining Multiple Operators\n```\n# Use parentheses to control order!\n(condition1 or condition2) and condition3\n\n```\n**Without parentheses:** `and` has higher precedence than `or`\n\n```\n# This:\nTrue or False and False\n# Is evaluated as:\nTrue or (False and False)  # Result: True\n\n# To change order, use parentheses:\n(True or False) and False  # Result: False\n\n```\n**Best practice:** Always use parentheses to make your intent crystal clear!\n\n#### 5. Short-Circuit Evaluation (Efficiency Bonus)\nPython is smart - it stops checking as soon as it knows the answer:\n\n```\n# AND short-circuit:\nFalse and (anything)  # Python stops at False (result is already False)\n\n# OR short-circuit:\nTrue or (anything)  # Python stops at True (result is already True)\n\n```\n**Why this matters:**\n\n```\n# Safe division check\nif denominator != 0 and numerator / denominator > 10:\n    # If denominator is 0, Python stops at first condition\n    # Never attempts the division (which would crash!)\n\n```\n#### 6. Common Patterns and Mistakes\n**‚úÖ Correct:**\n\n```\nif age >= 18 and age <= 65:\n    print(\"Working age\")\n\n# Even better - chained comparison:\nif 18 <= age <= 65:\n    print(\"Working age\")\n\n```\n**‚ùå Wrong - Comparing to multiple values:**\n\n```\n# WRONG: This doesn't work like English!\nif age == 18 or 21 or 25:  # Doesn't check if age is 18, 21, or 25!\n\n# CORRECT:\nif age == 18 or age == 21 or age == 25:\n    print(\"Special age\")\n\n# OR use 'in' with a tuple (preview of future concept):\nif age in (18, 21, 25):\n    print(\"Special age\")\n\n```\n**‚ùå Wrong - Redundant comparisons:**\n\n```\n# WRONG: Checking if bool == True is redundant\nif has_permission == True:\n\n# CORRECT: Bools are already True/False\nif has_permission:\n\n# For NOT:\nif has_permission == False:  # Redundant\nif not has_permission:       # Better\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. The OR Trap - Comparing to Multiple Values Wrong**\n```python\n# WRONG - This doesn't do what you think!\nif age == 18 or 21 or 25:  # Always True! (21 is truthy)\n    print(\"Special age\")\n\n# CORRECT - Compare age to each value\nif age == 18 or age == 21 or age == 25:\n    print(\"Special age\")\n\n# BETTER - Use 'in' operator\nif age in (18, 21, 25):\n    print(\"Special age\")\n```\n\n**2. Redundant Boolean Comparisons**\n```python\n# WRONG - Don't compare booleans to True/False\nif is_valid == True:   # Redundant!\nif is_valid == False:  # Redundant!\n\n# CORRECT - Booleans are already True/False\nif is_valid:      # Clean and Pythonic\nif not is_valid:  # Clean and Pythonic\n```\n\n**3. Forgetting Operator Precedence**\n```python\n# CONFUSING - What does this mean?\nif a or b and c:\n    # Is it (a or b) and c?\n    # Or a or (b and c)?  # <- This one! 'and' binds tighter\n\n# CLEAR - Use parentheses!\nif (a or b) and c:  # Now intent is obvious\n```\n\n**4. Logical Operators with Non-Booleans**\n```python\n# and/or return actual values, not just True/False!\nname = \"\" or \"Anonymous\"  # Returns \"Anonymous\" (first truthy)\nvalue = 0 and 100         # Returns 0 (first falsy)\n\n# This is useful but can be surprising if unexpected\n```\n\n**5. Negating Complex Conditions (De Morgan's Laws)**\n```python\n# WRONG mental model:\nnot (a and b)  # Is NOT the same as (not a and not b)!\n\n# CORRECT (De Morgan's Laws):\nnot (a and b) == (not a or not b)   # True\nnot (a or b) == (not a and not b)   # True\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Three logical operators** combine Boolean questions:\n<li>`and` ‚Üí All conditions must be True (strict gatekeeper)\n- `or` ‚Üí At least one condition must be True (lenient)\n- `not` ‚Üí Reverses True to False and vice versa\n\n</li>- **Truth tables** show all possible outcomes:\n<li>AND: Only True when ALL are True\n- OR: Only False when ALL are False\n- NOT: Always flips the value\n\n</li>- **Use parentheses** to make complex conditions clear and control order\n- **Short-circuit evaluation**: Python stops checking once the answer is determined (efficient!)\n- **Avoid redundancy**: Don't write `bool_var == True`, just use `bool_var`\n- **Operator precedence**: `not` > `and` > `or` (when in doubt, use parentheses!)\n\n### Common Patterns You'll Use Constantly:\n```\n# Range checking (AND)\nif 18 <= age <= 65:  # Chained comparison\n    # Working age\n\n# Multiple valid options (OR)\nif status == \"admin\" or status == \"owner\":\n    # Has full access\n\n# Negation (NOT)\nif not is_logged_in:\n    # Show login page\n\n# Complex conditions\nif (is_member or spent >= 100) and has_coupon:\n    # Apply special discount\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write AND conditions requiring all parts to be true\n- Write OR conditions where at least one must be true\n- Use NOT to reverse boolean values\n- Use parentheses to combine operators correctly\n- Read truth tables\n\n### Coming Up Next:\nIn **Lesson 3: if Statements**, you'll finally learn how to USE these Boolean expressions to make your programs take different actions:\n\n- Execute code only when conditions are true\n- Skip code when conditions are false\n- Indentation and code blocks\n- Building programs that adapt to different situations\n\nAll the Boolean logic you've learned in Lessons 1 and 2 is about to become incredibly powerful!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Ride Safety Checker** for an amusement park that determines if someone can ride different attractions.\n\n**Ride Requirements:**\n\n- **Roller Coaster**: Height >= 48 inches AND not pregnant\n- **Bumper Cars**: Age >= 5 OR (age >= 3 AND with adult)\n- **Ferris Wheel**: No restrictions (everyone can ride)\n\n**Your task:**\n\n- Ask for height (inches), age, pregnancy status, and if accompanied by adult\n- Use logical operators to check eligibility for each ride\n- Display which rides they can access\n\n**Example output:**\n\n<pre>=== Amusement Park Ride Checker ===\n\nEnter your height (inches): 50\nEnter your age: 7\nAre you pregnant? (yes/no): no\nAre you with an adult? (yes/no): no\n\nRide Access:\n‚úì Roller Coaster: True\n‚úì Bumper Cars: True  \n‚úì Ferris Wheel: True\n\nYou can ride 3 out of 3 attractions!\n</pre>",
              "instructions": "Build a **Ride Safety Checker** for an amusement park that determines if someone can ride different attractions.\n\n**Ride Requirements:**\n\n- **Roller Coaster**: Height >= 48 inches AND not pregnant\n- **Bumper Cars**: Age >= 5 OR (age >= 3 AND with adult)\n- **Ferris Wheel**: No restrictions (everyone can ride)\n\n**Your task:**\n\n- Ask for height (inches), age, pregnancy status, and if accompanied by adult\n- Use logical operators to check eligibility for each ride\n- Display which rides they can access\n\n**Example output:**\n\n<pre>=== Amusement Park Ride Checker ===\n\nEnter your height (inches): 50\nEnter your age: 7\nAre you pregnant? (yes/no): no\nAre you with an adult? (yes/no): no\n\nRide Access:\n‚úì Roller Coaster: True\n‚úì Bumper Cars: True  \n‚úì Ferris Wheel: True\n\nYou can ride 3 out of 3 attractions!\n</pre>",
              "starterCode": "# Amusement Park Ride Safety Checker\n# Determine ride eligibility using logical operators\n\nprint(\"=== Amusement Park Ride Checker ===\")\nprint()\n\n# Get user information\nheight = int(input(\"Enter your height (inches): \"))\nage = int(input(\"Enter your age: \"))\npregnant_input = input(\"Are you pregnant? (yes/no): \")\nwith_adult_input = input(\"Are you with an adult? (yes/no): \")\n\n# Convert yes/no to Boolean\nis_pregnant = pregnant_input.lower() == \"yes\"\nwith_adult = with_adult_input.lower() == \"yes\"\n\nprint(\"\\nRide Access:\")\n\n# YOUR CODE HERE:\n# Check each ride's requirements using logical operators\n\n# Roller Coaster: Height >= 48 AND not pregnant\ncan_ride_roller_coaster = \n\n# Bumper Cars: Age >= 5 OR (age >= 3 AND with adult)\ncan_ride_bumper_cars = \n\n# Ferris Wheel: Everyone can ride\ncan_ride_ferris_wheel = True\n\n# Display results\nprint(f\"‚úì Roller Coaster: {can_ride_roller_coaster}\")\nprint(f\"‚úì Bumper Cars: {can_ride_bumper_cars}\")\nprint(f\"‚úì Ferris Wheel: {can_ride_ferris_wheel}\")\n\n# Count accessible rides\ntotal_rides = can_ride_roller_coaster + can_ride_bumper_cars + can_ride_ferris_wheel\nprint(f\"\\nYou can ride {total_rides} out of 3 attractions!\")",
              "solution": "# Amusement Park Ride Safety Checker - SOLUTION\n# Determine ride eligibility using logical operators\n\nprint(\"=== Amusement Park Ride Checker ===\")\nprint()\n\n# Get user information\nheight = int(input(\"Enter your height (inches): \"))\nage = int(input(\"Enter your age: \"))\npregnant_input = input(\"Are you pregnant? (yes/no): \")\nwith_adult_input = input(\"Are you with an adult? (yes/no): \")\n\n# Convert yes/no to Boolean\nis_pregnant = pregnant_input.lower() == \"yes\"\nwith_adult = with_adult_input.lower() == \"yes\"\n\nprint(\"\\nRide Access:\")\n\n# Check each ride's requirements using logical operators\n\n# Roller Coaster: Height >= 48 AND not pregnant\ncan_ride_roller_coaster = height >= 48 and not is_pregnant\n\n# Bumper Cars: Age >= 5 OR (age >= 3 AND with adult)\ncan_ride_bumper_cars = age >= 5 or (age >= 3 and with_adult)\n\n# Ferris Wheel: Everyone can ride\ncan_ride_ferris_wheel = True\n\n# Display results\nprint(f\"‚úì Roller Coaster: {can_ride_roller_coaster}\")\nprint(f\"‚úì Bumper Cars: {can_ride_bumper_cars}\")\nprint(f\"‚úì Ferris Wheel: {can_ride_ferris_wheel}\")\n\n# Count accessible rides (True = 1, False = 0)\ntotal_rides = can_ride_roller_coaster + can_ride_bumper_cars + can_ride_ferris_wheel\nprint(f\"\\nYou can ride {total_rides} out of 3 attractions!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Title is displayed",
                  "expectedOutput": "Amusement Park Ride Checker",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Ride Access section is shown",
                  "expectedOutput": "Ride Access:",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Total count is displayed",
                  "expectedOutput": "out of 3 attractions",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For the roller coaster, use: height >= 48 and not is_pregnant. For bumper cars, use parentheses to group the age check with adult: age >= 5 or (age >= 3 and with_adult). Remember that 'and' requires ALL conditions to be True, while 'or' needs at least ONE to be True."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-03",
          "title": "if Statements: Your First Decisions",
          "moduleId": "module-03",
          "order": 3,
          "estimatedMinutes": 20,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're programming a vending machine. A customer inserts money and selects an item that costs $1.50. Your program needs to decide:\n\n<p style='text-align: center; font-size: 16px; font-weight: bold;'>\"IF money >= 1.50, THEN dispense the item\"</p>Without this ability to make decisions, your program could only do the exact same thing every time - like a music box that plays the same tune. With **if statements**, your programs become intelligent - they adapt, they respond, they <em>decide</em>.\n\n### Real-World Decision Points:\n\n- **Automatic doors**:\nIF sensor detects person ‚Üí Open door\n- **Thermostat**:\nIF temperature < 68¬∞F ‚Üí Turn on heater\n- **Email spam filter**:\nIF message contains suspicious words ‚Üí Move to spam folder\n- **Video game**:\nIF player presses spacebar ‚Üí Make character jump\n\nEvery one of these decisions follows the same pattern:\n\n<pre style='background-color: #f0f0f0; padding: 10px; border-left: 4px solid #3b82f6;'>**IF** (condition is True)\n    **THEN** do these actions\n</pre>In Python, we write this using the `if` statement!\n\n### The Power You're About to Gain:\nIn Lesson 1, you learned to ask Boolean questions (\"Is age >= 18?\"). In Lesson 2, you learned to combine them (\"Is age >= 18 AND has_id?\"). Now you'll learn to make your programs ACT on those answers:\n\n```\nif age >= 18:\n    print(\"You can vote!\")\n    print(\"Register at your local polling station.\")\n\n```\nThis is the moment your programs transform from calculators into decision-makers!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nWater is boiling!\nBe careful!\nTemperature check complete.\n\nThis always prints\n\nEnter your age: 22\n‚úì You are eligible to vote!\n‚úì You can register at vote.gov\n‚úì You can purchase alcohol (in the US)\nAge verification complete.\n\nExcellent work!\nYou earned an A grade.\nBonus points awarded: 5\nGrading complete.\n\n‚úì Login successful!\nWelcome back, Alice!\n\n‚úì Ticket verified\n‚úì You may enter the venue\nEnjoy the show!\n```",
              "code": "# if Statements: Making Your Programs Decide\n\n# Example 1: Basic if statement\ntemperature = 105\n\nif temperature > 100:\n    print(\"Water is boiling!\")\n    print(\"Be careful!\")\n\nprint(\"Temperature check complete.\")\n# Output:\n# Water is boiling!\n# Be careful!\n# Temperature check complete.\n\nprint()\n\n# Example 2: Condition is False - code doesn't run\ntemperature = 75\n\nif temperature > 100:\n    print(\"This won't print\")  # Skipped! Condition is False\n\nprint(\"This always prints\")  # Not indented, so always runs\n# Output:\n# This always prints\n\nprint()\n\n# Example 3: User input validation\nage = int(input(\"Enter your age: \"))\n\nif age >= 18:\n    print(\"‚úì You are eligible to vote!\")\n    print(\"‚úì You can register at vote.gov\")\n\nif age >= 21:\n    print(\"‚úì You can purchase alcohol (in the US)\")\n\nif age >= 25:\n    print(\"‚úì You can rent a car without extra fees\")\n\nprint(\"\\nAge verification complete.\")\n\nprint()\n\n# Example 4: Multiple statements in the if block\nscore = 95\n\nif score >= 90:\n    print(\"Excellent work!\")\n    print(\"You earned an A grade.\")\n    grade = \"A\"\n    bonus_points = 5\n    print(f\"Bonus points awarded: {bonus_points}\")\n\nprint(\"Grading complete.\")\n\nprint()\n\n# Example 5: Combining with logical operators\npassword = \"secret123\"\nusername = \"alice\"\n\nif username == \"alice\" and password == \"secret123\":\n    print(\"‚úì Login successful!\")\n    print(\"Welcome back, Alice!\")\n    is_logged_in = True\n\nprint()\n\n# Example 6: Using Boolean variables\nhas_ticket = True\nhas_id = True\n\nif has_ticket:\n    print(\"‚úì Ticket verified\")\n\nif has_ticket and has_id:\n    print(\"‚úì You may enter the venue\")\n    print(\"Enjoy the show!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### if Statement Anatomy:\n```\nif condition:\n    statement1\n    statement2\n    statement3\n\n```\n#### Breaking It Down:\n\n<li>**The keyword**: `if` (lowercase!)```\nif  # Correct\nIF  # ERROR! Python is case-sensitive\nIf  # ERROR! Must be lowercase\n\n```\n</li><li>**The condition**: Any Boolean expression```\nif age >= 18:           # Comparison\nif is_valid:            # Boolean variable\nif score > 90 and passed_exam:  # Logical operators\nif temperature > 32:    # Any expression that's True/False\n\n```\n</li><li>**The colon (:)**: REQUIRED! Tells Python \"here comes the code block\"```\nif age >= 18:  # Correct - has colon\nif age >= 18   # ERROR! Missing colon\n\n```\n</li><li>**Indentation**: The code inside the if block MUST be indented```\n# Correct - 4 spaces (or 1 tab)\nif temperature > 100:\n    print(\"Boiling\")  # Indented\n    print(\"Hot!\")     # Indented\n\n# ERROR - not indented\nif temperature > 100:\nprint(\"Boiling\")  # IndentationError!\n\n```\n</li>\n### How Python Reads an if Statement:\n\n- Evaluate the condition (is it True or False?)\n- If True ‚Üí Execute all indented code\n- If False ‚Üí Skip all indented code\n- Continue with non-indented code after the block\n\n#### Visual Flow:\n```\nif temperature > 100:\n    print(\"A\")  ‚Üê Runs only if True\n    print(\"B\")  ‚Üê Runs only if True\nprint(\"C\")      ‚Üê Always runs (not indented!)\n\n# If temperature = 105 (True):\n# Output: A, B, C\n\n# If temperature = 75 (False):\n# Output: C\n\n```\n### Indentation Rules (CRITICAL!):\nPython uses **indentation** to group code, not curly braces {} like other languages:\n\n```\n# Standard: 4 spaces per indentation level\nif condition:\n    statement1     # 4 spaces\n    statement2     # 4 spaces\nnext_statement     # 0 spaces (not part of if)\n\n```\n**Common indentation mistakes:**\n\n```\n# WRONG - mixing tabs and spaces (big no-no!)\nif x > 10:\n    print(\"A\")    # Tab\n    print(\"B\")    # 4 spaces  ‚Üê Can cause hard-to-see errors!\n\n# WRONG - inconsistent spacing\nif x > 10:\n  print(\"A\")      # 2 spaces\n    print(\"B\")    # 4 spaces  ‚Üê IndentationError!\n\n# CORRECT - consistent 4 spaces\nif x > 10:\n    print(\"A\")    # 4 spaces\n    print(\"B\")    # 4 spaces\n\n```\n**Best practice:** Configure your editor to insert 4 spaces when you press Tab.\n\n### Multiple if Statements:\nYou can have multiple separate if statements - each is independent:\n\n```\nscore = 85\n\nif score >= 90:\n    print(\"A grade\")  # Not executed (85 < 90)\n\nif score >= 80:\n    print(\"B grade\")  # Executed! (85 >= 80)\n\nif score >= 70:\n    print(\"C grade\")  # Also executed! (85 >= 70)\n\n# Output:\n# B grade\n# C grade\n\n```\n**Important:** These are separate checks! Both the 80 and 70 checks run because they're independent if statements. Later you'll learn `elif` to make them mutually exclusive.\n\n### Common Mistakes and Solutions:\n\n<li>**Missing colon**:```\n# WRONG:\nif age >= 18\n    print(\"Adult\")\n# SyntaxError: invalid syntax\n\n# CORRECT:\nif age >= 18:\n    print(\"Adult\")\n\n```\n</li><li>**Using = instead of ==**:```\n# WRONG:\nif age = 18:  # This tries to ASSIGN, not compare!\n    print(\"Adult\")\n# SyntaxError: invalid syntax\n\n# CORRECT:\nif age == 18:  # Comparison\n    print(\"Adult\")\n\n```\n</li><li>**Forgetting indentation**:```\n# WRONG:\nif score > 90:\nprint(\"Great!\")  # IndentationError!\n\n# CORRECT:\nif score > 90:\n    print(\"Great!\")\n\n```\n</li><li>**Indenting code that shouldn't be**:```\nif temperature > 100:\n    print(\"Boiling\")   # Runs only if True\n    print(\"Done\")      # Also only if True!\n\n# Probably wanted:\nif temperature > 100:\n    print(\"Boiling\")   # Runs only if True\nprint(\"Done\")          # Always runs\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Missing Colon After Condition**\n```python\n# WRONG - Missing colon\nif age >= 18\n    print(\"Adult\")\n# SyntaxError: expected ':'\n\n# CORRECT\nif age >= 18:\n    print(\"Adult\")\n```\n\n**2. Using = Instead of == for Comparison**\n```python\n# WRONG - Assignment, not comparison!\nif age = 18:  # SyntaxError!\n\n# CORRECT - Use == to compare\nif age == 18:\n    print(\"Exactly 18\")\n```\n\n**3. Inconsistent Indentation**\n```python\n# WRONG - Mixing tabs and spaces\nif score > 90:\n    print(\"A\")    # 4 spaces\n\tprint(\"Great\")  # Tab - IndentationError!\n\n# CORRECT - Always use 4 spaces\nif score > 90:\n    print(\"A\")\n    print(\"Great\")\n```\n\n**4. Indenting Code That Should Always Run**\n```python\n# WRONG - \"Done\" only prints when condition is True\nif temperature > 100:\n    print(\"Boiling\")\n    print(\"Done\")  # Accidentally indented!\n\n# CORRECT - \"Done\" always prints\nif temperature > 100:\n    print(\"Boiling\")\nprint(\"Done\")  # Not indented = always runs\n```\n\n**5. Empty if Block**\n```python\n# WRONG - Python requires at least one statement\nif age >= 18:\n    # TODO: add code later\n# SyntaxError!\n\n# CORRECT - Use 'pass' as placeholder\nif age >= 18:\n    pass  # Placeholder for future code\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **if statements** make code conditional - it only runs when the condition is True\n- **Syntax**: `if condition:` (keyword, condition, colon, indentation)\n- **Indentation is MANDATORY** in Python - use 4 spaces consistently\n- **The colon (:)** after the condition is required - don't forget it!\n- **Code flow**: Python evaluates the condition, runs indented code if True, skips it if False\n- **Multiple if statements** are independent - each check runs separately\n- **Common mistakes**:\n<li>Missing colon\n- Wrong indentation (too much, too little, mixing tabs/spaces)\n- Using `=` instead of `==`\n- Indenting code that should always run\n\n</li>- **if works with any Boolean**: comparisons, logical operators, Boolean variables\n\n### Before Moving On:\nMake sure you can:\n\n- Write a basic if statement with proper syntax\n- Indent code correctly (4 spaces)\n- Explain what happens when condition is True vs False\n- Debug common indentation and syntax errors\n\n### Coming Up Next:\nIn **Lesson 4: if-else Statements**, you'll learn to handle BOTH paths:\n\n- \"IF condition is True, do this; ELSE do that\"\n- Guaranteeing one of two paths always executes\n- Building programs that handle all scenarios\n\nRight now, your if statements only do something when True. With if-else, you'll handle BOTH True AND False cases explicitly!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Password Strength Checker** that validates a password against multiple security criteria.\n\n**Password Requirements:**\n\n- Length must be at least 8 characters\n- Must contain at least one number\n- Must not be a common password (check against \"password\", \"12345678\", \"qwerty\")\n\n**Your task:**\n\n- Ask the user to enter a password\n- Check each requirement using separate if statements\n- Give specific feedback for each check\n- Count how many requirements were met\n\n**Example output:**\n\n<pre>=== Password Strength Checker ===\n\nEnter your password: MyP@ss2024\n\nChecking password strength...\n‚úì Password length is sufficient (10 characters)\n‚úì Password contains at least one number\n‚úì Password is not commonly used\n\nPassword strength: 3/3 requirements met\nYour password is strong!\n</pre>**Hints:**\n\n- Use `len(password)` to check length\n- Use `password.isalnum()` or check if `any(char.isdigit() for char in password)`\n- Use `!=` or `not in` to check against common passwords",
              "instructions": "Build a **Password Strength Checker** that validates a password against multiple security criteria.\n\n**Password Requirements:**\n\n- Length must be at least 8 characters\n- Must contain at least one number\n- Must not be a common password (check against \"password\", \"12345678\", \"qwerty\")\n\n**Your task:**\n\n- Ask the user to enter a password\n- Check each requirement using separate if statements\n- Give specific feedback for each check\n- Count how many requirements were met\n\n**Example output:**\n\n<pre>=== Password Strength Checker ===\n\nEnter your password: MyP@ss2024\n\nChecking password strength...\n‚úì Password length is sufficient (10 characters)\n‚úì Password contains at least one number\n‚úì Password is not commonly used\n\nPassword strength: 3/3 requirements met\nYour password is strong!\n</pre>**Hints:**\n\n- Use `len(password)` to check length\n- Use `password.isalnum()` or check if `any(char.isdigit() for char in password)`\n- Use `!=` or `not in` to check against common passwords",
              "starterCode": "# Password Strength Checker\n# Validate password against security criteria\n\nprint(\"=== Password Strength Checker ===\")\nprint()\n\npassword = input(\"Enter your password: \")\n\nprint(\"\\nChecking password strength...\")\n\n# Counter for requirements met\nrequirements_met = 0\n\n# YOUR CODE HERE:\n# Check 1: Length requirement (>= 8 characters)\nif :\n    print(f\"‚úì Password length is sufficient ({len(password)} characters)\")\n    requirements_met = requirements_met + 1\n\n# Check 2: Contains at least one number\n# Hint: Use any(char.isdigit() for char in password)\nhas_number = any(char.isdigit() for char in password)\nif :\n    print(\"‚úì Password contains at least one number\")\n    requirements_met = requirements_met + 1\n\n# Check 3: Not a common password\ncommon_passwords = [\"password\", \"12345678\", \"qwerty\"]\nif :\n    print(\"‚úì Password is not commonly used\")\n    requirements_met = requirements_met + 1\n\n# Display final result\nprint(f\"\\nPassword strength: {requirements_met}/3 requirements met\")\n\nif requirements_met == 3:\n    print(\"Your password is strong!\")\n\nif requirements_met < 3:\n    print(\"Your password needs improvement.\")",
              "solution": "# Password Strength Checker - SOLUTION\n# Validate password against security criteria\n\nprint(\"=== Password Strength Checker ===\")\nprint()\n\npassword = input(\"Enter your password: \")\n\nprint(\"\\nChecking password strength...\")\n\n# Counter for requirements met\nrequirements_met = 0\n\n# Check 1: Length requirement (>= 8 characters)\nif len(password) >= 8:\n    print(f\"‚úì Password length is sufficient ({len(password)} characters)\")\n    requirements_met = requirements_met + 1\n\n# Check 2: Contains at least one number\nhas_number = any(char.isdigit() for char in password)\nif has_number:\n    print(\"‚úì Password contains at least one number\")\n    requirements_met = requirements_met + 1\n\n# Check 3: Not a common password\ncommon_passwords = [\"password\", \"12345678\", \"qwerty\"]\nif password not in common_passwords:\n    print(\"‚úì Password is not commonly used\")\n    requirements_met = requirements_met + 1\n\n# Display final result\nprint(f\"\\nPassword strength: {requirements_met}/3 requirements met\")\n\nif requirements_met == 3:\n    print(\"Your password is strong!\")\n\nif requirements_met < 3:\n    print(\"Your password needs improvement.\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Password Strength Checker title displayed",
                  "expectedOutput": "Password Strength Checker",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Checking message is shown",
                  "expectedOutput": "Checking password strength",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Requirements count is displayed",
                  "expectedOutput": "requirements met",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For Check 1, use len(password) >= 8. For Check 2, the variable has_number is already set up - just check if has_number is True (or just write 'if has_number:'). For Check 3, use 'password not in common_passwords' or check each one separately."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-04",
          "title": "if-else Statements: The Fork in the Road",
          "moduleId": "module-03",
          "order": 4,
          "estimatedMinutes": 20,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at a fork in the road. A sign says:\n\n<p style='text-align: center; font-size: 16px; font-weight: bold; background-color: #f0f0f0; padding: 10px;'>\"IF you're going to the beach ‚Üí Go LEFT\nELSE (for anywhere else) ‚Üí Go RIGHT\"</p>No matter where you're going, you MUST choose one of these two paths. There's no third option, no \"maybe,\" no skipping the choice entirely. **One of the two paths is guaranteed.**\n\nThis is the power of the **if-else statement**.\n\n### In Lesson 3, You Learned if:\n```\nif temperature > 100:\n    print(\"Water is boiling\")\n# If False, this code just... does nothing\n\n```\nThe problem? When the condition is False, your program has no explicit response. It's like preparing for one scenario but ignoring the other.\n\n### Now With if-else:\n```\nif temperature > 100:\n    print(\"Water is boiling\")   # If True\nelse:\n    print(\"Water is not boiling\") # If False\n# One of these ALWAYS runs - guaranteed!\n\n```\nYou've covered ALL scenarios. No matter what temperature is, your program has a response ready.\n\n### Real-World if-else Decisions:\n\n- **Login system**:\nIF password correct ‚Üí Log in user\nELSE ‚Üí Show error message\n- **Age verification**:\nIF age >= 18 ‚Üí Grant access\nELSE ‚Üí Deny access\n- **Even/odd checker**:\nIF number % 2 == 0 ‚Üí \"Even\"\nELSE ‚Üí \"Odd\"\n- **File upload**:\nIF file size < limit ‚Üí Accept upload\nELSE ‚Üí Reject upload\n- **Thermostat**:\nIF temperature < 68 ‚Üí Turn heater ON\nELSE ‚Üí Turn heater OFF\n\nNotice the pattern: Every situation has exactly **two mutually exclusive outcomes**. The condition is either True or False - there's no third option!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nYou are an adult\nYou are a minor\n\nEnter a number: 7\n7 is ODD\n\nEnter password: secret123\n‚úì Login successful!\nWelcome to your dashboard.\n\nTemperature is comfortable.\nAC status: False\n\nUsing if-else (mutually exclusive):\nGrade: Not an A\n\nUsing multiple if statements (independent):\nGrade: Not an A\n\nWould you like to continue? (yes/no): no\nStopping...\n```",
              "code": "# if-else Statements: Handling Both Paths\n\n# Example 1: Basic if-else\nage = 20\n\nif age >= 18:\n    print(\"You are an adult\")\nelse:\n    print(\"You are a minor\")\n# Output: You are an adult\n\n# Try with different age:\nage = 15\nif age >= 18:\n    print(\"You are an adult\")\nelse:\n    print(\"You are a minor\")\n# Output: You are a minor\n\nprint()\n\n# Example 2: Even or Odd Checker\nnumber = int(input(\"Enter a number: \"))\n\nif number % 2 == 0:\n    print(f\"{number} is EVEN\")\nelse:\n    print(f\"{number} is ODD\")\n\nprint()\n\n# Example 3: Login Authentication\nentered_password = input(\"Enter password: \")\ncorrect_password = \"secret123\"\n\nif entered_password == correct_password:\n    print(\"‚úì Login successful!\")\n    print(\"Welcome to your dashboard.\")\n    is_logged_in = True\nelse:\n    print(\"‚ùå Incorrect password!\")\n    print(\"Please try again.\")\n    is_logged_in = False\n\nprint()\n\n# Example 4: Temperature Response\ntemperature = 75\n\nif temperature > 85:\n    print(\"It's hot! Turn on the AC.\")\n    ac_on = True\nelse:\n    print(\"Temperature is comfortable.\")\n    ac_on = False\n\nprint(f\"AC status: {ac_on}\")\n\nprint()\n\n# Example 5: Comparing if-else vs Multiple if statements\nscore = 85\n\nprint(\"Using if-else (mutually exclusive):\")\nif score >= 90:\n    print(\"Grade: A\")\nelse:\n    print(\"Grade: Not an A\")\n# Output: Grade: Not an A (only ONE prints)\n\nprint()\n\nprint(\"Using multiple if statements (independent):\")\nif score >= 90:\n    print(\"Grade: A\")\n\nif score < 90:\n    print(\"Grade: Not an A\")\n# Also outputs: Grade: Not an A\n# But required TWO separate checks!\n\nprint()\n\n# Example 6: Input Validation\nuser_input = input(\"Would you like to continue? (yes/no): \")\n\nif user_input.lower() == \"yes\":\n    print(\"Continuing...\")\n    should_continue = True\nelse:\n    print(\"Stopping...\")\n    should_continue = False",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### if-else Statement Anatomy:\n```\nif condition:\n    # Code block 1 (runs if True)\n    statement1\n    statement2\nelse:\n    # Code block 2 (runs if False)\n    statement3\n    statement4\n\n```\n#### Breaking It Down:\n\n<li>**The if block** (same as before):```\nif condition:  # Check if True\n    code       # Runs if True\n\n```\n</li><li>**The else keyword**:```\nelse:  # Note: no condition! No parentheses!\n\n```\n\n- Must be at the same indentation level as its `if`\n- Has a colon (:) just like if\n- **No condition** - else means \"everything else\"\n\n</li><li>**The else block**:```\nelse:\n    code  # Runs if condition is False\n\n```\n\n- Indented just like the if block (4 spaces)\n- Can have multiple statements\n\n</li>\n### How Python Reads if-else:\n\n- Evaluate the condition (True or False?)\n- If **True** ‚Üí Execute if block, **skip else block**\n- If **False** ‚Üí **Skip if block**, execute else block\n- Continue with code after the if-else structure\n\n#### Visual Flow:\n```\nage = 15\n\nif age >= 18:\n    print(\"Adult\")   ‚Üê Skipped (False)\nelse:\n    print(\"Minor\")   ‚Üê Executed (because if was False)\n\nprint(\"Done\")       ‚Üê Always runs\n\n# Output:\n# Minor\n# Done\n\n```\n### Key Differences: if vs if-else vs Multiple if:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Behavior</th><th>When to Use</th></tr><tr><td>**if only**<pre>if condition:\n    code</pre></td><td>Code runs if True, nothing happens if False</td><td>When False case needs no action</td></tr><tr><td>**if-else**<pre>if condition:\n    code1\nelse:\n    code2</pre></td><td>Exactly ONE block always runs</td><td>Binary decisions (two mutually exclusive options)</td></tr><tr><td>**Multiple if**<pre>if cond1:\n    code1\nif cond2:\n    code2</pre></td><td>Each check is independent; multiple blocks can run</td><td>Multiple independent conditions</td></tr></table>#### Example Comparison:\n```\n# Scenario: Checking score for grade\nscore = 95\n\n# WRONG for this purpose - both could print!\nif score >= 90:\n    print(\"A grade\")\nif score < 90:\n    print(\"Not an A\")\n# Inefficient: Checks both conditions even though only one can be true\n\n# CORRECT - mutually exclusive\nif score >= 90:\n    print(\"A grade\")\nelse:\n    print(\"Not an A\")\n# Better: Only one check needed, one guaranteed output\n\n```\n### Common Patterns:\n#### 1. Binary Decision (Yes/No)\n```\nif user_input == \"yes\":\n    proceed()\nelse:\n    cancel()\n\n```\n#### 2. Pass/Fail\n```\nif score >= 60:\n    print(\"PASS\")\nelse:\n    print(\"FAIL\")\n\n```\n#### 3. Even/Odd\n```\nif number % 2 == 0:\n    print(\"Even\")\nelse:\n    print(\"Odd\")\n\n```\n#### 4. Toggle/Switch\n```\nif is_on:\n    turn_off()\nelse:\n    turn_on()\n\n```\n#### 5. Validation\n```\nif len(password) >= 8:\n    accept_password()\nelse:\n    reject_password()\n\n```\n### Common Mistakes:\n\n<li>**Putting a condition on else**:```\n# WRONG:\nif age >= 18:\n    print(\"Adult\")\nelse age < 18:  # SyntaxError! No condition on else!\n    print(\"Minor\")\n\n# CORRECT:\nif age >= 18:\n    print(\"Adult\")\nelse:  # No condition needed - else means \"all other cases\"\n    print(\"Minor\")\n\n```\n</li><li>**Wrong indentation**:```\n# WRONG:\nif age >= 18:\n    print(\"Adult\")\n  else:  # IndentationError! else must align with if\n    print(\"Minor\")\n\n# CORRECT:\nif age >= 18:\n    print(\"Adult\")\nelse:  # Same indentation level as if\n    print(\"Minor\")\n\n```\n</li><li>**Missing colon on else**:```\n# WRONG:\nif age >= 18:\n    print(\"Adult\")\nelse  # SyntaxError! Missing colon\n    print(\"Minor\")\n\n# CORRECT:\nif age >= 18:\n    print(\"Adult\")\nelse:  # Colon required!\n    print(\"Minor\")\n\n```\n</li><li>**Using when you need elif**:```\n# PROBLEM: Want to check multiple ranges\nif score >= 90:\n    print(\"A\")\nelse:\n    print(\"Not an A\")  # Too broad! What about B, C, D?\n\n# BETTER: Use elif (next lesson!)\nif score >= 90:\n    print(\"A\")\nelif score >= 80:\n    print(\"B\")\nelse:\n    print(\"C or below\")\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Adding a Condition to else**\n```python\n# WRONG - else doesn't take a condition!\nif age >= 18:\n    print(\"Adult\")\nelse age < 18:  # SyntaxError!\n    print(\"Minor\")\n\n# CORRECT - else has no condition\nif age >= 18:\n    print(\"Adult\")\nelse:\n    print(\"Minor\")\n```\n\n**2. else Not Aligned with if**\n```python\n# WRONG - else must be at same indentation as if\nif age >= 18:\n    print(\"Adult\")\n    else:  # IndentationError!\n        print(\"Minor\")\n\n# CORRECT - else aligns with if\nif age >= 18:\n    print(\"Adult\")\nelse:\n    print(\"Minor\")\n```\n\n**3. Missing Colon After else**\n```python\n# WRONG - else needs a colon\nif age >= 18:\n    print(\"Adult\")\nelse  # SyntaxError: expected ':'\n    print(\"Minor\")\n\n# CORRECT\nif age >= 18:\n    print(\"Adult\")\nelse:\n    print(\"Minor\")\n```\n\n**4. Using if-else When You Need elif**\n```python\n# WRONG - Only handles 2 cases, but there are more\nif grade >= 90:\n    print(\"A\")\nelse:\n    print(\"Not an A\")  # What about B, C, D, F?\n\n# CORRECT - Use elif for multiple cases\nif grade >= 90:\n    print(\"A\")\nelif grade >= 80:\n    print(\"B\")\nelif grade >= 70:\n    print(\"C\")\nelse:\n    print(\"Below C\")\n```\n\n**5. Variable Scope Confusion**\n```python\n# WRONG - Variable might not be defined\nif condition:\n    message = \"Success\"\n# If condition is False, message doesn't exist!\nprint(message)  # NameError if condition was False\n\n# CORRECT - Define in both branches\nif condition:\n    message = \"Success\"\nelse:\n    message = \"Failed\"\nprint(message)  # Always works\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **if-else ensures complete coverage**: Exactly ONE of the two blocks always executes\n- **Syntax**: `if condition:` then `else:` (no condition on else!)\n- **Mutually exclusive**: if block runs when True, else block runs when False - never both\n- **else alignment**: Must be at same indentation level as its if\n- **else colon**: Don't forget the : after else\n- **Best for binary decisions**: When you have exactly two options (yes/no, pass/fail, on/off)\n- **More efficient than multiple if**: Only one condition check instead of two\n- **Guaranteed execution**: Variables set in both blocks will always be defined\n\n### When to Use if-else:\n```\n‚úÖ Use if-else when:\n‚Ä¢ Exactly two mutually exclusive outcomes\n‚Ä¢ Both True and False cases need explicit handling\n‚Ä¢ Binary decisions (on/off, yes/no, valid/invalid)\n\n‚ùå Don't use if-else when:\n‚Ä¢ More than two possible outcomes (use elif - next lesson!)\n‚Ä¢ The False case needs no action (just use if)\n‚Ä¢ Conditions are independent (use multiple if statements)\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write if-else with proper syntax and indentation\n- Explain why exactly one block always runs\n- Identify when if-else is better than multiple if statements\n- Set variables inside both blocks\n\n### Coming Up Next:\nIn **Lesson 5: elif Chains**, you'll learn to handle **more than two options**:\n\n- Checking multiple mutually exclusive conditions\n- Grade calculator (A, B, C, D, F)\n- Menu systems with many options\n- Combining if-elif-else for complete coverage\n\nif-else handles 2 options. elif chains handle 3, 4, 5... as many as you need!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Ticket Pricing Calculator** for a movie theater that determines the ticket price based on age.\n\n**Pricing Rules:**\n\n- **Child (under 13):** $8.00\n- **Adult (13 and over):** $15.00\n\n**Your task:**\n\n- Ask the user for their age\n- Use if-else to determine which price category they fall into\n- Display the ticket price and category\n- Calculate total for multiple tickets (bonus)\n\n**Example output:**\n\n<pre>=== Movie Theater Ticket Pricing ===\n\nEnter your age: 10\n\nTicket Category: Child\nTicket Price: $8.00\n\nHow many tickets? 3\nTotal: $24.00\n\nEnjoy the show!\n</pre>",
              "instructions": "Build a **Ticket Pricing Calculator** for a movie theater that determines the ticket price based on age.\n\n**Pricing Rules:**\n\n- **Child (under 13):** $8.00\n- **Adult (13 and over):** $15.00\n\n**Your task:**\n\n- Ask the user for their age\n- Use if-else to determine which price category they fall into\n- Display the ticket price and category\n- Calculate total for multiple tickets (bonus)\n\n**Example output:**\n\n<pre>=== Movie Theater Ticket Pricing ===\n\nEnter your age: 10\n\nTicket Category: Child\nTicket Price: $8.00\n\nHow many tickets? 3\nTotal: $24.00\n\nEnjoy the show!\n</pre>",
              "starterCode": "# Movie Theater Ticket Pricing Calculator\n# Determine price based on age using if-else\n\nprint(\"=== Movie Theater Ticket Pricing ===\")\nprint()\n\n# Get user's age\nage = int(input(\"Enter your age: \"))\n\nprint()\n\n# YOUR CODE HERE:\n# Use if-else to determine ticket price\n\nif :  # Check if under 13\n    category = \"Child\"\n    price = \nelse:  # Otherwise, it's an adult\n    category = \n    price = \n\n# Display results\nprint(f\"Ticket Category: {category}\")\nprint(f\"Ticket Price: ${price:.2f}\")\n\nprint()\n\n# Bonus: Calculate total for multiple tickets\nquantity = int(input(\"How many tickets? \"))\ntotal = \n\nprint(f\"Total: ${total:.2f}\")\nprint(\"\\nEnjoy the show!\")",
              "solution": "# Movie Theater Ticket Pricing Calculator - SOLUTION\n# Determine price based on age using if-else\n\nprint(\"=== Movie Theater Ticket Pricing ===\")\nprint()\n\n# Get user's age\nage = int(input(\"Enter your age: \"))\n\nprint()\n\n# Use if-else to determine ticket price\nif age < 13:\n    category = \"Child\"\n    price = 8.00\nelse:\n    category = \"Adult\"\n    price = 15.00\n\n# Display results\nprint(f\"Ticket Category: {category}\")\nprint(f\"Ticket Price: ${price:.2f}\")\n\nprint()\n\n# Calculate total for multiple tickets\nquantity = int(input(\"How many tickets? \"))\ntotal = price * quantity\n\nprint(f\"Total: ${total:.2f}\")\nprint(\"\\nEnjoy the show!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use 'age < 13' for the child condition. Remember that else automatically handles everything that's NOT under 13, so you don't need a condition on else. Child price is 8.00, adult price is 15.00. For total, multiply price by quantity."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-05",
          "title": "elif Chains: Multiple Decision Paths",
          "moduleId": "module-03",
          "order": 5,
          "estimatedMinutes": 25,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at a train station with a ticket kiosk. You enter your age, and the machine determines your fare:\n\n<li style='background-color: #e3f2fd; padding: 8px; margin: 5px 0;'>**IF** age < 5 ‚Üí \"Free (infant)\"</li><li style='background-color: #fff3e0; padding: 8px; margin: 5px 0;'>**ELSE IF** age < 13 ‚Üí \"$5 (child)\"</li><li style='background-color: #f3e5f5; padding: 8px; margin: 5px 0;'>**ELSE IF** age < 65 ‚Üí \"$10 (adult)\"</li><li style='background-color: #e8f5e9; padding: 8px; margin: 5px 0;'>**ELSE** ‚Üí \"$7 (senior)\"</li>\nThe machine checks conditions **in order** from top to bottom. When it finds the first match, it stops checking and executes that path. This is an **elif chain**!\n\n### You've Learned:\n\n<li>**Lesson 3 (if)**: One condition, one action<pre>if temperature > 100:\n    print(\"Boiling\")</pre></li><li>**Lesson 4 (if-else)**: Two paths, exactly one runs<pre>if age >= 18:\n    print(\"Adult\")\nelse:\n    print(\"Minor\")</pre></li>\n### Now: elif - Multiple Mutually Exclusive Paths\nWhat if you need to handle **3, 4, 5, or more** different scenarios?\n\n```\nif score >= 90:\n    grade = \"A\"\nelif score >= 80:  # \"else if\" - only checked if first was False\n    grade = \"B\"\nelif score >= 70:  # Only checked if above were False\n    grade = \"C\"\nelif score >= 60:  # Only checked if above were False\n    grade = \"D\"\nelse:              # Catches everything below 60\n    grade = \"F\"\n\n```\nPython checks from top to bottom. **First match wins**, and all remaining conditions are skipped!\n\n### Real-World elif Chain Examples:\n\n- **Shipping calculator**:\nIF weight < 1lb ‚Üí $5\nELIF weight < 5lb ‚Üí $10\nELIF weight < 20lb ‚Üí $20\nELSE ‚Üí $40\n- **Weather response**:\nIF temp > 90 ‚Üí \"Very hot\"\nELIF temp > 75 ‚Üí \"Warm\"\nELIF temp > 60 ‚Üí \"Mild\"\nELIF temp > 32 ‚Üí \"Cold\"\nELSE ‚Üí \"Freezing\"\n- **BMI category**:\nIF bmi < 18.5 ‚Üí \"Underweight\"\nELIF bmi < 25 ‚Üí \"Normal\"\nELIF bmi < 30 ‚Üí \"Overweight\"\nELSE ‚Üí \"Obese\""
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nScore 85 = Grade B\n\nSLOW DOWN\n\nAge: 8\nCategory: Child\nPrice: $8\n\nTemperature: 45¬∞F\nStatus: Cold\nAction: Close windows\n\nChecking score: 95\nYou passed!\n\nMain Menu:\n1. Start Game\n2. Load Save\n3. Settings\n4. Quit\nEnter choice (1-4): 2\nLoading saved game...\n```",
              "code": "# elif Chains: Multiple Decision Paths\n\n# Example 1: Letter Grade Calculator\nscore = 85\n\nif score >= 90:\n    grade = \"A\"\n    print(f\"Score {score} = Grade A\")\nelif score >= 80:\n    grade = \"B\"\n    print(f\"Score {score} = Grade B\")\nelif score >= 70:\n    grade = \"C\"\n    print(f\"Score {score} = Grade C\")\nelif score >= 60:\n    grade = \"D\"\n    print(f\"Score {score} = Grade D\")\nelse:\n    grade = \"F\"\n    print(f\"Score {score} = Grade F\")\n# Output: Score 85 = Grade B\n\nprint()\n\n# Example 2: Traffic Light Response\nlight_color = \"yellow\"\n\nif light_color == \"green\":\n    print(\"GO\")\nelif light_color == \"yellow\":\n    print(\"SLOW DOWN\")\nelif light_color == \"red\":\n    print(\"STOP\")\nelse:\n    print(\"ERROR: Unknown light color\")\n# Output: SLOW DOWN\n\nprint()\n\n# Example 3: Age-Based Ticket Pricing\nage = 8\n\nif age < 5:\n    price = 0\n    category = \"Infant (Free)\"\nelif age < 13:\n    price = 8\n    category = \"Child\"\nelif age < 18:\n    price = 12\n    category = \"Teen\"\nelif age < 65:\n    price = 15\n    category = \"Adult\"\nelse:\n    price = 10\n    category = \"Senior\"\n\nprint(f\"Age: {age}\")\nprint(f\"Category: {category}\")\nprint(f\"Price: ${price}\")\n# Output:\n# Age: 8\n# Category: Child\n# Price: $8\n\nprint()\n\n# Example 4: Temperature Response System\ntemperature = 45\n\nif temperature > 90:\n    action = \"Turn on AC\"\n    warning = \"Very hot!\"\nelif temperature > 75:\n    action = \"Open windows\"\n    warning = \"Warm\"\nelif temperature > 60:\n    action = \"Do nothing\"\n    warning = \"Comfortable\"\nelif temperature > 32:\n    action = \"Close windows\"\n    warning = \"Cold\"\nelse:\n    action = \"Turn on heater\"\n    warning = \"Freezing!\"\n\nprint(f\"Temperature: {temperature}¬∞F\")\nprint(f\"Status: {warning}\")\nprint(f\"Action: {action}\")\n# Output:\n# Temperature: 45¬∞F\n# Status: Cold\n# Action: Close windows\n\nprint()\n\n# Example 5: First Match Wins (Order Matters!)\nscore = 95\n\nprint(\"Checking score: 95\")\n\nif score >= 60:\n    print(\"You passed!\")  # This matches first!\n    # The rest are skipped, even though they would also be True\nelif score >= 70:\n    print(\"This never runs\")  # Skipped\nelif score >= 80:\n    print(\"This never runs\")  # Skipped\nelif score >= 90:\n    print(\"This never runs\")  # Skipped\n\n# Output: You passed!\n# (Even though score >= 90 is also True, it never checks it!)\n\nprint()\n\n# Example 6: Menu System\nprint(\"Main Menu:\")\nprint(\"1. Start Game\")\nprint(\"2. Load Save\")\nprint(\"3. Settings\")\nprint(\"4. Quit\")\n\nchoice = int(input(\"Enter choice (1-4): \"))\n\nif choice == 1:\n    print(\"Starting new game...\")\nelif choice == 2:\n    print(\"Loading saved game...\")\nelif choice == 3:\n    print(\"Opening settings...\")\nelif choice == 4:\n    print(\"Goodbye!\")\nelse:\n    print(\"Invalid choice! Please enter 1-4.\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### elif Chain Anatomy:\n```\nif condition1:\n    # Block 1\nelif condition2:\n    # Block 2\nelif condition3:\n    # Block 3\nelse:\n    # Block 4 (optional)\n\n```\n#### Breaking It Down:\n\n<li>**if**: Always comes first```\nif score >= 90:  # First condition to check\n\n```\n</li><li>**elif**: Short for \"else if\" - adds more conditions```\nelif score >= 80:  # Only checked if 'if' was False\nelif score >= 70:  # Only checked if above were False\n# Can have as many elif as needed!\n\n```\n</li><li>**else**: Optional catch-all at the end```\nelse:  # Runs if ALL above were False\n\n```\n</li>\n### How Python Reads elif Chains:\n\n- **Start at the top**: Check if condition\n- **If True**: Execute that block, **skip all remaining** elif/else\n- **If False**: Move to next elif, check its condition\n- **If no conditions match**: Execute else block (if present)\n- **Continue**: Code after the entire chain runs\n\n#### Visual Flow Example:\n```\nscore = 75\n\nif score >= 90:      # False (75 < 90) ‚Üí Check next\n    print(\"A\")\nelif score >= 80:    # False (75 < 80) ‚Üí Check next\n    print(\"B\")\nelif score >= 70:    # True! (75 >= 70) ‚Üí Execute & STOP\n    print(\"C\")\nelif score >= 60:    # SKIPPED (already found match)\n    print(\"D\")\nelse:                 # SKIPPED (already found match)\n    print(\"F\")\n\n# Output: C\n\n```\n### Order Matters! (Critical Concept)\n**Rule:** Put **most specific conditions first**, general ones last.\n\n#### ‚úÖ Correct Order (Specific to General):\n```\nif score >= 90:    # Most restrictive\n    print(\"A\")\nelif score >= 80:  # Less restrictive\n    print(\"B\")\nelif score >= 70:  # Even less\n    print(\"C\")\nelse:              # Catches everything else\n    print(\"F\")\n# Works correctly!\n\n```\n#### ‚ùå Wrong Order (General First):\n```\nif score >= 60:    # Too general! Matches 60-100!\n    print(\"D\")     # This catches EVERYTHING >= 60\nelif score >= 70:  # NEVER RUNS (already matched above)\n    print(\"C\")\nelif score >= 80:  # NEVER RUNS\n    print(\"B\")\nelif score >= 90:  # NEVER RUNS\n    print(\"A\")\n\n# If score = 95:\n# Output: D (WRONG! Should be A)\n# The 60+ check matched first and stopped\n\n```\n### elif vs Multiple if Statements:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>elif Chain</th><th>Multiple if</th></tr><tr><td>Mutually exclusive\n(only one runs)</td><td>Independent checks\n(multiple can run)</td></tr><tr><td>Stops at first match</td><td>Checks every condition</td></tr><tr><td>More efficient</td><td>Less efficient</td></tr><tr><td>Use for categories</td><td>Use for independent flags</td></tr></table>#### Example Comparison:\n```\n# elif chain (MUTUALLY EXCLUSIVE)\nscore = 95\n\nif score >= 90:\n    print(\"Excellent\")  # Runs\nelif score >= 80:\n    print(\"Good\")       # Skipped\nelif score >= 70:\n    print(\"Fair\")       # Skipped\n# Output: Excellent (ONE thing prints)\n\n# Multiple if (INDEPENDENT)\nif score >= 90:\n    print(\"Excellent\")  # Runs\nif score >= 80:\n    print(\"Good\")       # Also runs!\nif score >= 70:\n    print(\"Fair\")       # Also runs!\n# Output:\n# Excellent\n# Good\n# Fair\n# (All THREE print! Usually not what you want!)\n\n```\n### Common Mistakes:\n\n<li>**Using 'else if' instead of 'elif'**:```\n# WRONG:\nif score >= 90:\n    print(\"A\")\nelse if score >= 80:  # SyntaxError! Not valid Python\n    print(\"B\")\n\n# CORRECT:\nif score >= 90:\n    print(\"A\")\nelif score >= 80:  # Use 'elif', not 'else if'\n    print(\"B\")\n\n```\n</li><li>**Putting else before elif**:```\n# WRONG:\nif score >= 90:\n    print(\"A\")\nelse:\n    print(\"Not an A\")\nelif score >= 80:  # SyntaxError! elif can't come after else\n    print(\"B\")\n\n# CORRECT:\nif score >= 90:\n    print(\"A\")\nelif score >= 80:  # elif before else\n    print(\"B\")\nelse:              # else always last\n    print(\"Below B\")\n\n```\n</li><li>**Redundant conditions in elif**:```\n# REDUNDANT (but not wrong):\nif score >= 90:\n    print(\"A\")\nelif score >= 80 and score < 90:  # 'and score < 90' is redundant!\n    print(\"B\")\n# If we're in elif, we KNOW score < 90 (because if was False)\n\n# CLEANER:\nif score >= 90:\n    print(\"A\")\nelif score >= 80:  # Automatically means score < 90\n    print(\"B\")\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using 'else if' Instead of 'elif'**\n```python\n# WRONG - Python uses elif, not else if!\nif score >= 90:\n    print(\"A\")\nelse if score >= 80:  # SyntaxError!\n    print(\"B\")\n\n# CORRECT\nif score >= 90:\n    print(\"A\")\nelif score >= 80:  # elif is one word!\n    print(\"B\")\n```\n\n**2. Wrong Order - General Before Specific**\n```python\n# WRONG - More general condition catches everything!\nif score >= 60:\n    print(\"Passing\")  # 95 matches here first!\nelif score >= 90:\n    print(\"A\")  # Never reached!\n\n# CORRECT - Most specific first\nif score >= 90:\n    print(\"A\")\nelif score >= 60:\n    print(\"Passing\")\n```\n\n**3. Putting else Before elif**\n```python\n# WRONG - else must be last!\nif score >= 90:\n    print(\"A\")\nelse:\n    print(\"Not A\")\nelif score >= 80:  # SyntaxError: elif after else\n    print(\"B\")\n\n# CORRECT - Order: if -> elif -> else\nif score >= 90:\n    print(\"A\")\nelif score >= 80:\n    print(\"B\")\nelse:\n    print(\"Below B\")\n```\n\n**4. Missing else for Edge Cases**\n```python\n# RISKY - What if age is negative?\nif age < 13:\n    price = 8\nelif age < 65:\n    price = 15\nelif age >= 65:\n    price = 10\n# price undefined if age < 0!\n\n# SAFER - else catches unexpected values\nif age < 0:\n    print(\"Invalid age\")\nelif age < 13:\n    price = 8\n# ... etc\n```\n\n**5. Redundant Conditions in elif**\n```python\n# REDUNDANT - The < 90 is implied\nif score >= 90:\n    grade = \"A\"\nelif score >= 80 and score < 90:  # Unnecessary!\n    grade = \"B\"\n\n# CLEAN - elif already means \"if was False\"\nif score >= 90:\n    grade = \"A\"\nelif score >= 80:  # Automatically means < 90\n    grade = \"B\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **elif adds multiple paths**: Handle 3, 4, 5+ mutually exclusive conditions\n- **Syntax**: `if ... elif ... elif ... else` (elif between if and else)\n- **First match wins**: As soon as one condition is True, rest are skipped (efficient!)\n- **Order matters**: Put most specific conditions first, most general last\n- **else is optional**: But recommended to catch unexpected cases\n- **No redundant conditions needed**: Each elif automatically excludes previous ranges\n- **elif vs multiple if**:\n<li>elif: Mutually exclusive (categories, ranges, grades)\n- Multiple if: Independent checks (flags, multiple actions)\n\n</li>- **Common use cases**: Grading, pricing tiers, menus, categorization, range checking\n\n### elif Chain Pattern (Template):\n```\n# For ranges/categories (most common):\nif value < threshold1:        # Lowest range\n    action1\nelif value < threshold2:      # Middle range\n    action2\nelif value < threshold3:      # Higher range\n    action3\nelse:                          # Highest range\n    action4\n\n# For specific values (menus):\nif choice == option1:\n    action1\nelif choice == option2:\n    action2\nelif choice == option3:\n    action3\nelse:\n    error_action\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write elif chains with proper syntax\n- Order conditions from specific to general\n- Explain why first match wins\n- Choose between elif chain vs multiple if statements\n- Use else as a catch-all\n\n### Coming Up Next:\nIn **Lesson 6: Nested Conditionals**, you'll learn to put if statements **inside** other if statements:\n\n- Making complex multi-layered decisions\n- \"If this, then check if that\"\n- Access control (user type AND permissions)\n- Decision trees (age AND student status ‚Üí discount tier)\n\nNesting lets you combine multiple decision criteria into sophisticated logic!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-05-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **BMI Calculator** that calculates Body Mass Index and categorizes the result into health categories.\n\n**BMI Formula:**\n\n<pre>BMI = weight_kg / (height_m ** 2)</pre>**BMI Categories:**\n\n- **Underweight:** BMI < 18.5\n- **Normal weight:** 18.5 <= BMI < 25\n- **Overweight:** 25 <= BMI < 30\n- **Obese:** BMI >= 30\n\n**Your task:**\n\n- Ask user for weight (kg) and height (meters)\n- Calculate BMI using the formula\n- Use an elif chain to categorize the BMI\n- Display BMI and category with health recommendation\n\n**Example output:**\n\n<pre>=== BMI Calculator ===\n\nEnter your weight (kg): 70\nEnter your height (meters): 1.75\n\nYour BMI: 22.9\nCategory: Normal weight\nRecommendation: Maintain your current lifestyle!\n</pre>",
              "instructions": "Build a **BMI Calculator** that calculates Body Mass Index and categorizes the result into health categories.\n\n**BMI Formula:**\n\n<pre>BMI = weight_kg / (height_m ** 2)</pre>**BMI Categories:**\n\n- **Underweight:** BMI < 18.5\n- **Normal weight:** 18.5 <= BMI < 25\n- **Overweight:** 25 <= BMI < 30\n- **Obese:** BMI >= 30\n\n**Your task:**\n\n- Ask user for weight (kg) and height (meters)\n- Calculate BMI using the formula\n- Use an elif chain to categorize the BMI\n- Display BMI and category with health recommendation\n\n**Example output:**\n\n<pre>=== BMI Calculator ===\n\nEnter your weight (kg): 70\nEnter your height (meters): 1.75\n\nYour BMI: 22.9\nCategory: Normal weight\nRecommendation: Maintain your current lifestyle!\n</pre>",
              "starterCode": "# BMI Calculator with Category Classification\n# Calculate BMI and categorize into health ranges\n\nprint(\"=== BMI Calculator ===\")\nprint()\n\n# Get user input\nweight_kg = float(input(\"Enter your weight (kg): \"))\nheight_m = float(input(\"Enter your height (meters): \"))\n\nprint()\n\n# YOUR CODE HERE:\n# Calculate BMI\nbmi = \n\n# Categorize using elif chain\n# Order matters! Most specific to most general\n\nif :  # Underweight: BMI < 18.5\n    category = \"Underweight\"\n    recommendation = \"Consider consulting a healthcare provider.\"\nelif :  # Normal: BMI < 25 (automatically means >= 18.5)\n    category = \n    recommendation = \nelif :  # Overweight: BMI < 30\n    category = \n    recommendation = \nelse:  # Obese: BMI >= 30\n    category = \n    recommendation = \n\n# Display results\nprint(f\"Your BMI: {bmi:.1f}\")\nprint(f\"Category: {category}\")\nprint(f\"Recommendation: {recommendation}\")",
              "solution": "# BMI Calculator with Category Classification - SOLUTION\n# Calculate BMI and categorize into health ranges\n\nprint(\"=== BMI Calculator ===\")\nprint()\n\n# Get user input\nweight_kg = float(input(\"Enter your weight (kg): \"))\nheight_m = float(input(\"Enter your height (meters): \"))\n\nprint()\n\n# Calculate BMI\nbmi = weight_kg / (height_m ** 2)\n\n# Categorize using elif chain\nif bmi < 18.5:\n    category = \"Underweight\"\n    recommendation = \"Consider consulting a healthcare provider.\"\nelif bmi < 25:\n    category = \"Normal weight\"\n    recommendation = \"Maintain your current lifestyle!\"\nelif bmi < 30:\n    category = \"Overweight\"\n    recommendation = \"Consider a balanced diet and exercise.\"\nelse:\n    category = \"Obese\"\n    recommendation = \"Please consult a healthcare provider for guidance.\"\n\n# Display results\nprint(f\"Your BMI: {bmi:.1f}\")\nprint(f\"Category: {category}\")\nprint(f\"Recommendation: {recommendation}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "BMI formula is weight / (height ** 2). For the elif chain, check from smallest to largest: bmi < 18.5, then bmi < 25, then bmi < 30, then else for everything above. Remember: if you're in the second elif, you already know BMI >= 18.5 (because the first check failed), so you only need to check bmi < 25."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-06",
          "title": "Nested Conditionals: Decisions Within Decisions",
          "moduleId": "module-03",
          "order": 6,
          "estimatedMinutes": 25,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're applying for a special membership program at a gym. The bouncer at the door makes decisions in layers:\n\n<ol style='background-color: #f0f0f0; padding: 15px; margin: 10px 0;'><li style='margin: 8px 0;'>**First check:** \"Are you 18 or older?\"<ul style='margin-left: 20px;'>- If NO ‚Üí \"Sorry, adults only\" (stop here)\n- If YES ‚Üí (proceed to next check)\n\n</li><li style='margin: 8px 0;'>**Second check (only if first passed):** \"Do you have a membership card?\"<ul style='margin-left: 20px;'>- If YES ‚Üí \"Welcome! Enter\"\n- If NO ‚Üí \"Please sign up at the desk\"\n\n</li>\nNotice how the second check **only happens IF** the first check passed. This is **nested decision-making** - decisions within decisions!\n\n### In Code:\n```\nif age >= 18:              # First decision (outer)\n    if has_membership:     # Second decision (inner, only checked if outer True)\n        print(\"Welcome!\") \n    else:\n        print(\"Please sign up\")\nelse:\n    print(\"Adults only\")  # First check failed, never reached inner check\n\n```\n### Real-World Nested Decision Examples:\n\n- **Online shopping discounts**:\nIF in cart >= $50:\n&nbsp;&nbsp;&nbsp;&nbsp;IF is_member:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apply 20% discount\n&nbsp;&nbsp;&nbsp;&nbsp;ELSE:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apply 10% discount\n- **Access control system**:\nIF is_logged_in:\n&nbsp;&nbsp;&nbsp;&nbsp;IF is_admin:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show admin dashboard\n&nbsp;&nbsp;&nbsp;&nbsp;ELIF is_moderator:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show moderator panel\n&nbsp;&nbsp;&nbsp;&nbsp;ELSE:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Show user dashboard\nELSE:\n&nbsp;&nbsp;&nbsp;&nbsp;Show login page\n- **Ride safety check**:\nIF tall_enough:\n&nbsp;&nbsp;&nbsp;&nbsp;IF has_ticket:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IF not_pregnant:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Allow on ride\n\nEach layer adds another condition that must be checked only if previous conditions passed."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n‚úì User is logged in\n  ‚Üí Granting admin access\n  ‚Üí Showing admin dashboard\n\nCart Total: $75\n‚úì Qualifies for discount (cart >= $50)\n  ‚Üí Member: 20% discount\n  ‚Üí Final total: $60.00\n\n=== Roller Coaster Safety Check ===\n‚úì Height requirement met (>= 48\")\n  ‚úì Ticket verified\n    ‚úì Safety cleared\n    ‚Üí APPROVED: You may ride!\n\nAge: 16, Student: True\nCategory: Student, Price: $10\n\n=== Activity Planner ===\n‚úì Temperature is comfortable\n  ‚úì Weather is dry\n    ‚Üí Recommendation: Walk during lunch break\n```",
              "code": "# Nested Conditionals: Decisions Within Decisions\n\n# Example 1: Basic Nesting - User Access Control\nis_logged_in = True\nis_admin = True\n\nif is_logged_in:\n    print(\"‚úì User is logged in\")\n    \n    # This inner check only runs if logged in\n    if is_admin:\n        print(\"  ‚Üí Granting admin access\")\n        print(\"  ‚Üí Showing admin dashboard\")\n    else:\n        print(\"  ‚Üí Regular user access\")\n        print(\"  ‚Üí Showing user dashboard\")\nelse:\n    print(\"‚ùå Not logged in\")\n    print(\"‚Üí Redirecting to login page\")\n\nprint()\n\n# Example 2: Discount Calculator (Layered Eligibility)\ncart_total = 75\nis_member = True\n\nprint(f\"Cart Total: ${cart_total}\")\n\nif cart_total >= 50:  # First condition: minimum purchase\n    print(\"‚úì Qualifies for discount (cart >= $50)\")\n    \n    if is_member:  # Second condition: checked only if first is True\n        discount = 0.20  # 20% member discount\n        print(\"  ‚Üí Member: 20% discount\")\n    else:\n        discount = 0.10  # 10% non-member discount\n        print(\"  ‚Üí Non-member: 10% discount\")\n    \n    final_total = cart_total * (1 - discount)\n    print(f\"  ‚Üí Final total: ${final_total:.2f}\")\nelse:\n    print(\"‚ùå No discount (cart < $50)\")\n    print(f\"‚Üí Final total: ${cart_total}\")\n\nprint()\n\n# Example 3: Three-Level Nesting - Ride Safety Check\nheight = 52  # inches\nhas_ticket = True\nis_pregnant = False\n\nprint(\"=== Roller Coaster Safety Check ===\")\n\nif height >= 48:\n    print(\"‚úì Height requirement met (>= 48\\\")\")\n    \n    if has_ticket:\n        print(\"  ‚úì Ticket verified\")\n        \n        if not is_pregnant:\n            print(\"    ‚úì Safety cleared\")\n            print(\"    ‚Üí APPROVED: You may ride!\")\n        else:\n            print(\"    ‚ùå Safety concern: pregnancy\")\n            print(\"    ‚Üí DENIED: For your safety\")\n    else:\n        print(\"  ‚ùå No ticket found\")\n        print(\"  ‚Üí Please purchase a ticket\")\nelse:\n    print(\"‚ùå Height requirement not met\")\n    print(f\"‚Üí You are {height}\\\", need 48\\\" minimum\")\n\nprint()\n\n# Example 4: Age & Student Status (Nested elif)\nage = 16\nis_student = True\n\nif age < 13:\n    price = 8\n    category = \"Child\"\nelse:\n    # Nested decision for 13+ age group\n    if is_student:\n        price = 10\n        category = \"Student\"\n    else:\n        if age < 65:\n            price = 15\n            category = \"Adult\"\n        else:\n            price = 12\n            category = \"Senior\"\n\nprint(f\"Age: {age}, Student: {is_student}\")\nprint(f\"Category: {category}, Price: ${price}\")\n\nprint()\n\n# Example 5: Weather Activity Planner\ntemperature = 75\nis_raining = False\nis_weekend = True\n\nprint(\"=== Activity Planner ===\")\n\nif temperature > 60:\n    print(\"‚úì Temperature is comfortable\")\n    \n    if not is_raining:\n        print(\"  ‚úì Weather is dry\")\n        \n        if is_weekend:\n            print(\"    ‚úì It's the weekend!\")\n            print(\"    ‚Üí Recommendation: Go to the park!\")\n        else:\n            print(\"    ‚Üí Recommendation: Walk during lunch break\")\n    else:\n        print(\"  ‚ùå It's raining\")\n        print(\"  ‚Üí Recommendation: Indoor activities\")\nelse:\n    print(\"‚ùå Too cold outside\")\n    print(\"‚Üí Recommendation: Stay indoors\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Nested Conditional Anatomy:\n```\nif outer_condition:           # Level 0 indentation\n    outer_statements          # Level 1 (4 spaces)\n    \n    if inner_condition:       # Level 1 (4 spaces)\n        inner_statements      # Level 2 (8 spaces)\n    else:\n        inner_else_statements # Level 2 (8 spaces)\nelse:\n    outer_else_statements     # Level 1 (4 spaces)\n\n```\n#### Indentation Levels:\n\n- **Level 0**: Main if (no indentation)\n- **Level 1**: Code inside main if (4 spaces)\n- **Level 2**: Code inside nested if (8 spaces)\n- **Level 3**: Code inside triple-nested if (12 spaces)\n\n#### Execution Flow Example:\n```\nage = 20\nhas_id = True\n\nif age >= 18:              # Check outer condition\n    print(\"Adult\")         # Outer True: execute this\n    \n    if has_id:             # Now check inner condition\n        print(\"ID verified\")  # Inner True: execute this\n    else:\n        print(\"Need ID\")   # (Skipped - inner was True)\nelse:\n    print(\"Minor\")         # (Skipped - outer was True)\n\n# Output:\n# Adult\n# ID verified\n\n```\n### When to Use Nesting vs Logical Operators:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Use Nested if</th><th>Use Logical Operators (and/or)</th></tr><tr><td>When inner check only makes sense if outer is True</td><td>When both conditions are equal partners</td></tr><tr><td>When you need different actions at each level</td><td>When checking multiple requirements for one outcome</td></tr><tr><td>More readable for complex multi-level logic</td><td>Simpler and more concise for 2 conditions</td></tr></table>#### Example Comparison:\n```\n# Scenario 1: Use AND (both conditions equal)\n# \"Can only drive if 16+ AND have license\"\nif age >= 16 and has_license:\n    print(\"Can drive\")  # Simple, clear!\n\n# Same with nesting (unnecessarily complex here):\nif age >= 16:\n    if has_license:\n        print(\"Can drive\")\n# Nesting adds no value here\n\n# Scenario 2: Use NESTING (different actions at each level)\n# Different responses for logged in vs not, admin vs regular\nif is_logged_in:\n    if is_admin:\n        show_admin_panel()  # Action 1\n    else:\n        show_user_panel()   # Action 2\nelse:\n    show_login_page()       # Action 3\n# Nesting is clearer here - 3 distinct outcomes\n\n# Same with AND (awkward):\nif is_logged_in and is_admin:\n    show_admin_panel()\nelif is_logged_in and not is_admin:\n    show_user_panel()\nelse:\n    show_login_page()\n# Redundant checks, less clear\n\n```\n### Common Nesting Patterns:\n#### 1. Layered Validation\n```\nif input_is_provided:\n    if input_is_valid_format:\n        if input_is_safe:\n            process_input()\n\n```\n#### 2. Permission Checking\n```\nif is_logged_in:\n    if is_admin or is_owner:\n        allow_edit()\n    else:\n        deny_access()\n\n```\n#### 3. Tiered Eligibility\n```\nif age >= 18:\n    if income >= 30000:\n        if credit_score >= 650:\n            approve_loan()\n\n```\n### Avoiding Deep Nesting (Readability):\n**Problem:** Too many levels become hard to read:\n\n```\n# TOO DEEP (hard to follow):\nif condition1:\n    if condition2:\n        if condition3:\n            if condition4:\n                if condition5:\n                    do_something()  # 5 levels deep!\n\n```\n**Solution 1:** Use logical operators:\n\n```\n# BETTER:\nif condition1 and condition2 and condition3 and condition4 and condition5:\n    do_something()  # Flat, easier to read\n\n```\n**Solution 2:** Early returns (preview of functions):\n\n```\n# BETTER (for functions - you'll learn in Module 6):\nif not condition1:\n    return\nif not condition2:\n    return\ndo_something()  # Flatter logic\n\n```\n**Best Practice:** Keep nesting to 2-3 levels maximum for readability.\n\n### Common Mistakes:\n\n<li>**Wrong indentation levels**:```\n# WRONG:\nif outer:\n  if inner:  # Only 2 spaces! Should be 4\n      action\n\n# CORRECT:\nif outer:\n    if inner:  # 4 spaces for outer, 4 more for inner\n        action  # 8 spaces total\n\n```\n</li><li>**Forgetting the outer logic path**:```\n# PROBLEM: What if not logged in?\nif is_logged_in:\n    if is_admin:\n        show_admin()\n    else:\n        show_user()\n# Missing else for outer if! What if not logged in?\n\n# BETTER:\nif is_logged_in:\n    if is_admin:\n        show_admin()\n    else:\n        show_user()\nelse:\n    show_login()  # Handle all cases!\n\n```\n</li><li>**Nesting when AND would work**:```\n# UNNECESSARILY NESTED:\nif age >= 18:\n    if has_license:\n        allow_drive()\n\n# SIMPLER:\nif age >= 18 and has_license:\n    allow_drive()\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Wrong Indentation Levels**\n```python\n# WRONG - Inconsistent indentation\nif is_logged_in:\n    if is_admin:\n      print(\"Admin\")  # Only 2 spaces - should be 8!\n\n# CORRECT - Each level adds 4 spaces\nif is_logged_in:\n    if is_admin:\n        print(\"Admin\")  # 8 spaces (4 + 4)\n```\n\n**2. Forgetting to Handle All Paths**\n```python\n# WRONG - What happens if not logged in?\nif is_logged_in:\n    if is_admin:\n        show_admin_panel()\n    else:\n        show_user_panel()\n# No else for outer if - user sees nothing!\n\n# CORRECT - Handle all cases\nif is_logged_in:\n    if is_admin:\n        show_admin_panel()\n    else:\n        show_user_panel()\nelse:\n    show_login_page()  # Handle the outer False case\n```\n\n**3. Unnecessary Nesting (Use AND Instead)**\n```python\n# OVERLY COMPLEX\nif age >= 18:\n    if has_license:\n        if not is_suspended:\n            allow_drive()\n\n# SIMPLER - Use AND for single outcome\nif age >= 18 and has_license and not is_suspended:\n    allow_drive()\n```\n\n**4. Too Many Nesting Levels (Hard to Read)**\n```python\n# TOO DEEP - Hard to follow!\nif a:\n    if b:\n        if c:\n            if d:\n                if e:\n                    do_something()  # 5 levels deep!\n\n# BETTER - Refactor with early returns or AND\nif not a or not b or not c:\n    return  # Exit early\nif d and e:\n    do_something()\n```\n\n**5. Confusing Else Matching**\n```python\n# CONFUSING - Which if does this else match?\nif condition1:\n    if condition2:\n        action1()\nelse:  # Matches inner if or outer if?\n    action2()\n\n# Python matches else with the nearest if\n# The else above matches condition2, not condition1!\n# Add comments or restructure to clarify intent\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Nested conditionals** = if statements inside other if statements\n- **Indentation is critical**: Each level adds 4 spaces (4, 8, 12...)\n- **Inner checks only run if outer checks pass** - layered decision making\n- **Use nesting when**:\n<li>Inner decision only makes sense if outer is True\n- Different actions needed at each level\n- Complex multi-layered logic\n\n</li>- **Use AND/OR instead when**:\n<li>Conditions are equal partners\n- Simpler to express as one compound condition\n- No different actions at intermediate levels\n\n</li>- **Readability matters**: Keep nesting to 2-3 levels max\n- **Common patterns**: Access control, layered validation, tiered eligibility, permission systems\n\n### Nesting vs Logical Operators Decision Guide:\n```\n‚úÖ Use NESTING when:\n‚Ä¢ Different actions at each level\n‚Ä¢ Inner check only relevant if outer passes\n‚Ä¢ Complex multi-tier logic (3+ outcomes)\n\n‚úÖ Use AND/OR when:\n‚Ä¢ All conditions are requirements for ONE outcome\n‚Ä¢ Simpler and flatter\n‚Ä¢ Two equal conditions\n\nExample:\n# AND is better here (both requirements for one outcome):\nif age >= 16 and has_license:\n    allow_drive()\n\n# Nesting is better here (different actions at levels):\nif is_logged_in:\n    if is_admin:\n        admin_panel()  # Action 1\n    else:\n        user_panel()   # Action 2\nelse:\n    login_page()       # Action 3\n\n```\n### Module 3 Complete! üéâ\nYou've mastered ALL fundamental decision-making in Python:\n\n- **Boolean values** (True/False)\n- **Comparison operators** (==, !=, <, >, <=, >=)\n- **Logical operators** (and, or, not)\n- **if statements** (conditional execution)\n- **if-else statements** (two paths)\n- **elif chains** (multiple mutually exclusive paths)\n- **Nested conditionals** (layered decisions)\n\nThese are the building blocks of EVERY decision a program makes. You can now write programs that adapt, respond, and make intelligent choices!\n\n### What's Next: Module 4 - Loops\nYou've learned to make programs decide. Now you'll learn to make them **repeat**:\n\n- **while loops**: Repeat while a condition is True\n- **for loops**: Repeat for each item in a sequence\n- **Loop control**: break, continue, else\n- **Nested loops**: Loops inside loops\n\nLoops + conditionals = the power to build almost anything!\n\n**Before Module 4:** Take the Module 3 Quiz to test your understanding of all decision-making concepts."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-06-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Movie Ticket Pricing System** with age-based pricing and weekday/weekend rates, plus student discounts.\n\n**Pricing Rules:**\n\n- **Children (under 13):**\n<li>Weekday: $8\n- Weekend: $10\n\n</li>- **Adults (13-64):**\n<li>Students: $12 (any day)\n- Non-students weekday: $15\n- Non-students weekend: $18\n\n</li>- **Seniors (65+):**\n<li>Weekday: $10\n- Weekend: $12\n\n</li>\n**Your task:**\n\n- Ask for age, whether it's a weekend, and student status\n- Use nested conditionals to determine the correct price\n- Display the pricing breakdown\n\n**Example output:**\n\n<pre>=== Movie Ticket Pricing ===\n\nEnter your age: 19\nIs it the weekend? (yes/no): no\nAre you a student? (yes/no): yes\n\nAge Category: Adult\nDay Type: Weekday\nStudent Discount: Yes\nTicket Price: $12.00\n</pre>",
              "instructions": "Build a **Movie Ticket Pricing System** with age-based pricing and weekday/weekend rates, plus student discounts.\n\n**Pricing Rules:**\n\n- **Children (under 13):**\n<li>Weekday: $8\n- Weekend: $10\n\n</li>- **Adults (13-64):**\n<li>Students: $12 (any day)\n- Non-students weekday: $15\n- Non-students weekend: $18\n\n</li>- **Seniors (65+):**\n<li>Weekday: $10\n- Weekend: $12\n\n</li>\n**Your task:**\n\n- Ask for age, whether it's a weekend, and student status\n- Use nested conditionals to determine the correct price\n- Display the pricing breakdown\n\n**Example output:**\n\n<pre>=== Movie Ticket Pricing ===\n\nEnter your age: 19\nIs it the weekend? (yes/no): no\nAre you a student? (yes/no): yes\n\nAge Category: Adult\nDay Type: Weekday\nStudent Discount: Yes\nTicket Price: $12.00\n</pre>",
              "starterCode": "# Movie Ticket Pricing System\n# Nested conditionals for complex pricing logic\n\nprint(\"=== Movie Ticket Pricing ===\")\nprint()\n\n# Get user input\nage = int(input(\"Enter your age: \"))\nis_weekend_input = input(\"Is it the weekend? (yes/no): \")\nis_student_input = input(\"Are you a student? (yes/no): \")\n\n# Convert to boolean\nis_weekend = is_weekend_input.lower() == \"yes\"\nis_student = is_student_input.lower() == \"yes\"\n\nprint()\n\n# YOUR CODE HERE:\n# Use nested conditionals to determine price\n\nif :  # Child (under 13)\n    category = \"Child\"\n    \n    if is_weekend:\n        price = \n        day_type = \"Weekend\"\n    else:\n        price = \n        day_type = \"Weekday\"\n        \nelif :  # Adult (13-64)\n    category = \"Adult\"\n    \n    if is_student:\n        price =   # Student price (same any day)\n        day_type = \"Weekday\" if not is_weekend else \"Weekend\"\n    else:\n        if is_weekend:\n            price = \n            day_type = \"Weekend\"\n        else:\n            price = \n            day_type = \"Weekday\"\n            \nelse:  # Senior (65+)\n    category = \n    \n    if :\n        price = \n        day_type = \n    else:\n        price = \n        day_type = \n\n# Display results\nprint(f\"Age Category: {category}\")\nprint(f\"Day Type: {day_type}\")\nif category == \"Adult\" and is_student:\n    print(\"Student Discount: Yes\")\nprint(f\"Ticket Price: ${price:.2f}\")",
              "solution": "# Movie Ticket Pricing System - SOLUTION\n# Nested conditionals for complex pricing logic\n\nprint(\"=== Movie Ticket Pricing ===\")\nprint()\n\n# Get user input\nage = int(input(\"Enter your age: \"))\nis_weekend_input = input(\"Is it the weekend? (yes/no): \")\nis_student_input = input(\"Are you a student? (yes/no): \")\n\n# Convert to boolean\nis_weekend = is_weekend_input.lower() == \"yes\"\nis_student = is_student_input.lower() == \"yes\"\n\nprint()\n\n# Determine price using nested conditionals\nif age < 13:  # Child\n    category = \"Child\"\n    \n    if is_weekend:\n        price = 10\n        day_type = \"Weekend\"\n    else:\n        price = 8\n        day_type = \"Weekday\"\n        \nelif age < 65:  # Adult\n    category = \"Adult\"\n    \n    if is_student:\n        price = 12  # Student price (same any day)\n        day_type = \"Weekday\" if not is_weekend else \"Weekend\"\n    else:\n        if is_weekend:\n            price = 18\n            day_type = \"Weekend\"\n        else:\n            price = 15\n            day_type = \"Weekday\"\n            \nelse:  # Senior\n    category = \"Senior\"\n    \n    if is_weekend:\n        price = 12\n        day_type = \"Weekend\"\n    else:\n        price = 10\n        day_type = \"Weekday\"\n\n# Display results\nprint(f\"Age Category: {category}\")\nprint(f\"Day Type: {day_type}\")\nif category == \"Adult\" and is_student:\n    print(\"Student Discount: Yes\")\nprint(f\"Ticket Price: ${price:.2f}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start with age ranges: if age < 13 (child), elif age < 65 (adult), else (senior). For each age group, nest another if-else to check weekend vs weekday. For adults, add an extra layer to check if student (gets flat $12 any day) vs non-student (varies by day)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-03-lesson-07",
          "title": "Pattern Matching with match/case (Python 3.10+)",
          "moduleId": "module-03",
          "order": 7,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you work at a restaurant and need to respond to customer orders:\n\n- Customer says **\"coffee\"** -> Make coffee\n- Customer says **\"tea\"** -> Make tea\n- Customer says **\"water\"** -> Pour water\n- Customer says **anything else** -> \"Sorry, we don't have that\"\n\nWith `if/elif/else`, you'd write:\n```python\nif order == \"coffee\":\n    make_coffee()\nelif order == \"tea\":\n    make_tea()\nelif order == \"water\":\n    pour_water()\nelse:\n    print(\"Sorry, we don't have that\")\n```\n\nPython 3.10 introduced `match/case` - a more powerful and readable way to handle this:\n```python\nmatch order:\n    case \"coffee\":\n        make_coffee()\n    case \"tea\":\n        make_tea()\n    case \"water\":\n        pour_water()\n    case _:\n        print(\"Sorry, we don't have that\")\n```\n\n### Why match/case is Special:\n\n**1. Cleaner syntax** - No repeated `==` comparisons\n**2. Pattern matching** - Match complex structures, not just values\n**3. Destructuring** - Extract parts of data in one step\n**4. Guards** - Add conditions with `if` inside cases\n**5. Combines matches** - Use `|` to match multiple patterns\n\n### match/case vs if/elif:\n\n| Feature | if/elif | match/case |\n|---------|---------|------------|\n| Simple value comparison | Good | Great |\n| Complex conditions | Great | Limited |\n| Destructuring data | Manual | Built-in |\n| Readability for many cases | Gets messy | Stays clean |\n| Python version | Any | 3.10+ only |\n\n**When to use match/case:**\n- Many possible values to match\n- Working with structured data (tuples, lists, dicts)\n- Want to extract values while matching\n- Python 3.10 or newer is guaranteed"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: match/case Patterns",
              "content": "**Expected Output:**\n```\n=== Basic Pattern Matching ===\nCommand: start\nStarting the application...\n\nCommand: quit\nGoodbye!\n\nCommand: dance\nUnknown command: dance\n\n=== Matching with | (OR patterns) ===\nUser said 'y' -> Proceeding...\nUser said 'no' -> Cancelled.\n\n=== Destructuring Tuples ===\nPoint (3, 4) is at origin? False\nMoving to (3, 4)\n\nPoint (0, 0) is at origin? True\nAt the origin!\n\nPoint (0, 5) is on axis? y-axis at 5\n\n=== Guards (if conditions) ===\nTemperature: 75 -> Nice weather!\nTemperature: 95 -> Too hot!\nTemperature: 30 -> Freezing!\n\n=== Matching Sequences ===\n[1] -> Single element: 1\n[1, 2] -> Two elements: 1 and 2\n[1, 2, 3, 4, 5] -> First: 1, Rest: [2, 3, 4, 5]\n\n=== Matching Dictionaries ===\n{'type': 'error', 'code': 404} -> Error 404!\n{'type': 'success', 'data': 'hello'} -> Success: hello\n{'type': 'warning'} -> Warning (no details)\n```",
              "code": "# Pattern Matching with match/case (Python 3.10+)\n\nprint(\"=== Basic Pattern Matching ===\")\n\ndef handle_command(command):\n    match command:\n        case \"start\":\n            return \"Starting the application...\"\n        case \"stop\":\n            return \"Stopping the application...\"\n        case \"restart\":\n            return \"Restarting...\"\n        case \"quit\" | \"exit\":  # Match multiple values with |\n            return \"Goodbye!\"\n        case _:  # Wildcard: matches anything else\n            return f\"Unknown command: {command}\"\n\nfor cmd in [\"start\", \"quit\", \"dance\"]:\n    print(f\"Command: {cmd}\")\n    print(handle_command(cmd))\n    print()\n\nprint(\"=== Matching with | (OR patterns) ===\")\n\ndef get_confirmation(response):\n    match response.lower():\n        case \"y\" | \"yes\" | \"yeah\" | \"yep\":\n            return \"Proceeding...\"\n        case \"n\" | \"no\" | \"nope\":\n            return \"Cancelled.\"\n        case _:\n            return \"Please answer yes or no.\"\n\nprint(f\"User said 'y' -> {get_confirmation('y')}\")\nprint(f\"User said 'no' -> {get_confirmation('no')}\")\nprint()\n\nprint(\"=== Destructuring Tuples ===\")\n\ndef describe_point(point):\n    match point:\n        case (0, 0):\n            return \"At the origin!\"\n        case (0, y):  # x is 0, capture y\n            return f\"On the y-axis at {y}\"\n        case (x, 0):  # y is 0, capture x\n            return f\"On the x-axis at {x}\"\n        case (x, y):  # Capture both values\n            return f\"Moving to ({x}, {y})\"\n        case _:\n            return \"Not a valid point\"\n\npoints = [(3, 4), (0, 0), (0, 5)]\nfor p in points:\n    print(f\"Point {p} is at origin? {p == (0, 0)}\")\n    print(describe_point(p))\n    print()\n\nprint(\"=== Guards (if conditions) ===\")\n\ndef describe_temperature(temp):\n    match temp:\n        case t if t < 32:\n            return \"Freezing!\"\n        case t if t < 50:\n            return \"Cold\"\n        case t if t < 70:\n            return \"Cool\"\n        case t if t < 85:\n            return \"Nice weather!\"\n        case _:\n            return \"Too hot!\"\n\nfor temp in [75, 95, 30]:\n    print(f\"Temperature: {temp} -> {describe_temperature(temp)}\")\nprint()\n\nprint(\"=== Matching Sequences ===\")\n\ndef describe_list(items):\n    match items:\n        case []:\n            return \"Empty list\"\n        case [single]:\n            return f\"Single element: {single}\"\n        case [first, second]:\n            return f\"Two elements: {first} and {second}\"\n        case [first, *rest]:  # * captures remaining items\n            return f\"First: {first}, Rest: {rest}\"\n\ntest_lists = [[1], [1, 2], [1, 2, 3, 4, 5]]\nfor lst in test_lists:\n    print(f\"{lst} -> {describe_list(lst)}\")\nprint()\n\nprint(\"=== Matching Dictionaries ===\")\n\ndef handle_response(response):\n    match response:\n        case {\"type\": \"error\", \"code\": code}:\n            return f\"Error {code}!\"\n        case {\"type\": \"success\", \"data\": data}:\n            return f\"Success: {data}\"\n        case {\"type\": \"warning\"}:\n            return \"Warning (no details)\"\n        case _:\n            return \"Unknown response format\"\n\nresponses = [\n    {\"type\": \"error\", \"code\": 404},\n    {\"type\": \"success\", \"data\": \"hello\"},\n    {\"type\": \"warning\"}\n]\n\nfor resp in responses:\n    print(f\"{resp} -> {handle_response(resp)}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Basic match/case Syntax:\n\n```python\nmatch subject:\n    case pattern1:\n        # Code for pattern1\n    case pattern2:\n        # Code for pattern2\n    case _:\n        # Default case (matches anything)\n```\n\n### Pattern Types:\n\n**1. Literal Patterns - Match exact values:**\n```python\nmatch status:\n    case 200:\n        print(\"OK\")\n    case 404:\n        print(\"Not Found\")\n    case 500:\n        print(\"Server Error\")\n```\n\n**2. OR Patterns - Match multiple values:**\n```python\nmatch day:\n    case \"Saturday\" | \"Sunday\":\n        print(\"Weekend!\")\n    case \"Monday\" | \"Tuesday\" | \"Wednesday\" | \"Thursday\" | \"Friday\":\n        print(\"Weekday\")\n```\n\n**3. Wildcard Pattern - Match anything:**\n```python\nmatch value:\n    case \"specific\":\n        print(\"Matched specific\")\n    case _:  # Underscore matches ANYTHING\n        print(\"Matched something else\")\n```\n\n**4. Capture Patterns - Match and capture:**\n```python\nmatch point:\n    case (x, y):  # Captures x and y variables\n        print(f\"Point at {x}, {y}\")\n```\n\n**5. Guard Patterns - Add conditions:**\n```python\nmatch number:\n    case n if n < 0:\n        print(\"Negative\")\n    case n if n == 0:\n        print(\"Zero\")\n    case n if n > 0:\n        print(\"Positive\")\n```\n\n**6. Sequence Patterns - Match lists/tuples:**\n```python\nmatch data:\n    case []:  # Empty\n        print(\"Empty\")\n    case [x]:  # Single element\n        print(f\"One item: {x}\")\n    case [x, y]:  # Exactly two\n        print(f\"Two items: {x}, {y}\")\n    case [first, *rest]:  # First + remaining\n        print(f\"First: {first}, others: {rest}\")\n```\n\n**7. Dictionary Patterns - Match dicts:**\n```python\nmatch event:\n    case {\"type\": \"click\", \"x\": x, \"y\": y}:\n        print(f\"Click at ({x}, {y})\")\n    case {\"type\": \"keypress\", \"key\": key}:\n        print(f\"Key pressed: {key}\")\n```\n\n### Key Rules:\n\n1. **Patterns are checked in order** - First match wins\n2. **`case _:` should be last** - It catches everything\n3. **Guards use `if`** - `case x if x > 0:` adds conditions\n4. **Variables in patterns capture values** - `case (x, y):` creates x and y\n5. **`|` means OR** - `case \"a\" | \"b\":` matches either\n\n### Common Mistakes:\n\n```python\n# WRONG: Using = instead of match/case syntax\nmatch value:\n    case x = 5:  # ERROR! No = in patterns\n        ...\n\n# CORRECT:\nmatch value:\n    case 5:  # Literal match\n        ...\n    case x if x == 5:  # Guard condition\n        ...\n```\n\n```python\n# WRONG: Forgetting _ catches all\nmatch status:\n    case _:  # This catches EVERYTHING!\n        print(\"Matched\")\n    case 200:  # Never reached!\n        print(\"OK\")\n\n# CORRECT: Put _ last\nmatch status:\n    case 200:\n        print(\"OK\")\n    case _:  # Catches everything else\n        print(\"Unknown\")\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Wildcard First (Catches Everything!)**\n```python\n# WRONG - case _ catches ALL values!\nmatch status:\n    case _:  # Matches everything - others never reached!\n        print(\"Unknown\")\n    case 200:  # Never executed!\n        print(\"OK\")\n\n# CORRECT - Put wildcard last\nmatch status:\n    case 200:\n        print(\"OK\")\n    case _:  # Catches remaining values\n        print(\"Unknown\")\n```\n\n**2. Python Version Compatibility**\n```python\n# match/case requires Python 3.10+!\n# This will fail on Python 3.9 and earlier\n\n# Check your version first:\nimport sys\nprint(sys.version)  # Must be 3.10 or higher\n\n# For older Python, use if/elif:\nif status == 200:\n    print(\"OK\")\nelif status == 404:\n    print(\"Not Found\")\n```\n\n**3. Confusing Capture vs Literal**\n```python\n# WRONG - x is a capture variable, not literal!\nmatch value:\n    case x:  # Captures ANY value into x\n        print(f\"Got {x}\")\n    case 5:  # Never reached - x matched everything!\n        print(\"Five\")\n\n# CORRECT - Use literal or guard\nmatch value:\n    case 5:\n        print(\"Five\")\n    case x:  # Now only captures non-5 values\n        print(f\"Got {x}\")\n```\n\n**4. OR Pattern Syntax**\n```python\n# WRONG - Can't use 'or' keyword!\nmatch day:\n    case \"Sat\" or \"Sun\":  # SyntaxError!\n        print(\"Weekend\")\n\n# CORRECT - Use | for OR patterns\nmatch day:\n    case \"Sat\" | \"Sun\":  # Correct!\n        print(\"Weekend\")\n```\n\n**5. Guards Must Use Captured Variables**\n```python\n# WRONG - Can't use external variables directly in guard\nthreshold = 50\nmatch score:\n    case if score > threshold:  # SyntaxError!\n        print(\"High\")\n\n# CORRECT - Capture first, then guard\nmatch score:\n    case n if n > threshold:  # Capture as n, then use in guard\n        print(\"High\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **match/case requires Python 3.10+** - Check your version with `python --version`\n- **Basic syntax:** `match subject:` followed by `case pattern:` blocks\n- **Wildcard `_`** matches anything - use as default case (put it last!)\n- **OR patterns with `|`** - `case \"yes\" | \"y\":` matches multiple values\n- **Capture variables** - `case (x, y):` extracts values into x and y\n- **Guards with `if`** - `case n if n > 0:` adds conditions to patterns\n- **Sequence patterns** - Match lists/tuples with `[first, *rest]` syntax\n- **Dictionary patterns** - Match and extract from dicts `{\"key\": value}`\n- **Order matters** - First matching case wins, put specific cases before general ones\n\n### When to Use match/case:\n\n- Handling multiple command strings (start, stop, restart)\n- Processing API responses with different types\n- Parsing structured data (JSON, tuples)\n- State machines with many states\n- Menu systems with many options\n\n### When to Use if/elif:\n\n- Complex boolean conditions\n- Conditions that aren't pattern-based\n- Need to support Python < 3.10\n- Only 2-3 simple conditions\n\n### Real-World Use Cases:\n\n1. **Command handlers:** `match command:` with cases for each command\n2. **HTTP status codes:** `match response.status:` for different statuses\n3. **Event processing:** `match event:` with cases for click, keypress, etc.\n4. **Data validation:** Match expected structures, capture values\n5. **Game logic:** Match player actions, game states"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-03-lesson-07-challenge-1",
              "title": "Practice: Build a Command Parser",
              "description": "Build a command parser using match/case that handles:\n\n1. **Movement commands:** \"north\", \"south\", \"east\", \"west\" -> \"Moving [direction]\"\n2. **Action commands:** \"look\", \"inventory\", \"help\" -> Appropriate responses\n3. **Quit commands:** \"quit\" or \"exit\" -> \"Goodbye!\"\n4. **Complex commands:** \"go north\", \"take sword\" -> Parse and handle\n5. **Unknown commands:** -> \"I don't understand that command\"\n\n**Use guards for bonus:** If moving north when at row 0, say \"You can't go that way!\"",
              "instructions": "Build a command parser using match/case that handles:\n\n1. **Movement commands:** \"north\", \"south\", \"east\", \"west\" -> \"Moving [direction]\"\n2. **Action commands:** \"look\", \"inventory\", \"help\" -> Appropriate responses\n3. **Quit commands:** \"quit\" or \"exit\" -> \"Goodbye!\"\n4. **Complex commands:** \"go north\", \"take sword\" -> Parse and handle\n5. **Unknown commands:** -> \"I don't understand that command\"\n\n**Use guards for bonus:** If moving north when at row 0, say \"You can't go that way!\"",
              "starterCode": "# Command Parser using match/case (Python 3.10+)\n\ndef parse_command(command, player_position=(5, 5)):\n    \"\"\"Parse a text adventure game command.\n    \n    Args:\n        command: The user's input string\n        player_position: Tuple of (row, col) for the player\n    \n    Returns:\n        String response to the command\n    \"\"\"\n    row, col = player_position\n    \n    # Split command into words for complex commands\n    words = command.lower().split()\n    \n    match words:\n        # TODO: Add cases for single-word commands\n        # case [\"north\"]:\n        #     return \"Moving north...\"\n        \n        # TODO: Add cases for movement with guards\n        # case [\"north\"] if row == 0:\n        #     return \"You can't go that way!\"\n        \n        # TODO: Add cases for two-word commands like [\"go\", direction]\n        \n        # TODO: Add case for quit/exit\n        \n        # TODO: Add wildcard case for unknown commands\n        case _:\n            return \"I don't understand that command\"\n\n# Test the command parser\ntest_commands = [\n    \"north\",\n    \"look\",\n    \"inventory\",\n    \"quit\",\n    \"go south\",\n    \"take sword\",\n    \"dance\"\n]\n\nprint(\"=== Testing Command Parser ===\")\nfor cmd in test_commands:\n    print(f\"Command: '{cmd}'\")\n    print(f\"Response: {parse_command(cmd)}\")\n    print()",
              "solution": "# Command Parser using match/case (Python 3.10+)\n\ndef parse_command(command, player_position=(5, 5)):\n    \"\"\"Parse a text adventure game command.\n    \n    Args:\n        command: The user's input string\n        player_position: Tuple of (row, col) for the player\n    \n    Returns:\n        String response to the command\n    \"\"\"\n    row, col = player_position\n    \n    # Split command into words for complex commands\n    words = command.lower().split()\n    \n    match words:\n        # Movement commands with boundary checks using guards\n        case [\"north\"] if row == 0:\n            return \"You can't go that way! (at northern boundary)\"\n        case [\"south\"] if row == 9:\n            return \"You can't go that way! (at southern boundary)\"\n        case [\"east\"] if col == 9:\n            return \"You can't go that way! (at eastern boundary)\"\n        case [\"west\"] if col == 0:\n            return \"You can't go that way! (at western boundary)\"\n        \n        # Basic movement commands\n        case [\"north\"] | [\"n\"]:\n            return \"Moving north...\"\n        case [\"south\"] | [\"s\"]:\n            return \"Moving south...\"\n        case [\"east\"] | [\"e\"]:\n            return \"Moving east...\"\n        case [\"west\"] | [\"w\"]:\n            return \"Moving west...\"\n        \n        # Two-word movement: \"go [direction]\"\n        case [\"go\", direction] if direction in [\"north\", \"south\", \"east\", \"west\"]:\n            return f\"Moving {direction}...\"\n        case [\"go\", _]:\n            return \"Go where? Use: go north/south/east/west\"\n        \n        # Action commands\n        case [\"look\"] | [\"l\"]:\n            return \"You look around and see a dark forest.\"\n        case [\"inventory\"] | [\"i\"]:\n            return \"You are carrying: sword, torch, map\"\n        case [\"help\"] | [\"h\"] | [\"?\"]:\n            return \"Commands: north, south, east, west, look, inventory, take [item], quit\"\n        \n        # Take command\n        case [\"take\", item]:\n            return f\"You pick up the {item}.\"\n        case [\"take\"]:\n            return \"Take what?\"\n        \n        # Quit commands\n        case [\"quit\"] | [\"exit\"] | [\"q\"]:\n            return \"Goodbye! Thanks for playing.\"\n        \n        # Unknown command\n        case _:\n            return \"I don't understand that command. Type 'help' for options.\"\n\n# Test the command parser\ntest_commands = [\n    \"north\",\n    \"look\",\n    \"inventory\",\n    \"quit\",\n    \"go south\",\n    \"take sword\",\n    \"dance\",\n    \"help\"\n]\n\nprint(\"=== Testing Command Parser ===\")\nfor cmd in test_commands:\n    print(f\"Command: '{cmd}'\")\n    print(f\"Response: {parse_command(cmd)}\")\n    print()\n\n# Test boundary conditions\nprint(\"=== Testing Boundaries ===\")\nprint(f\"At north boundary: {parse_command('north', (0, 5))}\")\nprint(f\"At south boundary: {parse_command('south', (9, 5))}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Basic movement works",
                  "expectedOutput": "Moving north",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use `case [\"north\"]:` for single word. Use `case [\"go\", direction]:` to capture the direction. Use guards like `case [\"north\"] if row == 0:` for boundary checks. Put more specific patterns (with guards) BEFORE general patterns."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Putting wildcard case _ before specific cases",
                  "consequence": "Specific cases never match",
                  "correction": "Always put case _: at the end"
                },
                {
                  "mistake": "Forgetting to split command into words",
                  "consequence": "Can't match patterns like [\"go\", direction]",
                  "correction": "Use command.split() to get a list of words"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-04",
      "title": "Loops",
      "description": "Repeating actions with while and for loops",
      "difficulty": "beginner",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-04-lesson-01",
          "title": "while Loops: The Power of Repetition",
          "moduleId": "module-04",
          "order": 1,
          "estimatedMinutes": 22,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're washing dishes. You follow this simple process:\n\n<ol style='background-color: #f0f0f0; padding: 15px; margin: 10px 0;'>- **Check:** Are there still dirty dishes?\n- **If YES:** Wash one dish, then go back to step 1\n- **If NO:** You're done!\n\nThis is a **loop** - repeating an action while a condition remains true. In code:\n\n```\nwhile there_are_dirty_dishes:\n    wash_one_dish()\n    # Loop back and check again\n\n```\nThe **while loop** is Python's way of saying: \"Keep doing this action over and over, as long as this condition is True.\"\n\n### Why Loops Matter:\nWithout loops, if you wanted to print \"Hello\" 100 times, you'd need to write:\n\n```\nprint(\"Hello\")\nprint(\"Hello\")\nprint(\"Hello\")\n# ... 97 more times!\n\n```\nWith a loop:\n\n```\ncount = 0\nwhile count < 100:\n    print(\"Hello\")\n    count = count + 1  # This is critical!\n# Done in 4 lines instead of 100!\n\n```\n### Real-World Examples:\n\n- **ATM machine**:\nWHILE user hasn't entered correct PIN:\n&nbsp;&nbsp;&nbsp;&nbsp;Ask for PIN again\n- **Game loop**:\nWHILE player is alive:\n&nbsp;&nbsp;&nbsp;&nbsp;Accept player input\n&nbsp;&nbsp;&nbsp;&nbsp;Update game state\n&nbsp;&nbsp;&nbsp;&nbsp;Draw screen\n- **Downloading files**:\nWHILE download not complete:\n&nbsp;&nbsp;&nbsp;&nbsp;Download next chunk\n&nbsp;&nbsp;&nbsp;&nbsp;Update progress bar\n- **Menu system**:\nWHILE user hasn't chosen 'quit':\n&nbsp;&nbsp;&nbsp;&nbsp;Show menu\n&nbsp;&nbsp;&nbsp;&nbsp;Get user choice\n&nbsp;&nbsp;&nbsp;&nbsp;Execute action\n\nLoops are the foundation of automation - they let computers do what they do best: repeat tasks tirelessly!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Counting to 5 ===\nCount: 1\nCount: 2\nCount: 3\nCount: 4\nCount: 5\nDone counting!\n\n=== Countdown ===\n5\n4\n3\n2\n1\nBlastoff! üöÄ\n\n=== Password Checker ===\nEnter password: wrong\n‚ùå Incorrect! Try again.\nEnter password: python123\n‚úì Access granted!\n\n=== Sum Calculator ===\nAdding 1 to total (0)\nAdding 2 to total (1)\nAdding 3 to total (3)\nAdding 4 to total (6)\nAdding 5 to total (10)\nFinal total: 15\n\n=== Age Input with Validation ===\nEnter your age (0-120): -5\nInvalid age! Try again.\nEnter your age (0-120): 25\nThank you! Your age: 25\n\n=== Menu System ===\n1. Say Hello\n2. Say Goodbye\n3. Quit\nEnter choice: 1\nHello there!\n\n1. Say Hello\n2. Say Goodbye\n3. Quit\nEnter choice: 3\nExiting...\nProgram ended.\n```",
              "code": "# while Loops: Repeating Code Based on a Condition\n\n# Example 1: Basic Counting Loop\nprint(\"=== Counting to 5 ===\")\ncount = 1  # Start value\n\nwhile count <= 5:  # Condition: keep going while True\n    print(f\"Count: {count}\")\n    count = count + 1  # CRITICAL: Update the variable!\n\nprint(\"Done counting!\")\nprint()\n\n# Example 2: Countdown\nprint(\"=== Countdown ===\")\ncountdown = 5\n\nwhile countdown > 0:\n    print(countdown)\n    countdown = countdown - 1  # Decrease each time\n\nprint(\"Blastoff! üöÄ\")\nprint()\n\n# Example 3: User Input Loop (Sentinel Pattern)\nprint(\"=== Password Checker ===\")\npassword = \"\"\ncorrect_password = \"python123\"\n\nwhile password != correct_password:\n    password = input(\"Enter password: \")\n    \n    if password != correct_password:\n        print(\"‚ùå Incorrect! Try again.\")\n\nprint(\"‚úì Access granted!\")\nprint()\n\n# Example 4: Accumulator Pattern (Sum)\nprint(\"=== Sum Calculator ===\")\ntotal = 0\nnumber = 1\n\nwhile number <= 5:\n    print(f\"Adding {number} to total ({total})\")\n    total = total + number  # Accumulate sum\n    number = number + 1\n\nprint(f\"Final total: {total}\")  # 1+2+3+4+5 = 15\nprint()\n\n# Example 5: Input Validation Loop\nprint(\"=== Age Input with Validation ===\")\nage = -1  # Invalid starting value\n\nwhile age < 0 or age > 120:  # Keep looping while invalid\n    age = int(input(\"Enter your age (0-120): \"))\n    \n    if age < 0 or age > 120:\n        print(\"Invalid age! Try again.\")\n\nprint(f\"Thank you! Your age: {age}\")\nprint()\n\n# Example 6: Flag-Controlled Loop\nprint(\"=== Menu System ===\")\nrunning = True\n\nwhile running:\n    print(\"\\n1. Say Hello\")\n    print(\"2. Say Goodbye\")\n    print(\"3. Quit\")\n    \n    choice = int(input(\"Enter choice: \"))\n    \n    if choice == 1:\n        print(\"Hello there!\")\n    elif choice == 2:\n        print(\"Goodbye!\")\n    elif choice == 3:\n        print(\"Exiting...\")\n        running = False  # Change flag to stop loop\n    else:\n        print(\"Invalid choice!\")\n\nprint(\"Program ended.\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### while Loop Anatomy:\n```\nwhile condition:\n    # Code to repeat (loop body)\n    # Must be indented!\n    statement1\n    statement2\n    # Update variable(s) in condition!\n\n```\n#### Breaking It Down:\n\n- **The keyword:** `while` (lowercase)\n<li>**The condition:** Any Boolean expression```\nwhile count < 10:     # Comparison\nwhile is_running:     # Boolean variable\nwhile password != correct:  # Inequality check\n\n```\n</li>- **The colon (:):** Required! Signals start of loop body\n- **Indented body:** Code that repeats (4 spaces)\n- **Variable update:** MUST change something in the condition!\n\n### How Python Reads a while Loop:\n\n- **Check condition:** Is it True?\n- **If True:** Execute indented code\n- **Loop back:** Return to step 1 (check again)\n- **If False:** Skip loop body, continue after loop\n\n#### Visual Flow:\n```\ncount = 1             # Initialize\n\nwhile count <= 3:     # ‚Üê Check: 1 <= 3? YES\n    print(count)      #   Execute: prints 1\n    count = count + 1 #   Update: count becomes 2\n                       # ‚Üê Loop back, check: 2 <= 3? YES\n    print(count)      #   Execute: prints 2\n    count = count + 1 #   Update: count becomes 3\n                       # ‚Üê Loop back, check: 3 <= 3? YES\n    print(count)      #   Execute: prints 3\n    count = count + 1 #   Update: count becomes 4\n                       # ‚Üê Loop back, check: 4 <= 3? NO\n                       # Exit loop\n\nprint(\"Done\")         # Continue here\n\n```\n### The Three Essential Parts of Most Loops:\n\n<li>**Initialization:** Set starting values BEFORE the loop```\ncount = 1  # Initialize counter\n\n```\n</li><li>**Condition:** Test that determines if loop continues```\nwhile count <= 5:  # Condition\n\n```\n</li><li>**Update:** Change variable(s) to eventually make condition False```\n    count = count + 1  # Update (progress toward exit)\n\n```\n</li>\n**If you forget the update, you get an INFINITE LOOP!**\n\n### Common Loop Patterns:\n#### 1. Counter Loop (Count N times)\n```\ncount = 1\nwhile count <= 10:     # Repeat 10 times\n    print(f\"Iteration {count}\")\n    count = count + 1  # Increment\n\n```\n#### 2. Sentinel Loop (Until Specific Input)\n```\nanswer = \"\"\nwhile answer != \"quit\":  # Keep going until \"quit\"\n    answer = input(\"Enter command (or 'quit'): \")\n    # Process answer\n\n```\n#### 3. Flag Loop (Boolean Control)\n```\nkeep_going = True\nwhile keep_going:\n    # Do stuff\n    choice = input(\"Continue? (y/n): \")\n    if choice == \"n\":\n        keep_going = False  # Exit loop\n\n```\n#### 4. Validation Loop (Repeat Until Valid)\n```\nage = -1\nwhile age < 0:  # Repeat while invalid\n    age = int(input(\"Enter age: \"))\n    if age < 0:\n        print(\"Invalid!\")\n\n```\n#### 5. Accumulator Loop (Build Up a Result)\n```\ntotal = 0\ncount = 1\nwhile count <= 5:\n    total = total + count  # Accumulate sum\n    count = count + 1\n# total now equals 1+2+3+4+5 = 15\n\n```\n### Infinite Loops (Common Mistake!):\n```\n# INFINITE LOOP - DON'T DO THIS!\ncount = 1\nwhile count <= 5:\n    print(count)\n    # OOPS! Forgot to update count\n    # count is always 1, so 1 <= 5 is always True\n    # Loop runs forever!\n\n# FIX:\ncount = 1\nwhile count <= 5:\n    print(count)\n    count = count + 1  # Now it will eventually become 6 and exit\n\n```\n**Signs you have an infinite loop:**\n\n- Program never stops running\n- Same output repeats endlessly\n- Computer fan gets loud (CPU working hard!)\n\n**How to stop:** Press Ctrl+C in the terminal\n\n### Common Mistakes:\n\n<li>**Missing colon**:```\n# WRONG:\nwhile count < 5  # Missing colon!\n    print(count)\n\n# CORRECT:\nwhile count < 5:  # Has colon\n    print(count)\n\n```\n</li><li>**Forgetting to update loop variable**:```\n# INFINITE LOOP:\ncount = 0\nwhile count < 10:\n    print(count)  # Prints 0 forever!\n    # Forgot: count = count + 1\n\n```\n</li><li>**Wrong indentation**:```\n# WRONG:\nwhile count < 5:\nprint(count)  # Not indented! Won't loop\n\n# CORRECT:\nwhile count < 5:\n    print(count)  # Indented, part of loop\n\n```\n</li><li>**Initializing inside the loop**:```\n# WRONG:\nwhile count < 5:\n    count = 0  # Resets to 0 every iteration! Infinite loop!\n    print(count)\n    count = count + 1\n\n# CORRECT:\ncount = 0  # Initialize BEFORE loop\nwhile count < 5:\n    print(count)\n    count = count + 1\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Infinite Loops - Forgetting to Update**\n```python\n# DANGER - This runs forever!\ncount = 0\nwhile count < 10:\n    print(count)  # count never changes!\n    # Missing: count = count + 1\n\n# CORRECT\ncount = 0\nwhile count < 10:\n    print(count)\n    count = count + 1  # Now it will eventually exit\n```\n**Press Ctrl+C to stop an infinite loop!**\n\n**2. Off-By-One Errors**\n```python\n# Prints 1-4 (not 1-5!)\ncount = 1\nwhile count < 5:  # < means \"less than\", not \"less than or equal\"\n    print(count)\n    count += 1\n\n# To include 5, use <=\nwhile count <= 5:  # Now prints 1-5\n```\n\n**3. Initializing Inside the Loop**\n```python\n# WRONG - Resets count every iteration!\nwhile count < 5:\n    count = 0  # Oops! Always 0, infinite loop!\n    print(count)\n    count += 1\n\n# CORRECT - Initialize BEFORE the loop\ncount = 0\nwhile count < 5:\n    print(count)\n    count += 1\n```\n\n**4. Wrong Comparison Operator**\n```python\n# WRONG - Loop never executes (10 is not less than 5)\ncount = 10\nwhile count < 5:\n    print(count)  # Never runs!\n\n# Check your initial value matches your condition logic\n```\n\n**5. Input Without int() Conversion**\n```python\n# WRONG - Comparing string to number!\nguess = input(\"Enter number: \")  # Returns string\nwhile guess != 10:  # \"10\" != 10 is always True!\n\n# CORRECT\nguess = int(input(\"Enter number: \"))  # Convert to int\nwhile guess != 10:\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **while loops repeat code as long as a condition is True**\n- **Syntax**: `while condition:` then indented body\n- **Three parts**: Initialize (before loop), Condition (in while), Update (inside loop)\n- **Loop execution**: Check condition ‚Üí If True, run body ‚Üí Loop back ‚Üí Check again\n- **Must update loop variable** or you get an infinite loop!\n- **Common patterns**:\n<li>Counter: count to N\n- Sentinel: loop until specific input\n- Flag: Boolean variable controls loop\n- Validation: repeat until valid input\n- Accumulator: build up a result\n\n</li>- **Infinite loops happen when** you forget to update the variable in the condition\n- **Stop infinite loop**: Press Ctrl+C\n\n### When to Use while Loops:\n```\n‚úÖ Use while when:\n‚Ä¢ You don't know how many times to repeat (\"until user quits\")\n‚Ä¢ Condition is based on user input or changing state\n‚Ä¢ Input validation (retry until valid)\n‚Ä¢ Event-driven loops (game loops, menu systems)\n\n‚ùå Don't use while when:\n‚Ä¢ You know exactly how many times to repeat (use for loop - next lesson!)\n‚Ä¢ Iterating over a sequence (use for loop)\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write a basic while loop with proper syntax\n- Initialize variables before the loop\n- Update loop variables inside the loop\n- Avoid infinite loops by ensuring the condition eventually becomes False\n- Use while loops for input validation and counters\n\n### Coming Up Next:\nIn **Lesson 2: for Loops**, you'll learn Python's OTHER loop type:\n\n- Iterating over sequences (strings, lists, ranges)\n- `range()` function for counting\n- Cleaner syntax when you know the iterations\n- The difference between for and while\n\nwhile loops = \"repeat WHILE condition is True\"\nfor loops = \"repeat FOR each item in a sequence\"\n\nTogether, these two loop types handle every repetition scenario!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-04-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Number Guessing Game** where the computer picks a random number and the user tries to guess it.\n\n**Game Rules:**\n\n- Computer picks a random number between 1 and 20\n- User keeps guessing until they get it right\n- After each guess, tell the user if they're too high or too low\n- Count how many guesses it took\n\n**Example game:**\n\n<pre>=== Number Guessing Game ===\nI'm thinking of a number between 1 and 20...\n\nEnter your guess: 10\nToo low! Try again.\n\nEnter your guess: 15\nToo high! Try again.\n\nEnter your guess: 13\nToo low! Try again.\n\nEnter your guess: 14\nüéâ Correct! You got it in 4 guesses!\n</pre>**Hints:**\n\n- Use `import random` and `random.randint(1, 20)` to pick a number\n- Use a while loop that continues until guess equals the secret number\n- Use a counter variable to track attempts",
              "instructions": "Build a **Number Guessing Game** where the computer picks a random number and the user tries to guess it.\n\n**Game Rules:**\n\n- Computer picks a random number between 1 and 20\n- User keeps guessing until they get it right\n- After each guess, tell the user if they're too high or too low\n- Count how many guesses it took\n\n**Example game:**\n\n<pre>=== Number Guessing Game ===\nI'm thinking of a number between 1 and 20...\n\nEnter your guess: 10\nToo low! Try again.\n\nEnter your guess: 15\nToo high! Try again.\n\nEnter your guess: 13\nToo low! Try again.\n\nEnter your guess: 14\nüéâ Correct! You got it in 4 guesses!\n</pre>**Hints:**\n\n- Use `import random` and `random.randint(1, 20)` to pick a number\n- Use a while loop that continues until guess equals the secret number\n- Use a counter variable to track attempts",
              "starterCode": "# Number Guessing Game\n# User tries to guess a random number\n\nimport random\n\nprint(\"=== Number Guessing Game ===\")\nprint(\"I'm thinking of a number between 1 and 20...\")\nprint()\n\n# YOUR CODE HERE:\n# 1. Pick a random number\nsecret_number = random.randint(1, 20)\n\n# 2. Initialize variables\nguess = 0  # User's guess (start with impossible value)\nattempts = 0  # Counter for number of guesses\n\n# 3. Loop until correct guess\nwhile :  # What condition keeps the loop going?\n    \n    # Get user's guess\n    guess = \n    \n    # Increment attempt counter\n    attempts = \n    \n    # Check if guess is correct, too high, or too low\n    if guess < secret_number:\n        print(\"Too low! Try again.\")\n        print()\n    elif guess > secret_number:\n        print(\"Too high! Try again.\")\n        print()\n    else:\n        # Correct guess! Loop will end\n        print(f\"üéâ Correct! You got it in {attempts} guesses!\")",
              "solution": "# Number Guessing Game - SOLUTION\n# User tries to guess a random number\n\nimport random\n\nprint(\"=== Number Guessing Game ===\")\nprint(\"I'm thinking of a number between 1 and 20...\")\nprint()\n\n# Pick a random number between 1 and 20\nsecret_number = random.randint(1, 20)\n\n# Initialize variables\nguess = 0  # User's guess (start with impossible value)\nattempts = 0  # Counter for number of guesses\n\n# Loop until user guesses correctly\nwhile guess != secret_number:\n    \n    # Get user's guess\n    guess = int(input(\"Enter your guess: \"))\n    \n    # Increment attempt counter\n    attempts = attempts + 1\n    \n    # Give feedback\n    if guess < secret_number:\n        print(\"Too low! Try again.\")\n        print()\n    elif guess > secret_number:\n        print(\"Too high! Try again.\")\n        print()\n    else:\n        # Correct guess!\n        print(f\"üéâ Correct! You got it in {attempts} guesses!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "The while loop should continue as long as guess != secret_number. Inside the loop: get the guess with int(input(...)), increment attempts with attempts = attempts + 1, then check if the guess is too low, too high, or correct. The loop automatically exits when guess equals secret_number (condition becomes False)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-04-lesson-02",
          "title": "for Loops: Iterate with Ease",
          "moduleId": "module-04",
          "order": 2,
          "estimatedMinutes": 24,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're a teacher taking attendance. You have a list of 30 students and need to call each name:\n\n<p style='background-color: #f0f0f0; padding: 10px;'>**Using a while loop (manual):**\ncount = 0\nwhile count < 30:\n&nbsp;&nbsp;&nbsp;&nbsp;call_name(students[count])\n&nbsp;&nbsp;&nbsp;&nbsp;count = count + 1\n<em>(You manage the counter yourself)</em></p><p style='background-color: #e3f2fd; padding: 10px;'>**Using a for loop (automatic):**\nfor student in students:\n&nbsp;&nbsp;&nbsp;&nbsp;call_name(student)\n<em>(Python manages everything for you!)</em></p>The **for loop** is Python's way of saying: \"Do this action FOR EACH item in a sequence.\" No manual counters, no forgetting to increment, no infinite loops!\n\n### The Key Difference:\n\n- **while loop:** \"Repeat WHILE condition is True\" (you control when it stops)\n- **for loop:** \"Repeat FOR EACH item\" (automatic, iterates through a sequence)\n\n### Real-World Examples:\n\n- **Processing emails**:\nFOR EACH email in inbox:\n&nbsp;&nbsp;&nbsp;&nbsp;Read email\n&nbsp;&nbsp;&nbsp;&nbsp;Categorize as spam or legitimate\n- **Grading papers**:\nFOR EACH student in class:\n&nbsp;&nbsp;&nbsp;&nbsp;Calculate their average\n&nbsp;&nbsp;&nbsp;&nbsp;Assign letter grade\n- **Generating reports**:\nFOR EACH month in year:\n&nbsp;&nbsp;&nbsp;&nbsp;Calculate total sales\n&nbsp;&nbsp;&nbsp;&nbsp;Add to report\n- **Printing receipts**:\nFOR EACH item in shopping cart:\n&nbsp;&nbsp;&nbsp;&nbsp;Print item name and price\n\nfor loops are perfect when you know the collection you're working with - whether it's numbers, letters, items in a list, or anything else!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Counting 1 to 5 ===\nNumber: 1\nNumber: 2\nNumber: 3\nNumber: 4\nNumber: 5\nDone!\n\n=== range(5) - Starts at 0 ===\n0\n1\n2\n3\n4\n\n=== Even Numbers (Step by 2) ===\n0\n2\n4\n6\n8\n10\n\n=== Iterating Over String ===\nLetter: P\nLetter: y\nLetter: t\nLetter: h\nLetter: o\nLetter: n\n\n=== Sum of 1 to 10 ===\nAdding 1 to total (0)\nAdding 2 to total (1)\nAdding 3 to total (3)\nAdding 4 to total (6)\nAdding 5 to total (10)\nAdding 6 to total (15)\nAdding 7 to total (21)\nAdding 8 to total (28)\nAdding 9 to total (36)\nAdding 10 to total (45)\nFinal sum: 55\n\n=== Building Stars ===\n*\n**\n***\n****\n*****\n\n=== Multiplication Table (5s) ===\n5 √ó 1 = 5\n5 √ó 2 = 10\n5 √ó 3 = 15\n5 √ó 4 = 20\n5 √ó 5 = 25\n5 √ó 6 = 30\n5 √ó 7 = 35\n5 √ó 8 = 40\n5 √ó 9 = 45\n5 √ó 10 = 50\n\n=== Countdown ===\n5\n4\n3\n2\n1\nBlastoff! üöÄ\n\n=== Simple Pattern ===\n*****\n*****\n*****\n\n=== Odd Numbers Only (1-10) ===\n1\n3\n5\n7\n9\n```",
              "code": "# for Loops: Iterating Over Sequences\n\n# Example 1: Basic for Loop with range()\nprint(\"=== Counting 1 to 5 ===\")\n\nfor number in range(1, 6):  # range(1, 6) generates: 1, 2, 3, 4, 5\n    print(f\"Number: {number}\")\n\nprint(\"Done!\")\nprint()\n\n# Example 2: range() with One Argument (starts at 0)\nprint(\"=== range(5) - Starts at 0 ===\")\n\nfor i in range(5):  # range(5) generates: 0, 1, 2, 3, 4\n    print(i)\n\nprint()\n\n# Example 3: range() with Step (count by 2s)\nprint(\"=== Even Numbers (Step by 2) ===\")\n\nfor num in range(0, 11, 2):  # Start at 0, stop before 11, step by 2\n    print(num)  # Outputs: 0, 2, 4, 6, 8, 10\n\nprint()\n\n# Example 4: Iterating Over a String\nprint(\"=== Iterating Over String ===\")\n\nname = \"Python\"\n\nfor letter in name:\n    print(f\"Letter: {letter}\")\n# Outputs each letter: P, y, t, h, o, n\n\nprint()\n\n# Example 5: Accumulator Pattern (Sum)\nprint(\"=== Sum of 1 to 10 ===\")\n\ntotal = 0\n\nfor number in range(1, 11):  # 1 through 10\n    print(f\"Adding {number} to total ({total})\")\n    total = total + number\n\nprint(f\"Final sum: {total}\")  # 55\nprint()\n\n# Example 6: Building a String\nprint(\"=== Building Stars ===\")\n\nstars = \"\"\n\nfor i in range(1, 6):\n    stars = stars + \"*\"\n    print(stars)\n# Outputs:\n# *\n# **\n# ***\n# ****\n# *****\n\nprint()\n\n# Example 7: Multiplication Table\nprint(\"=== Multiplication Table (5s) ===\")\n\nfor i in range(1, 11):\n    result = 5 * i\n    print(f\"5 √ó {i} = {result}\")\n\nprint()\n\n# Example 8: Counting Backwards (Negative Step)\nprint(\"=== Countdown ===\")\n\nfor count in range(5, 0, -1):  # Start at 5, stop before 0, step -1\n    print(count)\n\nprint(\"Blastoff! üöÄ\")\nprint()\n\n# Example 9: Nested Loop Preview (Patterns)\nprint(\"=== Simple Pattern ===\")\n\nfor row in range(3):  # 3 rows\n    for col in range(5):  # 5 stars per row\n        print(\"*\", end=\"\")  # end=\"\" prevents newline\n    print()  # Move to next line after each row\n\n# Outputs:\n# *****\n# *****\n# *****\n\nprint()\n\n# Example 10: Skipping Values with Continue (Preview)\nprint(\"=== Odd Numbers Only (1-10) ===\")\n\nfor num in range(1, 11):\n    if num % 2 == 0:  # If even\n        continue  # Skip to next iteration\n    print(num)  # Only prints odd numbers\n\n# Outputs: 1, 3, 5, 7, 9",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### for Loop Anatomy:\n```\nfor variable in sequence:\n    # Code to repeat (loop body)\n    # Indented (4 spaces)\n    statement1\n    statement2\n\n```\n#### Breaking It Down:\n\n- **The keyword:** `for` (lowercase)\n<li>**The loop variable:** Name you choose (e.g., `number`, `letter`, `item`)```\nfor number in range(5):  # 'number' will hold each value\nfor letter in \"Hello\":   # 'letter' will hold each character\n\n```\n</li>- **The keyword `in`:** Required!\n- **The sequence:** What to iterate over\n<li>`range()` for numbers\n- String for characters\n- List for items (Module 5!)\n\n</li>- **The colon (:):** Required!\n- **Indented body:** Code that runs for each item\n\n### Understanding range():\nThe `range()` function generates a sequence of numbers. It has three forms:\n\n#### 1. range(stop) - One Argument\n```\nrange(5)  # Generates: 0, 1, 2, 3, 4\n# Starts at 0, stops BEFORE 5\n\n```\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Code</th><th>Generates</th></tr><tr><td>`range(3)`</td><td>0, 1, 2</td></tr><tr><td>`range(10)`</td><td>0, 1, 2, 3, 4, 5, 6, 7, 8, 9</td></tr><tr><td>`range(1)`</td><td>0</td></tr></table>#### 2. range(start, stop) - Two Arguments\n```\nrange(1, 6)  # Generates: 1, 2, 3, 4, 5\n# Starts at 1, stops BEFORE 6\n\n```\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Code</th><th>Generates</th></tr><tr><td>`range(1, 5)`</td><td>1, 2, 3, 4</td></tr><tr><td>`range(5, 10)`</td><td>5, 6, 7, 8, 9</td></tr><tr><td>`range(0, 3)`</td><td>0, 1, 2</td></tr></table>**Critical:** The stop value is EXCLUDED! `range(1, 6)` stops <em>before</em> 6.\n\n#### 3. range(start, stop, step) - Three Arguments\n```\nrange(0, 10, 2)  # Generates: 0, 2, 4, 6, 8\n# Starts at 0, stops before 10, increment by 2\n\n```\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Code</th><th>Generates</th><th>Description</th></tr><tr><td>`range(0, 10, 2)`</td><td>0, 2, 4, 6, 8</td><td>Even numbers</td></tr><tr><td>`range(1, 10, 2)`</td><td>1, 3, 5, 7, 9</td><td>Odd numbers</td></tr><tr><td>`range(0, 20, 5)`</td><td>0, 5, 10, 15</td><td>Count by 5s</td></tr><tr><td>`range(10, 0, -1)`</td><td>10, 9, 8, ..., 1</td><td>Countdown</td></tr><tr><td>`range(5, 0, -1)`</td><td>5, 4, 3, 2, 1</td><td>Countdown from 5</td></tr></table>### Iterating Over Strings:\n```\nfor character in \"Hello\":\n    print(character)\n\n# Outputs:\n# H\n# e\n# l\n# l\n# o\n\n```\nPython treats strings as sequences of characters, so you can loop through each letter!\n\n### for vs while: When to Use Each\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Use `for` when...</th><th>Use `while` when...</th></tr><tr><td>You know the sequence to iterate</td><td>You don't know how many iterations</td></tr><tr><td>Counting a specific range</td><td>Looping until a condition changes</td></tr><tr><td>Processing each item in a collection</td><td>Input validation (retry until valid)</td></tr><tr><td>Simpler, less error-prone</td><td>Condition-based repetition</td></tr></table>#### Examples:\n```\n# for is better here (known range):\nfor i in range(10):\n    print(i)\n\n# while is better here (unknown iterations):\npassword = \"\"\nwhile password != \"secret\":\n    password = input(\"Enter password: \")\n\n# for is better here (iterate string):\nfor letter in \"Python\":\n    print(letter)\n\n# while is better here (game loop):\ngame_running = True\nwhile game_running:\n    # Game logic\n    if player_quits:\n        game_running = False\n\n```\n### Common Patterns:\n#### 1. Counting Loop\n```\nfor i in range(1, 11):  # 1 through 10\n    print(f\"Iteration {i}\")\n\n```\n#### 2. Accumulator (Sum/Product)\n```\ntotal = 0\nfor num in range(1, 6):\n    total = total + num  # Sum: 1+2+3+4+5\nprint(total)  # 15\n\n```\n#### 3. Building Strings\n```\nresult = \"\"\nfor i in range(5):\n    result = result + \"*\"\nprint(result)  # *****\n\n```\n#### 4. Character Counter\n```\nvowels = 0\nfor letter in \"Hello World\":\n    if letter.lower() in \"aeiou\":\n        vowels = vowels + 1\nprint(vowels)  # 3\n\n```\n### Common Mistakes:\n\n<li>**Off-by-one with range()**:```\n# WRONG: Trying to count 1 to 5\nfor i in range(1, 5):  # Only goes to 4!\n    print(i)  # 1, 2, 3, 4 (missing 5)\n\n# CORRECT:\nfor i in range(1, 6):  # Stop BEFORE 6\n    print(i)  # 1, 2, 3, 4, 5\n\n```\n</li><li>**Modifying loop variable (doesn't work!)**:```\n# DOESN'T DO WHAT YOU THINK:\nfor i in range(5):\n    i = i + 10  # This doesn't affect the loop!\n    print(i)  # Prints: 10, 11, 12, 13, 14\n# Next iteration, i gets reset to next value from range\n\n```\n</li><li>**Forgetting colon**:```\n# WRONG:\nfor i in range(5)  # Missing colon!\n    print(i)\n\n# CORRECT:\nfor i in range(5):  # Has colon\n    print(i)\n\n```\n</li><li>**Using wrong indentation**:```\n# WRONG:\nfor i in range(3):\nprint(i)  # Not indented! Won't loop\n\n# CORRECT:\nfor i in range(3):\n    print(i)  # Indented, part of loop\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Off-By-One Error with range()**\n```python\n# WRONG - Prints 1-4, not 1-5!\nfor i in range(1, 5):\n    print(i)  # Output: 1, 2, 3, 4\n\n# CORRECT - Stop value is EXCLUDED\nfor i in range(1, 6):  # Goes UP TO but NOT INCLUDING 6\n    print(i)  # Output: 1, 2, 3, 4, 5\n```\n\n**2. Modifying Loop Variable (Has No Effect!)**\n```python\n# WRONG - Changing i doesn't affect the loop!\nfor i in range(5):\n    i = i + 100  # This is ignored!\n    print(i)  # Prints 100, 101, 102, 103, 104\n# i resets to next range value each iteration\n\n# The loop ALWAYS iterates 5 times regardless\n# If you need to skip iterations, use continue\n```\n\n**3. Using range() with Floats**\n```python\n# WRONG - range() only works with integers!\nfor i in range(0.5, 5.5, 0.5):  # TypeError!\n    print(i)\n\n# CORRECT - Use a while loop or numpy for floats\ni = 0.5\nwhile i < 5.5:\n    print(i)\n    i += 0.5\n```\n\n**4. Forgetting to Use enumerate()**\n```python\n# AWKWARD - Manually tracking index\nfruits = [\"apple\", \"banana\", \"cherry\"]\nindex = 0\nfor fruit in fruits:\n    print(f\"{index}: {fruit}\")\n    index += 1\n\n# PYTHONIC - Use enumerate()\nfor index, fruit in enumerate(fruits):\n    print(f\"{index}: {fruit}\")\n```\n\n**5. Empty range() Produces No Iterations**\n```python\n# SILENT FAILURE - Loop never runs!\nfor i in range(5, 5):  # Start == stop\n    print(i)  # Never executes!\n\nfor i in range(10, 5):  # Start > stop (no negative step)\n    print(i)  # Never executes!\n\n# To count backwards, use negative step:\nfor i in range(10, 5, -1):  # 10, 9, 8, 7, 6\n    print(i)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **for loops iterate over sequences** - no manual counter needed!\n- **Syntax**: `for variable in sequence:`\n- **range() creates number sequences**:\n<li>`range(stop)` ‚Üí 0 to stop-1\n- `range(start, stop)` ‚Üí start to stop-1\n- `range(start, stop, step)` ‚Üí custom increment/decrement\n\n</li>- **Stop value is excluded**: `range(1, 6)` gives 1,2,3,4,5 (not 6!)\n- **Iterate strings**: `for char in \"Hello\":` loops through each letter\n- **Nested loops**: Loop inside loop for 2D patterns, grids\n- **for vs while**:\n<li>for: Known sequence, simpler, less error-prone\n- while: Unknown iterations, condition-based\n\n</li>- **Use `end=\"\"`** to print without newline\n- **Common patterns**: Counting, accumulating, building strings, character processing\n\n### range() Quick Reference:\n```\nrange(5)           # 0, 1, 2, 3, 4\nrange(1, 6)        # 1, 2, 3, 4, 5\nrange(0, 10, 2)    # 0, 2, 4, 6, 8\nrange(10, 0, -1)   # 10, 9, 8, ..., 1\nrange(1, 10, 3)    # 1, 4, 7\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write a for loop with range() in all three forms\n- Iterate over strings\n- Use nested loops for patterns\n- Choose between for and while appropriately\n- Avoid off-by-one errors with range()\n\n### Coming Up Next:\nIn **Lesson 3: Loop Control (break, continue, pass)**, you'll learn to:\n\n- **break**: Exit a loop early\n- **continue**: Skip to next iteration\n- **pass**: Placeholder for empty loops\n- **else with loops**: Code that runs if loop completes normally\n\nThese give you fine-grained control over loop execution - stopping early, skipping iterations, and detecting normal vs broken loops!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-04-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Pattern Generator** that creates visual patterns using for loops.\n\n**Your task:**\n\n- Ask the user how many rows they want\n<li>Create 3 different patterns:\n<li>**Pattern 1 (Right Triangle):** Growing stars<pre>*\n**\n***\n****</pre></li><li>**Pattern 2 (Square):** Same number of stars per row<pre>*****\n*****\n*****</pre></li><li>**Pattern 3 (Numbers):** Print row number<pre>1\n22\n333\n4444</pre></li>\n</li>\n**Example output:**\n\n<pre>=== Pattern Generator ===\n\nHow many rows? 4\n\nPattern 1 - Right Triangle:\n*\n**\n***\n****\n\nPattern 2 - Square:\n****\n****\n****\n****\n\nPattern 3 - Numbers:\n1\n22\n333\n4444\n</pre>**Hints:**\n\n- Use nested loops (loop inside a loop) for columns\n- Outer loop controls rows, inner loop controls how many stars/numbers per row\n- Use `print(\"*\", end=\"\")` to print without newline\n- Use `print()` with no arguments to move to next line",
              "instructions": "Build a **Pattern Generator** that creates visual patterns using for loops.\n\n**Your task:**\n\n- Ask the user how many rows they want\n<li>Create 3 different patterns:\n<li>**Pattern 1 (Right Triangle):** Growing stars<pre>*\n**\n***\n****</pre></li><li>**Pattern 2 (Square):** Same number of stars per row<pre>*****\n*****\n*****</pre></li><li>**Pattern 3 (Numbers):** Print row number<pre>1\n22\n333\n4444</pre></li>\n</li>\n**Example output:**\n\n<pre>=== Pattern Generator ===\n\nHow many rows? 4\n\nPattern 1 - Right Triangle:\n*\n**\n***\n****\n\nPattern 2 - Square:\n****\n****\n****\n****\n\nPattern 3 - Numbers:\n1\n22\n333\n4444\n</pre>**Hints:**\n\n- Use nested loops (loop inside a loop) for columns\n- Outer loop controls rows, inner loop controls how many stars/numbers per row\n- Use `print(\"*\", end=\"\")` to print without newline\n- Use `print()` with no arguments to move to next line",
              "starterCode": "# Pattern Generator\n# Create visual patterns using for loops\n\nprint(\"=== Pattern Generator ===\")\nprint()\n\n# Get user input\nrows = int(input(\"How many rows? \"))\n\nprint()\n\n# YOUR CODE HERE:\n# Pattern 1: Right Triangle (growing)\nprint(\"Pattern 1 - Right Triangle:\")\n\nfor i in range(1, ):  # Row numbers 1, 2, 3, ..., rows\n    for j in range():  # Print i stars\n        print(\"*\", end=\"\")  # Print star without newline\n    print()  # Move to next line\n\nprint()\n\n# Pattern 2: Square (same width each row)\nprint(\"Pattern 2 - Square:\")\n\nfor i in range():  # rows times\n    for j in range():  # rows stars per row\n        print()\n    print()  # Move to next line\n\nprint()\n\n# Pattern 3: Numbers (print row number repeatedly)\nprint(\"Pattern 3 - Numbers:\")\n\nfor i in range(1, ):  # Row numbers\n    for j in range():  # Print number i times\n        print(, end=\"\")  # Print the row number\n    print()  # Move to next line",
              "solution": "# Pattern Generator - SOLUTION\n# Create visual patterns using for loops\n\nprint(\"=== Pattern Generator ===\")\nprint()\n\n# Get user input\nrows = int(input(\"How many rows? \"))\n\nprint()\n\n# Pattern 1: Right Triangle (growing)\nprint(\"Pattern 1 - Right Triangle:\")\n\nfor i in range(1, rows + 1):  # 1, 2, 3, ..., rows\n    for j in range(i):  # Print i stars (row 1 = 1 star, row 2 = 2 stars, etc.)\n        print(\"*\", end=\"\")  # Print star without newline\n    print()  # Move to next line after each row\n\nprint()\n\n# Pattern 2: Square (same width each row)\nprint(\"Pattern 2 - Square:\")\n\nfor i in range(rows):  # Repeat rows times\n    for j in range(rows):  # Print rows stars per row\n        print(\"*\", end=\"\")\n    print()  # Move to next line\n\nprint()\n\n# Pattern 3: Numbers (print row number repeatedly)\nprint(\"Pattern 3 - Numbers:\")\n\nfor i in range(1, rows + 1):  # 1, 2, 3, ..., rows\n    for j in range(i):  # Print number i times\n        print(i, end=\"\")  # Print the row number\n    print()  # Move to next line",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For Pattern 1: outer loop range(1, rows+1), inner loop range(i). For Pattern 2: both loops use range(rows). For Pattern 3: outer loop range(1, rows+1), inner loop range(i), print i (not *). Remember: range(n) excludes n, so use range(1, rows+1) to get 1 through rows."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-04-lesson-03",
          "title": "Loop Control: break, continue, and pass",
          "moduleId": "module-04",
          "order": 3,
          "estimatedMinutes": 23,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're searching through a stack of 100 papers for one specific document:\n\n<ul style='background-color: #f0f0f0; padding: 15px;'>- **Normal loop:** Check all 100 papers, even after finding the one you need (wasteful!)\n- **With break:** Stop immediately when you find it - paper #23? Done! Skip the remaining 77.\n\nOr imagine processing a list of test scores, but some entries are marked as \"invalid\":\n\n<ul style='background-color: #e3f2fd; padding: 15px;'>- **Normal loop:** Try to process every entry, causing errors on invalid ones\n- **With continue:** Skip invalid entries, continue with the next valid one\n\nThis is **loop control** - fine-tuning how loops execute with three special statements:\n\n- **break**: \"Stop the loop entirely and exit\"\n- **continue**: \"Skip the rest of this iteration and move to the next\"\n- **pass**: \"Do nothing, but don't leave this block empty\"\n\n### Real-World Examples:\n\n- **Password attempts (break)**:\nWHILE attempts < 3:\n&nbsp;&nbsp;&nbsp;&nbsp;Get password\n&nbsp;&nbsp;&nbsp;&nbsp;IF correct ‚Üí **break** (exit loop)\n&nbsp;&nbsp;&nbsp;&nbsp;attempts++\n- **Processing records (continue)**:\nFOR each record:\n&nbsp;&nbsp;&nbsp;&nbsp;IF record is corrupted ‚Üí **continue** (skip it)\n&nbsp;&nbsp;&nbsp;&nbsp;Process valid record\n- **Menu system (break)**:\nWHILE True:\n&nbsp;&nbsp;&nbsp;&nbsp;Show menu\n&nbsp;&nbsp;&nbsp;&nbsp;Get choice\n&nbsp;&nbsp;&nbsp;&nbsp;IF choice == \"quit\" ‚Üí **break**\n- **Data filtering (continue)**:\nFOR each email:\n&nbsp;&nbsp;&nbsp;&nbsp;IF is_spam ‚Üí **continue**\n&nbsp;&nbsp;&nbsp;&nbsp;Add to inbox\n\nThese statements give you surgical precision over loop execution!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Finding a Number (break) ===\nChecking 1\nChecking 2\nChecking 3\nChecking 4\nChecking 5\nFound 5! Stopping search.\nLoop ended\n\n=== Printing Odd Numbers (continue) ===\n1\n3\n5\n7\n9\n\n=== Password System (3 attempts) ===\nEnter password: wrong\n‚ùå Incorrect. 2 attempts remaining.\nEnter password: nope\n‚ùå Incorrect. 1 attempts remaining.\nEnter password: python123\n‚úì Access granted!\n\n=== Processing Valid Scores ===\nSkipping invalid score: -1\nProcessing valid score: 85\nProcessing valid score: 92\nSkipping invalid score: 150\nProcessing valid score: 78\nSkipping invalid score: -5\nProcessing valid score: 88\n\nAverage of valid scores: 85.75\n\n=== Searching for a Value (with else) ===\n6 not found in the list\n\n=== Using pass ===\nProcessing 0\nProcessing 1\nProcessing 3\nProcessing 4\n\n=== Prime Number Checker ===\n17 is prime!\n\n=== Simple Menu ===\n1. Say Hello\n2. Say Goodbye\n3. Exit\nChoose an option: 1\nHello!\n\n1. Say Hello\n2. Say Goodbye\n3. Exit\nChoose an option: 3\nExiting program...\nProgram ended.\n```",
              "code": "# Loop Control: break, continue, and pass\n\n# Example 1: break - Exit Loop Early\nprint(\"=== Finding a Number (break) ===\")\n\nfor num in range(1, 11):\n    print(f\"Checking {num}\")\n    \n    if num == 5:\n        print(\"Found 5! Stopping search.\")\n        break  # Exit the loop immediately\n    \nprint(\"Loop ended\\n\")\n# Output: Checks 1-5, then stops\n\n# Example 2: continue - Skip Current Iteration\nprint(\"=== Printing Odd Numbers (continue) ===\")\n\nfor num in range(1, 11):\n    if num % 2 == 0:  # If even\n        continue  # Skip to next iteration\n    \n    print(num)  # Only prints odd numbers\n\nprint()\n\n# Example 3: Practical break - Password System\nprint(\"=== Password System (3 attempts) ===\")\n\ncorrect_password = \"python123\"\nattempts = 0\nmax_attempts = 3\n\nwhile attempts < max_attempts:\n    password = input(\"Enter password: \")\n    attempts = attempts + 1\n    \n    if password == correct_password:\n        print(\"‚úì Access granted!\")\n        break  # Stop asking for password\n    else:\n        remaining = max_attempts - attempts\n        if remaining > 0:\n            print(f\"‚ùå Incorrect. {remaining} attempts remaining.\")\n\nif attempts == max_attempts and password != correct_password:\n    print(\"üîí Account locked!\")\n\nprint()\n\n# Example 4: continue for Data Filtering\nprint(\"=== Processing Valid Scores ===\")\n\nscores = [85, -1, 92, 150, 78, -5, 88]  # Some invalid scores\n\ntotal = 0\nvalid_count = 0\n\nfor score in scores:\n    # Skip invalid scores (negative or > 100)\n    if score < 0 or score > 100:\n        print(f\"Skipping invalid score: {score}\")\n        continue  # Skip to next iteration\n    \n    # Process valid score\n    print(f\"Processing valid score: {score}\")\n    total = total + score\n    valid_count = valid_count + 1\n\naverage = total / valid_count\nprint(f\"\\nAverage of valid scores: {average}\")\nprint()\n\n# Example 5: Loop with else Clause\nprint(\"=== Searching for a Value (with else) ===\")\n\nnumbers = [1, 3, 5, 7, 9]\nsearch_for = 6\n\nfor num in numbers:\n    if num == search_for:\n        print(f\"Found {search_for}!\")\n        break\nelse:\n    # Runs only if loop completed without break\n    print(f\"{search_for} not found in the list\")\n\nprint()\n\n# Example 6: pass - Placeholder\nprint(\"=== Using pass ===\")\n\nfor i in range(5):\n    if i == 2:\n        pass  # TODO: Add special handling later\n    else:\n        print(f\"Processing {i}\")\n\nprint()\n\n# Example 7: Prime Number Checker (break with else)\nprint(\"=== Prime Number Checker ===\")\n\nnumber = 17\n\nif number < 2:\n    print(f\"{number} is not prime\")\nelse:\n    for i in range(2, number):\n        if number % i == 0:\n            print(f\"{number} is not prime (divisible by {i})\")\n            break\n    else:\n        # Only runs if loop completed without break\n        print(f\"{number} is prime!\")\n\nprint()\n\n# Example 8: Menu System with break\nprint(\"=== Simple Menu ===\")\n\nwhile True:  # Infinite loop\n    print(\"\\n1. Say Hello\")\n    print(\"2. Say Goodbye\")\n    print(\"3. Exit\")\n    \n    choice = input(\"Choose an option: \")\n    \n    if choice == \"1\":\n        print(\"Hello!\")\n    elif choice == \"2\":\n        print(\"Goodbye!\")\n    elif choice == \"3\":\n        print(\"Exiting program...\")\n        break  # Exit the infinite loop\n    else:\n        print(\"Invalid choice!\")\n\nprint(\"Program ended.\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### The break Statement:\n```\nfor item in sequence:\n    if condition:\n        break  # Exit loop immediately\n    # Rest of loop body\n# Code here runs after break\n\n```\n**What break does:**\n\n- Immediately exits the innermost loop\n- Skips any remaining iterations\n- Continues with code after the loop\n\n#### Visual Flow:\n```\nfor num in range(1, 6):\n    if num == 3:\n        break  # ‚Üê Exit here\n    print(num)\nprint(\"Done\")\n\n# Output:\n# 1\n# 2\n# Done\n# (Never prints 3, 4, 5 - loop exited early)\n\n```\n### The continue Statement:\n```\nfor item in sequence:\n    if condition:\n        continue  # Skip rest, go to next iteration\n    # This code is skipped when continue runs\n    process(item)\n\n```\n**What continue does:**\n\n- Skips remaining code in current iteration\n- Jumps to the next iteration\n- Loop continues normally\n\n#### Visual Flow:\n```\nfor num in range(1, 6):\n    if num == 3:\n        continue  # ‚Üê Skip when num is 3\n    print(num)\n\n# Output:\n# 1\n# 2\n# 4  (skipped 3!)\n# 5\n# (Loop continued, just skipped one iteration)\n\n```\n### The pass Statement:\n```\nfor item in sequence:\n    if condition:\n        pass  # Do nothing (placeholder)\n    else:\n        process(item)\n\n```\n**What pass does:**\n\n- Literally nothing - it's a placeholder\n- Used when syntax requires a statement but you have nothing to do\n- Common in early development (\"TODO: implement this later\")\n\n#### Example Uses:\n```\n# Placeholder for future code:\nfor item in data:\n    if item.needs_special_handling():\n        pass  # TODO: Add special handling\n    else:\n        process(item)\n\n# Empty function (syntax requires a body):\ndef coming_soon():\n    pass  # Will implement later\n\n# Empty if block:\nif condition:\n    pass  # Nothing to do for this case\nelse:\n    do_something()\n\n```\n### Loop else Clause (Advanced):\n```\nfor item in sequence:\n    if found_what_we_need:\n        break\nelse:\n    # Runs ONLY if loop completed without break\n    print(\"Didn't find it\")\n\n```\n**How it works:**\n\n- else block runs if loop finishes normally (no break)\n- else block is skipped if break was executed\n- Useful for search operations\n\n#### Example - Searching:\n```\nstudents = [\"Alice\", \"Bob\", \"Charlie\"]\nsearch_for = \"David\"\n\nfor student in students:\n    if student == search_for:\n        print(f\"Found {search_for}!\")\n        break\nelse:\n    # Only runs if we never broke\n    print(f\"{search_for} not in class\")\n\n# Output: David not in class\n\n```\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Scenario</th><th>break executed?</th><th>else runs?</th></tr><tr><td>Found \"Alice\"</td><td>Yes</td><td>No</td></tr><tr><td>Found \"David\" (not in list)</td><td>No</td><td>Yes</td></tr></table>### break vs continue vs return:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Statement</th><th>Exits</th><th>Effect</th></tr><tr><td>`break`</td><td>Loop</td><td>Exit loop, continue after it</td></tr><tr><td>`continue`</td><td>Current iteration</td><td>Skip to next iteration</td></tr><tr><td>`return`</td><td>Function</td><td>Exit function entirely (Module 6)</td></tr><tr><td>`pass`</td><td>Nothing</td><td>Do nothing, continue normally</td></tr></table>### Common Patterns:\n#### 1. Early Exit (break)\n```\n# Search and stop when found\nfor item in large_list:\n    if item == target:\n        print(\"Found it!\")\n        break  # No need to keep searching\n\n```\n#### 2. Skip Invalid Data (continue)\n```\n# Process only valid entries\nfor entry in data:\n    if not entry.is_valid():\n        continue  # Skip invalid entries\n    process(entry)  # Only valid ones reach here\n\n```\n#### 3. User-Controlled Loop (break)\n```\n# Infinite loop until user quits\nwhile True:\n    action = input(\"Command: \")\n    if action == \"quit\":\n        break\n    handle(action)\n\n```\n#### 4. Flag Alternative (else)\n```\n# Without else (old way):\nfound = False\nfor item in items:\n    if item == target:\n        found = True\n        break\nif not found:\n    print(\"Not found\")\n\n# With else (cleaner):\nfor item in items:\n    if item == target:\n        break\nelse:\n    print(\"Not found\")\n\n```\n### Common Mistakes:\n\n<li>**Using break/continue outside loops**:```\n# ERROR:\nif condition:\n    break  # SyntaxError! break only works in loops\n\n```\n</li><li>**Forgetting break in infinite loops**:```\n# INFINITE LOOP:\nwhile True:\n    print(\"Running forever!\")\n    # Forgot break statement!\n\n# CORRECT:\nwhile True:\n    if should_stop:\n        break\n\n```\n</li><li>**Confusing break with return**:```\ndef search(items):\n    for item in items:\n        if item == target:\n            break  # Exits loop, but stays in function\n    print(\"After loop\")  # This still runs\n    \n    # Use return to exit function:\n    for item in items:\n        if item == target:\n            return item  # Exits function entirely\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using break/continue Outside a Loop**\n```python\n# WRONG - break only works inside loops!\nif condition:\n    break  # SyntaxError: 'break' outside loop\n\n# break/continue MUST be inside for or while:\nfor item in items:\n    if condition:\n        break  # This is valid\n```\n\n**2. Forgetting break in Infinite Loops**\n```python\n# WRONG - Runs forever!\nwhile True:\n    print(\"Help, I can't stop!\")\n    # Missing break!\n\n# CORRECT - Always have an exit condition\nwhile True:\n    user_input = input(\"Continue? (y/n): \")\n    if user_input == 'n':\n        break  # Exit point\n```\n\n**3. Confusing break vs return**\n```python\ndef find_item(items, target):\n    for item in items:\n        if item == target:\n            break  # Only exits loop!\n    print(\"This still runs!\")  # After loop\n    return None\n\n# If you want to exit the function entirely:\ndef find_item(items, target):\n    for item in items:\n        if item == target:\n            return item  # Exits function immediately!\n    return None  # Only if not found\n```\n\n**4. Misunderstanding Loop else**\n```python\n# WRONG thinking: \"else runs if the loop body doesn't run\"\n# CORRECT: else runs if loop completes WITHOUT break\n\nfor i in range(3):\n    print(i)\nelse:\n    print(\"Loop finished\")  # This RUNS! (no break)\n\nfor i in range(3):\n    if i == 1:\n        break\nelse:\n    print(\"Loop finished\")  # This does NOT run! (break)\n```\n\n**5. continue Skips More Than Expected**\n```python\n# WRONG - continue skips ALL remaining code!\nfor num in range(5):\n    if num == 2:\n        continue\n        print(\"This never prints for 2\")\n    print(num)  # Also skipped when num == 2\n\n# The continue skips EVERYTHING below it in that iteration\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **break** exits the loop immediately, skipping remaining iterations\n- **continue** skips the rest of current iteration, moves to next\n- **pass** does nothing (placeholder for future code)\n- **Loop else** runs only if loop completes without break\n- **Use break for**: Early exit, search operations, user-controlled loops\n- **Use continue for**: Skipping invalid data, filtering, conditional processing\n- **Use else for**: Search validation, avoiding flag variables\n- **break/continue work in**: Both for and while loops\n- **They only affect**: The innermost loop they're in\n\n### Quick Reference:\n```\n# break: \"Stop the loop\"\nfor item in items:\n    if found_it:\n        break  # Exit loop\n\n# continue: \"Skip to next iteration\"\nfor item in items:\n    if skip_this:\n        continue  # Next iteration\n    process(item)\n\n# pass: \"Do nothing\"\nfor item in items:\n    if special_case:\n        pass  # Placeholder\n    else:\n        process(item)\n\n# else: \"If loop wasn't broken\"\nfor item in items:\n    if item == target:\n        break\nelse:\n    print(\"Not found\")  # Only if no break\n\n```\n### When to Use Each:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Scenario</th><th>Statement</th></tr><tr><td>Found what you need</td><td>break</td></tr><tr><td>Skip invalid/unwanted items</td><td>continue</td></tr><tr><td>Empty block placeholder</td><td>pass</td></tr><tr><td>Detect \"not found\" case</td><td>else</td></tr></table>### Before Moving On:\nMake sure you can:\n\n- Use break to exit loops early\n- Use continue to skip iterations\n- Understand when loop else executes\n- Explain the difference between break and continue\n- Choose the right control statement for each scenario\n\n### Coming Up Next:\nIn **Lesson 4: Nested Loops**, you'll learn to:\n\n- Put loops inside other loops\n- Create 2D grids and patterns\n- Process multi-dimensional data\n- Combine break/continue with nesting\n- Build multiplication tables, calendars, game boards\n\nNested loops unlock the power to work with grids, matrices, and complex data structures!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-04-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Number Search and Statistics Program** that processes a list of numbers with the following features:\n\n- Search for a specific number and stop when found (break)\n- Skip negative numbers when calculating average (continue)\n- Use loop else to report if number wasn't found\n\n**Requirements:**\n\n- Ask user for a number to search for\n- Loop through the list: [23, -5, 42, 17, -3, 8, 56, 12, -9, 34]\n- If the number is found, print its position and stop searching\n- While searching, skip negative numbers when calculating the average\n- If not found, print a \"not found\" message\n- Display the average of positive numbers\n\n**Example output (searching for 42):**\n\n<pre>=== Number Search and Statistics ===\n\nEnter a number to search for: 42\n\nSearching...\nSkipping negative: -5\nFound 42 at position 2!\n\nAverage of positive numbers encountered: 32.5\n(Processed: 23, 42)\n</pre>**Example output (searching for 99):**\n\n<pre>Enter a number to search for: 99\n\nSearching...\nSkipping negative: -5\nSkipping negative: -3\nSkipping negative: -9\n99 not found in the list.\n\nAverage of positive numbers: 27.42\n(Processed all: 23, 42, 17, 8, 56, 12, 34)\n</pre>",
              "instructions": "Build a **Number Search and Statistics Program** that processes a list of numbers with the following features:\n\n- Search for a specific number and stop when found (break)\n- Skip negative numbers when calculating average (continue)\n- Use loop else to report if number wasn't found\n\n**Requirements:**\n\n- Ask user for a number to search for\n- Loop through the list: [23, -5, 42, 17, -3, 8, 56, 12, -9, 34]\n- If the number is found, print its position and stop searching\n- While searching, skip negative numbers when calculating the average\n- If not found, print a \"not found\" message\n- Display the average of positive numbers\n\n**Example output (searching for 42):**\n\n<pre>=== Number Search and Statistics ===\n\nEnter a number to search for: 42\n\nSearching...\nSkipping negative: -5\nFound 42 at position 2!\n\nAverage of positive numbers encountered: 32.5\n(Processed: 23, 42)\n</pre>**Example output (searching for 99):**\n\n<pre>Enter a number to search for: 99\n\nSearching...\nSkipping negative: -5\nSkipping negative: -3\nSkipping negative: -9\n99 not found in the list.\n\nAverage of positive numbers: 27.42\n(Processed all: 23, 42, 17, 8, 56, 12, 34)\n</pre>",
              "starterCode": "# Number Search and Statistics Program\n# Uses break, continue, and loop else\n\nprint(\"=== Number Search and Statistics ===\")\nprint()\n\n# The data\nnumbers = [23, -5, 42, 17, -3, 8, 56, 12, -9, 34]\n\n# Get search target\ntarget = int(input(\"Enter a number to search for: \"))\n\nprint(\"\\nSearching...\")\n\n# YOUR CODE HERE:\n# Initialize variables for statistics\ntotal = 0\ncount = 0\nprocessed = []  # Track which positive numbers we processed\n\n# Loop through the list with enumeration (position tracking)\nfor position, num in enumerate(numbers):\n    \n    # Skip negative numbers (continue)\n    if :  # If negative\n        print(f\"Skipping negative: {num}\")\n        continue  # Skip to next iteration\n    \n    # Add to running total for positive numbers\n    total = total + num\n    count = count + 1\n    processed.append(num)\n    \n    # Check if this is the target (break)\n    if :  # If found\n        print(f\"Found {target} at position {position}!\")\n        break  # Exit loop early\n\nelse:\n    # Runs only if loop completed without break\n    print(f\"{target} not found in the list.\")\n\n# Calculate and display average\nif count > 0:\n    average = total / count\n    print(f\"\\nAverage of positive numbers encountered: {average:.2f}\")\n    print(f\"(Processed: {', '.join(map(str, processed))})\")\nelse:\n    print(\"\\nNo positive numbers encountered.\")",
              "solution": "# Number Search and Statistics Program - SOLUTION\n# Uses break, continue, and loop else\n\nprint(\"=== Number Search and Statistics ===\")\nprint()\n\n# The data\nnumbers = [23, -5, 42, 17, -3, 8, 56, 12, -9, 34]\n\n# Get search target\ntarget = int(input(\"Enter a number to search for: \"))\n\nprint(\"\\nSearching...\")\n\n# Initialize variables for statistics\ntotal = 0\ncount = 0\nprocessed = []  # Track which positive numbers we processed\n\n# Loop through the list with enumeration (position tracking)\nfor position, num in enumerate(numbers):\n    \n    # Skip negative numbers (continue)\n    if num < 0:\n        print(f\"Skipping negative: {num}\")\n        continue  # Skip to next iteration\n    \n    # Add to running total for positive numbers\n    total = total + num\n    count = count + 1\n    processed.append(num)\n    \n    # Check if this is the target (break)\n    if num == target:\n        print(f\"Found {target} at position {position}!\")\n        break  # Exit loop early\n\nelse:\n    # Runs only if loop completed without break\n    print(f\"{target} not found in the list.\")\n\n# Calculate and display average\nif count > 0:\n    average = total / count\n    print(f\"\\nAverage of positive numbers encountered: {average:.2f}\")\n    print(f\"(Processed: {', '.join(map(str, processed))})\")\nelse:\n    print(\"\\nNo positive numbers encountered.\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For skipping negatives, check if num < 0 and use continue. For finding the target, check if num == target and use break. The else clause after the for loop will automatically run only if break was never executed. Use enumerate(numbers) to get both position and value."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-04-lesson-04",
          "title": "Nested Loops: Loops Within Loops",
          "moduleId": "module-04",
          "order": 4,
          "estimatedMinutes": 26,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're organizing a classroom seating chart with 5 rows and 6 seats per row:\n\n<pre style='background-color: #f0f0f0; padding: 10px;'>FOR each row (1 to 5):        ‚Üê Outer loop (rows)\n    FOR each seat (1 to 6):   ‚Üê Inner loop (columns)\n        Assign a student\n        Print seat position\n    Move to next row\n</pre>This is a **nested loop** - a loop inside another loop. The outer loop runs once per row, and for EACH row, the inner loop runs completely through all seats.\n\n### How It Works:\n\n- **Outer loop**: Controls the number of times the inner loop runs\n- **Inner loop**: Runs completely for each iteration of the outer loop\n- **Total iterations**: Outer √ó Inner (5 rows √ó 6 seats = 30 total assignments)\n\n### Visual Example:\n<pre>Outer loop (row 1):\n  Inner loop: seat 1, 2, 3, 4, 5, 6\nOuter loop (row 2):\n  Inner loop: seat 1, 2, 3, 4, 5, 6\nOuter loop (row 3):\n  Inner loop: seat 1, 2, 3, 4, 5, 6\n...\n</pre>### Real-World Examples:\n\n- **Game board (Chess, Checkers)**:\nFOR each row (1-8):\n&nbsp;&nbsp;&nbsp;&nbsp;FOR each column (A-H):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Draw square\n- **Multiplication table**:\nFOR each number (1-10):\n&nbsp;&nbsp;&nbsp;&nbsp;FOR each multiplier (1-10):\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Print number √ó multiplier\n- **Image pixels**:\nFOR each row of pixels:\n&nbsp;&nbsp;&nbsp;&nbsp;FOR each column of pixels:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Set pixel color\n- **Calendar month**:\nFOR each week:\n&nbsp;&nbsp;&nbsp;&nbsp;FOR each day in week:\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Display date\n\nNested loops are essential for working with 2D data - grids, tables, images, game boards, spreadsheets!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Rectangle Pattern (3x5) ===\n*****\n*****\n*****\n\n=== Right Triangle ===\n*\n**\n***\n****\n*****\n\n=== Multiplication Table (1-5) ===\n1x1= 1  1x2= 2  1x3= 3  1x4= 4  1x5= 5  1x6= 6  1x7= 7  1x8= 8  1x9= 9  1x10=10  \n2x1= 2  2x2= 4  2x3= 6  2x4= 8  2x5=10  2x6=12  2x7=14  2x8=16  2x9=18  2x10=20  \n3x1= 3  3x2= 6  3x3= 9  3x4=12  3x5=15  3x6=18  3x7=21  3x8=24  3x9=27  3x10=30  \n4x1= 4  4x2= 8  4x3=12  4x4=16  4x5=20  4x6=24  4x7=28  4x8=32  4x9=36  4x10=40  \n5x1= 5  5x2=10  5x3=15  5x4=20  5x5=25  5x6=30  5x7=35  5x8=40  5x9=45  5x10=50  \n\n=== Coordinate Grid (3x3) ===\n(1,1) (1,2) (1,3) \n(2,1) (2,2) (2,3) \n(3,1) (3,2) (3,3) \n\n=== Inverted Triangle ===\n*****\n****\n***\n**\n*\n\n=== Numbered Grid ===\n 1  2  3 \n 4  5  6 \n 7  8  9 \n10 11 12 \n\n=== Pyramid Pattern ===\n    *\n   ***\n  *****\n *******\n*********\n\n=== break Only Affects Inner Loop ===\nOuter loop: 0\n  Inner: 0\n  Inner: 1\n  Breaking inner at 2\n  Outer continues...\nOuter loop: 1\n  Inner: 0\n  Inner: 1\n  Breaking inner at 2\n  Outer continues...\nOuter loop: 2\n  Inner: 0\n  Inner: 1\n  Breaking inner at 2\n  Outer continues...\n\n=== Full Times Table ===\n       1   2   3   4   5   6   7   8   9  10\n    ----------------------------------------\n 1 |   1   2   3   4   5   6   7   8   9  10\n 2 |   2   4   6   8  10  12  14  16  18  20\n 3 |   3   6   9  12  15  18  21  24  27  30\n 4 |   4   8  12  16  20  24  28  32  36  40\n 5 |   5  10  15  20  25  30  35  40  45  50\n 6 |   6  12  18  24  30  36  42  48  54  60\n 7 |   7  14  21  28  35  42  49  56  63  70\n 8 |   8  16  24  32  40  48  56  64  72  80\n 9 |   9  18  27  36  45  54  63  72  81  90\n10 |  10  20  30  40  50  60  70  80  90 100\n\n=== Iterating 2D List ===\nRow 1, Seat 1: Alice\nRow 1, Seat 2: Bob\nRow 1, Seat 3: Charlie\nRow 2, Seat 1: David\nRow 2, Seat 2: Eve\nRow 2, Seat 3: Frank\nRow 3, Seat 1: Grace\nRow 3, Seat 2: Henry\nRow 3, Seat 3: Iris\n```",
              "code": "# Nested Loops: Loops Within Loops\n\n# Example 1: Basic Nested Loop (Rectangle)\nprint(\"=== Rectangle Pattern (3x5) ===\")\n\nfor row in range(3):  # Outer loop: 3 rows\n    for col in range(5):  # Inner loop: 5 columns per row\n        print(\"*\", end=\"\")  # Print star without newline\n    print()  # Newline after each row\n\n# Output:\n# *****\n# *****\n# *****\n\nprint()\n\n# Example 2: Right Triangle (Growing Rows)\nprint(\"=== Right Triangle ===\")\n\nfor row in range(1, 6):  # Rows: 1, 2, 3, 4, 5\n    for col in range(row):  # Columns: matches row number\n        print(\"*\", end=\"\")\n    print()\n\n# Output:\n# *\n# **\n# ***\n# ****\n# *****\n\nprint()\n\n# Example 3: Multiplication Table\nprint(\"=== Multiplication Table (1-5) ===\")\n\nfor num in range(1, 6):  # Numbers 1-5\n    for mult in range(1, 11):  # Multipliers 1-10\n        result = num * mult\n        print(f\"{num}x{mult}={result:2}\", end=\"  \")  # :2 pads to 2 digits\n    print()  # Newline after each number's row\n\nprint()\n\n# Example 4: Coordinates Grid\nprint(\"=== Coordinate Grid (3x3) ===\")\n\nfor x in range(1, 4):  # x coordinates: 1, 2, 3\n    for y in range(1, 4):  # y coordinates: 1, 2, 3\n        print(f\"({x},{y})\", end=\" \")\n    print()\n\n# Output:\n# (1,1) (1,2) (1,3)\n# (2,1) (2,2) (2,3)\n# (3,1) (3,2) (3,3)\n\nprint()\n\n# Example 5: Inverted Triangle\nprint(\"=== Inverted Triangle ===\")\n\nfor row in range(5, 0, -1):  # 5, 4, 3, 2, 1 (countdown)\n    for col in range(row):\n        print(\"*\", end=\"\")\n    print()\n\n# Output:\n# *****\n# ****\n# ***\n# **\n# *\n\nprint()\n\n# Example 6: Numbered Grid\nprint(\"=== Numbered Grid ===\")\n\nnumber = 1\n\nfor row in range(4):  # 4 rows\n    for col in range(3):  # 3 columns\n        print(f\"{number:2}\", end=\" \")  # Print with padding\n        number = number + 1\n    print()\n\n# Output:\n#  1  2  3\n#  4  5  6\n#  7  8  9\n# 10 11 12\n\nprint()\n\n# Example 7: Pyramid Pattern (Centered)\nprint(\"=== Pyramid Pattern ===\")\n\nheight = 5\n\nfor row in range(1, height + 1):\n    # Print leading spaces\n    for space in range(height - row):\n        print(\" \", end=\"\")\n    \n    # Print stars\n    for star in range(2 * row - 1):\n        print(\"*\", end=\"\")\n    \n    print()  # Newline\n\n# Output:\n#     *\n#    ***\n#   *****\n#  *******\n# *********\n\nprint()\n\n# Example 8: break/continue in Nested Loops\nprint(\"=== break Only Affects Inner Loop ===\")\n\nfor outer in range(3):\n    print(f\"Outer loop: {outer}\")\n    \n    for inner in range(5):\n        if inner == 2:\n            print(f\"  Breaking inner at {inner}\")\n            break  # Only exits INNER loop\n        print(f\"  Inner: {inner}\")\n    \n    print(\"  Outer continues...\")  # This still runs!\n\nprint()\n\n# Example 9: Times Table (Full 10x10)\nprint(\"=== Full Times Table ===\")\n\n# Header row\nprint(\"    \", end=\"\")\nfor i in range(1, 11):\n    print(f\"{i:4}\", end=\"\")\nprint()\nprint(\"    \" + \"-\" * 40)\n\n# Table rows\nfor row in range(1, 11):\n    print(f\"{row:2} |\", end=\"\")\n    for col in range(1, 11):\n        product = row * col\n        print(f\"{product:4}\", end=\"\")\n    print()\n\nprint()\n\n# Example 10: Nested List Iteration (Preview)\nprint(\"=== Iterating 2D List ===\")\n\nclassroom = [\n    [\"Alice\", \"Bob\", \"Charlie\"],\n    [\"David\", \"Eve\", \"Frank\"],\n    [\"Grace\", \"Henry\", \"Iris\"]\n]\n\nfor row_num, row in enumerate(classroom):\n    for seat_num, student in enumerate(row):\n        print(f\"Row {row_num + 1}, Seat {seat_num + 1}: {student}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Nested Loop Anatomy:\n```\nfor outer_var in outer_sequence:    # Outer loop\n    # Outer loop body\n    \n    for inner_var in inner_sequence:  # Inner loop\n        # Inner loop body\n        # Can use both outer_var and inner_var here\n    \n    # Back to outer loop\n\n```\n#### Execution Flow:\n\n- Outer loop starts (first iteration)\n- Inner loop runs completely (all its iterations)\n- Outer loop continues (second iteration)\n- Inner loop runs completely again\n- Repeat until outer loop finishes\n\n#### Visual Example:\n```\nfor row in range(3):      # Outer: rows\n    for col in range(2):  # Inner: columns\n        print(\"*\", end=\"\")\n    print()  # Newline\n\n# Execution trace:\n# row=0: col=0 (*), col=1 (*), newline\n# row=1: col=0 (*), col=1 (*), newline\n# row=2: col=0 (*), col=1 (*), newline\n\n# Output:\n# **\n# **\n# **\n\n```\n### Total Iterations:\n```\nOuter iterations √ó Inner iterations = Total\n\nfor i in range(3):    # Runs 3 times\n    for j in range(4):  # Runs 4 times per outer\n        print(\"X\")\n\n# Total: 3 √ó 4 = 12 times \"X\" is printed\n\n```\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Outer (i)</th><th>Inner (j) iterations</th><th>Total so far</th></tr><tr><td>0</td><td>0, 1, 2, 3</td><td>4</td></tr><tr><td>1</td><td>0, 1, 2, 3</td><td>8</td></tr><tr><td>2</td><td>0, 1, 2, 3</td><td>12</td></tr></table>### Common Patterns:\n#### 1. Rectangle/Grid (Fixed Dimensions)\n```\nfor row in range(rows):    # Fixed number of rows\n    for col in range(cols):  # Fixed number per row\n        print(\"*\", end=\"\")\n    print()\n\n```\n#### 2. Right Triangle (Growing)\n```\nfor row in range(1, n+1):  # Row numbers\n    for col in range(row):   # Number of cols = row number\n        print(\"*\", end=\"\")\n    print()\n\n```\n#### 3. Inverted Triangle (Shrinking)\n```\nfor row in range(n, 0, -1):  # Countdown\n    for col in range(row):     # Decreasing columns\n        print(\"*\", end=\"\")\n    print()\n\n```\n#### 4. Multiplication Table\n```\nfor num in range(1, 11):     # Numbers 1-10\n    for mult in range(1, 11):  # Times 1-10\n        print(num * mult, end=\" \")\n    print()\n\n```\n#### 5. Coordinate Grid\n```\nfor x in range(width):\n    for y in range(height):\n        process_cell(x, y)\n\n```\n### break and continue in Nested Loops:\n**Critical:** break/continue only affect the innermost loop they're in!\n\n```\nfor outer in range(3):\n    print(f\"Outer: {outer}\")\n    \n    for inner in range(5):\n        if inner == 2:\n            break  # Only exits THIS (inner) loop\n        print(f\"  Inner: {inner}\")\n    \n    # Outer loop continues!\n    print(\"  Back to outer\")\n\n# Output:\n# Outer: 0\n#   Inner: 0\n#   Inner: 1\n#   Back to outer\n# Outer: 1\n#   Inner: 0\n#   Inner: 1\n#   Back to outer\n# Outer: 2\n#   Inner: 0\n#   Inner: 1\n#   Back to outer\n\n```\nTo break out of multiple loops, you need a different strategy:\n\n```\n# Method 1: Flag variable\nbreak_outer = False\n\nfor outer in range(10):\n    for inner in range(10):\n        if condition:\n            break_outer = True\n            break\n    if break_outer:\n        break\n\n# Method 2: Function with return (better!)\ndef search_2d():\n    for outer in range(10):\n        for inner in range(10):\n            if found_it:\n                return  # Exits function (and all loops)\n\n```\n### Performance Considerations:\nNested loops can get expensive quickly:\n\n```\nfor i in range(100):      # 100 times\n    for j in range(100):  # √ó 100 times\n        # Total: 10,000 iterations!\n\nfor i in range(1000):     # 1,000 times\n    for j in range(1000): # √ó 1,000 times\n        # Total: 1,000,000 iterations!\n\n```\n**Big O Notation (preview):**\n\n- Single loop: O(n) - linear time\n- Nested loop: O(n¬≤) - quadratic time (much slower!)\n- Triple nested: O(n¬≥) - cubic time (very slow!)\n\n**Best practices:**\n\n- Minimize nesting depth (2-3 levels max)\n- Use break to exit early when possible\n- Consider alternatives for very large datasets\n\n### Common Mistakes:\n\n<li>**Forgetting newline after inner loop**:```\n# WRONG: Everything on one line\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n# Output: *************** (all one line!)\n\n# CORRECT: Newline after each row\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n    print()  # Newline after inner loop\n\n```\n</li><li>**Using wrong variable in inner loop**:```\n# WRONG:\nfor row in range(5):\n    for col in range(row):  # Uses 'row', not a fixed number\n        print(row, end=\"\")  # Prints row number, not col!\n\n# If you want a square, use a fixed number:\nfor row in range(5):\n    for col in range(5):  # Fixed 5 columns\n        print(\"*\", end=\"\")\n\n```\n</li><li>**Confusing indentation**:```\n# WRONG: print() indented inside inner loop\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n        print()  # Newline after EACH star!\n# Output: *\n#         *\n#         * (each star on new line)\n\n# CORRECT: print() at outer loop level\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n    print()  # Newline after each ROW\n\n```\n</li>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Wrong Newline Placement**\n```python\n# WRONG - Newline inside inner loop (one star per line!)\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n        print()  # Every star gets a newline!\n\n# CORRECT - Newline after inner loop completes\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")\n    print()  # Newline after each ROW\n```\n\n**2. break Only Exits Innermost Loop**\n```python\n# WRONG expectation - break exits BOTH loops\nfor row in range(5):\n    for col in range(5):\n        if found_target:\n            break  # Only exits inner loop!\n    # Outer loop continues!\n\n# To exit both loops, use a flag:\nfound = False\nfor row in range(5):\n    for col in range(5):\n        if target:\n            found = True\n            break\n    if found:\n        break  # Exit outer too\n```\n\n**3. Using Wrong Loop Variable**\n```python\n# WRONG - Prints row number instead of asterisks\nfor row in range(3):\n    for col in range(row):  # Depends on row\n        print(row, end=\"\")  # Printing row, not col!\n\n# Understand what each variable represents\nfor row in range(3):      # row = 0, 1, 2\n    for col in range(5):  # col = 0, 1, 2, 3, 4 for EACH row\n        print(col, end=\" \")  # Use the right variable\n```\n\n**4. Performance with Large Ranges**\n```python\n# SLOW - O(n¬≤) = 1,000,000 iterations!\nfor i in range(1000):\n    for j in range(1000):\n        process(i, j)  # Runs 1 million times!\n\n# Nested loops multiply:\n# 10 √ó 10 = 100 iterations\n# 100 √ó 100 = 10,000 iterations\n# 1000 √ó 1000 = 1,000,000 iterations!\n```\n\n**5. Forgetting end=\"\" for Same-Line Output**\n```python\n# WRONG - Each star on new line\nfor row in range(3):\n    for col in range(5):\n        print(\"*\")  # No end=\"\", creates newlines\n\n# CORRECT - Stars on same line\nfor row in range(3):\n    for col in range(5):\n        print(\"*\", end=\"\")  # Stay on same line\n    print()  # New line after row\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Nested loops** are loops inside other loops\n- **Outer loop** controls how many times inner loop runs completely\n- **Total iterations** = outer √ó inner (can get large quickly!)\n- **Use for 2D data**: Grids, tables, images, game boards\n- **Common patterns**:\n<li>Rectangle: Fixed rows √ó fixed columns\n- Triangle: Rows growing/shrinking\n- Tables: Multiplication, coordinates\n- Patterns: Pyramid, diamond, checkerboard\n\n</li>- **break/continue** only affect innermost loop\n- **Indentation critical**: Determines which loop a statement belongs to\n- **Performance**: Nested loops are O(n¬≤) - expensive for large n!\n- **Print placement**: Inside inner for same row, after inner for new row\n\n### Essential Patterns:\n```\n# Rectangle (m √ó n):\nfor row in range(m):\n    for col in range(n):\n        print(\"*\", end=\"\")\n    print()\n\n# Right Triangle:\nfor row in range(1, n+1):\n    for col in range(row):\n        print(\"*\", end=\"\")\n    print()\n\n# Times Table:\nfor row in range(1, n+1):\n    for col in range(1, n+1):\n        print(row * col, end=\" \")\n    print()\n\n# Checkerboard:\nfor row in range(n):\n    for col in range(n):\n        if (row + col) % 2 == 0:\n            print(\"*\", end=\" \")\n        else:\n            print(\"-\", end=\" \")\n    print()\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Write nested loops with proper indentation\n- Create rectangles, triangles, and pyramids\n- Understand outer √ó inner = total iterations\n- Place print() correctly for rows vs columns\n- Use break/continue understanding they only affect innermost loop\n\n### Module 4 Almost Complete!\nYou've mastered:\n\n- ‚úÖ while loops (condition-based repetition)\n- ‚úÖ for loops (sequence iteration)\n- ‚úÖ Loop control (break, continue, pass, else)\n- ‚úÖ Nested loops (2D patterns and grids)\n\n### Coming Up: Module 4 Final Lesson\nIn **Lesson 5: Mini-Project - Practical Loop Programs**, you'll build:\n\n- Number guessing game (combining while + input validation)\n- Menu-driven program (while True + break)\n- Data analyzer (for loops + accumulators)\n- Pattern printer (nested loops + user choice)\n\nYou'll tie together everything from Module 4 into complete, working programs!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-04-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Pattern Generator Program** that creates three different visual patterns based on user input.\n\n**Patterns to create:**\n\n- **Diamond Pattern** (combines growing and shrinking triangles)\n- **Checkerboard** (alternating characters)\n- **Multiplication Table** (user-specified size)\n\n**Example output:**\n\n<pre>=== Pattern Generator ===\"\n\nEnter size: 5\n\nPattern 1 - Diamond:\n    *\n   ***\n  *****\n   ***\n    *\n\nPattern 2 - Checkerboard:\n* - * - *\n- * - * -\n* - * - *\n- * - * -\n* - * - *\n\nPattern 3 - Times Table (5x5):\n  1  2  3  4  5\n  2  4  6  8 10\n  3  6  9 12 15\n  4  8 12 16 20\n  5 10 15 20 25\n</pre>**Hints:**\n\n- Diamond: Create top half (growing pyramid), then bottom half (shrinking)\n- Checkerboard: Use (row + col) % 2 to alternate\n- Times Table: Multiply row √ó column",
              "instructions": "Build a **Pattern Generator Program** that creates three different visual patterns based on user input.\n\n**Patterns to create:**\n\n- **Diamond Pattern** (combines growing and shrinking triangles)\n- **Checkerboard** (alternating characters)\n- **Multiplication Table** (user-specified size)\n\n**Example output:**\n\n<pre>=== Pattern Generator ===\"\n\nEnter size: 5\n\nPattern 1 - Diamond:\n    *\n   ***\n  *****\n   ***\n    *\n\nPattern 2 - Checkerboard:\n* - * - *\n- * - * -\n* - * - *\n- * - * -\n* - * - *\n\nPattern 3 - Times Table (5x5):\n  1  2  3  4  5\n  2  4  6  8 10\n  3  6  9 12 15\n  4  8 12 16 20\n  5 10 15 20 25\n</pre>**Hints:**\n\n- Diamond: Create top half (growing pyramid), then bottom half (shrinking)\n- Checkerboard: Use (row + col) % 2 to alternate\n- Times Table: Multiply row √ó column",
              "starterCode": "# Pattern Generator Program\n# Create visual patterns using nested loops\n\nprint(\"=== Pattern Generator ===\")\nprint()\n\nsize = int(input(\"Enter size: \"))\n\nprint()\n\n# YOUR CODE HERE:\n\n# Pattern 1: Diamond\nprint(\"Pattern 1 - Diamond:\")\n\n# Top half (growing pyramid)\nfor row in range(1, size + 1):\n    # Print spaces\n    for space in range(size - row):\n        print(\" \", end=\"\")\n    # Print stars\n    for star in range(2 * row - 1):\n        print(\"*\", end=\"\")\n    print()\n\n# Bottom half (shrinking)\nfor row in range(size - 1, 0, -1):\n    # Your code for bottom half\n    pass\n\nprint()\n\n# Pattern 2: Checkerboard\nprint(\"Pattern 2 - Checkerboard:\")\n\nfor row in range(size):\n    for col in range(size):\n        # Use (row + col) % 2 to alternate\n        if :  # Even sum\n            print(\"*\", end=\" \")\n        else:  # Odd sum\n            print(\"-\", end=\" \")\n    print()\n\nprint()\n\n# Pattern 3: Times Table\nprint(f\"Pattern 3 - Times Table ({size}x{size}):\")\n\nfor row in range(1, size + 1):\n    for col in range(1, size + 1):\n        product = \n        print(f\"{product:3}\", end=\" \")  # :3 pads to 3 characters\n    print()\n",
              "solution": "# Pattern Generator Program - SOLUTION\n# Create visual patterns using nested loops\n\nprint(\"=== Pattern Generator ===\")\nprint()\n\nsize = int(input(\"Enter size: \"))\n\nprint()\n\n# Pattern 1: Diamond\nprint(\"Pattern 1 - Diamond:\")\n\n# Top half (growing pyramid)\nfor row in range(1, size + 1):\n    # Print leading spaces\n    for space in range(size - row):\n        print(\" \", end=\"\")\n    # Print stars\n    for star in range(2 * row - 1):\n        print(\"*\", end=\"\")\n    print()\n\n# Bottom half (shrinking pyramid)\nfor row in range(size - 1, 0, -1):\n    # Print leading spaces\n    for space in range(size - row):\n        print(\" \", end=\"\")\n    # Print stars\n    for star in range(2 * row - 1):\n        print(\"*\", end=\"\")\n    print()\n\nprint()\n\n# Pattern 2: Checkerboard\nprint(\"Pattern 2 - Checkerboard:\")\n\nfor row in range(size):\n    for col in range(size):\n        # Alternate based on position sum\n        if (row + col) % 2 == 0:\n            print(\"*\", end=\" \")\n        else:\n            print(\"-\", end=\" \")\n    print()\n\nprint()\n\n# Pattern 3: Times Table\nprint(f\"Pattern 3 - Times Table ({size}x{size}):\")\n\nfor row in range(1, size + 1):\n    for col in range(1, size + 1):\n        product = row * col\n        print(f\"{product:3}\", end=\" \")  # :3 pads to 3 characters\n    print()",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For the diamond bottom half, use range(size-1, 0, -1) and same logic as top but with decreasing rows. For checkerboard, (row + col) % 2 == 0 means even position. For times table, multiply row * col. Remember to print() after inner loops to create newlines!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-04-lesson-05",
          "title": "Mini-Project: Practical Loop Programs",
          "moduleId": "module-04",
          "order": 5,
          "estimatedMinutes": 35,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're building a Swiss Army knife - a single tool with multiple useful functions. Each blade serves a different purpose, but they all work together in one package.\n\nThis is what you'll build in this lesson: a **multi-program toolkit** that demonstrates practical applications of everything you've learned about loops:\n\n- **Number Guessing Game**: while loop + input validation + break\n- **Calculator Menu**: while True + elif chains + continue\n- **Grade Analyzer**: for loop + accumulators + statistics\n- **Pattern Studio**: nested loops + user choice + formatting\n\n### Why This Matters:\nThese aren't toy examples - these are real patterns you'll use constantly:\n\n- **Game loops**: Every video game, mobile app, or interactive program uses while True loops\n- **Menu systems**: ATMs, restaurant kiosks, admin panels - all menu-driven\n- **Data analysis**: Processing lists of numbers, calculating statistics, finding patterns\n- **Pattern generation**: Reports, tables, charts, ASCII art, game boards\n\n### The Four Projects:\n#### 1. Number Guessing Game\n<pre>Think of a number between 1-100...\nYour guess: 50\nToo high! Try again.\nYour guess: twenty-five\nPlease enter a valid number!\nYour guess: 25\nToo low! Try again.\nYour guess: 37\nCorrect! You won in 3 guesses!\n</pre>**Concepts used:** while loop, input validation, try/except preview, break condition, attempt counter\n\n#### 2. Calculator Menu\n<pre>=== Simple Calculator ===\n1. Add\n2. Subtract\n3. Multiply\n4. Divide\n5. Exit\n\nChoice: 3\nFirst number: 7\nSecond number: 8\nResult: 56\n\n(Menu repeats until user chooses Exit)\n</pre>**Concepts used:** while True, menu display, elif chains, break on exit, continue for invalid input\n\n#### 3. Grade Analyzer\n<pre>Enter number of students: 5\n\nEnter grade for student 1: 85\nEnter grade for student 2: 92\nEnter grade for student 3: 78\nEnter grade for student 4: 95\nEnter grade for student 5: 88\n\n=== Grade Report ===\nTotal students: 5\nAverage: 87.6\nHighest: 95\nLowest: 78\nPassing (>=60): 5\nFailing (<60): 0\n</pre>**Concepts used:** for loop with range, accumulators (sum, count), max/min tracking, conditional counting\n\n#### 4. Pattern Studio\n<pre>=== Pattern Studio ===\n1. Rectangle\n2. Right Triangle\n3. Pyramid\n4. Multiplication Table\n\nChoice: 3\nHeight: 5\n\n    *\n   ***\n  *****\n *******\n*********\n</pre>**Concepts used:** Nested loops, pattern formulas, user-driven dimensions, formatting\n\n### Skills You'll Practice:\n\n- Combining multiple loop types in one program\n- Validating user input robustly\n- Using break, continue strategically\n- Maintaining state (counters, accumulators)\n- Formatting output for readability\n- Building user-friendly interfaces"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n==================================================\nPRACTICAL LOOP PROGRAMS - DEMONSTRATION\n==================================================\n\n\n=== PROGRAM 1: NUMBER GUESSING GAME ===\n\nI'm thinking of a number between 1 and 100.\nYou have 7 attempts. Good luck!\n\nAttempt 1/7 - Your guess: 50\nüìâ Too high! Try a lower number.\n\nAttempt 2/7 - Your guess: 25\nüìà Too low! Try a higher number.\n\nAttempt 3/7 - Your guess: thirty-seven\n‚ùå Please enter a valid number!\n\nAttempt 3/7 - Your guess: 37\nüìà Too low! Try a higher number.\n\nAttempt 4/7 - Your guess: 44\nüìâ Too high! Try a lower number.\n\nAttempt 5/7 - Your guess: 40\nüìà Too low! Try a higher number.\n\nAttempt 6/7 - Your guess: 42\n\nüéâ Correct! You won in 6 attempts!\n\nPress Enter to continue...\n\n==================================================\n=== PROGRAM 2: CALCULATOR MENU ===\n==================================================\n\n\nCalculator Menu:\n1. Add\n2. Subtract\n3. Multiply\n4. Divide\n5. Power\n6. Exit\n\nEnter choice (1-6): 3\nEnter first number: 7\nEnter second number: 8\n\n‚úÖ 7.0 √ó 8.0 = 56.0\n\nCalculator Menu:\n1. Add\n2. Subtract\n3. Multiply\n4. Divide\n5. Power\n6. Exit\n\nEnter choice (1-6): 5\nEnter first number: 2\nEnter second number: 10\n\n‚úÖ 2.0 ^ 10.0 = 1024.0\n\nCalculator Menu:\n1. Add\n2. Subtract\n3. Multiply\n4. Divide\n5. Power\n6. Exit\n\nEnter choice (1-6): 6\n\nüëã Goodbye!\n\nPress Enter to continue...\n\n==================================================\n=== PROGRAM 3: GRADE ANALYZER ===\n==================================================\n\nEnter number of students: 5\n\nEnter grade for student 1 (0-100): 85\nEnter grade for student 2 (0-100): 92\nEnter grade for student 3 (0-100): 78\nEnter grade for student 4 (0-100): 95\nEnter grade for student 5 (0-100): 88\n\n========================================\nGRADE REPORT\n========================================\nTotal students:    5\nAverage score:     87.6\nHighest score:     95.0\nLowest score:      78.0\nPassing (>=60):    5 (100.0%)\nFailing (<60):     0 (0.0%)\n========================================\n\nGrade Distribution:\nStudent  1:  85.0 (B) *****************\nStudent  2:  92.0 (A) ******************\nStudent  3:  78.0 (C) ***************\nStudent  4:  95.0 (A) *******************\nStudent  5:  88.0 (B) *****************\n\nPress Enter to continue...\n\n==================================================\n=== PROGRAM 4: PATTERN STUDIO ===\n==================================================\n\n\nAvailable Patterns:\n1. Rectangle\n2. Right Triangle\n3. Pyramid\n4. Diamond\n5. Multiplication Table\n6. Exit\n\nChoose pattern (1-6): 3\nEnter size (1-20): 5\n\n    *\n   ***\n  *****\n *******\n*********\n\n\nAvailable Patterns:\n1. Rectangle\n2. Right Triangle\n3. Pyramid\n4. Diamond\n5. Multiplication Table\n6. Exit\n\nChoose pattern (1-6): 5\nEnter size (1-20): 5\n\nMultiplication Table (5x5):\n\n       1   2   3   4   5\n    --------------------\n 1 |   1   2   3   4   5\n 2 |   2   4   6   8  10\n 3 |   3   6   9  12  15\n 4 |   4   8  12  16  20\n 5 |   5  10  15  20  25\n\n\nAvailable Patterns:\n1. Rectangle\n2. Right Triangle\n3. Pyramid\n4. Diamond\n5. Multiplication Table\n6. Exit\n\nChoose pattern (1-6): 6\n\nExiting Pattern Studio. Goodbye!\n\n==================================================\nAll programs complete! Great work!\n==================================================\n```",
              "code": "# Mini-Project: Practical Loop Programs\n# Four complete programs demonstrating loop mastery\n\nimport random  # For number guessing game\n\nprint(\"=\" * 50)\nprint(\"PRACTICAL LOOP PROGRAMS - DEMONSTRATION\")\nprint(\"=\" * 50)\nprint()\n\n# ========================================\n# PROGRAM 1: NUMBER GUESSING GAME\n# ========================================\n\nprint(\"\\n=== PROGRAM 1: NUMBER GUESSING GAME ===\")\nprint()\n\n# Generate random number between 1-100\nsecret_number = random.randint(1, 100)\nattempts = 0\nmax_attempts = 7\n\nprint(f\"I'm thinking of a number between 1 and 100.\")\nprint(f\"You have {max_attempts} attempts. Good luck!\\n\")\n\nwhile attempts < max_attempts:\n    # Get user input\n    guess_input = input(f\"Attempt {attempts + 1}/{max_attempts} - Your guess: \")\n    \n    # Validate input (is it a number?)\n    try:\n        guess = int(guess_input)\n    except ValueError:\n        print(\"‚ùå Please enter a valid number!\\n\")\n        continue  # Skip to next iteration, don't count as attempt\n    \n    # Validate range\n    if guess < 1 or guess > 100:\n        print(\"‚ùå Number must be between 1 and 100!\\n\")\n        continue\n    \n    # Count this as a valid attempt\n    attempts = attempts + 1\n    \n    # Check guess\n    if guess == secret_number:\n        print(f\"\\nüéâ Correct! You won in {attempts} attempts!\")\n        break  # Exit loop - game won\n    elif guess < secret_number:\n        print(\"üìà Too low! Try a higher number.\\n\")\n    else:\n        print(\"üìâ Too high! Try a lower number.\\n\")\nelse:\n    # Loop finished without break - player lost\n    print(f\"\\nüòû Game over! The number was {secret_number}.\")\n\nprint()\ninput(\"Press Enter to continue...\")\n\n# ========================================\n# PROGRAM 2: CALCULATOR MENU\n# ========================================\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"=== PROGRAM 2: CALCULATOR MENU ===\")\nprint(\"=\" * 50)\nprint()\n\nwhile True:  # Infinite loop - runs until break\n    # Display menu\n    print(\"\\nCalculator Menu:\")\n    print(\"1. Add\")\n    print(\"2. Subtract\")\n    print(\"3. Multiply\")\n    print(\"4. Divide\")\n    print(\"5. Power\")\n    print(\"6. Exit\")\n    print()\n    \n    choice = input(\"Enter choice (1-6): \")\n    \n    # Exit condition\n    if choice == \"6\":\n        print(\"\\nüëã Goodbye!\")\n        break  # Exit the while True loop\n    \n    # Validate choice\n    if choice not in [\"1\", \"2\", \"3\", \"4\", \"5\"]:\n        print(\"‚ùå Invalid choice! Please enter 1-6.\")\n        continue  # Skip rest, show menu again\n    \n    # Get numbers\n    try:\n        num1 = float(input(\"Enter first number: \"))\n        num2 = float(input(\"Enter second number: \"))\n    except ValueError:\n        print(\"‚ùå Invalid input! Please enter numbers.\")\n        continue\n    \n    # Perform calculation\n    if choice == \"1\":\n        result = num1 + num2\n        operation = \"+\"\n    elif choice == \"2\":\n        result = num1 - num2\n        operation = \"-\"\n    elif choice == \"3\":\n        result = num1 * num2\n        operation = \"√ó\"\n    elif choice == \"4\":\n        if num2 == 0:\n            print(\"‚ùå Cannot divide by zero!\")\n            continue\n        result = num1 / num2\n        operation = \"√∑\"\n    elif choice == \"5\":\n        result = num1 ** num2\n        operation = \"^\"\n    \n    # Display result\n    print(f\"\\n‚úÖ {num1} {operation} {num2} = {result}\")\n\nprint()\ninput(\"Press Enter to continue...\")\n\n# ========================================\n# PROGRAM 3: GRADE ANALYZER\n# ========================================\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"=== PROGRAM 3: GRADE ANALYZER ===\")\nprint(\"=\" * 50)\nprint()\n\n# Get number of students\nwhile True:\n    try:\n        num_students = int(input(\"Enter number of students: \"))\n        if num_students > 0:\n            break\n        else:\n            print(\"Please enter a positive number!\")\n    except ValueError:\n        print(\"Please enter a valid number!\")\n\nprint()\n\n# Initialize accumulators\ntotal_score = 0\nhighest_score = 0  # Will update on first grade\nlowest_score = 100  # Will update on first grade\npassing_count = 0\nfailing_count = 0\ngrades_list = []  # Store all grades for later\n\n# Collect grades\nfor student_num in range(1, num_students + 1):\n    while True:\n        try:\n            grade = float(input(f\"Enter grade for student {student_num} (0-100): \"))\n            \n            # Validate range\n            if 0 <= grade <= 100:\n                break\n            else:\n                print(\"Grade must be between 0 and 100!\")\n        except ValueError:\n            print(\"Please enter a valid number!\")\n    \n    # Process this grade\n    grades_list.append(grade)  # Store it\n    total_score = total_score + grade  # Add to sum\n    \n    # Update highest/lowest\n    if grade > highest_score:\n        highest_score = grade\n    if grade < lowest_score:\n        lowest_score = grade\n    \n    # Count passing/failing\n    if grade >= 60:\n        passing_count = passing_count + 1\n    else:\n        failing_count = failing_count + 1\n\n# Calculate statistics\naverage_score = total_score / num_students\n\n# Display report\nprint(\"\\n\" + \"=\" * 40)\nprint(\"GRADE REPORT\")\nprint(\"=\" * 40)\nprint(f\"Total students:    {num_students}\")\nprint(f\"Average score:     {average_score:.1f}\")\nprint(f\"Highest score:     {highest_score}\")\nprint(f\"Lowest score:      {lowest_score}\")\nprint(f\"Passing (>=60):    {passing_count} ({passing_count/num_students*100:.1f}%)\")\nprint(f\"Failing (<60):     {failing_count} ({failing_count/num_students*100:.1f}%)\")\nprint(\"=\" * 40)\n\n# Display grade distribution\nprint(\"\\nGrade Distribution:\")\nfor i, grade in enumerate(grades_list, start=1):\n    # Determine letter grade\n    if grade >= 90:\n        letter = \"A\"\n    elif grade >= 80:\n        letter = \"B\"\n    elif grade >= 70:\n        letter = \"C\"\n    elif grade >= 60:\n        letter = \"D\"\n    else:\n        letter = \"F\"\n    \n    # Create bar chart\n    bar_length = int(grade / 5)  # Each * = 5 points\n    bar = \"*\" * bar_length\n    \n    print(f\"Student {i:2}: {grade:5.1f} ({letter}) {bar}\")\n\nprint()\ninput(\"Press Enter to continue...\")\n\n# ========================================\n# PROGRAM 4: PATTERN STUDIO\n# ========================================\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"=== PROGRAM 4: PATTERN STUDIO ===\")\nprint(\"=\" * 50)\nprint()\n\nwhile True:\n    # Display menu\n    print(\"\\nAvailable Patterns:\")\n    print(\"1. Rectangle\")\n    print(\"2. Right Triangle\")\n    print(\"3. Pyramid\")\n    print(\"4. Diamond\")\n    print(\"5. Multiplication Table\")\n    print(\"6. Exit\")\n    print()\n    \n    choice = input(\"Choose pattern (1-6): \")\n    \n    if choice == \"6\":\n        print(\"\\nExiting Pattern Studio. Goodbye!\")\n        break\n    \n    if choice not in [\"1\", \"2\", \"3\", \"4\", \"5\"]:\n        print(\"‚ùå Invalid choice!\")\n        continue\n    \n    # Get size\n    try:\n        size = int(input(\"Enter size (1-20): \"))\n        if size < 1 or size > 20:\n            print(\"Size must be between 1 and 20!\")\n            continue\n    except ValueError:\n        print(\"Please enter a valid number!\")\n        continue\n    \n    print()  # Blank line before pattern\n    \n    # Generate chosen pattern\n    if choice == \"1\":\n        # Rectangle\n        width = size\n        height = max(3, size // 2)  # Make it rectangular\n        \n        for row in range(height):\n            for col in range(width):\n                print(\"*\", end=\" \")\n            print()\n    \n    elif choice == \"2\":\n        # Right Triangle\n        for row in range(1, size + 1):\n            for col in range(row):\n                print(\"*\", end=\" \")\n            print()\n    \n    elif choice == \"3\":\n        # Pyramid\n        for row in range(1, size + 1):\n            # Spaces\n            for space in range(size - row):\n                print(\" \", end=\"\")\n            # Stars\n            for star in range(2 * row - 1):\n                print(\"*\", end=\"\")\n            print()\n    \n    elif choice == \"4\":\n        # Diamond (pyramid + inverted pyramid)\n        # Top half\n        for row in range(1, size + 1):\n            for space in range(size - row):\n                print(\" \", end=\"\")\n            for star in range(2 * row - 1):\n                print(\"*\", end=\"\")\n            print()\n        \n        # Bottom half\n        for row in range(size - 1, 0, -1):\n            for space in range(size - row):\n                print(\" \", end=\"\")\n            for star in range(2 * row - 1):\n                print(\"*\", end=\"\")\n            print()\n    \n    elif choice == \"5\":\n        # Multiplication Table\n        print(f\"Multiplication Table ({size}x{size}):\\n\")\n        \n        # Header row\n        print(\"    \", end=\"\")\n        for i in range(1, size + 1):\n            print(f\"{i:4}\", end=\"\")\n        print()\n        print(\"    \" + \"-\" * (4 * size))\n        \n        # Table rows\n        for row in range(1, size + 1):\n            print(f\"{row:2} |\", end=\"\")\n            for col in range(1, size + 1):\n                product = row * col\n                print(f\"{product:4}\", end=\"\")\n            print()\n    \n    print()  # Blank line after pattern\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"All programs complete! Great work!\")\nprint(\"=\" * 50)",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Program Architecture Patterns:\n#### 1. Number Guessing Game Structure\n```\n# Core pattern: While loop with attempt limit\nattempts = 0\nmax_attempts = 7\n\nwhile attempts < max_attempts:\n    # Get and validate input\n    try:\n        guess = int(input(\"Your guess: \"))\n    except ValueError:\n        continue  # Invalid input - don't count attempt\n    \n    attempts = attempts + 1  # Count valid attempt\n    \n    # Check condition\n    if guess == target:\n        break  # Success - exit loop\n    # Give feedback\n\nelse:\n    # This runs if loop completes without break\n    print(\"You lose!\")\n\n```\n**Key techniques:**\n\n- **try/except**: Catches ValueError when user enters non-numeric input\n- **continue**: Skip invalid input without counting as attempt\n- **break**: Exit on win\n- **loop else**: Detects loss (loop finished without break)\n\n#### 2. Menu System Pattern\n```\n# Core pattern: Infinite loop with exit condition\nwhile True:\n    # Display menu\n    print(\"1. Option A\")\n    print(\"2. Option B\")\n    print(\"3. Exit\")\n    \n    choice = input(\"Choose: \")\n    \n    # Exit condition\n    if choice == \"3\":\n        break  # Exit the infinite loop\n    \n    # Validate\n    if choice not in [\"1\", \"2\"]:\n        continue  # Invalid - show menu again\n    \n    # Process valid choice\n    if choice == \"1\":\n        do_option_a()\n    elif choice == \"2\":\n        do_option_b()\n\n```\n**Key techniques:**\n\n- **while True**: Infinite loop (runs until break)\n- **Strategic break**: Exit only when user chooses\n- **continue**: Skip to next iteration for invalid input\n- **elif chains**: Handle multiple menu options\n\n#### 3. Data Analyzer Pattern\n```\n# Core pattern: Accumulator variables + for loop\n# Initialize accumulators\ntotal = 0\ncount = 0\nhighest = float('-inf')  # Start very low\nlowest = float('inf')    # Start very high\npassing = 0\n\n# Process each item\nfor i in range(num_items):\n    value = get_value()\n    \n    # Update accumulators\n    total = total + value\n    count = count + 1\n    \n    if value > highest:\n        highest = value\n    if value < lowest:\n        lowest = value\n    \n    if value >= threshold:\n        passing = passing + 1\n\n# Calculate statistics\naverage = total / count\n\n```\n**Key accumulator patterns:**\n\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Purpose</th><th>Initialization</th><th>Update</th></tr><tr><td>Sum/Total</td><td>0</td><td>total = total + value</td></tr><tr><td>Count</td><td>0</td><td>count = count + 1</td></tr><tr><td>Maximum</td><td>0 or -inf</td><td>if value > max: max = value</td></tr><tr><td>Minimum</td><td>inf or large number</td><td>if value < min: min = value</td></tr><tr><td>Conditional count</td><td>0</td><td>if condition: count += 1</td></tr></table>#### 4. Nested Loop Patterns\n```\n# Pattern 1: Fixed rectangle\nfor row in range(height):\n    for col in range(width):\n        print(\"*\", end=\" \")\n    print()  # Newline after each row\n\n# Pattern 2: Growing triangle\nfor row in range(1, size + 1):\n    for col in range(row):  # Columns = row number\n        print(\"*\", end=\" \")\n    print()\n\n# Pattern 3: Pyramid (spaces + stars)\nfor row in range(1, size + 1):\n    # Leading spaces\n    for space in range(size - row):\n        print(\" \", end=\"\")\n    # Stars\n    for star in range(2 * row - 1):\n        print(\"*\", end=\"\")\n    print()\n\n# Pattern 4: Multiplication table\nfor row in range(1, size + 1):\n    for col in range(1, size + 1):\n        print(row * col, end=\" \")\n    print()\n\n```\n### Input Validation Techniques:\n#### Method 1: try/except (Type Validation)\n```\nwhile True:\n    try:\n        number = int(input(\"Enter number: \"))\n        break  # Success - exit validation loop\n    except ValueError:\n        print(\"Invalid! Please enter a number.\")\n\n```\n#### Method 2: Range Validation\n```\nwhile True:\n    number = int(input(\"Enter 1-10: \"))\n    if 1 <= number <= 10:\n        break  # Valid range\n    else:\n        print(\"Must be between 1 and 10!\")\n\n```\n#### Method 3: Choice Validation\n```\nwhile True:\n    choice = input(\"Enter A, B, or C: \")\n    if choice in [\"A\", \"B\", \"C\"]:\n        break  # Valid choice\n    else:\n        print(\"Invalid choice!\")\n\n```\n#### Method 4: Combined Validation\n```\nwhile True:\n    try:\n        age = int(input(\"Enter age: \"))\n        if 0 <= age <= 120:  # Reasonable range\n            break\n        else:\n            print(\"Age must be 0-120!\")\n    except ValueError:\n        print(\"Please enter a number!\")\n\n```\n### Loop Control Strategy:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Situation</th><th>Use</th><th>Example</th></tr><tr><td>Invalid input, don't count it</td><td>continue</td><td>Bad guess in game</td></tr><tr><td>Goal achieved, exit early</td><td>break</td><td>Found search target</td></tr><tr><td>User wants to quit</td><td>break</td><td>Exit menu choice</td></tr><tr><td>Maximum attempts reached</td><td>Loop condition</td><td>while attempts < max</td></tr><tr><td>Keep running indefinitely</td><td>while True</td><td>Menu system</td></tr></table>### Common Patterns Summary:\n```\n# Pattern 1: Limited attempts\nattempts = 0\nmax_attempts = 5\nwhile attempts < max_attempts:\n    attempts += 1\n    if success:\n        break\nelse:\n    handle_failure()\n\n# Pattern 2: Infinite menu\nwhile True:\n    show_menu()\n    if choice == \"exit\":\n        break\n    process(choice)\n\n# Pattern 3: Data accumulation\ntotal = 0\nfor item in items:\n    total += process(item)\naverage = total / len(items)\n\n# Pattern 4: Input validation\nwhile True:\n    try:\n        value = int(input(\"Number: \"))\n        if valid(value):\n            break\n    except ValueError:\n        pass\n\n# Pattern 5: Search with early exit\nfor item in collection:\n    if matches(item):\n        found = item\n        break\nelse:\n    found = None\n\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **while True** creates infinite loop - perfect for menu systems\n- **break** exits loops early (win conditions, user exit)\n- **continue** skips to next iteration (invalid input)\n- **Accumulators** track running totals (sum, count, max, min)\n- **Nested validation**: for loop + while loop for robust input\n- **try/except** catches type errors (non-numeric input)\n- **Range validation**: if min <= value <= max\n- **enumerate()** provides both index and value\n- **Guard clauses**: Check edge cases first (empty list)\n- **List methods**: append(), len(), indexing\n\n### Essential Loop Patterns Mastered:\n```\n# 1. Menu system\nwhile True:\n    choice = input(\"Menu: \")\n    if choice == \"exit\":\n        break\n    process(choice)\n\n# 2. Limited attempts\nattempts = 0\nwhile attempts < max:\n    if try_something():\n        break\n    attempts += 1\n\n# 3. Input validation\nwhile True:\n    try:\n        value = int(input(\"Number: \"))\n        if valid(value):\n            break\n    except ValueError:\n        continue\n\n# 4. Accumulation\ntotal = 0\nfor item in items:\n    total += process(item)\n\n# 5. Tracking max/min\nmaximum = items[0]\nfor item in items:\n    if item > maximum:\n        maximum = item\n\n# 6. Categorization\ncounts = {}\nfor item in items:\n    category = categorize(item)\n    counts[category] += 1\n\n```\n### Module 4 Complete! üéâ\nYou've mastered all loop concepts:\n\n- ‚úÖ **while loops**: Condition-based repetition\n- ‚úÖ **for loops**: Sequence iteration with range()\n- ‚úÖ **Loop control**: break, continue, pass, else\n- ‚úÖ **Nested loops**: 2D patterns and grids\n- ‚úÖ **Practical applications**: Games, menus, analyzers, patterns\n\n### What You Can Build Now:\n\n- Interactive games (guessing, quizzes)\n- Menu-driven applications\n- Data processors (statistics, reports)\n- Pattern generators (ASCII art, tables)\n- Input validators (robust user input)\n- Search algorithms (find items in collections)\n\n### Coming Up in Module 5: Lists & Tuples\nYou've been using lists already (grades = []), but now you'll master them:\n\n- List operations: append, remove, insert, sort\n- List slicing: grades[1:3], grades[:5]\n- List comprehensions: [x*2 for x in numbers]\n- Tuples: Immutable sequences\n- 2D lists: Matrices and tables\n- List algorithms: Search, sort, filter\n\nLoops + Lists = Superpowers! üöÄ"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-04-lesson-05-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Student Grade Manager** that combines all loop concepts into one complete program.\n\n**Program Requirements:**\n\n- **Main Menu (while True loop)**:\n<li>1. Enter grades\n- 2. View statistics\n- 3. View grade distribution\n- 4. Find highest/lowest\n- 5. Exit\n\n</li>- **Enter Grades (for loop + validation)**:\n<li>Ask how many students\n- Collect grade for each (0-100)\n- Validate all input\n- Store in a list\n\n</li>- **Statistics (accumulators)**:\n<li>Calculate average\n- Count passing (>=60)\n- Count failing (<60)\n- Show percentages\n\n</li>- **Distribution (nested loops)**:\n<li>Group by letter grade (A, B, C, D, F)\n- Display visual bar chart\n\n</li>- **High/Low (tracking)**:\n<li>Find highest grade and student number\n- Find lowest grade and student number\n\n</li>\n**Example Session:**\n\n<pre>=== Student Grade Manager ===\n\n1. Enter grades\n2. View statistics\n3. View distribution\n4. Find high/low\n5. Exit\n\nChoice: 1\n\nHow many students? 3\n\nGrade for student 1: 85\nGrade for student 2: 92\nGrade for student 3: 78\n\n‚úÖ 3 grades entered!\n\nChoice: 2\n\n=== Statistics ===\nTotal students: 3\nAverage: 85.0\nPassing: 3 (100%)\nFailing: 0 (0%)\n\nChoice: 4\n\n=== High/Low ===\nHighest: 92.0 (Student 2)\nLowest: 78.0 (Student 3)\n\nChoice: 5\n\nGoodbye!\n</pre>**Hints:**\n\n- Use a list to store grades: grades = []\n- Use grades.append(grade) to add grades\n- Check if list is empty before calculations: if len(grades) > 0\n- Use enumerate() to track student numbers: for i, grade in enumerate(grades, start=1)",
              "instructions": "Build a **Student Grade Manager** that combines all loop concepts into one complete program.\n\n**Program Requirements:**\n\n- **Main Menu (while True loop)**:\n<li>1. Enter grades\n- 2. View statistics\n- 3. View grade distribution\n- 4. Find highest/lowest\n- 5. Exit\n\n</li>- **Enter Grades (for loop + validation)**:\n<li>Ask how many students\n- Collect grade for each (0-100)\n- Validate all input\n- Store in a list\n\n</li>- **Statistics (accumulators)**:\n<li>Calculate average\n- Count passing (>=60)\n- Count failing (<60)\n- Show percentages\n\n</li>- **Distribution (nested loops)**:\n<li>Group by letter grade (A, B, C, D, F)\n- Display visual bar chart\n\n</li>- **High/Low (tracking)**:\n<li>Find highest grade and student number\n- Find lowest grade and student number\n\n</li>\n**Example Session:**\n\n<pre>=== Student Grade Manager ===\n\n1. Enter grades\n2. View statistics\n3. View distribution\n4. Find high/low\n5. Exit\n\nChoice: 1\n\nHow many students? 3\n\nGrade for student 1: 85\nGrade for student 2: 92\nGrade for student 3: 78\n\n‚úÖ 3 grades entered!\n\nChoice: 2\n\n=== Statistics ===\nTotal students: 3\nAverage: 85.0\nPassing: 3 (100%)\nFailing: 0 (0%)\n\nChoice: 4\n\n=== High/Low ===\nHighest: 92.0 (Student 2)\nLowest: 78.0 (Student 3)\n\nChoice: 5\n\nGoodbye!\n</pre>**Hints:**\n\n- Use a list to store grades: grades = []\n- Use grades.append(grade) to add grades\n- Check if list is empty before calculations: if len(grades) > 0\n- Use enumerate() to track student numbers: for i, grade in enumerate(grades, start=1)",
              "starterCode": "# Student Grade Manager - Starter Code\n# Complete the missing parts\n\nprint(\"=== Student Grade Manager ===\")\nprint()\n\n# Storage for grades\ngrades = []\n\n# Main program loop\nwhile True:\n    # Display menu\n    print(\"\\nMain Menu:\")\n    print(\"1. Enter grades\")\n    print(\"2. View statistics\")\n    print(\"3. View distribution\")\n    print(\"4. Find high/low\")\n    print(\"5. Exit\")\n    print()\n    \n    choice = input(\"Choice: \")\n    \n    # Option 1: Enter grades\n    if choice == \"1\":\n        # Get number of students\n        while True:\n            try:\n                num_students = int(input(\"\\nHow many students? \"))\n                if num_students > 0:\n                    break\n                else:\n                    print(\"Please enter a positive number!\")\n            except ValueError:\n                print(\"Please enter a valid number!\")\n        \n        print()\n        \n        # Clear previous grades\n        grades = []\n        \n        # Collect grades\n        for student_num in range(1, num_students + 1):\n            while True:\n                try:\n                    grade = float(input(f\"Grade for student {student_num} (0-100): \"))\n                    \n                    # YOUR CODE: Validate grade is 0-100\n                    if :  # Check range\n                        break\n                    else:\n                        print(\"Grade must be 0-100!\")\n                except ValueError:\n                    print(\"Please enter a valid number!\")\n            \n            # YOUR CODE: Add grade to list\n            grades.  # Append to list\n        \n        print(f\"\\n‚úÖ {len(grades)} grades entered!\")\n    \n    # Option 2: Statistics\n    elif choice == \"2\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== Statistics ===\")\n        \n        # YOUR CODE: Calculate statistics\n        total = 0\n        passing_count = 0\n        failing_count = 0\n        \n        for grade in grades:\n            total = total +   # Add to total\n            \n            if :  # Passing threshold\n                passing_count = passing_count + 1\n            else:\n                failing_count = failing_count + 1\n        \n        average =   # Calculate average\n        \n        # Display results\n        print(f\"Total students: {len(grades)}\")\n        print(f\"Average: {average:.1f}\")\n        print(f\"Passing (>=60): {passing_count} ({passing_count/len(grades)*100:.1f}%)\")\n        print(f\"Failing (<60): {failing_count} ({failing_count/len(grades)*100:.1f}%)\")\n    \n    # Option 3: Distribution\n    elif choice == \"3\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== Grade Distribution ===\")\n        \n        # YOUR CODE: Count each letter grade\n        a_count = 0\n        b_count = 0\n        c_count = 0\n        d_count = 0\n        f_count = 0\n        \n        for grade in grades:\n            if grade >= 90:\n                a_count = a_count + 1\n            elif :  # B range\n                b_count = b_count + 1\n            elif grade >= 70:\n                c_count = c_count + 1\n            elif grade >= 60:\n                d_count = d_count + 1\n            else:\n                f_count = f_count + 1\n        \n        # Display with bars\n        print(f\"A (90+):  {a_count:2} {'*' * a_count}\")\n        print(f\"B (80+):  {b_count:2} {'*' * b_count}\")\n        print(f\"C (70+):  {c_count:2} {'*' * c_count}\")\n        print(f\"D (60+):  {d_count:2} {'*' * d_count}\")\n        print(f\"F (<60):  {f_count:2} {'*' * f_count}\")\n    \n    # Option 4: High/Low\n    elif choice == \"4\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== High/Low ===\")\n        \n        # YOUR CODE: Find highest and lowest\n        highest = grades[0]\n        lowest = grades[0]\n        highest_student = 1\n        lowest_student = 1\n        \n        for i, grade in enumerate(grades, start=1):\n            if grade > highest:\n                highest = \n                highest_student = \n            if :  # Check if lower\n                lowest = grade\n                lowest_student = i\n        \n        print(f\"Highest: {highest} (Student {highest_student})\")\n        print(f\"Lowest: {lowest} (Student {lowest_student})\")\n    \n    # Option 5: Exit\n    elif choice == \"5\":\n        print(\"\\nGoodbye!\")\n        break\n    \n    # Invalid choice\n    else:\n        print(\"\\n‚ùå Invalid choice! Please enter 1-5.\")",
              "solution": "# Student Grade Manager - COMPLETE SOLUTION\n\nprint(\"=== Student Grade Manager ===\")\nprint()\n\n# Storage for grades\ngrades = []\n\n# Main program loop\nwhile True:\n    # Display menu\n    print(\"\\nMain Menu:\")\n    print(\"1. Enter grades\")\n    print(\"2. View statistics\")\n    print(\"3. View distribution\")\n    print(\"4. Find high/low\")\n    print(\"5. Exit\")\n    print()\n    \n    choice = input(\"Choice: \")\n    \n    # Option 1: Enter grades\n    if choice == \"1\":\n        # Get number of students\n        while True:\n            try:\n                num_students = int(input(\"\\nHow many students? \"))\n                if num_students > 0:\n                    break\n                else:\n                    print(\"Please enter a positive number!\")\n            except ValueError:\n                print(\"Please enter a valid number!\")\n        \n        print()\n        \n        # Clear previous grades\n        grades = []\n        \n        # Collect grades\n        for student_num in range(1, num_students + 1):\n            while True:\n                try:\n                    grade = float(input(f\"Grade for student {student_num} (0-100): \"))\n                    \n                    # Validate grade is 0-100\n                    if 0 <= grade <= 100:\n                        break\n                    else:\n                        print(\"Grade must be 0-100!\")\n                except ValueError:\n                    print(\"Please enter a valid number!\")\n            \n            # Add grade to list\n            grades.append(grade)\n        \n        print(f\"\\n‚úÖ {len(grades)} grades entered!\")\n    \n    # Option 2: Statistics\n    elif choice == \"2\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== Statistics ===\")\n        \n        # Calculate statistics\n        total = 0\n        passing_count = 0\n        failing_count = 0\n        \n        for grade in grades:\n            total = total + grade\n            \n            if grade >= 60:\n                passing_count = passing_count + 1\n            else:\n                failing_count = failing_count + 1\n        \n        average = total / len(grades)\n        \n        # Display results\n        print(f\"Total students: {len(grades)}\")\n        print(f\"Average: {average:.1f}\")\n        print(f\"Passing (>=60): {passing_count} ({passing_count/len(grades)*100:.1f}%)\")\n        print(f\"Failing (<60): {failing_count} ({failing_count/len(grades)*100:.1f}%)\")\n    \n    # Option 3: Distribution\n    elif choice == \"3\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== Grade Distribution ===\")\n        \n        # Count each letter grade\n        a_count = 0\n        b_count = 0\n        c_count = 0\n        d_count = 0\n        f_count = 0\n        \n        for grade in grades:\n            if grade >= 90:\n                a_count = a_count + 1\n            elif grade >= 80:\n                b_count = b_count + 1\n            elif grade >= 70:\n                c_count = c_count + 1\n            elif grade >= 60:\n                d_count = d_count + 1\n            else:\n                f_count = f_count + 1\n        \n        # Display with bars\n        print(f\"A (90+):  {a_count:2} {'*' * a_count}\")\n        print(f\"B (80+):  {b_count:2} {'*' * b_count}\")\n        print(f\"C (70+):  {c_count:2} {'*' * c_count}\")\n        print(f\"D (60+):  {d_count:2} {'*' * d_count}\")\n        print(f\"F (<60):  {f_count:2} {'*' * f_count}\")\n    \n    # Option 4: High/Low\n    elif choice == \"4\":\n        if len(grades) == 0:\n            print(\"\\n‚ùå No grades entered yet!\")\n            continue\n        \n        print(\"\\n=== High/Low ===\")\n        \n        # Find highest and lowest\n        highest = grades[0]\n        lowest = grades[0]\n        highest_student = 1\n        lowest_student = 1\n        \n        for i, grade in enumerate(grades, start=1):\n            if grade > highest:\n                highest = grade\n                highest_student = i\n            if grade < lowest:\n                lowest = grade\n                lowest_student = i\n        \n        print(f\"Highest: {highest} (Student {highest_student})\")\n        print(f\"Lowest: {lowest} (Student {lowest_student})\")\n    \n    # Option 5: Exit\n    elif choice == \"5\":\n        print(\"\\nGoodbye!\")\n        break\n    \n    # Invalid choice\n    else:\n        print(\"\\n‚ùå Invalid choice! Please enter 1-5.\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For validation, use 'if 0 <= grade <= 100'. For appending, use 'grades.append(grade)'. For average, divide total by len(grades). For tracking max/min, update both the value AND the student number when you find a new high/low. The enumerate(grades, start=1) gives you both index (starting at 1) and value!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-05",
      "title": "Lists & Tuples",
      "description": "Working with ordered collections",
      "difficulty": "beginner",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-05-lesson-01",
          "title": "List Basics: Ordered Collections",
          "moduleId": "module-05",
          "order": 1,
          "estimatedMinutes": 22,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine your shopping list on your phone:\n\n<pre style='background-color: #f0f0f0; padding: 10px;'>Shopping List:\n1. Milk\n2. Eggs\n3. Bread\n4. Apples\n5. Chicken\n</pre>This is a **list** - an ordered collection of items. Key properties:\n\n- **Ordered**: Items have a specific sequence (Milk is first, Chicken is last)\n- **Numbered**: Each item has a position (1st, 2nd, 3rd...)\n- **Flexible**: You can add items, remove items, change items\n- **Mixed types allowed**: Could include quantities (\"2 dozen eggs\")\n\n### Python Lists Work the Same Way!\nIn Python, a **list** is an ordered collection that can store multiple values:\n\n```\nshopping_list = [\"Milk\", \"Eggs\", \"Bread\", \"Apples\", \"Chicken\"]\n\n```\n### Why Use Lists?\nInstead of this mess:\n\n```\nitem1 = \"Milk\"\nitem2 = \"Eggs\"\nitem3 = \"Bread\"\nitem4 = \"Apples\"\nitem5 = \"Chicken\"\n\n```\nYou get this elegance:\n\n```\nshopping = [\"Milk\", \"Eggs\", \"Bread\", \"Apples\", \"Chicken\"]\n\n```\n### Real-World Examples:\n\n- **Playlist**: [\"Song 1\", \"Song 2\", \"Song 3\"] - order matters!\n- **Test scores**: [85, 92, 78, 95, 88] - multiple numbers\n- **Todo list**: [\"Study\", \"Exercise\", \"Call mom\"] - tasks in order\n- **Game inventory**: [\"Sword\", \"Shield\", \"Potion\", \"Map\"] - items collected\n- **Temperature readings**: [72, 75, 73, 71, 70] - hourly data\n\n### Key Concepts:\n**1. Lists use square brackets: [ ]**\n\n```\nnumbers = [1, 2, 3, 4, 5]\nnames = [\"Alice\", \"Bob\", \"Charlie\"]\nmixed = [\"Alice\", 25, True, 3.14]  # Different types OK!\nempty = []  # Empty list\n\n```\n**2. Lists are indexed (numbered) starting at 0**\n\n```\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\n\n# Position:  0        1         2\n#           Apple   Banana   Cherry\n\n```\nPython uses **zero-based indexing** - the first item is at position 0, not 1!\n\n**3. You can access items by their index**\n\n```\nprint(fruits[0])  # Apple (first item)\nprint(fruits[1])  # Banana (second item)\nprint(fruits[2])  # Cherry (third item)\n\n```\n**4. Negative indexing counts from the end**\n\n```\nprint(fruits[-1])  # Cherry (last item)\nprint(fruits[-2])  # Banana (second to last)\nprint(fruits[-3])  # Apple (third from end)\n\n```\n### Why Zero-Based Indexing?\nThink of indexing as \"how many steps from the start\":\n\n- Index 0: Zero steps from start (first item)\n- Index 1: One step from start (second item)\n- Index 2: Two steps from start (third item)\n\nMost programming languages use this system!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Creating Lists ===\n\nFruits: ['Apple', 'Banana', 'Cherry', 'Date', 'Elderberry']\nScores: [85, 92, 78, 95, 88]\nStudent info: ['Alice', 20, 'Computer Science', 3.8, True]\nEmpty list: []\n\n=== List Length ===\n\nNumber of fruits: 5\nNumber of scores: 5\nNumber of items in empty list: 0\n\n=== Accessing Items (Positive Indexing) ===\n\nFruits list: ['Apple', 'Banana', 'Cherry', 'Date', 'Elderberry']\n  Index 0 (first):  Apple\n  Index 1 (second): Banana\n  Index 2 (third):  Cherry\n  Index 3 (fourth): Date\n  Index 4 (fifth):  Elderberry\n\n=== Accessing Items (Negative Indexing) ===\n\nFruits list: ['Apple', 'Banana', 'Cherry', 'Date', 'Elderberry']\n  Index -1 (last):        Elderberry\n  Index -2 (2nd to last): Date\n  Index -3 (3rd to last): Cherry\n  Index -4 (4th to last): Banana\n  Index -5 (5th to last): Apple\n\n=== Index Map ===\n\nPositive indexing:\n  fruits[0] = Apple\n  fruits[1] = Banana\n  fruits[2] = Cherry\n  fruits[3] = Date\n  fruits[4] = Elderberry\n\nNegative indexing:\n  fruits[-1] = Elderberry\n  fruits[-2] = Date\n  fruits[-3] = Cherry\n  fruits[-4] = Banana\n  fruits[-5] = Apple\n\n=== Using Variables as Indices ===\n\nItem at position 2: Cherry\nLast index is 4\nLast item: Elderberry\n\n=== Index Validation ===\n\nList has 5 items (indices 0-4)\nIs index 10 valid? False\n  ‚ùå Index 10 is out of range!\n\n=== Common Access Patterns ===\n\nPlaylist: ['Song A', 'Song B', 'Song C', 'Song D', 'Song E']\n  First song: Song A\n  Last song:  Song E\n  Middle song: Song C\n\n=== Iterating Through a List ===\n\nMethod 1: Direct iteration\n  - Apple\n  - Banana\n  - Cherry\n  - Date\n  - Elderberry\n\nMethod 2: Using indices\n  1. Apple\n  2. Banana\n  3. Cherry\n  4. Date\n  5. Elderberry\n\nMethod 3: Using enumerate (index + value)\n  Index 0: Apple\n  Index 1: Banana\n  Index 2: Cherry\n  Index 3: Date\n  Index 4: Elderberry\n\n=== Practical Example: Test Scores ===\n\nTest scores: [85, 92, 78, 95, 88, 90, 76, 94]\nTotal tests: 8\nFirst test: 85\nMost recent test: 94\nAverage score: 87.2\nHighest score: 95\nPassing scores (>=80): 6/8\n```",
              "code": "# List Basics: Ordered Collections\n\n# Creating Lists\nprint(\"=== Creating Lists ===\")\nprint()\n\n# List of strings\nfruits = [\"Apple\", \"Banana\", \"Cherry\", \"Date\", \"Elderberry\"]\nprint(f\"Fruits: {fruits}\")\n\n# List of numbers\nscores = [85, 92, 78, 95, 88]\nprint(f\"Scores: {scores}\")\n\n# List of mixed types\nstudent = [\"Alice\", 20, \"Computer Science\", 3.8, True]\nprint(f\"Student info: {student}\")\n\n# Empty list\nempty_list = []\nprint(f\"Empty list: {empty_list}\")\n\nprint()\n\n# List Length\nprint(\"=== List Length ===\")\nprint()\n\nprint(f\"Number of fruits: {len(fruits)}\")\nprint(f\"Number of scores: {len(scores)}\")\nprint(f\"Number of items in empty list: {len(empty_list)}\")\n\nprint()\n\n# Accessing Items (Positive Indexing)\nprint(\"=== Accessing Items (Positive Indexing) ===\")\nprint()\n\nprint(\"Fruits list:\", fruits)\nprint(f\"  Index 0 (first):  {fruits[0]}\")\nprint(f\"  Index 1 (second): {fruits[1]}\")\nprint(f\"  Index 2 (third):  {fruits[2]}\")\nprint(f\"  Index 3 (fourth): {fruits[3]}\")\nprint(f\"  Index 4 (fifth):  {fruits[4]}\")\n\nprint()\n\n# Accessing Items (Negative Indexing)\nprint(\"=== Accessing Items (Negative Indexing) ===\")\nprint()\n\nprint(\"Fruits list:\", fruits)\nprint(f\"  Index -1 (last):        {fruits[-1]}\")\nprint(f\"  Index -2 (2nd to last): {fruits[-2]}\")\nprint(f\"  Index -3 (3rd to last): {fruits[-3]}\")\nprint(f\"  Index -4 (4th to last): {fruits[-4]}\")\nprint(f\"  Index -5 (5th to last): {fruits[-5]}\")\n\nprint()\n\n# Visual Index Map\nprint(\"=== Index Map ===\")\nprint()\n\nprint(\"Positive indexing:\")\nfor i in range(len(fruits)):\n    print(f\"  fruits[{i}] = {fruits[i]}\")\n\nprint()\nprint(\"Negative indexing:\")\nfor i in range(-1, -len(fruits)-1, -1):\n    print(f\"  fruits[{i}] = {fruits[i]}\")\n\nprint()\n\n# Using Variables as Indices\nprint(\"=== Using Variables as Indices ===\")\nprint()\n\nposition = 2\nprint(f\"Item at position {position}: {fruits[position]}\")\n\nlast_index = len(fruits) - 1  # Last valid index\nprint(f\"Last index is {last_index}\")\nprint(f\"Last item: {fruits[last_index]}\")\n\nprint()\n\n# Checking if Index is Valid\nprint(\"=== Index Validation ===\")\nprint()\n\ntest_index = 10\nprint(f\"List has {len(fruits)} items (indices 0-{len(fruits)-1})\")\nprint(f\"Is index {test_index} valid? {test_index < len(fruits)}\")\n\nif test_index < len(fruits):\n    print(f\"  Item at index {test_index}: {fruits[test_index]}\")\nelse:\n    print(f\"  ‚ùå Index {test_index} is out of range!\")\n\nprint()\n\n# Common Patterns\nprint(\"=== Common Access Patterns ===\")\nprint()\n\nplaylist = [\"Song A\", \"Song B\", \"Song C\", \"Song D\", \"Song E\"]\n\nprint(\"Playlist:\", playlist)\nprint(f\"  First song: {playlist[0]}\")\nprint(f\"  Last song:  {playlist[-1]}\")\nprint(f\"  Middle song: {playlist[len(playlist)//2]}\")\n\nprint()\n\n# Iterating Through a List\nprint(\"=== Iterating Through a List ===\")\nprint()\n\nprint(\"Method 1: Direct iteration\")\nfor fruit in fruits:\n    print(f\"  - {fruit}\")\n\nprint()\nprint(\"Method 2: Using indices\")\nfor i in range(len(fruits)):\n    print(f\"  {i+1}. {fruits[i]}\")\n\nprint()\nprint(\"Method 3: Using enumerate (index + value)\")\nfor index, fruit in enumerate(fruits):\n    print(f\"  Index {index}: {fruit}\")\n\nprint()\n\n# Practical Example: Test Scores\nprint(\"=== Practical Example: Test Scores ===\")\nprint()\n\ntest_scores = [85, 92, 78, 95, 88, 90, 76, 94]\n\nprint(f\"Test scores: {test_scores}\")\nprint(f\"Total tests: {len(test_scores)}\")\nprint(f\"First test: {test_scores[0]}\")\nprint(f\"Most recent test: {test_scores[-1]}\")\n\n# Calculate average\ntotal = 0\nfor score in test_scores:\n    total = total + score\naverage = total / len(test_scores)\n\nprint(f\"Average score: {average:.1f}\")\n\n# Find highest score\nhighest = test_scores[0]\nfor score in test_scores:\n    if score > highest:\n        highest = score\n\nprint(f\"Highest score: {highest}\")\n\n# Count passing scores (>=80)\npassing = 0\nfor score in test_scores:\n    if score >= 80:\n        passing = passing + 1\n\nprint(f\"Passing scores (>=80): {passing}/{len(test_scores)}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### List Creation Syntax:\n```\n# Empty list\nmy_list = []\n\n# List with values\nmy_list = [value1, value2, value3]\n\n# Examples:\nnumbers = [1, 2, 3, 4, 5]\nwords = [\"hello\", \"world\"]\nmixed = [1, \"two\", 3.0, True]\n\n```\n### Accessing Elements:\n```\nmy_list[index]  # Get item at index\n\n# Positive indices (0-based):\nmy_list[0]   # First item\nmy_list[1]   # Second item\nmy_list[2]   # Third item\n\n# Negative indices (from end):\nmy_list[-1]  # Last item\nmy_list[-2]  # Second to last\nmy_list[-3]  # Third to last\n\n```\n### Index Diagram:\n<pre>List: [\"A\", \"B\", \"C\", \"D\", \"E\"]\n\nPositive:  0    1    2    3    4\n          [\"A\", \"B\", \"C\", \"D\", \"E\"]\nNegative: -5   -4   -3   -2   -1\n\nRules:\n  - First index: 0 (or -len)\n  - Last index:  len-1 (or -1)\n  - Valid range: 0 to len(list)-1\n</pre>### Common Operations:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Operation</th><th>Syntax</th><th>Example</th><th>Result</th></tr><tr><td>Create list</td><td>[item1, item2, ...]</td><td>[1, 2, 3]</td><td>[1, 2, 3]</td></tr><tr><td>Get length</td><td>len(list)</td><td>len([1,2,3])</td><td>3</td></tr><tr><td>Access item</td><td>list[index]</td><td>nums[0]</td><td>First item</td></tr><tr><td>Last item</td><td>list[-1]</td><td>nums[-1]</td><td>Last item</td></tr><tr><td>First item</td><td>list[0]</td><td>nums[0]</td><td>First item</td></tr></table>### Index Calculation:\n```\n# For a list with 5 items:\nlength = 5\n\n# Valid positive indices: 0, 1, 2, 3, 4\nfirst_index = 0\nlast_index = length - 1  # 4\n\n# Valid negative indices: -5, -4, -3, -2, -1\nfirst_negative = -length  # -5\nlast_negative = -1\n\n# Middle index (for odd-length lists)\nmiddle = length // 2  # 2 (third item)\n\n```\n### Iterating Patterns:\n#### Pattern 1: Direct Iteration (Most Common)\n```\nfor item in my_list:\n    print(item)\n\n# Use when: You just need each value\n# Example: Print each name\n\n```\n#### Pattern 2: Index-Based Iteration\n```\nfor i in range(len(my_list)):\n    print(my_list[i])\n\n# Use when: You need the index number\n# Example: \"Item 1: Apple, Item 2: Banana\"\n\n```\n#### Pattern 3: enumerate() - Best of Both\n```\nfor index, value in enumerate(my_list):\n    print(f\"{index}: {value}\")\n\n# Use when: You need both index AND value\n# Example: Show position and item\n\n```\n#### Pattern 4: enumerate with Custom Start\n```\nfor position, item in enumerate(my_list, start=1):\n    print(f\"#{position}: {item}\")\n\n# Use when: You want 1-based numbering\n# Example: \"#1: First, #2: Second\"\n\n```\n### Common Mistakes:\n#### 1. IndexError (Out of Range)\n```\n# WRONG:\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nprint(fruits[3])  # ERROR! Only indices 0, 1, 2 exist\n\n# CORRECT:\nif 3 < len(fruits):\n    print(fruits[3])\nelse:\n    print(\"Index out of range!\")\n\n# OR use try/except:\ntry:\n    print(fruits[3])\nexcept IndexError:\n    print(\"No item at that index!\")\n\n```\n#### 2. Off-by-One Error (len vs len-1)\n```\n# WRONG:\nfor i in range(len(fruits)):\n    print(fruits[i+1])  # Crashes on last iteration!\n\n# CORRECT:\nfor i in range(len(fruits)):\n    print(fruits[i])  # i goes from 0 to len-1\n\n```\n#### 3. Confusing Index 1 with First Item\n```\n# WRONG (thinking 1-based):\nfirst = fruits[1]  # Actually gets SECOND item!\n\n# CORRECT (zero-based):\nfirst = fruits[0]  # First item\n\n```\n#### 4. Forgetting Negative Index Behavior\n```\nfruits = [\"A\", \"B\", \"C\"]\n\nprint(fruits[-0])  # Same as fruits[0]! (A)\nprint(fruits[-1])  # Last item (C)\nprint(fruits[-4])  # ERROR! Only -3, -2, -1 valid\n\n```\n### Valid Index Ranges:\n```\n# For a list of length n:\n\n# Positive indices: 0 to n-1\nfruits = [\"A\", \"B\", \"C\"]  # length = 3\n# Valid: 0, 1, 2\n# Invalid: 3, 4, 5, ...\n\n# Negative indices: -n to -1\n# Valid: -3, -2, -1\n# Invalid: -4, -5, -6, ...\n\n# Check validity:\nindex = 5\nif -len(fruits) <= index < len(fruits):\n    print(fruits[index])\nelse:\n    print(\"Invalid index!\")\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. IndexError - Out of Range**\n```python\n# WRONG - Index 3 doesn't exist in 3-item list!\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nprint(fruits[3])  # IndexError: list index out of range\n\n# CORRECT - Valid indices are 0, 1, 2\nprint(fruits[2])  # Cherry (last item)\n# Or use -1 for last item:\nprint(fruits[-1])  # Cherry\n```\n\n**2. Off-By-One Error (1-Based Thinking)**\n```python\n# WRONG - Thinking index 1 is first item\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nfirst = fruits[1]  # Gets Banana, not Apple!\n\n# CORRECT - Python uses 0-based indexing\nfirst = fruits[0]  # Gets Apple\n```\n\n**3. Using len() Directly as Index**\n```python\n# WRONG - len() is always out of range!\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nlast = fruits[len(fruits)]  # IndexError! len=3, but max index is 2\n\n# CORRECT - Subtract 1 from length\nlast = fruits[len(fruits) - 1]  # Cherry\n# Or just use -1:\nlast = fruits[-1]  # Cherry (simpler!)\n```\n\n**4. Negative Index Off-By-One**\n```python\n# WRONG - -0 is the same as 0, not last item\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nlast = fruits[-0]  # Gets Apple (same as [0])!\n\n# CORRECT - Use -1 for last item\nlast = fruits[-1]  # Gets Cherry\n```\n\n**5. Empty List Access**\n```python\n# WRONG - Empty list has no valid indices!\nempty = []\nfirst = empty[0]  # IndexError: list index out of range\n\n# CORRECT - Check length first\nif len(empty) > 0:\n    first = empty[0]\nelse:\n    print(\"List is empty!\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Lists** are ordered collections created with square brackets: [item1, item2, ...]\n- **Zero-based indexing**: First item is index 0, not 1\n- **len(list)** returns the number of items\n- **Positive indices**: 0, 1, 2, ... (left to right)\n- **Negative indices**: -1, -2, -3, ... (right to left, -1 is last)\n- **Valid range**: 0 to len(list)-1 (or -len to -1)\n- **IndexError** occurs when index is out of range\n- **enumerate()** provides both index and value\n- **List can contain mixed types**: [1, \"hello\", True, 3.14]\n- **First item**: list[0] or list[-len(list)]\n- **Last item**: list[-1] or list[len(list)-1]\n\n### Essential Index Formulas:\n```\n# For a list with n items:\nfirst_index = 0\nlast_index = len(list) - 1\nmiddle_index = len(list) // 2\n\n# Convert 1-based position to 0-based index:\nindex = position - 1\n\n# Convert 0-based index to 1-based position:\nposition = index + 1\n\n# Check if index is valid:\nif 0 <= index < len(list):\n    # Safe to access\n\n```\n### Iteration Patterns:\n```\n# Pattern 1: Just values\nfor item in my_list:\n    print(item)\n\n# Pattern 2: Just indices\nfor i in range(len(my_list)):\n    print(i, my_list[i])\n\n# Pattern 3: Both (recommended!)\nfor index, value in enumerate(my_list):\n    print(index, value)\n\n# Pattern 4: 1-based numbering\nfor position, value in enumerate(my_list, start=1):\n    print(position, value)\n\n```\n### Before Moving On:\nMake sure you can:\n\n- Create lists with square brackets\n- Access items using positive indices (0, 1, 2, ...)\n- Access items using negative indices (-1, -2, -3, ...)\n- Get list length with len()\n- Iterate through lists with for loops\n- Use enumerate() for index + value\n- Validate indices before accessing\n- Calculate first, last, and middle indices\n\n### Coming Up Next:\nIn **Lesson 2: List Methods & Operations**, you'll learn how to:\n\n- Modify lists: append(), insert(), remove()\n- Sort and reverse lists\n- Find items: index(), count()\n- Combine lists with + and *\n- Check membership with 'in'\n\nLists become much more powerful when you can change them!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Music Playlist Manager** that works with a list of songs.\n\n**Requirements:**\n\n- Create a playlist with at least 5 song names\n- Display the total number of songs\n- Show the first song in the playlist\n- Show the last song in the playlist\n- Show the middle song (use integer division for the index)\n- Print all songs with their position numbers (1-based: \"1. Song Name\")\n- Ask the user for a position number and display that song (handle invalid input)\n- Calculate and display the average song title length\n\n**Example Output:**\n\n<pre>=== My Playlist ===\nTotal songs: 5\nNow playing: Bohemian Rhapsody\nFinal song: Sweet Child O' Mine\nMiddle song: Hotel California\n\nFull Playlist:\n1. Bohemian Rhapsody\n2. Stairway to Heaven\n3. Hotel California\n4. Imagine\n5. Sweet Child O' Mine\n\nEnter song position (1-5): 3\nPlaying: Hotel California\n\nAverage title length: 16.2 characters\n</pre>",
              "instructions": "Build a **Music Playlist Manager** that works with a list of songs.\n\n**Requirements:**\n\n- Create a playlist with at least 5 song names\n- Display the total number of songs\n- Show the first song in the playlist\n- Show the last song in the playlist\n- Show the middle song (use integer division for the index)\n- Print all songs with their position numbers (1-based: \"1. Song Name\")\n- Ask the user for a position number and display that song (handle invalid input)\n- Calculate and display the average song title length\n\n**Example Output:**\n\n<pre>=== My Playlist ===\nTotal songs: 5\nNow playing: Bohemian Rhapsody\nFinal song: Sweet Child O' Mine\nMiddle song: Hotel California\n\nFull Playlist:\n1. Bohemian Rhapsody\n2. Stairway to Heaven\n3. Hotel California\n4. Imagine\n5. Sweet Child O' Mine\n\nEnter song position (1-5): 3\nPlaying: Hotel California\n\nAverage title length: 16.2 characters\n</pre>",
              "starterCode": "# Music Playlist Manager - Starter Code\n\nprint(\"=== My Playlist ===\")\nprint()\n\n# YOUR CODE: Create a playlist list with 5 songs\nplaylist = [  # Fill in with song names\n\n]\n\n# YOUR CODE: Display statistics\nprint(f\"Total songs: {  }\")\nprint(f\"Now playing: {  }\")  # First song\nprint(f\"Final song: {  }\")   # Last song\nprint(f\"Middle song: {  }\")  # Middle song (use len(playlist)//2)\n\nprint()\nprint(\"Full Playlist:\")\n\n# YOUR CODE: Print all songs with position numbers (1-based)\nfor   # Use enumerate with start=1\n    print(f\"{  }. {  }\")\n\nprint()\n\n# YOUR CODE: Get user input for song position\nposition = int(input(f\"Enter song position (1-{len(playlist)}): \"))\n\n# YOUR CODE: Convert to 0-based index and validate\nindex =   # Position 1 = index 0\n\nif   # Check if index is valid\n    print(f\"Playing: {  }\")\nelse:\n    print(\"Invalid position!\")\n\nprint()\n\n# YOUR CODE: Calculate average title length\ntotal_length = 0\nfor   # Iterate through songs\n    total_length = total_length +   # Add length of each song title\n\naverage_length =   # Total length / number of songs\nprint(f\"Average title length: {average_length:.1f} characters\")",
              "solution": "# Music Playlist Manager - COMPLETE SOLUTION\n\nprint(\"=== My Playlist ===\")\nprint()\n\n# Create a playlist list with 5 songs\nplaylist = [\n    \"Bohemian Rhapsody\",\n    \"Stairway to Heaven\",\n    \"Hotel California\",\n    \"Imagine\",\n    \"Sweet Child O' Mine\"\n]\n\n# Display statistics\nprint(f\"Total songs: {len(playlist)}\")\nprint(f\"Now playing: {playlist[0]}\")  # First song\nprint(f\"Final song: {playlist[-1]}\")   # Last song\nprint(f\"Middle song: {playlist[len(playlist)//2]}\")  # Middle song\n\nprint()\nprint(\"Full Playlist:\")\n\n# Print all songs with position numbers (1-based)\nfor position, song in enumerate(playlist, start=1):\n    print(f\"{position}. {song}\")\n\nprint()\n\n# Get user input for song position\nposition = int(input(f\"Enter song position (1-{len(playlist)}): \"))\n\n# Convert to 0-based index and validate\nindex = position - 1  # Position 1 = index 0\n\nif 0 <= index < len(playlist):\n    print(f\"Playing: {playlist[index]}\")\nelse:\n    print(\"Invalid position!\")\n\nprint()\n\n# Calculate average title length\ntotal_length = 0\nfor song in playlist:\n    total_length = total_length + len(song)\n\naverage_length = total_length / len(playlist)\nprint(f\"Average title length: {average_length:.1f} characters\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For the playlist, use square brackets: playlist = ['Song1', 'Song2', ...]. First song is playlist[0], last is playlist[-1]. For enumerate, use: for position, song in enumerate(playlist, start=1). To convert 1-based position to 0-based index, subtract 1: index = position - 1. Valid index range is 0 to len(playlist)-1. For string length, use len(song)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-05-lesson-02",
          "title": "List Methods & Operations: Modifying Lists",
          "moduleId": "module-05",
          "order": 2,
          "estimatedMinutes": 28,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine your shopping list app on your phone. You can:\n\n- **Add items**: \"Add milk to list\" ‚Üí append()\n- **Insert items**: \"Add eggs after bread\" ‚Üí insert()\n- **Remove items**: \"Remove milk (already bought)\" ‚Üí remove()\n- **Sort items**: \"Sort alphabetically\" ‚Üí sort()\n- **Search items**: \"Is milk on the list?\" ‚Üí in operator\n- **Count duplicates**: \"How many times did I add milk?\" ‚Üí count()\n\nPython lists have built-in **methods** that let you modify and work with them easily!\n\n### Key Difference: Mutable vs Immutable\n**Lists are MUTABLE** - you can change them after creation:\n\n```\ngroceries = [\"Milk\", \"Eggs\"]\ngroceries.append(\"Bread\")  # Changes the list!\n# groceries is now [\"Milk\", \"Eggs\", \"Bread\"]\n\n```\nCompare to **strings (IMMUTABLE)** - cannot be changed:\n\n```\nname = \"Alice\"\nname.upper()  # Returns \"ALICE\" but doesn't change name\n# name is still \"Alice\"\n\n```\n### Categories of List Methods:\n#### 1. Adding Items\n\n- **append(item)**: Add item to end\n- **insert(index, item)**: Add item at specific position\n- **extend(list)**: Add all items from another list\n\n#### 2. Removing Items\n\n- **remove(item)**: Remove first occurrence of item\n- **pop()**: Remove and return last item\n- **pop(index)**: Remove and return item at index\n- **clear()**: Remove all items (empty the list)\n\n#### 3. Organizing\n\n- **sort()**: Sort items in place (ascending)\n- **reverse()**: Reverse the order\n\n#### 4. Finding & Counting\n\n- **index(item)**: Find position of first occurrence\n- **count(item)**: Count how many times item appears\n\n### List Operators:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Operator</th><th>Purpose</th><th>Example</th><th>Result</th></tr><tr><td>+</td><td>Concatenate (join)</td><td>[1,2] + [3,4]</td><td>[1,2,3,4]</td></tr><tr><td>*</td><td>Repeat</td><td>[1,2] * 3</td><td>[1,2,1,2,1,2]</td></tr><tr><td>in</td><td>Check membership</td><td>5 in [1,2,5]</td><td>True</td></tr><tr><td>not in</td><td>Check non-membership</td><td>9 not in [1,2,5]</td><td>True</td></tr></table>### Important Distinctions:\n#### Methods that MODIFY the list (return None):\n```\nmy_list.append(item)  # ‚úÖ Modifies list, returns None\nmy_list.sort()        # ‚úÖ Modifies list, returns None\nmy_list.reverse()     # ‚úÖ Modifies list, returns None\n\n```\n#### Methods that RETURN information (don't modify):\n```\nposition = my_list.index(item)  # ‚úÖ Returns position number\ncount = my_list.count(item)     # ‚úÖ Returns count\n\n```\n#### Methods that REMOVE and RETURN:\n```\nitem = my_list.pop()  # ‚úÖ Removes AND returns item\n\n```\n### Real-World Examples:\n\n- **Task manager**: append() to add tasks, remove() when complete\n- **Playlist**: insert() to add song at position, pop() to play last\n- **Shopping cart**: append() to add items, count() to check quantities\n- **Leaderboard**: sort() to rank players, reverse() for descending order"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Starting List ===\n\nOriginal list: ['Apple', 'Banana', 'Cherry']\nLength: 3\n\n=== Adding Items ===\n\nUsing append('Date'):\n  After append: ['Apple', 'Banana', 'Cherry', 'Date']\n\nUsing insert(1, 'Avocado'):\n  After insert: ['Apple', 'Avocado', 'Banana', 'Cherry', 'Date']\n\nUsing extend(['Fig', 'Grape']):\n  After extend: ['Apple', 'Avocado', 'Banana', 'Cherry', 'Date', 'Fig', 'Grape']\n\n=== Removing Items ===\n\nCurrent list: ['Apple', 'Avocado', 'Banana', 'Cherry', 'Date', 'Fig', 'Grape']\n\nUsing remove('Avocado'):\n  After remove: ['Apple', 'Banana', 'Cherry', 'Date', 'Fig', 'Grape']\n\nUsing pop():\n  Popped item: Grape\n  After pop: ['Apple', 'Banana', 'Cherry', 'Date', 'Fig']\n\nUsing pop(0):\n  Popped item: Apple\n  After pop(0): ['Banana', 'Cherry', 'Date', 'Fig']\n\n=== Organizing Lists ===\n\nOriginal numbers: [5, 2, 8, 1, 9, 3, 7]\n\nUsing sort():\n  After sort: [1, 2, 3, 5, 7, 8, 9]\n\nUsing sort(reverse=True):\n  After reverse sort: [9, 8, 7, 5, 3, 2, 1]\n\nUsing reverse():\n  After reverse: [1, 2, 3, 5, 7, 8, 9]\n\nOriginal words: ['Zebra', 'Apple', 'Mango', 'Banana']\nSorted words: ['Apple', 'Banana', 'Mango', 'Zebra']\n\n=== Finding & Counting ===\n\nScores: [85, 92, 78, 92, 88, 92, 95]\n\nUsing index(92):\n  First 92 is at index: 1\n\nUsing count(92):\n  Number of 92s: 3\n\nUsing count(100):\n  Number of 100s: 0\n\n=== List Operators ===\n\nlist1: [1, 2, 3]\nlist2: [4, 5, 6]\nlist1 + list2: [1, 2, 3, 4, 5, 6]\n\npattern: ['X', 'O']\npattern * 3: ['X', 'O', 'X', 'O', 'X', 'O']\n\nGroceries: ['Milk', 'Eggs', 'Bread', 'Butter']\n'Milk' in groceries: True\n'Cheese' in groceries: False\n'Cheese' not in groceries: True\n\n=== Practical Example: Task Manager ===\n\nAdding tasks...\nTasks: ['Study Python', 'Exercise', 'Call mom', 'Buy groceries']\n\nCompleted: Study Python\nRemaining: ['Exercise', 'Call mom', 'Buy groceries']\n\nAfter adding urgent task: ['Fix bug (URGENT!)', 'Exercise', 'Call mom', 'Buy groceries']\n\n'Exercise' found at position 1\n\n=== Practical Example: Shopping Cart ===\n\nCart: ['Laptop', 'Mouse', 'Keyboard', 'Mouse', 'Monitor', 'Mouse']\nNumber of mice in cart: 3\nAfter removing one mouse: ['Laptop', 'Keyboard', 'Mouse', 'Monitor', 'Mouse']\n\nCart sorted: ['Keyboard', 'Laptop', 'Monitor', 'Mouse', 'Mouse']\n\n=== Common Pitfalls ===\n\nWRONG: result = nums.append(4)\n  result is: None\n  nums is: [1, 2, 3, 4]\n\nList: [1, 2, 3]\nTrying to remove(5)...\n  ERROR: list.remove(x): x not in list\n  Safe: 5 not in list, skipping remove\n\nOriginal: [3, 1, 2]\nAfter original.sort(): [1, 2, 3]\n\nOriginal2: [3, 1, 2]\nsorted(original2): [1, 2, 3]\nOriginal2 unchanged: [3, 1, 2]\n```",
              "code": "# List Methods & Operations: Modifying Lists\n\n# Starting List\nprint(\"=== Starting List ===\")\nprint()\n\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nprint(f\"Original list: {fruits}\")\nprint(f\"Length: {len(fruits)}\")\n\nprint()\n\n# ========================================\n# ADDING ITEMS\n# ========================================\n\nprint(\"=== Adding Items ===\")\nprint()\n\n# append() - add to end\nprint(\"Using append('Date'):\")\nfruits.append(\"Date\")\nprint(f\"  After append: {fruits}\")\n\n# insert() - add at specific position\nprint(\"\\nUsing insert(1, 'Avocado'):\")\nfruits.insert(1, \"Avocado\")  # Insert at index 1\nprint(f\"  After insert: {fruits}\")\n\n# extend() - add multiple items\nprint(\"\\nUsing extend(['Fig', 'Grape']):\")\nfruits.extend([\"Fig\", \"Grape\"])\nprint(f\"  After extend: {fruits}\")\n\nprint()\n\n# ========================================\n# REMOVING ITEMS\n# ========================================\n\nprint(\"=== Removing Items ===\")\nprint()\n\nprint(f\"Current list: {fruits}\")\nprint()\n\n# remove() - remove first occurrence\nprint(\"Using remove('Avocado'):\")\nfruits.remove(\"Avocado\")\nprint(f\"  After remove: {fruits}\")\n\n# pop() - remove and return last item\nprint(\"\\nUsing pop():\")\nlast_item = fruits.pop()\nprint(f\"  Popped item: {last_item}\")\nprint(f\"  After pop: {fruits}\")\n\n# pop(index) - remove and return item at index\nprint(\"\\nUsing pop(0):\")\nfirst_item = fruits.pop(0)\nprint(f\"  Popped item: {first_item}\")\nprint(f\"  After pop(0): {fruits}\")\n\nprint()\n\n# ========================================\n# ORGANIZING\n# ========================================\n\nprint(\"=== Organizing Lists ===\")\nprint()\n\n# Create new list for sorting examples\nnumbers = [5, 2, 8, 1, 9, 3, 7]\nprint(f\"Original numbers: {numbers}\")\n\n# sort() - sort in place (ascending)\nprint(\"\\nUsing sort():\")\nnumbers.sort()\nprint(f\"  After sort: {numbers}\")\n\n# sort(reverse=True) - descending order\nprint(\"\\nUsing sort(reverse=True):\")\nnumbers.sort(reverse=True)\nprint(f\"  After reverse sort: {numbers}\")\n\n# reverse() - reverse current order\nprint(\"\\nUsing reverse():\")\nnumbers.reverse()\nprint(f\"  After reverse: {numbers}\")\n\nprint()\n\n# Sorting strings\nwords = [\"Zebra\", \"Apple\", \"Mango\", \"Banana\"]\nprint(f\"Original words: {words}\")\nwords.sort()\nprint(f\"Sorted words: {words}\")\n\nprint()\n\n# ========================================\n# FINDING & COUNTING\n# ========================================\n\nprint(\"=== Finding & Counting ===\")\nprint()\n\nscores = [85, 92, 78, 92, 88, 92, 95]\nprint(f\"Scores: {scores}\")\nprint()\n\n# index() - find position of item\nprint(\"Using index(92):\")\nposition = scores.index(92)\nprint(f\"  First 92 is at index: {position}\")\n\n# count() - count occurrences\nprint(\"\\nUsing count(92):\")\ncount_92 = scores.count(92)\nprint(f\"  Number of 92s: {count_92}\")\n\nprint(\"\\nUsing count(100):\")\ncount_100 = scores.count(100)\nprint(f\"  Number of 100s: {count_100}\")\n\nprint()\n\n# ========================================\n# LIST OPERATORS\n# ========================================\n\nprint(\"=== List Operators ===\")\nprint()\n\n# Concatenation (+)\nlist1 = [1, 2, 3]\nlist2 = [4, 5, 6]\nprint(f\"list1: {list1}\")\nprint(f\"list2: {list2}\")\nprint(f\"list1 + list2: {list1 + list2}\")\n\nprint()\n\n# Repetition (*)\npattern = [\"X\", \"O\"]\nprint(f\"pattern: {pattern}\")\nprint(f\"pattern * 3: {pattern * 3}\")\n\nprint()\n\n# Membership (in)\ngroceries = [\"Milk\", \"Eggs\", \"Bread\", \"Butter\"]\nprint(f\"Groceries: {groceries}\")\nprint(f\"'Milk' in groceries: {'Milk' in groceries}\")\nprint(f\"'Cheese' in groceries: {'Cheese' in groceries}\")\nprint(f\"'Cheese' not in groceries: {'Cheese' not in groceries}\")\n\nprint()\n\n# ========================================\n# PRACTICAL EXAMPLES\n# ========================================\n\nprint(\"=== Practical Example: Task Manager ===\")\nprint()\n\ntasks = []\n\n# Add tasks\nprint(\"Adding tasks...\")\ntasks.append(\"Study Python\")\ntasks.append(\"Exercise\")\ntasks.append(\"Call mom\")\ntasks.append(\"Buy groceries\")\nprint(f\"Tasks: {tasks}\")\n\nprint()\n\n# Complete a task\ncompleted = tasks.pop(0)  # Remove first task\nprint(f\"Completed: {completed}\")\nprint(f\"Remaining: {tasks}\")\n\nprint()\n\n# Add urgent task at beginning\ntasks.insert(0, \"Fix bug (URGENT!)\")\nprint(f\"After adding urgent task: {tasks}\")\n\nprint()\n\n# Check if task exists\ntask_to_find = \"Exercise\"\nif task_to_find in tasks:\n    position = tasks.index(task_to_find)\n    print(f\"'{task_to_find}' found at position {position}\")\nelse:\n    print(f\"'{task_to_find}' not in list\")\n\nprint()\n\nprint(\"=== Practical Example: Shopping Cart ===\")\nprint()\n\ncart = [\"Laptop\", \"Mouse\", \"Keyboard\", \"Mouse\", \"Monitor\", \"Mouse\"]\nprint(f\"Cart: {cart}\")\n\n# Count how many mice\nmouse_count = cart.count(\"Mouse\")\nprint(f\"Number of mice in cart: {mouse_count}\")\n\n# Remove one mouse\nif \"Mouse\" in cart:\n    cart.remove(\"Mouse\")  # Removes first occurrence\n    print(f\"After removing one mouse: {cart}\")\n\nprint()\n\n# Sort items alphabetically\ncart.sort()\nprint(f\"Cart sorted: {cart}\")\n\nprint()\n\n# ========================================\n# COMMON PITFALLS\n# ========================================\n\nprint(\"=== Common Pitfalls ===\")\nprint()\n\n# Pitfall 1: Using append() return value\nnums = [1, 2, 3]\nprint(\"WRONG: result = nums.append(4)\")\nresult = nums.append(4)\nprint(f\"  result is: {result}\")  # None!\nprint(f\"  nums is: {nums}\")      # [1, 2, 3, 4]\n\nprint()\n\n# Pitfall 2: remove() on non-existent item\ntest_list = [1, 2, 3]\nprint(f\"List: {test_list}\")\nprint(\"Trying to remove(5)...\")\ntry:\n    test_list.remove(5)\nexcept ValueError as e:\n    print(f\"  ERROR: {e}\")\n\n# Safe removal\nif 5 in test_list:\n    test_list.remove(5)\nelse:\n    print(\"  Safe: 5 not in list, skipping remove\")\n\nprint()\n\n# Pitfall 3: Modifying vs Creating New\noriginal = [3, 1, 2]\nprint(f\"Original: {original}\")\n\n# sort() modifies in place\noriginal.sort()\nprint(f\"After original.sort(): {original}\")  # Changed!\n\nprint()\n\n# To keep original, use sorted()\noriginal2 = [3, 1, 2]\nprint(f\"Original2: {original2}\")\nsorted_copy = sorted(original2)  # Returns new list\nprint(f\"sorted(original2): {sorted_copy}\")\nprint(f\"Original2 unchanged: {original2}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Adding Methods:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Method</th><th>Syntax</th><th>Effect</th><th>Returns</th></tr><tr><td>append</td><td>list.append(item)</td><td>Adds item to end</td><td>None</td></tr><tr><td>insert</td><td>list.insert(index, item)</td><td>Adds item at index</td><td>None</td></tr><tr><td>extend</td><td>list.extend([items])</td><td>Adds all items to end</td><td>None</td></tr></table>#### Examples:\n```\n# append() - add to end\nfruits = [\"Apple\", \"Banana\"]\nfruits.append(\"Cherry\")  # [\"Apple\", \"Banana\", \"Cherry\"]\n\n# insert() - add at position\nfruits.insert(0, \"Avocado\")  # [\"Avocado\", \"Apple\", \"Banana\", \"Cherry\"]\nfruits.insert(2, \"Blueberry\")  # [\"Avocado\", \"Apple\", \"Blueberry\", \"Banana\", \"Cherry\"]\n\n# extend() - add multiple items\nfruits.extend([\"Date\", \"Fig\"])  # Adds both to end\n\n# Common mistake:\nfruits.append([\"X\", \"Y\"])  # Adds entire list as ONE item!\n# Result: [..., [\"X\", \"Y\"]]  (nested list!)\n\n```\n### Removing Methods:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Method</th><th>Syntax</th><th>Effect</th><th>Returns</th></tr><tr><td>remove</td><td>list.remove(item)</td><td>Removes first occurrence</td><td>None</td></tr><tr><td>pop</td><td>list.pop()</td><td>Removes last item</td><td>Removed item</td></tr><tr><td>pop</td><td>list.pop(index)</td><td>Removes item at index</td><td>Removed item</td></tr><tr><td>clear</td><td>list.clear()</td><td>Removes all items</td><td>None</td></tr></table>#### Examples:\n```\nnumbers = [1, 2, 3, 2, 4]\n\n# remove() - removes first match\nnumbers.remove(2)  # [1, 3, 2, 4] (first 2 removed)\n\n# pop() - removes and returns last\nlast = numbers.pop()  # last = 4, numbers = [1, 3, 2]\n\n# pop(index) - removes and returns at index\nsecond = numbers.pop(1)  # second = 3, numbers = [1, 2]\n\n# clear() - empty the list\nnumbers.clear()  # []\n\n```\n#### remove() vs pop():\n```\n# remove(item) - find by VALUE\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nfruits.remove(\"Banana\")  # Finds and removes \"Banana\"\n\n# pop(index) - remove by POSITION\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nfruits.pop(1)  # Removes item at index 1 (\"Banana\")\n\n# pop() - remove last item\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\nlast = fruits.pop()  # Removes and returns \"Cherry\"\n\n```\n### Organizing Methods:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Method</th><th>Syntax</th><th>Effect</th><th>Returns</th></tr><tr><td>sort</td><td>list.sort()</td><td>Sorts ascending (A-Z, 0-9)</td><td>None</td></tr><tr><td>sort</td><td>list.sort(reverse=True)</td><td>Sorts descending (Z-A, 9-0)</td><td>None</td></tr><tr><td>reverse</td><td>list.reverse()</td><td>Reverses current order</td><td>None</td></tr></table>#### Examples:\n```\nnumbers = [5, 2, 8, 1, 9]\n\n# sort() - ascending (low to high)\nnumbers.sort()  # [1, 2, 5, 8, 9]\n\n# sort(reverse=True) - descending (high to low)\nnumbers.sort(reverse=True)  # [9, 8, 5, 2, 1]\n\n# reverse() - flip order\nnumbers = [1, 2, 3, 4, 5]\nnumbers.reverse()  # [5, 4, 3, 2, 1]\n\n```\n#### sort() vs sorted():\n```\n# list.sort() - modifies list, returns None\noriginal = [3, 1, 2]\noriginal.sort()  # original is now [1, 2, 3]\n\n# sorted(list) - returns new list, keeps original\noriginal = [3, 1, 2]\nnew_list = sorted(original)  # new_list = [1, 2, 3]\n                              # original = [3, 1, 2] (unchanged)\n\n```\n### Finding & Counting Methods:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Method</th><th>Syntax</th><th>Returns</th><th>Error if not found?</th></tr><tr><td>index</td><td>list.index(item)</td><td>Index of first occurrence</td><td>Yes (ValueError)</td></tr><tr><td>count</td><td>list.count(item)</td><td>Number of occurrences</td><td>No (returns 0)</td></tr></table>#### Examples:\n```\nscores = [85, 92, 78, 92, 88, 92]\n\n# index() - find position\nposition = scores.index(92)  # 1 (first occurrence)\n\n# count() - count occurrences\ncount = scores.count(92)  # 3 (appears 3 times)\ncount_100 = scores.count(100)  # 0 (not in list)\n\n# index() with non-existent item\ntry:\n    position = scores.index(100)\nexcept ValueError:\n    print(\"Not found!\")\n\n# Safe approach with index()\nif 100 in scores:\n    position = scores.index(100)\nelse:\n    position = -1  # Convention: -1 means \"not found\"\n\n```\n### List Operators:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Operator</th><th>Operation</th><th>Example</th><th>Result</th></tr><tr><td>+</td><td>Concatenate</td><td>[1,2] + [3,4]</td><td>[1,2,3,4]</td></tr><tr><td>*</td><td>Repeat</td><td>[1,2] * 3</td><td>[1,2,1,2,1,2]</td></tr><tr><td>in</td><td>Membership</td><td>5 in [1,5,9]</td><td>True</td></tr><tr><td>not in</td><td>Non-membership</td><td>7 not in [1,5,9]</td><td>True</td></tr></table>#### Examples:\n```\n# Concatenation (+)\nlist1 = [1, 2, 3]\nlist2 = [4, 5, 6]\ncombined = list1 + list2  # [1, 2, 3, 4, 5, 6]\n\n# Repetition (*)\npattern = [\"A\", \"B\"]\nrepeated = pattern * 4  # [\"A\", \"B\", \"A\", \"B\", \"A\", \"B\", \"A\", \"B\"]\n\n# Membership (in)\nfruits = [\"Apple\", \"Banana\", \"Cherry\"]\n\nif \"Banana\" in fruits:\n    print(\"We have bananas!\")\n\nif \"Grape\" not in fruits:\n    print(\"No grapes available\")\n\n```\n### Method Return Values:\n```\n# These MODIFY the list and return None:\nresult = my_list.append(item)     # result = None\nresult = my_list.sort()           # result = None\nresult = my_list.reverse()        # result = None\nresult = my_list.remove(item)     # result = None\n\n# These RETURN information:\nitem = my_list.pop()              # Returns removed item\nindex = my_list.index(item)       # Returns position\ncount = my_list.count(item)       # Returns count\n\n# Common mistake:\nfruits = [\"Apple\", \"Banana\"]\nfruits = fruits.append(\"Cherry\")  # WRONG! fruits is now None!\n\n# Correct:\nfruits.append(\"Cherry\")  # fruits is still the list\n\n```\n### Safe Removal Patterns:\n```\n# Pattern 1: Check before remove()\nif item in my_list:\n    my_list.remove(item)\nelse:\n    print(f\"{item} not in list\")\n\n# Pattern 2: Try/except\ntry:\n    my_list.remove(item)\nexcept ValueError:\n    print(f\"{item} not in list\")\n\n# Pattern 3: Use count() to check\nif my_list.count(item) > 0:\n    my_list.remove(item)\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Assigning the return value of modifying methods**\n```python\n# WRONG - append() returns None, not the list!\nmy_list = [1, 2, 3]\nmy_list = my_list.append(4)  # my_list is now None!\nprint(my_list)  # None\n\n# CORRECT - modifying methods change the list in place\nmy_list = [1, 2, 3]\nmy_list.append(4)  # Modifies my_list directly\nprint(my_list)  # [1, 2, 3, 4]\n```\n\n**2. Calling remove() on an item not in the list**\n```python\n# WRONG - raises ValueError if item doesn't exist\nnumbers = [1, 2, 3]\nnumbers.remove(5)  # ValueError: list.remove(x): x not in list\n\n# CORRECT - check membership first\nnumbers = [1, 2, 3]\nif 5 in numbers:\n    numbers.remove(5)\nelse:\n    print(\"Item not found\")\n```\n\n**3. Confusing append() with extend()**\n```python\n# WRONG - append() adds the list as a single element\nfruits = [\"apple\"]\nfruits.append([\"banana\", \"cherry\"])\nprint(fruits)  # [\"apple\", [\"banana\", \"cherry\"]] - nested list!\n\n# CORRECT - use extend() to add multiple items\nfruits = [\"apple\"]\nfruits.extend([\"banana\", \"cherry\"])\nprint(fruits)  # [\"apple\", \"banana\", \"cherry\"]\n```\n\n**4. Forgetting that sort() modifies the original list**\n```python\n# WRONG - assuming sort() returns a new list\noriginal = [3, 1, 2]\nsorted_list = original.sort()  # sorted_list is None!\nprint(original)  # [1, 2, 3] - original was modified!\n\n# CORRECT - use sorted() to get a new list\noriginal = [3, 1, 2]\nsorted_list = sorted(original)  # Returns new list\nprint(original)  # [3, 1, 2] - unchanged\nprint(sorted_list)  # [1, 2, 3]\n```\n\n**5. Using index() without checking if item exists**\n```python\n# WRONG - raises ValueError if item not found\nfruits = [\"apple\", \"banana\"]\npos = fruits.index(\"cherry\")  # ValueError!\n\n# CORRECT - check membership first\nfruits = [\"apple\", \"banana\"]\nif \"cherry\" in fruits:\n    pos = fruits.index(\"cherry\")\nelse:\n    pos = -1  # Convention for \"not found\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Lists are mutable** - methods change the list in place\n- **append(item)**: Add to end (most common)\n- **insert(index, item)**: Add at specific position\n- **extend(list)**: Add multiple items\n- **remove(item)**: Remove first occurrence by value\n- **pop()**: Remove and return last item\n- **pop(index)**: Remove and return item at index\n- **sort()**: Sort in place (ascending)\n- **reverse()**: Reverse in place\n- **index(item)**: Find position (raises error if not found)\n- **count(item)**: Count occurrences (returns 0 if not found)\n- **+ operator**: Concatenate lists\n- *** operator**: Repeat lists\n- **in operator**: Check membership\n\n### Important Distinctions:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Modify List (return None)</th><th>Return Information</th></tr><tr><td>append(), insert(), extend()</td><td>index() returns position</td></tr><tr><td>remove(), clear()</td><td>count() returns count</td></tr><tr><td>sort(), reverse()</td><td>pop() returns item</td></tr></table>### Safety Patterns:\n```\n# Before remove(), check membership:\nif item in my_list:\n    my_list.remove(item)\n\n# Before index(), check existence:\nif item in my_list:\n    position = my_list.index(item)\n\n# To keep original, use sorted():\noriginal = [3, 1, 2]\nnew_list = sorted(original)  # original unchanged\n\n```\n### Common Mistakes:\n\n<li>**Using return value of modifying methods**:```\n# WRONG:\nmy_list = my_list.append(item)  # my_list becomes None!\n\n# CORRECT:\nmy_list.append(item)  # my_list stays as list\n\n```\n</li><li>**Calling remove() on non-existent item**:```\n# WRONG:\nmy_list.remove(item)  # Error if item not in list!\n\n# CORRECT:\nif item in my_list:\n    my_list.remove(item)\n\n```\n</li><li>**append() vs extend() confusion**:```\nmy_list.append([1, 2])  # Adds ONE item (nested list)\nmy_list.extend([1, 2])  # Adds TWO items (1 and 2)\n\n```\n</li>\n### Coming Up Next:\nIn **Lesson 3: List Slicing**, you'll learn how to:\n\n- Extract portions of lists\n- Use slice notation [start:stop:step]\n- Copy lists properly\n- Replace sections of lists\n- Reverse lists with slicing\n\nSlicing is one of Python's most powerful features!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Contact Manager** that maintains a list of contact names with various operations.\n\n**Requirements:**\n\n- Start with an empty contact list\n- Add 5 contacts using append()\n- Insert an \"emergency contact\" at the beginning using insert()\n- Display all contacts numbered (1-based)\n- Remove a specific contact by name using remove()\n- Remove the last contact using pop() and show what was removed\n- Sort the contacts alphabetically\n- Ask user to search for a contact:\n<li>If found, show position\n- If not found, show message\n\n</li>- Count how many contacts start with a specific letter\n- Display final contact list\n\n**Example Output:**\n\n<pre>=== Contact Manager ===\n\nAdded 5 contacts\nAdded emergency contact at top\n\nAll Contacts:\n1. Emergency Services\n2. Alice Johnson\n3. Bob Smith\n4. Charlie Brown\n5. Diana Ross\n6. Eve Adams\n\nRemoved: Bob Smith\nLast contact removed: Eve Adams\n\nContacts sorted alphabetically:\n1. Alice Johnson\n2. Charlie Brown\n3. Diana Ross\n4. Emergency Services\n\nSearch for contact: Alice\n‚úÖ 'Alice Johnson' found at position 1\n\nContacts starting with 'D': 1\n\nFinal contact list: ['Alice Johnson', 'Charlie Brown', 'Diana Ross', 'Emergency Services']\n</pre>",
              "instructions": "Build a **Contact Manager** that maintains a list of contact names with various operations.\n\n**Requirements:**\n\n- Start with an empty contact list\n- Add 5 contacts using append()\n- Insert an \"emergency contact\" at the beginning using insert()\n- Display all contacts numbered (1-based)\n- Remove a specific contact by name using remove()\n- Remove the last contact using pop() and show what was removed\n- Sort the contacts alphabetically\n- Ask user to search for a contact:\n<li>If found, show position\n- If not found, show message\n\n</li>- Count how many contacts start with a specific letter\n- Display final contact list\n\n**Example Output:**\n\n<pre>=== Contact Manager ===\n\nAdded 5 contacts\nAdded emergency contact at top\n\nAll Contacts:\n1. Emergency Services\n2. Alice Johnson\n3. Bob Smith\n4. Charlie Brown\n5. Diana Ross\n6. Eve Adams\n\nRemoved: Bob Smith\nLast contact removed: Eve Adams\n\nContacts sorted alphabetically:\n1. Alice Johnson\n2. Charlie Brown\n3. Diana Ross\n4. Emergency Services\n\nSearch for contact: Alice\n‚úÖ 'Alice Johnson' found at position 1\n\nContacts starting with 'D': 1\n\nFinal contact list: ['Alice Johnson', 'Charlie Brown', 'Diana Ross', 'Emergency Services']\n</pre>",
              "starterCode": "# Contact Manager - Starter Code\n\nprint(\"=== Contact Manager ===\")\nprint()\n\n# YOUR CODE: Create empty contact list\ncontacts = \n\n# YOUR CODE: Add 5 contacts using append()\ncontacts.  (\"Alice Johnson\")\ncontacts.  (\"Bob Smith\")\ncontacts.  (\"Charlie Brown\")\ncontacts.  (\"Diana Ross\")\ncontacts.  (\"Eve Adams\")\n\nprint(f\"Added {len(contacts)} contacts\")\n\n# YOUR CODE: Insert emergency contact at beginning (index 0)\ncontacts.  (  , \"Emergency Services\")\nprint(\"Added emergency contact at top\")\n\nprint()\nprint(\"All Contacts:\")\n\n# YOUR CODE: Print all contacts with 1-based numbering\nfor   in enumerate(contacts, start=  ):\n    print(f\"{  }. {  }\")\n\nprint()\n\n# YOUR CODE: Remove \"Bob Smith\" using remove()\ncontacts.  (\"Bob Smith\")\nprint(\"Removed: Bob Smith\")\n\n# YOUR CODE: Remove last contact using pop() and save it\nlast_contact = contacts.  ()\nprint(f\"Last contact removed: {last_contact}\")\n\nprint()\n\n# YOUR CODE: Sort contacts alphabetically\ncontacts.  ()\n\nprint(\"Contacts sorted alphabetically:\")\nfor position, name in enumerate(contacts, start=1):\n    print(f\"{position}. {name}\")\n\nprint()\n\n# YOUR CODE: Search for a contact\nsearch_term = input(\"Search for contact: \")\n\n# Check if any contact contains the search term\nfound = False\nfor position, name in enumerate(contacts, start=1):\n    if search_term.lower() in name.lower():  # Case-insensitive search\n        print(f\"‚úÖ '{name}' found at position {position}\")\n        found = True\n        break\n\nif not found:\n    print(f\"‚ùå No contact found matching '{search_term}'\")\n\nprint()\n\n# YOUR CODE: Count contacts starting with a letter\nletter = input(\"Count contacts starting with letter: \").upper()\ncount = 0\n\nfor name in contacts:\n    if name.startswith(letter):  # Check if name starts with letter\n        count = count + 1\n\nprint(f\"Contacts starting with '{letter}': {count}\")\n\nprint()\nprint(f\"Final contact list: {contacts}\")",
              "solution": "# Contact Manager - COMPLETE SOLUTION\n\nprint(\"=== Contact Manager ===\")\nprint()\n\n# Create empty contact list\ncontacts = []\n\n# Add 5 contacts using append()\ncontacts.append(\"Alice Johnson\")\ncontacts.append(\"Bob Smith\")\ncontacts.append(\"Charlie Brown\")\ncontacts.append(\"Diana Ross\")\ncontacts.append(\"Eve Adams\")\n\nprint(f\"Added {len(contacts)} contacts\")\n\n# Insert emergency contact at beginning (index 0)\ncontacts.insert(0, \"Emergency Services\")\nprint(\"Added emergency contact at top\")\n\nprint()\nprint(\"All Contacts:\")\n\n# Print all contacts with 1-based numbering\nfor position, name in enumerate(contacts, start=1):\n    print(f\"{position}. {name}\")\n\nprint()\n\n# Remove \"Bob Smith\" using remove()\ncontacts.remove(\"Bob Smith\")\nprint(\"Removed: Bob Smith\")\n\n# Remove last contact using pop() and save it\nlast_contact = contacts.pop()\nprint(f\"Last contact removed: {last_contact}\")\n\nprint()\n\n# Sort contacts alphabetically\ncontacts.sort()\n\nprint(\"Contacts sorted alphabetically:\")\nfor position, name in enumerate(contacts, start=1):\n    print(f\"{position}. {name}\")\n\nprint()\n\n# Search for a contact\nsearch_term = input(\"Search for contact: \")\n\n# Check if any contact contains the search term\nfound = False\nfor position, name in enumerate(contacts, start=1):\n    if search_term.lower() in name.lower():  # Case-insensitive search\n        print(f\"‚úÖ '{name}' found at position {position}\")\n        found = True\n        break\n\nif not found:\n    print(f\"‚ùå No contact found matching '{search_term}'\")\n\nprint()\n\n# Count contacts starting with a letter\nletter = input(\"Count contacts starting with letter: \").upper()\ncount = 0\n\nfor name in contacts:\n    if name.startswith(letter):  # Check if name starts with letter\n        count = count + 1\n\nprint(f\"Contacts starting with '{letter}': {count}\")\n\nprint()\nprint(f\"Final contact list: {contacts}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Empty list: contacts = []. For append: contacts.append(name). For insert at beginning: contacts.insert(0, name). For enumerate: for position, name in enumerate(contacts, start=1). For remove: contacts.remove(name). For pop: item = contacts.pop(). For sort: contacts.sort(). Use name.startswith(letter) to check if name starts with a letter."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-05-lesson-03",
          "title": "List Slicing: Extract Portions of Lists",
          "moduleId": "module-05",
          "order": 3,
          "estimatedMinutes": 26,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you have a playlist of 20 songs, but you want to:\n\n- **Play songs 3-7** (a specific range)\n- **Play every other song** (skip songs)\n- **Play the playlist backwards** (reverse order)\n- **Get the first 5 songs** (beginning portion)\n- **Get the last 3 songs** (ending portion)\n\nThis is **slicing** - extracting portions of a list!\n\n### What is Slicing?\nSlicing creates a **new list** containing a subset of the original list's elements.\n\n```\nplaylist = [\"Song1\", \"Song2\", \"Song3\", \"Song4\", \"Song5\"]\nfirst_three = playlist[0:3]  # [\"Song1\", \"Song2\", \"Song3\"]\n\n```\n### Slice Notation: [start:stop:step]\n```\nmy_list[start:stop:step]\n\n- start: Index to begin (inclusive) - defaults to 0\n- stop:  Index to end (EXCLUSIVE!) - defaults to end\n- step:  How many to skip - defaults to 1\n\n```\n**Key rule:** stop index is NEVER included in the result!\n\n### Real-World Analogies:\n\n- **Video playback**: [start_minute:end_minute] ‚Üí \"Play from 2:30 to 5:00\"\n- **Page range**: [10:20] ‚Üí \"Print pages 10-19\" (20 not included!)\n- **Array slice**: [2:5] ‚Üí Positions 2, 3, 4 (not 5!)\n\n### Common Slice Patterns:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Syntax</th><th>Meaning</th></tr><tr><td>First n items</td><td>[:n]</td><td>From start to index n-1</td></tr><tr><td>Last n items</td><td>[-n:]</td><td>Last n elements</td></tr><tr><td>All except first</td><td>[1:]</td><td>From index 1 to end</td></tr><tr><td>All except last</td><td>[:-1]</td><td>From start to 2nd-to-last</td></tr><tr><td>Copy entire list</td><td>[:]</td><td>Complete shallow copy</td></tr><tr><td>Reverse list</td><td>[::-1]</td><td>All elements backwards</td></tr><tr><td>Every 2nd item</td><td>[::2]</td><td>Skip every other</td></tr><tr><td>Middle portion</td><td>[2:5]</td><td>Indices 2, 3, 4</td></tr></table>### Why is stop EXCLUSIVE?\n```\nnumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nfirst_five = numbers[0:5]  # [0, 1, 2, 3, 4]\n# Length = stop - start = 5 - 0 = 5 items ‚úì\n\nmiddle_three = numbers[3:6]  # [3, 4, 5]\n# Length = 6 - 3 = 3 items ‚úì\n\n```\nThis makes length calculations simple: `len(slice) = stop - start`\n\n### Examples:\n#### 1. Get First 3 Items\n```\nletters = [\"A\", \"B\", \"C\", \"D\", \"E\"]\nfirst_three = letters[0:3]  # [\"A\", \"B\", \"C\"]\n# Same as: letters[:3]  (0 is default start)\n\n```\n#### 2. Get Last 2 Items\n```\nlast_two = letters[-2:]  # [\"D\", \"E\"]\n# Starts at -2 (second to last), goes to end\n\n```\n#### 3. Get Middle Items (indices 1-3)\n```\nmiddle = letters[1:4]  # [\"B\", \"C\", \"D\"]\n# Indices 1, 2, 3 (NOT 4!)\n\n```\n#### 4. Skip Every Other Item\n```\nevery_other = letters[::2]  # [\"A\", \"C\", \"E\"]\n# Step = 2, so skip one each time\n\n```\n#### 5. Reverse the List\n```\nreversed_list = letters[::-1]  # [\"E\", \"D\", \"C\", \"B\", \"A\"]\n# Negative step = go backwards\n\n```\n### Slicing vs Indexing:\n```\nnumbers = [10, 20, 30, 40, 50]\n\n# Indexing - returns single item\nitem = numbers[2]  # 30 (an integer)\n\n# Slicing - returns list (even if one item)\nslice_result = numbers[2:3]  # [30] (a list with one item)\n\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nOriginal list: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']\nIndices:       0    1    2    3    4    5    6    7    8    9\n\n=== Basic Slicing [start:stop] ===\n\nletters[0:3]:   ['A', 'B', 'C']\n  (Indices 0, 1, 2 - NOT 3!)\n\nletters[2:6]:   ['C', 'D', 'E', 'F']\n  (Indices 2, 3, 4, 5 - NOT 6!)\n\nletters[7:10]:  ['H', 'I', 'J']\n  (Indices 7, 8, 9)\n\n=== Omitting Start or Stop ===\n\nletters[:5]:    ['A', 'B', 'C', 'D', 'E']\n  (From beginning to index 4)\n\nletters[5:]:    ['F', 'G', 'H', 'I', 'J']\n  (From index 5 to end)\n\nletters[:]:     ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']\n  (Complete copy of list)\n\n=== Negative Indices in Slices ===\n\nOriginal: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']\n\nletters[-3:]:   ['H', 'I', 'J']\n  (Last 3 items)\n\nletters[:-2]:   ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']\n  (Everything except last 2)\n\nletters[2:-2]:  ['C', 'D', 'E', 'F', 'G', 'H']\n  (From index 2 to 2nd-to-last)\n\n=== Step Parameter [start:stop:step] ===\n\nOriginal: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']\n\nletters[::2]:   ['A', 'C', 'E', 'G', 'I']\n  (Indices 0, 2, 4, 6, 8)\n\nletters[::3]:   ['A', 'D', 'G', 'J']\n  (Indices 0, 3, 6, 9)\n\nletters[:6:2]:  ['A', 'C', 'E']\n  (Indices 0, 2, 4 from first 6)\n\n=== Reversing with Negative Step ===\n\nOriginal: ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']\n\nletters[::-1]:  ['J', 'I', 'H', 'G', 'F', 'E', 'D', 'C', 'B', 'A']\n  (Completely reversed)\n\nletters[4::-1]: ['E', 'D', 'C', 'B', 'A']\n  (First 5 items reversed)\n\nletters[::-2]:  ['J', 'H', 'F', 'D', 'B']\n  (Every 2nd item, going backwards)\n\n=== Slicing Creates a Copy ===\n\nOriginal: [1, 2, 3, 4, 5]\nSlice [1:4]: [2, 3, 4]\n\nAfter changing slice_copy[0] to 99:\n  slice_copy: [99, 3, 4]\n  original:   [1, 2, 3, 4, 5]\n  (Original unchanged - slice is a copy!)\n\n=== Practical Example: Weekly Data ===\n\nDaily temperatures: [72, 75, 73, 71, 70, 68, 74]\n\nWeekday temps: [72, 75, 73, 71, 70]\nWeekend temps: [68, 74]\nFirst half: [72, 75, 73, 71]\nSecond half: [71, 70, 68, 74]\n\n=== Practical Example: Playlist ===\n\nFull playlist (8 songs):\n  1. Bohemian Rhapsody\n  2. Stairway to Heaven\n  3. Hotel California\n  4. Imagine\n  5. Sweet Child O' Mine\n  6. Purple Haze\n  7. Like a Rolling Stone\n  8. Smells Like Teen Spirit\n\nTop 3: ['Bohemian Rhapsody', 'Stairway to Heaven', 'Hotel California']\nBottom 2: ['Like a Rolling Stone', 'Smells Like Teen Spirit']\nOdd positions: ['Bohemian Rhapsody', 'Hotel California', 'Sweet Child O\\' Mine', 'Like a Rolling Stone']\n\nReversed playlist:\n  1. Smells Like Teen Spirit\n  2. Like a Rolling Stone\n  3. Purple Haze\n  4. Sweet Child O' Mine\n  5. Imagine\n  6. Hotel California\n  7. Stairway to Heaven\n  8. Bohemian Rhapsody\n\n=== Practical Example: Array Processing ===\n\nData: [5, 12, 8, 23, 15, 7, 19, 11, 6, 14]\n\nFirst 3 values: [5, 12, 8]\nAverage of first 3: 8.3\n\nLast 3 values: [11, 6, 14]\nAverage of last 3: 10.3\n\nMiddle values (exclude first 2 & last 2): [8, 23, 15, 7, 19, 11]\nAverage of middle: 13.8\n\nEven indices (0,2,4...): [5, 8, 15, 19, 6]\nOdd indices (1,3,5...): [12, 23, 7, 11, 14]\n\n=== Slice Length Calculation ===\n\nnumbers[2:7]: [2, 3, 4, 5, 6]\nLength: 5 = stop - start = 7 - 2 = 5\n\nnumbers[:5]: [0, 1, 2, 3, 4]\nLength: 5 = stop - start = 5 - 0 = 5\n\nnumbers[3:]: [3, 4, 5, 6, 7, 8, 9]\nLength: 7 = len(list) - start = 10 - 3 = 7\n```",
              "code": "# List Slicing: Extract Portions of Lists\n\n# Sample list for all examples\nletters = [\"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\"]\nprint(\"Original list:\", letters)\nprint(f\"Indices:       0    1    2    3    4    5    6    7    8    9\")\nprint()\n\n# ========================================\n# BASIC SLICING: [start:stop]\n# ========================================\n\nprint(\"=== Basic Slicing [start:stop] ===\")\nprint()\n\n# Get first 3 items [0:3]\nfirst_three = letters[0:3]\nprint(f\"letters[0:3]:   {first_three}\")\nprint(\"  (Indices 0, 1, 2 - NOT 3!)\")\nprint()\n\n# Get items 2-5 [2:6]\nmiddle = letters[2:6]\nprint(f\"letters[2:6]:   {middle}\")\nprint(\"  (Indices 2, 3, 4, 5 - NOT 6!)\")\nprint()\n\n# Get last 3 items [7:10]\nlast_three = letters[7:10]\nprint(f\"letters[7:10]:  {last_three}\")\nprint(\"  (Indices 7, 8, 9)\")\nprint()\n\n# ========================================\n# OMITTING START OR STOP\n# ========================================\n\nprint(\"=== Omitting Start or Stop ===\")\nprint()\n\n# Omit start (defaults to 0)\nfirst_five = letters[:5]\nprint(f\"letters[:5]:    {first_five}\")\nprint(\"  (From beginning to index 4)\")\nprint()\n\n# Omit stop (defaults to end)\nfrom_index_five = letters[5:]\nprint(f\"letters[5:]:    {from_index_five}\")\nprint(\"  (From index 5 to end)\")\nprint()\n\n# Omit both (copy entire list)\nfull_copy = letters[:]\nprint(f\"letters[:]:     {full_copy}\")\nprint(\"  (Complete copy of list)\")\nprint()\n\n# ========================================\n# NEGATIVE INDICES IN SLICES\n# ========================================\n\nprint(\"=== Negative Indices in Slices ===\")\nprint()\n\nprint(f\"Original: {letters}\")\nprint()\n\n# Last 3 items using negative index\nlast_three_neg = letters[-3:]\nprint(f\"letters[-3:]:   {last_three_neg}\")\nprint(\"  (Last 3 items)\")\nprint()\n\n# All except last 2\nall_but_last_two = letters[:-2]\nprint(f\"letters[:-2]:   {all_but_last_two}\")\nprint(\"  (Everything except last 2)\")\nprint()\n\n# From index 2 to 2nd-to-last\nmiddle_portion = letters[2:-2]\nprint(f\"letters[2:-2]:  {middle_portion}\")\nprint(\"  (From index 2 to 2nd-to-last)\")\nprint()\n\n# ========================================\n# STEP PARAMETER [start:stop:step]\n# ========================================\n\nprint(\"=== Step Parameter [start:stop:step] ===\")\nprint()\n\nprint(f\"Original: {letters}\")\nprint()\n\n# Every 2nd item (skip one each time)\nevery_second = letters[::2]\nprint(f\"letters[::2]:   {every_second}\")\nprint(\"  (Indices 0, 2, 4, 6, 8)\")\nprint()\n\n# Every 3rd item\nevery_third = letters[::3]\nprint(f\"letters[::3]:   {every_third}\")\nprint(\"  (Indices 0, 3, 6, 9)\")\nprint()\n\n# First 6 items, every 2nd\nfirst_six_alternating = letters[:6:2]\nprint(f\"letters[:6:2]:  {first_six_alternating}\")\nprint(\"  (Indices 0, 2, 4 from first 6)\")\nprint()\n\n# ========================================\n# REVERSING WITH NEGATIVE STEP\n# ========================================\n\nprint(\"=== Reversing with Negative Step ===\")\nprint()\n\nprint(f\"Original: {letters}\")\nprint()\n\n# Reverse entire list\nreversed_list = letters[::-1]\nprint(f\"letters[::-1]:  {reversed_list}\")\nprint(\"  (Completely reversed)\")\nprint()\n\n# Reverse first 5 items\nreversed_first_five = letters[4::-1]\nprint(f\"letters[4::-1]: {reversed_first_five}\")\nprint(\"  (First 5 items reversed)\")\nprint()\n\n# Every 2nd item, reversed\nevery_second_reversed = letters[::-2]\nprint(f\"letters[::-2]:  {every_second_reversed}\")\nprint(\"  (Every 2nd item, going backwards)\")\nprint()\n\n# ========================================\n# SLICING CREATES A COPY\n# ========================================\n\nprint(\"=== Slicing Creates a Copy ===\")\nprint()\n\noriginal = [1, 2, 3, 4, 5]\nprint(f\"Original: {original}\")\n\n# Create slice\nslice_copy = original[1:4]\nprint(f\"Slice [1:4]: {slice_copy}\")\n\n# Modify the slice\nslice_copy[0] = 99\nprint(f\"\\nAfter changing slice_copy[0] to 99:\")\nprint(f\"  slice_copy: {slice_copy}\")\nprint(f\"  original:   {original}\")\nprint(\"  (Original unchanged - slice is a copy!)\")\n\nprint()\n\n# ========================================\n# PRACTICAL EXAMPLES\n# ========================================\n\nprint(\"=== Practical Example: Weekly Data ===\")\nprint()\n\ntemperatures = [72, 75, 73, 71, 70, 68, 74]\ndays = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"]\n\nprint(\"Daily temperatures:\", temperatures)\nprint()\n\n# Weekday temperatures (Mon-Fri)\nweekdays = temperatures[:5]\nprint(f\"Weekday temps: {weekdays}\")\n\n# Weekend temperatures (Sat-Sun)\nweekend = temperatures[-2:]\nprint(f\"Weekend temps: {weekend}\")\n\n# First half of week\nfirst_half = temperatures[:4]\nprint(f\"First half: {first_half}\")\n\n# Second half of week\nsecond_half = temperatures[3:]\nprint(f\"Second half: {second_half}\")\n\nprint()\n\nprint(\"=== Practical Example: Playlist ===\")\nprint()\n\nsongs = [\n    \"Bohemian Rhapsody\",\n    \"Stairway to Heaven\",\n    \"Hotel California\",\n    \"Imagine\",\n    \"Sweet Child O' Mine\",\n    \"Purple Haze\",\n    \"Like a Rolling Stone\",\n    \"Smells Like Teen Spirit\"\n]\n\nprint(f\"Full playlist ({len(songs)} songs):\")\nfor i, song in enumerate(songs, start=1):\n    print(f\"  {i}. {song}\")\n\nprint()\n\n# Top 3 songs\ntop_three = songs[:3]\nprint(f\"Top 3: {top_three}\")\n\n# Bottom 2 songs\nbottom_two = songs[-2:]\nprint(f\"Bottom 2: {bottom_two}\")\n\n# Every other song (odd positions)\nodd_songs = songs[::2]\nprint(f\"Odd positions: {odd_songs}\")\n\n# Reverse playlist\nreversed_playlist = songs[::-1]\nprint(f\"\\nReversed playlist:\")\nfor i, song in enumerate(reversed_playlist, start=1):\n    print(f\"  {i}. {song}\")\n\nprint()\n\nprint(\"=== Practical Example: Array Processing ===\")\nprint()\n\ndata = [5, 12, 8, 23, 15, 7, 19, 11, 6, 14]\nprint(f\"Data: {data}\")\nprint()\n\n# Get first 3 values\nfirst_3 = data[:3]\nprint(f\"First 3 values: {first_3}\")\nprint(f\"Average of first 3: {sum(first_3) / len(first_3):.1f}\")\n\nprint()\n\n# Get last 3 values\nlast_3 = data[-3:]\nprint(f\"Last 3 values: {last_3}\")\nprint(f\"Average of last 3: {sum(last_3) / len(last_3):.1f}\")\n\nprint()\n\n# Get middle values (exclude first 2 and last 2)\nmiddle_values = data[2:-2]\nprint(f\"Middle values (exclude first 2 & last 2): {middle_values}\")\nprint(f\"Average of middle: {sum(middle_values) / len(middle_values):.1f}\")\n\nprint()\n\n# Even-indexed items\neven_indices = data[::2]\nprint(f\"Even indices (0,2,4...): {even_indices}\")\n\n# Odd-indexed items\nodd_indices = data[1::2]\nprint(f\"Odd indices (1,3,5...): {odd_indices}\")\n\nprint()\n\n# ========================================\n# SLICE LENGTH CALCULATION\n# ========================================\n\nprint(\"=== Slice Length Calculation ===\")\nprint()\n\nnumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nslice1 = numbers[2:7]\nprint(f\"numbers[2:7]: {slice1}\")\nprint(f\"Length: {len(slice1)} = stop - start = 7 - 2 = 5\")\n\nprint()\n\nslice2 = numbers[:5]\nprint(f\"numbers[:5]: {slice2}\")\nprint(f\"Length: {len(slice2)} = stop - start = 5 - 0 = 5\")\n\nprint()\n\nslice3 = numbers[3:]\nprint(f\"numbers[3:]: {slice3}\")\nprint(f\"Length: {len(slice3)} = len(list) - start = 10 - 3 = 7\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Slice Notation: [start:stop:step]\n```\nmy_list[start:stop:step]\n\nParameters:\n  - start: Index to begin (INCLUSIVE) - defaults to 0\n  - stop:  Index to end (EXCLUSIVE!) - defaults to len(list)\n  - step:  Increment between indices - defaults to 1\n\nNote: All three parameters are OPTIONAL!\n\n```\n### Common Slice Patterns:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Syntax</th><th>Meaning</th><th>Example</th></tr><tr><td>First n</td><td>[:n]</td><td>From start to index n-1</td><td>nums[:3] ‚Üí first 3</td></tr><tr><td>Last n</td><td>[-n:]</td><td>Last n elements</td><td>nums[-3:] ‚Üí last 3</td></tr><tr><td>From index i</td><td>[i:]</td><td>From index i to end</td><td>nums[5:] ‚Üí from 5 onward</td></tr><tr><td>Until index i</td><td>[:i]</td><td>From start to i-1</td><td>nums[:5] ‚Üí up to index 4</td></tr><tr><td>Range i to j</td><td>[i:j]</td><td>From i to j-1</td><td>nums[2:7] ‚Üí indices 2-6</td></tr><tr><td>All except last</td><td>[:-1]</td><td>Everything but last</td><td>nums[:-1]</td></tr><tr><td>All except first</td><td>[1:]</td><td>Everything but first</td><td>nums[1:]</td></tr><tr><td>Copy list</td><td>[:]</td><td>Shallow copy</td><td>copy = nums[:]</td></tr><tr><td>Every nth</td><td>[::n]</td><td>Every nth element</td><td>nums[::2] ‚Üí every 2nd</td></tr><tr><td>Reverse</td><td>[::-1]</td><td>All elements reversed</td><td>nums[::-1]</td></tr></table>### Detailed Examples:\n#### Basic Slicing [start:stop]\n```\nnums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# Get items from index 2 to 5 (NOT 6!)\nslice1 = nums[2:6]  # [2, 3, 4, 5]\n\n# Visualization:\n#  Index:  0  1  2  3  4  5  6  7  8  9\n#  Value:  0  1  2  3  4  5  6  7  8  9\n#              ^           ^\n#           start=2     stop=6 (NOT included!)\n#  Result: [2, 3, 4, 5]\n\n```\n#### Omitting Parameters\n```\nnums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# Omit start (defaults to 0)\nnums[:5]   # [0, 1, 2, 3, 4]\n# Same as: nums[0:5]\n\n# Omit stop (defaults to end)\nnums[5:]   # [5, 6, 7, 8, 9]\n# Same as: nums[5:10] or nums[5:len(nums)]\n\n# Omit both (copy entire list)\nnums[:]    # [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n# Same as: nums[0:10] or nums[0:len(nums)]\n\n```\n#### Negative Indices\n```\nnums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# Last 3 items\nnums[-3:]  # [7, 8, 9]\n# Starts at -3 (third from end), goes to end\n\n# All except last 2\nnums[:-2]  # [0, 1, 2, 3, 4, 5, 6, 7]\n# From start to -2 (NOT included)\n\n# From index 2 to 2nd-to-last\nnums[2:-2]  # [2, 3, 4, 5, 6, 7]\n# Positive start, negative stop\n\n# Visualization:\n#  Positive:  0  1  2  3  4  5  6  7  8  9\n#  Values:    0  1  2  3  4  5  6  7  8  9\n#  Negative: -10 -9 -8 -7 -6 -5 -4 -3 -2 -1\n\n```\n#### Step Parameter [start:stop:step]\n```\nnums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# Every 2nd item (skip one each time)\nnums[::2]  # [0, 2, 4, 6, 8]\n# Indices: 0, 2, 4, 6, 8\n\n# Every 3rd item\nnums[::3]  # [0, 3, 6, 9]\n# Indices: 0, 3, 6, 9\n\n# First 7 items, every 2nd\nnums[:7:2]  # [0, 2, 4, 6]\n# Indices: 0, 2, 4, 6 (stops before 7)\n\n# From index 1, every 2nd\nnums[1::2]  # [1, 3, 5, 7, 9]\n# Indices: 1, 3, 5, 7, 9 (odd indices)\n\n```\n#### Negative Step (Reverse)\n```\nnums = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n# Complete reverse\nnums[::-1]  # [9, 8, 7, 6, 5, 4, 3, 2, 1, 0]\n# Start at end, go to beginning, step = -1\n\n# Reverse first 5 items\nnums[4::-1]  # [4, 3, 2, 1, 0]\n# Start at index 4, go backwards to beginning\n\n# Every 2nd item, reversed\nnums[::-2]  # [9, 7, 5, 3, 1]\n# Start at end, go backwards, skip one each time\n\n# Reverse from index 2 to 7\nnums[7:2:-1]  # [7, 6, 5, 4, 3]\n# Start at 7, go backwards to 3 (2 NOT included)\n\n```\n### Slice Length Formula:\n```\n# For positive step:\nlength = (stop - start) // step\n# If result is negative or zero, slice is empty\n\n# Examples:\nnums[2:7]    # (7-2)//1 = 5 items\nnums[2:10:2] # (10-2)//2 = 4 items\nnums[:5]     # (5-0)//1 = 5 items\n\n```\n### Empty Slices:\n```\nnums = [0, 1, 2, 3, 4, 5]\n\n# Start >= stop (with positive step)\nnums[3:2]   # [] (empty)\nnums[5:5]   # [] (empty)\nnums[10:20] # [] (empty - both beyond list)\n\n# Step goes wrong direction\nnums[2:5:-1]  # [] (can't go forward with negative step)\n\n```\n### Slicing Creates Copies:\n```\noriginal = [1, 2, 3, 4, 5]\n\n# Create slice (this is a NEW list)\nsliced = original[1:4]  # [2, 3, 4]\n\n# Modify the slice\nsliced[0] = 99  # sliced = [99, 3, 4]\n\n# Original is unchanged!\nprint(original)  # [1, 2, 3, 4, 5]\n\n# To copy entire list:\ncopy1 = original[:]        # Using slice\ncopy2 = original.copy()    # Using method\ncopy3 = list(original)     # Using constructor\n\n```\n### Common Patterns:\n```\n# Split list in half\nmidpoint = len(nums) // 2\nfirst_half = nums[:midpoint]\nsecond_half = nums[midpoint:]\n\n# Get first, middle, last\nfirst = nums[:1]    # or [nums[0]] as list\nmiddle = nums[1:-1]\nlast = nums[-1:]    # or [nums[-1]] as list\n\n# Alternate items (odd/even indices)\nevens = nums[::2]   # Indices 0, 2, 4, 6...\nodds = nums[1::2]   # Indices 1, 3, 5, 7...\n\n# Reverse\nreversed_list = nums[::-1]\n\n# Remove first and last\ninner = nums[1:-1]\n\n```\n### Common Mistakes:\n#### 1. Forgetting stop is Exclusive\n```\n# WRONG: Expecting index 5 to be included\nnums[2:5]  # Gets indices 2, 3, 4 (NOT 5!)\n\n# CORRECT: To include index 5\nnums[2:6]  # Gets indices 2, 3, 4, 5\n\n```\n#### 2. Modifying Slice Thinking It Modifies Original\n```\n# WRONG:\noriginal = [1, 2, 3, 4, 5]\nsliced = original[1:3]  # [2, 3]\nsliced[0] = 99          # sliced = [99, 3]\n# original is still [1, 2, 3, 4, 5] - unchanged!\n\n# To modify original, use slice assignment:\noriginal[1:3] = [99, 99]  # original = [1, 99, 99, 4, 5]\n\n```\n#### 3. Confusing Slice vs Index\n```\nnums = [10, 20, 30, 40]\n\n# Index returns single item\nitem = nums[2]  # 30 (integer)\n\n# Slice returns list\nslice_result = nums[2:3]  # [30] (list with one item)\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting that stop index is EXCLUSIVE**\n```python\n# WRONG - expecting to include index 5\nnumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\nprint(numbers[2:5])  # [2, 3, 4] - NOT [2, 3, 4, 5]!\n\n# CORRECT - add 1 to include the desired end\nprint(numbers[2:6])  # [2, 3, 4, 5]\n```\n\n**2. Thinking slice modifies the original list**\n```python\n# WRONG - expecting original to change\noriginal = [1, 2, 3, 4, 5]\nmy_slice = original[1:4]\nmy_slice[0] = 99\nprint(original)  # [1, 2, 3, 4, 5] - unchanged!\n\n# CORRECT - use slice assignment to modify original\noriginal = [1, 2, 3, 4, 5]\noriginal[1:4] = [99, 99, 99]  # This DOES modify original\nprint(original)  # [1, 99, 99, 99, 5]\n```\n\n**3. Confusing slicing with indexing**\n```python\n# WRONG - expecting single item like indexing\nnumbers = [10, 20, 30, 40, 50]\nresult = numbers[2:3]  # Returns [30] (a list!)\nprint(result + 1)  # TypeError: can't add int to list\n\n# CORRECT - indexing for single item, slice for range\nsingle = numbers[2]   # 30 (integer)\nsliced = numbers[2:3]  # [30] (list with one element)\n```\n\n**4. Wrong direction with negative step**\n```python\n# WRONG - can't go forward with negative step\nnumbers = [0, 1, 2, 3, 4, 5]\nresult = numbers[2:5:-1]  # [] empty list!\n\n# CORRECT - start > stop when using negative step\nresult = numbers[5:2:-1]  # [5, 4, 3]\n# Or use full reverse\nresult = numbers[::-1]  # [5, 4, 3, 2, 1, 0]\n```\n\n**5. Off-by-one errors in slice length calculations**\n```python\n# WRONG - calculating wrong slice for \"middle 3\"\ndata = [10, 20, 30, 40, 50, 60, 70]\nmiddle = data[2:4]  # Only gets 2 items: [30, 40]\n\n# CORRECT - length = stop - start\n# For 3 items starting at index 2: 2 + 3 = 5\nmiddle = data[2:5]  # [30, 40, 50] - correct 3 items\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Slice notation**: list[start:stop:step]\n- **stop is EXCLUSIVE**: [2:5] gets indices 2, 3, 4 (NOT 5!)\n- **All parameters optional**: [:], [5:], [:10], [::2]\n- **Negative indices work**: [-3:] for last 3, [:-1] for all but last\n- **Slicing creates copies**: Original list unchanged\n- **Step parameter**: [::2] every 2nd, [::3] every 3rd\n- **Reverse with [::-1]**: Negative step goes backwards\n- **Length formula**: (stop - start) // step\n- **Empty slices**: [5:5] or [10:20] beyond list ‚Üí []\n\n### Essential Slice Patterns:\n```\n# Getting portions:\nfirst_n = my_list[:n]        # First n items\nlast_n = my_list[-n:]        # Last n items\nmiddle = my_list[i:j]        # Items from i to j-1\nall_but_first = my_list[1:]  # Everything except first\nall_but_last = my_list[:-1]  # Everything except last\n\n# Copying:\ncopy = my_list[:]            # Shallow copy\n\n# Stepping:\nevery_2nd = my_list[::2]     # Even indices\nodd_indices = my_list[1::2]  # Odd indices\nevery_3rd = my_list[::3]     # Every 3rd item\n\n# Reversing:\nreversed_list = my_list[::-1]  # Complete reverse\n\n# Complex:\nreverse_first_5 = my_list[4::-1]   # First 5 reversed\nevery_2nd_reversed = my_list[::-2]  # Every 2nd, backwards\n\n```\n### Common Use Cases:\n\n- **Split data**: first_half = data[:len(data)//2]\n- **Remove header/footer**: content = lines[1:-1]\n- **Get top N**: top_10 = sorted(scores)[-10:]\n- **Process chunks**: batch = items[i*batch_size:(i+1)*batch_size]\n- **Reverse string**: reversed_str = text[::-1]\n\n### Before Moving On:\nMake sure you can:\n\n- Extract first/last n items\n- Get a range of items by index\n- Copy a list with [:]\n- Use negative indices in slices\n- Skip items with step parameter\n- Reverse a list with [::-1]\n- Understand that stop is exclusive\n\n### Coming Up Next:\nIn **Lesson 4: Tuples - Immutable Sequences**, you'll learn about:\n\n- What tuples are and when to use them\n- Creating tuples with ()\n- Tuple unpacking\n- Differences between lists and tuples\n- When immutability is an advantage"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Data Analyzer** that processes a list of monthly sales figures using slicing.\n\n**Requirements:**\n\n- Create a list of 12 monthly sales values (Jan-Dec)\n- Extract and analyze:\n<li>Q1 (first 3 months)\n- Q2 (months 3-6)\n- Q3 (months 6-9)\n- Q4 (last 3 months)\n- First half (Jan-Jun)\n- Second half (Jul-Dec)\n\n</li>- Calculate average for each quarter\n- Find which quarter had highest average\n- Get alternating months (Jan, Mar, May, etc.)\n- Reverse the year's data\n- Show top 3 and bottom 3 months\n\n**Example Output:**\n\n<pre>=== Sales Data Analyzer ===\n\nMonthly Sales: [45000, 48000, 52000, 55000, 58000, 61000, 59000, 57000, 54000, 56000, 60000, 65000]\n\nQuarterly Analysis:\nQ1 (Jan-Mar): [45000, 48000, 52000]\n  Average: $48,333.33\n\nQ2 (Apr-Jun): [55000, 58000, 61000]\n  Average: $58,000.00\n\nQ3 (Jul-Sep): [59000, 57000, 54000]\n  Average: $56,666.67\n\nQ4 (Oct-Dec): [56000, 60000, 65000]\n  Average: $60,333.33\n\nBest Quarter: Q4 with average of $60,333.33\n\nHalf-Year Analysis:\nFirst Half (Jan-Jun): Average $53,166.67\nSecond Half (Jul-Dec): Average $58,500.00\n\nAlternating Months: [45000, 52000, 58000, 59000, 54000, 60000]\n\nReversed Data: [65000, 60000, 56000, 54000, 57000, 59000, 61000, 58000, 55000, 52000, 48000, 45000]\n\nTop 3 Months: [65000, 61000, 60000]\nBottom 3 Months: [45000, 48000, 52000]\n</pre>",
              "instructions": "Build a **Data Analyzer** that processes a list of monthly sales figures using slicing.\n\n**Requirements:**\n\n- Create a list of 12 monthly sales values (Jan-Dec)\n- Extract and analyze:\n<li>Q1 (first 3 months)\n- Q2 (months 3-6)\n- Q3 (months 6-9)\n- Q4 (last 3 months)\n- First half (Jan-Jun)\n- Second half (Jul-Dec)\n\n</li>- Calculate average for each quarter\n- Find which quarter had highest average\n- Get alternating months (Jan, Mar, May, etc.)\n- Reverse the year's data\n- Show top 3 and bottom 3 months\n\n**Example Output:**\n\n<pre>=== Sales Data Analyzer ===\n\nMonthly Sales: [45000, 48000, 52000, 55000, 58000, 61000, 59000, 57000, 54000, 56000, 60000, 65000]\n\nQuarterly Analysis:\nQ1 (Jan-Mar): [45000, 48000, 52000]\n  Average: $48,333.33\n\nQ2 (Apr-Jun): [55000, 58000, 61000]\n  Average: $58,000.00\n\nQ3 (Jul-Sep): [59000, 57000, 54000]\n  Average: $56,666.67\n\nQ4 (Oct-Dec): [56000, 60000, 65000]\n  Average: $60,333.33\n\nBest Quarter: Q4 with average of $60,333.33\n\nHalf-Year Analysis:\nFirst Half (Jan-Jun): Average $53,166.67\nSecond Half (Jul-Dec): Average $58,500.00\n\nAlternating Months: [45000, 52000, 58000, 59000, 54000, 60000]\n\nReversed Data: [65000, 60000, 56000, 54000, 57000, 59000, 61000, 58000, 55000, 52000, 48000, 45000]\n\nTop 3 Months: [65000, 61000, 60000]\nBottom 3 Months: [45000, 48000, 52000]\n</pre>",
              "starterCode": "# Data Analyzer - Starter Code\n\nprint(\"=== Sales Data Analyzer ===\")\nprint()\n\n# YOUR CODE: Create list of 12 monthly sales values\nsales = [45000, 48000, 52000, 55000, 58000, 61000, \n         59000, 57000, 54000, 56000, 60000, 65000]\n\nprint(f\"Monthly Sales: {sales}\")\nprint()\n\n# YOUR CODE: Extract quarterly data using slicing\nprint(\"Quarterly Analysis:\")\n\n# Q1 (indices 0-2)\nq1 = sales[  ]  # First 3 months\nq1_avg = sum(q1) / len(q1)\nprint(f\"Q1 (Jan-Mar): {q1}\")\nprint(f\"  Average: ${q1_avg:,.2f}\")\nprint()\n\n# Q2 (indices 3-5)\nq2 = sales[  ]  # Months 3-6\nq2_avg = sum(q2) / len(q2)\nprint(f\"Q2 (Apr-Jun): {q2}\")\nprint(f\"  Average: ${q2_avg:,.2f}\")\nprint()\n\n# Q3 (indices 6-8)\nq3 = sales[  ]  # Months 6-9\nq3_avg = sum(q3) / len(q3)\nprint(f\"Q3 (Jul-Sep): {q3}\")\nprint(f\"  Average: ${q3_avg:,.2f}\")\nprint()\n\n# Q4 (indices 9-11)\nq4 = sales[  ]  # Last 3 months\nq4_avg = sum(q4) / len(q4)\nprint(f\"Q4 (Oct-Dec): {q4}\")\nprint(f\"  Average: ${q4_avg:,.2f}\")\nprint()\n\n# YOUR CODE: Find best quarter\nquarter_avgs = [q1_avg, q2_avg, q3_avg, q4_avg]\nbest_avg = max(quarter_avgs)\nbest_quarter = quarter_avgs.index(best_avg) + 1  # +1 for 1-based quarter number\n\nprint(f\"Best Quarter: Q{best_quarter} with average of ${best_avg:,.2f}\")\nprint()\n\n# YOUR CODE: Half-year analysis\nprint(\"Half-Year Analysis:\")\n\nfirst_half = sales[  ]  # First 6 months\nfirst_half_avg = sum(first_half) / len(first_half)\nprint(f\"First Half (Jan-Jun): Average ${first_half_avg:,.2f}\")\n\nsecond_half = sales[  ]  # Last 6 months\nsecond_half_avg = sum(second_half) / len(second_half)\nprint(f\"Second Half (Jul-Dec): Average ${second_half_avg:,.2f}\")\nprint()\n\n# YOUR CODE: Alternating months (every 2nd starting from 0)\nalternating = sales[  ]  # Every other month\nprint(f\"Alternating Months: {alternating}\")\nprint()\n\n# YOUR CODE: Reverse the data\nreversed_sales = sales[  ]  # Reverse using slicing\nprint(f\"Reversed Data: {reversed_sales}\")\nprint()\n\n# YOUR CODE: Top 3 and bottom 3\n# First, create a sorted copy\nsorted_sales = sorted(sales)\n\ntop_3 = sorted_sales[  ]  # Last 3 (highest)\nbottom_3 = sorted_sales[  ]  # First 3 (lowest)\n\nprint(f\"Top 3 Months: {top_3[::-1]}\")  # Reverse to show high to low\nprint(f\"Bottom 3 Months: {bottom_3}\")",
              "solution": "# Data Analyzer - COMPLETE SOLUTION\n\nprint(\"=== Sales Data Analyzer ===\")\nprint()\n\n# Create list of 12 monthly sales values\nsales = [45000, 48000, 52000, 55000, 58000, 61000, \n         59000, 57000, 54000, 56000, 60000, 65000]\n\nprint(f\"Monthly Sales: {sales}\")\nprint()\n\n# Extract quarterly data using slicing\nprint(\"Quarterly Analysis:\")\n\n# Q1 (indices 0-2)\nq1 = sales[:3]  # First 3 months\nq1_avg = sum(q1) / len(q1)\nprint(f\"Q1 (Jan-Mar): {q1}\")\nprint(f\"  Average: ${q1_avg:,.2f}\")\nprint()\n\n# Q2 (indices 3-5)\nq2 = sales[3:6]  # Months 3-6\nq2_avg = sum(q2) / len(q2)\nprint(f\"Q2 (Apr-Jun): {q2}\")\nprint(f\"  Average: ${q2_avg:,.2f}\")\nprint()\n\n# Q3 (indices 6-8)\nq3 = sales[6:9]  # Months 6-9\nq3_avg = sum(q3) / len(q3)\nprint(f\"Q3 (Jul-Sep): {q3}\")\nprint(f\"  Average: ${q3_avg:,.2f}\")\nprint()\n\n# Q4 (indices 9-11)\nq4 = sales[-3:]  # Last 3 months\nq4_avg = sum(q4) / len(q4)\nprint(f\"Q4 (Oct-Dec): {q4}\")\nprint(f\"  Average: ${q4_avg:,.2f}\")\nprint()\n\n# Find best quarter\nquarter_avgs = [q1_avg, q2_avg, q3_avg, q4_avg]\nbest_avg = max(quarter_avgs)\nbest_quarter = quarter_avgs.index(best_avg) + 1  # +1 for 1-based quarter number\n\nprint(f\"Best Quarter: Q{best_quarter} with average of ${best_avg:,.2f}\")\nprint()\n\n# Half-year analysis\nprint(\"Half-Year Analysis:\")\n\nfirst_half = sales[:6]  # First 6 months\nfirst_half_avg = sum(first_half) / len(first_half)\nprint(f\"First Half (Jan-Jun): Average ${first_half_avg:,.2f}\")\n\nsecond_half = sales[6:]  # Last 6 months\nsecond_half_avg = sum(second_half) / len(second_half)\nprint(f\"Second Half (Jul-Dec): Average ${second_half_avg:,.2f}\")\nprint()\n\n# Alternating months (every 2nd starting from 0)\nalternating = sales[::2]  # Every other month\nprint(f\"Alternating Months: {alternating}\")\nprint()\n\n# Reverse the data\nreversed_sales = sales[::-1]  # Reverse using slicing\nprint(f\"Reversed Data: {reversed_sales}\")\nprint()\n\n# Top 3 and bottom 3\n# First, create a sorted copy\nsorted_sales = sorted(sales)\n\ntop_3 = sorted_sales[-3:]  # Last 3 (highest)\nbottom_3 = sorted_sales[:3]  # First 3 (lowest)\n\nprint(f\"Top 3 Months: {top_3[::-1]}\")  # Reverse to show high to low\nprint(f\"Bottom 3 Months: {bottom_3}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For Q1 use [:3], Q2 use [3:6], Q3 use [6:9], Q4 use [-3:] or [9:]. First half is [:6], second half is [6:] or [-6:]. Alternating is [::2]. Reverse is [::-1]. Top 3 from sorted: [-3:], bottom 3: [:3]. Remember: stop index is NOT included!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-05-lesson-04",
          "title": "Tuples: Immutable Sequences",
          "moduleId": "module-05",
          "order": 4,
          "estimatedMinutes": 24,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine a pair of coordinates on a map: **(latitude, longitude)**\n\n<pre style='background-color: #f0f0f0; padding: 10px;'>New York City: (40.7128, -74.0060)\nLos Angeles:    (34.0522, -118.2437)\n</pre>These coordinates are **fixed** - you can't change the latitude without it being a different location. This is a perfect use case for a **tuple**!\n\n### What is a Tuple?\nA **tuple** is an ordered, **immutable** (unchangeable) collection of items.\n\n```\n# List (mutable - can change)\nshopping_list = [\"Milk\", \"Eggs\", \"Bread\"]\nshopping_list[0] = \"Cheese\"  # ‚úÖ ALLOWED\n\n# Tuple (immutable - cannot change)\ncoordinates = (40.7128, -74.0060)\ncoordinates[0] = 50.0  # ‚ùå ERROR! Cannot modify tuple\n\n```\n### Lists vs Tuples:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Feature</th><th>List</th><th>Tuple</th></tr><tr><td>Syntax</td><td>Square brackets []</td><td>Parentheses ()</td></tr><tr><td>Mutable?</td><td>Yes (can change)</td><td>No (cannot change)</td></tr><tr><td>Methods</td><td>Many (append, remove, sort...)</td><td>Few (count, index only)</td></tr><tr><td>Speed</td><td>Slower</td><td>Faster</td></tr><tr><td>Memory</td><td>More</td><td>Less</td></tr><tr><td>Use case</td><td>Data that changes</td><td>Data that's fixed</td></tr></table>### When to Use Tuples:\n\n- **Fixed data**: Coordinates (x, y), RGB colors (r, g, b), dates (year, month, day)\n- **Function returns**: Return multiple values from a function\n- **Dictionary keys**: Tuples can be dict keys, lists cannot!\n- **Protection**: Prevent accidental modification\n- **Performance**: Faster iteration than lists\n\n### Creating Tuples:\n```\n# With parentheses (standard)\npoint = (10, 20)\nrgb = (255, 128, 0)\n\n# Without parentheses (tuple packing)\npoint = 10, 20  # Same as (10, 20)\n\n# Single-item tuple (comma required!)\nsingle = (42,)   # Tuple with one item\nnot_tuple = (42) # Just an integer (parentheses ignored)\n\n# Empty tuple\nempty = ()\n\n```\n### Real-World Examples:\n\n- **Geographic coordinates**: (latitude, longitude)\n- **RGB colors**: (255, 0, 0) for red\n- **Date/time**: (2024, 1, 15) for January 15, 2024\n- **Database records**: (id, name, email, age)\n- **Pixel positions**: (x, y) coordinates\n- **Rational numbers**: (numerator, denominator)\n\n### Tuple Unpacking (Very Powerful!):\n```\n# Assign multiple variables at once\npoint = (10, 20)\nx, y = point  # x = 10, y = 20\n\n# Swap variables (Pythonic way!)\na = 5\nb = 10\na, b = b, a  # a = 10, b = 5 (uses tuple packing/unpacking)\n\n# Function returns\ndef get_user():\n    return (\"Alice\", 25, \"alice@example.com\")  # Returns tuple\n\nname, age, email = get_user()  # Unpack into variables\n\n```\n### Why Immutability Matters:\n**Safety:** Data can't be accidentally changed\n\n```\nconfig = (\"localhost\", 8080, \"admin\")\n# config[1] = 9000  # ERROR! Prevents bugs\n\n```\n**Dictionary keys:** Only immutable types can be keys\n\n```\n# Tuples as dict keys (works!)\nlocations = {\n    (40.7128, -74.0060): \"New York\",\n    (34.0522, -118.2437): \"Los Angeles\"\n}\n\n# Lists as dict keys (ERROR!)\n# locations = {\n#     [40.7128, -74.0060]: \"New York\"  # TypeError!\n# }\n\n```\n**Performance:** Faster than lists\n\n```\n# Tuple is ~10% faster for iteration\n# Uses less memory\n\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n==================================================\nTUPLES: IMMUTABLE SEQUENCES\n==================================================\n\n=== Creating Tuples ===\n\nPoint (with parens): (10, 20)\nType: <class 'tuple'>\n\nPoint (no parens): (10, 20)\nType: <class 'tuple'>\n\nStudent info: ('Alice', 20, 'Computer Science', 3.8)\n\nSingle-item tuple: (42,)\nType: <class 'tuple'>\n\nNot a tuple: 42\nType: <class 'int'>\n\nEmpty tuple: ()\nLength: 0\n\n=== Accessing Tuple Elements ===\n\nRGB color: (255, 128, 0)\nRed component:   255\nGreen component: 128\nBlue component:  0\n\nDate: (2024, 1, 15)\nYear (first):  2024\nDay (last):    15\nMonth (middle): 1\n\n=== Tuples are Immutable ===\n\nOriginal coordinates: (40.7128, -74.006)\n\nTrying to modify coords[0]...\nERROR: 'tuple' object does not support item assignment\n‚úì Confirmed: Tuples cannot be modified!\n\n=== Tuple Unpacking ===\n\nPoint: (100, 200)\nx = 100, y = 200\n\nPerson tuple: ('Bob', 30, 'Engineer')\nName: Bob\nAge: 30\nJob: Engineer\n\nBefore swap: a = 5, b = 10\nAfter swap:  a = 10, b = 5\n\n=== Tuple Methods ===\n\nNumbers: (1, 2, 3, 2, 4, 2, 5)\n\nCount of 2: 3\nCount of 9: 0\n\nFirst position of 3: 2\nFirst position of 2: 1\n\n=== Tuple Operations ===\n\ntuple1: (1, 2, 3)\ntuple2: (4, 5, 6)\nCombined: (1, 2, 3, 4, 5, 6)\n\nPattern: ('X', 'O')\nRepeated √ó 3: ('X', 'O', 'X', 'O', 'X', 'O')\n\nFruits: ('Apple', 'Banana', 'Cherry')\n'Banana' in fruits: True\n'Grape' in fruits: False\n\nData: (10, 20, 30, 40, 50)\nLength: 5\n\n=== Tuple Slicing ===\n\nOriginal: ('A', 'B', 'C', 'D', 'E', 'F')\nFirst 3: ('A', 'B', 'C')\nLast 2: ('E', 'F')\nMiddle [2:5]: ('C', 'D', 'E')\nReversed: ('F', 'E', 'D', 'C', 'B', 'A')\n\n=== Iterating Through Tuples ===\n\nDays of work week:\n  - Mon\n  - Tue\n  - Wed\n  - Thu\n  - Fri\n\nWith index:\n  Day 1: Mon\n  Day 2: Tue\n  Day 3: Wed\n  Day 4: Thu\n  Day 5: Fri\n\n=== Practical Example: Geographic Coordinates ===\n\nNew York City: (40.7128, -74.0060)\nLos Angeles: (34.0522, -118.2437)\nChicago: (41.8781, -87.6298)\nHouston: (29.7604, -95.3698)\n\nFound: Los Angeles\n\n=== Practical Example: RGB Colors ===\n\nred     ‚Üí RGB(255,   0,   0)\ngreen   ‚Üí RGB(  0, 255,   0)\nblue    ‚Üí RGB(  0,   0, 255)\nyellow  ‚Üí RGB(255, 255,   0)\npurple  ‚Üí RGB(128,   0, 128)\norange  ‚Üí RGB(255, 165,   0)\n\n=== Practical Example: Function Returns ===\n\nScores: [85, 92, 78, 95, 88, 90]\n\nStats tuple: (528, 6, 88.0, 78, 95)\n\nTotal: 528\nCount: 6\nAverage: 88.0\nMin: 78\nMax: 95\n\n=== Practical Example: Database Records ===\n\nStudent Records:\n  ID 1: Alice    | CS      | GPA: 3.8\n  ID 2: Bob      | Math    | GPA: 3.6\n  ID 3: Charlie  | Physics | GPA: 3.9\n  ID 4: Diana    | CS      | GPA: 3.7\n\nCS Majors:\n  Alice (GPA: 3.8)\n  Diana (GPA: 3.7)\n\n=== Converting Lists ‚Üî Tuples ===\n\nList: [1, 2, 3, 4, 5]\nConverted to tuple: (1, 2, 3, 4, 5)\nType: <class 'tuple'>\n\nTuple: ('A', 'B', 'C')\nConverted to list: ['A', 'B', 'C']\nType: <class 'list'>\n\n=== List vs Tuple Comparison ===\n\nList:  [1, 2, 3, 4, 5]\nTuple: (1, 2, 3, 4, 5)\n\nList size:  104 bytes\nTuple size: 80 bytes\nTuple uses 24 fewer bytes\n\nList methods: ['append', 'clear', 'copy', 'count', 'extend', 'index', 'insert', 'pop']\nTuple methods: ['count', 'index']\n```",
              "code": "# Tuples: Immutable Sequences\n\nprint(\"=\" * 50)\nprint(\"TUPLES: IMMUTABLE SEQUENCES\")\nprint(\"=\" * 50)\nprint()\n\n# ========================================\n# CREATING TUPLES\n# ========================================\n\nprint(\"=== Creating Tuples ===\")\nprint()\n\n# With parentheses\npoint = (10, 20)\nprint(f\"Point (with parens): {point}\")\nprint(f\"Type: {type(point)}\")\n\nprint()\n\n# Without parentheses (tuple packing)\npoint2 = 10, 20\nprint(f\"Point (no parens): {point2}\")\nprint(f\"Type: {type(point2)}\")\n\nprint()\n\n# Multiple types\nstudent = (\"Alice\", 20, \"Computer Science\", 3.8)\nprint(f\"Student info: {student}\")\n\nprint()\n\n# Single-item tuple (comma required!)\nsingle = (42,)\nprint(f\"Single-item tuple: {single}\")\nprint(f\"Type: {type(single)}\")\n\nprint()\n\n# NOT a tuple (just parentheses for grouping)\nnot_tuple = (42)\nprint(f\"Not a tuple: {not_tuple}\")\nprint(f\"Type: {type(not_tuple)}\")\n\nprint()\n\n# Empty tuple\nempty = ()\nprint(f\"Empty tuple: {empty}\")\nprint(f\"Length: {len(empty)}\")\n\nprint()\n\n# ========================================\n# ACCESSING TUPLE ELEMENTS\n# ========================================\n\nprint(\"=== Accessing Tuple Elements ===\")\nprint()\n\nrgb = (255, 128, 0)  # Orange color\nprint(f\"RGB color: {rgb}\")\nprint(f\"Red component:   {rgb[0]}\")\nprint(f\"Green component: {rgb[1]}\")\nprint(f\"Blue component:  {rgb[2]}\")\n\nprint()\n\n# Negative indexing\ndate = (2024, 1, 15)  # January 15, 2024\nprint(f\"Date: {date}\")\nprint(f\"Year (first):  {date[0]}\")\nprint(f\"Day (last):    {date[-1]}\")\nprint(f\"Month (middle): {date[1]}\")\n\nprint()\n\n# ========================================\n# TUPLES ARE IMMUTABLE\n# ========================================\n\nprint(\"=== Tuples are Immutable ===\")\nprint()\n\ncoords = (40.7128, -74.0060)\nprint(f\"Original coordinates: {coords}\")\n\nprint(\"\\nTrying to modify coords[0]...\")\ntry:\n    coords[0] = 50.0\nexcept TypeError as e:\n    print(f\"ERROR: {e}\")\n    print(\"‚úì Confirmed: Tuples cannot be modified!\")\n\nprint()\n\n# ========================================\n# TUPLE UNPACKING\n# ========================================\n\nprint(\"=== Tuple Unpacking ===\")\nprint()\n\n# Basic unpacking\npoint = (100, 200)\nx, y = point\nprint(f\"Point: {point}\")\nprint(f\"x = {x}, y = {y}\")\n\nprint()\n\n# Multiple values\nperson = (\"Bob\", 30, \"Engineer\")\nname, age, job = person\nprint(f\"Person tuple: {person}\")\nprint(f\"Name: {name}\")\nprint(f\"Age: {age}\")\nprint(f\"Job: {job}\")\n\nprint()\n\n# Swapping variables (Pythonic way!)\na = 5\nb = 10\nprint(f\"Before swap: a = {a}, b = {b}\")\na, b = b, a  # Swap using tuple packing/unpacking\nprint(f\"After swap:  a = {a}, b = {b}\")\n\nprint()\n\n# ========================================\n# TUPLE METHODS\n# ========================================\n\nprint(\"=== Tuple Methods ===\")\nprint()\n\nnumbers = (1, 2, 3, 2, 4, 2, 5)\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# count() - count occurrences\ncount_2 = numbers.count(2)\nprint(f\"Count of 2: {count_2}\")\n\ncount_9 = numbers.count(9)\nprint(f\"Count of 9: {count_9}\")\n\nprint()\n\n# index() - find first occurrence\nposition = numbers.index(3)\nprint(f\"First position of 3: {position}\")\n\nposition_2 = numbers.index(2)\nprint(f\"First position of 2: {position_2}\")\n\nprint()\n\n# ========================================\n# TUPLE OPERATIONS\n# ========================================\n\nprint(\"=== Tuple Operations ===\")\nprint()\n\n# Concatenation\ntuple1 = (1, 2, 3)\ntuple2 = (4, 5, 6)\ncombined = tuple1 + tuple2\nprint(f\"tuple1: {tuple1}\")\nprint(f\"tuple2: {tuple2}\")\nprint(f\"Combined: {combined}\")\n\nprint()\n\n# Repetition\npattern = (\"X\", \"O\")\nrepeated = pattern * 3\nprint(f\"Pattern: {pattern}\")\nprint(f\"Repeated √ó 3: {repeated}\")\n\nprint()\n\n# Membership\nfruits = (\"Apple\", \"Banana\", \"Cherry\")\nprint(f\"Fruits: {fruits}\")\nprint(f\"'Banana' in fruits: {'Banana' in fruits}\")\nprint(f\"'Grape' in fruits: {'Grape' in fruits}\")\n\nprint()\n\n# Length\ndata = (10, 20, 30, 40, 50)\nprint(f\"Data: {data}\")\nprint(f\"Length: {len(data)}\")\n\nprint()\n\n# ========================================\n# TUPLE SLICING\n# ========================================\n\nprint(\"=== Tuple Slicing ===\")\nprint()\n\nletters = ('A', 'B', 'C', 'D', 'E', 'F')\nprint(f\"Original: {letters}\")\n\nfirst_three = letters[:3]\nprint(f\"First 3: {first_three}\")\n\nlast_two = letters[-2:]\nprint(f\"Last 2: {last_two}\")\n\nmiddle = letters[2:5]\nprint(f\"Middle [2:5]: {middle}\")\n\nreversed_tuple = letters[::-1]\nprint(f\"Reversed: {reversed_tuple}\")\n\nprint()\n\n# ========================================\n# ITERATING THROUGH TUPLES\n# ========================================\n\nprint(\"=== Iterating Through Tuples ===\")\nprint()\n\ndays = (\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\")\n\nprint(\"Days of work week:\")\nfor day in days:\n    print(f\"  - {day}\")\n\nprint()\n\nprint(\"With index:\")\nfor i, day in enumerate(days, start=1):\n    print(f\"  Day {i}: {day}\")\n\nprint()\n\n# ========================================\n# PRACTICAL EXAMPLES\n# ========================================\n\nprint(\"=== Practical Example: Geographic Coordinates ===\")\nprint()\n\ncities = {\n    (40.7128, -74.0060): \"New York City\",\n    (34.0522, -118.2437): \"Los Angeles\",\n    (41.8781, -87.6298): \"Chicago\",\n    (29.7604, -95.3698): \"Houston\"\n}\n\nfor coords, city in cities.items():\n    lat, lon = coords  # Unpack tuple\n    print(f\"{city}: ({lat:.4f}, {lon:.4f})\")\n\nprint()\n\n# Search for coordinates\nsearch_coords = (34.0522, -118.2437)\nif search_coords in cities:\n    print(f\"Found: {cities[search_coords]}\")\n\nprint()\n\nprint(\"=== Practical Example: RGB Colors ===\")\nprint()\n\ncolors = {\n    \"red\":    (255, 0, 0),\n    \"green\":  (0, 255, 0),\n    \"blue\":   (0, 0, 255),\n    \"yellow\": (255, 255, 0),\n    \"purple\": (128, 0, 128),\n    \"orange\": (255, 165, 0)\n}\n\nfor color_name, rgb in colors.items():\n    r, g, b = rgb  # Unpack tuple\n    print(f\"{color_name:7} ‚Üí RGB({r:3}, {g:3}, {b:3})\")\n\nprint()\n\nprint(\"=== Practical Example: Function Returns ===\")\nprint()\n\ndef get_stats(numbers):\n    \"\"\"Return multiple statistics as a tuple\"\"\"\n    total = sum(numbers)\n    count = len(numbers)\n    average = total / count\n    minimum = min(numbers)\n    maximum = max(numbers)\n    \n    return (total, count, average, minimum, maximum)\n\nscores = [85, 92, 78, 95, 88, 90]\nprint(f\"Scores: {scores}\")\nprint()\n\n# Get all stats at once\nstats = get_stats(scores)\nprint(f\"Stats tuple: {stats}\")\nprint()\n\n# Unpack into variables\ntotal, count, avg, min_score, max_score = get_stats(scores)\nprint(f\"Total: {total}\")\nprint(f\"Count: {count}\")\nprint(f\"Average: {avg:.1f}\")\nprint(f\"Min: {min_score}\")\nprint(f\"Max: {max_score}\")\n\nprint()\n\nprint(\"=== Practical Example: Database Records ===\")\nprint()\n\n# Each record is a tuple (immutable)\nstudents = [\n    (1, \"Alice\", \"CS\", 3.8),\n    (2, \"Bob\", \"Math\", 3.6),\n    (3, \"Charlie\", \"Physics\", 3.9),\n    (4, \"Diana\", \"CS\", 3.7)\n]\n\nprint(\"Student Records:\")\nfor student in students:\n    id, name, major, gpa = student  # Unpack\n    print(f\"  ID {id}: {name:8} | {major:7} | GPA: {gpa}\")\n\nprint()\n\n# Find CS majors\nprint(\"CS Majors:\")\nfor id, name, major, gpa in students:\n    if major == \"CS\":\n        print(f\"  {name} (GPA: {gpa})\")\n\nprint()\n\n# ========================================\n# CONVERTING BETWEEN LISTS AND TUPLES\n# ========================================\n\nprint(\"=== Converting Lists ‚Üî Tuples ===\")\nprint()\n\nmy_list = [1, 2, 3, 4, 5]\nprint(f\"List: {my_list}\")\n\n# List ‚Üí Tuple\nmy_tuple = tuple(my_list)\nprint(f\"Converted to tuple: {my_tuple}\")\nprint(f\"Type: {type(my_tuple)}\")\n\nprint()\n\nmy_tuple2 = ('A', 'B', 'C')\nprint(f\"Tuple: {my_tuple2}\")\n\n# Tuple ‚Üí List\nmy_list2 = list(my_tuple2)\nprint(f\"Converted to list: {my_list2}\")\nprint(f\"Type: {type(my_list2)}\")\n\nprint()\n\n# ========================================\n# COMPARISON\n# ========================================\n\nprint(\"=== List vs Tuple Comparison ===\")\nprint()\n\nimport sys\n\nmy_list = [1, 2, 3, 4, 5]\nmy_tuple = (1, 2, 3, 4, 5)\n\nprint(f\"List:  {my_list}\")\nprint(f\"Tuple: {my_tuple}\")\nprint()\n\nprint(f\"List size:  {sys.getsizeof(my_list)} bytes\")\nprint(f\"Tuple size: {sys.getsizeof(my_tuple)} bytes\")\nprint(f\"Tuple uses {sys.getsizeof(my_list) - sys.getsizeof(my_tuple)} fewer bytes\")\n\nprint()\n\nprint(\"List methods:\", [m for m in dir(my_list) if not m.startswith('_')][:8])\nprint(\"Tuple methods:\", [m for m in dir(my_tuple) if not m.startswith('_')])",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Creating Tuples:\n```\n# With parentheses (recommended)\nmy_tuple = (1, 2, 3)\n\n# Without parentheses (tuple packing)\nmy_tuple = 1, 2, 3  # Same result\n\n# Single-item tuple (COMMA REQUIRED!)\nsingle = (42,)   # Tuple\nnotuple = (42)   # Integer (parens ignored)\n\n# Empty tuple\nempty = ()\n\n# Mixed types\nmixed = (\"Alice\", 25, True, 3.14)\n\n```\n### Accessing Elements:\n```\nmy_tuple = ('A', 'B', 'C', 'D', 'E')\n\n# Positive indexing\nfirst = my_tuple[0]   # 'A'\nsecond = my_tuple[1]  # 'B'\n\n# Negative indexing\nlast = my_tuple[-1]   # 'E'\nsecond_last = my_tuple[-2]  # 'D'\n\n# Slicing (works like lists)\nslice1 = my_tuple[1:4]   # ('B', 'C', 'D')\nslice2 = my_tuple[:3]    # ('A', 'B', 'C')\nslice3 = my_tuple[::2]   # ('A', 'C', 'E')\nreversed_tuple = my_tuple[::-1]  # ('E', 'D', 'C', 'B', 'A')\n\n```\n### Tuple Unpacking:\n```\n# Basic unpacking\npoint = (10, 20)\nx, y = point  # x = 10, y = 20\n\n# Multiple values\nperson = (\"Alice\", 25, \"Engineer\")\nname, age, job = person\n\n# Swap variables (Pythonic!)\na, b = b, a  # Swaps a and b\n\n# Partial unpacking with * (Python 3+)\nfirst, *middle, last = (1, 2, 3, 4, 5)\n# first = 1, middle = [2, 3, 4], last = 5\n\n# Ignore values with _\nx, _, z = (10, 20, 30)  # x = 10, z = 30 (ignore middle)\n\n```\n### Tuple Methods (Only 2!):\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Method</th><th>Description</th><th>Example</th></tr><tr><td>count(item)</td><td>Count occurrences</td><td>t.count(5) ‚Üí 3</td></tr><tr><td>index(item)</td><td>Find first position</td><td>t.index(5) ‚Üí 2</td></tr></table>```\nnumbers = (1, 2, 3, 2, 4, 2, 5)\n\nnumbers.count(2)  # 3 (appears 3 times)\nnumbers.index(3)  # 2 (at index 2)\n\n```\n### Operations on Tuples:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Operation</th><th>Syntax</th><th>Example</th><th>Result</th></tr><tr><td>Concatenation</td><td>+</td><td>(1,2) + (3,4)</td><td>(1,2,3,4)</td></tr><tr><td>Repetition</td><td>*</td><td>(1,2) * 3</td><td>(1,2,1,2,1,2)</td></tr><tr><td>Membership</td><td>in</td><td>5 in (1,5,9)</td><td>True</td></tr><tr><td>Length</td><td>len()</td><td>len((1,2,3))</td><td>3</td></tr><tr><td>Min/Max</td><td>min(), max()</td><td>max((5,2,8))</td><td>8</td></tr><tr><td>Sum</td><td>sum()</td><td>sum((1,2,3))</td><td>6</td></tr></table>### Immutability Rules:\n```\nmy_tuple = (1, 2, 3)\n\n# ‚ùå CANNOT modify items\nmy_tuple[0] = 10  # TypeError!\n\n# ‚ùå CANNOT append\nmy_tuple.append(4)  # AttributeError! (no append method)\n\n# ‚ùå CANNOT remove\nmy_tuple.remove(2)  # AttributeError! (no remove method)\n\n# ‚ùå CANNOT sort in place\nmy_tuple.sort()  # AttributeError! (no sort method)\n\n# ‚úÖ CAN create new tuple\nmy_tuple = my_tuple + (4, 5)  # Creates NEW tuple\n\n# ‚úÖ CAN use sorted() (returns list)\nsorted_list = sorted(my_tuple)  # Returns sorted list\nsorted_tuple = tuple(sorted(my_tuple))  # Convert back to tuple\n\n```\n### Converting Between Lists and Tuples:\n```\n# List ‚Üí Tuple\nmy_list = [1, 2, 3, 4, 5]\nmy_tuple = tuple(my_list)  # (1, 2, 3, 4, 5)\n\n# Tuple ‚Üí List\nmy_tuple = (1, 2, 3, 4, 5)\nmy_list = list(my_tuple)  # [1, 2, 3, 4, 5]\n\n# String ‚Üí Tuple\nletters = tuple(\"hello\")  # ('h', 'e', 'l', 'l', 'o')\n\n# Range ‚Üí Tuple\nnumbers = tuple(range(5))  # (0, 1, 2, 3, 4)\n\n```\n### Lists vs Tuples - When to Use:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Scenario</th><th>Use</th><th>Reason</th></tr><tr><td>Shopping cart</td><td>List</td><td>Items added/removed</td></tr><tr><td>RGB color</td><td>Tuple</td><td>Fixed 3 values</td></tr><tr><td>Database record</td><td>Tuple</td><td>Fixed structure</td></tr><tr><td>Student grades</td><td>List</td><td>Grades added/changed</td></tr><tr><td>GPS coordinates</td><td>Tuple</td><td>Fixed lat/lon pair</td></tr><tr><td>Todo items</td><td>List</td><td>Items added/removed</td></tr><tr><td>Function return (multiple)</td><td>Tuple</td><td>Natural for returns</td></tr><tr><td>Dictionary key</td><td>Tuple</td><td>Must be immutable</td></tr></table>### Tuples as Dictionary Keys:\n```\n# ‚úÖ Tuples work (immutable)\nlocations = {\n    (40.7, -74.0): \"New York\",\n    (34.0, -118.2): \"Los Angeles\"\n}\n\nprint(locations[(40.7, -74.0)])  # \"New York\"\n\n# ‚ùå Lists don't work (mutable)\ntry:\n    bad_dict = {\n        [40.7, -74.0]: \"New York\"  # TypeError!\n    }\nexcept TypeError as e:\n    print(f\"Error: {e}\")\n\n```\n### Function Returns with Tuples:\n```\n# Single return value (normal)\ndef get_name():\n    return \"Alice\"\n\n# Multiple return values (tuple)\ndef get_user():\n    return \"Alice\", 25, \"alice@example.com\"\n    # Equivalent to: return (\"Alice\", 25, \"alice@example.com\")\n\n# Unpack when calling\nname, age, email = get_user()\n\n# Or get as tuple\nuser_data = get_user()  # ('Alice', 25, 'alice@example.com')\n\n```\n### Common Patterns:\n```\n# Coordinate pair\npoint = (x, y)\n\n# RGB color\ncolor = (red, green, blue)\n\n# Date\ndate = (year, month, day)\n\n# Range (min, max)\nrange_tuple = (min_value, max_value)\n\n# Database row\nrow = (id, name, email, age)\n\n# Constants\nWEEKDAYS = (\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\")\n\n# Configuration (immutable settings)\nCONFIG = (\"localhost\", 8080, \"admin\", \"password\")\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting the comma in single-item tuples**\n```python\n# WRONG - parentheses alone don't make a tuple\nsingle = (42)  # This is just an integer!\nprint(type(single))  # <class 'int'>\n\n# CORRECT - comma is required for single-item tuple\nsingle = (42,)  # Now it's a tuple\nprint(type(single))  # <class 'tuple'>\n```\n\n**2. Trying to modify a tuple**\n```python\n# WRONG - tuples are immutable\ncoords = (10, 20)\ncoords[0] = 15  # TypeError: tuple doesn't support item assignment\n\n# CORRECT - create a new tuple\ncoords = (10, 20)\ncoords = (15,) + coords[1:]  # Creates new tuple (15, 20)\n# Or convert to list, modify, convert back\ntemp = list(coords)\ntemp[0] = 15\ncoords = tuple(temp)\n```\n\n**3. Using list methods on tuples**\n```python\n# WRONG - tuples don't have list methods\nmy_tuple = (1, 2, 3)\nmy_tuple.append(4)  # AttributeError!\nmy_tuple.sort()     # AttributeError!\n\n# CORRECT - tuples only have count() and index()\ncount = my_tuple.count(2)  # 1\npos = my_tuple.index(3)    # 2\n# For sorted version, use sorted()\nsorted_list = sorted(my_tuple)  # Returns a list\n```\n\n**4. Unpacking wrong number of values**\n```python\n# WRONG - number of variables must match tuple length\npoint = (10, 20, 30)\nx, y = point  # ValueError: too many values to unpack\n\n# CORRECT - match the number of values\nx, y, z = point  # Works: x=10, y=20, z=30\n# Or use * to collect extras\nx, *rest = point  # x=10, rest=[20, 30]\n```\n\n**5. Expecting tuples to work like lists**\n```python\n# WRONG - can't use tuples as dictionary keys if they contain mutable items\nbad_key = ([1, 2], \"data\")  # Contains a list\nmy_dict = {bad_key: \"value\"}  # TypeError: unhashable type: 'list'\n\n# CORRECT - tuple with only immutable items\ngood_key = ((1, 2), \"data\")  # Tuple of tuples\nmy_dict = {good_key: \"value\"}  # Works!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Tuples are immutable sequences** created with ()\n- **Syntax**: (item1, item2, ...) or item1, item2, ...\n- **Single-item tuple**: (42,) - comma required!\n- **Cannot modify**: No append, remove, or item assignment\n- **Only 2 methods**: count() and index()\n- **Tuple unpacking**: x, y = (10, 20)\n- **Swap variables**: a, b = b, a (uses tuples!)\n- **Function returns**: return (a, b, c) for multiple values\n- **Dictionary keys**: Tuples work, lists don't\n- **Faster than lists**: Less memory, quicker iteration\n\n### When to Use Tuples vs Lists:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Use Tuple When:</th><th>Use List When:</th></tr><tr><td>Data won't change</td><td>Data will be modified</td></tr><tr><td>Fixed number of items</td><td>Variable number of items</td></tr><tr><td>Heterogeneous data</td><td>Homogeneous collection</td></tr><tr><td>Dictionary key needed</td><td>Need append/remove</td></tr><tr><td>Function return</td><td>Building dynamically</td></tr><tr><td>Coordinates, RGB, dates</td><td>Shopping cart, todo list</td></tr></table>### Essential Patterns:\n```\n# Coordinate pairs\npoint = (x, y)\n\n# RGB colors\ncolor = (red, green, blue)\n\n# Multiple returns\ndef divide_with_remainder(a, b):\n    return (a // b, a % b)  # (quotient, remainder)\n\nquot, rem = divide_with_remainder(17, 5)\n\n# Swap variables\na, b = b, a\n\n# Dictionary with tuple keys\nlocations = {\n    (lat, lon): \"City Name\"\n}\n\n# Convert list ‚Üî tuple\nmy_tuple = tuple(my_list)\nmy_list = list(my_tuple)\n\n```\n### Common Mistakes:\n\n<li>**Forgetting comma in single-item tuple**:```\n# WRONG:\nsingle = (42)  # Just an int!\n\n# CORRECT:\nsingle = (42,)  # Tuple with one item\n\n```\n</li><li>**Trying to modify tuple**:```\n# WRONG:\nmy_tuple[0] = 10  # TypeError!\n\n# CORRECT:\nmy_tuple = (10,) + my_tuple[1:]  # Create new tuple\n\n```\n</li><li>**Using list methods on tuple**:```\n# WRONG:\nmy_tuple.append(5)  # AttributeError!\n\n# CORRECT:\nmy_tuple = my_tuple + (5,)  # Concatenate\n\n```\n</li>\n### Before Moving On:\nMake sure you can:\n\n- Create tuples with () or without\n- Create single-item tuples with trailing comma\n- Unpack tuples into variables\n- Use tuples as function returns\n- Understand why tuples can't be modified\n- Know when to use tuples vs lists\n\n### Coming Up Next:\nIn **Lesson 5: List Comprehensions**, you'll learn how to:\n\n- Create lists with concise syntax\n- Filter and transform data\n- Use conditional expressions\n- Build nested comprehensions\n- Write Pythonic code\n\nList comprehensions are one of Python's most powerful features!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **City Distance Calculator** that uses tuples for coordinates and calculates distances between cities.\n\n**Requirements:**\n\n- Create a dictionary of cities with tuple coordinates (latitude, longitude)\n- Include at least 5 major cities\n- Display all cities with their coordinates\n- Ask user to select two cities\n- Calculate the distance between them using the Haversine formula (provided)\n- Show which city is further north (higher latitude)\n- Show which city is further west (more negative longitude)\n- Return results as a tuple: (distance, north_city, west_city)\n\n**Example Output:**\n\n<pre>=== City Distance Calculator ===\n\nAvailable cities:\n1. New York: (40.7128, -74.0060)\n2. Los Angeles: (34.0522, -118.2437)\n3. Chicago: (41.8781, -87.6298)\n4. Houston: (29.7604, -95.3698)\n5. Phoenix: (33.4484, -112.0740)\n\nSelect first city (1-5): 1\nSelected: New York (40.7128, -74.0060)\n\nSelect second city (1-5): 2\nSelected: Los Angeles (34.0522, -118.2437)\n\nResults:\n  Distance: 2451.3 miles\n  Further north: New York\n  Further west: Los Angeles\n</pre>**Haversine Formula (provided):**\n\n<pre>import math\n\ndef calculate_distance(coord1, coord2):\n    lat1, lon1 = coord1\n    lat2, lon2 = coord2\n    \n    # Convert to radians\n    lat1, lon1, lat2, lon2 = map(math.radians, [lat1, lon1, lat2, lon2])\n    \n    # Haversine formula\n    dlat = lat2 - lat1\n    dlon = lon2 - lon1\n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlon/2)**2\n    c = 2 * math.asin(math.sqrt(a))\n    \n    # Earth radius in miles\n    r = 3956\n    \n    return c * r\n</pre>",
              "instructions": "Build a **City Distance Calculator** that uses tuples for coordinates and calculates distances between cities.\n\n**Requirements:**\n\n- Create a dictionary of cities with tuple coordinates (latitude, longitude)\n- Include at least 5 major cities\n- Display all cities with their coordinates\n- Ask user to select two cities\n- Calculate the distance between them using the Haversine formula (provided)\n- Show which city is further north (higher latitude)\n- Show which city is further west (more negative longitude)\n- Return results as a tuple: (distance, north_city, west_city)\n\n**Example Output:**\n\n<pre>=== City Distance Calculator ===\n\nAvailable cities:\n1. New York: (40.7128, -74.0060)\n2. Los Angeles: (34.0522, -118.2437)\n3. Chicago: (41.8781, -87.6298)\n4. Houston: (29.7604, -95.3698)\n5. Phoenix: (33.4484, -112.0740)\n\nSelect first city (1-5): 1\nSelected: New York (40.7128, -74.0060)\n\nSelect second city (1-5): 2\nSelected: Los Angeles (34.0522, -118.2437)\n\nResults:\n  Distance: 2451.3 miles\n  Further north: New York\n  Further west: Los Angeles\n</pre>**Haversine Formula (provided):**\n\n<pre>import math\n\ndef calculate_distance(coord1, coord2):\n    lat1, lon1 = coord1\n    lat2, lon2 = coord2\n    \n    # Convert to radians\n    lat1, lon1, lat2, lon2 = map(math.radians, [lat1, lon1, lat2, lon2])\n    \n    # Haversine formula\n    dlat = lat2 - lat1\n    dlon = lon2 - lon1\n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlon/2)**2\n    c = 2 * math.asin(math.sqrt(a))\n    \n    # Earth radius in miles\n    r = 3956\n    \n    return c * r\n</pre>",
              "starterCode": "# City Distance Calculator - Starter Code\n\nimport math\n\ndef calculate_distance(coord1, coord2):\n    \"\"\"Calculate distance between two coordinates using Haversine formula\"\"\"\n    lat1, lon1 = coord1\n    lat2, lon2 = coord2\n    \n    # Convert to radians\n    lat1, lon1, lat2, lon2 = map(math.radians, [lat1, lon1, lat2, lon2])\n    \n    # Haversine formula\n    dlat = lat2 - lat1\n    dlon = lon2 - lon1\n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlon/2)**2\n    c = 2 * math.asin(math.sqrt(a))\n    \n    # Earth radius in miles\n    r = 3956\n    \n    return c * r\n\nprint(\"=== City Distance Calculator ===\")\nprint()\n\n# YOUR CODE: Create dictionary of cities with tuple coordinates\ncities = {\n    \"New York\":    (40.7128, -74.0060),\n    \"Los Angeles\": (  ,   ),  # Fill in coordinates\n    \"Chicago\":     (41.8781, -87.6298),\n    \"Houston\":     (  ,   ),  # Fill in coordinates\n    \"Phoenix\":     (33.4484, -112.0740)\n}\n\n# Display cities\nprint(\"Available cities:\")\ncity_list = list(cities.keys())\nfor i, city_name in enumerate(city_list, start=1):\n    coords = cities[city_name]\n    lat, lon = coords  # Unpack tuple\n    print(f\"{i}. {city_name}: ({lat}, {lon})\")\n\nprint()\n\n# YOUR CODE: Get first city\nchoice1 = int(input(\"Select first city (1-5): \"))\ncity1_name = city_list[choice1 - 1]\ncity1_coords = cities[city1_name]\nlat1, lon1 = city1_coords  # Unpack\n\nprint(f\"Selected: {city1_name} ({lat1}, {lon1})\")\nprint()\n\n# YOUR CODE: Get second city\nchoice2 = int(input(\"Select second city (1-5): \"))\ncity2_name = city_list[  ]  # Convert 1-based to 0-based\ncity2_coords = cities[city2_name]\nlat2, lon2 =   # Unpack coordinates\n\nprint(f\"Selected: {city2_name} ({lat2}, {lon2})\")\nprint()\n\n# YOUR CODE: Calculate distance\ndistance = calculate_distance(  ,   )\n\n# YOUR CODE: Determine which is further north (higher latitude)\nif lat1 > lat2:\n    north_city = city1_name\nelse:\n    north_city = city2_name\n\n# YOUR CODE: Determine which is further west (more negative longitude)\nif lon1 < lon2:  # More negative = further west\n    west_city = \nelse:\n    west_city = \n\n# Create results tuple\nresults = (distance, north_city, west_city)\n\n# Display results\nprint(\"Results:\")\nprint(f\"  Distance: {results[0]:.1f} miles\")\nprint(f\"  Further north: {results[1]}\")\nprint(f\"  Further west: {results[2]}\")",
              "solution": "# City Distance Calculator - COMPLETE SOLUTION\n\nimport math\n\ndef calculate_distance(coord1, coord2):\n    \"\"\"Calculate distance between two coordinates using Haversine formula\"\"\"\n    lat1, lon1 = coord1\n    lat2, lon2 = coord2\n    \n    # Convert to radians\n    lat1, lon1, lat2, lon2 = map(math.radians, [lat1, lon1, lat2, lon2])\n    \n    # Haversine formula\n    dlat = lat2 - lat1\n    dlon = lon2 - lon1\n    a = math.sin(dlat/2)**2 + math.cos(lat1) * math.cos(lat2) * math.sin(dlon/2)**2\n    c = 2 * math.asin(math.sqrt(a))\n    \n    # Earth radius in miles\n    r = 3956\n    \n    return c * r\n\nprint(\"=== City Distance Calculator ===\")\nprint()\n\n# Create dictionary of cities with tuple coordinates\ncities = {\n    \"New York\":    (40.7128, -74.0060),\n    \"Los Angeles\": (34.0522, -118.2437),\n    \"Chicago\":     (41.8781, -87.6298),\n    \"Houston\":     (29.7604, -95.3698),\n    \"Phoenix\":     (33.4484, -112.0740)\n}\n\n# Display cities\nprint(\"Available cities:\")\ncity_list = list(cities.keys())\nfor i, city_name in enumerate(city_list, start=1):\n    coords = cities[city_name]\n    lat, lon = coords  # Unpack tuple\n    print(f\"{i}. {city_name}: ({lat}, {lon})\")\n\nprint()\n\n# Get first city\nchoice1 = int(input(\"Select first city (1-5): \"))\ncity1_name = city_list[choice1 - 1]\ncity1_coords = cities[city1_name]\nlat1, lon1 = city1_coords  # Unpack\n\nprint(f\"Selected: {city1_name} ({lat1}, {lon1})\")\nprint()\n\n# Get second city\nchoice2 = int(input(\"Select second city (1-5): \"))\ncity2_name = city_list[choice2 - 1]  # Convert 1-based to 0-based\ncity2_coords = cities[city2_name]\nlat2, lon2 = city2_coords  # Unpack coordinates\n\nprint(f\"Selected: {city2_name} ({lat2}, {lon2})\")\nprint()\n\n# Calculate distance\ndistance = calculate_distance(city1_coords, city2_coords)\n\n# Determine which is further north (higher latitude)\nif lat1 > lat2:\n    north_city = city1_name\nelse:\n    north_city = city2_name\n\n# Determine which is further west (more negative longitude)\nif lon1 < lon2:  # More negative = further west\n    west_city = city1_name\nelse:\n    west_city = city2_name\n\n# Create results tuple\nresults = (distance, north_city, west_city)\n\n# Display results\nprint(\"Results:\")\nprint(f\"  Distance: {results[0]:.1f} miles\")\nprint(f\"  Further north: {results[1]}\")\nprint(f\"  Further west: {results[2]}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Tuples use parentheses: (lat, lon). To unpack: lat, lon = coord. For dictionary access: cities[city_name] returns tuple. Index 0-based: city_list[choice - 1]. Further north = higher latitude. Further west = more negative longitude (in Western hemisphere). Create results tuple: (distance, north_city, west_city)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-05-lesson-05",
          "title": "List Comprehensions: Pythonic List Creation",
          "moduleId": "module-05",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you have a list of numbers [1, 2, 3, 4, 5] and want to create a new list with each number doubled.\n\n### The Traditional Way (Verbose):\n```\nnumbers = [1, 2, 3, 4, 5]\ndoubled = []\n\nfor num in numbers:\n    doubled.append(num * 2)\n\n# Result: [2, 4, 6, 8, 10]\n\n```\nThat's **5 lines of code** for a simple operation!\n\n### The Python Way (List Comprehension):\n```\nnumbers = [1, 2, 3, 4, 5]\ndoubled = [num * 2 for num in numbers]\n\n# Result: [2, 4, 6, 8, 10]\n\n```\nThat's **1 line of code** - same result!\n\n### What is a List Comprehension?\nA **list comprehension** is a concise way to create lists. Instead of using loops and append(), you write the transformation inline.\n\n```\n# Pattern:\nnew_list = [expression for item in iterable]\n\n# Reads as: \"For each item in iterable, create expression\"\n\n```\n### Why List Comprehensions?\n\n- **More concise**: 1 line vs 3-5 lines\n- **More readable**: Clear intent (once you learn the syntax)\n- **Faster**: Optimized by Python interpreter\n- **Pythonic**: Idiomatic Python style\n\n### Real-World Analogies:\nThink of it like a factory assembly line instruction:\n\n<pre style='background-color: #f0f0f0; padding: 10px;'>Traditional Way:\n  1. Create empty box\n  2. For each raw material:\n     a. Process it\n     b. Put result in box\n\nList Comprehension:\n  \"Put processed(material) in box for each material on conveyor\"\n  ‚Üì\n  [processed(material) for material in conveyor]\n</pre>### Basic Syntax Patterns:\n#### 1. Transform (Map)\n```\n# Double each number\n[num * 2 for num in numbers]\n\n# Uppercase each word\n[word.upper() for word in words]\n\n# Square each number  \n[x**2 for x in range(10)]\n\n```\n#### 2. Filter\n```\n# Get only even numbers\n[num for num in numbers if num % 2 == 0]\n\n# Get long words (>5 chars)\n[word for word in words if len(word) > 5]\n\n# Get positive numbers\n[x for x in numbers if x > 0]\n\n```\n#### 3. Transform + Filter\n```\n# Double only even numbers\n[num * 2 for num in numbers if num % 2 == 0]\n\n# Uppercase long words\n[word.upper() for word in words if len(word) > 5]\n\n```\n#### 4. Conditional Expression (if-else)\n```\n# Mark even/odd\n[\"even\" if num % 2 == 0 else \"odd\" for num in numbers]\n\n# Absolute values\n[x if x >= 0 else -x for x in numbers]\n\n```\n### Syntax Breakdown:\n```\n[expression for item in iterable if condition]\n  ‚Üì          ‚Üì          ‚Üì            ‚Üì\n  What to    What to    Where from   Filter (optional)\n  create     call it\n\n```\n### Examples:\n```\n# Squares of 0-9\nsquares = [x**2 for x in range(10)]\n# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\n# Even squares only\neven_squares = [x**2 for x in range(10) if x % 2 == 0]\n# [0, 4, 16, 36, 64]\n\n# First letter of each word\nwords = [\"Apple\", \"Banana\", \"Cherry\"]\nfirst_letters = [word[0] for word in words]\n# ['A', 'B', 'C']\n\n# Length of each word\nlengths = [len(word) for word in words]\n# [5, 6, 6]\n\n```\n### When NOT to Use List Comprehensions:\n\n- When logic is complex (hard to read)\n- When you need multiple statements\n- When side effects are needed (printing, file I/O)\n- When readability suffers\n\n```\n# TOO COMPLEX (hard to read):\nresult = [x**2 if x % 2 == 0 else x**3 if x % 3 == 0 else x for x in range(100) if x > 10]\n\n# BETTER: Use regular loop\nresult = []\nfor x in range(100):\n    if x > 10:\n        if x % 2 == 0:\n            result.append(x**2)\n        elif x % 3 == 0:\n            result.append(x**3)\n        else:\n            result.append(x)\n\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n============================================================\nLIST COMPREHENSIONS\n============================================================\n\n=== Basic Transformations ===\n\nOriginal numbers: [1, 2, 3, 4, 5]\n\nTraditional approach (loop + append):\n  Code: for num in numbers: doubled.append(num * 2)\n  Result: [2, 4, 6, 8, 10]\n\nList comprehension:\n  Code: [num * 2 for num in numbers]\n  Result: [2, 4, 6, 8, 10]\n\nSquares 1-10: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]\nCubes 1-5: [1, 8, 27, 64, 125]\n\n=== String Operations ===\n\nOriginal words: ['python', 'java', 'javascript', 'ruby', 'go']\n\nUppercase: ['PYTHON', 'JAVA', 'JAVASCRIPT', 'RUBY', 'GO']\nCapitalized: ['Python', 'Java', 'Javascript', 'Ruby', 'Go']\nFirst letters: ['p', 'j', 'j', 'r', 'g']\nLengths: [6, 4, 10, 4, 2]\nExcited: ['python!', 'java!', 'javascript!', 'ruby!', 'go!']\n\n=== Filtering with if ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nEven numbers: [2, 4, 6, 8, 10]\nOdd numbers: [1, 3, 5, 7, 9]\nGreater than 5: [6, 7, 8, 9, 10]\nDivisible by 3: [3, 6, 9]\n\nWords: ['apple', 'banana', 'cat', 'dog', 'elephant', 'fig']\nLong words (>5): ['banana', 'elephant']\nStart with vowel: ['apple', 'elephant']\n\n=== Transform + Filter ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nSquares of evens: [4, 16, 36, 64, 100]\nDoubled odds: [2, 6, 10, 14, 18]\n\nWords: ['Python', 'Java', 'C', 'JavaScript', 'Go', 'Ruby']\nUppercase long: ['PYTHON', 'JAVASCRIPT']\nLowercase short: ['java', 'c', 'go', 'ruby']\n\n=== Conditional Expressions (if-else) ===\n\nNumbers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n\nLabels: ['odd', 'even', 'odd', 'even', 'odd', 'even', 'odd', 'even', 'odd', 'even']\nValues: [-5, -2, 0, 3, 7]\nSigns: ['negative', 'negative', 'zero', 'positive', 'positive']\n\nRaw scores: [45, 92, 105, 78, 110, 88]\nCapped at 100: [45, 92, 100, 78, 100, 88]\n\nNumbers: [-5, 3, -2, 7, -8, 1]\nAbsolute: [5, 3, 2, 7, 8, 1]\n\n=== Range-Based Comprehensions ===\n\nFirst 10 squares: [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\nEvens 0-20: [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20]\nMultiples of 5: [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]\nMultiples of 5 (alt): [0, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50]\n\n=== Nested Lists (2D) ===\n\nMatrix: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nFlattened: [1, 2, 3, 4, 5, 6, 7, 8, 9]\n\nMultiplication table (3x3):\n  [1, 2, 3]\n  [2, 4, 6]\n  [3, 6, 9]\n\n=== Practical Example: Data Cleaning ===\n\nRaw inputs: [' Alice ', 'BOB', '  charlie  ', 'DIANA', '  eve']\nCleaned: ['Alice', 'Bob', 'Charlie', 'Diana', 'Eve']\n\n=== Practical Example: Temperature Conversion ===\n\nCelsius: [0, 10, 20, 30, 40, 100]\nFahrenheit: [32.0, 50.0, 68.0, 86.0, 104.0, 212.0]\n\n=== Practical Example: Extract Data ===\n\nStudent records:\n  {'name': 'Alice', 'grade': 85}\n  {'name': 'Bob', 'grade': 92}\n  {'name': 'Charlie', 'grade': 78}\n  {'name': 'Diana', 'grade': 95}\n\nNames: ['Alice', 'Bob', 'Charlie', 'Diana']\nGrades: [85, 92, 78, 95]\nA students: ['Bob', 'Diana']\n\n=== Practical Example: File Extensions ===\n\nFiles: ['photo.jpg', 'document.pdf', 'song.mp3', 'video.mp4', 'image.png']\nExtensions: ['jpg', 'pdf', 'mp3', 'mp4', 'png']\nImages: ['photo.jpg', 'image.png']\n\n=== Practical Example: Generate Test Data ===\n\nTest emails:\n  user1@example.com\n  user2@example.com\n  user3@example.com\n  user4@example.com\n  user5@example.com\n  user6@example.com\n  user7@example.com\n  user8@example.com\n  user9@example.com\n  user10@example.com\n\n3x3 grid coordinates: [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]\n\n=== Comparison: Comprehension vs Loop ===\n\nCreating list of squares for 10,000 numbers...\n\nList comprehension: 0.0008 seconds\nTraditional loop:   0.0012 seconds\n\nList comprehension is 1.5x faster!\n\n‚úì List comprehensions are more concise AND faster!\n```",
              "code": "# List Comprehensions: Pythonic List Creation\n\nprint(\"=\" * 60)\nprint(\"LIST COMPREHENSIONS\")\nprint(\"=\" * 60)\nprint()\n\n# ========================================\n# BASIC TRANSFORMATIONS\n# ========================================\n\nprint(\"=== Basic Transformations ===\")\nprint()\n\n# Traditional way\nnumbers = [1, 2, 3, 4, 5]\nprint(f\"Original numbers: {numbers}\")\nprint()\n\nprint(\"Traditional approach (loop + append):\")\ndoubled_traditional = []\nfor num in numbers:\n    doubled_traditional.append(num * 2)\nprint(f\"  Code: for num in numbers: doubled.append(num * 2)\")\nprint(f\"  Result: {doubled_traditional}\")\n\nprint()\n\nprint(\"List comprehension:\")\ndoubled = [num * 2 for num in numbers]\nprint(f\"  Code: [num * 2 for num in numbers]\")\nprint(f\"  Result: {doubled}\")\n\nprint()\n\n# More examples\nsquares = [x**2 for x in range(1, 11)]\nprint(f\"Squares 1-10: {squares}\")\n\ncubes = [x**3 for x in range(1, 6)]\nprint(f\"Cubes 1-5: {cubes}\")\n\nprint()\n\n# ========================================\n# STRING OPERATIONS\n# ========================================\n\nprint(\"=== String Operations ===\")\nprint()\n\nwords = [\"python\", \"java\", \"javascript\", \"ruby\", \"go\"]\nprint(f\"Original words: {words}\")\nprint()\n\n# Uppercase all\nuppercase = [word.upper() for word in words]\nprint(f\"Uppercase: {uppercase}\")\n\n# Capitalize first letter\ncapitalized = [word.capitalize() for word in words]\nprint(f\"Capitalized: {capitalized}\")\n\n# Get first letter\nfirst_letters = [word[0] for word in words]\nprint(f\"First letters: {first_letters}\")\n\n# Get word lengths\nlengths = [len(word) for word in words]\nprint(f\"Lengths: {lengths}\")\n\n# Add exclamation mark\nexcited = [word + \"!\" for word in words]\nprint(f\"Excited: {excited}\")\n\nprint()\n\n# ========================================\n# FILTERING WITH IF\n# ========================================\n\nprint(\"=== Filtering with if ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Even numbers only\nevens = [num for num in numbers if num % 2 == 0]\nprint(f\"Even numbers: {evens}\")\n\n# Odd numbers only\nodds = [num for num in numbers if num % 2 != 0]\nprint(f\"Odd numbers: {odds}\")\n\n# Numbers > 5\ngreater_than_5 = [num for num in numbers if num > 5]\nprint(f\"Greater than 5: {greater_than_5}\")\n\n# Numbers divisible by 3\ndivisible_by_3 = [num for num in numbers if num % 3 == 0]\nprint(f\"Divisible by 3: {divisible_by_3}\")\n\nprint()\n\n# Filter words\nwords = [\"apple\", \"banana\", \"cat\", \"dog\", \"elephant\", \"fig\"]\nprint(f\"Words: {words}\")\n\n# Long words (>5 chars)\nlong_words = [word for word in words if len(word) > 5]\nprint(f\"Long words (>5): {long_words}\")\n\n# Words starting with vowels\nvowel_words = [word for word in words if word[0] in 'aeiou']\nprint(f\"Start with vowel: {vowel_words}\")\n\nprint()\n\n# ========================================\n# TRANSFORM + FILTER\n# ========================================\n\nprint(\"=== Transform + Filter ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Square even numbers only\neven_squares = [num**2 for num in numbers if num % 2 == 0]\nprint(f\"Squares of evens: {even_squares}\")\n\n# Double odd numbers only\nodd_doubled = [num * 2 for num in numbers if num % 2 != 0]\nprint(f\"Doubled odds: {odd_doubled}\")\n\nprint()\n\nwords = [\"Python\", \"Java\", \"C\", \"JavaScript\", \"Go\", \"Ruby\"]\nprint(f\"Words: {words}\")\n\n# Uppercase long words\nupper_long = [word.upper() for word in words if len(word) > 4]\nprint(f\"Uppercase long: {upper_long}\")\n\n# Lowercase short words\nlower_short = [word.lower() for word in words if len(word) <= 4]\nprint(f\"Lowercase short: {lower_short}\")\n\nprint()\n\n# ========================================\n# CONDITIONAL EXPRESSIONS (if-else)\n# ========================================\n\nprint(\"=== Conditional Expressions (if-else) ===\")\nprint()\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Numbers: {numbers}\")\nprint()\n\n# Label even/odd\nlabels = [\"even\" if num % 2 == 0 else \"odd\" for num in numbers]\nprint(f\"Labels: {labels}\")\n\n# Positive/negative/zero\nvalues = [-5, -2, 0, 3, 7]\nsigns = [\"positive\" if x > 0 else \"negative\" if x < 0 else \"zero\" for x in values]\nprint(f\"Values: {values}\")\nprint(f\"Signs: {signs}\")\n\nprint()\n\n# Cap at maximum\nscores = [45, 92, 105, 78, 110, 88]\nprint(f\"Raw scores: {scores}\")\ncapped = [score if score <= 100 else 100 for score in scores]\nprint(f\"Capped at 100: {capped}\")\n\nprint()\n\n# Absolute values\nnumbers = [-5, 3, -2, 7, -8, 1]\nprint(f\"Numbers: {numbers}\")\nabsolute = [x if x >= 0 else -x for x in numbers]\nprint(f\"Absolute: {absolute}\")\n\nprint()\n\n# ========================================\n# RANGE-BASED COMPREHENSIONS\n# ========================================\n\nprint(\"=== Range-Based Comprehensions ===\")\nprint()\n\n# First 10 squares\nsquares = [x**2 for x in range(10)]\nprint(f\"First 10 squares: {squares}\")\n\n# Even numbers 0-20\nevens = [x for x in range(21) if x % 2 == 0]\nprint(f\"Evens 0-20: {evens}\")\n\n# Multiples of 5 up to 50\nfives = [x for x in range(0, 51, 5)]\nprint(f\"Multiples of 5: {fives}\")\n\n# Or using multiplication\nfives_alt = [x * 5 for x in range(11)]\nprint(f\"Multiples of 5 (alt): {fives_alt}\")\n\nprint()\n\n# ========================================\n# NESTED LISTS (2D)\n# ========================================\n\nprint(\"=== Nested Lists (2D) ===\")\nprint()\n\n# Flatten a 2D list\nmatrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nprint(f\"Matrix: {matrix}\")\n\nflattened = [num for row in matrix for num in row]\nprint(f\"Flattened: {flattened}\")\n\nprint()\n\n# Create multiplication table\nprint(\"Multiplication table (3x3):\")\ntable = [[row * col for col in range(1, 4)] for row in range(1, 4)]\nfor row in table:\n    print(f\"  {row}\")\n\nprint()\n\n# ========================================\n# PRACTICAL EXAMPLES\n# ========================================\n\nprint(\"=== Practical Example: Data Cleaning ===\")\nprint()\n\n# Clean user input\nuser_inputs = [\" Alice \", \"BOB\", \"  charlie  \", \"DIANA\", \"  eve\"]\nprint(f\"Raw inputs: {user_inputs}\")\n\n# Clean: strip whitespace and capitalize\ncleaned = [name.strip().capitalize() for name in user_inputs]\nprint(f\"Cleaned: {cleaned}\")\n\nprint()\n\nprint(\"=== Practical Example: Temperature Conversion ===\")\nprint()\n\ncelsius = [0, 10, 20, 30, 40, 100]\nprint(f\"Celsius: {celsius}\")\n\nfahrenheit = [(c * 9/5) + 32 for c in celsius]\nprint(f\"Fahrenheit: {fahrenheit}\")\n\nprint()\n\nprint(\"=== Practical Example: Extract Data ===\")\nprint()\n\nstudents = [\n    {\"name\": \"Alice\", \"grade\": 85},\n    {\"name\": \"Bob\", \"grade\": 92},\n    {\"name\": \"Charlie\", \"grade\": 78},\n    {\"name\": \"Diana\", \"grade\": 95}\n]\n\nprint(\"Student records:\")\nfor s in students:\n    print(f\"  {s}\")\n\nprint()\n\n# Extract all names\nnames = [student[\"name\"] for student in students]\nprint(f\"Names: {names}\")\n\n# Extract all grades\ngrades = [student[\"grade\"] for student in students]\nprint(f\"Grades: {grades}\")\n\n# Get names of students with A grades (>=90)\na_students = [student[\"name\"] for student in students if student[\"grade\"] >= 90]\nprint(f\"A students: {a_students}\")\n\nprint()\n\nprint(\"=== Practical Example: File Extensions ===\")\nprint()\n\nfilenames = [\"photo.jpg\", \"document.pdf\", \"song.mp3\", \"video.mp4\", \"image.png\"]\nprint(f\"Files: {filenames}\")\n\n# Extract extensions\nextensions = [filename.split('.')[-1] for filename in filenames]\nprint(f\"Extensions: {extensions}\")\n\n# Get image files only\nimages = [f for f in filenames if f.endswith(('.jpg', '.png'))]\nprint(f\"Images: {images}\")\n\nprint()\n\nprint(\"=== Practical Example: Generate Test Data ===\")\nprint()\n\n# Create 10 test user emails\nemails = [f\"user{i}@example.com\" for i in range(1, 11)]\nprint(\"Test emails:\")\nfor email in emails:\n    print(f\"  {email}\")\n\nprint()\n\n# Create coordinate pairs\ncoords = [(x, y) for x in range(3) for y in range(3)]\nprint(f\"3x3 grid coordinates: {coords}\")\n\nprint()\n\n# ========================================\n# COMPARISON: COMPREHENSION VS LOOP\n# ========================================\n\nprint(\"=== Comparison: Comprehension vs Loop ===\")\nprint()\n\nimport time\n\n# Test data\ntest_range = range(10000)\n\nprint(\"Creating list of squares for 10,000 numbers...\")\nprint()\n\n# Method 1: List comprehension\nstart = time.time()\nsquares_comp = [x**2 for x in test_range]\ncomp_time = time.time() - start\nprint(f\"List comprehension: {comp_time:.4f} seconds\")\n\n# Method 2: Traditional loop\nstart = time.time()\nsquares_loop = []\nfor x in test_range:\n    squares_loop.append(x**2)\nloop_time = time.time() - start\nprint(f\"Traditional loop:   {loop_time:.4f} seconds\")\n\nprint(f\"\\nList comprehension is {loop_time/comp_time:.1f}x faster!\")\n\nprint()\nprint(\"‚úì List comprehensions are more concise AND faster!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### List Comprehension Syntax:\n```\n# Basic form:\n[expression for item in iterable]\n\n# With filter:\n[expression for item in iterable if condition]\n\n# With if-else (conditional expression):\n[expression_if_true if condition else expression_if_false for item in iterable]\n\n```\n### Reading List Comprehensions:\nRead from LEFT to RIGHT (like English):\n\n```\n[x * 2 for x in numbers if x > 0]\n ‚Üì      ‚Üì         ‚Üì         ‚Üì\n \"x*2\"  \"for x\"   \"in       \"if x > 0\"\n                  numbers\"\n\nReads as: \"Create x*2 for each x in numbers if x > 0\"\n\n```\n### Form 1: Basic Transformation\n```\n# Syntax:\n[expression for item in iterable]\n\n# Examples:\n[x * 2 for x in numbers]              # Double each\n[word.upper() for word in words]      # Uppercase each\n[x**2 for x in range(10)]             # Square 0-9\n[len(word) for word in words]         # Length of each\n\n```\n### Form 2: With Filter (if)\n```\n# Syntax:\n[expression for item in iterable if condition]\n\n# Examples:\n[x for x in numbers if x > 0]         # Positive only\n[x * 2 for x in numbers if x % 2 == 0] # Double evens\n[word for word in words if len(word) > 5] # Long words\n[x**2 for x in range(20) if x % 3 == 0] # Squares of multiples of 3\n\n```\n**Note:** The if at the END is a filter (removes items). No else allowed here!\n\n### Form 3: Conditional Expression (if-else)\n```\n# Syntax:\n[expr_if_true if condition else expr_if_false for item in iterable]\n\n# Examples:\n[\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n[x if x > 0 else 0 for x in numbers]  # Clip negatives to 0\n[word.upper() if len(word) > 5 else word.lower() for word in words]\n\n```\n**Note:** The if-else is BEFORE the for - it's a conditional expression, not a filter!\n\n### Syntax Comparison:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Syntax</th><th>Purpose</th></tr><tr><td>Filter</td><td>[x for x in nums if x > 0]</td><td>Keep some items</td></tr><tr><td>Transform</td><td>[x*2 for x in nums]</td><td>Change all items</td></tr><tr><td>Transform + Filter</td><td>[x*2 for x in nums if x > 0]</td><td>Change and keep some</td></tr><tr><td>Conditional</td><td>[\"Y\" if x > 0 else \"N\" for x in nums]</td><td>Different transforms</td></tr></table>### Equivalent Loop Code:\n```\n# List comprehension:\nresult = [x * 2 for x in numbers if x > 0]\n\n# Equivalent loop:\nresult = []\nfor x in numbers:\n    if x > 0:\n        result.append(x * 2)\n\n# Conditional expression:\nresult = [\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n\n# Equivalent loop:\nresult = []\nfor x in numbers:\n    if x % 2 == 0:\n        result.append(\"even\")\n    else:\n        result.append(\"odd\")\n\n```\n### Nested List Comprehensions:\n```\n# Flatten 2D list:\nmatrix = [[1, 2, 3], [4, 5, 6]]\nflat = [num for row in matrix for num in row]\n# [1, 2, 3, 4, 5, 6]\n\n# Reads as:\n# \"For each row in matrix, for each num in row, take num\"\n\n# Equivalent loop:\nflat = []\nfor row in matrix:\n    for num in row:\n        flat.append(num)\n\n# Create 2D list:\ntable = [[row * col for col in range(1, 4)] for row in range(1, 4)]\n# [[1, 2, 3], [2, 4, 6], [3, 6, 9]]\n\n```\n### Common Patterns:\n```\n# Squares of 0-9\nsquares = [x**2 for x in range(10)]\n\n# Even numbers 0-20\nevens = [x for x in range(21) if x % 2 == 0]\n\n# First letters\nfirst_letters = [word[0] for word in words]\n\n# Lengths\nlengths = [len(item) for item in items]\n\n# Uppercase all\nupper = [s.upper() for s in strings]\n\n# Strip whitespace\ncleaned = [s.strip() for s in strings]\n\n# Absolute values\nabsolute = [x if x >= 0 else -x for x in numbers]\n\n# Clamp to range\nclamped = [x if x <= 100 else 100 for x in scores]\n\n# Extract dict values\nnames = [person[\"name\"] for person in people]\n\n# Generate test data\nemails = [f\"user{i}@test.com\" for i in range(100)]\n\n```\n### Common Mistakes:\n#### 1. Confusing Filter vs Conditional Expression\n```\n# WRONG: Trying to use else with filter\n[x for x in numbers if x > 0 else 0]  # SyntaxError!\n\n# CORRECT: Use conditional expression\n[x if x > 0 else 0 for x in numbers]\n\n# Or use filter only:\n[x for x in numbers if x > 0]\n\n```\n#### 2. Too Complex (Hard to Read)\n```\n# TOO COMPLEX:\nresult = [x**2 if x > 0 else x**3 if x < 0 else 0 for x in numbers if abs(x) > 5]\n\n# BETTER: Use regular loop for clarity\nresult = []\nfor x in numbers:\n    if abs(x) > 5:\n        if x > 0:\n            result.append(x**2)\n        elif x < 0:\n            result.append(x**3)\n        else:\n            result.append(0)\n\n```\n#### 3. Side Effects (Don't Use Comprehensions)\n```\n# WRONG: Using comprehension for side effects\n[print(x) for x in numbers]  # Creates wasteful list!\n\n# CORRECT: Use regular loop\nfor x in numbers:\n    print(x)\n\n```\n### When to Use List Comprehensions:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Use When:</th><th>Don't Use When:</th></tr><tr><td>Simple transformation</td><td>Complex logic (>2 conditions)</td></tr><tr><td>Simple filter</td><td>Multiple statements needed</td></tr><tr><td>Creating new list</td><td>Side effects (print, write)</td></tr><tr><td>One line is clear</td><td>Readability suffers</td></tr><tr><td>Performance matters</td><td>Debugging needed</td></tr></table>"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Confusing filter if vs conditional expression if-else**\n```python\n# WRONG - using else with filter (at the end)\nresult = [x for x in numbers if x > 0 else 0]  # SyntaxError!\n\n# CORRECT - filter (at end, no else allowed)\npositive = [x for x in numbers if x > 0]  # Keep only positive\n\n# CORRECT - conditional expression (before for, must have else)\nresult = [x if x > 0 else 0 for x in numbers]  # Replace negatives with 0\n```\n\n**2. Using comprehension for side effects**\n```python\n# WRONG - creating unnecessary list for side effects\n[print(x) for x in items]  # Creates list of None values\n\n# CORRECT - use regular loop for side effects\nfor x in items:\n    print(x)\n```\n\n**3. Too complex comprehension (hard to read)**\n```python\n# WRONG - too complex, hard to understand\nresult = [x**2 if x > 0 else x**3 if x < 0 else 0 for x in data if abs(x) > 5 and x % 2 == 0]\n\n# CORRECT - use regular loop for complex logic\nresult = []\nfor x in data:\n    if abs(x) > 5 and x % 2 == 0:\n        if x > 0:\n            result.append(x**2)\n        elif x < 0:\n            result.append(x**3)\n        else:\n            result.append(0)\n```\n\n**4. Variable scope confusion**\n```python\n# CAUTION - loop variable exists after comprehension\n[x * 2 for x in range(5)]\nprint(x)  # 4 - x still exists! (Python 3)\n\n# BETTER - use descriptive names to avoid confusion\n[item * 2 for item in range(5)]\n# Now 'item' is less likely to conflict with other variables\n```\n\n**5. Forgetting to handle empty iterables**\n```python\n# WRONG - assuming list has items\nscores = []\naverage = sum([s for s in scores]) / len(scores)  # ZeroDivisionError!\n\n# CORRECT - check for empty\nscores = []\nif scores:\n    average = sum(scores) / len(scores)\nelse:\n    average = 0\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **List comprehensions** create lists concisely in one line\n- **Syntax**: [expression for item in iterable]\n- **With filter**: [expr for item in iter if condition]\n- **Conditional expression**: [expr_if_true if cond else expr_if_false for item in iter]\n- **Faster than loops**: Optimized by Python\n- **More Pythonic**: Idiomatic Python style\n- **Read left to right**: \"Create expr for each item in iter if condition\"\n- **Nested comprehensions**: [[inner] for outer]\n- **Don't overuse**: Complex logic should use regular loops\n\n### Essential Patterns:\n```\n# Transform all items\n[x * 2 for x in numbers]\n\n# Filter items\n[x for x in numbers if x > 0]\n\n# Transform + filter\n[x * 2 for x in numbers if x > 0]\n\n# Conditional expression\n[\"even\" if x % 2 == 0 else \"odd\" for x in numbers]\n\n# String operations\n[s.upper() for s in strings]\n[s.strip() for s in strings]\n[len(s) for s in strings]\n\n# From range\n[x**2 for x in range(10)]\n\n# Extract from dicts\n[person[\"name\"] for person in people]\n\n# Flatten 2D\n[item for row in matrix for item in row]\n\n# Create 2D\n[[r*c for c in range(n)] for r in range(n)]\n\n```\n### Comprehension vs Loop:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Feature</th><th>List Comprehension</th><th>Regular Loop</th></tr><tr><td>Lines</td><td>1</td><td>3-5</td></tr><tr><td>Speed</td><td>Faster</td><td>Slower</td></tr><tr><td>Readability</td><td>High (when simple)</td><td>High (when complex)</td></tr><tr><td>Debugging</td><td>Harder</td><td>Easier</td></tr><tr><td>Side effects</td><td>Not recommended</td><td>OK</td></tr></table>### When to Use:\n**Use comprehensions for:**\n\n- Simple transformations\n- Simple filters\n- Creating new lists\n- Pythonic/readable one-liners\n\n**Use regular loops for:**\n\n- Complex logic (>2 conditions)\n- Multiple statements\n- Side effects (print, file I/O)\n- When debugging\n- When readability suffers\n\n### Before Moving On:\nMake sure you can:\n\n- Write basic transformations [x*2 for x in nums]\n- Add filters [x for x in nums if x > 0]\n- Use conditional expressions [a if cond else b for x in nums]\n- Understand the syntax and execution order\n- Know when NOT to use comprehensions\n\n### Module 5 Almost Complete!\nYou've mastered:\n\n- ‚úÖ List basics (indexing, slicing)\n- ‚úÖ List methods (append, remove, sort...)\n- ‚úÖ List slicing ([start:stop:step])\n- ‚úÖ Tuples (immutable sequences)\n- ‚úÖ List comprehensions (Pythonic list creation)\n\n### Coming Up: Module 5 Final Lesson\nIn **Lesson 6: Mini-Project - Advanced List Operations**, you'll build a complete data analysis program combining all Module 5 concepts!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-05-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Data Processor** that uses list comprehensions to transform and filter various datasets.\n\n**Requirements:**\n\n- Given a list of temperatures in Celsius, convert to Fahrenheit (formula: F = C * 9/5 + 32)\n- From a list of prices, apply 20% discount to items over $50\n- Clean a list of email addresses (strip whitespace, lowercase)\n- From student scores, extract passing grades (>=60) and calculate letter grades\n- Generate a multiplication table (5x5) using nested comprehension\n- From a sentence, get words longer than 4 characters, uppercased\n- Create list of tuples: (number, square, cube) for numbers 1-10\n\n**Example Output:**\n\n<pre>=== Data Processor ===\"\n\n1. Temperature Conversion:\n   Celsius: [0, 10, 20, 30, 40]\n   Fahrenheit: [32.0, 50.0, 68.0, 86.0, 104.0]\n\n2. Price Discounts:\n   Original: [45.00, 60.00, 25.00, 80.00, 55.00]\n   Discounted: [45.00, 48.00, 25.00, 64.00, 44.00]\n\n3. Email Cleaning:\n   Raw: [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\n   Clean: ['alice@example.com', 'bob@test.com', 'charlie@mail.org']\n\n4. Grade Processing:\n   Scores: [85, 92, 55, 78, 95, 45, 88]\n   Passing: [85, 92, 78, 95, 88]\n   Letters: ['B', 'A', 'C', 'A', 'B']\n\n5. Multiplication Table (5x5):\n   [1, 2, 3, 4, 5]\n   [2, 4, 6, 8, 10]\n   [3, 6, 9, 12, 15]\n   [4, 8, 12, 16, 20]\n   [5, 10, 15, 20, 25]\n\n6. Long Words:\n   Sentence: \"The quick brown fox jumps over the lazy dog\"\n   Long words (>4): ['QUICK', 'BROWN', 'JUMPS']\n\n7. Number Data:\n   [(1, 1, 1), (2, 4, 8), (3, 9, 27), (4, 16, 64), (5, 25, 125), ...]\n</pre>",
              "instructions": "Build a **Data Processor** that uses list comprehensions to transform and filter various datasets.\n\n**Requirements:**\n\n- Given a list of temperatures in Celsius, convert to Fahrenheit (formula: F = C * 9/5 + 32)\n- From a list of prices, apply 20% discount to items over $50\n- Clean a list of email addresses (strip whitespace, lowercase)\n- From student scores, extract passing grades (>=60) and calculate letter grades\n- Generate a multiplication table (5x5) using nested comprehension\n- From a sentence, get words longer than 4 characters, uppercased\n- Create list of tuples: (number, square, cube) for numbers 1-10\n\n**Example Output:**\n\n<pre>=== Data Processor ===\"\n\n1. Temperature Conversion:\n   Celsius: [0, 10, 20, 30, 40]\n   Fahrenheit: [32.0, 50.0, 68.0, 86.0, 104.0]\n\n2. Price Discounts:\n   Original: [45.00, 60.00, 25.00, 80.00, 55.00]\n   Discounted: [45.00, 48.00, 25.00, 64.00, 44.00]\n\n3. Email Cleaning:\n   Raw: [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\n   Clean: ['alice@example.com', 'bob@test.com', 'charlie@mail.org']\n\n4. Grade Processing:\n   Scores: [85, 92, 55, 78, 95, 45, 88]\n   Passing: [85, 92, 78, 95, 88]\n   Letters: ['B', 'A', 'C', 'A', 'B']\n\n5. Multiplication Table (5x5):\n   [1, 2, 3, 4, 5]\n   [2, 4, 6, 8, 10]\n   [3, 6, 9, 12, 15]\n   [4, 8, 12, 16, 20]\n   [5, 10, 15, 20, 25]\n\n6. Long Words:\n   Sentence: \"The quick brown fox jumps over the lazy dog\"\n   Long words (>4): ['QUICK', 'BROWN', 'JUMPS']\n\n7. Number Data:\n   [(1, 1, 1), (2, 4, 8), (3, 9, 27), (4, 16, 64), (5, 25, 125), ...]\n</pre>",
              "starterCode": "# Data Processor - Starter Code\n\nprint(\"=== Data Processor ===\")\nprint()\n\n# 1. Temperature Conversion\ncelsius = [0, 10, 20, 30, 40]\nprint(\"1. Temperature Conversion:\")\nprint(f\"   Celsius: {celsius}\")\n\n# YOUR CODE: Convert to Fahrenheit using comprehension\nfahrenheit = [  # Formula: C * 9/5 + 32\nprint(f\"   Fahrenheit: {fahrenheit}\")\n\nprint()\n\n# 2. Price Discounts\nprices = [45.00, 60.00, 25.00, 80.00, 55.00]\nprint(\"2. Price Discounts:\")\nprint(f\"   Original: {prices}\")\n\n# YOUR CODE: Apply 20% discount to items > $50, keep others same\ndiscounted = [  # if price > 50, multiply by 0.8, else keep same\nprint(f\"   Discounted: {discounted}\")\n\nprint()\n\n# 3. Email Cleaning\nemails_raw = [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\nprint(\"3. Email Cleaning:\")\nprint(f\"   Raw: {emails_raw}\")\n\n# YOUR CODE: Strip whitespace and lowercase\nemails_clean = [  # Use .strip() and .lower()\nprint(f\"   Clean: {emails_clean}\")\n\nprint()\n\n# 4. Grade Processing\nscores = [85, 92, 55, 78, 95, 45, 88]\nprint(\"4. Grade Processing:\")\nprint(f\"   Scores: {scores}\")\n\n# YOUR CODE: Get passing grades only (>=60)\npassing = [\nprint(f\"   Passing: {passing}\")\n\n# YOUR CODE: Convert passing grades to letters\n# A: >=90, B: >=80, C: >=70, D: >=60\nletters = [  # Use nested if-else\nprint(f\"   Letters: {letters}\")\n\nprint()\n\n# 5. Multiplication Table\nprint(\"5. Multiplication Table (5x5):\")\n\n# YOUR CODE: Create 5x5 table using nested comprehension\ntable = [  # [[row*col for col in range(1,6)] for row in range(1,6)]\nfor row in table:\n    print(f\"   {row}\")\n\nprint()\n\n# 6. Long Words\nsentence = \"The quick brown fox jumps over the lazy dog\"\nprint(\"6. Long Words:\")\nprint(f\"   Sentence: {sentence}\")\n\nwords = sentence.split()  # Split into list of words\n\n# YOUR CODE: Get words > 4 chars, uppercased\nlong_words = [\nprint(f\"   Long words (>4): {long_words}\")\n\nprint()\n\n# 7. Number Data Tuples\nprint(\"7. Number Data:\")\n\n# YOUR CODE: Create list of (number, square, cube) tuples for 1-10\nnumber_data = [  # (n, n**2, n**3)\nprint(f\"   {number_data}\")",
              "solution": "# Data Processor - COMPLETE SOLUTION\n\nprint(\"=== Data Processor ===\")\nprint()\n\n# 1. Temperature Conversion\ncelsius = [0, 10, 20, 30, 40]\nprint(\"1. Temperature Conversion:\")\nprint(f\"   Celsius: {celsius}\")\n\nfahrenheit = [(c * 9/5) + 32 for c in celsius]\nprint(f\"   Fahrenheit: {fahrenheit}\")\n\nprint()\n\n# 2. Price Discounts\nprices = [45.00, 60.00, 25.00, 80.00, 55.00]\nprint(\"2. Price Discounts:\")\nprint(f\"   Original: {prices}\")\n\ndiscounted = [price * 0.8 if price > 50 else price for price in prices]\nprint(f\"   Discounted: {discounted}\")\n\nprint()\n\n# 3. Email Cleaning\nemails_raw = [' Alice@EXAMPLE.com ', 'BOB@test.COM', '  charlie@mail.org']\nprint(\"3. Email Cleaning:\")\nprint(f\"   Raw: {emails_raw}\")\n\nemails_clean = [email.strip().lower() for email in emails_raw]\nprint(f\"   Clean: {emails_clean}\")\n\nprint()\n\n# 4. Grade Processing\nscores = [85, 92, 55, 78, 95, 45, 88]\nprint(\"4. Grade Processing:\")\nprint(f\"   Scores: {scores}\")\n\npassing = [score for score in scores if score >= 60]\nprint(f\"   Passing: {passing}\")\n\nletters = ['A' if s >= 90 else 'B' if s >= 80 else 'C' if s >= 70 else 'D' for s in passing]\nprint(f\"   Letters: {letters}\")\n\nprint()\n\n# 5. Multiplication Table\nprint(\"5. Multiplication Table (5x5):\")\n\ntable = [[row * col for col in range(1, 6)] for row in range(1, 6)]\nfor row in table:\n    print(f\"   {row}\")\n\nprint()\n\n# 6. Long Words\nsentence = \"The quick brown fox jumps over the lazy dog\"\nprint(\"6. Long Words:\")\nprint(f\"   Sentence: {sentence}\")\n\nwords = sentence.split()\nlong_words = [word.upper() for word in words if len(word) > 4]\nprint(f\"   Long words (>4): {long_words}\")\n\nprint()\n\n# 7. Number Data Tuples\nprint(\"7. Number Data:\")\n\nnumber_data = [(n, n**2, n**3) for n in range(1, 11)]\nprint(f\"   {number_data}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For Fahrenheit: [(c * 9/5) + 32 for c in celsius]. For discounts: [p * 0.8 if p > 50 else p for p in prices]. For emails: [e.strip().lower() for e in emails_raw]. For passing: [s for s in scores if s >= 60]. For letters: ['A' if s >= 90 else 'B' if s >= 80 else 'C' if s >= 70 else 'D' for s in passing]. For table: [[r*c for c in range(1,6)] for r in range(1,6)]. For long words: [w.upper() for w in words if len(w) > 4]. For tuples: [(n, n**2, n**3) for n in range(1, 11)]."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-05-lesson-06",
          "title": "Mini-Project: Student Grade Analytics System",
          "moduleId": "module-05",
          "order": 6,
          "estimatedMinutes": 40,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "You're building a **Student Grade Analytics System** that processes student data, calculates statistics, and generates reports. This project combines everything from Module 5:\n\n- **Lists**: Store students and grades\n- **Tuples**: Immutable student records\n- **Slicing**: Extract data ranges\n- **List Methods**: Sort, filter, manipulate data\n- **List Comprehensions**: Transform and filter efficiently\n\n### Project Overview:\n<pre style='background-color: #f0f0f0; padding: 10px;'>=== Student Grade Analytics System ===\n\n1. Data Management\n   - Store student records as tuples (id, name, grades)\n   - Add/remove students\n   - Update grades\n\n2. Grade Analysis\n   - Calculate averages, highs, lows\n   - Find honor roll students\n   - Identify students needing help\n\n3. Report Generation\n   - Generate formatted reports\n   - Display statistics\n   - Create visualizations (text-based)\n\n4. Data Transformations\n   - Apply grade curves\n   - Filter by performance\n   - Sort by various criteria\n</pre>### Technical Requirements:\n\n- **Student Record**: Tuple of (id, name, [grades])\n- **Grade List**: List of test scores per student\n- **Class Data**: List of student tuples\n- **Statistics**: Calculated using list comprehensions\n- **Filtering**: Use slicing and comprehensions\n\n### Features You'll Implement:\n#### 1. Data Storage\n```\n# Each student is a tuple:\n(101, \"Alice\", [85, 92, 88, 95, 90])\n(102, \"Bob\", [78, 82, 75, 88, 80])\n\n# Why tuples?\n# - Student ID and name shouldn't change\n# - Grade list CAN change (it's nested, not part of tuple immutability)\n\n```\n#### 2. Calculations with Comprehensions\n```\n# Average grade per student\naverages = [sum(grades)/len(grades) for (id, name, grades) in students]\n\n# Students with A averages\na_students = [(name, avg) for (id, name, grades), avg in zip(students, averages) if avg >= 90]\n\n# All grades flattened\nall_grades = [grade for (id, name, grades) in students for grade in grades]\n\n```\n#### 3. Slicing for Reports\n```\n# Top 3 students\ntop_3 = sorted_students[:3]\n\n# Bottom quarter\nbottom_quarter = sorted_students[:len(sorted_students)//4]\n\n# Middle range\nmiddle = sorted_students[len(sorted_students)//4:3*len(sorted_students)//4]\n\n```\n#### 4. Text-Based Visualizations\n```\n# Grade distribution bar chart\nfor student_id, name, grades in students:\n    avg = sum(grades) / len(grades)\n    bar_length = int(avg / 5)  # Each * = 5 points\n    bar = \"*\" * bar_length\n    print(f\"{name:15} {avg:5.1f} {bar}\")\n\n# Output:\n# Alice           90.0 ******************\n# Bob             80.6 ****************\n\n```\n### Sample Workflow:\n```\n1. Load student data (or generate sample data)\n2. Display all students with their averages\n3. Calculate class statistics (min, max, mean, median)\n4. Generate honor roll (avg >= 90)\n5. Identify at-risk students (avg < 70)\n6. Apply grade curve (add 5 points to all grades)\n7. Show top/bottom performers\n8. Create grade distribution chart\n9. Export report\n\n```\n### Skills You'll Practice:\n\n- Working with nested data structures\n- Tuple unpacking in loops\n- List comprehensions with filters\n- Slicing for data extraction\n- Sorting with custom keys\n- Data aggregation and statistics\n- Text formatting and output"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n======================================================================\nSTUDENT GRADE ANALYTICS SYSTEM\n======================================================================\n\n=== Part 1: Data Setup ===\n\nLoaded 8 student records\nSample record: (101, 'Alice Johnson', [85, 92, 88, 95, 90])\n\n=== Part 2: All Students ===\n\nID       Name                 Grades                         Average   \n----------------------------------------------------------------------\n101      Alice Johnson        [85, 92, 88, 95, 90]           90.00     \n102      Bob Smith            [78, 82, 75, 88, 80]           80.60     \n103      Charlie Brown        [92, 95, 98, 94, 96]           95.00     \n104      Diana Ross           [68, 72, 65, 70, 73]           69.60     \n105      Eve Adams            [88, 91, 85, 92, 89]           89.00     \n106      Frank Miller         [55, 62, 58, 60, 65]           60.00     \n107      Grace Lee            [95, 98, 92, 97, 94]           95.20     \n108      Henry Davis          [82, 85, 88, 81, 84]           84.00     \n\n=== Part 3: Class Statistics ===\n\nTotal students: 8\nTotal grades recorded: 40\nClass average: 82.93\nHighest student average: 95.20\nLowest student average: 60.00\nHighest individual grade: 98\nLowest individual grade: 55\n\n=== Part 4: Honor Roll (Average >= 90) ===\n\nCongratulations to 3 students on the Honor Roll!\n\n  ‚≠ê Alice Johnson       Average: 90.00\n  ‚≠ê Charlie Brown       Average: 95.00\n  ‚≠ê Grace Lee           Average: 95.20\n\n=== Part 5: At-Risk Students (Average < 70) ===\n\n‚ö†Ô∏è  2 students need additional support:\n\n  Diana Ross           Average: 69.60\n  Frank Miller         Average: 60.00\n\n=== Part 6: Student Rankings ===\n\nTop to Bottom:\n  #1   Grace Lee            95.20\n  #2   Charlie Brown        95.00\n  #3   Alice Johnson        90.00\n  #4   Eve Adams            89.00\n  #5   Henry Davis          84.00\n  #6   Bob Smith            80.60\n  #7   Diana Ross           69.60\n  #8   Frank Miller         60.00\n\nüèÜ Top 3 Performers:\n  ü•á #1 Grace Lee            95.20\n  ü•à #2 Charlie Brown        95.00\n  ü•â #3 Alice Johnson        90.00\n\nüìâ Bottom 3 (Need Improvement):\n  Bob Smith            80.60\n  Diana Ross           69.60\n  Frank Miller         60.00\n\n=== Part 7: Grade Distribution ===\n\nLetter Grade Distribution:\n  A (90+):   3 students ***\n  B (80+):   2 students **\n  C (70+):   0 students \n  D (60+):   2 students **\n  F (<60):   1 students *\n\n=== Part 8: Apply Grade Curve (+5 points) ===\n\nBefore curve:\n  Class average: 82.93\n\nAfter curve:\n  Class average: 87.93\n  Improvement: +5.00 points\n\nSample student (before ‚Üí after):\n  Alice Johnson:\n    Before: [85, 92, 88, 95, 90] ‚Üí Avg: 90.00\n    After:  [90, 97, 93, 100, 95] ‚Üí Avg: 95.00\n  Diana Ross:\n    Before: [68, 72, 65, 70, 73] ‚Üí Avg: 69.60\n    After:  [73, 77, 70, 75, 78] ‚Üí Avg: 74.60\n\n=== Part 9: Grade Trends (First vs Last Test) ===\n\nAlice Johnson         85 ‚Üí  90 ( +5) üìà Improving\nBob Smith             78 ‚Üí  80 ( +2) üìà Improving\nCharlie Brown         92 ‚Üí  96 ( +4) üìà Improving\nDiana Ross            68 ‚Üí  73 ( +5) üìà Improving\nEve Adams             88 ‚Üí  89 ( +1) üìà Improving\nFrank Miller          55 ‚Üí  65 (+10) üìà Improving\nGrace Lee             95 ‚Üí  94 ( -1) üìâ Declining\nHenry Davis           82 ‚Üí  84 ( +2) üìà Improving\n\n=== Part 10: Test Difficulty Analysis ===\n\nAverage score per test:\n  Test 1:  80.4 **************** (Medium)\n  Test 2:  84.6 **************** (Easy)\n  Test 3:  81.1 **************** (Medium)\n  Test 4:  84.4 **************** (Easy)\n  Test 5:  83.9 **************** (Medium)\n\nHardest test: Test 1 (avg: 80.4)\nEasiest test: Test 2 (avg: 84.6)\n\n======================================================================\nFINAL SUMMARY REPORT\n======================================================================\n\nClass Size: 8 students\nTests Administered: 5\nTotal Grades: 40\n\nClass Average: 82.93\nHonor Roll: 3 students\nAt-Risk: 2 students\n\nTop Performer: Grace Lee (95.20)\nNeeds Support: Frank Miller (60.00)\n\nGrade Distribution: 3 A's, 2 B's, 0 C's, 2 D's, 1 F's\n\n‚úì Analysis complete!\n```",
              "code": "# Mini-Project: Student Grade Analytics System\n# Complete implementation demonstrating all Module 5 concepts\n\nprint(\"=\" * 70)\nprint(\"STUDENT GRADE ANALYTICS SYSTEM\")\nprint(\"=\" * 70)\nprint()\n\n# ========================================\n# PART 1: DATA SETUP\n# ========================================\n\nprint(\"=== Part 1: Data Setup ===\")\nprint()\n\n# Student records: (ID, Name, [Grades])\n# Using tuples because ID and name shouldn't change\nstudents = [\n    (101, \"Alice Johnson\", [85, 92, 88, 95, 90]),\n    (102, \"Bob Smith\", [78, 82, 75, 88, 80]),\n    (103, \"Charlie Brown\", [92, 95, 98, 94, 96]),\n    (104, \"Diana Ross\", [68, 72, 65, 70, 73]),\n    (105, \"Eve Adams\", [88, 91, 85, 92, 89]),\n    (106, \"Frank Miller\", [55, 62, 58, 60, 65]),\n    (107, \"Grace Lee\", [95, 98, 92, 97, 94]),\n    (108, \"Henry Davis\", [82, 85, 88, 81, 84])\n]\n\nprint(f\"Loaded {len(students)} student records\")\nprint(f\"Sample record: {students[0]}\")\nprint()\n\n# ========================================\n# PART 2: DISPLAY ALL STUDENTS\n# ========================================\n\nprint(\"=== Part 2: All Students ===\")\nprint()\nprint(f\"{'ID':<8} {'Name':<20} {'Grades':<30} {'Average':<10}\")\nprint(\"-\" * 70)\n\nfor student_id, name, grades in students:  # Tuple unpacking\n    avg = sum(grades) / len(grades)\n    grades_str = str(grades)\n    print(f\"{student_id:<8} {name:<20} {grades_str:<30} {avg:<10.2f}\")\n\nprint()\n\n# ========================================\n# PART 3: CALCULATE STATISTICS\n# ========================================\n\nprint(\"=== Part 3: Class Statistics ===\")\nprint()\n\n# Calculate average for each student (list comprehension)\naverages = [sum(grades)/len(grades) for (id, name, grades) in students]\n\n# Overall class statistics\nclass_avg = sum(averages) / len(averages)\nhighest_avg = max(averages)\nlowest_avg = min(averages)\n\n# Get all individual grades (flatten nested lists)\nall_grades = [grade for (id, name, grades) in students for grade in grades]\n\nprint(f\"Total students: {len(students)}\")\nprint(f\"Total grades recorded: {len(all_grades)}\")\nprint(f\"Class average: {class_avg:.2f}\")\nprint(f\"Highest student average: {highest_avg:.2f}\")\nprint(f\"Lowest student average: {lowest_avg:.2f}\")\nprint(f\"Highest individual grade: {max(all_grades)}\")\nprint(f\"Lowest individual grade: {min(all_grades)}\")\n\nprint()\n\n# ========================================\n# PART 4: HONOR ROLL (Average >= 90)\n# ========================================\n\nprint(\"=== Part 4: Honor Roll (Average >= 90) ===\")\nprint()\n\n# Create list of (name, average) for honor roll students\nhonor_roll = [\n    (name, sum(grades)/len(grades)) \n    for (id, name, grades) in students \n    if sum(grades)/len(grades) >= 90\n]\n\nif honor_roll:\n    print(f\"Congratulations to {len(honor_roll)} students on the Honor Roll!\")\n    print()\n    for name, avg in honor_roll:\n        print(f\"  ‚≠ê {name:<20} Average: {avg:.2f}\")\nelse:\n    print(\"No students qualified for honor roll this term.\")\n\nprint()\n\n# ========================================\n# PART 5: AT-RISK STUDENTS (Average < 70)\n# ========================================\n\nprint(\"=== Part 5: At-Risk Students (Average < 70) ===\")\nprint()\n\nat_risk = [\n    (name, sum(grades)/len(grades))\n    for (id, name, grades) in students\n    if sum(grades)/len(grades) < 70\n]\n\nif at_risk:\n    print(f\"‚ö†Ô∏è  {len(at_risk)} students need additional support:\")\n    print()\n    for name, avg in at_risk:\n        print(f\"  {name:<20} Average: {avg:.2f}\")\nelse:\n    print(\"‚úì All students are performing well (>= 70)\")\n\nprint()\n\n# ========================================\n# PART 6: RANKING (Sorted by Average)\n# ========================================\n\nprint(\"=== Part 6: Student Rankings ===\")\nprint()\n\n# Create list of (name, average) and sort by average (descending)\nranked = [(name, sum(grades)/len(grades)) for (id, name, grades) in students]\nranked.sort(key=lambda x: x[1], reverse=True)  # Sort by average\n\nprint(\"Top to Bottom:\")\nfor rank, (name, avg) in enumerate(ranked, start=1):\n    print(f\"  #{rank:<3} {name:<20} {avg:.2f}\")\n\nprint()\n\n# Top 3 using slicing\nprint(\"üèÜ Top 3 Performers:\")\nfor rank, (name, avg) in enumerate(ranked[:3], start=1):\n    medal = [\"ü•á\", \"ü•à\", \"ü•â\"][rank-1]\n    print(f\"  {medal} #{rank} {name:<20} {avg:.2f}\")\n\nprint()\n\n# Bottom 3 using negative slicing\nprint(\"üìâ Bottom 3 (Need Improvement):\")\nfor name, avg in ranked[-3:]:\n    print(f\"  {name:<20} {avg:.2f}\")\n\nprint()\n\n# ========================================\n# PART 7: GRADE DISTRIBUTION\n# ========================================\n\nprint(\"=== Part 7: Grade Distribution ===\")\nprint()\n\n# Count students in each grade range\na_count = len([avg for avg in averages if avg >= 90])\nb_count = len([avg for avg in averages if 80 <= avg < 90])\nc_count = len([avg for avg in averages if 70 <= avg < 80])\nd_count = len([avg for avg in averages if 60 <= avg < 70])\nf_count = len([avg for avg in averages if avg < 60])\n\nprint(\"Letter Grade Distribution:\")\nprint(f\"  A (90+):  {a_count:2} students {'*' * a_count}\")\nprint(f\"  B (80+):  {b_count:2} students {'*' * b_count}\")\nprint(f\"  C (70+):  {c_count:2} students {'*' * c_count}\")\nprint(f\"  D (60+):  {d_count:2} students {'*' * d_count}\")\nprint(f\"  F (<60):  {f_count:2} students {'*' * f_count}\")\n\nprint()\n\n# ========================================\n# PART 8: GRADE CURVE (+5 points)\n# ========================================\n\nprint(\"=== Part 8: Apply Grade Curve (+5 points) ===\")\nprint()\n\nprint(\"Before curve:\")\nprint(f\"  Class average: {class_avg:.2f}\")\n\n# Apply curve: add 5 to each grade, cap at 100\ncurved_students = [\n    (id, name, [min(grade + 5, 100) for grade in grades])  # List comprehension for curve\n    for (id, name, grades) in students\n]\n\n# Recalculate averages after curve\ncurved_averages = [sum(grades)/len(grades) for (id, name, grades) in curved_students]\ncurved_class_avg = sum(curved_averages) / len(curved_averages)\n\nprint(f\"\\nAfter curve:\")\nprint(f\"  Class average: {curved_class_avg:.2f}\")\nprint(f\"  Improvement: +{curved_class_avg - class_avg:.2f} points\")\n\nprint()\nprint(\"Sample student (before ‚Üí after):\")\nfor i in [0, 3]:  # Show first and fourth student\n    id, name, old_grades = students[i]\n    _, _, new_grades = curved_students[i]\n    print(f\"  {name}:\")\n    print(f\"    Before: {old_grades} ‚Üí Avg: {sum(old_grades)/len(old_grades):.2f}\")\n    print(f\"    After:  {new_grades} ‚Üí Avg: {sum(new_grades)/len(new_grades):.2f}\")\n\nprint()\n\n# ========================================\n# PART 9: GRADE TREND ANALYSIS\n# ========================================\n\nprint(\"=== Part 9: Grade Trends (First vs Last Test) ===\")\nprint()\n\nfor student_id, name, grades in students:\n    first_test = grades[0]      # First grade\n    last_test = grades[-1]      # Last grade\n    change = last_test - first_test\n    \n    trend = \"üìà Improving\" if change > 0 else \"üìâ Declining\" if change < 0 else \"‚û°Ô∏è  Stable\"\n    \n    print(f\"{name:<20} {first_test:3} ‚Üí {last_test:3} ({change:+3}) {trend}\")\n\nprint()\n\n# ========================================\n# PART 10: TEST DIFFICULTY ANALYSIS\n# ========================================\n\nprint(\"=== Part 10: Test Difficulty Analysis ===\")\nprint()\n\n# Calculate average for each test across all students\nnum_tests = len(students[0][2])  # Assuming all students have same number of tests\n\ntest_averages = [\n    sum([grades[test_num] for (id, name, grades) in students]) / len(students)\n    for test_num in range(num_tests)\n]\n\nprint(\"Average score per test:\")\nfor test_num, avg in enumerate(test_averages, start=1):\n    bar = \"*\" * int(avg / 5)  # Each * = 5 points\n    difficulty = \"Hard\" if avg < 75 else \"Medium\" if avg < 85 else \"Easy\"\n    print(f\"  Test {test_num}: {avg:5.1f} {bar} ({difficulty})\")\n\nprint()\n\n# Hardest and easiest tests\nhardest_test = test_averages.index(min(test_averages)) + 1\neasiest_test = test_averages.index(max(test_averages)) + 1\n\nprint(f\"Hardest test: Test {hardest_test} (avg: {min(test_averages):.1f})\")\nprint(f\"Easiest test: Test {easiest_test} (avg: {max(test_averages):.1f})\")\n\nprint()\n\n# ========================================\n# PART 11: FINAL REPORT\n# ========================================\n\nprint(\"=\" * 70)\nprint(\"FINAL SUMMARY REPORT\")\nprint(\"=\" * 70)\nprint()\n\nprint(f\"Class Size: {len(students)} students\")\nprint(f\"Tests Administered: {num_tests}\")\nprint(f\"Total Grades: {len(all_grades)}\")\nprint()\nprint(f\"Class Average: {class_avg:.2f}\")\nprint(f\"Honor Roll: {len(honor_roll)} students\")\nprint(f\"At-Risk: {len(at_risk)} students\")\nprint()\nprint(f\"Top Performer: {ranked[0][0]} ({ranked[0][1]:.2f})\")\nprint(f\"Needs Support: {ranked[-1][0]} ({ranked[-1][1]:.2f})\")\nprint()\nprint(f\"Grade Distribution: {a_count} A's, {b_count} B's, {c_count} C's, {d_count} D's, {f_count} F's\")\nprint()\nprint(\"‚úì Analysis complete!\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Module 5 Concepts Used:\n#### 1. Tuples for Student Records\n```\n# Immutable record structure\nstudent = (101, \"Alice Johnson\", [85, 92, 88, 95, 90])\n#          ‚Üì    ‚Üì                ‚Üì\n#          ID   Name            Grades (mutable list)\n\n# Tuple unpacking in loop\nfor student_id, name, grades in students:\n    # student_id = 101\n    # name = \"Alice Johnson\"\n    # grades = [85, 92, 88, 95, 90]\n\n```\n**Why tuples?** Student ID and name are fixed, but grades can be updated.\n\n#### 2. List Comprehensions for Calculations\n```\n# Calculate average for each student\naverages = [sum(grades)/len(grades) for (id, name, grades) in students]\n\n# Breakdown:\n# - For each student tuple\n# - Unpack to get grades\n# - Calculate sum/length\n# - Create new list of averages\n\n# Filter honor roll students\nhonor_roll = [\n    (name, sum(grades)/len(grades))  # Create tuple of (name, avg)\n    for (id, name, grades) in students  # For each student\n    if sum(grades)/len(grades) >= 90    # Filter: avg >= 90\n]\n\n```\n#### 3. Nested List Comprehension (Flattening)\n```\n# Get all individual grades from all students\nall_grades = [grade for (id, name, grades) in students for grade in grades]\n\n# Reads as:\n# \"For each student in students,\n#  for each grade in that student's grades,\n#  take the grade\"\n\n# Equivalent loop:\nall_grades = []\nfor (id, name, grades) in students:\n    for grade in grades:\n        all_grades.append(grade)\n\n```\n#### 4. Slicing for Top/Bottom\n```\n# Assuming ranked is sorted by average (high to low)\n\n# Top 3 students\ntop_3 = ranked[:3]  # First 3\n\n# Bottom 3 students  \nbottom_3 = ranked[-3:]  # Last 3\n\n# Top half\ntop_half = ranked[:len(ranked)//2]\n\n# Bottom quarter\nbottom_quarter = ranked[:len(ranked)//4]\n\n```\n#### 5. Conditional List Comprehension (Grade Curve)\n```\n# Apply curve: +5 points, capped at 100\ncurved_students = [\n    (id, name, [min(grade + 5, 100) for grade in grades])\n    for (id, name, grades) in students\n]\n\n# Breakdown:\n# Inner comprehension: [min(grade + 5, 100) for grade in grades]\n#   - For each grade, add 5\n#   - Cap at 100 using min()\n# Outer comprehension: Create new student tuple with curved grades\n\n```\n#### 6. Sorting with Custom Key\n```\n# Create list of (name, average) tuples\nranked = [(name, sum(grades)/len(grades)) for (id, name, grades) in students]\n\n# Sort by average (second element of tuple)\nranked.sort(key=lambda x: x[1], reverse=True)\n#                       ‚Üì\n#                  x[1] = average\n\n# Descending order (highest first)\n\n```\n#### 7. List Methods\n```\n# Count students in grade range\na_count = len([avg for avg in averages if avg >= 90])\n\n# Find max/min\nhighest = max(averages)\nlowest = min(averages)\n\n# Get index of min/max\nhardest_test = test_averages.index(min(test_averages))\n\n```\n#### 8. String Formatting\n```\n# Aligned columns\nprint(f\"{id:<8} {name:<20} {avg:<10.2f}\")\n#        ‚Üì       ‚Üì            ‚Üì\n#     Left    Left         Left aligned,\n#     8 chars 20 chars     10 chars, 2 decimals\n\n# Conditional formatting\ntrend = \"üìà Improving\" if change > 0 else \"üìâ Declining\" if change < 0 else \"‚û°Ô∏è  Stable\"\n\n```\n### Data Flow Diagram:\n<pre>Raw Data (Tuples)\n     ‚Üì\n[(101, \"Alice\", [85, 92, ...]), ...]\n     ‚Üì\nTuple Unpacking\n     ‚Üì\nid=101, name=\"Alice\", grades=[85,92,...]\n     ‚Üì\nList Comprehension\n     ‚Üì\naverages = [90.0, 80.6, ...]\n     ‚Üì\nFiltering\n     ‚Üì\nhonor_roll = [(\"Alice\", 90.0), (\"Charlie\", 95.0)]\n     ‚Üì\nSorting\n     ‚Üì\nranked = [(\"Grace\", 95.2), (\"Charlie\", 95.0), ...]\n     ‚Üì\nSlicing\n     ‚Üì\ntop_3 = [(\"Grace\", 95.2), (\"Charlie\", 95.0), (\"Alice\", 90.0)]\n     ‚Üì\nOutput\n</pre>### Key Patterns Used:\n<table border='1' cellpadding='5' style='border-collapse: collapse;'><tr><th>Pattern</th><th>Code</th><th>Purpose</th></tr><tr><td>Tuple unpacking</td><td>for id, name, grades in students</td><td>Extract data from tuples</td></tr><tr><td>Calculate average</td><td>sum(grades)/len(grades)</td><td>Single student average</td></tr><tr><td>Map transformation</td><td>[expr for item in list]</td><td>Transform all items</td></tr><tr><td>Filter</td><td>[x for x in list if cond]</td><td>Keep matching items</td></tr><tr><td>Flatten</td><td>[item for sublist in list for item in sublist]</td><td>Nested list ‚Üí flat list</td></tr><tr><td>Sort by attribute</td><td>list.sort(key=lambda x: x[1])</td><td>Sort by specific field</td></tr><tr><td>Top N</td><td>sorted_list[:N]</td><td>First N items</td></tr><tr><td>Bottom N</td><td>sorted_list[-N:]</td><td>Last N items</td></tr></table>### Alternative Implementations:\n#### Without List Comprehensions:\n```\n# Honor roll (comprehension version)\nhonor_roll = [(name, sum(grades)/len(grades)) for (id, name, grades) in students if sum(grades)/len(grades) >= 90]\n\n# Honor roll (loop version)\nhonor_roll = []\nfor (id, name, grades) in students:\n    avg = sum(grades) / len(grades)\n    if avg >= 90:\n        honor_roll.append((name, avg))\n\n# List comprehension is more concise!\n\n```\n#### Using Named Tuples (Advanced):\n```\nfrom collections import namedtuple\n\n# Define structure\nStudent = namedtuple('Student', ['id', 'name', 'grades'])\n\n# Create students\nstudents = [\n    Student(101, \"Alice\", [85, 92, 88, 95, 90]),\n    Student(102, \"Bob\", [78, 82, 75, 88, 80])\n]\n\n# Access by name instead of index\nfor student in students:\n    print(student.name)  # More readable than student[1]\n    avg = sum(student.grades) / len(student.grades)\n\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Recalculating averages multiple times**\n```python\n# WRONG - inefficient: calculates average 3 times per student\nfor student in students:\n    id, name, grades = student\n    if sum(grades)/len(grades) >= 90:  # Calculation 1\n        avg = sum(grades)/len(grades)  # Calculation 2\n        print(f\"{name}: {sum(grades)/len(grades)}\")  # Calculation 3\n\n# CORRECT - calculate once, reuse\nfor student in students:\n    id, name, grades = student\n    avg = sum(grades) / len(grades)  # Calculate once\n    if avg >= 90:\n        print(f\"{name}: {avg}\")\n```\n\n**2. Modifying list while iterating**\n```python\n# WRONG - changing list during iteration\nfor i, student in enumerate(students):\n    if student[2] < 60:  # Low grades\n        students.remove(student)  # Can skip items!\n\n# CORRECT - iterate over copy or use list comprehension\nstudents = [s for s in students if s[2] >= 60]\n# Or create new filtered list\npassing_students = [s for s in students if s[2] >= 60]\n```\n\n**3. Forgetting tuple immutability with nested lists**\n```python\n# CAUTION - tuple is immutable but nested list is NOT\nstudent = (101, \"Alice\", [85, 90, 88])\nstudent[2].append(95)  # Works! List inside tuple IS mutable\nprint(student)  # (101, \"Alice\", [85, 90, 88, 95])\n\n# The tuple itself can't change, but mutable items inside can!\nstudent[0] = 102  # TypeError - can't change tuple element\n```\n\n**4. Division by zero with empty grade lists**\n```python\n# WRONG - crashes on empty grades\nfor id, name, grades in students:\n    avg = sum(grades) / len(grades)  # ZeroDivisionError if grades is []\n\n# CORRECT - check for empty list\nfor id, name, grades in students:\n    if grades:\n        avg = sum(grades) / len(grades)\n    else:\n        avg = 0.0\n        print(f\"{name} has no grades\")\n```\n\n**5. Sorting changes original list unexpectedly**\n```python\n# WRONG - sort() modifies in place\noriginal_order = students\nstudents.sort(key=lambda x: x[2])  # original_order also sorted!\n\n# CORRECT - use sorted() to preserve original\noriginal_order = students\nsorted_students = sorted(students, key=lambda x: x[2])\n# original_order is unchanged\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Module 5 mastery**: Combined lists, tuples, slicing, methods, comprehensions\n- **Tuples for fixed data**: ID, name unchangeable; nested list mutable\n- **List comprehensions**: Concise data transformations and filtering\n- **Tuple unpacking**: Extract data directly in loops\n- **Sorting with lambda**: Sort by specific fields\n- **Slicing patterns**: Top N, bottom N, ranges\n- **Nested comprehensions**: Flatten multi-level data\n- **Real-world data structures**: Practical combinations of concepts\n\n### Essential Patterns from This Project:\n```\n# 1. Tuple record with mutable component\nrecord = (id, name, [mutable_data])\n\n# 2. Calculate statistics with comprehension\naverages = [sum(values)/len(values) for (_, _, values) in records]\n\n# 3. Filter and transform\nfiltered = [(name, calc(data)) for (id, name, data) in records if condition]\n\n# 4. Sort by calculated value\nresults.sort(key=lambda x: x[1], reverse=True)\n\n# 5. Top/bottom using slicing\ntop_n = sorted_list[:n]\nbottom_n = sorted_list[-n:]\n\n# 6. Multiple filter conditions\nresult = [item for item in items if cond1 and cond2]\n\n# 7. Flatten nested structure\nflat = [item for sublist in nested for item in sublist]\n\n```\n### Module 5 Complete! üéâ\nYou've mastered:\n\n- ‚úÖ Lists (creation, indexing, methods)\n- ‚úÖ List slicing ([start:stop:step])\n- ‚úÖ Tuples (immutable sequences)\n- ‚úÖ Tuple unpacking\n- ‚úÖ List comprehensions\n- ‚úÖ Real-world data processing\n\n### What's Next: Module 6 - Functions\nIn Module 6, you'll learn to:\n\n- Define reusable code blocks\n- Pass parameters and return values\n- Understand scope and lifetime\n- Use default arguments\n- Create lambda functions\n- Build modular, organized programs\n\nFunctions will revolutionize how you structure code!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-05-lesson-06-challenge-1",
              "title": "Practice Exercise",
              "description": "Build a **Movie Rating Analyzer** that processes movie data and generates insights.\n\n**Requirements:**\n\n- **Data Structure**: Each movie is a tuple: (id, title, year, [ratings])\n<li>ratings is a list of user ratings (1-10)\n\n</li>- **Create sample data** for at least 6 movies\n- **Calculate statistics**:\n<li>Average rating per movie\n- Overall average across all movies\n- Highest and lowest rated movies\n\n</li>- **Filter movies**:\n<li>Highly rated (avg >= 8.0)\n- Poorly rated (avg < 6.0)\n- Recent movies (year >= 2020)\n\n</li>- **Analyze ratings**:\n<li>Movies with most ratings (participation)\n- Movies with most consistent ratings (low variance)\n- Distribution by decade\n\n</li>- **Generate reports**:\n<li>Top 5 movies\n- Recommendations (highly rated recent movies)\n- Rating distribution chart\n\n</li>\n**Example Output:**\n\n<pre>=== Movie Rating Analyzer ===\n\nLoaded 6 movies\n\nTop Rated Movies:\n1. The Shawshank Redemption (1994) - 9.3 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n2. The Dark Knight (2008) - 9.0 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n3. Inception (2010) - 8.8 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n\nRecommendations (Recent + Highly Rated):\n- Dune (2021) - 8.5\n- Everything Everywhere (2022) - 8.9\n\nRating Distribution:\n9-10: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 3 movies\n7-8:  ‚ñà‚ñà‚ñà‚ñà 2 movies\n5-6:  ‚ñà‚ñà 1 movie\n</pre>",
              "instructions": "Build a **Movie Rating Analyzer** that processes movie data and generates insights.\n\n**Requirements:**\n\n- **Data Structure**: Each movie is a tuple: (id, title, year, [ratings])\n<li>ratings is a list of user ratings (1-10)\n\n</li>- **Create sample data** for at least 6 movies\n- **Calculate statistics**:\n<li>Average rating per movie\n- Overall average across all movies\n- Highest and lowest rated movies\n\n</li>- **Filter movies**:\n<li>Highly rated (avg >= 8.0)\n- Poorly rated (avg < 6.0)\n- Recent movies (year >= 2020)\n\n</li>- **Analyze ratings**:\n<li>Movies with most ratings (participation)\n- Movies with most consistent ratings (low variance)\n- Distribution by decade\n\n</li>- **Generate reports**:\n<li>Top 5 movies\n- Recommendations (highly rated recent movies)\n- Rating distribution chart\n\n</li>\n**Example Output:**\n\n<pre>=== Movie Rating Analyzer ===\n\nLoaded 6 movies\n\nTop Rated Movies:\n1. The Shawshank Redemption (1994) - 9.3 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n2. The Dark Knight (2008) - 9.0 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n3. Inception (2010) - 8.8 ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê\n\nRecommendations (Recent + Highly Rated):\n- Dune (2021) - 8.5\n- Everything Everywhere (2022) - 8.9\n\nRating Distribution:\n9-10: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 3 movies\n7-8:  ‚ñà‚ñà‚ñà‚ñà 2 movies\n5-6:  ‚ñà‚ñà 1 movie\n</pre>",
              "starterCode": "# Movie Rating Analyzer - Starter Code\n\nprint(\"=== Movie Rating Analyzer ===\")\nprint()\n\n# YOUR CODE: Create movie data\n# Each movie: (id, title, year, [ratings])\nmovies = [\n    (1, \"The Shawshank Redemption\", 1994, [10, 9, 10, 9, 9, 10, 9]),\n    (2, \"The Dark Knight\", 2008, [9, 9, 8, 10, 9, 8, 9]),\n    # Add 4 more movies\n]\n\nprint(f\"Loaded {len(movies)} movies\")\nprint()\n\n# YOUR CODE: Display all movies with averages\nprint(\"All Movies:\")\nfor movie_id, title, year, ratings in movies:\n    avg =   # Calculate average\n    print(f\"{title} ({year}) - Avg: {avg:.1f}\")\n\nprint()\n\n# YOUR CODE: Calculate overall statistics\naverages = [  # List comprehension for all averages\noverall_avg = sum(averages) / len(averages)\n\nprint(f\"Overall average rating: {overall_avg:.2f}\")\nprint()\n\n# YOUR CODE: Find highest rated\n# Create list of (title, average) and sort\nrated = [  # (title, avg) for each movie\nrated.sort(key=lambda x: x[1], reverse=True)\n\nprint(\"Top 3 Movies:\")\nfor rank, (title, avg) in enumerate(rated[:3], start=1):\n    stars = \"‚≠ê\" * int(avg)  # Round to nearest int\n    print(f\"{rank}. {title} - {avg:.1f} {stars}\")\n\nprint()\n\n# YOUR CODE: Filter highly rated (>=8)\nhighly_rated = [  # Filter movies with avg >= 8\nprint(f\"Highly Rated Movies (>=8.0): {len(highly_rated)}\")\n\n# YOUR CODE: Filter recent (year >= 2020)\nrecent = [  # Filter movies from 2020 or later\nprint(f\"Recent Movies (2020+): {len(recent)}\")\n\nprint()\n\n# YOUR CODE: Recommendations (recent AND highly rated)\nrecommendations = [  # Movies that are both recent and highly rated\nif recommendations:\n    print(\"Recommendations (Recent + Highly Rated):\")\n    for title, year, avg in recommendations:\n        print(f\"  - {title} ({year}) - {avg:.1f}\")\nelse:\n    print(\"No recent highly-rated movies found.\")\n\nprint()\n\n# YOUR CODE: Rating distribution\nprint(\"Rating Distribution:\")\nhigh_rated = len([  # 8-10\nmed_rated = len([   # 6-8\nlow_rated = len([   # <6\n\nprint(f\"8-10: {'‚ñà' * high_rated} {high_rated} movies\")\nprint(f\"6-8:  {'‚ñà' * med_rated} {med_rated} movies\")\nprint(f\"<6:   {'‚ñà' * low_rated} {low_rated} movies\")",
              "solution": "# Movie Rating Analyzer - COMPLETE SOLUTION\n\nprint(\"=== Movie Rating Analyzer ===\")\nprint()\n\n# Create movie data\n# Each movie: (id, title, year, [ratings])\nmovies = [\n    (1, \"The Shawshank Redemption\", 1994, [10, 9, 10, 9, 9, 10, 9]),\n    (2, \"The Dark Knight\", 2008, [9, 9, 8, 10, 9, 8, 9]),\n    (3, \"Inception\", 2010, [9, 8, 9, 8, 9, 8, 9]),\n    (4, \"Dune\", 2021, [8, 9, 8, 8, 9, 9, 8]),\n    (5, \"Everything Everywhere\", 2022, [9, 9, 9, 8, 9, 9, 9]),\n    (6, \"The Room\", 2003, [3, 4, 2, 5, 3, 4, 3])\n]\n\nprint(f\"Loaded {len(movies)} movies\")\nprint()\n\n# Display all movies with averages\nprint(\"All Movies:\")\nfor movie_id, title, year, ratings in movies:\n    avg = sum(ratings) / len(ratings)\n    print(f\"{title} ({year}) - Avg: {avg:.1f}\")\n\nprint()\n\n# Calculate overall statistics\naverages = [sum(ratings)/len(ratings) for (id, title, year, ratings) in movies]\noverall_avg = sum(averages) / len(averages)\n\nprint(f\"Overall average rating: {overall_avg:.2f}\")\nprint()\n\n# Find highest rated\nrated = [(title, sum(ratings)/len(ratings)) for (id, title, year, ratings) in movies]\nrated.sort(key=lambda x: x[1], reverse=True)\n\nprint(\"Top 3 Movies:\")\nfor rank, (title, avg) in enumerate(rated[:3], start=1):\n    stars = \"‚≠ê\" * int(avg)\n    print(f\"{rank}. {title} - {avg:.1f} {stars}\")\n\nprint()\n\n# Filter highly rated (>=8)\nhighly_rated = [(title, sum(ratings)/len(ratings)) for (id, title, year, ratings) in movies if sum(ratings)/len(ratings) >= 8.0]\nprint(f\"Highly Rated Movies (>=8.0): {len(highly_rated)}\")\n\n# Filter recent (year >= 2020)\nrecent = [(title, year) for (id, title, year, ratings) in movies if year >= 2020]\nprint(f\"Recent Movies (2020+): {len(recent)}\")\n\nprint()\n\n# Recommendations (recent AND highly rated)\nrecommendations = [\n    (title, year, sum(ratings)/len(ratings))\n    for (id, title, year, ratings) in movies\n    if year >= 2020 and sum(ratings)/len(ratings) >= 8.0\n]\n\nif recommendations:\n    print(\"Recommendations (Recent + Highly Rated):\")\n    for title, year, avg in recommendations:\n        print(f\"  - {title} ({year}) - {avg:.1f}\")\nelse:\n    print(\"No recent highly-rated movies found.\")\n\nprint()\n\n# Rating distribution\nprint(\"Rating Distribution:\")\nhigh_rated = len([avg for avg in averages if avg >= 8])\nmed_rated = len([avg for avg in averages if 6 <= avg < 8])\nlow_rated = len([avg for avg in averages if avg < 6])\n\nprint(f\"8-10: {'‚ñà' * high_rated} {high_rated} movies\")\nprint(f\"6-8:  {'‚ñà' * med_rated} {med_rated} movies\")\nprint(f\"<6:   {'‚ñà' * low_rated} {low_rated} movies\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For average: sum(ratings)/len(ratings). For comprehension: [(title, sum(ratings)/len(ratings)) for (id, title, year, ratings) in movies]. For filtering: [... for ... in movies if condition]. For AND conditions: if cond1 and cond2. For sorting: list.sort(key=lambda x: x[1], reverse=True). For slicing top N: list[:N]."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-06",
      "title": "Functions",
      "description": "Creating reusable code blocks",
      "difficulty": "intermediate",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-06-lesson-01",
          "title": "Function Basics - Reusable Code Blocks",
          "moduleId": "module-06",
          "order": 1,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're a chef in a busy restaurant. Every time someone orders a Caesar salad, you don't re-invent the recipe from scratch. Instead, you follow the same trusted recipe each time:\n\n1. Get romaine lettuce\n2. Add croutons\n3. Sprinkle parmesan\n4. Drizzle Caesar dressing\n5. Toss and serve\n\n**That recipe IS a function!**\n\nIn programming, a **function** is a reusable block of code that performs a specific task. Instead of writing the same code over and over, you write it once as a function and then \"call\" that function whenever you need it.\n\n**Why are functions so powerful?**\n\n- **Reusability**: Write once, use everywhere\n- **Organization**: Break complex programs into smaller, manageable pieces\n- **Readability**: `calculate_tax()` tells you what happens without reading the details\n- **Maintainability**: Fix a bug once, and it's fixed everywhere the function is used\n- **Testing**: Test each function individually to ensure it works correctly\n\nThink of functions like apps on your phone. You don't need to know HOW the camera app works internally - you just tap the icon and it does its job. Functions work the same way!"
            },
            {
              "type": "THEORY",
              "title": "Anatomy of a Function",
              "content": "Let's break down the parts of a function:\n\n```python\ndef greet():\n    print(\"Hello, welcome!\")\n    print(\"Nice to meet you!\")\n```\n\n**The pieces:**\n\n- **`def`** - This keyword tells Python \"I'm defining a function\"\n- **`greet`** - This is the function's name (you choose it!)\n- **`()`** - Parentheses hold parameters (empty for now, we'll add these later)\n- **`:`** - The colon marks the start of the function's body\n- **Indented code** - Everything indented under `def` is PART of the function\n\n**Defining vs. Calling:**\n\n```python\n# DEFINING the function (creating the recipe)\ndef greet():\n    print(\"Hello!\")\n\n# CALLING the function (using the recipe)\ngreet()  # This actually runs the code inside\ngreet()  # You can call it as many times as you want!\n```\n\n**Important:** When Python sees `def`, it doesn't run the code inside - it just remembers it. The code only runs when you CALL the function by writing its name followed by `()`."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Defining and Calling Functions ===\nHello, welcome to Python!\nI hope you're having a great day!\n\nLet's call the greeting again:\nHello, welcome to Python!\nI hope you're having a great day!\n\n=== A Function for Drawing ===\n********************\n* Python Functions *\n********************\n\n=== Multiple Functions Working Together ===\n--- Starting the program ---\nStep 1: Loading data...\nStep 2: Processing data...\nStep 3: Saving results...\n--- Program complete! ---\n```",
              "code": "# Let's create our first functions!\n\nprint(\"=== Defining and Calling Functions ===\")\n\n# Define a simple greeting function\ndef greet():\n    print(\"Hello, welcome to Python!\")\n    print(\"I hope you're having a great day!\")\n\n# Call the function\ngreet()\n\nprint(\"\\nLet's call the greeting again:\")\ngreet()  # Reuse it!\n\nprint(\"\\n=== A Function for Drawing ===\")\n\n# A function that draws a decorative box\ndef draw_box():\n    print(\"*\" * 20)\n    print(\"* Python Functions *\")\n    print(\"*\" * 20)\n\ndraw_box()\n\nprint(\"\\n=== Multiple Functions Working Together ===\")\n\n# Functions can be called from other functions!\ndef start_program():\n    print(\"--- Starting the program ---\")\n\ndef load_data():\n    print(\"Step 1: Loading data...\")\n\ndef process_data():\n    print(\"Step 2: Processing data...\")\n\ndef save_results():\n    print(\"Step 3: Saving results...\")\n\ndef end_program():\n    print(\"--- Program complete! ---\")\n\n# Now run them in order\nstart_program()\nload_data()\nprocess_data()\nsave_results()\nend_program()",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Call the Function (Just Referencing It)**\n```python\n# WRONG - This just references the function, doesn't run it!\ndef greet():\n    print(\"Hello!\")\n\ngreet  # Nothing happens! Missing parentheses\n\n# CORRECT - Call the function with parentheses\ngreet()  # Prints: Hello!\n```\n\n**2. Not Indenting Code Inside the Function**\n```python\n# WRONG - Code not indented\ndef greet():\nprint(\"Hello!\")  # IndentationError!\n\n# CORRECT - Code is properly indented\ndef greet():\n    print(\"Hello!\")  # This is part of the function\n```\n\n**3. Calling a Function Before Defining It**\n```python\n# WRONG - Calling before defining\ngreet()  # NameError: name 'greet' is not defined\n\ndef greet():\n    print(\"Hello!\")\n\n# CORRECT - Define first, then call\ndef greet():\n    print(\"Hello!\")\n\ngreet()  # Works!\n```\n\n**4. Using Inconsistent Naming Conventions**\n```python\n# WRONG - Inconsistent naming styles\ndef CalculateTotal():  # PascalCase (for classes, not functions)\n    pass\ndef calculatetotal():  # No separation between words\n    pass\n\n# CORRECT - Use snake_case for functions\ndef calculate_total():\n    pass\ndef send_email_notification():\n    pass\n```\n\n**5. Forgetting the Colon After the Function Definition**\n```python\n# WRONG - Missing colon\ndef greet()  # SyntaxError!\n    print(\"Hello!\")\n\n# CORRECT - Include the colon\ndef greet():  # Colon is required!\n    print(\"Hello!\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Functions are reusable code blocks** - Write once, use many times\n- **`def` keyword** creates a function: `def function_name():`\n- **Function names** should be lowercase with underscores: `calculate_total`, `send_email`\n- **Indentation matters** - All code inside a function must be indented\n- **Defining vs. calling**: `def greet():` creates the function, `greet()` runs it\n- **Functions help organize code** - Break big problems into small, manageable pieces\n- **Order matters**: Define a function BEFORE you call it\n- **You can call functions multiple times** - That's the whole point!\n- **Functions can call other functions** - Build complex behavior from simple pieces"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-02",
          "title": "Parameters and Return Values",
          "moduleId": "module-06",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Remember our Caesar salad analogy? A basic recipe is nice, but what if a customer wants EXTRA parmesan? Or NO croutons? What if they want a LARGE salad instead of regular?\n\n**Parameters let you customize your functions!**\n\nThink of parameters like form fields on an order:\n\n- **Size:** small / medium / large\n- **Extra cheese:** yes / no\n- **Dressing:** on the side / mixed in\n\nThe function (recipe) stays the same, but the OUTPUT changes based on the INPUT you provide.\n\n**In Python:**\n\n```python\n# Without parameters - always the same\ndef greet():\n    print(\"Hello!\")\n\n# With parameters - customizable!\ndef greet(name):\n    print(f\"Hello, {name}!\")\n\ngreet(\"Alice\")  # Hello, Alice!\ngreet(\"Bob\")    # Hello, Bob!\n```\n\n**And what about getting something BACK?**\n\nSome functions just DO something (like `print()`). But others need to GIVE you something back - like a calculator that returns the answer. That's what **return values** are for!"
            },
            {
              "type": "THEORY",
              "title": "Parameters vs. Return Values",
              "content": "**Parameters** = What goes INTO the function (the ingredients)\n**Return values** = What comes OUT of the function (the result)\n\n```python\n# Parameters: a and b go IN\n# Return value: the sum comes OUT\ndef add(a, b):\n    return a + b\n\nresult = add(5, 3)  # result = 8\n```\n\n**The `return` keyword:**\n\n- Sends a value back to wherever the function was called\n- Immediately exits the function (code after `return` won't run)\n- If there's no `return`, the function returns `None` automatically\n\n**Multiple parameters:**\n\n```python\ndef create_email(username, domain):\n    return f\"{username}@{domain}\"\n\nemail = create_email(\"john\", \"gmail.com\")  # john@gmail.com\n```\n\n**Using the return value:**\n\n```python\n# Store it in a variable\nresult = add(5, 3)\n\n# Use it directly in another expression\ntotal = add(5, 3) + add(2, 1)  # 8 + 3 = 11\n\n# Use it in a print statement\nprint(f\"The sum is {add(5, 3)}\")\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Functions with Parameters ===\nHello, Alice!\nHello, Bob!\nHello, Charlie!\n\n=== Functions with Return Values ===\n5 + 3 = 8\n10 - 4 = 6\n7 * 6 = 42\n\n=== Multiple Parameters ===\nFull name: Alice Smith\nEmail: alice@company.com\n\n=== Using Return Values ===\nArea of 5x3 rectangle: 15\nTotal area: 37\nCircle area (radius 5): 78.54\n\n=== Return vs. Print ===\nThis function prints: Hello!\nprint_greeting returned: None\nadd_numbers returned: 8\n```",
              "code": "# Functions with Parameters and Return Values\n\nprint(\"=== Functions with Parameters ===\")\n\n# A function with ONE parameter\ndef greet(name):\n    print(f\"Hello, {name}!\")\n\ngreet(\"Alice\")\ngreet(\"Bob\")\ngreet(\"Charlie\")\n\nprint(\"\\n=== Functions with Return Values ===\")\n\n# Functions that RETURN values instead of printing\ndef add(a, b):\n    return a + b\n\ndef subtract(a, b):\n    return a - b\n\ndef multiply(a, b):\n    return a * b\n\n# Using the returned values\nsum_result = add(5, 3)\ndiff_result = subtract(10, 4)\nprod_result = multiply(7, 6)\n\nprint(f\"5 + 3 = {sum_result}\")\nprint(f\"10 - 4 = {diff_result}\")\nprint(f\"7 * 6 = {prod_result}\")\n\nprint(\"\\n=== Multiple Parameters ===\")\n\ndef create_full_name(first, last):\n    return f\"{first} {last}\"\n\ndef create_email(username, domain):\n    return f\"{username}@{domain}\"\n\nname = create_full_name(\"Alice\", \"Smith\")\nemail = create_email(\"alice\", \"company.com\")\n\nprint(f\"Full name: {name}\")\nprint(f\"Email: {email}\")\n\nprint(\"\\n=== Using Return Values ===\")\n\ndef calculate_area(width, height):\n    return width * height\n\ndef calculate_circle_area(radius):\n    pi = 3.14159\n    return pi * radius * radius\n\n# Store the result\narea = calculate_area(5, 3)\nprint(f\"Area of 5x3 rectangle: {area}\")\n\n# Use return value directly in expression\ntotal = calculate_area(5, 3) + calculate_area(2, 11)\nprint(f\"Total area: {total}\")\n\n# Use return value in f-string\nprint(f\"Circle area (radius 5): {calculate_circle_area(5):.2f}\")\n\nprint(\"\\n=== Return vs. Print ===\")\n\n# This function PRINTS but returns None\ndef print_greeting():\n    print(\"This function prints: Hello!\")\n    # No return statement = returns None\n\n# This function RETURNS a value\ndef add_numbers(x, y):\n    return x + y\n\nresult1 = print_greeting()  # Prints \"Hello!\"\nresult2 = add_numbers(5, 3)\n\nprint(f\"print_greeting returned: {result1}\")\nprint(f\"add_numbers returned: {result2}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting the Return Statement**\n```python\n# WRONG - Function calculates but doesn't return!\ndef add(a, b):\n    result = a + b\n    # Forgot to return! Function returns None\n\ntotal = add(5, 3)  # total is None, not 8!\n\n# CORRECT - Return the result\ndef add(a, b):\n    result = a + b\n    return result  # Now the caller gets the value\n```\n\n**2. Confusing Print with Return**\n```python\n# WRONG - Printing instead of returning\ndef calculate_tax(amount):\n    tax = amount * 0.1\n    print(tax)  # This prints but returns None!\n\nresult = calculate_tax(100)  # result is None!\ntotal = 100 + calculate_tax(100)  # Error! Can't add None\n\n# CORRECT - Return the value\ndef calculate_tax(amount):\n    tax = amount * 0.1\n    return tax  # Caller can use this value\n\nresult = calculate_tax(100)  # result is 10.0\n```\n\n**3. Wrong Parameter Order**\n```python\n# WRONG - Arguments in wrong order\ndef divide(numerator, denominator):\n    return numerator / denominator\n\nresult = divide(2, 10)  # Returns 0.2, not 5!\n\n# CORRECT - Use keyword arguments for clarity\nresult = divide(numerator=10, denominator=2)  # Returns 5.0\n```\n\n**4. Missing Required Arguments**\n```python\n# WRONG - Forgetting to pass required arguments\ndef greet(first_name, last_name):\n    return f\"Hello, {first_name} {last_name}!\"\n\nmessage = greet(\"Alice\")  # TypeError: missing required argument!\n\n# CORRECT - Pass all required arguments\nmessage = greet(\"Alice\", \"Smith\")  # Works!\n```\n\n**5. Code After Return Never Executes**\n```python\n# WRONG - Code after return is never reached\ndef process(x):\n    return x * 2\n    print(\"Processing complete!\")  # This NEVER runs!\n    x = x + 1  # This NEVER runs either!\n\n# CORRECT - Put all logic before return\ndef process(x):\n    result = x * 2\n    print(\"Processing complete!\")\n    return result  # Return should be last\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Parameters** are variables listed in the function definition: `def greet(name):`\n- **Arguments** are the actual values passed when calling: `greet(\"Alice\")`\n- **Multiple parameters** are separated by commas: `def add(a, b):`\n- **`return`** sends a value back to the caller and exits the function\n- **Without `return`**, a function returns `None` automatically\n- **Store return values** in variables: `result = add(5, 3)`\n- **Use return values directly**: `print(add(5, 3))` or `total = add(1, 2) + add(3, 4)`\n- **Print vs. Return**: `print()` shows output; `return` gives back a value to use\n- **Parameters make functions flexible** - Same function, different inputs, different outputs"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-03",
          "title": "Variable Scope and Lifetime",
          "moduleId": "module-06",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're at work. You have a desk with your personal stuff on it - your coffee mug, your sticky notes, your photos. That stuff is YOURS - only accessible at YOUR desk.\n\nBut there's also a break room with a shared coffee machine. EVERYONE in the office can use it.\n\n**In programming, this is called SCOPE:**\n\n- **Local scope** = Your desk (variables inside a function - only that function can use them)\n- **Global scope** = The break room (variables outside all functions - everyone can see them)\n\n```python\n# Global variable (in the break room - everyone can see it)\ncompany_name = \"TechCorp\"\n\ndef greet_employee():\n    # Local variable (at your desk - only this function sees it)\n    employee_name = \"Alice\"\n    print(f\"{employee_name} works at {company_name}\")\n\ngreet_employee()  # Alice works at TechCorp\nprint(company_name)    # TechCorp - still accessible\n# print(employee_name)  # ERROR! employee_name doesn't exist here\n```\n\n**Why does this matter?**\n\nScope prevents chaos! Imagine if every variable was global - you'd constantly worry about accidentally overwriting someone else's data. Local variables keep things organized and safe."
            },
            {
              "type": "THEORY",
              "title": "Local vs Global Variables",
              "content": "**Local variables:**\n- Created INSIDE a function\n- Only exist WHILE the function runs\n- Destroyed when the function ends\n- Can't be accessed from outside the function\n\n**Global variables:**\n- Created OUTSIDE all functions\n- Exist for the entire program\n- Can be READ from anywhere\n- To MODIFY them inside a function, you need the `global` keyword\n\n```python\ncounter = 0  # Global variable\n\ndef increment():\n    global counter  # Tell Python we want the global one\n    counter += 1    # Now we can modify it\n\ndef show_count():\n    print(counter)  # Can READ global without 'global' keyword\n\nincrement()\nincrement()\nshow_count()  # 2\n```\n\n**The LEGB Rule** (how Python looks for variables):\n1. **L**ocal - Inside the current function\n2. **E**nclosing - Inside any enclosing functions (nested functions)\n3. **G**lobal - At the module level\n4. **B**uilt-in - Python's built-in names (like `print`, `len`)\n\nPython searches in this order. The first match wins!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Local Variables ===\nInside function: Hello from inside!\nError accessing local outside: name 'message' is not defined\n\n=== Global Variables ===\nGlobal score: 100\nInside function, reading global: 100\nAfter function, global unchanged: 100\n\n=== Modifying Global Variables ===\nScore before: 0\nScore after increment: 1\nScore after add_points: 11\n\n=== Same Name, Different Scopes ===\nGlobal x: 10\nInside function, local x: 5\nBack outside, global x still: 10\n\n=== Variable Lifetime ===\nCall 1: counter = 1\nCall 2: counter = 1\nCall 3: counter = 1\n```",
              "code": "# Understanding Variable Scope and Lifetime\n\nprint(\"=== Local Variables ===\")\n\ndef create_message():\n    # This variable only exists inside this function\n    message = \"Hello from inside!\"\n    print(f\"Inside function: {message}\")\n\ncreate_message()\n\n# Try to access 'message' outside the function\ntry:\n    print(message)\nexcept NameError as e:\n    print(f\"Error accessing local outside: {e}\")\n\nprint(\"\\n=== Global Variables ===\")\n\n# Global variable - accessible everywhere\nscore = 100\n\ndef show_score():\n    # We can READ global variables without any special keyword\n    print(f\"Inside function, reading global: {score}\")\n\nprint(f\"Global score: {score}\")\nshow_score()\nprint(f\"After function, global unchanged: {score}\")\n\nprint(\"\\n=== Modifying Global Variables ===\")\n\npoints = 0  # Global variable\n\ndef increment_points():\n    global points  # Tell Python we want to modify the global\n    points += 1\n\ndef add_points(amount):\n    global points\n    points += amount\n\nprint(f\"Score before: {points}\")\nincrement_points()\nprint(f\"Score after increment: {points}\")\nadd_points(10)\nprint(f\"Score after add_points: {points}\")\n\nprint(\"\\n=== Same Name, Different Scopes ===\")\n\nx = 10  # Global x\n\ndef use_local_x():\n    x = 5  # Local x (different variable!)\n    print(f\"Inside function, local x: {x}\")\n\nprint(f\"Global x: {x}\")\nuse_local_x()\nprint(f\"Back outside, global x still: {x}\")\n\nprint(\"\\n=== Variable Lifetime ===\")\n\ndef count_calls():\n    # This counter is created NEW each time the function runs\n    counter = 0\n    counter += 1\n    print(f\"Call {counter}: counter = {counter}\")\n\n# Each call creates a fresh 'counter' variable\ncount_calls()  # counter = 1\ncount_calls()  # counter = 1 (not 2!)\ncount_calls()  # counter = 1 (not 3!)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Trying to Modify Global Variables Without the `global` Keyword**\n```python\n# WRONG - Creates a NEW local variable instead of modifying global\ncounter = 0\n\ndef increment():\n    counter = counter + 1  # UnboundLocalError!\n\n# CORRECT - Use the global keyword\ncounter = 0\n\ndef increment():\n    global counter\n    counter = counter + 1  # Now modifies the global\n```\n\n**2. Assuming Local Variables Persist Between Function Calls**\n```python\n# WRONG - Expecting the counter to accumulate\ndef count_calls():\n    counter = 0  # Created fresh EVERY time!\n    counter += 1\n    return counter\n\nprint(count_calls())  # 1\nprint(count_calls())  # 1 (not 2!)\n\n# CORRECT - Use global or return values to persist state\ncall_count = 0\n\ndef count_calls():\n    global call_count\n    call_count += 1\n    return call_count\n```\n\n**3. Shadowing Built-in Functions with Variable Names**\n```python\n# WRONG - Overwriting built-in functions\nlist = [1, 2, 3]  # Now 'list()' function is gone!\nprint = \"Hello\"   # Now 'print()' function is gone!\n\nnew_list = list(\"abc\")  # TypeError: 'list' object is not callable\n\n# CORRECT - Use descriptive names that don't shadow built-ins\nmy_list = [1, 2, 3]\nmessage = \"Hello\"\n```\n\n**4. Confusing Local and Global Variables with Same Name**\n```python\n# WRONG - Confusion about which variable is being used\nx = 10\n\ndef confusing():\n    print(x)  # UnboundLocalError! Python sees assignment below\n    x = 5     # This makes x local to the entire function\n\n# CORRECT - Be explicit about your intentions\nx = 10\n\ndef clear_local():\n    local_x = 5  # Different name = no confusion\n    print(local_x)\n\ndef clear_global():\n    global x\n    print(x)  # Reads global\n    x = 5     # Modifies global\n```\n\n**5. Mutable Default Arguments (Advanced Scope Issue)**\n```python\n# WRONG - Mutable default is shared across all calls!\ndef add_item(item, items=[]):\n    items.append(item)\n    return items\n\nprint(add_item(\"a\"))  # ['a']\nprint(add_item(\"b\"))  # ['a', 'b'] - Unexpected!\n\n# CORRECT - Use None as default, create new list inside\ndef add_item(item, items=None):\n    if items is None:\n        items = []\n    items.append(item)\n    return items\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Local variables** are created inside functions and only exist while the function runs\n- **Global variables** are created outside functions and exist for the entire program\n- **Reading globals** works without any special keyword\n- **Modifying globals** requires the `global` keyword inside the function\n- **Same names can exist** in different scopes without conflict\n- **LEGB rule**: Python searches Local, Enclosing, Global, Built-in (in that order)\n- **Best practice**: Minimize use of global variables - they make code harder to debug\n- **Parameters are local** - They're like local variables that get their initial value from the caller\n- **Return values** are the preferred way to get data out of functions (not global variables)"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-04",
          "title": "Default and Keyword Arguments",
          "moduleId": "module-06",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Think about ordering coffee. At most cafes, if you just say \"coffee,\" you'll get a medium, regular roast, hot coffee. Those are the DEFAULTS. But you CAN customize:\n\n- \"Large coffee\" (changing size)\n- \"Iced coffee\" (changing temperature)\n- \"Decaf, large, with oat milk\" (changing multiple things)\n\n**Default arguments** work the same way in Python. You set sensible defaults, and callers only specify what they want to change.\n\n```python\ndef order_coffee(size=\"medium\", roast=\"regular\", temperature=\"hot\"):\n    print(f\"One {size} {roast} {temperature} coffee!\")\n\norder_coffee()                          # medium regular hot coffee\norder_coffee(\"large\")                   # large regular hot coffee\norder_coffee(\"small\", \"dark\", \"iced\")  # small dark iced coffee\n```\n\n**Keyword arguments** let you specify parameters by NAME instead of position. This makes calls clearer and lets you skip parameters:\n\n```python\norder_coffee(temperature=\"iced\")        # medium regular iced coffee\norder_coffee(size=\"large\", roast=\"decaf\")  # large decaf hot coffee\n```\n\nThis makes your functions much more flexible and easier to use!"
            },
            {
              "type": "THEORY",
              "title": "Default Arguments and Keyword Arguments",
              "content": "**Default Arguments** - Set in the function definition:\n\n```python\ndef greet(name, greeting=\"Hello\"):\n    print(f\"{greeting}, {name}!\")\n\ngreet(\"Alice\")              # Hello, Alice!\ngreet(\"Bob\", \"Hi\")          # Hi, Bob!\ngreet(\"Charlie\", \"Hey\")     # Hey, Charlie!\n```\n\n**Rule**: Parameters with defaults must come AFTER parameters without defaults!\n\n```python\n# CORRECT\ndef greet(name, greeting=\"Hello\"):\n    ...\n\n# ERROR! - Default before non-default\ndef greet(greeting=\"Hello\", name):\n    ...\n```\n\n**Keyword Arguments** - Specify by name when calling:\n\n```python\ndef create_user(name, age, city, active=True):\n    print(f\"{name}, {age}, from {city}, active: {active}\")\n\n# Positional arguments (order matters)\ncreate_user(\"Alice\", 30, \"NYC\")\n\n# Keyword arguments (order doesn't matter!)\ncreate_user(city=\"LA\", name=\"Bob\", age=25)\n\n# Mix positional and keyword (positional first!)\ncreate_user(\"Charlie\", age=35, city=\"Chicago\", active=False)\n```\n\n**Keyword arguments are especially useful when:**\n- Functions have many parameters\n- You want to skip some default parameters\n- You want to make code more readable"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Default Arguments ===\nHello, Alice!\nHi, Bob!\nHey there, Charlie!\n\n=== Multiple Defaults ===\n[INFO] Application started\n[WARNING] Low memory\n[ERROR] Connection failed\n[DEBUG] Variable x = 42\n\n=== Keyword Arguments ===\nOrder #1: burger with fries, Drink: cola\nOrder #2: pizza with salad, Drink: water\nOrder #3: tacos with chips, Drink: lemonade\n\n=== Mixing Positional and Keyword ===\nSending email...\n  To: alice@example.com\n  Subject: Hello!\n  Body: Just saying hi...\n  CC: None\n  Priority: normal\n\nSending email...\n  To: bob@example.com\n  Subject: Urgent!\n  Body: Please respond ASAP...\n  CC: manager@example.com\n  Priority: high\n```",
              "code": "# Default and Keyword Arguments\n\nprint(\"=== Default Arguments ===\")\n\n# 'greeting' has a default value\ndef greet(name, greeting=\"Hello\"):\n    print(f\"{greeting}, {name}!\")\n\ngreet(\"Alice\")              # Uses default greeting\ngreet(\"Bob\", \"Hi\")          # Overrides default\ngreet(\"Charlie\", \"Hey there\")  # Different greeting\n\nprint(\"\\n=== Multiple Defaults ===\")\n\ndef log_message(message, level=\"INFO\", prefix=\"\"):\n    print(f\"[{level}] {prefix}{message}\")\n\nlog_message(\"Application started\")               # Default level\nlog_message(\"Low memory\", \"WARNING\")            # Custom level\nlog_message(\"Connection failed\", \"ERROR\")       # Another level\nlog_message(\"Variable x = 42\", \"DEBUG\")         # Debug message\n\nprint(\"\\n=== Keyword Arguments ===\")\n\ndef create_order(main_dish, side=\"fries\", drink=\"water\"):\n    print(f\"Order: {main_dish} with {side}, Drink: {drink}\")\n\n# Using positional arguments\nprint(\"Order #1: \", end=\"\")\ncreate_order(\"burger\", \"fries\", \"cola\")\n\n# Using keyword arguments - order doesn't matter!\nprint(\"Order #2: \", end=\"\")\ncreate_order(drink=\"water\", main_dish=\"pizza\", side=\"salad\")\n\n# Mix: positional first, then keyword\nprint(\"Order #3: \", end=\"\")\ncreate_order(\"tacos\", side=\"chips\", drink=\"lemonade\")\n\nprint(\"\\n=== Mixing Positional and Keyword ===\")\n\ndef send_email(to, subject, body, cc=None, priority=\"normal\"):\n    print(\"Sending email...\")\n    print(f\"  To: {to}\")\n    print(f\"  Subject: {subject}\")\n    print(f\"  Body: {body}\")\n    print(f\"  CC: {cc}\")\n    print(f\"  Priority: {priority}\")\n\n# Simple call - only required arguments\nsend_email(\"alice@example.com\", \"Hello!\", \"Just saying hi...\")\n\nprint()  # Blank line\n\n# Call with some keyword arguments\nsend_email(\n    \"bob@example.com\",\n    \"Urgent!\",\n    \"Please respond ASAP...\",\n    cc=\"manager@example.com\",\n    priority=\"high\"\n)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Mutable Default Arguments (The #1 Python Gotcha!)**\n```python\n# WRONG - The list is shared between ALL calls!\ndef add_item(item, items=[]):\n    items.append(item)\n    return items\n\nprint(add_item(\"a\"))  # ['a']\nprint(add_item(\"b\"))  # ['a', 'b'] - Unexpected!\n\n# CORRECT - Use None and create inside function\ndef add_item(item, items=None):\n    if items is None:\n        items = []\n    items.append(item)\n    return items\n```\n\n**2. Putting Default Parameters Before Required Parameters**\n```python\n# WRONG - SyntaxError!\ndef greet(greeting=\"Hello\", name):\n    print(f\"{greeting}, {name}!\")\n\n# CORRECT - Required parameters first\ndef greet(name, greeting=\"Hello\"):\n    print(f\"{greeting}, {name}!\")\n```\n\n**3. Putting Keyword Arguments Before Positional Arguments**\n```python\n# WRONG - SyntaxError!\ncreate_user(name=\"Alice\", 30, \"NYC\")\n\n# CORRECT - Positional arguments first\ncreate_user(\"Alice\", 30, city=\"NYC\")\ncreate_user(\"Alice\", age=30, city=\"NYC\")  # Also valid\n```\n\n**4. Using the Same Parameter Name Twice**\n```python\n# WRONG - TypeError: got multiple values\ndef greet(name, greeting=\"Hello\"):\n    print(f\"{greeting}, {name}!\")\n\ngreet(\"Alice\", name=\"Bob\")  # 'name' specified twice!\n\n# CORRECT - Use either positional OR keyword, not both\ngreet(\"Alice\", greeting=\"Hi\")\ngreet(name=\"Alice\", greeting=\"Hi\")\n```\n\n**5. Assuming Default Values Are Re-evaluated Each Call**\n```python\nimport time\n\n# WRONG - timestamp is set ONCE when function is defined\ndef log_message(msg, timestamp=time.time()):\n    print(f\"[{timestamp}] {msg}\")\n\n# CORRECT - Use None and get timestamp inside\ndef log_message(msg, timestamp=None):\n    if timestamp is None:\n        timestamp = time.time()\n    print(f\"[{timestamp}] {msg}\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Default arguments** provide fallback values: `def greet(name, greeting=\"Hello\"):`\n- **Parameters with defaults** must come AFTER parameters without defaults\n- **Keyword arguments** specify values by name: `greet(name=\"Alice\", greeting=\"Hi\")`\n- **Keyword arguments** can be in any order\n- **Positional arguments** must come before keyword arguments in function calls\n- **Best practice**: Use defaults for optional parameters, required parameters should have no default\n- **Readable code**: Use keyword arguments when calling functions with many parameters\n- **Common pattern**: `def func(required1, required2, optional1=\"default\", optional2=None):`\n- **Avoid mutable defaults**: Don't use `def func(items=[])` - use `def func(items=None):` instead"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-05",
          "title": "Lambda Functions and Built-in Functions",
          "moduleId": "module-06",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Sometimes you need a quick, throwaway function - something so simple that giving it a name feels like overkill. It's like writing a full recipe for \"squeeze lemon\" when you're just making lemonade.\n\n**Lambda functions** are anonymous (nameless) mini-functions written in one line:\n\n```python\n# Regular function\ndef double(x):\n    return x * 2\n\n# Same thing as a lambda\ndouble = lambda x: x * 2\n\n# Both work the same way!\nprint(double(5))  # 10\n```\n\n**The syntax:**\n```python\nlambda parameters: expression\n```\n\n- `lambda` - The keyword that starts it\n- `parameters` - Input values (like regular function parameters)\n- `expression` - What to return (no `return` keyword needed!)\n\n**When to use lambdas:**\n- Simple, one-line operations\n- When passing a function to another function (like `sorted()`, `map()`, `filter()`)\n- Quick data transformations\n\n**When NOT to use lambdas:**\n- Complex logic (use regular functions)\n- When you need multiple statements\n- When the function needs a descriptive name for clarity"
            },
            {
              "type": "THEORY",
              "title": "Built-in Functions You Should Know",
              "content": "Python comes with many powerful built-in functions. Here are the most useful ones:\n\n**Working with Numbers:**\n- `abs(x)` - Absolute value: `abs(-5)` returns `5`\n- `round(x, n)` - Round to n decimal places: `round(3.14159, 2)` returns `3.14`\n- `min(...)` - Smallest value: `min(3, 1, 4)` returns `1`\n- `max(...)` - Largest value: `max(3, 1, 4)` returns `4`\n- `sum(iterable)` - Sum all values: `sum([1, 2, 3])` returns `6`\n\n**Working with Collections:**\n- `len(x)` - Length/count: `len([1, 2, 3])` returns `3`\n- `sorted(x)` - Return sorted list: `sorted([3, 1, 2])` returns `[1, 2, 3]`\n- `reversed(x)` - Return reversed iterator\n- `enumerate(x)` - Get index and value pairs\n- `zip(a, b)` - Pair up elements from multiple lists\n\n**Type Conversions:**\n- `int(x)` - Convert to integer: `int(\"42\")` returns `42`\n- `float(x)` - Convert to float: `float(\"3.14\")` returns `3.14`\n- `str(x)` - Convert to string: `str(42)` returns `\"42\"`\n- `list(x)` - Convert to list: `list(\"abc\")` returns `['a', 'b', 'c']`\n- `bool(x)` - Convert to boolean: `bool(0)` returns `False`\n\n**Higher-Order Functions (use with lambdas!):**\n- `map(func, iterable)` - Apply function to each item\n- `filter(func, iterable)` - Keep items where function returns True\n- `any(iterable)` - True if ANY item is truthy\n- `all(iterable)` - True if ALL items are truthy"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Lambda Basics ===\nDouble 5: 10\nSquare 4: 16\nAdd 3 + 7: 10\n\n=== Lambdas with sorted() ===\nOriginal: ['banana', 'apple', 'cherry', 'date']\nSorted by length: ['date', 'apple', 'banana', 'cherry']\nSorted by last letter: ['banana', 'apple', 'date', 'cherry']\n\n=== Built-in Number Functions ===\nabs(-10) = 10\nround(3.14159, 2) = 3.14\nmin(5, 2, 8, 1) = 1\nmax(5, 2, 8, 1) = 8\nsum([1, 2, 3, 4, 5]) = 15\n\n=== map() with Lambda ===\nOriginal: [1, 2, 3, 4, 5]\nDoubled: [2, 4, 6, 8, 10]\nSquared: [1, 4, 9, 16, 25]\n\n=== filter() with Lambda ===\nOriginal: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nEven numbers: [2, 4, 6, 8, 10]\nGreater than 5: [6, 7, 8, 9, 10]\n\n=== Combining map and filter ===\nOriginal: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nSquares of even numbers: [4, 16, 36, 64, 100]\n```",
              "code": "# Lambda Functions and Built-in Functions\n\nprint(\"=== Lambda Basics ===\")\n\n# Simple lambdas\ndouble = lambda x: x * 2\nsquare = lambda x: x ** 2\nadd = lambda a, b: a + b\n\nprint(f\"Double 5: {double(5)}\")\nprint(f\"Square 4: {square(4)}\")\nprint(f\"Add 3 + 7: {add(3, 7)}\")\n\nprint(\"\\n=== Lambdas with sorted() ===\")\n\nwords = [\"banana\", \"apple\", \"cherry\", \"date\"]\nprint(f\"Original: {words}\")\n\n# Sort by length using lambda\nby_length = sorted(words, key=lambda word: len(word))\nprint(f\"Sorted by length: {by_length}\")\n\n# Sort by last letter\nby_last_letter = sorted(words, key=lambda word: word[-1])\nprint(f\"Sorted by last letter: {by_last_letter}\")\n\nprint(\"\\n=== Built-in Number Functions ===\")\n\nprint(f\"abs(-10) = {abs(-10)}\")\nprint(f\"round(3.14159, 2) = {round(3.14159, 2)}\")\nprint(f\"min(5, 2, 8, 1) = {min(5, 2, 8, 1)}\")\nprint(f\"max(5, 2, 8, 1) = {max(5, 2, 8, 1)}\")\nprint(f\"sum([1, 2, 3, 4, 5]) = {sum([1, 2, 3, 4, 5])}\")\n\nprint(\"\\n=== map() with Lambda ===\")\n\nnumbers = [1, 2, 3, 4, 5]\nprint(f\"Original: {numbers}\")\n\n# Double each number\ndoubled = list(map(lambda x: x * 2, numbers))\nprint(f\"Doubled: {doubled}\")\n\n# Square each number\nsquared = list(map(lambda x: x ** 2, numbers))\nprint(f\"Squared: {squared}\")\n\nprint(\"\\n=== filter() with Lambda ===\")\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Original: {numbers}\")\n\n# Keep only even numbers\nevens = list(filter(lambda x: x % 2 == 0, numbers))\nprint(f\"Even numbers: {evens}\")\n\n# Keep numbers greater than 5\ngreater_than_5 = list(filter(lambda x: x > 5, numbers))\nprint(f\"Greater than 5: {greater_than_5}\")\n\nprint(\"\\n=== Combining map and filter ===\")\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nprint(f\"Original: {numbers}\")\n\n# Get squares of even numbers only\nevens = filter(lambda x: x % 2 == 0, numbers)\nsquares_of_evens = list(map(lambda x: x ** 2, evens))\nprint(f\"Squares of even numbers: {squares_of_evens}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Lambda Capturing Loop Variable by Reference (Late Binding)**\n```python\n# WRONG - All lambdas capture the FINAL value of i\nfunctions = []\nfor i in range(3):\n    functions.append(lambda: i)\n\nprint([f() for f in functions])  # [2, 2, 2] - Not [0, 1, 2]!\n\n# CORRECT - Capture value with default argument\nfunctions = []\nfor i in range(3):\n    functions.append(lambda i=i: i)\n\nprint([f() for f in functions])  # [0, 1, 2]\n```\n\n**2. Using Lambda for Complex Logic**\n```python\n# WRONG - Hard to read and debug\nprocess = lambda x: x * 2 if x > 0 else (x * -1 if x < -10 else 0)\n\n# CORRECT - Use a regular function for complex logic\ndef process(x):\n    if x > 0:\n        return x * 2\n    elif x < -10:\n        return x * -1\n    else:\n        return 0\n```\n\n**3. Forgetting That map() and filter() Return Iterators**\n```python\n# WRONG - Iterator exhausted after first use\nnumbers = [1, 2, 3, 4, 5]\ndoubled = map(lambda x: x * 2, numbers)\n\nprint(list(doubled))  # [2, 4, 6, 8, 10]\nprint(list(doubled))  # [] - Empty! Iterator exhausted!\n\n# CORRECT - Convert to list if you need to reuse\ndoubled = list(map(lambda x: x * 2, numbers))\nprint(doubled)  # [2, 4, 6, 8, 10]\nprint(doubled)  # [2, 4, 6, 8, 10] - Works!\n```\n\n**4. Using Lambda When a Built-in Function Exists**\n```python\n# WRONG - Reinventing the wheel\nnumbers = [1, 2, 3, 4, 5]\ntotal = sum(map(lambda x: x, numbers))  # Unnecessary lambda!\n\n# CORRECT - Just use sum() directly\ntotal = sum(numbers)\n\n# WRONG - Lambda just calls a function\nsorted_words = sorted(words, key=lambda x: len(x))\n\n# CORRECT - Pass the function directly\nsorted_words = sorted(words, key=len)\n```\n\n**5. Confusing Return Behavior in Lambda vs Regular Functions**\n```python\n# WRONG - Using return keyword in lambda\nsquare = lambda x: return x ** 2  # SyntaxError!\n\n# CORRECT - Lambda automatically returns the expression\nsquare = lambda x: x ** 2\n\n# WRONG - Expecting None from expression lambda\ndo_print = lambda x: print(x)  # Returns None (print's return value)\nresult = do_print(5)  # result is None\n\n# CORRECT - If you need side effects, use a regular function\ndef do_print(x):\n    print(x)\n    return x  # Now returns the value\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Lambda syntax**: `lambda parameters: expression` - returns the expression automatically\n- **Lambdas are anonymous** - No name needed, but you can assign them to variables\n- **Use lambdas for simple operations** - If it needs multiple lines, use a regular function\n- **`sorted(key=...)`** - Use lambda to customize sorting\n- **`map(func, list)`** - Apply function to every item, returns iterator\n- **`filter(func, list)`** - Keep items where function returns True\n- **Convert to list**: `map()` and `filter()` return iterators - use `list()` to see results\n- **Built-in math functions**: `abs()`, `round()`, `min()`, `max()`, `sum()`\n- **Type conversions**: `int()`, `float()`, `str()`, `list()`, `bool()`\n- **Lambda + built-ins = powerful one-liners** for data transformation"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-06",
          "title": "Mini-Project: Personal Utility Library",
          "moduleId": "module-06",
          "order": 6,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Every programmer eventually builds their own **utility library** - a collection of helpful functions they use over and over again. It's like a chef's personal recipe book, filled with go-to techniques they've perfected over time.\n\n**What makes a good utility function?**\n\n1. **Does ONE thing well** - Single responsibility\n2. **Has a clear name** - You should know what it does just by reading the name\n3. **Works in many situations** - Generic enough to reuse\n4. **Has sensible defaults** - Easy to use in common cases\n5. **Handles edge cases** - What if the input is empty? Zero? Negative?\n\n**Common categories of utility functions:**\n\n- **String utilities**: Format text, validate input, clean data\n- **Math utilities**: Calculations, conversions, rounding\n- **Date/time utilities**: Format dates, calculate ages, time differences\n- **Validation utilities**: Check if data is valid (email, phone, etc.)\n- **Formatting utilities**: Convert data for display\n\nIn this mini-project, you'll build your own utility library with functions you can actually use in future projects!"
            },
            {
              "type": "THEORY",
              "title": "Designing Good Functions",
              "content": "**Before writing a function, ask yourself:**\n\n1. **What does it do?** (One clear purpose)\n2. **What does it need?** (Parameters)\n3. **What does it give back?** (Return value)\n4. **What could go wrong?** (Edge cases)\n\n**Example thought process:**\n\n```\nFunction: calculate_percentage\nPurpose: Calculate what percentage one number is of another\nNeeds: part (number), whole (number)\nReturns: percentage as a float\nEdge cases: whole = 0 (division by zero!), negative numbers\n```\n\n**Turns into:**\n\n```python\ndef calculate_percentage(part, whole, decimal_places=2):\n    \"\"\"Calculate what percentage 'part' is of 'whole'.\"\"\"\n    if whole == 0:\n        return 0.0  # Avoid division by zero\n    percentage = (part / whole) * 100\n    return round(percentage, decimal_places)\n```\n\n**Notice:**\n- Clear name describes what it does\n- Docstring explains the purpose\n- Default parameter for common use case\n- Handles the edge case (division by zero)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Personal Utility Library",
              "content": "**Expected Output:**\n```\n=== String Utilities ===\nOriginal: '  Hello World  '\nCleaned: 'Hello World'\nSlug: 'hello-world-from-python'\nTruncated: 'Hello Wor...'\nIs valid email? True\nIs valid email? False\n\n=== Math Utilities ===\n75 out of 200 = 37.5%\nAverage: 85.0\nClamped 150 to range [0, 100]: 100\nClamped -10 to range [0, 100]: 0\n\n=== Formatting Utilities ===\nFormatted price: $1,234.56\nFormatted large number: 1,234,567\nFormatted phone: (555) 123-4567\n\n=== List Utilities ===\nChunks of 3: [[1, 2, 3], [4, 5, 6], [7, 8]]\nFlattened: [1, 2, 3, 4, 5, 6]\nUnique (order preserved): [1, 2, 3, 4, 5]\n```",
              "code": "# Personal Utility Library\n# A collection of reusable functions\n\nprint(\"=== String Utilities ===\")\n\ndef clean_string(text):\n    \"\"\"Remove extra whitespace and clean up a string.\"\"\"\n    return \" \".join(text.split())\n\ndef slugify(text):\n    \"\"\"Convert text to URL-friendly slug.\"\"\"\n    text = text.lower().strip()\n    text = text.replace(\" \", \"-\")\n    # Remove non-alphanumeric characters (except hyphens)\n    return \"\".join(c for c in text if c.isalnum() or c == \"-\")\n\ndef truncate(text, max_length=50, suffix=\"...\"):\n    \"\"\"Truncate text to max_length, adding suffix if truncated.\"\"\"\n    if len(text) <= max_length:\n        return text\n    return text[:max_length - len(suffix)] + suffix\n\ndef is_valid_email(email):\n    \"\"\"Basic email validation (simplified).\"\"\"\n    return \"@\" in email and \".\" in email.split(\"@\")[-1]\n\ntest_string = \"  Hello World  \"\nprint(f\"Original: '{test_string}'\")\nprint(f\"Cleaned: '{clean_string(test_string)}'\")\nprint(f\"Slug: '{slugify('Hello World from Python!')}'\")\nprint(f\"Truncated: '{truncate('Hello World', 12)}'\")\nprint(f\"Is valid email? {is_valid_email('user@example.com')}\")\nprint(f\"Is valid email? {is_valid_email('invalid-email')}\")\n\nprint(\"\\n=== Math Utilities ===\")\n\ndef calculate_percentage(part, whole, decimal_places=2):\n    \"\"\"Calculate what percentage 'part' is of 'whole'.\"\"\"\n    if whole == 0:\n        return 0.0\n    return round((part / whole) * 100, decimal_places)\n\ndef average(numbers):\n    \"\"\"Calculate the average of a list of numbers.\"\"\"\n    if not numbers:\n        return 0.0\n    return sum(numbers) / len(numbers)\n\ndef clamp(value, min_val, max_val):\n    \"\"\"Clamp a value between min and max.\"\"\"\n    return max(min_val, min(value, max_val))\n\nprint(f\"75 out of 200 = {calculate_percentage(75, 200)}%\")\nprint(f\"Average: {average([80, 85, 90, 85])}\")\nprint(f\"Clamped 150 to range [0, 100]: {clamp(150, 0, 100)}\")\nprint(f\"Clamped -10 to range [0, 100]: {clamp(-10, 0, 100)}\")\n\nprint(\"\\n=== Formatting Utilities ===\")\n\ndef format_price(amount, currency=\"$\"):\n    \"\"\"Format a number as currency.\"\"\"\n    return f\"{currency}{amount:,.2f}\"\n\ndef format_number(number):\n    \"\"\"Format a number with thousand separators.\"\"\"\n    return f\"{number:,}\"\n\ndef format_phone(phone):\n    \"\"\"Format a 10-digit phone number.\"\"\"\n    digits = \"\".join(c for c in phone if c.isdigit())\n    if len(digits) == 10:\n        return f\"({digits[:3]}) {digits[3:6]}-{digits[6:]}\"\n    return phone  # Return original if not 10 digits\n\nprint(f\"Formatted price: {format_price(1234.56)}\")\nprint(f\"Formatted large number: {format_number(1234567)}\")\nprint(f\"Formatted phone: {format_phone('5551234567')}\")\n\nprint(\"\\n=== List Utilities ===\")\n\ndef chunk_list(lst, size):\n    \"\"\"Split a list into chunks of given size.\"\"\"\n    return [lst[i:i + size] for i in range(0, len(lst), size)]\n\ndef flatten(nested_list):\n    \"\"\"Flatten a list of lists into a single list.\"\"\"\n    return [item for sublist in nested_list for item in sublist]\n\ndef unique_preserve_order(lst):\n    \"\"\"Remove duplicates while preserving order.\"\"\"\n    seen = set()\n    result = []\n    for item in lst:\n        if item not in seen:\n            seen.add(item)\n            result.append(item)\n    return result\n\nprint(f\"Chunks of 3: {chunk_list([1, 2, 3, 4, 5, 6, 7, 8], 3)}\")\nprint(f\"Flattened: {flatten([[1, 2], [3, 4], [5, 6]])}\")\nprint(f\"Unique (order preserved): {unique_preserve_order([1, 2, 2, 3, 1, 4, 5, 3])}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Printing Instead of Returning Values**\n```python\n# WRONG - Function prints but doesn't return\ndef calculate_tax(amount, rate=0.1):\n    tax = amount * rate\n    print(f\"Tax: ${tax}\")  # Prints, returns None!\n\nresult = calculate_tax(100)  # result is None!\ntotal = 100 + result  # TypeError: can't add None!\n\n# CORRECT - Return the value, let caller decide what to do\ndef calculate_tax(amount, rate=0.1):\n    return amount * rate\n\nresult = calculate_tax(100)\nprint(f\"Tax: ${result}\")  # Caller prints if needed\ntotal = 100 + result  # Works!\n```\n\n**2. Not Handling Edge Cases**\n```python\n# WRONG - Crashes on edge cases\ndef average(numbers):\n    return sum(numbers) / len(numbers)  # ZeroDivisionError if empty!\n\ndef get_first(items):\n    return items[0]  # IndexError if empty!\n\n# CORRECT - Handle edge cases gracefully\ndef average(numbers):\n    if not numbers:\n        return 0.0  # Or raise ValueError with helpful message\n    return sum(numbers) / len(numbers)\n\ndef get_first(items, default=None):\n    return items[0] if items else default\n```\n\n**3. Modifying Input Arguments Unexpectedly**\n```python\n# WRONG - Modifies the original list!\ndef add_item(items, item):\n    items.append(item)  # Changes caller's list!\n    return items\n\nmy_list = [1, 2, 3]\nresult = add_item(my_list, 4)\nprint(my_list)  # [1, 2, 3, 4] - Original changed!\n\n# CORRECT - Create a new list\ndef add_item(items, item):\n    return items + [item]  # Returns new list\n\n# OR be explicit that it modifies in-place\ndef add_item_inplace(items, item):\n    \"\"\"Modifies items in-place and returns None.\"\"\"\n    items.append(item)\n    # No return - convention for in-place operations\n```\n\n**4. Functions That Do Too Much**\n```python\n# WRONG - Does too many things\ndef process_user(name, email, save_to_db=True, send_email=True):\n    user = create_user(name, email)\n    if save_to_db:\n        database.save(user)\n    if send_email:\n        send_welcome_email(user)\n    return user\n\n# CORRECT - Single responsibility\ndef create_user(name, email):\n    return {\"name\": name, \"email\": email}\n\ndef save_user(user):\n    database.save(user)\n\ndef send_welcome_email(user):\n    # Send email logic\n    pass\n\n# Caller composes as needed\nuser = create_user(\"Alice\", \"alice@example.com\")\nsave_user(user)\nsend_welcome_email(user)\n```\n\n**5. Unclear Function Names and Missing Docstrings**\n```python\n# WRONG - What does this do?\ndef proc(d, k):\n    return d.get(k, 0) + 1\n\ndef calc(x, y, z):\n    return x * y / z if z else 0\n\n# CORRECT - Clear names and docstrings\ndef get_count_plus_one(data, key):\n    \"\"\"Get value for key from dict, defaulting to 0, then add 1.\"\"\"\n    return data.get(key, 0) + 1\n\ndef calculate_rate(quantity, price, time_period):\n    \"\"\"Calculate rate as (quantity * price) / time_period.\n    \n    Returns 0 if time_period is zero to avoid division error.\n    \"\"\"\n    if time_period == 0:\n        return 0\n    return quantity * price / time_period\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Utility functions** are reusable helpers that solve common problems\n- **Good functions do ONE thing** - Single responsibility principle\n- **Use clear, descriptive names** - `calculate_percentage` not `calc` or `cp`\n- **Add docstrings** - Brief explanation of what the function does\n- **Handle edge cases** - Empty lists, zero values, invalid input\n- **Use default parameters** - Make common use cases easy\n- **Return values, don't print** - Let the caller decide what to do with results\n- **Test your functions** - Try different inputs, including edge cases\n- **Build your library over time** - Add functions as you need them\n- **Organize by category** - String utils, math utils, formatting utils, etc."
            }
          ],
          "challenges": []
        },
        {
          "id": "module-06-lesson-07",
          "title": "Type Hints: Self-Documenting Code (Python 3.10+)",
          "moduleId": "module-06",
          "order": 7,
          "estimatedMinutes": 35,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're lending your car to a friend. You'd probably tell them:\n\n- \"It takes **unleaded gas** (not diesel!)\"\n- \"The key is a **physical key**, not a fob\"\n- \"It returns **23 miles per gallon**\"\n\nWithout this information, they might put diesel in your gas tank!\n\n**Type hints work the same way** - they tell other developers (and tools) what kind of data your functions expect and return.\n\n### Before Type Hints:\n```python\ndef greet(name):\n    return \"Hello, \" + name\n\n# What type is 'name'? String? Number? List?\n# What does it return? String? None? Something else?\n# You have to READ the code to find out!\n```\n\n### After Type Hints:\n```python\ndef greet(name: str) -> str:\n    return \"Hello, \" + name\n\n# Crystal clear: takes a string, returns a string!\n```\n\n### Why Use Type Hints?\n\n1. **Self-documenting code** - No need to guess what types a function uses\n2. **IDE support** - Get autocomplete and error detection before running\n3. **Catch bugs early** - Tools like mypy find type errors without running code\n4. **Better refactoring** - Easier to change code when types are explicit\n5. **Team collaboration** - Other developers instantly understand your functions\n\n### Important: Type hints are OPTIONAL!\n\nPython is still dynamically typed. Type hints are \"hints\" - they don't enforce anything at runtime. They're for developers and tools, not for Python itself.\n\n```python\ndef greet(name: str) -> str:\n    return \"Hello, \" + name\n\n# This still RUNS (Python doesn't enforce types)\ngreet(42)  # No runtime error from type hint\n# But tools like mypy would warn: \"Argument 1 has incompatible type 'int'; expected 'str'\"\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Basic Type Hints",
              "content": "**Expected Output:**\n```\n=== Basic Type Hints ===\nHello, Alice!\nCircle area: 78.54\nIs 18 an adult? True\n\n=== Variable Annotations ===\nName: Bob, Age: 25, Height: 5.9, Active: True\n\n=== Collection Types ===\nSum: 15\nHighest grade: 95\nFormatted names: ALICE, BOB, CHARLIE\n\n=== Optional Types ===\nNo middle name provided\nFull name with middle: John Paul Doe\n\n=== Union Types ===\nString ID: user_123\nNumeric ID: 00042\nProcessed: $99.99\nProcessed: 100\n```",
              "code": "# Type Hints: Making Python Code Self-Documenting\n\nfrom typing import Optional, Union\n\nprint(\"=== Basic Type Hints ===\")\n\n# Basic function with type hints\n# name: str means 'name should be a string'\n# -> str means 'this function returns a string'\ndef greet(name: str) -> str:\n    return f\"Hello, {name}!\"\n\n# Function with multiple typed parameters\ndef calculate_area(radius: float) -> float:\n    pi = 3.14159\n    return pi * radius * radius\n\n# Function returning a boolean\ndef is_adult(age: int) -> bool:\n    return age >= 18\n\nprint(greet(\"Alice\"))\nprint(f\"Circle area: {calculate_area(5.0):.2f}\")\nprint(f\"Is 18 an adult? {is_adult(18)}\")\n\nprint()\nprint(\"=== Variable Annotations ===\")\n\n# Variable type annotations\nname: str = \"Bob\"\nage: int = 25\nheight: float = 5.9\nis_active: bool = True\n\nprint(f\"Name: {name}, Age: {age}, Height: {height}, Active: {is_active}\")\n\nprint()\nprint(\"=== Collection Types ===\")\n\n# Collection types (Python 3.9+ syntax)\ndef sum_numbers(numbers: list[int]) -> int:\n    total = 0\n    for num in numbers:\n        total += num\n    return total\n\ndef get_highest_grade(grades: dict[str, int]) -> int:\n    return max(grades.values())\n\ndef format_names(names: list[str]) -> list[str]:\n    return [name.upper() for name in names]\n\nprint(f\"Sum: {sum_numbers([1, 2, 3, 4, 5])}\")\nprint(f\"Highest grade: {get_highest_grade({'Alice': 95, 'Bob': 87, 'Charlie': 92})}\")\nprint(f\"Formatted names: {', '.join(format_names(['Alice', 'Bob', 'Charlie']))}\")\n\nprint()\nprint(\"=== Optional Types ===\")\n\n# Optional means the value can be None\ndef get_full_name(first: str, last: str, middle: Optional[str] = None) -> str:\n    if middle:\n        return f\"{first} {middle} {last}\"\n    return f\"{first} {last}\"\n\nprint(get_full_name(\"John\", \"Doe\"))  # No middle name\nprint(f\"Full name with middle: {get_full_name('John', 'Doe', 'Paul')}\")\n\nprint()\nprint(\"=== Union Types ===\")\n\n# Union types: accepts multiple types (Python 3.10+ can use | instead)\ndef process_id(user_id: Union[str, int]) -> str:\n    if isinstance(user_id, int):\n        return f\"{user_id:05d}\"  # Pad with zeros\n    return user_id\n\n# Python 3.10+ syntax with | operator\ndef format_price(price: int | float) -> str:\n    if isinstance(price, float):\n        return f\"${price:.2f}\"\n    return str(price)\n\nprint(f\"String ID: {process_id('user_123')}\")\nprint(f\"Numeric ID: {process_id(42)}\")\nprint(f\"Processed: {format_price(99.99)}\")\nprint(f\"Processed: {format_price(100)}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Basic Type Hint Syntax:\n\n**Function Parameters:**\n```python\ndef function_name(param: type) -> return_type:\n    ...\n```\n\n**Variable Annotations:**\n```python\nvariable: type = value\n```\n\n### Common Built-in Types:\n\n| Type | Example | Description |\n|------|---------|-------------|\n| `str` | `name: str = \"Alice\"` | Text strings |\n| `int` | `age: int = 25` | Whole numbers |\n| `float` | `price: float = 19.99` | Decimal numbers |\n| `bool` | `active: bool = True` | True/False values |\n| `None` | `-> None` | Function returns nothing |\n\n### Collection Types (Python 3.9+):\n\n```python\n# Lists with element type\nnumbers: list[int] = [1, 2, 3]\nnames: list[str] = [\"Alice\", \"Bob\"]\n\n# Dictionaries with key and value types\ngrades: dict[str, int] = {\"Alice\": 95, \"Bob\": 87}\nconfig: dict[str, str] = {\"host\": \"localhost\"}\n\n# Sets with element type\nunique_ids: set[int] = {1, 2, 3}\n\n# Tuples with specific types for each position\npoint: tuple[int, int] = (10, 20)\nperson: tuple[str, int, bool] = (\"Alice\", 25, True)\n```\n\n### Special Types from `typing` Module:\n\n**Optional - Value or None:**\n```python\nfrom typing import Optional\n\n# These are equivalent:\nname: Optional[str] = None\nname: str | None = None  # Python 3.10+\n```\n\n**Union - Multiple Possible Types:**\n```python\nfrom typing import Union\n\n# These are equivalent:\nid_value: Union[str, int] = \"abc\"\nid_value: str | int = \"abc\"  # Python 3.10+\n```\n\n**Any - Accepts Any Type:**\n```python\nfrom typing import Any\n\ndef log_anything(value: Any) -> None:\n    print(value)\n```\n\n### Function Return Types:\n\n```python\n# Returns a value\ndef add(a: int, b: int) -> int:\n    return a + b\n\n# Returns nothing (None)\ndef print_greeting(name: str) -> None:\n    print(f\"Hello, {name}\")\n\n# Returns a list\ndef get_names() -> list[str]:\n    return [\"Alice\", \"Bob\"]\n```\n\n### Type Hints Don't Enforce!\n\n```python\ndef greet(name: str) -> str:\n    return f\"Hello, {name}\"\n\n# This RUNS without error (Python ignores type hints at runtime)\nresult = greet(42)  # Type hint says str, but we passed int\n\n# But tools like mypy catch this:\n# $ mypy script.py\n# error: Argument 1 has incompatible type \"int\"; expected \"str\"\n```\n\n### Best Practices:\n\n1. **Use type hints for public APIs** - Functions others will use\n2. **Be specific with collections** - `list[str]` not just `list`\n3. **Use Optional for nullable values** - Makes None handling explicit\n4. **Return type is important** - Helps IDE provide better autocomplete\n5. **Don't over-annotate** - Simple internal functions may not need hints"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Thinking Type Hints Enforce Types at Runtime**\n```python\n# WRONG - Assuming Python will reject this\ndef greet(name: str) -> str:\n    return f\"Hello, {name}\"\n\ngreet(123)  # This RUNS without error! Python ignores hints at runtime\n\n# CORRECT - Type hints are for documentation and static checkers only\n# Use tools like mypy to catch type errors BEFORE running\n# $ mypy script.py  # Catches the error\n```\n\n**2. Using Capitalized List/Dict Instead of Lowercase (Python 3.9+)**\n```python\n# WRONG - Old style, requires import\nfrom typing import List, Dict\ndef process(items: List[str]) -> Dict[str, int]:\n    pass\n\n# CORRECT - Python 3.9+ uses lowercase built-in types\ndef process(items: list[str]) -> dict[str, int]:\n    pass\n```\n\n**3. Forgetting Optional for Nullable Parameters**\n```python\n# WRONG - Default None but type says str\ndef greet(name: str = None):  # Type checker will complain!\n    pass\n\n# CORRECT - Use Optional or | None for nullable values\nfrom typing import Optional\ndef greet(name: Optional[str] = None):  # Explicit: can be str or None\n    pass\n```\n\n**4. Confusing -> None with No Return Type**\n```python\n# WRONG - Omitting return type (unclear intention)\ndef print_greeting(name: str):\n    print(f\"Hello, {name}\")\n\n# CORRECT - Explicitly show function returns nothing\ndef print_greeting(name: str) -> None:\n    print(f\"Hello, {name}\")\n```\n\n**5. Over-Using Any Type**\n```python\n# WRONG - Using Any defeats the purpose of type hints\nfrom typing import Any\ndef process(data: Any) -> Any:  # This tells us nothing!\n    return data\n\n# CORRECT - Be specific about types\ndef process(data: dict[str, int]) -> list[int]:\n    return list(data.values())\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Type hints are documentation** - They tell developers what types to use without reading implementation\n- **Basic syntax:** `param: type` for parameters, `-> type` for return values\n- **Common types:** `str`, `int`, `float`, `bool`, `None`\n- **Collection types (Python 3.9+):** `list[int]`, `dict[str, int]`, `set[str]`, `tuple[int, str]`\n- **Optional values:** `Optional[str]` or `str | None` for values that might be None\n- **Union types:** `Union[str, int]` or `str | int` for multiple possible types\n- **Type hints are optional** - Python doesn't enforce them at runtime\n- **Tools like mypy** - Static type checkers catch type errors before running\n- **IDE benefits** - Better autocomplete, error detection, refactoring support\n- **Python 3.10+ improvements** - Use `|` instead of Union, cleaner syntax\n\n### When to Use Type Hints:\n\n- Public functions and methods (APIs others will call)\n- Complex functions with multiple parameters\n- Functions where the return type isn't obvious\n- Codebases shared with other developers\n- When you want IDE autocomplete to work better\n\n### When Type Hints Might Be Overkill:\n\n- Simple one-liner internal functions\n- Scripts you'll use once\n- Prototyping and experimentation\n- When types are completely obvious from context"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-06-lesson-07-challenge-1",
              "title": "Practice: Add Type Hints",
              "description": "Add type hints to these functions to make them self-documenting.\n\n**Functions to annotate:**\n1. `calculate_bmi` - takes weight (float) and height (float), returns float\n2. `get_initials` - takes first name and last name (strings), returns string\n3. `find_longest` - takes a list of strings, returns the longest string\n4. `merge_dicts` - takes two dictionaries (string keys, int values), returns merged dict\n5. `safe_divide` - takes two numbers (int or float), returns float or None if dividing by zero",
              "instructions": "Add type hints to these functions to make them self-documenting.\n\n**Functions to annotate:**\n1. `calculate_bmi` - takes weight (float) and height (float), returns float\n2. `get_initials` - takes first name and last name (strings), returns string\n3. `find_longest` - takes a list of strings, returns the longest string\n4. `merge_dicts` - takes two dictionaries (string keys, int values), returns merged dict\n5. `safe_divide` - takes two numbers (int or float), returns float or None if dividing by zero",
              "starterCode": "from typing import Optional, Union\n\n# TODO: Add type hints to all functions\n\ndef calculate_bmi(weight, height):\n    \"\"\"Calculate Body Mass Index.\"\"\"\n    return weight / (height ** 2)\n\ndef get_initials(first_name, last_name):\n    \"\"\"Get initials from first and last name.\"\"\"\n    return f\"{first_name[0]}.{last_name[0]}.\"\n\ndef find_longest(words):\n    \"\"\"Find the longest word in a list.\"\"\"\n    longest = \"\"\n    for word in words:\n        if len(word) > len(longest):\n            longest = word\n    return longest\n\ndef merge_dicts(dict1, dict2):\n    \"\"\"Merge two dictionaries, adding values for common keys.\"\"\"\n    result = dict1.copy()\n    for key, value in dict2.items():\n        if key in result:\n            result[key] += value\n        else:\n            result[key] = value\n    return result\n\ndef safe_divide(a, b):\n    \"\"\"Divide a by b, return None if b is zero.\"\"\"\n    if b == 0:\n        return None\n    return a / b\n\n# Test your type-hinted functions\nprint(f\"BMI: {calculate_bmi(70.0, 1.75):.1f}\")\nprint(f\"Initials: {get_initials('John', 'Doe')}\")\nprint(f\"Longest: {find_longest(['cat', 'elephant', 'dog'])}\")\nprint(f\"Merged: {merge_dicts({'a': 1, 'b': 2}, {'b': 3, 'c': 4})}\")\nprint(f\"Safe divide: {safe_divide(10, 3):.2f}\")\nprint(f\"Safe divide by zero: {safe_divide(10, 0)}\")",
              "solution": "from typing import Optional, Union\n\n# Fully type-hinted functions\n\ndef calculate_bmi(weight: float, height: float) -> float:\n    \"\"\"Calculate Body Mass Index.\"\"\"\n    return weight / (height ** 2)\n\ndef get_initials(first_name: str, last_name: str) -> str:\n    \"\"\"Get initials from first and last name.\"\"\"\n    return f\"{first_name[0]}.{last_name[0]}.\"\n\ndef find_longest(words: list[str]) -> str:\n    \"\"\"Find the longest word in a list.\"\"\"\n    longest = \"\"\n    for word in words:\n        if len(word) > len(longest):\n            longest = word\n    return longest\n\ndef merge_dicts(dict1: dict[str, int], dict2: dict[str, int]) -> dict[str, int]:\n    \"\"\"Merge two dictionaries, adding values for common keys.\"\"\"\n    result = dict1.copy()\n    for key, value in dict2.items():\n        if key in result:\n            result[key] += value\n        else:\n            result[key] = value\n    return result\n\ndef safe_divide(a: int | float, b: int | float) -> Optional[float]:\n    \"\"\"Divide a by b, return None if b is zero.\"\"\"\n    if b == 0:\n        return None\n    return a / b\n\n# Test the type-hinted functions\nprint(f\"BMI: {calculate_bmi(70.0, 1.75):.1f}\")\nprint(f\"Initials: {get_initials('John', 'Doe')}\")\nprint(f\"Longest: {find_longest(['cat', 'elephant', 'dog'])}\")\nprint(f\"Merged: {merge_dicts({'a': 1, 'b': 2}, {'b': 3, 'c': 4})}\")\nprint(f\"Safe divide: {safe_divide(10, 3):.2f}\")\nprint(f\"Safe divide by zero: {safe_divide(10, 0)}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "BMI calculation is correct",
                  "expectedOutput": "BMI: 22.9",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use the -> arrow syntax for return types. For collections, use list[str] and dict[str, int] syntax. For values that can be None, use Optional[type] from typing module."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using List instead of list (Python 3.9+)",
                  "consequence": "Works but outdated style",
                  "correction": "Use lowercase list[int] instead of List[int]"
                },
                {
                  "mistake": "Forgetting Optional for nullable returns",
                  "consequence": "Type checkers may flag errors",
                  "correction": "Use Optional[float] when function can return None"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-07",
      "title": "Dictionaries",
      "description": "Managing key-value pairs",
      "difficulty": "intermediate",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-07-lesson-01",
          "title": "Dictionary Basics - Key-Value Pairs",
          "moduleId": "module-07",
          "order": 1,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Think about a real dictionary - the kind you use to look up words. You don't read it from page 1 to page 500 looking for a word. Instead, you look up the word directly and find its definition.\n\n**Python dictionaries work the same way!**\n\nInstead of storing items by position (like lists do), dictionaries store items by **keys**. Each key is paired with a **value**.\n\n```python\n# A list stores by position (index)\nfruits = [\"apple\", \"banana\", \"cherry\"]\nprint(fruits[0])  # \"apple\" - you need to know position 0\n\n# A dictionary stores by key\nprices = {\"apple\": 1.50, \"banana\": 0.75, \"cherry\": 3.00}\nprint(prices[\"apple\"])  # 1.50 - you look up by name!\n```\n\n**Real-world examples of key-value pairs:**\n\n- Phone contacts: name -> phone number\n- Student grades: student ID -> grade\n- Product inventory: product code -> quantity\n- User profiles: username -> user data\n- Config settings: setting name -> setting value\n\n**Why use dictionaries?**\n\n- **Fast lookups** - Find data instantly by key (no searching)\n- **Meaningful access** - Use descriptive keys instead of remembering positions\n- **Flexible structure** - Add or remove items easily\n- **Real-world data** - Most data naturally has a key-value structure"
            },
            {
              "type": "THEORY",
              "title": "Creating and Accessing Dictionaries",
              "content": "**Creating a dictionary:**\n\n```python\n# Using curly braces (most common)\nperson = {\"name\": \"Alice\", \"age\": 30, \"city\": \"NYC\"}\n\n# Empty dictionary\nempty = {}\n\n# Using dict() constructor\ncoords = dict(x=10, y=20)\n```\n\n**Accessing values:**\n\n```python\nperson = {\"name\": \"Alice\", \"age\": 30}\n\n# Using square brackets\nprint(person[\"name\"])  # Alice\n\n# Using get() - safer, returns None if key doesn't exist\nprint(person.get(\"name\"))       # Alice\nprint(person.get(\"email\"))      # None (no error!)\nprint(person.get(\"email\", \"N/A\"))  # \"N/A\" (default value)\n```\n\n**Adding and modifying values:**\n\n```python\nperson = {\"name\": \"Alice\"}\n\n# Add new key-value pair\nperson[\"age\"] = 30\n\n# Modify existing value\nperson[\"name\"] = \"Alicia\"\n\n# Delete a key-value pair\ndel person[\"age\"]\n```\n\n**Important:** Keys must be immutable (strings, numbers, tuples). Lists cannot be keys!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Creating Dictionaries ===\n{'name': 'Alice', 'age': 30, 'city': 'NYC'}\n{'x': 10, 'y': 20}\n\n=== Accessing Values ===\nName: Alice\nAge: 30\nEmail with get(): None\nEmail with default: No email provided\n\n=== Modifying Dictionaries ===\nOriginal: {'name': 'Bob', 'age': 25}\nAfter adding email: {'name': 'Bob', 'age': 25, 'email': 'bob@example.com'}\nAfter updating age: {'name': 'Bob', 'age': 26, 'email': 'bob@example.com'}\nAfter deleting email: {'name': 'Bob', 'age': 26}\n\n=== Checking Keys ===\nHas 'name'? True\nHas 'phone'? False\nNumber of items: 2\n\n=== Practical Example: Product Inventory ===\nApple costs: $1.50\nBanana costs: $0.75\nMango costs: Not in stock\n```",
              "code": "# Dictionary Basics - Key-Value Pairs\n\nprint(\"=== Creating Dictionaries ===\")\n\n# Using curly braces\nperson = {\"name\": \"Alice\", \"age\": 30, \"city\": \"NYC\"}\nprint(person)\n\n# Using dict() with keyword arguments\ncoordinates = dict(x=10, y=20)\nprint(coordinates)\n\nprint(\"\\n=== Accessing Values ===\")\n\nperson = {\"name\": \"Alice\", \"age\": 30, \"city\": \"NYC\"}\n\n# Using square brackets\nprint(f\"Name: {person['name']}\")\nprint(f\"Age: {person['age']}\")\n\n# Using get() - safer for potentially missing keys\nprint(f\"Email with get(): {person.get('email')}\")\nprint(f\"Email with default: {person.get('email', 'No email provided')}\")\n\nprint(\"\\n=== Modifying Dictionaries ===\")\n\nuser = {\"name\": \"Bob\", \"age\": 25}\nprint(f\"Original: {user}\")\n\n# Add a new key-value pair\nuser[\"email\"] = \"bob@example.com\"\nprint(f\"After adding email: {user}\")\n\n# Update an existing value\nuser[\"age\"] = 26\nprint(f\"After updating age: {user}\")\n\n# Delete a key-value pair\ndel user[\"email\"]\nprint(f\"After deleting email: {user}\")\n\nprint(\"\\n=== Checking Keys ===\")\n\nperson = {\"name\": \"Alice\", \"age\": 30}\n\n# Check if a key exists\nprint(f\"Has 'name'? {'name' in person}\")\nprint(f\"Has 'phone'? {'phone' in person}\")\n\n# Get number of key-value pairs\nprint(f\"Number of items: {len(person)}\")\n\nprint(\"\\n=== Practical Example: Product Inventory ===\")\n\nproduct_prices = {\n    \"apple\": 1.50,\n    \"banana\": 0.75,\n    \"orange\": 2.00,\n    \"grape\": 3.50\n}\n\n# Look up prices\nprint(f\"Apple costs: ${product_prices['apple']:.2f}\")\nprint(f\"Banana costs: ${product_prices.get('banana'):.2f}\")\nprint(f\"Mango costs: {product_prices.get('mango', 'Not in stock')}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. KeyError When Accessing Missing Keys**\n```python\n# WRONG - Crashes if key doesn't exist\nuser = {\"name\": \"Alice\"}\nprint(user[\"email\"])  # KeyError: 'email'\n\n# CORRECT - Use get() which returns None (or default) if missing\nprint(user.get(\"email\"))           # None\nprint(user.get(\"email\", \"N/A\"))    # \"N/A\"\n```\n\n**2. Confusing get() with [] for Assignment**\n```python\n# WRONG - get() doesn't add the key to the dictionary!\nuser = {\"name\": \"Alice\"}\nuser.get(\"age\", 25)  # Returns 25 but doesn't add \"age\" to user\nprint(user)  # {'name': 'Alice'} - age is NOT there!\n\n# CORRECT - Use [] to add/modify values\nuser[\"age\"] = 25\nprint(user)  # {'name': 'Alice', 'age': 25}\n```\n\n**3. Using Mutable Objects (Lists) as Keys**\n```python\n# WRONG - Lists can't be dictionary keys!\nmy_dict = {}\nmy_dict[[1, 2, 3]] = \"value\"  # TypeError: unhashable type: 'list'\n\n# CORRECT - Use tuples (immutable) instead\nmy_dict[(1, 2, 3)] = \"value\"  # Works!\nmy_dict[\"string_key\"] = \"value\"  # Strings work too\n```\n\n**4. Forgetting to Check if Key Exists Before Accessing**\n```python\n# WRONG - Might crash\nscores = {\"Alice\": 95, \"Bob\": 87}\nif scores[\"Charlie\"] > 90:  # KeyError if Charlie not in dict\n    print(\"Great score!\")\n\n# CORRECT - Check first with 'in' or use get()\nif \"Charlie\" in scores and scores[\"Charlie\"] > 90:\n    print(\"Great score!\")\n# Or use get() with a default that won't pass the condition\nif scores.get(\"Charlie\", 0) > 90:\n    print(\"Great score!\")\n```\n\n**5. Empty Dict vs None Check Confusion**\n```python\n# WRONG - Checking for None when dict might be empty\ndata = {}\nif data is None:  # False! Empty dict is not None\n    print(\"No data\")\n\n# CORRECT - Check if dict is empty (falsy)\nif not data:  # True for empty dict\n    print(\"No data\")\n# Or be explicit:\nif len(data) == 0:\n    print(\"No data\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Dictionaries store key-value pairs** - Look up values by their key, not position\n- **Create with curly braces**: `{\"key\": value, \"key2\": value2}`\n- **Access values**: `dict[\"key\"]` or safer `dict.get(\"key\")`\n- **Add/modify**: `dict[\"new_key\"] = value`\n- **Delete**: `del dict[\"key\"]`\n- **Check key exists**: `\"key\" in dict`\n- **Get length**: `len(dict)`\n- **Keys must be immutable** - Strings, numbers, tuples (not lists!)\n- **Values can be anything** - Strings, numbers, lists, even other dictionaries\n- **Use `get()` with default** - `dict.get(\"key\", \"default\")` prevents KeyError"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-07-lesson-02",
          "title": "Dictionary Methods and Operations",
          "moduleId": "module-07",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Dictionaries come with a powerful set of built-in methods that make working with key-value data easy and efficient. Think of these methods as tools in a toolbox - each one designed for a specific job.\n\n**The most important dictionary methods:**\n\n- **`.keys()`** - Get all the keys\n- **`.values()`** - Get all the values\n- **`.items()`** - Get all key-value pairs as tuples\n- **`.get()`** - Safely get a value (with optional default)\n- **`.update()`** - Merge another dictionary\n- **`.pop()`** - Remove and return a value\n- **`.clear()`** - Remove all items\n\n**Looping through dictionaries:**\n\n```python\nscores = {\"Alice\": 95, \"Bob\": 87, \"Charlie\": 92}\n\n# Loop through keys (default)\nfor name in scores:\n    print(name)\n\n# Loop through values\nfor score in scores.values():\n    print(score)\n\n# Loop through both (most common!)\nfor name, score in scores.items():\n    print(f\"{name}: {score}\")\n```\n\nThese methods make it easy to process, transform, and analyze dictionary data!"
            },
            {
              "type": "THEORY",
              "title": "Essential Dictionary Methods",
              "content": "**Getting views of dictionary contents:**\n\n```python\ndata = {\"a\": 1, \"b\": 2, \"c\": 3}\n\ndata.keys()    # dict_keys(['a', 'b', 'c'])\ndata.values()  # dict_values([1, 2, 3])\ndata.items()   # dict_items([('a', 1), ('b', 2), ('c', 3)])\n```\n\n**Safe access with `.get()` and `.setdefault()`:**\n\n```python\nuser = {\"name\": \"Alice\"}\n\n# get() returns None if key missing (no error)\nuser.get(\"age\")           # None\nuser.get(\"age\", 0)        # 0 (default value)\n\n# setdefault() gets value OR sets it if missing\nuser.setdefault(\"role\", \"member\")  # Adds \"role\": \"member\"\n```\n\n**Modifying dictionaries:**\n\n```python\nbase = {\"a\": 1, \"b\": 2}\nmore = {\"c\": 3, \"d\": 4}\n\n# update() merges dictionaries\nbase.update(more)         # base is now {'a': 1, 'b': 2, 'c': 3, 'd': 4}\n\n# pop() removes and returns value\nvalue = base.pop(\"a\")     # value = 1, base no longer has 'a'\nvalue = base.pop(\"x\", 0)  # value = 0 (default), no error\n\n# clear() removes everything\nbase.clear()              # base is now {}\n```\n\n**Python 3.9+ merge operators:**\n\n```python\ndict1 = {\"a\": 1}\ndict2 = {\"b\": 2}\n\ncombined = dict1 | dict2   # {'a': 1, 'b': 2} (new dict)\ndict1 |= dict2             # dict1 is now {'a': 1, 'b': 2}\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Keys, Values, and Items ===\nKeys: dict_keys(['Alice', 'Bob', 'Charlie'])\nValues: dict_values([95, 87, 92])\nItems: dict_items([('Alice', 95), ('Bob', 87), ('Charlie', 92)])\n\n=== Looping Through Dictionaries ===\n\nLooping through keys:\n- Alice\n- Bob\n- Charlie\n\nLooping through values:\n- 95\n- 87\n- 92\n\nLooping through items (key-value pairs):\n- Alice scored 95\n- Bob scored 87\n- Charlie scored 92\n\n=== get() and setdefault() ===\nAge (missing): None\nAge with default: 0\nAfter setdefault: {'name': 'Alice', 'role': 'member'}\n\n=== update() and pop() ===\nMerged: {'a': 1, 'b': 2, 'c': 3, 'd': 4}\nPopped value: 1\nAfter pop: {'b': 2, 'c': 3, 'd': 4}\n\n=== Practical: Word Counter ===\n{'hello': 2, 'world': 1, 'python': 2, 'is': 1, 'great': 1}\n```",
              "code": "# Dictionary Methods and Operations\n\nprint(\"=== Keys, Values, and Items ===\")\n\nscores = {\"Alice\": 95, \"Bob\": 87, \"Charlie\": 92}\n\nprint(f\"Keys: {scores.keys()}\")\nprint(f\"Values: {scores.values()}\")\nprint(f\"Items: {scores.items()}\")\n\nprint(\"\\n=== Looping Through Dictionaries ===\")\n\nprint(\"\\nLooping through keys:\")\nfor name in scores:\n    print(f\"- {name}\")\n\nprint(\"\\nLooping through values:\")\nfor score in scores.values():\n    print(f\"- {score}\")\n\nprint(\"\\nLooping through items (key-value pairs):\")\nfor name, score in scores.items():\n    print(f\"- {name} scored {score}\")\n\nprint(\"\\n=== get() and setdefault() ===\")\n\nuser = {\"name\": \"Alice\"}\n\n# Safe access with get()\nprint(f\"Age (missing): {user.get('age')}\")\nprint(f\"Age with default: {user.get('age', 0)}\")\n\n# setdefault adds key if missing\nuser.setdefault(\"role\", \"member\")\nprint(f\"After setdefault: {user}\")\n\nprint(\"\\n=== update() and pop() ===\")\n\nbase = {\"a\": 1, \"b\": 2}\nmore = {\"c\": 3, \"d\": 4}\n\n# Merge dictionaries\nbase.update(more)\nprint(f\"Merged: {base}\")\n\n# Remove and return a value\nvalue = base.pop(\"a\")\nprint(f\"Popped value: {value}\")\nprint(f\"After pop: {base}\")\n\nprint(\"\\n=== Practical: Word Counter ===\")\n\nwords = [\"hello\", \"world\", \"hello\", \"python\", \"is\", \"great\", \"python\"]\nword_counts = {}\n\nfor word in words:\n    # If word exists, add 1; if not, start at 0 and add 1\n    word_counts[word] = word_counts.get(word, 0) + 1\n\nprint(word_counts)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Modifying Dictionary While Iterating Over It**\n```python\n# WRONG - RuntimeError: dictionary changed size during iteration\nscores = {\"Alice\": 95, \"Bob\": 60, \"Charlie\": 45}\nfor name, score in scores.items():\n    if score < 70:\n        del scores[name]  # Crashes!\n\n# CORRECT - Create a list of keys to delete, then delete after\nto_remove = [name for name, score in scores.items() if score < 70]\nfor name in to_remove:\n    del scores[name]\n# Or create a new dict with comprehension\nscores = {name: score for name, score in scores.items() if score >= 70}\n```\n\n**2. Confusing pop() with del**\n```python\n# WRONG - Using pop() without storing the return value when you need it\ndata = {\"key\": \"important_value\"}\ndata.pop(\"key\")  # Value is lost if you needed it!\n\n# CORRECT - Store the popped value if you need it\nvalue = data.pop(\"key\")  # Now you have the value\n\n# Also: pop() with missing key without default raises KeyError\ndata.pop(\"missing\")  # KeyError!\ndata.pop(\"missing\", None)  # Returns None, no error\n```\n\n**3. Expecting setdefault() to Update Existing Values**\n```python\n# WRONG - setdefault() doesn't change existing values\nuser = {\"name\": \"Alice\", \"role\": \"user\"}\nuser.setdefault(\"role\", \"admin\")  # role stays \"user\", NOT \"admin\"\n\n# CORRECT - Use direct assignment to update existing values\nuser[\"role\"] = \"admin\"  # Now role is \"admin\"\n\n# setdefault is for: set if missing, otherwise return existing\nuser.setdefault(\"age\", 25)  # Sets age to 25 since it was missing\n```\n\n**4. Forgetting that keys() and values() Return Views, Not Lists**\n```python\n# WRONG - Treating view objects like lists\nkeys = {\"a\": 1, \"b\": 2}.keys()\nkeys[0]  # TypeError: 'dict_keys' object is not subscriptable\n\n# CORRECT - Convert to list if you need indexing\nkeys = list({\"a\": 1, \"b\": 2}.keys())\nprint(keys[0])  # 'a'\n```\n\n**5. Using update() When You Want a New Dict**\n```python\n# WRONG - update() modifies the original dict in-place\noriginal = {\"a\": 1}\nextra = {\"b\": 2}\noriginal.update(extra)\n# original is now {'a': 1, 'b': 2} - modified!\n\n# CORRECT - Use | operator for a new dict (Python 3.9+)\noriginal = {\"a\": 1}\nextra = {\"b\": 2}\ncombined = original | extra  # original unchanged\n# Or use dict unpacking\ncombined = {**original, **extra}\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`.keys()`** returns all keys, **`.values()`** returns all values\n- **`.items()`** returns key-value pairs as tuples - perfect for loops!\n- **Loop through dict** - `for key in dict:` or `for key, value in dict.items():`\n- **`.get(key, default)`** - Safe access that never raises KeyError\n- **`.setdefault(key, default)`** - Get value or set it if missing\n- **`.update(other_dict)`** - Merge another dictionary into this one\n- **`.pop(key)`** - Remove key and return its value\n- **`.clear()`** - Remove all items from dictionary\n- **Python 3.9+**: Use `dict1 | dict2` to merge dictionaries\n- **Common pattern**: `count[key] = count.get(key, 0) + 1` for counting"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-07-lesson-03",
          "title": "Nested Dictionaries and Complex Data",
          "moduleId": "module-07",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Real-world data is rarely flat. Think about a school's data:\n\n- Each **student** has a name, age, and grades\n- Each student has **multiple grades** (math, science, english)\n- The school has **many students**\n\n**Nested dictionaries** let you model this hierarchical structure:\n\n```python\nschool = {\n    \"alice\": {\n        \"age\": 16,\n        \"grades\": {\"math\": 95, \"science\": 88, \"english\": 92}\n    },\n    \"bob\": {\n        \"age\": 17,\n        \"grades\": {\"math\": 78, \"science\": 85, \"english\": 80}\n    }\n}\n\n# Access nested data by chaining keys\nprint(school[\"alice\"][\"grades\"][\"math\"])  # 95\n```\n\n**Common patterns for nested data:**\n\n- **User profiles** - User -> personal info, preferences, history\n- **Product catalogs** - Category -> product -> details, variants\n- **API responses** - Usually deeply nested JSON data\n- **Configuration files** - Sections -> settings -> values\n\nNested structures are powerful but require careful handling!"
            },
            {
              "type": "THEORY",
              "title": "Working with Nested Data",
              "content": "**Accessing nested values:**\n\n```python\nuser = {\n    \"profile\": {\n        \"name\": \"Alice\",\n        \"address\": {\"city\": \"NYC\", \"zip\": \"10001\"}\n    }\n}\n\n# Chain keys to dig deeper\ncity = user[\"profile\"][\"address\"][\"city\"]  # \"NYC\"\n\n# Safe access with get() (avoids KeyError)\ncity = user.get(\"profile\", {}).get(\"address\", {}).get(\"city\", \"Unknown\")\n```\n\n**Modifying nested values:**\n\n```python\n# Update existing nested value\nuser[\"profile\"][\"address\"][\"city\"] = \"LA\"\n\n# Add new nested key\nuser[\"profile\"][\"age\"] = 25\n\n# Add entirely new nested structure\nuser[\"settings\"] = {\"theme\": \"dark\", \"notifications\": True}\n```\n\n**Looping through nested dictionaries:**\n\n```python\nstudents = {\n    \"alice\": {\"math\": 95, \"science\": 88},\n    \"bob\": {\"math\": 78, \"science\": 85}\n}\n\nfor student, grades in students.items():\n    print(f\"{student}:\")\n    for subject, score in grades.items():\n        print(f\"  {subject}: {score}\")\n```\n\n**Lists inside dictionaries:**\n\n```python\nrecipes = {\n    \"pancakes\": {\n        \"ingredients\": [\"flour\", \"eggs\", \"milk\"],\n        \"time\": 20\n    }\n}\n\nfor item in recipes[\"pancakes\"][\"ingredients\"]:\n    print(item)\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Nested Dictionary Structure ===\n{'alice': {'age': 16, 'grades': {'math': 95, 'science': 88}}, 'bob': {'age': 17, 'grades': {'math': 78, 'science': 85}}}\n\n=== Accessing Nested Data ===\nAlice's age: 16\nAlice's math grade: 95\nBob's science grade: 85\n\n=== Looping Through Nested Data ===\n\nalice (age 16):\n  math: 95\n  science: 88\n\nbob (age 17):\n  math: 78\n  science: 85\n\n=== Modifying Nested Data ===\nBefore: {'math': 95, 'science': 88}\nAfter: {'math': 95, 'science': 88, 'english': 92}\n\n=== Complex Real-World Example ===\n\nAPI Response Data:\n  User: alice_dev\n  Name: Alice Johnson\n  Repos:\n    - python-utils (Python) - 45 stars\n    - web-app (JavaScript) - 12 stars\n    - data-analysis (Python) - 78 stars\n```",
              "code": "# Nested Dictionaries and Complex Data\n\nprint(\"=== Nested Dictionary Structure ===\")\n\nstudents = {\n    \"alice\": {\n        \"age\": 16,\n        \"grades\": {\"math\": 95, \"science\": 88}\n    },\n    \"bob\": {\n        \"age\": 17,\n        \"grades\": {\"math\": 78, \"science\": 85}\n    }\n}\n\nprint(students)\n\nprint(\"\\n=== Accessing Nested Data ===\")\n\n# Chain keys to access nested values\nalice_age = students[\"alice\"][\"age\"]\nalice_math = students[\"alice\"][\"grades\"][\"math\"]\nbob_science = students[\"bob\"][\"grades\"][\"science\"]\n\nprint(f\"Alice's age: {alice_age}\")\nprint(f\"Alice's math grade: {alice_math}\")\nprint(f\"Bob's science grade: {bob_science}\")\n\nprint(\"\\n=== Looping Through Nested Data ===\")\n\nfor student_name, student_data in students.items():\n    print(f\"\\n{student_name} (age {student_data['age']}):\")\n    for subject, score in student_data[\"grades\"].items():\n        print(f\"  {subject}: {score}\")\n\nprint(\"\\n=== Modifying Nested Data ===\")\n\n# Add a new grade for Alice\nprint(f\"Before: {students['alice']['grades']}\")\nstudents[\"alice\"][\"grades\"][\"english\"] = 92\nprint(f\"After: {students['alice']['grades']}\")\n\nprint(\"\\n=== Complex Real-World Example ===\")\n\n# Simulating an API response (like from GitHub)\napi_response = {\n    \"user\": {\n        \"username\": \"alice_dev\",\n        \"name\": \"Alice Johnson\",\n        \"followers\": 1250\n    },\n    \"repos\": [\n        {\"name\": \"python-utils\", \"language\": \"Python\", \"stars\": 45},\n        {\"name\": \"web-app\", \"language\": \"JavaScript\", \"stars\": 12},\n        {\"name\": \"data-analysis\", \"language\": \"Python\", \"stars\": 78}\n    ]\n}\n\n# Extract and display data\nprint(\"\\nAPI Response Data:\")\nprint(f\"  User: {api_response['user']['username']}\")\nprint(f\"  Name: {api_response['user']['name']}\")\nprint(\"  Repos:\")\nfor repo in api_response[\"repos\"]:\n    print(f\"    - {repo['name']} ({repo['language']}) - {repo['stars']} stars\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. KeyError When Accessing Missing Nested Keys**\n```python\n# WRONG - Any missing key in the chain causes KeyError\ndata = {\"user\": {\"name\": \"Alice\"}}\nprint(data[\"user\"][\"email\"][\"primary\"])  # KeyError: 'email'\n\n# CORRECT - Chain get() calls with empty dict defaults\nprint(data.get(\"user\", {}).get(\"email\", {}).get(\"primary\", \"N/A\"))\n# Returns \"N/A\" without crashing\n```\n\n**2. Accidentally Creating Shallow Copies**\n```python\n# WRONG - Assignment creates a reference, not a copy!\noriginal = {\"user\": {\"name\": \"Alice\", \"scores\": [90, 85]}}\ncopy = original  # Same object!\ncopy[\"user\"][\"name\"] = \"Bob\"\nprint(original[\"user\"][\"name\"])  # \"Bob\" - original changed!\n\n# CORRECT - Use copy.deepcopy() for nested structures\nimport copy\noriginal = {\"user\": {\"name\": \"Alice\", \"scores\": [90, 85]}}\ndeep_copy = copy.deepcopy(original)\ndeep_copy[\"user\"][\"name\"] = \"Bob\"\nprint(original[\"user\"][\"name\"])  # \"Alice\" - original unchanged\n```\n\n**3. Forgetting Nested Key May Not Exist When Setting**\n```python\n# WRONG - Can't set nested key if parent doesn't exist\ndata = {}\ndata[\"level1\"][\"level2\"] = \"value\"  # KeyError: 'level1'\n\n# CORRECT - Create parent keys first\ndata = {}\ndata[\"level1\"] = {}  # Create the parent dict first\ndata[\"level1\"][\"level2\"] = \"value\"\n# Or use setdefault()\ndata = {}\ndata.setdefault(\"level1\", {})[\"level2\"] = \"value\"\n```\n\n**4. Modifying Nested Dict While Iterating Over Parent**\n```python\n# WRONG - Deleting while iterating parent\nusers = {\"alice\": {\"active\": True}, \"bob\": {\"active\": False}}\nfor name, data in users.items():\n    if not data[\"active\"]:\n        del users[name]  # RuntimeError!\n\n# CORRECT - Collect keys first, then delete\nto_remove = [n for n, d in users.items() if not d[\"active\"]]\nfor name in to_remove:\n    del users[name]\n```\n\n**5. Expecting .get() with {} Default to Be Reusable**\n```python\n# WRONG - Empty dict {} is created fresh each time (inefficient)\nfor _ in range(1000):\n    value = data.get(\"missing\", {}).get(\"nested\")  # 1000 empty dicts!\n\n# CORRECT - For repeated access, check once and store\ninner = data.get(\"key\", {})\nif inner:  # Only access if inner exists\n    value = inner.get(\"nested\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Nested dictionaries** store dictionaries inside dictionaries\n- **Access nested values** by chaining keys: `data[\"outer\"][\"inner\"][\"deep\"]`\n- **Safe nested access**: `data.get(\"key\", {}).get(\"nested\", default)`\n- **Modify nested values**: `data[\"outer\"][\"inner\"] = new_value`\n- **Loop through nested data** with nested for loops\n- **Lists in dictionaries** are common: `data[\"items\"]` can be a list\n- **API responses** are typically deeply nested JSON structures\n- **Pattern**: Check if keys exist before accessing deeply nested data\n- **Keep it manageable** - If nesting gets too deep, consider restructuring"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-07-lesson-04",
          "title": "Sets - Unique Collections",
          "moduleId": "module-07",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Think about a guest list for a party. You don't want the same person listed twice - each guest should appear exactly once. That's what a **set** does!\n\n**Sets are collections where every item is unique:**\n\n```python\n# Lists can have duplicates\nguest_list = [\"Alice\", \"Bob\", \"Alice\", \"Charlie\", \"Bob\"]\nprint(guest_list)  # ['Alice', 'Bob', 'Alice', 'Charlie', 'Bob']\n\n# Sets automatically remove duplicates!\nguests = {\"Alice\", \"Bob\", \"Alice\", \"Charlie\", \"Bob\"}\nprint(guests)  # {'Alice', 'Bob', 'Charlie'} - only 3 unique names\n```\n\n**Key characteristics of sets:**\n\n- **Unique items only** - Duplicates are automatically removed\n- **Unordered** - No index positions (can't do `my_set[0]`)\n- **Fast membership testing** - `\"Alice\" in guests` is very fast\n- **Set operations** - Union, intersection, difference (like math sets!)\n\n**When to use sets:**\n\n- Remove duplicates from a list\n- Track unique items (visited pages, seen IDs, etc.)\n- Fast membership checking\n- Set operations (find common items, differences, etc.)"
            },
            {
              "type": "THEORY",
              "title": "Creating and Using Sets",
              "content": "**Creating sets:**\n\n```python\n# Using curly braces (like dict, but no colons)\nfruits = {\"apple\", \"banana\", \"cherry\"}\n\n# Empty set (NOT {} - that's an empty dict!)\nempty_set = set()\n\n# From a list (removes duplicates)\nnumbers = set([1, 2, 2, 3, 3, 3])  # {1, 2, 3}\n\n# From a string (each character becomes an item)\nletters = set(\"hello\")  # {'h', 'e', 'l', 'o'} - only 4 unique\n```\n\n**Adding and removing items:**\n\n```python\nfruits = {\"apple\", \"banana\"}\n\nfruits.add(\"cherry\")       # Add one item\nfruits.update([\"date\", \"elderberry\"])  # Add multiple\n\nfruits.remove(\"banana\")    # Remove (raises error if missing)\nfruits.discard(\"xyz\")      # Remove (no error if missing)\nitem = fruits.pop()        # Remove and return arbitrary item\nfruits.clear()             # Remove all items\n```\n\n**Membership testing:**\n\n```python\ncolors = {\"red\", \"green\", \"blue\"}\n\nprint(\"red\" in colors)     # True (very fast!)\nprint(\"yellow\" in colors)  # False\nprint(len(colors))         # 3\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Creating Sets ===\nFruits: {'cherry', 'banana', 'apple'}\nFrom list with duplicates: {1, 2, 3}\nUnique letters in 'mississippi': {'m', 'i', 's', 'p'}\n\n=== Adding and Removing ===\nAfter add: {'cherry', 'banana', 'apple', 'date'}\nAfter remove: {'cherry', 'apple', 'date'}\n\n=== Set Operations ===\nSet A: {1, 2, 3, 4, 5}\nSet B: {4, 5, 6, 7, 8}\n\nUnion (A | B): {1, 2, 3, 4, 5, 6, 7, 8}\nIntersection (A & B): {4, 5}\nDifference (A - B): {1, 2, 3}\nSymmetric Difference (A ^ B): {1, 2, 3, 6, 7, 8}\n\n=== Practical: Remove Duplicates ===\nWith duplicates: ['apple', 'banana', 'apple', 'cherry', 'banana', 'date']\nUnique items: ['apple', 'banana', 'cherry', 'date']\n\n=== Practical: Find Common Items ===\nAlice's skills: {'Python', 'SQL', 'JavaScript'}\nBob's skills: {'Python', 'Java', 'SQL'}\nCommon skills: {'Python', 'SQL'}\nAll skills: {'Python', 'SQL', 'JavaScript', 'Java'}\n```",
              "code": "# Sets - Unique Collections\n\nprint(\"=== Creating Sets ===\")\n\n# Using curly braces\nfruits = {\"apple\", \"banana\", \"cherry\"}\nprint(f\"Fruits: {fruits}\")\n\n# From a list (removes duplicates)\nnumbers = set([1, 2, 2, 3, 3, 3])\nprint(f\"From list with duplicates: {numbers}\")\n\n# From a string\nletters = set(\"mississippi\")\nprint(f\"Unique letters in 'mississippi': {letters}\")\n\nprint(\"\\n=== Adding and Removing ===\")\n\nfruits = {\"apple\", \"banana\", \"cherry\"}\n\n# Add one item\nfruits.add(\"date\")\nprint(f\"After add: {fruits}\")\n\n# Remove an item\nfruits.remove(\"banana\")\nprint(f\"After remove: {fruits}\")\n\nprint(\"\\n=== Set Operations ===\")\n\na = {1, 2, 3, 4, 5}\nb = {4, 5, 6, 7, 8}\n\nprint(f\"Set A: {a}\")\nprint(f\"Set B: {b}\")\n\n# Union - all items from both sets\nprint(f\"\\nUnion (A | B): {a | b}\")\n\n# Intersection - items in BOTH sets\nprint(f\"Intersection (A & B): {a & b}\")\n\n# Difference - items in A but not in B\nprint(f\"Difference (A - B): {a - b}\")\n\n# Symmetric difference - items in either, but not both\nprint(f\"Symmetric Difference (A ^ B): {a ^ b}\")\n\nprint(\"\\n=== Practical: Remove Duplicates ===\")\n\nwith_duplicates = [\"apple\", \"banana\", \"apple\", \"cherry\", \"banana\", \"date\"]\nunique_items = list(set(with_duplicates))\n\nprint(f\"With duplicates: {with_duplicates}\")\nprint(f\"Unique items: {sorted(unique_items)}\")\n\nprint(\"\\n=== Practical: Find Common Items ===\")\n\nalice_skills = {\"Python\", \"JavaScript\", \"SQL\"}\nbob_skills = {\"Python\", \"Java\", \"SQL\"}\n\nprint(f\"Alice's skills: {alice_skills}\")\nprint(f\"Bob's skills: {bob_skills}\")\nprint(f\"Common skills: {alice_skills & bob_skills}\")\nprint(f\"All skills: {alice_skills | bob_skills}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using {} for Empty Set (Creates Empty Dict Instead!)**\n```python\n# WRONG - This creates an empty DICTIONARY, not a set!\nempty = {}\nprint(type(empty))  # <class 'dict'>\n\n# CORRECT - Use set() for empty set\nempty = set()\nprint(type(empty))  # <class 'set'>\n```\n\n**2. Using remove() on Missing Item Raises KeyError**\n```python\n# WRONG - remove() crashes if item not found\ncolors = {\"red\", \"blue\"}\ncolors.remove(\"green\")  # KeyError: 'green'\n\n# CORRECT - Use discard() which doesn't raise error\ncolors.discard(\"green\")  # No error, just does nothing\n# Or check first\nif \"green\" in colors:\n    colors.remove(\"green\")\n```\n\n**3. Trying to Add Mutable Objects (Lists) to Sets**\n```python\n# WRONG - Lists can't be set items (unhashable)\nmy_set = set()\nmy_set.add([1, 2, 3])  # TypeError: unhashable type: 'list'\n\n# CORRECT - Use tuples instead (immutable)\nmy_set.add((1, 2, 3))  # Works!\nmy_set.add(\"string\")   # Strings work too\n```\n\n**4. Expecting Order to Be Preserved**\n```python\n# WRONG - Assuming sets maintain insertion order\nnumbers = {3, 1, 2}\nprint(list(numbers))  # Could be [1, 2, 3] or any order!\n\n# CORRECT - Sort if order matters\nnumbers = {3, 1, 2}\nprint(sorted(numbers))  # [1, 2, 3] - guaranteed sorted\n```\n\n**5. Converting Set to List Loses Order of Original List**\n```python\n# WRONG - set() removes duplicates but also loses order\noriginal = [\"banana\", \"apple\", \"cherry\", \"apple\"]\nunique = list(set(original))  # Order is NOT preserved!\n\n# CORRECT - Use dict.fromkeys() to preserve order (Python 3.7+)\noriginal = [\"banana\", \"apple\", \"cherry\", \"apple\"]\nunique = list(dict.fromkeys(original))\nprint(unique)  # ['banana', 'apple', 'cherry'] - order preserved!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Sets contain only unique items** - Duplicates are automatically removed\n- **Create with curly braces**: `{\"a\", \"b\", \"c\"}` or `set([list])`\n- **Empty set**: `set()` (NOT `{}` - that's an empty dict!)\n- **`.add(item)`** adds one item, **`.update([items])`** adds multiple\n- **`.remove(item)`** raises error if missing, **`.discard(item)`** doesn't\n- **Membership test**: `item in my_set` is very fast!\n- **Union**: `a | b` - All items from both sets\n- **Intersection**: `a & b` - Items in both sets\n- **Difference**: `a - b` - Items in a but not in b\n- **Remove duplicates from list**: `unique = list(set(my_list))`"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-07-lesson-05",
          "title": "Dictionary and Set Comprehensions",
          "moduleId": "module-07",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "You've seen list comprehensions - those powerful one-liners that create lists. Python has the same magic for dictionaries and sets!\n\n**Dictionary Comprehension** - Create dictionaries in one line:\n\n```python\n# Traditional way (4 lines)\nsquares = {}\nfor x in range(1, 6):\n    squares[x] = x ** 2\n\n# Comprehension way (1 line!)\nsquares = {x: x ** 2 for x in range(1, 6)}\n# {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}\n```\n\n**Set Comprehension** - Create sets in one line:\n\n```python\n# Traditional way\nunique_lengths = set()\nfor word in [\"hello\", \"world\", \"hi\", \"python\"]:\n    unique_lengths.add(len(word))\n\n# Comprehension way\nunique_lengths = {len(word) for word in [\"hello\", \"world\", \"hi\", \"python\"]}\n# {5, 2, 6}\n```\n\n**The syntax pattern:**\n\n- **Dict**: `{key_expr: value_expr for item in iterable}`\n- **Set**: `{expr for item in iterable}`\n\nComprehensions are not just shorter - they're often faster too!"
            },
            {
              "type": "THEORY",
              "title": "Advanced Comprehension Patterns",
              "content": "**Adding conditions (filtering):**\n\n```python\n# Only even numbers\nevens = {x: x ** 2 for x in range(10) if x % 2 == 0}\n# {0: 0, 2: 4, 4: 16, 6: 36, 8: 64}\n\n# Words longer than 3 characters\nlong_words = {word.upper() for word in words if len(word) > 3}\n```\n\n**Transforming data:**\n\n```python\n# Swap keys and values\noriginal = {\"a\": 1, \"b\": 2, \"c\": 3}\nswapped = {v: k for k, v in original.items()}\n# {1: 'a', 2: 'b', 3: 'c'}\n\n# Create lookup from list\nnames = [\"Alice\", \"Bob\", \"Charlie\"]\nname_lengths = {name: len(name) for name in names}\n# {'Alice': 5, 'Bob': 3, 'Charlie': 7}\n```\n\n**From two lists to dictionary:**\n\n```python\nkeys = [\"name\", \"age\", \"city\"]\nvalues = [\"Alice\", 30, \"NYC\"]\n\n# Using zip() with comprehension\nperson = {k: v for k, v in zip(keys, values)}\n# {'name': 'Alice', 'age': 30, 'city': 'NYC'}\n\n# Simpler: just use dict()\nperson = dict(zip(keys, values))  # Same result!\n```\n\n**Nested comprehensions (use sparingly!):**\n\n```python\n# Multiplication table\ntable = {i: {j: i * j for j in range(1, 4)} for i in range(1, 4)}\n# {1: {1: 1, 2: 2, 3: 3}, 2: {1: 2, 2: 4, 3: 6}, ...}\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n=== Basic Dictionary Comprehension ===\nSquares: {1: 1, 2: 4, 3: 9, 4: 16, 5: 25}\nWord lengths: {'apple': 5, 'banana': 6, 'cherry': 6}\n\n=== Basic Set Comprehension ===\nUnique lengths: {5, 6}\nEven squares: {0, 64, 4, 36, 16}\n\n=== With Conditions ===\nPassing students: {'Alice': 85, 'Charlie': 78}\nLong words uppercase: {'BANANA', 'CHERRY', 'APPLE'}\n\n=== Transforming Data ===\nSwapped: {1: 'a', 2: 'b', 3: 'c'}\nUppercase keys: {'ALICE': 85, 'BOB': 62, 'CHARLIE': 78}\n\n=== Practical: From Lists to Dict ===\nPerson: {'name': 'Alice', 'age': 30, 'city': 'NYC'}\n\n=== Practical: Word Frequency ===\nWord counts: {'hello': 2, 'world': 1, 'python': 2}\n```",
              "code": "# Dictionary and Set Comprehensions\n\nprint(\"=== Basic Dictionary Comprehension ===\")\n\n# Create a dictionary of squares\nsquares = {x: x ** 2 for x in range(1, 6)}\nprint(f\"Squares: {squares}\")\n\n# Create a dictionary of word lengths\nwords = [\"apple\", \"banana\", \"cherry\"]\nword_lengths = {word: len(word) for word in words}\nprint(f\"Word lengths: {word_lengths}\")\n\nprint(\"\\n=== Basic Set Comprehension ===\")\n\n# Unique word lengths\nwords = [\"apple\", \"banana\", \"cherry\"]\nunique_lengths = {len(word) for word in words}\nprint(f\"Unique lengths: {unique_lengths}\")\n\n# Set of even squares\neven_squares = {x ** 2 for x in range(10) if x % 2 == 0}\nprint(f\"Even squares: {even_squares}\")\n\nprint(\"\\n=== With Conditions ===\")\n\n# Only passing grades (75+)\nscores = {\"Alice\": 85, \"Bob\": 62, \"Charlie\": 78}\npassing = {name: score for name, score in scores.items() if score >= 75}\nprint(f\"Passing students: {passing}\")\n\n# Long words only, converted to uppercase\nwords = [\"hi\", \"apple\", \"banana\", \"ok\", \"cherry\"]\nlong_upper = {word.upper() for word in words if len(word) > 3}\nprint(f\"Long words uppercase: {long_upper}\")\n\nprint(\"\\n=== Transforming Data ===\")\n\n# Swap keys and values\noriginal = {\"a\": 1, \"b\": 2, \"c\": 3}\nswapped = {v: k for k, v in original.items()}\nprint(f\"Swapped: {swapped}\")\n\n# Transform keys to uppercase\ngrades = {\"Alice\": 85, \"Bob\": 62, \"Charlie\": 78}\nupper_grades = {name.upper(): score for name, score in grades.items()}\nprint(f\"Uppercase keys: {upper_grades}\")\n\nprint(\"\\n=== Practical: From Lists to Dict ===\")\n\nkeys = [\"name\", \"age\", \"city\"]\nvalues = [\"Alice\", 30, \"NYC\"]\n\n# Using comprehension with zip\nperson = {k: v for k, v in zip(keys, values)}\nprint(f\"Person: {person}\")\n\nprint(\"\\n=== Practical: Word Frequency ===\")\n\ntext = \"hello world hello python world python hello\"\nwords = text.split()\n\n# Count word occurrences\nword_counts = {word: words.count(word) for word in set(words)}\nprint(f\"Word counts: {word_counts}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Swapping Dict with Duplicate Values Loses Data**\n```python\n# WRONG - If values aren't unique, you lose data!\ngrades = {\"Alice\": 90, \"Bob\": 90, \"Charlie\": 85}\nswapped = {v: k for k, v in grades.items()}\nprint(swapped)  # {90: 'Bob', 85: 'Charlie'} - Alice is LOST!\n\n# CORRECT - Group by value if duplicates exist\nfrom collections import defaultdict\nby_grade = defaultdict(list)\nfor name, grade in grades.items():\n    by_grade[grade].append(name)\nprint(dict(by_grade))  # {90: ['Alice', 'Bob'], 85: ['Charlie']}\n```\n\n**2. Using Expensive Operations Inside Comprehensions**\n```python\n# WRONG - words.count() runs for EVERY word (O(n^2))!\ntext = \"hello world hello python world python hello\"\nwords = text.split()\ncounts = {word: words.count(word) for word in set(words)}  # Slow!\n\n# CORRECT - Use Counter for counting (O(n))\nfrom collections import Counter\ncounts = Counter(words)  # Much faster!\nprint(dict(counts))  # {'hello': 3, 'world': 2, 'python': 2}\n```\n\n**3. Confusing Dict and Set Comprehension Syntax**\n```python\n# WRONG - Missing colon creates SET, not dict!\nresult = {x for x in range(5)}  # This is a SET: {0, 1, 2, 3, 4}\n\n# CORRECT - Use colon for key:value pairs\nresult = {x: x**2 for x in range(5)}  # This is a DICT\nprint(result)  # {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}\n```\n\n**4. Nested Comprehensions That Are Hard to Read**\n```python\n# WRONG - This is too complex to understand!\nresult = {outer: {inner: outer*inner for inner in range(1,4)} \n          for outer in range(1,4) if outer != 2}\n\n# CORRECT - Use regular loops for complex logic\nresult = {}\nfor outer in range(1, 4):\n    if outer != 2:\n        result[outer] = {}\n        for inner in range(1, 4):\n            result[outer][inner] = outer * inner\n```\n\n**5. Expecting Comprehension to Modify Original Dict**\n```python\n# WRONG - Comprehensions create NEW dicts, don't modify!\noriginal = {\"a\": 1, \"b\": 2, \"c\": 3}\nfiltered = {k: v for k, v in original.items() if v > 1}\n# original is unchanged! filtered is a new dict\n\n# CORRECT - Assign back if you want to replace\noriginal = {k: v for k, v in original.items() if v > 1}\n# Now original only has items where value > 1\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Dict comprehension**: `{key: value for item in iterable}`\n- **Set comprehension**: `{expr for item in iterable}`\n- **Add conditions**: `{k: v for item in list if condition}`\n- **Use `.items()`** to iterate over dict key-value pairs\n- **`zip(keys, values)`** combines two lists into pairs\n- **Swap dict**: `{v: k for k, v in dict.items()}`\n- **Keep it readable** - If comprehension gets complex, use a regular loop\n- **Comprehensions are fast** - Often faster than equivalent loops\n- **Set comprehension auto-deduplicates** - Great for unique values\n- **Common pattern**: Transform list to lookup dict `{item.id: item for item in items}`"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-07-lesson-06",
          "title": "Mini-Project: Contact Manager System",
          "moduleId": "module-07",
          "order": 6,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Now it's time to put everything together! We'll build a **Contact Manager** - a practical application that uses dictionaries, sets, and functions to manage a list of contacts.\n\n**What we'll build:**\n\n- Store contacts with names, phone numbers, emails, and tags\n- Add, update, and delete contacts\n- Search contacts by name or tag\n- List all contacts or filter by criteria\n- Track unique tags across all contacts\n\n**Data structure design:**\n\n```python\n# Each contact is a dictionary\ncontact = {\n    \"name\": \"Alice Smith\",\n    \"phone\": \"555-1234\",\n    \"email\": \"alice@example.com\",\n    \"tags\": {\"friend\", \"work\"}\n}\n\n# All contacts stored in a dictionary, keyed by name\ncontacts = {\n    \"alice smith\": {...},\n    \"bob jones\": {...}\n}\n```\n\n**Why this structure?**\n\n- Dictionary keys (lowercase names) allow fast lookup\n- Nested dictionaries store all contact details\n- Sets for tags ensure no duplicate tags per contact\n- Functions keep the code organized and reusable"
            },
            {
              "type": "THEORY",
              "title": "Building the Contact Manager",
              "content": "**Core functions we need:**\n\n1. **`add_contact()`** - Add a new contact\n2. **`get_contact()`** - Look up a contact by name\n3. **`update_contact()`** - Modify contact details\n4. **`delete_contact()`** - Remove a contact\n5. **`search_contacts()`** - Find contacts by name pattern\n6. **`filter_by_tag()`** - Find contacts with a specific tag\n7. **`list_all_tags()`** - Get all unique tags\n8. **`display_contact()`** - Format contact for display\n\n**Design principles:**\n\n```python\n# Use lowercase keys for case-insensitive lookup\ndef normalize_name(name):\n    return name.lower().strip()\n\n# Return meaningful values (not just print)\ndef get_contact(contacts, name):\n    key = normalize_name(name)\n    return contacts.get(key)  # Returns None if not found\n\n# Handle edge cases\ndef add_contact(contacts, name, phone, email, tags=None):\n    if not name or not phone:\n        return False  # Invalid input\n    key = normalize_name(name)\n    if key in contacts:\n        return False  # Already exists\n    # ... add the contact\n    return True\n```\n\nThis structure makes the code testable and maintainable!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Contact Manager System",
              "content": "**Expected Output:**\n```\n=== Contact Manager System ===\n\n--- Adding Contacts ---\nAdded: Alice Smith\nAdded: Bob Jones\nAdded: Charlie Brown\nAlice Smith already exists!\n\n--- Viewing Contacts ---\n\nAll Contacts:\n  1. Alice Smith\n     Phone: 555-1234\n     Email: alice@example.com\n     Tags: friend, work\n  2. Bob Jones\n     Phone: 555-5678\n     Email: bob@example.com\n     Tags: family\n  3. Charlie Brown\n     Phone: 555-9999\n     Email: charlie@example.com\n     Tags: friend, school\n\n--- Searching ---\nContacts matching 'ali': ['Alice Smith']\n\nContacts with tag 'friend':\n  - Alice Smith\n  - Charlie Brown\n\n--- All Tags ---\nUnique tags: family, friend, school, work\n\n--- Updating Contact ---\nUpdated Alice Smith's phone to 555-4321\n\n--- Contact Details ---\nAlice Smith\n  Phone: 555-4321\n  Email: alice@example.com\n  Tags: friend, work\n```",
              "code": "# Contact Manager System\n# A practical application using dictionaries, sets, and functions\n\n# ============ HELPER FUNCTIONS ============\n\ndef normalize_name(name):\n    \"\"\"Convert name to lowercase for consistent lookup.\"\"\"\n    return name.lower().strip()\n\ndef display_contact(contact, indent=2):\n    \"\"\"Format a contact for display.\"\"\"\n    spaces = \" \" * indent\n    tags_str = \", \".join(sorted(contact[\"tags\"])) if contact[\"tags\"] else \"none\"\n    print(f\"{spaces}Phone: {contact['phone']}\")\n    print(f\"{spaces}Email: {contact['email']}\")\n    print(f\"{spaces}Tags: {tags_str}\")\n\n# ============ CORE FUNCTIONS ============\n\ndef add_contact(contacts, name, phone, email, tags=None):\n    \"\"\"Add a new contact. Returns True if successful.\"\"\"\n    key = normalize_name(name)\n    if key in contacts:\n        return False  # Already exists\n    \n    contacts[key] = {\n        \"name\": name,  # Keep original case\n        \"phone\": phone,\n        \"email\": email,\n        \"tags\": set(tags) if tags else set()\n    }\n    return True\n\ndef get_contact(contacts, name):\n    \"\"\"Get a contact by name. Returns None if not found.\"\"\"\n    key = normalize_name(name)\n    return contacts.get(key)\n\ndef update_contact(contacts, name, field, value):\n    \"\"\"Update a contact field. Returns True if successful.\"\"\"\n    contact = get_contact(contacts, name)\n    if not contact:\n        return False\n    \n    if field == \"tags\":\n        contact[\"tags\"] = set(value) if isinstance(value, list) else {value}\n    else:\n        contact[field] = value\n    return True\n\ndef search_contacts(contacts, query):\n    \"\"\"Find contacts whose name contains the query.\"\"\"\n    query = query.lower()\n    return [c[\"name\"] for c in contacts.values() if query in c[\"name\"].lower()]\n\ndef filter_by_tag(contacts, tag):\n    \"\"\"Find all contacts with a specific tag.\"\"\"\n    return [c[\"name\"] for c in contacts.values() if tag in c[\"tags\"]]\n\ndef get_all_tags(contacts):\n    \"\"\"Get all unique tags across all contacts.\"\"\"\n    all_tags = set()\n    for contact in contacts.values():\n        all_tags.update(contact[\"tags\"])\n    return all_tags\n\n# ============ DEMO ============\n\nprint(\"=== Contact Manager System ===\")\n\n# Initialize empty contacts dictionary\ncontacts = {}\n\nprint(\"\\n--- Adding Contacts ---\")\nif add_contact(contacts, \"Alice Smith\", \"555-1234\", \"alice@example.com\", [\"friend\", \"work\"]):\n    print(\"Added: Alice Smith\")\nif add_contact(contacts, \"Bob Jones\", \"555-5678\", \"bob@example.com\", [\"family\"]):\n    print(\"Added: Bob Jones\")\nif add_contact(contacts, \"Charlie Brown\", \"555-9999\", \"charlie@example.com\", [\"friend\", \"school\"]):\n    print(\"Added: Charlie Brown\")\nif not add_contact(contacts, \"Alice Smith\", \"555-0000\", \"alice2@example.com\"):\n    print(\"Alice Smith already exists!\")\n\nprint(\"\\n--- Viewing Contacts ---\")\nprint(\"\\nAll Contacts:\")\nfor i, contact in enumerate(contacts.values(), 1):\n    print(f\"  {i}. {contact['name']}\")\n    display_contact(contact, indent=5)\n\nprint(\"\\n--- Searching ---\")\nresults = search_contacts(contacts, \"ali\")\nprint(f\"Contacts matching 'ali': {results}\")\n\nprint(\"\\nContacts with tag 'friend':\")\nfor name in filter_by_tag(contacts, \"friend\"):\n    print(f\"  - {name}\")\n\nprint(\"\\n--- All Tags ---\")\nall_tags = get_all_tags(contacts)\nprint(f\"Unique tags: {', '.join(sorted(all_tags))}\")\n\nprint(\"\\n--- Updating Contact ---\")\nif update_contact(contacts, \"Alice Smith\", \"phone\", \"555-4321\"):\n    print(\"Updated Alice Smith's phone to 555-4321\")\n\nprint(\"\\n--- Contact Details ---\")\nalice = get_contact(contacts, \"alice smith\")  # Case insensitive!\nif alice:\n    print(alice[\"name\"])\n    display_contact(alice)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Normalize Keys Consistently**\n```python\n# WRONG - Inconsistent key normalization\ncontacts = {}\ncontacts[\"Alice\"] = {\"phone\": \"555-1234\"}\nprint(contacts.get(\"alice\"))  # None! Keys don't match\n\n# CORRECT - Always normalize keys the same way\ndef normalize(name):\n    return name.lower().strip()\n\ncontacts = {}\ncontacts[normalize(\"Alice\")] = {\"phone\": \"555-1234\"}\nprint(contacts.get(normalize(\"alice\")))  # Works!\n```\n\n**2. Modifying Data While Looking It Up**\n```python\n# WRONG - get() returns a reference, changes affect the dict!\ncontacts = {\"alice\": {\"phone\": \"555-1234\", \"tags\": set()}}\ndata = contacts.get(\"alice\")\ndata[\"tags\"].add(\"friend\")  # Modifies the original dict!\n\n# CORRECT - Make a copy if you need to modify without affecting original\nimport copy\ndata = copy.deepcopy(contacts.get(\"alice\"))\ndata[\"tags\"].add(\"friend\")  # Original unchanged\n```\n\n**3. Not Validating Input Before Adding to Dict**\n```python\n# WRONG - No validation leads to bad data\ndef add_contact(contacts, name, phone):\n    contacts[name.lower()] = {\"name\": name, \"phone\": phone}\n\nadd_contact(contacts, \"\", \"555-1234\")  # Empty name added!\nadd_contact(contacts, \"Bob\", \"\")       # Empty phone added!\n\n# CORRECT - Validate before adding\ndef add_contact(contacts, name, phone):\n    if not name or not name.strip():\n        return False\n    if not phone:\n        return False\n    contacts[name.lower().strip()] = {\"name\": name, \"phone\": phone}\n    return True\n```\n\n**4. Returning None When False Would Be Clearer**\n```python\n# WRONG - Ambiguous return values\ndef find_contact(contacts, name):\n    return contacts.get(name.lower())  # Returns None if not found\n\n# But None could mean \"not found\" OR \"contact has no data\"\n\n# CORRECT - Be explicit about what's happening\ndef find_contact(contacts, name):\n    key = name.lower()\n    if key not in contacts:\n        return None  # Explicitly not found\n    return contacts[key]  # Return the actual data\n```\n\n**5. Not Handling Case Where Data Structure Changes**\n```python\n# WRONG - Assuming structure never changes\ndef get_email(contacts, name):\n    return contacts[name.lower()][\"email\"]  # KeyError if missing!\n\n# CORRECT - Use get() with defaults at each level\ndef get_email(contacts, name):\n    contact = contacts.get(name.lower(), {})\n    return contact.get(\"email\", \"No email on file\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Dictionaries are perfect for lookups** - Store contacts by normalized name for fast access\n- **Nested dictionaries** hold complex data - Each contact has name, phone, email, tags\n- **Sets for unique values** - Tags are stored as sets (no duplicates, fast membership)\n- **Functions organize code** - Each operation is a separate, reusable function\n- **Normalize keys** - Use lowercase for case-insensitive lookup\n- **Return values, not prints** - Functions return data; callers decide what to display\n- **Handle edge cases** - What if contact doesn't exist? What if name is empty?\n- **Use `.get()` for safety** - Avoid KeyError when contact might not exist\n- **Comprehensions simplify** - `[c[\"name\"] for c in contacts.values() if ...]`\n- **This pattern scales** - Same approach works for inventory, users, products, etc."
            }
          ],
          "challenges": []
        }
      ]
    },
    {
      "id": "module-08",
      "title": "Exception Handling",
      "description": "Handling errors gracefully",
      "difficulty": "intermediate",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-08-lesson-01",
          "title": "Introduction to Exceptions and Error Handling",
          "moduleId": "module-08",
          "order": 1,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Catching a Falling Vase",
              "content": "Imagine you're juggling expensive vases. Without preparation, if you drop one, it SHATTERS on the floor and the show ends. But what if you placed soft pillows on the floor? The vase might still fall (error happens), but instead of shattering (program crash), it lands safely on the pillow (error is caught and handled), and you can keep juggling (program continues).\n\nThis is **error handling**. Errors WILL happen (users type wrong input, files don't exist, networks fail). The question is: does your program crash spectacularly, or does it catch the error gracefully and continue?\n\n**Real-world scenario:** You're running an ATM program. A user types 'abc' instead of a number for withdrawal amount. Without error handling, the ATM crashes and displays a cryptic error. WITH error handling, it shows \"Please enter a valid number\" and lets them try again. Which would you prefer?"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: The Crash vs. The Catch",
              "content": "The try block contains code that might fail. If an error occurs, instead of crashing, Python jumps to the matching except block and runs that code instead. The program continues after the except block!",
              "code": "# WITHOUT ERROR HANDLING - Program crashes!\nprint(\"=== Without Error Handling ===\")\nprint(\"Enter your age:\")\n# If user types 'twenty' instead of 20, this crashes:\n# age = int(input())  # Commented to prevent crash in example\n# print(f\"You are {age} years old\")\nprint(\"Program would crash here if user typed 'twenty'\\n\")\n\n# WITH ERROR HANDLING - Program handles it gracefully!\nprint(\"=== With Error Handling ===\")\nprint(\"Enter your age:\")\n\ntry:\n    # This is the \"risky\" code that might fail\n    age_input = \"twenty\"  # Simulating user typing 'twenty'\n    age = int(age_input)  # This will cause an error!\n    print(f\"You are {age} years old\")\nexcept ValueError:\n    # This code runs if the error happens\n    print(\"Oops! That's not a valid number.\")\n    print(\"Please enter your age as a number (e.g., 25)\")\n    age = 25  # Set a default or ask again\n\nprint(\"Program continues running!\")\nprint(f\"Age set to: {age}\")\n\n# Another example: Division by zero\nprint(\"\\n=== Division Example ===\")\n\ntry:\n    result = 10 / 0  # This will cause a ZeroDivisionError!\n    print(f\"Result: {result}\")\nexcept ZeroDivisionError:\n    print(\"Cannot divide by zero!\")\n    print(\"Setting result to 0\")\n    result = 0\n\nprint(f\"Final result: {result}\")\nprint(\"Program finished successfully!\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: The Safety Net Structure",
              "content": "**Basic try/except structure:**\n```\ntry:\n    # Code that might cause an error\n    risky_operation()\nexcept ErrorType:\n    # Code that runs if that specific error happens\n    handle_the_error()\n```\n\n**The flow:**\n1. Python tries to run code in the `try` block\n2. If NO error: except block is skipped, program continues\n3. If error happens: Python immediately jumps to the matching `except` block\n4. After except block finishes: program continues normally\n\n**Key terms explained:**\n- **Exception:** Python's technical term for an error that happens while the program runs (not a syntax error)\n- **ValueError:** A type of exception that happens when you try to convert invalid data (like \"abc\" to an integer)\n- **ZeroDivisionError:** Exception when dividing by zero\n- **try block:** The \"risky\" code you want to protect\n- **except block:** The \"safety net\" that catches the error\n\n**Syntax errors vs. Exceptions:**\n- **Syntax Error:** Code written wrong (missing colon, wrong indentation). Python won't even start running.\n- **Exception:** Code is written correctly, but something goes wrong during execution (file doesn't exist, network fails, wrong data type). This is what try/except handles.\n\n**Example:**\n```python\nif True  # Syntax error - missing colon, won't run at all\n\nint(\"abc\")  # Valid syntax, but raises ValueError exception when it runs\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Bare except: Without Specifying Exception Type**\n```python\n# WRONG - Catches everything, hides bugs\ntry:\n    result = int(user_input)\nexcept:\n    print(\"Error occurred\")\n\n# CORRECT - Catch specific exceptions\ntry:\n    result = int(user_input)\nexcept ValueError:\n    print(\"Please enter a valid number\")\n```\n\n**2. Catching Exception Too Broadly**\n```python\n# WRONG - Catches too much, including KeyboardInterrupt\ntry:\n    data = process_data()\nexcept Exception:\n    pass  # Silently ignores ALL errors\n\n# CORRECT - Catch only expected exceptions\ntry:\n    data = process_data()\nexcept (ValueError, TypeError) as e:\n    print(f\"Data error: {e}\")\n```\n\n**3. Empty except Block (Swallowing Errors)**\n```python\n# WRONG - Error is silently ignored\ntry:\n    file = open(\"data.txt\")\nexcept FileNotFoundError:\n    pass  # Nothing happens, bug hidden\n\n# CORRECT - At least log the error\ntry:\n    file = open(\"data.txt\")\nexcept FileNotFoundError:\n    print(\"Warning: data.txt not found, using defaults\")\n    file = None\n```\n\n**4. Putting Too Much Code in try Block**\n```python\n# WRONG - Too much code in try block\ntry:\n    user_input = input(\"Enter number: \")\n    number = int(user_input)\n    result = number * 2\n    print(f\"Result: {result}\")\n    save_to_file(result)\nexcept ValueError:\n    print(\"Invalid input\")\n\n# CORRECT - Only risky code in try block\nuser_input = input(\"Enter number: \")\ntry:\n    number = int(user_input)\nexcept ValueError:\n    print(\"Invalid input\")\n    number = 0\nresult = number * 2\nprint(f\"Result: {result}\")\n```\n\n**5. Confusing Syntax Errors with Exceptions**\n```python\n# WRONG - Syntax errors can't be caught at runtime\ntry:\n    if True  # Missing colon - SyntaxError\n        print(\"Hello\")\nexcept SyntaxError:\n    print(\"Caught it!\")  # Never runs!\n\n# CORRECT - Only runtime exceptions can be caught\ntry:\n    int(\"not a number\")  # ValueError at runtime\nexcept ValueError:\n    print(\"Caught it!\")  # This works!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Exceptions are runtime errors** that happen when code runs (not syntax errors). Without handling, they crash your program.\n- **try/except blocks** let you catch exceptions and handle them gracefully instead of crashing. The program continues running after the except block.\n- **try block** contains risky code that might fail. **except block** contains the code to run if an error occurs.\n- **Always specify the exception type** in except blocks (like ValueError, ZeroDivisionError). Don't use bare except: clauses.\n- **Common exceptions:** ValueError (invalid data conversion), ZeroDivisionError (dividing by zero), TypeError (wrong data type).\n- **Error handling makes programs robust** - they can handle unexpected situations without crashing, providing better user experience.\n- **The flow:** Try runs first ‚Üí if error, jump to except ‚Üí after except, program continues normally. If no error, except is skipped entirely."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-01-challenge-3",
              "title": "Interactive Exercise: Build a Safe Number Converter",
              "description": "Create a program that asks the user for a number and converts it safely. If they enter invalid input, give them a friendly message and use a default value of 0.\n\n**Your task:**\n1. Create a try/except block\n2. Try to convert user input to an integer\n3. If it fails (ValueError), print a helpful message\n4. Use a default value of 0 if conversion fails\n5. Print the final number\n\n**Starter code:**",
              "instructions": "Create a program that asks the user for a number and converts it safely. If they enter invalid input, give them a friendly message and use a default value of 0.\n\n**Your task:**\n1. Create a try/except block\n2. Try to convert user input to an integer\n3. If it fails (ValueError), print a helpful message\n4. Use a default value of 0 if conversion fails\n5. Print the final number\n\n**Starter code:**",
              "starterCode": "# Safe number converter\nprint(\"Enter a number:\")\nuser_input = \"not a number\"  # Simulate user input\n\n# TODO: Add try block here\n# TODO: Try to convert user_input to an integer\nnumber = ???\n\n# TODO: Add except ValueError block here\n# TODO: Print helpful message and set number = 0\n\nprint(f\"The number is: {number}\")",
              "solution": "# Safe number converter\n# This solution demonstrates try/except for handling invalid input\n\nprint(\"Enter a number:\")\nuser_input = \"not a number\"  # Simulate user input\n\n# Step 1: Try to convert the input\ntry:\n    # Attempt to convert user_input to an integer\n    number = int(user_input)\n    print(\"Conversion successful!\")\nexcept ValueError:\n    # Step 2: Handle the error gracefully\n    print(f\"'{user_input}' is not a valid number. Using default value.\")\n    number = 0\n\n# Step 3: Print the final result\nprint(f\"The number is: {number}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Error message is displayed for invalid input",
                  "expectedOutput": "not a valid number",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Final number is printed",
                  "expectedOutput": "The number is:",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use try: followed by number = int(user_input), then except ValueError: with a friendly message and number = 0."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-08-lesson-02",
          "title": "Try/Except/Finally Blocks - Complete Error Handling",
          "moduleId": "module-08",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: The Complete Safety Protocol",
              "content": "Imagine you're a lab scientist handling dangerous chemicals:\n\n**TRY:** You attempt the experiment (risky operation)\n**EXCEPT:** If something goes wrong (chemical spills), you have specific protocols for each type of emergency (fire = fire extinguisher, spill = neutralizer)\n**ELSE:** If the experiment succeeds without incident, you record the successful results\n**FINALLY:** No matter what happened (success or disaster), you ALWAYS wash your hands, turn off equipment, and lock the lab before leaving\n\nThe **finally block** is the key new concept here. It runs NO MATTER WHAT - whether the try succeeded, failed, or even if you return early. It's for cleanup code that MUST happen.\n\n**Real-world scenarios:**\n- Opening a file: Finally block ensures the file is closed, even if reading fails\n- Database connection: Finally ensures disconnection, even if query fails\n- Network request: Finally ensures connection is closed properly\n\nThink of finally as the \"no matter what\" code - code so important it runs even if the program is about to crash or return."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: The Complete Structure",
              "content": "The complete structure:\n1. **try**: Attempt the risky operation\n2. **except**: Handle specific errors (can have multiple except blocks)\n3. **else**: Runs ONLY if no exception occurred (optional)\n4. **finally**: Runs NO MATTER WHAT - even if there's a return statement (optional but powerful)\n\nNotice how finally runs even when we return early in the except blocks!",
              "code": "# Example 1: File handling with finally\nprint(\"=== File Handling Example ===\")\n\nfile_opened = False\ntry:\n    print(\"Attempting to read file...\")\n    # Simulating file operations\n    filename = \"data.txt\"\n    print(f\"Opening {filename}\")\n    file_opened = True\n    \n    # Simulate processing - this might fail!\n    # Uncomment next line to simulate an error:\n    # raise ValueError(\"Data format error!\")\n    \n    print(\"Processing file data...\")\n    print(\"File processed successfully!\")\n    \nexcept FileNotFoundError:\n    print(\"ERROR: File not found!\")\n    print(\"Please check the filename and try again.\")\n    \nexcept ValueError as e:\n    print(f\"ERROR: Invalid data in file: {e}\")\n    print(\"File may be corrupted.\")\n    \nelse:\n    # This runs ONLY if NO exception occurred\n    print(\"SUCCESS: All operations completed without errors!\")\n    print(\"Ready to use the data.\")\n    \nfinally:\n    # This runs NO MATTER WHAT - success, error, or return\n    print(\"\\n--- CLEANUP (Finally block) ---\")\n    if file_opened:\n        print(\"Closing file...\")\n        print(\"File closed successfully.\")\n    print(\"Cleanup complete!\")\n    print(\"--- End of operation ---\\n\")\n\n# Example 2: Division with complete error handling\nprint(\"=== Division Calculator ===\")\n\ndef safe_divide(a, b):\n    result = None\n    try:\n        print(f\"Attempting to divide {a} by {b}\")\n        result = a / b\n        \n    except ZeroDivisionError:\n        print(\"ERROR: Cannot divide by zero!\")\n        return None\n        \n    except TypeError:\n        print(\"ERROR: Both values must be numbers!\")\n        return None\n        \n    else:\n        # Runs only if division succeeded\n        print(f\"Division successful: {a} / {b} = {result}\")\n        \n    finally:\n        # Runs no matter what - even if we returned early!\n        print(\"[Finally: Logging this operation to system]\")\n        \n    return result\n\n# Test cases\nprint(\"Test 1: Normal division\")\nresult1 = safe_divide(10, 2)\nprint(f\"Result: {result1}\\n\")\n\nprint(\"Test 2: Division by zero\")\nresult2 = safe_divide(10, 0)\nprint(f\"Result: {result2}\\n\")\n\nprint(\"Test 3: Invalid type\")\nresult3 = safe_divide(10, \"two\")\nprint(f\"Result: {result3}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: The Four Parts",
              "content": "**Complete try/except/else/finally structure:**\n```python\ntry:\n    # Risky code that might fail\n    risky_operation()\n    \nexcept SpecificError1:\n    # Handle this specific error\n    handle_error_1()\n    \nexcept SpecificError2:\n    # Handle a different error\n    handle_error_2()\n    \nelse:\n    # Runs ONLY if NO exception occurred\n    success_operations()\n    \nfinally:\n    # Runs NO MATTER WHAT\n    cleanup_code()\n```\n\n**When each part runs:**\n\n**try block:**\n- ALWAYS runs first\n- Stops at the first exception\n\n**except blocks:**\n- Run ONLY if an exception occurs in try\n- Python checks each except block in order\n- Only the FIRST matching except runs\n- Can have multiple except blocks for different errors\n\n**else block (optional):**\n- Runs ONLY if try completed WITHOUT any exception\n- Doesn't run if an exception occurred\n- Good for \"success-only\" code\n- Must come after except blocks, before finally\n\n**finally block (optional):**\n- Runs NO MATTER WHAT happens\n- Runs after try succeeds\n- Runs after except handles error\n- Runs even if there's a return statement\n- Runs even if a new exception occurs\n- Perfect for cleanup: closing files, releasing resources, logging\n\n**Multiple except blocks syntax:**\n```python\nexcept ValueError:\n    # Handle ValueError\n    \nexcept ZeroDivisionError:\n    # Handle ZeroDivisionError\n    \nexcept (TypeError, KeyError):  # Multiple in one block\n    # Handle either TypeError or KeyError\n```\n\n**Capturing the exception object:**\n```python\nexcept ValueError as e:\n    print(f\"Error details: {e}\")\n    # 'e' contains the exception object with error info\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Wrong Order of try/except/else/finally**\n```python\n# WRONG - else must come before finally\ntry:\n    result = int(\"42\")\nfinally:\n    print(\"Cleanup\")\nelse:\n    print(\"Success\")  # SyntaxError!\n\n# CORRECT - Order: try, except, else, finally\ntry:\n    result = int(\"42\")\nexcept ValueError:\n    print(\"Error\")\nelse:\n    print(\"Success\")\nfinally:\n    print(\"Cleanup\")\n```\n\n**2. Returning in finally Overwrites try/except Returns**\n```python\n# WRONG - finally return overwrites everything\ndef get_value():\n    try:\n        return 42\n    finally:\n        return 0  # This always returns!\n\nprint(get_value())  # Prints 0, not 42!\n\n# CORRECT - Don't return in finally\ndef get_value():\n    try:\n        return 42\n    finally:\n        print(\"Cleanup done\")  # Just cleanup, no return\n```\n\n**3. Forgetting else Does Not Run After Exception**\n```python\n# WRONG - Expecting else to always run\ntry:\n    data = int(\"not a number\")\nexcept ValueError:\n    data = 0\nelse:\n    print(\"Processing data\")  # Never runs after exception!\n\n# CORRECT - Put shared code after the block\ntry:\n    data = int(\"not a number\")\nexcept ValueError:\n    data = 0\n# Code here runs regardless\nprocess(data)\n```\n\n**4. Modifying Mutable Objects in finally**\n```python\n# WRONG - Modifying list in finally affects return\ndef get_list():\n    result = [1, 2, 3]\n    try:\n        return result\n    finally:\n        result.clear()  # Clears the list before return!\n\nprint(get_list())  # Prints [] not [1, 2, 3]!\n\n# CORRECT - Return a copy if modifying in finally\ndef get_list():\n    result = [1, 2, 3]\n    try:\n        return result.copy()\n    finally:\n        result.clear()\n```\n\n**5. Using else When You Should Use finally**\n```python\n# WRONG - Cleanup in else doesn't run on error\nfile = open(\"data.txt\")\ntry:\n    data = file.read()\nexcept IOError:\n    print(\"Read error\")\nelse:\n    file.close()  # Won't close on error!\n\n# CORRECT - Use finally for guaranteed cleanup\nfile = open(\"data.txt\")\ntry:\n    data = file.read()\nexcept IOError:\n    print(\"Read error\")\nfinally:\n    file.close()  # Always closes\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Complete structure order:** try ‚Üí except(s) ‚Üí else (optional) ‚Üí finally (optional). This order is mandatory.\n- **Multiple except blocks** let you handle different exceptions differently. Python checks them in order and runs the first match.\n- **else block** runs ONLY if try completed without any exception. Perfect for 'success-only' operations.\n- **finally block** runs NO MATTER WHAT - success, error, return, break, or continue. Guaranteed to execute.\n- **Use finally for cleanup:** Closing files, releasing resources, logging, disconnecting from databases - anything that MUST happen.\n- **Capture exception details** with 'as': except ValueError as e: lets you access the error message and details.\n- **Finally runs even with return:** If you return in try or except, finally still runs before the function actually returns.\n- **Common exception types:** IndexError (list index out of range), TypeError (wrong type), ValueError (wrong value), FileNotFoundError (file doesn't exist)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-02-challenge-3",
              "title": "Interactive Exercise: Build a Safe List Accessor",
              "description": "Create a function that safely accesses a list element by index. Handle multiple types of errors:\n- IndexError if index is out of range\n- TypeError if index is not an integer\n- Use else block to print success message\n- Use finally block to log the attempt\n\n**Your task:**\n1. Create a try block that accesses the list at the given index\n2. Add except block for IndexError\n3. Add except block for TypeError\n4. Add else block for successful access\n5. Add finally block to log the attempt\n\n**Test with:** my_list = [10, 20, 30, 40, 50]\n\n**Starter code:**",
              "instructions": "Create a function that safely accesses a list element by index. Handle multiple types of errors:\n- IndexError if index is out of range\n- TypeError if index is not an integer\n- Use else block to print success message\n- Use finally block to log the attempt\n\n**Your task:**\n1. Create a try block that accesses the list at the given index\n2. Add except block for IndexError\n3. Add except block for TypeError\n4. Add else block for successful access\n5. Add finally block to log the attempt\n\n**Test with:** my_list = [10, 20, 30, 40, 50]\n\n**Starter code:**",
              "starterCode": "def safe_get_item(items, index):\n    result = None\n    \n    # TODO: Add try block\n    # TODO: Try to access items[index]\n    \n    # TODO: Add except IndexError block\n    # Print error message and return None\n    \n    # TODO: Add except TypeError block\n    # Print error message and return None\n    \n    # TODO: Add else block\n    # Print success message\n    \n    # TODO: Add finally block\n    # Print log message about the attempt\n    \n    return result\n\n# Test cases\nmy_list = [10, 20, 30, 40, 50]\nprint(safe_get_item(my_list, 2))   # Valid index\nprint(safe_get_item(my_list, 10))  # Out of range\nprint(safe_get_item(my_list, \"a\")) # Wrong type",
              "solution": "# Safe List Accessor\n# This solution demonstrates try/except/else/finally structure\n\ndef safe_get_item(items, index):\n    \"\"\"Safely access a list element with full error handling.\"\"\"\n    result = None\n    \n    try:\n        # Step 1: Attempt to access the list at the given index\n        result = items[index]\n    except IndexError:\n        # Step 2: Handle out-of-range index\n        print(f\"Error: Index {index} is out of range (list has {len(items)} items)\")\n    except TypeError:\n        # Step 3: Handle wrong type for index\n        print(f\"Error: Index must be an integer, got {type(index).__name__}\")\n    else:\n        # Step 4: Runs only if no exception occurred\n        print(f\"Success! Found value: {result}\")\n    finally:\n        # Step 5: Always runs, good for logging\n        print(f\"Attempt to access index {index} completed.\")\n    \n    return result\n\n# Test cases\nmy_list = [10, 20, 30, 40, 50]\nprint(safe_get_item(my_list, 2))   # Valid index\nprint(safe_get_item(my_list, 10))  # Out of range\nprint(safe_get_item(my_list, \"a\")) # Wrong type",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Success message for valid index",
                  "expectedOutput": "Success! Found value:",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Error message for out of range index",
                  "expectedOutput": "Index",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Finally block always runs",
                  "expectedOutput": "completed",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Structure: try ‚Üí access items[index] ‚Üí except IndexError ‚Üí except TypeError ‚Üí else ‚Üí finally. Remember to set result in the try block!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-08-lesson-03",
          "title": "Exception Types and Handling Multiple Exceptions",
          "moduleId": "module-08",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Emergency Response Teams",
              "content": "Imagine a hospital emergency room with specialized teams:\n\n**Specific Teams (Specific Exceptions):**\n- Heart attack ‚Üí Cardiology team (ValueError)\n- Broken bone ‚Üí Orthopedics team (IndexError)\n- Poisoning ‚Üí Toxicology team (TypeError)\n- Burn ‚Üí Burn unit (ZeroDivisionError)\n\n**General Team (General Exception):**\n- Unknown emergency ‚Üí General ER doctors (Exception)\n\nYou want the RIGHT team for each emergency. If someone has a heart attack, you call cardiology (catch ValueError), not the general ER (catch Exception). But if you don't know what's wrong, the general ER can help (catch Exception as a fallback).\n\n**Exception Hierarchy** works like hospital departments:\n- **Exception** is the general ER (catches almost everything)\n- **ValueError, TypeError, IndexError** are specialized teams (catch specific problems)\n\nPython has MANY built-in exception types, each for a specific situation. Using the right one makes your error handling precise and your debugging easier.\n\n**Best practice:** Catch specific exceptions you expect (ValueError, FileNotFoundError), not the general Exception class (except as a last resort)."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Common Exception Types in Action",
              "content": "Each exception type represents a specific category of error. By catching specific exceptions, you can provide tailored error messages and recovery strategies. The function demonstrates how a single try block can have multiple except blocks to handle different error scenarios.",
              "code": "# Demonstrating common Python exception types\nprint(\"=== Common Exception Types ===\")\n\n# 1. ValueError - Wrong value, right type\nprint(\"\\n1. ValueError Example:\")\ntry:\n    number = int(\"not_a_number\")  # String to int, but invalid format\nexcept ValueError as e:\n    print(f\"ValueError caught: {e}\")\n    print(\"Cause: Trying to convert invalid string to integer\\n\")\n\n# 2. TypeError - Wrong type entirely\nprint(\"2. TypeError Example:\")\ntry:\n    result = \"hello\" + 5  # Can't add string and integer\nexcept TypeError as e:\n    print(f\"TypeError caught: {e}\")\n    print(\"Cause: Incompatible types in operation\\n\")\n\n# 3. IndexError - List index out of range\nprint(\"3. IndexError Example:\")\ntry:\n    my_list = [1, 2, 3]\n    item = my_list[10]  # Only indices 0-2 exist\nexcept IndexError as e:\n    print(f\"IndexError caught: {e}\")\n    print(\"Cause: Accessing index that doesn't exist\\n\")\n\n# 4. KeyError - Dictionary key doesn't exist\nprint(\"4. KeyError Example:\")\ntry:\n    person = {\"name\": \"Alice\", \"age\": 25}\n    email = person[\"email\"]  # Key 'email' doesn't exist\nexcept KeyError as e:\n    print(f\"KeyError caught: {e}\")\n    print(\"Cause: Accessing dictionary key that doesn't exist\\n\")\n\n# 5. ZeroDivisionError - Division by zero\nprint(\"5. ZeroDivisionError Example:\")\ntry:\n    result = 10 / 0\nexcept ZeroDivisionError as e:\n    print(f\"ZeroDivisionError caught: {e}\")\n    print(\"Cause: Attempting to divide by zero\\n\")\n\n# 6. FileNotFoundError - File doesn't exist\nprint(\"6. FileNotFoundError Example:\")\ntry:\n    with open(\"nonexistent_file.txt\", \"r\") as f:\n        content = f.read()\nexcept FileNotFoundError as e:\n    print(f\"FileNotFoundError caught: {e}\")\n    print(\"Cause: Trying to open a file that doesn't exist\\n\")\n\n# 7. AttributeError - Object doesn't have that attribute\nprint(\"7. AttributeError Example:\")\ntry:\n    my_list = [1, 2, 3]\n    my_list.append_all([4, 5])  # Method doesn't exist\nexcept AttributeError as e:\n    print(f\"AttributeError caught: {e}\")\n    print(\"Cause: Calling a method/attribute that doesn't exist\\n\")\n\n# Handling MULTIPLE exception types\nprint(\"=== Handling Multiple Exceptions ===\")\n\ndef process_user_input(user_input, index):\n    \"\"\"Process input with multiple exception handling.\"\"\"\n    numbers = [10, 20, 30, 40, 50]\n    \n    try:\n        # Multiple things can go wrong here!\n        num = int(user_input)  # ValueError if input not a number\n        result = numbers[num]  # IndexError if num out of range\n        division = result / index  # ZeroDivisionError if index is 0\n        return division\n        \n    except ValueError:\n        print(f\"Error: '{user_input}' is not a valid number\")\n        return None\n        \n    except IndexError:\n        print(f\"Error: Index {num} out of range (0-{len(numbers)-1})\")\n        return None\n        \n    except ZeroDivisionError:\n        print(\"Error: Cannot divide by zero\")\n        return None\n\nprint(\"\\nTest 1: Valid input\")\nresult1 = process_user_input(\"2\", 5)\nprint(f\"Result: {result1}\\n\")\n\nprint(\"Test 2: Invalid number format\")\nresult2 = process_user_input(\"abc\", 5)\nprint(f\"Result: {result2}\\n\")\n\nprint(\"Test 3: Index out of range\")\nresult3 = process_user_input(\"10\", 5)\nprint(f\"Result: {result3}\\n\")\n\nprint(\"Test 4: Division by zero\")\nresult4 = process_user_input(\"2\", 0)\nprint(f\"Result: {result4}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: Exception Handling Patterns",
              "content": "**Common Built-in Exception Types:**\n\n1. **ValueError:** Correct type, wrong value\n   - int(\"abc\") - can't convert to integer\n   - float(\"not_a_number\")\n   \n2. **TypeError:** Wrong type for operation\n   - \"hello\" + 5 - can't add string and int\n   - len(42) - len() expects iterable, not int\n   \n3. **IndexError:** Sequence index out of range\n   - my_list[100] - index doesn't exist\n   - Works with lists, tuples, strings\n   \n4. **KeyError:** Dictionary key doesn't exist\n   - person[\"email\"] - key not in dict\n   - Use .get() to avoid this\n   \n5. **ZeroDivisionError:** Division or modulo by zero\n   - 10 / 0\n   - 10 % 0\n   \n6. **FileNotFoundError:** File doesn't exist\n   - open(\"missing.txt\")\n   \n7. **AttributeError:** Object lacks attribute/method\n   - \"hello\".non_existent_method()\n   \n8. **NameError:** Variable not defined\n   - print(undefined_variable)\n\n**Handling Multiple Exceptions - Three Patterns:**\n\n**Pattern 1: Separate except blocks (different handling)**\n```python\ntry:\n    risky_code()\nexcept ValueError:\n    handle_value_error()\nexcept TypeError:\n    handle_type_error()\nexcept IndexError:\n    handle_index_error()\n```\n\n**Pattern 2: Multiple exceptions, same handling**\n```python\ntry:\n    risky_code()\nexcept (ValueError, TypeError, IndexError):\n    # Handle all three the same way\n    handle_error()\n```\n\n**Pattern 3: Specific first, general fallback**\n```python\ntry:\n    risky_code()\nexcept ValueError:\n    handle_value_error()  # Specific\nexcept TypeError:\n    handle_type_error()   # Specific\nexcept Exception as e:\n    handle_unknown_error(e)  # General fallback\n```\n\n**Exception Hierarchy (simplified):**\n```\nBaseException\n‚îú‚îÄ‚îÄ Exception (catch most errors)\n‚îÇ   ‚îú‚îÄ‚îÄ ValueError\n‚îÇ   ‚îú‚îÄ‚îÄ TypeError\n‚îÇ   ‚îú‚îÄ‚îÄ IndexError\n‚îÇ   ‚îú‚îÄ‚îÄ KeyError\n‚îÇ   ‚îú‚îÄ‚îÄ ZeroDivisionError\n‚îÇ   ‚îú‚îÄ‚îÄ FileNotFoundError\n‚îÇ   ‚îú‚îÄ‚îÄ AttributeError\n‚îÇ   ‚îî‚îÄ‚îÄ ... many more\n‚îú‚îÄ‚îÄ KeyboardInterrupt (Ctrl+C)\n‚îî‚îÄ‚îÄ SystemExit (sys.exit())\n```\n\n**Best Practices:**\n- Catch SPECIFIC exceptions you expect (ValueError, FileNotFoundError)\n- Order except blocks from SPECIFIC to GENERAL\n- Avoid bare except: (catches everything, even Ctrl+C!)\n- Use Exception as a last-resort fallback, not the primary catch"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Catching Parent Exception Before Child**\n```python\n# WRONG - Exception catches everything, specific handlers never run\ntry:\n    value = int(\"abc\")\nexcept Exception:\n    print(\"Generic error\")\nexcept ValueError:\n    print(\"Value error\")  # Never reached!\n\n# CORRECT - Put specific exceptions first\ntry:\n    value = int(\"abc\")\nexcept ValueError:\n    print(\"Value error\")  # This runs\nexcept Exception:\n    print(\"Generic error\")  # Fallback\n```\n\n**2. Using Exception Type Instead of Instance**\n```python\n# WRONG - Comparing to class, not instance\ntry:\n    x = 1 / 0\nexcept ZeroDivisionError as e:\n    if e == ZeroDivisionError:  # Always False!\n        print(\"Caught it\")\n\n# CORRECT - Use isinstance or just handle directly\ntry:\n    x = 1 / 0\nexcept ZeroDivisionError as e:\n    print(f\"Caught: {e}\")  # Use the instance\n```\n\n**3. Catching Multiple Exceptions with Wrong Syntax**\n```python\n# WRONG - This catches Exception, assigns to ValueError variable\ntry:\n    data = process()\nexcept Exception, ValueError:  # Python 2 syntax, error in Python 3\n    print(\"Error\")\n\n# CORRECT - Use tuple for multiple exceptions\ntry:\n    data = process()\nexcept (ValueError, TypeError) as e:\n    print(f\"Error: {e}\")\n```\n\n**4. Not Re-raising After Logging**\n```python\n# WRONG - Exception swallowed after logging\ntry:\n    critical_operation()\nexcept Exception as e:\n    print(f\"Error: {e}\")\n    # Exception disappears, caller thinks success!\n\n# CORRECT - Re-raise after logging\ntry:\n    critical_operation()\nexcept Exception as e:\n    print(f\"Error: {e}\")\n    raise  # Preserve original exception\n```\n\n**5. Using str(e) Instead of repr(e) for Debugging**\n```python\n# WRONG - str() may hide exception type\ntry:\n    data = json.loads(\"invalid\")\nexcept Exception as e:\n    print(str(e))  # Shows: \"Expecting value: line 1\"\n\n# CORRECT - repr() shows exception type\ntry:\n    data = json.loads(\"invalid\")\nexcept Exception as e:\n    print(repr(e))  # Shows: JSONDecodeError(\"Expecting value...\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Common exceptions:** ValueError (wrong value), TypeError (wrong type), IndexError (list index), KeyError (dict key), ZeroDivisionError, FileNotFoundError, AttributeError (missing attribute/method).\n- **Catch specific exceptions** you expect, not the generic Exception class. Specific catches make debugging easier and handling more precise.\n- **Multiple except blocks:** Use separate blocks for different exception types when you need different handling for each.\n- **Group exceptions:** Use except (ValueError, TypeError) when you want the same handling for multiple exception types.\n- **Order matters:** Put specific exceptions BEFORE general ones. Python checks except blocks in order and uses the first match.\n- **Use 'as e' to capture exception details:** except ValueError as e: lets you access the error message and other useful information.\n- **Avoid bare except:** except Exception catches almost everything; except: catches EVERYTHING including Ctrl+C. Both hide bugs and make debugging hard.\n- **Exception hierarchy:** Exception is the parent class of most errors. Catching it catches all its children (ValueError, TypeError, etc.)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-03-challenge-3",
              "title": "Interactive Exercise: Build a Multi-Exception Data Processor",
              "description": "Create a function that processes a dictionary of user data safely. The function should:\n1. Accept a dictionary and a key name\n2. Get the value for that key (might not exist ‚Üí KeyError)\n3. Convert the value to uppercase (might not be a string ‚Üí AttributeError)\n4. Extract the first character (might be empty string ‚Üí IndexError)\n5. Return the character, or None if any error occurs\n\nHandle all three exception types separately with specific error messages.\n\n**Your task:**\n\n**Test data:**\n```python\nuser1 = {\"name\": \"Alice\", \"role\": \"admin\"}\nuser2 = {\"name\": \"Bob\"}  # Missing 'role'\nuser3 = {\"name\": \"Carol\", \"role\": 12345}  # role is int, not string\nuser4 = {\"name\": \"Dave\", \"role\": \"\"}  # Empty string\n```\n\n**Starter code:**",
              "instructions": "Create a function that processes a dictionary of user data safely. The function should:\n1. Accept a dictionary and a key name\n2. Get the value for that key (might not exist ‚Üí KeyError)\n3. Convert the value to uppercase (might not be a string ‚Üí AttributeError)\n4. Extract the first character (might be empty string ‚Üí IndexError)\n5. Return the character, or None if any error occurs\n\nHandle all three exception types separately with specific error messages.\n\n**Your task:**\n\n**Test data:**\n```python\nuser1 = {\"name\": \"Alice\", \"role\": \"admin\"}\nuser2 = {\"name\": \"Bob\"}  # Missing 'role'\nuser3 = {\"name\": \"Carol\", \"role\": 12345}  # role is int, not string\nuser4 = {\"name\": \"Dave\", \"role\": \"\"}  # Empty string\n```\n\n**Starter code:**",
              "starterCode": "def get_first_letter(user_dict, key):\n    \"\"\"Safely extract first letter of a dictionary value.\"\"\"\n    \n    # TODO: Add try block\n    # TODO: Get the value from dictionary using user_dict[key]\n    # TODO: Convert to uppercase using .upper()\n    # TODO: Get first character using [0]\n    \n    # TODO: Add except KeyError block\n    # Print message: \"Key not found\"\n    \n    # TODO: Add except AttributeError block\n    # Print message: \"Value is not a string\"\n    \n    # TODO: Add except IndexError block\n    # Print message: \"Value is empty\"\n    \n    # Return None or the character\n    return None\n\n# Test cases\nuser1 = {\"name\": \"Alice\", \"role\": \"admin\"}\nuser2 = {\"name\": \"Bob\"}\nuser3 = {\"name\": \"Carol\", \"role\": 12345}\nuser4 = {\"name\": \"Dave\", \"role\": \"\"}\n\nprint(get_first_letter(user1, \"role\"))  # Should work\nprint(get_first_letter(user2, \"role\"))  # KeyError\nprint(get_first_letter(user3, \"role\"))  # AttributeError\nprint(get_first_letter(user4, \"role\"))  # IndexError",
              "solution": "# Multi-Exception Data Processor\n# This solution demonstrates handling multiple exception types\n\ndef get_first_letter(user_dict, key):\n    \"\"\"Safely extract first letter of a dictionary value.\"\"\"\n    result = None\n    \n    try:\n        # Step 1: Get the value (may raise KeyError)\n        value = user_dict[key]\n        # Step 2: Convert to uppercase (may raise AttributeError)\n        upper_value = value.upper()\n        # Step 3: Get first character (may raise IndexError)\n        result = upper_value[0]\n    except KeyError:\n        # Handle missing key\n        print(f\"Key '{key}' not found in dictionary\")\n    except AttributeError:\n        # Handle non-string value (can't call .upper())\n        print(f\"Value for '{key}' is not a string, got {type(user_dict.get(key)).__name__}\")\n    except IndexError:\n        # Handle empty string\n        print(f\"Value for '{key}' is empty\")\n    \n    return result\n\n# Test cases\nuser1 = {\"name\": \"Alice\", \"role\": \"admin\"}\nuser2 = {\"name\": \"Bob\"}\nuser3 = {\"name\": \"Carol\", \"role\": 12345}\nuser4 = {\"name\": \"Dave\", \"role\": \"\"}\n\nprint(get_first_letter(user1, \"role\"))  # Should work: 'A'\nprint(get_first_letter(user2, \"role\"))  # KeyError\nprint(get_first_letter(user3, \"role\"))  # AttributeError\nprint(get_first_letter(user4, \"role\"))  # IndexError",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use three separate except blocks: except KeyError, except AttributeError, except IndexError. Each should print a specific message and return None."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-08-lesson-04",
          "title": "Raising Exceptions and Creating Custom Exceptions",
          "moduleId": "module-08",
          "order": 4,
          "estimatedMinutes": 35,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Activating the Fire Alarm",
              "content": "So far, we've been CATCHING exceptions (responding to the alarm when it goes off). But what about RAISING exceptions (pressing the fire alarm button yourself)?\n\n**Why would you raise an exception?**\n\nImagine you're a security guard checking IDs at a club:\n- Someone shows a fake ID ‚Üí You raise an alarm (raise ValueError)\n- Someone is under 21 ‚Üí You raise an alarm (raise ValueError)\n- Someone is on the banned list ‚Üí You raise a CUSTOM alarm (raise BannedPersonError)\n\nYou're not waiting for something to break - you're actively detecting a problem and **signaling it** by raising an exception.\n\n**Real-world code scenarios:**\n\n1. **Validation:** Age is negative ‚Üí raise ValueError(\"Age cannot be negative\")\n2. **Business rules:** Withdrawal exceeds balance ‚Üí raise InsufficientFundsError(\"Not enough money\")\n3. **Preconditions:** Function requires positive number but got zero ‚Üí raise ValueError(\"Expected positive number\")\n\n**Custom Exceptions** are like creating your own fire alarm sounds:\n- Standard alarm: ValueError, TypeError (built-in)\n- Custom alarm: InsufficientFundsError, InvalidPasswordError (your own)\n\nCustom exceptions make your code self-documenting: except InsufficientFundsError: is clearer than except ValueError: in a banking app.\n\n**Exception vs. Return Value:**\n- **Return error value:** User enters wrong password ‚Üí return False (expected, common)\n- **Raise exception:** Credit card number has letters ‚Üí raise ValueError (unexpected, exceptional)\n\nRule of thumb: If the error is EXCEPTIONAL (shouldn't normally happen), raise an exception. If it's EXPECTED (users often get it wrong), return a value."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Raising Exceptions",
              "content": "The code demonstrates:\n1. **Raising built-in exceptions** with raise ValueError() when validation fails\n2. **Custom exception classes** that inherit from Exception for domain-specific errors\n3. **Re-raising exceptions** with bare raise to pass the exception up after logging\n\nCustom exceptions make error handling more specific and self-documenting.",
              "code": "# Example 1: Raising built-in exceptions\nprint(\"=== Raising Built-in Exceptions ===\")\n\ndef calculate_discount(price, discount_percent):\n    \"\"\"Calculate discounted price with validation.\"\"\"\n    \n    # Validate price\n    if price < 0:\n        raise ValueError(\"Price cannot be negative\")\n    \n    # Validate discount\n    if discount_percent < 0 or discount_percent > 100:\n        raise ValueError(\"Discount must be between 0 and 100\")\n    \n    # If validations pass, calculate discount\n    discount_amount = price * (discount_percent / 100)\n    final_price = price - discount_amount\n    return final_price\n\n# Valid usage\nprint(\"Test 1: Valid values\")\ntry:\n    result = calculate_discount(100, 20)\n    print(f\"$100 with 20% discount = ${result}\\n\")\nexcept ValueError as e:\n    print(f\"Error: {e}\\n\")\n\n# Invalid price\nprint(\"Test 2: Negative price\")\ntry:\n    result = calculate_discount(-50, 20)\n    print(f\"Result: ${result}\\n\")\nexcept ValueError as e:\n    print(f\"Error: {e}\\n\")\n\n# Invalid discount\nprint(\"Test 3: Invalid discount\")\ntry:\n    result = calculate_discount(100, 150)\n    print(f\"Result: ${result}\\n\")\nexcept ValueError as e:\n    print(f\"Error: {e}\\n\")\n\n# Example 2: Creating custom exceptions\nprint(\"=== Custom Exception Classes ===\")\n\n# Define custom exception\nclass InsufficientFundsError(Exception):\n    \"\"\"Raised when account has insufficient funds for withdrawal.\"\"\"\n    pass\n\nclass AccountLockedError(Exception):\n    \"\"\"Raised when attempting to access a locked account.\"\"\"\n    pass\n\nclass BankAccount:\n    \"\"\"Simple bank account with custom exceptions.\"\"\"\n    \n    def __init__(self, balance=0):\n        self.balance = balance\n        self.is_locked = False\n    \n    def withdraw(self, amount):\n        \"\"\"Withdraw money with validation.\"\"\"\n        \n        # Check if account is locked\n        if self.is_locked:\n            raise AccountLockedError(\"Account is locked. Contact bank.\")\n        \n        # Validate amount\n        if amount <= 0:\n            raise ValueError(\"Withdrawal amount must be positive\")\n        \n        # Check sufficient funds\n        if amount > self.balance:\n            raise InsufficientFundsError(\n                f\"Insufficient funds. Balance: ${self.balance}, \"\n                f\"Requested: ${amount}\"\n            )\n        \n        # Process withdrawal\n        self.balance -= amount\n        return self.balance\n    \n    def lock_account(self):\n        \"\"\"Lock the account.\"\"\"\n        self.is_locked = True\n\n# Test custom exceptions\naccount = BankAccount(balance=1000)\n\nprint(\"Test 1: Valid withdrawal\")\ntry:\n    new_balance = account.withdraw(200)\n    print(f\"Withdrew $200. New balance: ${new_balance}\\n\")\nexcept (InsufficientFundsError, AccountLockedError, ValueError) as e:\n    print(f\"Error: {e}\\n\")\n\nprint(\"Test 2: Insufficient funds\")\ntry:\n    new_balance = account.withdraw(5000)\n    print(f\"New balance: ${new_balance}\\n\")\nexcept InsufficientFundsError as e:\n    print(f\"Error: {e}\\n\")\n\nprint(\"Test 3: Locked account\")\naccount.lock_account()\ntry:\n    new_balance = account.withdraw(100)\n    print(f\"New balance: ${new_balance}\\n\")\nexcept AccountLockedError as e:\n    print(f\"Error: {e}\\n\")\n\n# Example 3: Re-raising exceptions\nprint(\"=== Re-raising Exceptions ===\")\n\ndef process_transaction(account, amount):\n    \"\"\"Process transaction with logging.\"\"\"\n    try:\n        account.withdraw(amount)\n        print(f\"Transaction successful: ${amount}\")\n    except InsufficientFundsError as e:\n        print(f\"[LOG] Failed transaction: {e}\")\n        raise  # Re-raise the same exception\n\naccount2 = BankAccount(balance=100)\ntry:\n    process_transaction(account2, 200)\nexcept InsufficientFundsError:\n    print(\"Transaction declined at higher level\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: Raising and Creating Exceptions",
              "content": "**Raising Built-in Exceptions:**\n\n```python\n# Basic syntax\nraise ExceptionType(\"Error message\")\n\n# Examples\nraise ValueError(\"Age cannot be negative\")\nraise TypeError(\"Expected string, got int\")\nraise FileNotFoundError(\"Config file not found\")\n\n# Without message (less helpful)\nraise ValueError()\n```\n\n**Creating Custom Exception Classes:**\n\n**Basic custom exception:**\n```python\nclass MyCustomError(Exception):\n    \"\"\"Description of when this error occurs.\"\"\"\n    pass  # No additional code needed\n\n# Usage\nraise MyCustomError(\"Something specific went wrong\")\n```\n\n**Custom exception with default message:**\n```python\nclass InsufficientFundsError(Exception):\n    \"\"\"Raised when account balance is too low.\"\"\"\n    def __init__(self, balance, amount):\n        self.balance = balance\n        self.amount = amount\n        message = f\"Insufficient funds: ${balance} < ${amount}\"\n        super().__init__(message)\n\n# Usage\nraise InsufficientFundsError(balance=100, amount=200)\n```\n\n**Exception hierarchy for related errors:**\n```python\nclass BankError(Exception):\n    \"\"\"Base exception for all bank errors.\"\"\"\n    pass\n\nclass InsufficientFundsError(BankError):\n    \"\"\"Not enough money.\"\"\"\n    pass\n\nclass AccountLockedError(BankError):\n    \"\"\"Account is locked.\"\"\"\n    pass\n\n# Can catch all bank errors:\ntry:\n    do_banking()\nexcept BankError:  # Catches both children\n    handle_bank_error()\n\n# Or catch specific ones:\nexcept InsufficientFundsError:\n    handle_insufficient_funds()\n```\n\n**Re-raising Exceptions:**\n\n**Bare raise (re-raises the same exception):**\n```python\ntry:\n    risky_operation()\nexcept ValueError as e:\n    log_error(e)  # Log it\n    raise  # Re-raise the original exception\n```\n\n**Raising a different exception:**\n```python\ntry:\n    risky_operation()\nexcept ValueError as e:\n    # Convert to custom exception\n    raise CustomError(f\"Failed: {e}\")\n```\n\n**When to Raise Exceptions:**\n\n‚úÖ **DO raise exceptions when:**\n- Input validation fails (negative age, invalid email)\n- Preconditions not met (function expects positive number, got zero)\n- Business rules violated (withdrawal exceeds limit)\n- Unrecoverable errors (file corrupted, database connection lost)\n\n‚ùå **DON'T raise exceptions when:**\n- Result could be legitimately empty (search returns 0 results)\n- User input is commonly wrong (wrong password)\n- You can return a sentinel value (None, False, -1)\n- It's an expected alternate flow (user cancels operation)\n\n**Guideline:** Exceptions are for EXCEPTIONAL cases, not control flow."
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Raising String Instead of Exception**\n```python\n# WRONG - Raising a string (Python 2 style, error in Python 3)\nraise \"Something went wrong\"  # TypeError!\n\n# CORRECT - Raise an exception instance\nraise ValueError(\"Something went wrong\")\n```\n\n**2. Custom Exception Without Inheriting from Exception**\n```python\n# WRONG - Not inheriting from Exception\nclass MyError:\n    pass\n\nraise MyError()  # Won't be caught by except Exception!\n\n# CORRECT - Inherit from Exception or its subclasses\nclass MyError(Exception):\n    pass\n\nraise MyError(\"Custom error\")  # Works correctly\n```\n\n**3. Losing Original Exception When Re-raising**\n```python\n# WRONG - Original traceback is lost\ntry:\n    risky_operation()\nexcept ValueError:\n    raise RuntimeError(\"Failed\")  # Original context lost!\n\n# CORRECT - Chain exceptions to preserve context\ntry:\n    risky_operation()\nexcept ValueError as e:\n    raise RuntimeError(\"Failed\") from e  # Preserves original\n```\n\n**4. Raising in finally Block**\n```python\n# WRONG - Exception in finally replaces original\ntry:\n    raise ValueError(\"Original error\")\nfinally:\n    raise RuntimeError(\"Cleanup error\")  # Hides ValueError!\n\n# CORRECT - Handle cleanup errors separately\ntry:\n    raise ValueError(\"Original error\")\nfinally:\n    try:\n        cleanup()\n    except Exception:\n        pass  # Log but don't raise\n```\n\n**5. Not Including Helpful Error Messages**\n```python\n# WRONG - Generic message, no context\ndef validate_age(age):\n    if age < 0:\n        raise ValueError(\"Invalid value\")\n\n# CORRECT - Include context in error message\ndef validate_age(age):\n    if age < 0:\n        raise ValueError(f\"Age must be positive, got {age}\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Raise exceptions** with raise ExceptionType('message') when validation fails or preconditions aren't met. Always include a descriptive message.\n- **Custom exceptions** are classes that inherit from Exception. Use them for domain-specific errors: class MyError(Exception): pass\n- **Exception hierarchy** lets you group related exceptions. Create a base exception and inherit from it: class BankError(Exception), then class InsufficientFundsError(BankError).\n- **Re-raise exceptions** with bare raise (not raise e) to preserve the original stack trace. Useful for logging then re-raising.\n- **Use exceptions for exceptional cases** (validation failures, violated preconditions). Use return values for expected alternate flows (search returns no results).\n- **Exception messages should be actionable:** Include what went wrong, expected vs. actual values, and how to fix it.\n- **Custom exceptions make code self-documenting:** except InsufficientFundsError is clearer than except ValueError in a banking app.\n- **Don't use exceptions for control flow:** They're slower than if/else and make code harder to understand. Save them for truly exceptional situations."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-04-challenge-3",
              "title": "Interactive Exercise: Build a Password Validator",
              "description": "Create a password validator that raises custom exceptions for different validation failures:\n\n**Requirements:**\n- Password must be at least 8 characters ‚Üí raise TooShortError\n- Password must contain at least one digit ‚Üí raise NoDigitError  \n- Password must contain at least one uppercase letter ‚Üí raise NoUppercaseError\n- If all validations pass, return True\n\n**Your task:**\n1. Create three custom exception classes\n2. Create a validate_password() function\n3. Raise appropriate exceptions when validation fails\n4. Test with various passwords\n\n**Starter code:**",
              "instructions": "Create a password validator that raises custom exceptions for different validation failures:\n\n**Requirements:**\n- Password must be at least 8 characters ‚Üí raise TooShortError\n- Password must contain at least one digit ‚Üí raise NoDigitError  \n- Password must contain at least one uppercase letter ‚Üí raise NoUppercaseError\n- If all validations pass, return True\n\n**Your task:**\n1. Create three custom exception classes\n2. Create a validate_password() function\n3. Raise appropriate exceptions when validation fails\n4. Test with various passwords\n\n**Starter code:**",
              "starterCode": "# TODO: Create custom exception classes\nclass TooShortError(Exception):\n    \"\"\"Password is too short.\"\"\"\n    pass\n\n# TODO: Create NoDigitError class\n\n# TODO: Create NoUppercaseError class\n\ndef validate_password(password):\n    \"\"\"Validate password and raise exceptions on failure.\"\"\"\n    \n    # TODO: Check length (< 8 chars)\n    # Raise TooShortError with helpful message\n    \n    # TODO: Check for at least one digit\n    # Use: any(char.isdigit() for char in password)\n    # Raise NoDigitError if no digits found\n    \n    # TODO: Check for at least one uppercase letter\n    # Use: any(char.isupper() for char in password)\n    # Raise NoUppercaseError if no uppercase found\n    \n    # If all checks pass\n    return True\n\n# Test cases\ntest_passwords = [\n    \"SecurePass123\",  # Valid\n    \"short\",          # Too short\n    \"nouppercase123\", # No uppercase\n    \"NODIGITS\",       # No digit\n]\n\nfor pwd in test_passwords:\n    try:\n        if validate_password(pwd):\n            print(f\"‚úì '{pwd}' is valid\")\n    except (TooShortError, NoDigitError, NoUppercaseError) as e:\n        print(f\"‚úó '{pwd}': {e}\")",
              "solution": "# Password Validator with Custom Exceptions\n# This solution demonstrates creating and raising custom exceptions\n\n# Step 1: Define custom exception classes\nclass TooShortError(Exception):\n    \"\"\"Password is too short.\"\"\"\n    pass\n\nclass NoDigitError(Exception):\n    \"\"\"Password has no digits.\"\"\"\n    pass\n\nclass NoUppercaseError(Exception):\n    \"\"\"Password has no uppercase letters.\"\"\"\n    pass\n\ndef validate_password(password):\n    \"\"\"Validate password and raise exceptions on failure.\"\"\"\n    \n    # Step 2: Check length (must be at least 8 characters)\n    if len(password) < 8:\n        raise TooShortError(f\"Password must be at least 8 characters (got {len(password)})\")\n    \n    # Step 3: Check for at least one digit\n    if not any(char.isdigit() for char in password):\n        raise NoDigitError(\"Password must contain at least one digit\")\n    \n    # Step 4: Check for at least one uppercase letter\n    if not any(char.isupper() for char in password):\n        raise NoUppercaseError(\"Password must contain at least one uppercase letter\")\n    \n    # All checks passed!\n    return True\n\n# Test cases\ntest_passwords = [\n    \"SecurePass123\",  # Valid\n    \"short\",          # Too short\n    \"nouppercase123\", # No uppercase\n    \"NODIGITS\",       # No digit\n]\n\nfor pwd in test_passwords:\n    try:\n        if validate_password(pwd):\n            print(f\"Valid: '{pwd}'\")\n    except (TooShortError, NoDigitError, NoUppercaseError) as e:\n        print(f\"Invalid '{pwd}': {e}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create each exception class with pass. In validate_password, use if len(password) < 8: raise TooShortError(...). Use any() with generator expressions to check for digits and uppercase."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-08-lesson-05",
          "title": "Input Validation and Defensive Programming",
          "moduleId": "module-08",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: The Bouncer at the Door",
              "content": "Imagine you're a bouncer at an exclusive club. Do you:\n\n**A) Let everyone in and deal with problems later?** (No validation)\n- Drunk people start fights ‚Üí chaos\n- Underage people drink ‚Üí legal problems  \n- Result: Club gets shut down\n\n**B) Check EVERYTHING at the door?** (Input validation)\n- ID check ‚Üí Prevent underage entry\n- Sobriety check ‚Üí Prevent drunk people\n- Dress code check ‚Üí Maintain standards\n- Result: Safe, enjoyable club\n\nThis is **defensive programming** - assume EVERYTHING can go wrong, and guard against it.\n\n**Two Philosophies:**\n\n**LBYL (Look Before You Leap):**\n\"Check ID before letting them in\"\n```python\nif age >= 21:  # Check first\n    serve_drink()  # Then act\nelse:\n    deny_entry()\n```\n\n**EAFP (Easier to Ask Forgiveness than Permission):**\n\"Let them order, catch the error if they're underage\"\n```python\ntry:\n    serve_drink()  # Try it\nexcept UnderageError:  # Handle error\n    deny_entry()\n```\n\n**Python prefers EAFP** for many situations (it's more Pythonic), but **validation is still crucial**.\n\n**Real-world scenarios:**\n\n1. **User registration:**\n   - Validate email format, password strength, age\n   - Don't just trust user input!\n\n2. **API endpoints:**\n   - Validate all request parameters\n   - Check data types, ranges, required fields\n\n3. **File processing:**\n   - Validate file exists, correct format, not too large\n   - Don't assume file is perfect\n\n**Defensive programming checklist:**\n- ‚úÖ Validate ALL user input (never trust it)\n- ‚úÖ Check types (is it an int when you expect int?)\n- ‚úÖ Check ranges (is age between 0-120?)\n- ‚úÖ Check formats (is email valid? Is date parseable?)\n- ‚úÖ Provide helpful error messages (tell users what's wrong)\n- ‚úÖ Have fallback values when appropriate"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Input Validation Patterns",
              "content": "The code demonstrates:\n1. **Step-by-step validation** (check empty, type, range)\n2. **EAFP vs. LBYL** approaches (Python prefers EAFP)\n3. **Comprehensive validation** with helpful error messages\n4. **Type checking** with isinstance()\n5. **Range validation** to ensure values are reasonable\n6. **Defensive programming** that assumes inputs are wrong until proven right",
              "code": "# Example 1: Basic input validation\nprint(\"=== Basic Input Validation ===\")\n\ndef get_age_from_user(user_input):\n    \"\"\"Validate and convert age input.\"\"\"\n    \n    # Step 1: Check if input is empty\n    if not user_input or user_input.strip() == \"\":\n        raise ValueError(\"Age cannot be empty\")\n    \n    # Step 2: Try to convert to integer\n    try:\n        age = int(user_input.strip())\n    except ValueError:\n        raise ValueError(f\"Age must be a number, got '{user_input}'\")\n    \n    # Step 3: Validate range\n    if age < 0:\n        raise ValueError(f\"Age cannot be negative (got {age})\")\n    if age > 120:\n        raise ValueError(f\"Age seems unrealistic (got {age})\")\n    \n    return age\n\n# Test cases\ntest_inputs = [\"25\", \"  30  \", \"\", \"abc\", \"-5\", \"200\"]\n\nfor test_input in test_inputs:\n    print(f\"\\nInput: '{test_input}'\")\n    try:\n        age = get_age_from_user(test_input)\n        print(f\"  ‚úì Valid age: {age}\")\n    except ValueError as e:\n        print(f\"  ‚úó Invalid: {e}\")\n\n# Example 2: EAFP vs LBYL\nprint(\"\\n\\n=== EAFP vs LBYL Comparison ===\")\n\nmy_dict = {\"name\": \"Alice\", \"age\": 25}\n\n# LBYL (Look Before You Leap)\nprint(\"\\nLBYL approach:\")\nif \"email\" in my_dict:\n    email = my_dict[\"email\"]\n    print(f\"Email: {email}\")\nelse:\n    print(\"No email found\")\n    email = \"no-email@example.com\"\n\nprint(f\"Result: {email}\")\n\n# EAFP (Easier to Ask Forgiveness than Permission) - More Pythonic!\nprint(\"\\nEAFP approach:\")\ntry:\n    email = my_dict[\"email\"]\n    print(f\"Email: {email}\")\nexcept KeyError:\n    print(\"No email found\")\n    email = \"no-email@example.com\"\n\nprint(f\"Result: {email}\")\n\n# Or even better - using .get() for simple cases\nprint(\"\\nBest approach (for dicts):\")\nemail = my_dict.get(\"email\", \"no-email@example.com\")\nprint(f\"Result: {email}\")\n\n# Example 3: Comprehensive validation function\nprint(\"\\n\\n=== Comprehensive Email Validation ===\")\n\ndef validate_email(email):\n    \"\"\"Validate email with multiple checks.\"\"\"\n    \n    # Check 1: Not empty\n    if not email or not email.strip():\n        return False, \"Email cannot be empty\"\n    \n    email = email.strip()\n    \n    # Check 2: Contains @\n    if \"@\" not in email:\n        return False, \"Email must contain @\"\n    \n    # Check 3: Has content before and after @\n    parts = email.split(\"@\")\n    if len(parts) != 2:\n        return False, \"Email must have exactly one @\"\n    \n    local, domain = parts\n    \n    if not local:\n        return False, \"Email must have content before @\"\n    if not domain:\n        return False, \"Email must have content after @\"\n    \n    # Check 4: Domain has a dot\n    if \".\" not in domain:\n        return False, \"Domain must contain a dot (e.g., gmail.com)\"\n    \n    # Check 5: Domain parts are not empty\n    domain_parts = domain.split(\".\")\n    if any(part == \"\" for part in domain_parts):\n        return False, \"Domain parts cannot be empty\"\n    \n    # All checks passed!\n    return True, \"Valid email\"\n\n# Test email validation\ntest_emails = [\n    \"alice@example.com\",\n    \"bob@company.co.uk\",\n    \"\",\n    \"no-at-sign.com\",\n    \"@example.com\",\n    \"user@\",\n    \"user@@example.com\",\n    \"user@nodot\",\n    \"user@example.\",\n]\n\nfor email in test_emails:\n    is_valid, message = validate_email(email)\n    status = \"‚úì\" if is_valid else \"‚úó\"\n    print(f\"{status} '{email}': {message}\")\n\n# Example 4: Defensive programming in practice\nprint(\"\\n\\n=== Defensive Programming Example ===\")\n\ndef calculate_discount(price, discount_percent=0, coupon_code=None):\n    \"\"\"Calculate price with discount - defensive version.\"\"\"\n    \n    # Validate price\n    if not isinstance(price, (int, float)):\n        raise TypeError(f\"Price must be a number, got {type(price).__name__}\")\n    if price < 0:\n        raise ValueError(f\"Price cannot be negative (got {price})\")\n    \n    # Validate discount percent\n    if not isinstance(discount_percent, (int, float)):\n        raise TypeError(f\"Discount must be a number, got {type(discount_percent).__name__}\")\n    if not 0 <= discount_percent <= 100:\n        raise ValueError(f\"Discount must be 0-100% (got {discount_percent})\")\n    \n    # Validate coupon code (optional)\n    if coupon_code is not None and not isinstance(coupon_code, str):\n        raise TypeError(\"Coupon code must be a string\")\n    \n    # Apply discount\n    discount_amount = price * (discount_percent / 100)\n    discounted_price = price - discount_amount\n    \n    # Apply coupon if provided\n    if coupon_code:\n        coupon_code = coupon_code.strip().upper()\n        if coupon_code == \"SAVE10\":\n            discounted_price *= 0.9  # Extra 10% off\n            print(f\"  Coupon '{coupon_code}' applied: -10%\")\n    \n    return round(discounted_price, 2)\n\n# Test defensive function\nprint(\"\\nTest 1: Valid inputs\")\ntry:\n    result = calculate_discount(100, 20, \"SAVE10\")\n    print(f\"  Final price: ${result}\\n\")\nexcept (TypeError, ValueError) as e:\n    print(f\"  Error: {e}\\n\")\n\nprint(\"Test 2: Invalid price type\")\ntry:\n    result = calculate_discount(\"100\", 20)\n    print(f\"  Final price: ${result}\\n\")\nexcept (TypeError, ValueError) as e:\n    print(f\"  Error: {e}\\n\")\n\nprint(\"Test 3: Invalid discount range\")\ntry:\n    result = calculate_discount(100, 150)\n    print(f\"  Final price: ${result}\\n\")\nexcept (TypeError, ValueError) as e:\n    print(f\"  Error: {e}\\n\")\n\nprint(\"Test 4: Invalid coupon type\")\ntry:\n    result = calculate_discount(100, 20, 12345)\n    print(f\"  Final price: ${result}\\n\")\nexcept (TypeError, ValueError) as e:\n    print(f\"  Error: {e}\\n\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: Validation Patterns",
              "content": "**Input Validation Checklist:**\n\n**1. Check for empty/null:**\n```python\nif not value or value.strip() == \"\":\n    raise ValueError(\"Input cannot be empty\")\n```\n\n**2. Type validation:**\n```python\n# Check if value is the right type\nif not isinstance(value, int):\n    raise TypeError(f\"Expected int, got {type(value).__name__}\")\n\n# Accept multiple types\nif not isinstance(price, (int, float)):\n    raise TypeError(\"Price must be a number\")\n```\n\n**3. Range validation:**\n```python\n# Check numeric range\nif not 0 <= age <= 120:\n    raise ValueError(f\"Age must be 0-120, got {age}\")\n\n# Check string length\nif len(password) < 8:\n    raise ValueError(\"Password must be at least 8 characters\")\n```\n\n**4. Format validation:**\n```python\n# Email contains @\nif \"@\" not in email:\n    raise ValueError(\"Invalid email format\")\n\n# String is numeric\nif not value.isdigit():\n    raise ValueError(\"Must contain only digits\")\n```\n\n**5. Sanitization (clean the input):**\n```python\n# Remove whitespace\nvalue = value.strip()\n\n# Convert to lowercase for comparison\nvalue = value.lower()\n\n# Remove dangerous characters\nvalue = value.replace(\";\", \"\").replace(\"--\", \"\")\n```\n\n**EAFP vs LBYL:**\n\n**LBYL (Look Before You Leap):**\n```python\n# Check condition first, then act\nif key in dictionary:\n    value = dictionary[key]\nelse:\n    value = default\n\nif os.path.exists(filename):\n    with open(filename) as f:\n        data = f.read()\n```\n\n**EAFP (Easier to Ask Forgiveness than Permission):**\n```python\n# Try it, handle errors if they occur\ntry:\n    value = dictionary[key]\nexcept KeyError:\n    value = default\n\ntry:\n    with open(filename) as f:\n        data = f.read()\nexcept FileNotFoundError:\n    data = None\n```\n\n**When to use each:**\n\n**Use LBYL when:**\n- Simple conditions (if key in dict)\n- Readability matters more than performance\n- You want to avoid exceptions in common cases\n\n**Use EAFP when:**\n- The success case is more common than failure\n- Race conditions possible (file might be deleted between check and use)\n- More Pythonic (\"ask forgiveness\")\n\n**Defensive Programming Best Practices:**\n\n```python\ndef robust_function(param1, param2=None):\n    \"\"\"Template for defensive programming.\"\"\"\n    \n    # 1. Validate all parameters\n    if param1 is None:\n        raise ValueError(\"param1 is required\")\n    \n    if not isinstance(param1, str):\n        raise TypeError(\"param1 must be a string\")\n    \n    # 2. Sanitize input\n    param1 = param1.strip()\n    \n    # 3. Check business rules\n    if len(param1) < 3:\n        raise ValueError(\"param1 must be at least 3 characters\")\n    \n    # 4. Handle optional parameters\n    if param2 is None:\n        param2 = default_value\n    \n    # 5. Use try/except for risky operations\n    try:\n        result = risky_operation(param1)\n    except SomeError as e:\n        # Log and handle\n        logger.error(f\"Operation failed: {e}\")\n        return None\n    \n    return result\n```\n\n**Type hints (Python 3.5+) help with validation:**\n```python\ndef process_user(name: str, age: int) -> dict:\n    \"\"\"Type hints document expected types.\"\"\"\n    # Still need runtime validation!\n    if not isinstance(name, str):\n        raise TypeError(\"name must be str\")\n    return {\"name\": name, \"age\": age}\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Validating After Using the Value**\n```python\n# WRONG - Using value before validation\ndef process_age(age):\n    birth_year = 2024 - age  # Used before validation!\n    if age < 0 or age > 150:\n        raise ValueError(\"Invalid age\")\n    return birth_year\n\n# CORRECT - Validate first, then use\ndef process_age(age):\n    if age < 0 or age > 150:\n        raise ValueError(\"Invalid age\")\n    birth_year = 2024 - age\n    return birth_year\n```\n\n**2. Not Validating Type Before Value**\n```python\n# WRONG - Value check fails on wrong type\ndef set_count(count):\n    if count < 0:  # TypeError if count is string!\n        raise ValueError(\"Count must be positive\")\n\n# CORRECT - Check type first\ndef set_count(count):\n    if not isinstance(count, int):\n        raise TypeError(f\"Expected int, got {type(count).__name__}\")\n    if count < 0:\n        raise ValueError(\"Count must be positive\")\n```\n\n**3. Trusting Input Without Sanitization**\n```python\n# WRONG - User input used directly\nfilename = input(\"Enter filename: \")\nwith open(filename) as f:  # Path traversal vulnerability!\n    data = f.read()\n\n# CORRECT - Sanitize and validate input\nimport os\nfilename = input(\"Enter filename: \")\nsafe_name = os.path.basename(filename)  # Remove path components\nif not safe_name.endswith('.txt'):\n    raise ValueError(\"Only .txt files allowed\")\n```\n\n**4. Using assert for Input Validation**\n```python\n# WRONG - assert can be disabled with -O flag\ndef withdraw(amount):\n    assert amount > 0, \"Amount must be positive\"  # Skipped with python -O!\n    return balance - amount\n\n# CORRECT - Use explicit validation\ndef withdraw(amount):\n    if amount <= 0:\n        raise ValueError(\"Amount must be positive\")\n    return balance - amount\n```\n\n**5. Inconsistent Validation Across Functions**\n```python\n# WRONG - Different validation in different places\ndef create_user(age):\n    if age < 18:\n        raise ValueError(\"Must be 18+\")\n\ndef update_user(age):\n    if age < 0:  # Different rule!\n        raise ValueError(\"Invalid age\")\n\n# CORRECT - Centralize validation\ndef validate_age(age, min_age=0):\n    if not isinstance(age, int) or age < min_age:\n        raise ValueError(f\"Age must be >= {min_age}\")\n\ndef create_user(age):\n    validate_age(age, min_age=18)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Always validate user input** - never trust it! Check type, format, range, and empty/null values before using input.\n- **Defensive programming:** Assume everything can go wrong. Validate parameters, check types, handle edge cases, provide defaults.\n- **Validation order:** (1) Check not None/empty, (2) Check type with isinstance(), (3) Sanitize (strip, lower), (4) Check format/range.\n- **EAFP (Easier to Ask Forgiveness than Permission)** is more Pythonic than LBYL. Try the operation, catch exceptions if they occur.\n- **LBYL (Look Before You Leap)** is okay for simple checks (if key in dict:) where readability matters more than performance.\n- **Type checking:** Use isinstance(value, type) to check types. Can check multiple types: isinstance(x, (int, float)).\n- **Provide actionable error messages:** Tell users what's wrong, what's expected, and what they provided. 'Age must be 13-120, got 10' beats 'Invalid age'.\n- **Sanitize input:** Use .strip() to remove whitespace, .lower() for case-insensitive comparison. But DON'T strip passwords!\n- **Range validation:** Always check numeric ranges (0 <= age <= 120), string lengths (3 <= len(username) <= 20), and limits."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-05-challenge-3",
              "title": "Interactive Exercise: Build a User Registration Validator",
              "description": "Create a user registration validator that checks:\n1. **Username:** 3-20 characters, alphanumeric only, not empty\n2. **Email:** Valid format (contains @ and .)\n3. **Age:** Integer between 13-120\n4. **Password:** At least 8 characters\n\nReturn True if all valid, raise appropriate exceptions if any validation fails.\n\n**Your task:**\nImplement validate_registration() with comprehensive validation.\n\n**Starter code:**",
              "instructions": "Create a user registration validator that checks:\n1. **Username:** 3-20 characters, alphanumeric only, not empty\n2. **Email:** Valid format (contains @ and .)\n3. **Age:** Integer between 13-120\n4. **Password:** At least 8 characters\n\nReturn True if all valid, raise appropriate exceptions if any validation fails.\n\n**Your task:**\nImplement validate_registration() with comprehensive validation.\n\n**Starter code:**",
              "starterCode": "def validate_registration(username, email, age, password):\n    \"\"\"Validate user registration data.\"\"\"\n    \n    # TODO: Validate username\n    # - Not empty (after stripping)\n    # - 3-20 characters\n    # - Only letters and numbers (use .isalnum())\n    \n    # TODO: Validate email\n    # - Not empty\n    # - Contains @\n    # - Contains . after @\n    \n    # TODO: Validate age\n    # - Is an integer (isinstance)\n    # - Between 13-120\n    \n    # TODO: Validate password\n    # - Not empty\n    # - At least 8 characters\n    \n    return True\n\n# Test cases\ntest_cases = [\n    (\"alice123\", \"alice@example.com\", 25, \"SecurePass123\"),  # Valid\n    (\"\", \"alice@example.com\", 25, \"SecurePass123\"),  # Empty username\n    (\"ab\", \"alice@example.com\", 25, \"SecurePass123\"),  # Short username\n    (\"alice123\", \"invalid-email\", 25, \"SecurePass123\"),  # Invalid email\n    (\"alice123\", \"alice@example.com\", 10, \"SecurePass123\"),  # Too young\n    (\"alice123\", \"alice@example.com\", 25, \"short\"),  # Short password\n]\n\nfor i, (user, email, age, pwd) in enumerate(test_cases, 1):\n    print(f\"\\nTest {i}: user='{user}', email='{email}', age={age}\")\n    try:\n        if validate_registration(user, email, age, pwd):\n            print(\"  ‚úì Registration valid\")\n    except (ValueError, TypeError) as e:\n        print(f\"  ‚úó {e}\")",
              "solution": "# User Registration Validator\n# This solution demonstrates comprehensive input validation\n\ndef validate_registration(username, email, age, password):\n    \"\"\"Validate user registration data.\"\"\"\n    \n    # Step 1: Validate username\n    if not username.strip():\n        raise ValueError(\"Username cannot be empty\")\n    if not 3 <= len(username) <= 20:\n        raise ValueError(f\"Username must be 3-20 characters (got {len(username)})\")\n    if not username.isalnum():\n        raise ValueError(\"Username must contain only letters and numbers\")\n    \n    # Step 2: Validate email\n    if not email.strip():\n        raise ValueError(\"Email cannot be empty\")\n    if '@' not in email:\n        raise ValueError(\"Email must contain @\")\n    # Check for . after @\n    at_index = email.index('@')\n    if '.' not in email[at_index:]:\n        raise ValueError(\"Email must contain . after @\")\n    \n    # Step 3: Validate age\n    if not isinstance(age, int):\n        raise TypeError(f\"Age must be an integer, got {type(age).__name__}\")\n    if not 13 <= age <= 120:\n        raise ValueError(f\"Age must be between 13-120 (got {age})\")\n    \n    # Step 4: Validate password\n    if not password:\n        raise ValueError(\"Password cannot be empty\")\n    if len(password) < 8:\n        raise ValueError(f\"Password must be at least 8 characters (got {len(password)})\")\n    \n    return True\n\n# Test cases\ntest_cases = [\n    (\"alice123\", \"alice@example.com\", 25, \"SecurePass123\"),  # Valid\n    (\"\", \"alice@example.com\", 25, \"SecurePass123\"),  # Empty username\n    (\"ab\", \"alice@example.com\", 25, \"SecurePass123\"),  # Short username\n    (\"alice123\", \"invalid-email\", 25, \"SecurePass123\"),  # Invalid email\n    (\"alice123\", \"alice@example.com\", 10, \"SecurePass123\"),  # Too young\n    (\"alice123\", \"alice@example.com\", 25, \"short\"),  # Short password\n]\n\nfor i, (user, email, age, pwd) in enumerate(test_cases, 1):\n    print(f\"Test {i}: user='{user}', email='{email}', age={age}\")\n    try:\n        if validate_registration(user, email, age, pwd):\n            print(\"  Registration valid\")\n    except (ValueError, TypeError) as e:\n        print(f\"  Error: {e}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use if not username.strip(): for empty check, if not 3 <= len(username) <= 20: for length, if not username.isalnum(): for alphanumeric check. Similar pattern for other fields."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-08-lesson-06",
          "title": "Mini-Project: Robust Calculator with Complete Error Handling",
          "moduleId": "module-08",
          "order": 6,
          "estimatedMinutes": 45,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Project Overview: The Unbreakable Calculator",
              "content": "**The Challenge:** Build a calculator that NEVER crashes, no matter what the user does.\n\n**Real-world scenario:** You're building a calculator for a critical system (medical device, aircraft control, financial trading). It CANNOT crash. Users might:\n- Type letters instead of numbers\n- Divide by zero\n- Enter empty input\n- Use invalid operations\n- Provide huge numbers that cause overflow\n- Enter malformed expressions\n\nYour calculator must handle ALL of these gracefully, showing helpful error messages and letting users try again.\n\n**What you'll build:**\n\n1. **Basic Calculator Functions:**\n   - Add, subtract, multiply, divide\n   - Power, square root, modulo\n\n2. **Advanced Features:**\n   - Expression evaluation (\"2 + 3 * 4\")\n   - Memory storage (store results)\n   - Calculation history\n\n3. **Error Handling:**\n   - Custom exceptions for calculator-specific errors\n   - Input validation for all operations\n   - Safe expression evaluation\n   - Graceful error recovery\n\n4. **Defensive Programming:**\n   - Type checking\n   - Range validation\n   - Clear error messages\n   - Finally blocks for cleanup\n\n**Project structure:**\n- Custom exception classes\n- Calculator class with validated methods\n- Interactive REPL (Read-Eval-Print Loop)\n- Comprehensive error handling throughout\n\nThis project demonstrates production-level code that's robust, maintainable, and user-friendly."
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Implementation: Robust Calculator",
              "content": "This production-ready calculator demonstrates:\n\n**1. Custom Exception Hierarchy:**\n- Base `CalculatorError` for all calculator errors\n- Specific exceptions for each error type\n- Clear, descriptive error messages\n\n**2. Comprehensive Validation:**\n- Type checking with `isinstance()`\n- Range validation (no infinity, NaN)\n- Defensive programming throughout\n\n**3. Error Handling Patterns:**\n- Try/except for risky operations\n- Finally for cleanup (logging)\n- EAFP approach where appropriate\n\n**4. User-Friendly Features:**\n- Clear error messages\n- Calculation history\n- Memory storage\n- Interactive REPL\n\n**5. Production-Level Code:**\n- Type hints for documentation\n- Docstrings for all methods\n- Proper exception hierarchy\n- Edge case handling",
              "code": "\"\"\"Robust Calculator with Comprehensive Error Handling\n\nA production-ready calculator that handles all possible errors gracefully.\nDemonstrates: custom exceptions, validation, defensive programming, EAFP.\n\"\"\"\n\nimport math\nfrom typing import List, Tuple\n\n# ============================================================================\n# Custom Exception Classes\n# ============================================================================\n\nclass CalculatorError(Exception):\n    \"\"\"Base exception for all calculator errors.\"\"\"\n    pass\n\nclass InvalidOperationError(CalculatorError):\n    \"\"\"Raised when an invalid operation is requested.\"\"\"\n    pass\n\nclass InvalidNumberError(CalculatorError):\n    \"\"\"Raised when input cannot be converted to a number.\"\"\"\n    pass\n\nclass DivisionByZeroError(CalculatorError):\n    \"\"\"Raised when attempting to divide by zero.\"\"\"\n    pass\n\nclass NegativeSquareRootError(CalculatorError):\n    \"\"\"Raised when attempting square root of negative number.\"\"\"\n    pass\n\n# ============================================================================\n# Calculator Class\n# ============================================================================\n\nclass RobustCalculator:\n    \"\"\"Calculator with comprehensive error handling.\"\"\"\n    \n    def __init__(self):\n        \"\"\"Initialize calculator with memory and history.\"\"\"\n        self.memory = 0.0\n        self.history: List[Tuple[str, float]] = []\n        self.operations = {\n            'add': self.add,\n            'subtract': self.subtract,\n            'multiply': self.multiply,\n            'divide': self.divide,\n            'power': self.power,\n            'sqrt': self.square_root,\n            'modulo': self.modulo,\n        }\n    \n    def _validate_number(self, value, param_name=\"value\"):\n        \"\"\"Validate that value is a number.\n        \n        Args:\n            value: Value to validate\n            param_name: Name for error messages\n            \n        Returns:\n            float: Validated number\n            \n        Raises:\n            InvalidNumberError: If value is not a number\n        \"\"\"\n        if not isinstance(value, (int, float)):\n            raise InvalidNumberError(\n                f\"{param_name} must be a number, got {type(value).__name__}\"\n            )\n        \n        # Check for infinity and NaN\n        if math.isinf(value):\n            raise InvalidNumberError(f\"{param_name} cannot be infinity\")\n        if math.isnan(value):\n            raise InvalidNumberError(f\"{param_name} cannot be NaN\")\n        \n        return float(value)\n    \n    def _record_operation(self, operation: str, result: float):\n        \"\"\"Record operation in history.\"\"\"\n        self.history.append((operation, result))\n        # Keep only last 10 operations\n        if len(self.history) > 10:\n            self.history.pop(0)\n    \n    def add(self, a, b):\n        \"\"\"Add two numbers.\"\"\"\n        a = self._validate_number(a, \"first number\")\n        b = self._validate_number(b, \"second number\")\n        result = a + b\n        self._record_operation(f\"{a} + {b}\", result)\n        return result\n    \n    def subtract(self, a, b):\n        \"\"\"Subtract b from a.\"\"\"\n        a = self._validate_number(a, \"first number\")\n        b = self._validate_number(b, \"second number\")\n        result = a - b\n        self._record_operation(f\"{a} - {b}\", result)\n        return result\n    \n    def multiply(self, a, b):\n        \"\"\"Multiply two numbers.\"\"\"\n        a = self._validate_number(a, \"first number\")\n        b = self._validate_number(b, \"second number\")\n        result = a * b\n        self._record_operation(f\"{a} * {b}\", result)\n        return result\n    \n    def divide(self, a, b):\n        \"\"\"Divide a by b.\n        \n        Raises:\n            DivisionByZeroError: If b is zero\n        \"\"\"\n        a = self._validate_number(a, \"dividend\")\n        b = self._validate_number(b, \"divisor\")\n        \n        if b == 0:\n            raise DivisionByZeroError(\n                \"Cannot divide by zero. Please enter a non-zero divisor.\"\n            )\n        \n        result = a / b\n        self._record_operation(f\"{a} / {b}\", result)\n        return result\n    \n    def power(self, base, exponent):\n        \"\"\"Raise base to exponent.\"\"\"\n        base = self._validate_number(base, \"base\")\n        exponent = self._validate_number(exponent, \"exponent\")\n        \n        try:\n            result = base ** exponent\n            # Check for overflow\n            if math.isinf(result):\n                raise InvalidNumberError(\n                    f\"Result too large: {base}^{exponent} causes overflow\"\n                )\n            self._record_operation(f\"{base} ^ {exponent}\", result)\n            return result\n        except OverflowError:\n            raise InvalidNumberError(\n                f\"Result too large: {base}^{exponent} causes overflow\"\n            )\n    \n    def square_root(self, number):\n        \"\"\"Calculate square root.\n        \n        Raises:\n            NegativeSquareRootError: If number is negative\n        \"\"\"\n        number = self._validate_number(number, \"number\")\n        \n        if number < 0:\n            raise NegativeSquareRootError(\n                f\"Cannot calculate square root of negative number: {number}. \"\n                f\"Use complex numbers for this operation.\"\n            )\n        \n        result = math.sqrt(number)\n        self._record_operation(f\"sqrt({number})\", result)\n        return result\n    \n    def modulo(self, a, b):\n        \"\"\"Calculate a modulo b.\n        \n        Raises:\n            DivisionByZeroError: If b is zero\n        \"\"\"\n        a = self._validate_number(a, \"dividend\")\n        b = self._validate_number(b, \"divisor\")\n        \n        if b == 0:\n            raise DivisionByZeroError(\n                \"Cannot perform modulo with zero divisor\"\n            )\n        \n        result = a % b\n        self._record_operation(f\"{a} % {b}\", result)\n        return result\n    \n    def store_memory(self, value):\n        \"\"\"Store value in memory.\"\"\"\n        value = self._validate_number(value, \"memory value\")\n        self.memory = value\n        return value\n    \n    def recall_memory(self):\n        \"\"\"Recall value from memory.\"\"\"\n        return self.memory\n    \n    def clear_memory(self):\n        \"\"\"Clear memory.\"\"\"\n        self.memory = 0.0\n    \n    def show_history(self):\n        \"\"\"Show calculation history.\"\"\"\n        if not self.history:\n            return \"No calculation history\"\n        \n        result = \"\\nCalculation History (last 10):\\n\"\n        result += \"-\" * 40 + \"\\n\"\n        for i, (operation, value) in enumerate(self.history, 1):\n            result += f\"{i}. {operation} = {value}\\n\"\n        return result\n    \n    def clear_history(self):\n        \"\"\"Clear calculation history.\"\"\"\n        self.history.clear()\n\n# ============================================================================\n# Interactive Calculator REPL\n# ============================================================================\n\ndef safe_float_input(prompt):\n    \"\"\"Safely get a float from user.\n    \n    Args:\n        prompt: Prompt to display\n        \n    Returns:\n        float: Validated number\n        \n    Raises:\n        InvalidNumberError: If input is not a valid number\n        ValueError: If input is empty\n    \"\"\"\n    user_input = input(prompt).strip()\n    \n    if not user_input:\n        raise ValueError(\"Input cannot be empty\")\n    \n    try:\n        return float(user_input)\n    except ValueError:\n        raise InvalidNumberError(\n            f\"'{user_input}' is not a valid number. Please enter a numeric value.\"\n        )\n\ndef run_calculator():\n    \"\"\"Run the interactive calculator.\"\"\"\n    calc = RobustCalculator()\n    \n    print(\"=\"*50)\n    print(\"  ROBUST CALCULATOR - Error Handling Demo\")\n    print(\"=\"*50)\n    print(\"\\nAvailable operations:\")\n    print(\"  add, subtract, multiply, divide\")\n    print(\"  power, sqrt, modulo\")\n    print(\"  memory, recall, clear-memory\")\n    print(\"  history, clear-history\")\n    print(\"  quit\\n\")\n    \n    while True:\n        try:\n            # Get operation\n            print(\"-\" * 50)\n            operation = input(\"\\nEnter operation (or 'quit' to exit): \").strip().lower()\n            \n            if not operation:\n                print(\"‚ùå Please enter an operation\")\n                continue\n            \n            if operation in ('quit', 'exit', 'q'):\n                print(\"\\nüëã Thanks for using Robust Calculator!\")\n                break\n            \n            # Handle special operations\n            if operation == 'history':\n                print(calc.show_history())\n                continue\n            \n            if operation == 'clear-history':\n                calc.clear_history()\n                print(\"‚úì History cleared\")\n                continue\n            \n            if operation == 'recall':\n                print(f\"Memory: {calc.recall_memory()}\")\n                continue\n            \n            if operation == 'clear-memory':\n                calc.clear_memory()\n                print(\"‚úì Memory cleared\")\n                continue\n            \n            # Operations requiring one operand\n            if operation == 'sqrt':\n                num = safe_float_input(\"Enter number: \")\n                result = calc.square_root(num)\n                print(f\"\\n‚úì sqrt({num}) = {result}\")\n                continue\n            \n            if operation == 'memory':\n                value = safe_float_input(\"Enter value to store: \")\n                calc.store_memory(value)\n                print(f\"‚úì Stored {value} in memory\")\n                continue\n            \n            # Operations requiring two operands\n            if operation in calc.operations:\n                a = safe_float_input(\"Enter first number: \")\n                b = safe_float_input(\"Enter second number: \")\n                \n                result = calc.operations[operation](a, b)\n                print(f\"\\n‚úì Result: {result}\")\n            else:\n                raise InvalidOperationError(\n                    f\"Unknown operation '{operation}'. \"\n                    f\"Type an operation name from the list above.\"\n                )\n        \n        except InvalidNumberError as e:\n            print(f\"\\n‚ùå Invalid Number: {e}\")\n        except DivisionByZeroError as e:\n            print(f\"\\n‚ùå Division Error: {e}\")\n        except NegativeSquareRootError as e:\n            print(f\"\\n‚ùå Math Error: {e}\")\n        except InvalidOperationError as e:\n            print(f\"\\n‚ùå Invalid Operation: {e}\")\n        except ValueError as e:\n            print(f\"\\n‚ùå Input Error: {e}\")\n        except CalculatorError as e:\n            print(f\"\\n‚ùå Calculator Error: {e}\")\n        except KeyboardInterrupt:\n            print(\"\\n\\nüëã Calculator interrupted. Goodbye!\")\n            break\n        except Exception as e:\n            print(f\"\\n‚ùå Unexpected Error: {e}\")\n            print(\"Please report this bug!\")\n        finally:\n            # Always runs - could be used for logging\n            pass\n\n# ============================================================================\n# Demo and Tests\n# ============================================================================\n\nprint(\"=\" * 60)\nprint(\"DEMO: Testing Robust Calculator\")\nprint(\"=\" * 60)\n\ncalc = RobustCalculator()\n\nprint(\"\\n1. Valid Operations:\")\nprint(f\"   10 + 5 = {calc.add(10, 5)}\")\nprint(f\"   20 - 8 = {calc.subtract(20, 8)}\")\nprint(f\"   6 * 7 = {calc.multiply(6, 7)}\")\nprint(f\"   15 / 3 = {calc.divide(15, 3)}\")\nprint(f\"   2 ^ 8 = {calc.power(2, 8)}\")\nprint(f\"   sqrt(16) = {calc.square_root(16)}\")\n\nprint(\"\\n2. Error Handling:\")\n\ntry:\n    calc.divide(10, 0)\nexcept DivisionByZeroError as e:\n    print(f\"   ‚úì Caught division by zero: {e}\")\n\ntry:\n    calc.square_root(-4)\nexcept NegativeSquareRootError as e:\n    print(f\"   ‚úì Caught negative sqrt: {e}\")\n\ntry:\n    calc.add(\"hello\", 5)\nexcept InvalidNumberError as e:\n    print(f\"   ‚úì Caught invalid number: {e}\")\n\ntry:\n    calc.power(10, 1000)  # Huge number\nexcept InvalidNumberError as e:\n    print(f\"   ‚úì Caught overflow: {e}\")\n\nprint(\"\\n3. Memory and History:\")\ncalc.store_memory(42)\nprint(f\"   Stored: {calc.recall_memory()}\")\nprint(f\"   {calc.show_history()}\")\n\nprint(\"\\n‚úì All error handling working correctly!\")\nprint(\"\\nTo run interactive calculator, call run_calculator()\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Code Architecture Breakdown",
              "content": "**Exception Hierarchy:**\n```\nCalculatorError (base)\n‚îú‚îÄ‚îÄ InvalidOperationError\n‚îú‚îÄ‚îÄ InvalidNumberError\n‚îú‚îÄ‚îÄ DivisionByZeroError\n‚îî‚îÄ‚îÄ NegativeSquareRootError\n```\n\nBenefits:\n- Can catch all calculator errors with `except CalculatorError`\n- Can catch specific errors separately\n- Clear error types for debugging\n\n**Validation Pattern (used throughout):**\n```python\ndef operation(self, param):\n    # 1. Validate input\n    param = self._validate_number(param, \"param_name\")\n    \n    # 2. Check business rules\n    if param == 0:\n        raise DivisionByZeroError(\"...\")\n    \n    # 3. Perform operation\n    result = do_calculation(param)\n    \n    # 4. Record for history\n    self._record_operation(\"...\", result)\n    \n    # 5. Return result\n    return result\n```\n\n**Error Handling in REPL:**\n```python\nwhile True:\n    try:\n        # Get user input\n        # Validate\n        # Execute operation\n        # Display result\n    except SpecificError1 as e:\n        # Handle gracefully\n    except SpecificError2 as e:\n        # Handle gracefully\n    except Exception as e:\n        # Unexpected errors\n    finally:\n        # Always cleanup\n```\n\nBenefits:\n- User never sees crashes\n- Specific errors get specific messages\n- Unexpected errors are logged\n- Calculator keeps running\n\n**Defensive Programming Checklist (applied throughout):**\n\n‚úÖ **Every input validated:**\n- Type check: `isinstance(value, (int, float))`\n- Range check: `if b == 0: raise DivisionByZeroError`\n- Special values: Check for infinity, NaN\n\n‚úÖ **Clear error messages:**\n- What went wrong: \"Cannot divide by zero\"\n- What was expected: \"Please enter a non-zero divisor\"\n- How to fix it: Actionable guidance\n\n‚úÖ **Edge cases handled:**\n- Division by zero\n- Square root of negative\n- Overflow (numbers too large)\n- Invalid types\n- Empty input\n\n‚úÖ **Graceful degradation:**\n- Error occurs ‚Üí Show message ‚Üí Let user try again\n- History preserved even after errors\n- Memory preserved\n\n**Why This Is Production-Ready:**\n\n1. **Never crashes** - all errors caught\n2. **Clear feedback** - users know what went wrong\n3. **Maintainable** - clear structure, documented\n4. **Testable** - each function isolated\n5. **Extensible** - easy to add new operations\n6. **User-friendly** - helpful messages, history, memory\n\nThis is how professional developers write robust code."
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Catching Too Broadly in Calculator Functions**\n```python\n# WRONG - Hides real bugs in your code\ndef calculate(a, op, b):\n    try:\n        if op == '+':\n            return a + b\n        # ... more operations\n    except Exception:\n        return \"Error\"  # What error? Bug hidden!\n\n# CORRECT - Catch specific, expected exceptions\ndef calculate(a, op, b):\n    try:\n        if op == '+':\n            return a + b\n        elif op == '/':\n            return a / b\n    except ZeroDivisionError:\n        return \"Error: Division by zero\"\n    except TypeError:\n        return \"Error: Invalid operand types\"\n```\n\n**2. Not Validating Operator Before Calculation**\n```python\n# WRONG - Invalid operator causes silent failure\ndef calculate(a, op, b):\n    if op == '+':\n        return a + b\n    elif op == '-':\n        return a - b\n    # What if op is '%'? Returns None silently!\n\n# CORRECT - Validate operator, fail explicitly\ndef calculate(a, op, b):\n    valid_ops = {'+', '-', '*', '/'}\n    if op not in valid_ops:\n        raise ValueError(f\"Invalid operator: {op}\")\n    # ... rest of logic\n```\n\n**3. Returning Mixed Types (Error Strings vs Numbers)**\n```python\n# WRONG - Caller can't distinguish error from result\ndef divide(a, b):\n    if b == 0:\n        return \"Error\"  # String mixed with number returns\n    return a / b\n\nresult = divide(10, 0)\nprint(result + 1)  # TypeError: can't add str and int!\n\n# CORRECT - Use exceptions for errors\ndef divide(a, b):\n    if b == 0:\n        raise ZeroDivisionError(\"Cannot divide by zero\")\n    return a / b\n```\n\n**4. Not Handling Floating Point Edge Cases**\n```python\n# WRONG - Doesn't handle special float values\ndef divide(a, b):\n    return a / b\n\nprint(divide(1.0, 0.0))   # Returns inf, not error!\nprint(divide(0.0, 0.0))   # Returns nan, not error!\n\n# CORRECT - Check for special values\nimport math\ndef divide(a, b):\n    result = a / b\n    if math.isinf(result) or math.isnan(result):\n        raise ValueError(\"Result is not a valid number\")\n    return result\n```\n\n**5. Losing Precision in Display**\n```python\n# WRONG - Showing too many decimal places\ndef calculate(a, op, b):\n    result = a / b\n    return result  # Returns 0.30000000000000004 for 0.1 + 0.2\n\n# CORRECT - Round for display, keep precision internally\ndef calculate(a, op, b):\n    result = a / b\n    return round(result, 10)  # Clean display value\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Production code never crashes.** Use comprehensive error handling to catch and recover from all possible errors gracefully.\n- **Custom exception hierarchies** make error handling precise and code self-documenting. Create a base exception class and specific subclasses.\n- **Validate everything.** Never trust user input. Check type, range, format, and edge cases before processing.\n- **Clear error messages are essential.** Tell users what went wrong, what was expected, and how to fix it. Vague errors frustrate users.\n- **Use try/except/finally** for risky operations. Finally ensures cleanup happens even if errors occur.\n- **Defensive programming mindset:** Assume everything can fail. Guard against it with validation, error handling, and fallbacks.\n- **EAFP (try/except) vs LBYL (if/check):** Python prefers EAFP, but use what makes sense for your situation.\n- **Separate concerns:** Validation logic, business logic, error handling, and UI should be separate. Makes code testable and maintainable.\n- **Document your code** with docstrings, type hints, and comments. Future you (and other developers) will thank you.\n- **Test error cases** as thoroughly as success cases. Error handling code needs testing too!\n- **Security matters:** When using dangerous functions like eval(), validate and sanitize input thoroughly. Use whitelists, not blacklists."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-08-lesson-06-challenge-3",
              "title": "Your Challenge: Extend the Calculator",
              "description": "**Challenge 1: Add Scientific Functions**\n\nAdd these operations to the calculator:\n1. `log(number, base)` - Logarithm with base (default base 10)\n2. `sin(angle)` - Sine (angle in degrees)\n3. `cos(angle)` - Cosine (angle in degrees)\n\nRequirements:\n- Validate inputs (log of negative raises error)\n- Convert degrees to radians for sin/cos\n- Handle edge cases\n- Add to history\n- Update interactive menu\n\n**Challenge 2: Expression Evaluator**\n\nAdd ability to evaluate expressions like \"2 + 3 * 4\":\n- Use `eval()` CAREFULLY with validation\n- Only allow numbers and operators\n- Prevent code injection\n- Handle syntax errors\n\n**Challenge 3: Persistent History**\n\nSave calculation history to a file:\n- Use try/except/finally for file operations\n- Handle FileNotFoundError\n- Create file if doesn't exist\n- Load history on startup\n- Save on exit\n\n**Starter code for Challenge 1:**",
              "instructions": "**Challenge 1: Add Scientific Functions**\n\nAdd these operations to the calculator:\n1. `log(number, base)` - Logarithm with base (default base 10)\n2. `sin(angle)` - Sine (angle in degrees)\n3. `cos(angle)` - Cosine (angle in degrees)\n\nRequirements:\n- Validate inputs (log of negative raises error)\n- Convert degrees to radians for sin/cos\n- Handle edge cases\n- Add to history\n- Update interactive menu\n\n**Challenge 2: Expression Evaluator**\n\nAdd ability to evaluate expressions like \"2 + 3 * 4\":\n- Use `eval()` CAREFULLY with validation\n- Only allow numbers and operators\n- Prevent code injection\n- Handle syntax errors\n\n**Challenge 3: Persistent History**\n\nSave calculation history to a file:\n- Use try/except/finally for file operations\n- Handle FileNotFoundError\n- Create file if doesn't exist\n- Load history on startup\n- Save on exit\n\n**Starter code for Challenge 1:**",
              "starterCode": "import math\n\nclass RobustCalculator:\n    # ... (previous code) ...\n    \n    def logarithm(self, number, base=10):\n        \"\"\"Calculate logarithm.\n        \n        Args:\n            number: Number to calculate log of\n            base: Logarithm base (default 10)\n            \n        Raises:\n            InvalidNumberError: If number <= 0 or base <= 0\n        \"\"\"\n        # TODO: Validate number and base\n        # TODO: Check number > 0 (can't log negative or zero)\n        # TODO: Check base > 0 and base != 1\n        # TODO: Calculate using math.log(number, base)\n        # TODO: Record in history\n        # TODO: Return result\n        pass\n    \n    def sine(self, angle_degrees):\n        \"\"\"Calculate sine (angle in degrees).\n        \n        Args:\n            angle_degrees: Angle in degrees\n            \n        Returns:\n            float: Sine of angle\n        \"\"\"\n        # TODO: Validate angle\n        # TODO: Convert to radians: math.radians(angle_degrees)\n        # TODO: Calculate: math.sin(angle_radians)\n        # TODO: Record in history\n        # TODO: Return result\n        pass\n    \n    def cosine(self, angle_degrees):\n        \"\"\"Calculate cosine (angle in degrees).\"\"\"\n        # TODO: Similar to sine\n        pass",
              "solution": "import math\n\n# Custom exception for invalid number operations\nclass InvalidNumberError(ValueError):\n    \"\"\"Raised when a number is invalid for the operation.\"\"\"\n    pass\n\nclass RobustCalculator:\n    \"\"\"Calculator with scientific functions and history.\"\"\"\n    \n    def __init__(self):\n        self.history = []\n    \n    def _record(self, operation, result):\n        \"\"\"Record an operation in history.\"\"\"\n        self.history.append({'operation': operation, 'result': result})\n    \n    def logarithm(self, number, base=10):\n        \"\"\"Calculate logarithm with validation.\"\"\"\n        # Step 1: Validate number\n        if not isinstance(number, (int, float)):\n            raise InvalidNumberError(f\"Number must be numeric, got {type(number).__name__}\")\n        if number <= 0:\n            raise InvalidNumberError(\"Logarithm requires a positive number\")\n        \n        # Step 2: Validate base\n        if not isinstance(base, (int, float)):\n            raise InvalidNumberError(f\"Base must be numeric, got {type(base).__name__}\")\n        if base <= 0 or base == 1:\n            raise InvalidNumberError(\"Base must be positive and not equal to 1\")\n        \n        # Step 3: Calculate and record\n        result = math.log(number, base)\n        self._record(f\"log{base}({number})\", result)\n        return result\n    \n    def sine(self, angle_degrees):\n        \"\"\"Calculate sine (angle in degrees).\"\"\"\n        # Step 1: Validate input\n        if not isinstance(angle_degrees, (int, float)):\n            raise InvalidNumberError(f\"Angle must be numeric, got {type(angle_degrees).__name__}\")\n        \n        # Step 2: Convert to radians and calculate\n        angle_radians = math.radians(angle_degrees)\n        result = math.sin(angle_radians)\n        \n        # Step 3: Record and return\n        self._record(f\"sin({angle_degrees}deg)\", result)\n        return result\n    \n    def cosine(self, angle_degrees):\n        \"\"\"Calculate cosine (angle in degrees).\"\"\"\n        # Step 1: Validate input\n        if not isinstance(angle_degrees, (int, float)):\n            raise InvalidNumberError(f\"Angle must be numeric, got {type(angle_degrees).__name__}\")\n        \n        # Step 2: Convert to radians and calculate\n        angle_radians = math.radians(angle_degrees)\n        result = math.cos(angle_radians)\n        \n        # Step 3: Record and return\n        self._record(f\"cos({angle_degrees}deg)\", result)\n        return result\n    \n    def show_history(self):\n        \"\"\"Display calculation history.\"\"\"\n        for i, entry in enumerate(self.history, 1):\n            print(f\"{i}. {entry['operation']} = {entry['result']:.6f}\")\n\n# Test the calculator\ncalc = RobustCalculator()\n\nprint(\"=== Scientific Calculator Tests ===\")\n\n# Logarithm tests\nprint(f\"log10(100) = {calc.logarithm(100)}\")\nprint(f\"log2(8) = {calc.logarithm(8, 2)}\")\n\n# Trigonometry tests\nprint(f\"sin(90) = {calc.sine(90)}\")\nprint(f\"cos(0) = {calc.cosine(0)}\")\nprint(f\"sin(45) = {calc.sine(45)}\")\n\n# Error handling test\ntry:\n    calc.logarithm(-5)\nexcept InvalidNumberError as e:\n    print(f\"Error: {e}\")\n\n# Show history\nprint(\"\\n=== Calculation History ===\")\ncalc.show_history()",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For logarithm: check if number <= 0: raise InvalidNumberError('Log requires positive number'). For sin/cos: angle_rad = math.radians(angle), then math.sin(angle_rad). Don't forget to record in history!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-09",
      "title": "File I/O",
      "description": "Reading and writing files",
      "difficulty": "intermediate",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-09-lesson-01",
          "title": "Reading and Writing Text Files",
          "moduleId": "module-09",
          "order": 1,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Your Program's Filing Cabinet",
              "content": "Until now, all your data disappeared when your program ended. Variables, lists, dictionaries - gone! Like writing on a whiteboard that gets erased every time you leave the room.\n\n**Files are permanent storage** - like writing in a notebook instead of on a whiteboard. Data stays even after your program ends.\n\n**Real-world analogy: A Filing Cabinet**\n\nOpening a file is like opening a filing cabinet drawer:\n\n**READ mode ('r'):** Open drawer to READ documents\n- You can look at the contents\n- You CANNOT add or change anything\n- If the drawer (file) doesn't exist ‚Üí Error!\n\n**WRITE mode ('w'):** Open drawer to WRITE new documents\n- You can add content\n- WARNING: Erases everything that was there before (starts fresh)\n- If drawer doesn't exist ‚Üí Creates it automatically\n\n**APPEND mode ('a'):** Open drawer to ADD MORE documents\n- You can add content to the END\n- Keeps existing content (doesn't erase)\n- If drawer doesn't exist ‚Üí Creates it\n\n**Common operations:**\n\n1. **Reading a file:**\n   - Open filing cabinet ('r' mode)\n   - Read the documents (read() or readlines())\n   - Close filing cabinet\n\n2. **Writing a file:**\n   - Open filing cabinet ('w' mode)\n   - Write your documents (write())\n   - Close filing cabinet (IMPORTANT - saves changes!)\n\n**Critical rule:** Always CLOSE files when done! Like closing the filing cabinet drawer. If you don't close it, changes might not be saved, and other programs can't access the file.\n\nPython has a better way (context managers with `with`) that auto-closes files, which we'll learn in the next lesson."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Reading and Writing Files",
              "content": "Key concepts:\n1. **open(filename, mode)** opens a file and returns a file object\n2. **read()** reads entire file as one string\n3. **readline()** reads one line at a time\n4. **readlines()** reads all lines into a list\n5. **write(string)** writes content (must include \\n for new lines)\n6. **close()** MUST be called to save changes and free resources\n7. **File modes:** 'r' (read), 'w' (write/overwrite), 'a' (append)\n\nWithout close(), changes may not be saved!",
              "code": "# Example 1: Writing to a file\nprint(\"=== Writing to a File ===\")\n\n# Open file in WRITE mode (creates if doesn't exist, overwrites if exists)\nfile = open(\"greeting.txt\", \"w\")\n\n# Write content (note: must add \\n for new lines yourself)\nfile.write(\"Hello, World!\\n\")\nfile.write(\"Welcome to Python file handling.\\n\")\nfile.write(\"This is line 3.\\n\")\n\n# MUST close the file to save changes!\nfile.close()\n\nprint(\"‚úì Created greeting.txt\\n\")\n\n# Example 2: Reading an entire file\nprint(\"=== Reading Entire File ===\")\n\n# Open file in READ mode\nfile = open(\"greeting.txt\", \"r\")\n\n# Read all content at once\ncontent = file.read()\nprint(\"Content:\")\nprint(content)\n\n# Close the file\nfile.close()\nprint(\"‚úì File closed\\n\")\n\n# Example 3: Reading line by line\nprint(\"=== Reading Line by Line ===\")\n\nfile = open(\"greeting.txt\", \"r\")\n\n# readline() reads ONE line at a time\nline1 = file.readline()\nline2 = file.readline()\nline3 = file.readline()\n\nprint(f\"Line 1: {line1.strip()}\")  # .strip() removes \\n\nprint(f\"Line 2: {line2.strip()}\")\nprint(f\"Line 3: {line3.strip()}\")\n\nfile.close()\nprint(\"\")\n\n# Example 4: Reading all lines into a list\nprint(\"=== Reading All Lines as List ===\")\n\nfile = open(\"greeting.txt\", \"r\")\n\n# readlines() returns a list of all lines\nlines = file.readlines()\nprint(f\"Number of lines: {len(lines)}\")\n\nfor i, line in enumerate(lines, 1):\n    print(f\"  {i}. {line.strip()}\")\n\nfile.close()\nprint(\"\")\n\n# Example 5: Appending to a file\nprint(\"=== Appending to a File ===\")\n\n# APPEND mode - adds to end without erasing existing content\nfile = open(\"greeting.txt\", \"a\")\n\nfile.write(\"This line was appended.\\n\")\nfile.write(\"So was this one!\\n\")\n\nfile.close()\n\nprint(\"‚úì Appended content\\n\")\n\n# Read updated file\nprint(\"=== Updated File Content ===\")\nfile = open(\"greeting.txt\", \"r\")\nprint(file.read())\nfile.close()\n\n# Example 6: Common file modes\nprint(\"=== File Modes Reference ===\")\nprint(\"'r'  - Read (default). File must exist.\")\nprint(\"'w'  - Write. Creates file or OVERWRITES existing.\")\nprint(\"'a'  - Append. Creates file or adds to end.\")\nprint(\"'r+' - Read and Write. File must exist.\")\nprint(\"'w+' - Write and Read. Creates or overwrites.\")\nprint(\"'a+' - Append and Read. Creates or adds to end.\")\nprint(\"\")\n\n# Example 7: Error handling with files\nprint(\"=== Error Handling ===\")\n\ntry:\n    file = open(\"nonexistent.txt\", \"r\")\n    content = file.read()\n    file.close()\nexcept FileNotFoundError:\n    print(\"‚ùå Error: File 'nonexistent.txt' does not exist!\")\n    print(\"   Use 'w' or 'a' mode to create it, or check the filename.\")\n\nprint(\"\\n‚úì Program continues despite error\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: File Operations",
              "content": "**Opening Files:**\n```python\n# Basic syntax\nfile_object = open(filename, mode)\n\n# Examples\nfile = open(\"data.txt\", \"r\")   # Read mode\nfile = open(\"output.txt\", \"w\") # Write mode\nfile = open(\"log.txt\", \"a\")    # Append mode\n```\n\n**Reading Methods:**\n\n**read() - Read entire file as one string:**\n```python\nfile = open(\"file.txt\", \"r\")\ncontent = file.read()  # \"Line 1\\nLine 2\\nLine 3\\n\"\nfile.close()\n```\n\n**readline() - Read one line at a time:**\n```python\nfile = open(\"file.txt\", \"r\")\nline1 = file.readline()  # \"Line 1\\n\"\nline2 = file.readline()  # \"Line 2\\n\"\nfile.close()\n```\n\n**readlines() - Read all lines into a list:**\n```python\nfile = open(\"file.txt\", \"r\")\nlines = file.readlines()  # [\"Line 1\\n\", \"Line 2\\n\", \"Line 3\\n\"]\nfile.close()\n```\n\n**Iterating over file lines (memory efficient):**\n```python\nfile = open(\"file.txt\", \"r\")\nfor line in file:  # Reads one line at a time\n    print(line.strip())\nfile.close()\n```\n\n**Writing Methods:**\n\n**write() - Write a string:**\n```python\nfile = open(\"file.txt\", \"w\")\nfile.write(\"Hello\\n\")  # Must add \\n yourself!\nfile.write(\"World\\n\")\nfile.close()\n```\n\n**writelines() - Write a list of strings:**\n```python\nfile = open(\"file.txt\", \"w\")\nlines = [\"Line 1\\n\", \"Line 2\\n\", \"Line 3\\n\"]\nfile.writelines(lines)  # Doesn't add \\n automatically!\nfile.close()\n```\n\n**File Modes Quick Reference:**\n\n| Mode | Description | Creates File? | Overwrites? |\n|------|-------------|---------------|-------------|\n| 'r'  | Read only   | No (error)    | N/A         |\n| 'w'  | Write       | Yes           | YES         |\n| 'a'  | Append      | Yes           | No          |\n| 'r+' | Read+Write  | No (error)    | No          |\n| 'w+' | Write+Read  | Yes           | YES         |\n| 'a+' | Append+Read | Yes           | No          |\n\n**Important notes:**\n\n1. **Always close files:** file.close() or use `with` (next lesson)\n\n2. **Write mode ('w') overwrites:** All existing content is DELETED!\n\n3. **Read mode requires file exists:** FileNotFoundError if not found\n\n4. **Line endings:** write() doesn't add \\n automatically - you must add it\n\n5. **strip() removes \\n:** When reading lines, use .strip() to remove newline characters\n\n**Common pattern for reading:**\n```python\ntry:\n    file = open(\"data.txt\", \"r\")\n    content = file.read()\n    file.close()\nexcept FileNotFoundError:\n    print(\"File not found!\")\n```\n\n**Common pattern for writing:**\n```python\nfile = open(\"output.txt\", \"w\")\nfile.write(\"Line 1\\n\")\nfile.write(\"Line 2\\n\")\nfile.close()  # IMPORTANT: Saves changes!\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Close Files**\n```python\n# WRONG - File never closed, resource leak\nfile = open(\"data.txt\", \"r\")\ncontent = file.read()\n# Program ends without file.close()\n\n# CORRECT - Always close files\nfile = open(\"data.txt\", \"r\")\ncontent = file.read()\nfile.close()\n\n# BEST - Use with statement (auto-closes)\nwith open(\"data.txt\", \"r\") as file:\n    content = file.read()\n# File automatically closed here\n```\n\n**2. Using Wrong Mode for Operation**\n```python\n# WRONG - Opened for reading, trying to write\nfile = open(\"data.txt\", \"r\")\nfile.write(\"Hello\")  # io.UnsupportedOperation!\n\n# CORRECT - Use correct mode\nfile = open(\"data.txt\", \"w\")  # 'w' for write\nfile.write(\"Hello\")\nfile.close()\n```\n\n**3. Overwriting File When Meaning to Append**\n```python\n# WRONG - 'w' mode erases existing content!\nwith open(\"log.txt\", \"w\") as f:\n    f.write(\"New entry\")  # Old logs gone!\n\n# CORRECT - Use 'a' mode to append\nwith open(\"log.txt\", \"a\") as f:\n    f.write(\"New entry\")  # Old logs preserved\n```\n\n**4. Not Handling File Not Found**\n```python\n# WRONG - Crashes if file doesn't exist\nwith open(\"config.txt\", \"r\") as f:\n    config = f.read()  # FileNotFoundError!\n\n# CORRECT - Handle missing file gracefully\ntry:\n    with open(\"config.txt\", \"r\") as f:\n        config = f.read()\nexcept FileNotFoundError:\n    config = \"default settings\"\n```\n\n**5. Forgetting Newlines When Writing**\n```python\n# WRONG - All text runs together\nwith open(\"lines.txt\", \"w\") as f:\n    f.write(\"Line 1\")\n    f.write(\"Line 2\")  # File contains: \"Line 1Line 2\"\n\n# CORRECT - Add newlines explicitly\nwith open(\"lines.txt\", \"w\") as f:\n    f.write(\"Line 1\\n\")\n    f.write(\"Line 2\\n\")  # File contains proper lines\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Files persist data** beyond program execution. Unlike variables, file content stays after the program ends.\n- **open(filename, mode)** opens a file. Returns a file object you can read from or write to.\n- **Always close files** with file.close() to save changes and free resources. Without closing, changes may not be saved!\n- **Read methods:** read() (entire file as string), readline() (one line), readlines() (list of lines), or iterate with for line in file:\n- **Write method:** write(string) writes content. Must add \\n yourself for new lines! write() doesn't add it automatically.\n- **File modes:** 'r' (read, file must exist), 'w' (write, OVERWRITES existing), 'a' (append, adds to end without erasing).\n- **'w' mode is destructive:** Opens in write mode ERASES all existing content! Use 'a' to add without erasing.\n- **Handle FileNotFoundError** when reading files that might not exist. Use try/except for robust code.\n- **strip() removes \\n:** When reading lines, use line.strip() to remove trailing newline characters.\n- **Next lesson:** Context managers with 'with' statement - a better way that auto-closes files!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-01-challenge-3",
              "title": "Interactive Exercise: Build a Simple Note-Taking App",
              "description": "Create a simple note-taking application that can:\n1. Write a new note to \"notes.txt\" (overwrite existing)\n2. Add a note to \"notes.txt\" (append without erasing)\n3. Read and display all notes from \"notes.txt\"\n4. Handle FileNotFoundError if file doesn't exist when reading\n\n**Your task:**\nImplement three functions: write_note(), append_note(), and read_notes()\n\n**Starter code:**",
              "instructions": "Create a simple note-taking application that can:\n1. Write a new note to \"notes.txt\" (overwrite existing)\n2. Add a note to \"notes.txt\" (append without erasing)\n3. Read and display all notes from \"notes.txt\"\n4. Handle FileNotFoundError if file doesn't exist when reading\n\n**Your task:**\nImplement three functions: write_note(), append_note(), and read_notes()\n\n**Starter code:**",
              "starterCode": "def write_note(note):\n    \"\"\"Write a new note (overwrites existing notes).\"\"\"\n    # TODO: Open notes.txt in WRITE mode\n    # TODO: Write the note (add \\n at the end)\n    # TODO: Close the file\n    pass\n\ndef append_note(note):\n    \"\"\"Add a note to existing notes.\"\"\"\n    # TODO: Open notes.txt in APPEND mode\n    # TODO: Write the note (add \\n at the end)\n    # TODO: Close the file\n    pass\n\ndef read_notes():\n    \"\"\"Read and return all notes.\"\"\"\n    try:\n        # TODO: Open notes.txt in READ mode\n        # TODO: Read all content\n        # TODO: Close the file\n        # TODO: Return the content\n        pass\n    except FileNotFoundError:\n        return \"No notes found. Create a note first!\"\n\n# Test your functions\nprint(\"=== Testing Note App ===\")\n\n# Test 1: Write a new note\nprint(\"\\n1. Writing first note...\")\nwrite_note(\"Remember to buy milk\")\nprint(\"‚úì Note written\")\n\n# Test 2: Read notes\nprint(\"\\n2. Reading notes...\")\nprint(read_notes())\n\n# Test 3: Append more notes\nprint(\"3. Adding more notes...\")\nappend_note(\"Call dentist tomorrow\")\nappend_note(\"Finish Python homework\")\nprint(\"‚úì Notes added\")\n\n# Test 4: Read all notes\nprint(\"\\n4. Reading all notes...\")\nprint(read_notes())",
              "solution": "# Simple Note-Taking App\n# This solution demonstrates basic file I/O operations\n\ndef write_note(note):\n    \"\"\"Write a new note (overwrites existing notes).\"\"\"\n    # Step 1: Open file in write mode ('w')\n    file = open('notes.txt', 'w')\n    # Step 2: Write the note with newline\n    file.write(note + '\\n')\n    # Step 3: Close the file to save changes\n    file.close()\n\ndef append_note(note):\n    \"\"\"Add a note to existing notes.\"\"\"\n    # Step 1: Open file in append mode ('a')\n    file = open('notes.txt', 'a')\n    # Step 2: Write the note with newline\n    file.write(note + '\\n')\n    # Step 3: Close the file\n    file.close()\n\ndef read_notes():\n    \"\"\"Read and return all notes.\"\"\"\n    try:\n        # Step 1: Open file in read mode ('r')\n        file = open('notes.txt', 'r')\n        # Step 2: Read all content\n        content = file.read()\n        # Step 3: Close the file\n        file.close()\n        # Step 4: Return the content\n        return content\n    except FileNotFoundError:\n        # Handle case when file doesn't exist\n        return \"No notes found. Create a note first!\"\n\n# Test the note-taking app\nprint(\"=== Testing Note App ===\")\n\n# Test 1: Write a new note\nprint(\"\\n1. Writing first note...\")\nwrite_note(\"Remember to buy milk\")\nprint(\"Note written\")\n\n# Test 2: Read notes\nprint(\"\\n2. Reading notes...\")\nprint(read_notes())\n\n# Test 3: Append more notes\nprint(\"3. Adding more notes...\")\nappend_note(\"Call dentist tomorrow\")\nappend_note(\"Finish Python homework\")\nprint(\"Notes added\")\n\n# Test 4: Read all notes\nprint(\"\\n4. Reading all notes...\")\nprint(read_notes())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For write_note: open('notes.txt', 'w'), file.write(note + '\\n'), file.close(). For append_note: use 'a' mode. For read_notes: use 'r' mode and file.read()."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-02",
          "title": "Context Managers and the with Statement",
          "moduleId": "module-09",
          "order": 2,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: The Self-Closing Door",
              "content": "Remember how you must manually call file.close()? What if you forget? What if an error occurs before you close the file? The file stays open (resource leak)!\n\n**The Problem with Manual Closing:**\n\n```python\nfile = open(\"data.txt\", \"r\")\ncontent = file.read()\n# Oh no! Error here before close()\nfile.close()  # This never runs!\n```\n\nIf an error occurs before close(), the file stays open forever (or until program ends).\n\n**Real-world analogy: Self-Closing Doors**\n\nRegular file handling is like a manual door:\n- You open it\n- You use the room\n- You MUST remember to close it\n- If you forget or something goes wrong, door stays open\n\n**Context managers (with statement)** are like self-closing doors:\n- You open the door (enter the room)\n- You use the room\n- Door AUTOMATICALLY closes when you leave, GUARANTEED\n- Even if you trip and fall (error), door still closes!\n\nThe **with statement** is Python's way of saying: \"Let me handle the cleanup for you.\"\n\n**Old way (manual):**\n```python\nfile = open(\"data.txt\", \"r\")\ntry:\n    content = file.read()\nfinally:\n    file.close()  # Must remember this!\n```\n\n**New way (with statement):**\n```python\nwith open(\"data.txt\", \"r\") as file:\n    content = file.read()\n# File automatically closed here, even if error!\n```\n\n**Benefits of with:**\n1. **Automatic cleanup** - file closes automatically\n2. **Error safe** - closes even if exception occurs\n3. **Cleaner code** - no need for try/finally\n4. **Professional** - this is how Python experts write code\n\n**When to use with:**\n- Files (always!)\n- Database connections\n- Network sockets\n- Locks and semaphores\n- Any resource that needs cleanup\n\nFrom now on, ALWAYS use 'with' for files. It's the Pythonic way!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: with Statement in Action",
              "content": "The with statement provides:\n1. **Automatic resource management** - file closes when block ends\n2. **Exception safety** - file closes even if error occurs\n3. **Cleaner syntax** - no need for try/finally\n4. **Multiple resources** - can open multiple files in one with\n5. **Iteration support** - can iterate over file object directly\n\nThe syntax: with open(filename, mode) as variable: means \"open this file, call it 'variable', and auto-close when done.\"",
              "code": "# Example 1: Basic with statement\nprint(\"=== Basic with Statement ===\")\n\n# Write to file using with\nwith open(\"demo.txt\", \"w\") as file:\n    file.write(\"Line 1\\n\")\n    file.write(\"Line 2\\n\")\n    file.write(\"Line 3\\n\")\n# File automatically closed here!\n\nprint(\"‚úì File written and auto-closed\")\n\n# Read from file using with\nwith open(\"demo.txt\", \"r\") as file:\n    content = file.read()\n    print(\"\\nContent:\")\n    print(content)\n# File automatically closed here!\n\nprint(\"‚úì File read and auto-closed\\n\")\n\n# Example 2: with handles errors automatically\nprint(\"=== Error Handling with 'with' ===\")\n\ntry:\n    with open(\"demo.txt\", \"r\") as file:\n        print(\"Reading file...\")\n        content = file.read()\n        print(\"File content retrieved\")\n        \n        # Simulate an error\n        raise ValueError(\"Simulated error!\")\n        \n        print(\"This line never runs\")\n        \nexcept ValueError as e:\n    print(f\"Error occurred: {e}\")\n    print(\"But file was STILL closed automatically!\\n\")\n\n# Example 3: Multiple files at once\nprint(\"=== Opening Multiple Files ===\")\n\n# Write source file\nwith open(\"source.txt\", \"w\") as file:\n    file.write(\"This is the source content.\\n\")\n\nprint(\"‚úì Source file created\")\n\n# Copy from one file to another\nwith open(\"source.txt\", \"r\") as source, \\\n     open(\"destination.txt\", \"w\") as dest:\n    \n    # Read from source\n    content = source.read()\n    \n    # Write to destination\n    dest.write(content)\n    dest.write(\"This line was added during copy.\\n\")\n\nprint(\"‚úì File copied\")\n\n# Verify\nwith open(\"destination.txt\", \"r\") as file:\n    print(\"\\nDestination content:\")\n    print(file.read())\n\n# Example 4: with vs. manual closing comparison\nprint(\"=== Comparison: with vs. Manual ===\")\n\nprint(\"\\nManual way (old, error-prone):\")\ntry:\n    file = open(\"manual.txt\", \"w\")\n    file.write(\"Manual closing\\n\")\nfinally:\n    file.close()\n    print(\"  ‚úì Had to remember to close in finally\")\n\nprint(\"\\nWith statement (modern, safe):\")\nwith open(\"with.txt\", \"w\") as file:\n    file.write(\"Automatic closing\\n\")\nprint(\"  ‚úì Automatically closed, no finally needed\")\n\n# Example 5: Reading file line by line with 'with'\nprint(\"\\n=== Line-by-Line Reading ===\")\n\n# Create test file\nwith open(\"lines.txt\", \"w\") as file:\n    for i in range(1, 6):\n        file.write(f\"Line {i}: Some content here\\n\")\n\nprint(\"‚úì Created test file\")\n\n# Read line by line\nprint(\"\\nReading line by line:\")\nwith open(\"lines.txt\", \"r\") as file:\n    for line_num, line in enumerate(file, 1):\n        print(f\"  {line_num}. {line.strip()}\")\n\nprint(\"\\n‚úì File automatically closed after iteration\")\n\n# Example 6: Appending with 'with'\nprint(\"\\n=== Appending to File ===\")\n\nwith open(\"log.txt\", \"w\") as file:\n    file.write(\"Log started\\n\")\n\nprint(\"‚úì Log file created\")\n\nwith open(\"log.txt\", \"a\") as file:\n    file.write(\"Entry 1: User logged in\\n\")\n    file.write(\"Entry 2: User viewed dashboard\\n\")\n    file.write(\"Entry 3: User logged out\\n\")\n\nprint(\"‚úì Entries appended\")\n\nwith open(\"log.txt\", \"r\") as file:\n    print(\"\\nLog content:\")\n    print(file.read())\n\nprint(\"=== All examples completed ===\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: The with Statement",
              "content": "**Basic with syntax:**\n```python\nwith open(filename, mode) as variable_name:\n    # Code that uses the file\n    # File is open inside this indented block\n# File automatically closed here (outside block)\n```\n\n**Reading with 'with':**\n```python\nwith open(\"data.txt\", \"r\") as file:\n    content = file.read()\n    print(content)\n# file.close() called automatically\n```\n\n**Writing with 'with':**\n```python\nwith open(\"output.txt\", \"w\") as file:\n    file.write(\"Hello\\n\")\n    file.write(\"World\\n\")\n# file.close() called automatically\n```\n\n**Appending with 'with':**\n```python\nwith open(\"log.txt\", \"a\") as file:\n    file.write(\"New entry\\n\")\n# file.close() called automatically\n```\n\n**Multiple files:**\n```python\n# Can open multiple files in one with statement\nwith open(\"input.txt\", \"r\") as infile, \\\n     open(\"output.txt\", \"w\") as outfile:\n    content = infile.read()\n    outfile.write(content.upper())\n# Both files closed automatically\n```\n\n**Iterating over lines:**\n```python\n# Most memory-efficient way to read large files\nwith open(\"data.txt\", \"r\") as file:\n    for line in file:  # Reads one line at a time\n        print(line.strip())\n# File closed automatically after loop\n```\n\n**How with works (behind the scenes):**\n\nWhen you write:\n```python\nwith open(\"file.txt\", \"r\") as file:\n    content = file.read()\n```\n\nPython does this:\n```python\nfile = open(\"file.txt\", \"r\")  # __enter__ called\ntry:\n    content = file.read()\nfinally:\n    file.close()  # __exit__ called, even if error\n```\n\nThe with statement:\n1. Calls `__enter__()` method (opens file)\n2. Runs your code in the block\n3. Calls `__exit__()` method (closes file) in finally block\n4. Guarantees cleanup happens!\n\n**Why the name 'context manager'?**\n\n\"Context\" = the environment/setup needed for your code\n\"Manager\" = handles setup and cleanup automatically\n\nopen() is a context manager because it:\n- Sets up context: opens the file\n- Manages cleanup: closes the file\n\n**With vs. Manual Closing:**\n\n**‚ùå Don't do this (manual closing):**\n```python\nfile = open(\"data.txt\", \"r\")\ncontent = file.read()\nfile.close()  # Might not run if error occurs!\n```\n\n**‚úÖ Do this (with statement):**\n```python\nwith open(\"data.txt\", \"r\") as file:\n    content = file.read()\n# Always closes, even if error\n```\n\n**When is the file actually closed?**\n\nThe file closes IMMEDIATELY when:\n1. The with block ends (normal execution)\n2. An exception occurs (error)\n3. You return from inside the block\n4. You break from a loop in the block\n\nNo matter what, the file WILL close!"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using File After with Block Ends**\n```python\n# WRONG - File is closed after with block\nwith open(\"data.txt\") as f:\n    pass\ncontent = f.read()  # ValueError: I/O operation on closed file!\n\n# CORRECT - Read inside the with block\nwith open(\"data.txt\") as f:\n    content = f.read()\n# Use content outside, not f\n```\n\n**2. Nested with Statements When One Would Do**\n```python\n# WRONG - Overly nested, harder to read\nwith open(\"input.txt\") as f1:\n    with open(\"output.txt\", \"w\") as f2:\n        data = f1.read()\n        f2.write(data)\n\n# CORRECT - Multiple files in one with statement\nwith open(\"input.txt\") as f1, open(\"output.txt\", \"w\") as f2:\n    data = f1.read()\n    f2.write(data)\n```\n\n**3. Returning Inside with Block Without Reading**\n```python\n# WRONG - File handle returned but closed when function ends\ndef get_file():\n    with open(\"data.txt\") as f:\n        return f  # Returns closed file!\n\n# CORRECT - Return content, not file handle\ndef get_content():\n    with open(\"data.txt\") as f:\n        return f.read()  # Return content\n```\n\n**4. Not Specifying Encoding**\n```python\n# WRONG - Uses system default, may fail on special characters\nwith open(\"data.txt\") as f:\n    content = f.read()  # May fail on non-ASCII!\n\n# CORRECT - Specify encoding explicitly\nwith open(\"data.txt\", encoding=\"utf-8\") as f:\n    content = f.read()\n```\n\n**5. Assuming with Handles All Exceptions**\n```python\n# WRONG - with only handles file closing, not all errors\nwith open(\"data.txt\") as f:\n    data = json.load(f)  # JSONDecodeError crashes program!\n\n# CORRECT - Still need try/except for processing errors\ntry:\n    with open(\"data.txt\") as f:\n        data = json.load(f)\nexcept json.JSONDecodeError:\n    data = {}\nexcept FileNotFoundError:\n    data = {}\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Always use 'with' for files** - it's the professional, Pythonic way. Guarantees files are closed even if errors occur.\n- **Syntax: with open(filename, mode) as variable:** Opens file, assigns to variable, auto-closes when block ends.\n- **Automatic cleanup:** File closes IMMEDIATELY when with block ends, no matter what (normal end, error, return, break).\n- **Exception safe:** Even if an exception occurs inside the with block, the file WILL close. No need for try/finally.\n- **Multiple files:** Can open multiple files in one with: with open(f1) as a, open(f2) as b:\n- **File closed after with:** You CANNOT use the file object after the with block ends - it's already closed.\n- **Read/write inside with:** All file operations must happen inside the indented with block while file is open.\n- **Context managers:** 'with' works with any context manager (files, locks, database connections). Handles setup and cleanup.\n- **Memory efficient iteration:** with open(...) as f: for line in f: reads one line at a time (great for huge files).\n- **Professional code:** From now on, use 'with' for ALL file operations. It's cleaner, safer, and Pythonic."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-02-challenge-3",
              "title": "Interactive Exercise: File Copy with Error Handling",
              "description": "Create a file copy function that:\n1. Copies content from source file to destination file\n2. Uses with statement for both files\n3. Handles FileNotFoundError if source doesn't exist\n4. Adds a header line to the copied file: \"--- Copy of [filename] ---\"\n5. Returns True if successful, False if source not found\n\n**Your task:**\nImplement copy_file(source, destination)\n\n**Starter code:**",
              "instructions": "Create a file copy function that:\n1. Copies content from source file to destination file\n2. Uses with statement for both files\n3. Handles FileNotFoundError if source doesn't exist\n4. Adds a header line to the copied file: \"--- Copy of [filename] ---\"\n5. Returns True if successful, False if source not found\n\n**Your task:**\nImplement copy_file(source, destination)\n\n**Starter code:**",
              "starterCode": "def copy_file(source, destination):\n    \"\"\"Copy file with header using context managers.\n    \n    Args:\n        source: Source filename\n        destination: Destination filename\n        \n    Returns:\n        bool: True if successful, False if source not found\n    \"\"\"\n    try:\n        # TODO: Use with to open source file in read mode\n        # TODO: Read all content from source\n        \n        # TODO: Use with to open destination file in write mode\n        # TODO: Write header: \"--- Copy of [source] ---\\n\"\n        # TODO: Write the content from source\n        \n        return True\n    \n    except FileNotFoundError:\n        print(f\"Error: Source file '{source}' not found\")\n        return False\n\n# Test your function\nprint(\"=== Testing File Copy ===\")\n\n# Create source file\nwith open(\"original.txt\", \"w\") as f:\n    f.write(\"This is the original content.\\n\")\n    f.write(\"It has multiple lines.\\n\")\n    f.write(\"All should be copied.\\n\")\n\nprint(\"‚úì Created source file\\n\")\n\n# Test 1: Copy existing file\nprint(\"Test 1: Copy existing file\")\nif copy_file(\"original.txt\", \"copy.txt\"):\n    with open(\"copy.txt\", \"r\") as f:\n        print(\"Copied content:\")\n        print(f.read())\n\n# Test 2: Copy non-existent file\nprint(\"\\nTest 2: Copy non-existent file\")\ncopy_file(\"missing.txt\", \"copy2.txt\")",
              "solution": "# File Copy with Error Handling\n# This solution demonstrates the 'with' statement for safe file handling\n\ndef copy_file(source, destination):\n    \"\"\"Copy file with header using context managers.\"\"\"\n    try:\n        # Step 1: Open source file and read content\n        with open(source, 'r') as src_file:\n            content = src_file.read()\n        \n        # Step 2: Open destination file and write with header\n        with open(destination, 'w') as dst_file:\n            # Write the header line\n            dst_file.write(f\"--- Copy of {source} ---\\n\")\n            # Write the original content\n            dst_file.write(content)\n        \n        print(f\"Successfully copied '{source}' to '{destination}'\")\n        return True\n    \n    except FileNotFoundError:\n        print(f\"Error: Source file '{source}' not found\")\n        return False\n\n# Test the copy function\nprint(\"=== Testing File Copy ===\")\n\n# Create source file\nwith open(\"original.txt\", \"w\") as f:\n    f.write(\"This is the original content.\\n\")\n    f.write(\"It has multiple lines.\\n\")\n    f.write(\"All should be copied.\\n\")\n\nprint(\"Created source file\\n\")\n\n# Test 1: Copy existing file\nprint(\"Test 1: Copy existing file\")\nif copy_file(\"original.txt\", \"copy.txt\"):\n    with open(\"copy.txt\", \"r\") as f:\n        print(\"Copied content:\")\n        print(f.read())\n\n# Test 2: Copy non-existent file\nprint(\"\\nTest 2: Copy non-existent file\")\ncopy_file(\"missing.txt\", \"copy2.txt\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use two separate with statements: first to read source, then to write destination. Or use with open(...) as src, open(...) as dst: for both at once."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-03",
          "title": "Working with CSV Files",
          "moduleId": "module-09",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Spreadsheets as Text Files",
              "content": "**CSV = Comma-Separated Values** - A simple way to store spreadsheet/table data in plain text.\n\n**Real-world analogy: A Table Written in Text**\n\nImagine you have a spreadsheet:\n```\nName       | Age | City\n-----------|-----|----------\nAlice      | 25  | NYC\nBob        | 30  | LA\nCarol      | 28  | Chicago\n```\n\nIn CSV format, this becomes:\n```\nName,Age,City\nAlice,25,NYC\nBob,30,LA\nCarol,28,Chicago\n```\n\nEach row = one line, values separated by commas.\n\n**Why CSV is everywhere:**\n- Excel can open it\n- Google Sheets can open it\n- Databases can import/export it\n- Every programming language can read it\n- Simple, universal format\n\n**Real-world uses:**\n1. **Export data from apps** - Download your bank transactions, contacts, sales data\n2. **Data exchange** - Share data between different programs\n3. **Bulk uploads** - Import 1000 products into your store\n4. **Data analysis** - Load data into Python for processing\n\n**Python's csv module** handles:\n- Reading CSV files (parsing commas correctly)\n- Writing CSV files (formatting data correctly)\n- Handling special cases (commas in data, quotes, etc.)\n\n**Why use csv module instead of split(','):**\n\nBasic split breaks with:\n```\n\"Smith, John\",25,NYC  # Name has a comma!\n\"Product \"\"Best\"\" 2000\",19.99  # Quotes in name!\n```\n\nThe csv module handles these edge cases automatically.\n\n**Common operations:**\n- Read CSV ‚Üí Process rows ‚Üí Display/analyze\n- Create list of dicts ‚Üí Write to CSV ‚Üí Share file\n- Read CSV ‚Üí Modify data ‚Üí Write new CSV\n- Filter CSV data (select certain rows/columns)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Reading and Writing CSV Files",
              "content": "Key concepts:\n1. **csv.writer()** - Write lists to CSV (row by row)\n2. **csv.reader()** - Read CSV into lists\n3. **csv.DictWriter()** - Write dictionaries to CSV (keys = column names)\n4. **csv.DictReader()** - Read CSV into dictionaries (column names = keys)\n5. **newline=''** - Required parameter when opening CSV files in write mode\n6. **writeheader()** - DictWriter method to write column headers\n7. **next(reader)** - Skip header row when processing data\n\nDictReader/DictWriter are usually easier because you can access columns by name!",
              "code": "import csv\n\n# Example 1: Writing a CSV file\nprint(\"=== Writing CSV File ===\")\n\n# Data to write (list of lists)\nstudents = [\n    [\"Name\", \"Age\", \"Grade\", \"City\"],  # Header row\n    [\"Alice\", 20, \"A\", \"NYC\"],\n    [\"Bob\", 22, \"B\", \"LA\"],\n    [\"Carol\", 21, \"A\", \"Chicago\"],\n    [\"David\", 23, \"C\", \"Boston\"]\n]\n\nwith open(\"students.csv\", \"w\", newline='') as file:\n    writer = csv.writer(file)\n    \n    # Write all rows\n    writer.writerows(students)\n    # Or write one at a time: writer.writerow(row)\n\nprint(\"‚úì Created students.csv\\n\")\n\n# Example 2: Reading a CSV file\nprint(\"=== Reading CSV File ===\")\n\nwith open(\"students.csv\", \"r\") as file:\n    reader = csv.reader(file)\n    \n    print(\"File contents:\")\n    for row in reader:\n        print(row)  # Each row is a list\n\nprint(\"\")\n\n# Example 3: Reading with headers\nprint(\"=== Reading with Header Processing ===\")\n\nwith open(\"students.csv\", \"r\") as file:\n    reader = csv.reader(file)\n    \n    # Get header row first\n    headers = next(reader)\n    print(f\"Headers: {headers}\\n\")\n    \n    # Process data rows\n    print(\"Students:\")\n    for row in reader:\n        name, age, grade, city = row\n        print(f\"  {name} (age {age}): Grade {grade} from {city}\")\n\nprint(\"\")\n\n# Example 4: Using DictReader (rows as dictionaries)\nprint(\"=== DictReader - Rows as Dictionaries ===\")\n\nwith open(\"students.csv\", \"r\") as file:\n    reader = csv.DictReader(file)\n    \n    for row in reader:\n        # Each row is a dictionary!\n        print(f\"{row['Name']}: {row['Grade']} grade, {row['Age']} years old\")\n\nprint(\"\")\n\n# Example 5: Writing with DictWriter\nprint(\"=== DictWriter - Writing Dictionaries ===\")\n\nproducts = [\n    {\"Product\": \"Laptop\", \"Price\": 999.99, \"Stock\": 15},\n    {\"Product\": \"Mouse\", \"Price\": 29.99, \"Stock\": 50},\n    {\"Product\": \"Keyboard\", \"Price\": 79.99, \"Stock\": 30}\n]\n\nwith open(\"products.csv\", \"w\", newline='') as file:\n    fieldnames = [\"Product\", \"Price\", \"Stock\"]\n    writer = csv.DictWriter(file, fieldnames=fieldnames)\n    \n    # Write header\n    writer.writeheader()\n    \n    # Write data rows\n    writer.writerows(products)\n\nprint(\"‚úì Created products.csv\\n\")\n\n# Read it back\nprint(\"Product catalog:\")\nwith open(\"products.csv\", \"r\") as file:\n    reader = csv.DictReader(file)\n    for row in reader:\n        print(f\"  {row['Product']}: ${row['Price']} ({row['Stock']} in stock)\")\n\nprint(\"\")\n\n# Example 6: Filtering and processing CSV data\nprint(\"=== Filtering CSV Data ===\")\n\nprint(\"Students with grade 'A':\")\nwith open(\"students.csv\", \"r\") as file:\n    reader = csv.DictReader(file)\n    \n    for row in reader:\n        if row['Grade'] == 'A':\n            print(f\"  - {row['Name']} from {row['City']}\")\n\nprint(\"\")\n\n# Example 7: Handling special characters\nprint(\"=== Handling Special Characters ===\")\n\nspecial_data = [\n    [\"Name\", \"Company\", \"Salary\"],\n    [\"Smith, John\", \"Tech Corp\", \"75,000\"],  # Commas in data!\n    ['Jane \"JJ\" Doe', \"StartUp Inc\", \"80,000\"],  # Quotes in data!\n]\n\nwith open(\"special.csv\", \"w\", newline='') as file:\n    writer = csv.writer(file)\n    writer.writerows(special_data)\n\nprint(\"‚úì Written data with commas and quotes\")\n\n# Read it back - csv module handles it correctly\nwith open(\"special.csv\", \"r\") as file:\n    reader = csv.reader(file)\n    next(reader)  # Skip header\n    \n    print(\"\\nData read correctly:\")\n    for row in reader:\n        print(f\"  Name: {row[0]}\")\n        print(f\"  Company: {row[1]}\")\n        print(f\"  Salary: {row[2]}\\n\")\n\nprint(\"‚úì CSV module handled special characters correctly!\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: CSV Operations",
              "content": "**Importing csv module:**\n```python\nimport csv\n```\n\n**Writing CSV - Basic (lists):**\n```python\nwith open('data.csv', 'w', newline='') as file:\n    writer = csv.writer(file)\n    \n    # Write one row\n    writer.writerow(['Name', 'Age', 'City'])\n    \n    # Write multiple rows\n    rows = [\n        ['Alice', 25, 'NYC'],\n        ['Bob', 30, 'LA']\n    ]\n    writer.writerows(rows)\n```\n\n**Reading CSV - Basic (lists):**\n```python\nwith open('data.csv', 'r') as file:\n    reader = csv.reader(file)\n    \n    for row in reader:\n        # row is a list: ['Alice', '25', 'NYC']\n        print(row[0], row[1], row[2])\n```\n\n**Writing CSV - Dictionaries (recommended):**\n```python\nwith open('data.csv', 'w', newline='') as file:\n    fieldnames = ['Name', 'Age', 'City']\n    writer = csv.DictWriter(file, fieldnames=fieldnames)\n    \n    writer.writeheader()  # Write column names\n    \n    writer.writerow({'Name': 'Alice', 'Age': 25, 'City': 'NYC'})\n    \n    # Or write multiple\n    data = [\n        {'Name': 'Bob', 'Age': 30, 'City': 'LA'},\n        {'Name': 'Carol', 'Age': 28, 'City': 'Chicago'}\n    ]\n    writer.writerows(data)\n```\n\n**Reading CSV - Dictionaries (recommended):**\n```python\nwith open('data.csv', 'r') as file:\n    reader = csv.DictReader(file)\n    \n    for row in reader:\n        # row is a dict: {'Name': 'Alice', 'Age': '25', 'City': 'NYC'}\n        print(row['Name'], row['Age'], row['City'])\n```\n\n**Important: newline='' parameter**\n\nAlways use `newline=''` when opening CSV files in write mode:\n```python\nwith open('data.csv', 'w', newline='') as file:  # newline='' required!\n```\n\nWithout it, you get extra blank lines on Windows.\n\n**Skipping header row:**\n```python\nwith open('data.csv', 'r') as file:\n    reader = csv.reader(file)\n    next(reader)  # Skip first row (header)\n    \n    for row in reader:\n        # Process data rows only\n        pass\n```\n\n**Common patterns:**\n\n**1. Read CSV into list of dictionaries:**\n```python\nwith open('data.csv', 'r') as file:\n    reader = csv.DictReader(file)\n    data = list(reader)  # Convert to list\n\n# Now you have: [{'Name': 'Alice', ...}, {...}, ...]\n```\n\n**2. Filter CSV data:**\n```python\nwith open('data.csv', 'r') as file:\n    reader = csv.DictReader(file)\n    \n    for row in reader:\n        if int(row['Age']) >= 25:  # Filter condition\n            print(row['Name'])\n```\n\n**3. Transform CSV (read ‚Üí modify ‚Üí write):**\n```python\n# Read\nwith open('input.csv', 'r') as infile:\n    reader = csv.DictReader(infile)\n    data = list(reader)\n\n# Modify\nfor row in data:\n    row['Age'] = int(row['Age']) + 1  # Add 1 to age\n\n# Write\nwith open('output.csv', 'w', newline='') as outfile:\n    writer = csv.DictWriter(outfile, fieldnames=data[0].keys())\n    writer.writeheader()\n    writer.writerows(data)\n```\n\n**CSV vs regular text files:**\n\n**Regular text file:**\n```python\nwith open('file.txt', 'w') as f:\n    f.write('Hello\\n')\n```\n\n**CSV file:**\n```python\nwith open('file.csv', 'w', newline='') as f:\n    writer = csv.writer(f)\n    writer.writerow(['Hello', 'World'])\n```\n\n**Key differences:**\n- CSV needs `import csv`\n- CSV needs `newline=''` when writing\n- CSV handles commas/quotes in data automatically\n- DictReader/DictWriter make column access easier"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Not Using newline='' When Opening CSV**\n```python\n# WRONG - Can cause blank rows on Windows\nwith open(\"data.csv\", \"w\") as f:\n    writer = csv.writer(f)\n    writer.writerow([\"a\", \"b\"])  # Extra blank lines!\n\n# CORRECT - Use newline='' for CSV files\nwith open(\"data.csv\", \"w\", newline='') as f:\n    writer = csv.writer(f)\n    writer.writerow([\"a\", \"b\"])\n```\n\n**2. Forgetting to Skip Header Row When Reading**\n```python\n# WRONG - Header treated as data\nwith open(\"data.csv\", newline='') as f:\n    reader = csv.reader(f)\n    for row in reader:\n        process(row)  # First row is headers!\n\n# CORRECT - Skip header or use DictReader\nwith open(\"data.csv\", newline='') as f:\n    reader = csv.reader(f)\n    next(reader)  # Skip header\n    for row in reader:\n        process(row)\n```\n\n**3. Assuming All Rows Have Same Number of Columns**\n```python\n# WRONG - Crashes on malformed CSV\nwith open(\"data.csv\", newline='') as f:\n    reader = csv.reader(f)\n    for row in reader:\n        a, b, c = row  # ValueError if row has wrong count!\n\n# CORRECT - Validate row length\nwith open(\"data.csv\", newline='') as f:\n    reader = csv.reader(f)\n    for row in reader:\n        if len(row) != 3:\n            continue  # Skip malformed rows\n        a, b, c = row\n```\n\n**4. Not Handling Quoted Fields with Commas**\n```python\n# WRONG - Manual splitting breaks on commas in quotes\nline = 'John,\"123 Main St, Apt 4\",NYC'\nparts = line.split(',')  # ['John', '\"123 Main St', ' Apt 4\"', 'NYC']\n\n# CORRECT - Use csv module for proper parsing\nimport csv\nfrom io import StringIO\nreader = csv.reader(StringIO(line))\nparts = next(reader)  # ['John', '123 Main St, Apt 4', 'NYC']\n```\n\n**5. Writing Lists Without Converting to Strings**\n```python\n# WRONG - Writes repr of list, not proper CSV\ndata = [[1, 2], [3, 4]]\nwith open(\"data.csv\", \"w\") as f:\n    for row in data:\n        f.write(str(row))  # Writes \"[1, 2][3, 4]\"!\n\n# CORRECT - Use csv.writer for proper formatting\nwith open(\"data.csv\", \"w\", newline='') as f:\n    writer = csv.writer(f)\n    writer.writerows(data)  # Writes \"1,2\\n3,4\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **CSV = Comma-Separated Values** - Universal format for tabular/spreadsheet data. Works with Excel, databases, and all programming languages.\n- **import csv** - Python's built-in module for reading and writing CSV files. Handles edge cases (commas in data, quotes) automatically.\n- **csv.writer()** writes lists to CSV. **csv.DictWriter()** writes dictionaries (recommended - easier to use).\n- **csv.reader()** reads CSV as lists. **csv.DictReader()** reads as dictionaries (recommended - access by column name).\n- **Always use newline=''** when opening CSV files in write mode: open('file.csv', 'w', newline=''). Required to avoid extra blank lines.\n- **writeheader()** - DictWriter method to write column names as first row. Don't forget to call this!\n- **CSV values are strings!** Even numbers come back as strings. Always convert: int(row['Age']), float(row['Price']).\n- **DictReader/DictWriter advantages:** Access columns by name (row['Name']) instead of index (row[0]). More readable and less error-prone.\n- **Never use split(',')** for CSV! Use csv module instead. It correctly handles commas in data, quotes, and other edge cases.\n- **Common pattern:** Read CSV with DictReader ‚Üí Process/filter data ‚Üí Write new CSV with DictWriter."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-03-challenge-3",
              "title": "Interactive Exercise: Student Grade Manager",
              "description": "Create a student grade management system that:\n1. Writes student records to \"grades.csv\" (Name, Subject, Grade, Score)\n2. Reads and displays all records\n3. Calculates average score per student\n4. Finds all students with grade 'A'\n\nUse DictWriter and DictReader for easier column access.\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "instructions": "Create a student grade management system that:\n1. Writes student records to \"grades.csv\" (Name, Subject, Grade, Score)\n2. Reads and displays all records\n3. Calculates average score per student\n4. Finds all students with grade 'A'\n\nUse DictWriter and DictReader for easier column access.\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "starterCode": "import csv\n\ndef create_grades_file(records):\n    \"\"\"Write grade records to CSV.\n    \n    Args:\n        records: List of dictionaries with keys: Name, Subject, Grade, Score\n    \"\"\"\n    # TODO: Open grades.csv in write mode with newline=''\n    # TODO: Create DictWriter with fieldnames\n    # TODO: Write header\n    # TODO: Write all records\n    pass\n\ndef read_all_grades():\n    \"\"\"Read and display all grade records.\"\"\"\n    # TODO: Open grades.csv in read mode\n    # TODO: Create DictReader\n    # TODO: Read and print each row\n    pass\n\ndef calculate_averages():\n    \"\"\"Calculate average score per student.\n    \n    Returns:\n        dict: {student_name: average_score}\n    \"\"\"\n    # TODO: Read CSV with DictReader\n    # TODO: Group scores by student name\n    # TODO: Calculate average for each student\n    # TODO: Return dictionary\n    pass\n\ndef find_a_students():\n    \"\"\"Find all students with grade 'A'.\n    \n    Returns:\n        list: List of student names with grade A\n    \"\"\"\n    # TODO: Read CSV with DictReader\n    # TODO: Filter rows where Grade == 'A'\n    # TODO: Return list of names\n    pass\n\n# Test data\ngrade_records = [\n    {'Name': 'Alice', 'Subject': 'Math', 'Grade': 'A', 'Score': '95'},\n    {'Name': 'Alice', 'Subject': 'English', 'Grade': 'B', 'Score': '85'},\n    {'Name': 'Bob', 'Subject': 'Math', 'Grade': 'B', 'Score': '88'},\n    {'Name': 'Bob', 'Subject': 'English', 'Grade': 'A', 'Score': '92'},\n    {'Name': 'Carol', 'Subject': 'Math', 'Grade': 'A', 'Score': '97'},\n    {'Name': 'Carol', 'Subject': 'English', 'Grade': 'A', 'Score': '94'},\n]\n\n# Test your functions\nprint(\"Creating grades file...\")\ncreate_grades_file(grade_records)\n\nprint(\"\\nAll grades:\")\nread_all_grades()\n\nprint(\"\\nAverage scores:\")\naverages = calculate_averages()\nfor name, avg in averages.items():\n    print(f\"  {name}: {avg:.1f}\")\n\nprint(\"\\nStudents with A grades:\")\na_students = find_a_students()\nfor name in a_students:\n    print(f\"  - {name}\")",
              "solution": "import csv\n\n# Student Grade Manager\n# This solution demonstrates CSV reading and writing with DictReader/DictWriter\n\ndef create_grades_file(records):\n    \"\"\"Write grade records to CSV.\"\"\"\n    # Step 1: Open file with newline='' for proper CSV handling\n    with open('grades.csv', 'w', newline='') as file:\n        # Step 2: Create DictWriter with column names\n        fieldnames = ['Name', 'Subject', 'Grade', 'Score']\n        writer = csv.DictWriter(file, fieldnames=fieldnames)\n        \n        # Step 3: Write header row\n        writer.writeheader()\n        \n        # Step 4: Write all records\n        writer.writerows(records)\n    \n    print(f\"Created grades.csv with {len(records)} records\")\n\ndef read_all_grades():\n    \"\"\"Read and display all grade records.\"\"\"\n    with open('grades.csv', 'r') as file:\n        reader = csv.DictReader(file)\n        \n        # Print header\n        print(f\"{'Name':<10} {'Subject':<10} {'Grade':<6} {'Score':<6}\")\n        print(\"-\" * 32)\n        \n        # Print each row\n        for row in reader:\n            print(f\"{row['Name']:<10} {row['Subject']:<10} {row['Grade']:<6} {row['Score']:<6}\")\n\ndef calculate_averages():\n    \"\"\"Calculate average score per student.\"\"\"\n    # Step 1: Collect all scores per student\n    student_scores = {}\n    \n    with open('grades.csv', 'r') as file:\n        reader = csv.DictReader(file)\n        \n        for row in reader:\n            name = row['Name']\n            score = int(row['Score'])\n            \n            if name not in student_scores:\n                student_scores[name] = []\n            student_scores[name].append(score)\n    \n    # Step 2: Calculate average for each student\n    averages = {}\n    for name, scores in student_scores.items():\n        averages[name] = sum(scores) / len(scores)\n    \n    return averages\n\ndef find_a_students():\n    \"\"\"Find all students with grade 'A'.\"\"\"\n    a_students = set()  # Use set to avoid duplicates\n    \n    with open('grades.csv', 'r') as file:\n        reader = csv.DictReader(file)\n        \n        for row in reader:\n            if row['Grade'] == 'A':\n                a_students.add(row['Name'])\n    \n    return list(a_students)\n\n# Test data\ngrade_records = [\n    {'Name': 'Alice', 'Subject': 'Math', 'Grade': 'A', 'Score': '95'},\n    {'Name': 'Alice', 'Subject': 'English', 'Grade': 'B', 'Score': '85'},\n    {'Name': 'Bob', 'Subject': 'Math', 'Grade': 'B', 'Score': '88'},\n    {'Name': 'Bob', 'Subject': 'English', 'Grade': 'A', 'Score': '92'},\n    {'Name': 'Carol', 'Subject': 'Math', 'Grade': 'A', 'Score': '97'},\n    {'Name': 'Carol', 'Subject': 'English', 'Grade': 'A', 'Score': '94'},\n]\n\n# Test the functions\nprint(\"Creating grades file...\")\ncreate_grades_file(grade_records)\n\nprint(\"\\nAll grades:\")\nread_all_grades()\n\nprint(\"\\nAverage scores:\")\naverages = calculate_averages()\nfor name, avg in averages.items():\n    print(f\"  {name}: {avg:.1f}\")\n\nprint(\"\\nStudents with A grades:\")\na_students = find_a_students()\nfor name in a_students:\n    print(f\"  - {name}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use csv.DictWriter(file, fieldnames=['Name', 'Subject', 'Grade', 'Score']) for writing. Use csv.DictReader(file) for reading. Remember newline='' when opening for write!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-04",
          "title": "Working with JSON Files - Structured Data Storage",
          "moduleId": "module-09",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Speaking the Internet's Language",
              "content": "**JSON = JavaScript Object Notation** - The universal language for exchanging data between programs, websites, and APIs.\n\n**Real-world analogy: International Shipping Labels**\n\nImagine you need to ship a package internationally. You can't write the address in just English or just Chinese - you need a universal format that every postal service understands.\n\n**JSON is that universal format for data.**\n\nEvery programming language speaks JSON:\n- Python ‚Üî JSON ‚Üî JavaScript\n- Java ‚Üî JSON ‚Üî Ruby\n- C++ ‚Üî JSON ‚Üî Go\n\n**Why JSON is everywhere:**\n1. **APIs** - 99% of web APIs send/receive JSON\n2. **Configuration files** - package.json, settings.json, config.json\n3. **Data exchange** - Save Python data, load in JavaScript\n4. **Databases** - MongoDB, Postgres use JSON\n5. **Human-readable** - You can read and edit it\n\n**JSON looks like Python dictionaries:**\n\n```python\n# Python dictionary\nperson = {\n    \"name\": \"Alice\",\n    \"age\": 25,\n    \"hobbies\": [\"reading\", \"coding\"],\n    \"active\": True\n}\n\n# JSON (almost identical!)\n{\n    \"name\": \"Alice\",\n    \"age\": 25,\n    \"hobbies\": [\"reading\", \"coding\"],\n    \"active\": true\n}\n```\n\n**Key differences:**\n- JSON uses `true`/`false`/`null` (lowercase)\n- Python uses `True`/`False`/`None`\n- JSON requires double quotes \" (not single ')\n\n**Two main operations:**\n\n1. **Serialization (Python ‚Üí JSON):**\n   - Convert Python object to JSON string\n   - `json.dumps()` - dump to string\n   - `json.dump()` - dump to file\n\n2. **Deserialization (JSON ‚Üí Python):**\n   - Convert JSON string to Python object  \n   - `json.loads()` - load from string\n   - `json.load()` - load from file\n\n**Common use cases:**\n- Save app settings to config.json\n- Store user data between sessions\n- Send data to/from web APIs\n- Exchange data between programs\n- Create data files for testing"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: JSON Operations",
              "content": "Key functions:\n\n**Writing (Serialization):**\n- `json.dumps(obj)` - Convert Python object to JSON **string**\n- `json.dump(obj, file)` - Write Python object to JSON **file**\n- `indent=2` - Make JSON human-readable with indentation\n\n**Reading (Deserialization):**\n- `json.loads(string)` - Convert JSON **string** to Python object\n- `json.load(file)` - Read JSON **file** to Python object\n\n**Remember:** \n- dumps/loads = string operations (s for string)\n- dump/load = file operations\n- Always use 'with' statement for files\n- JSON keys must be strings!",
              "code": "import json\n\n# Example 1: Python ‚Üí JSON (Serialization)\nprint(\"=== Python to JSON (Serialization) ===\")\n\n# Python data\nstudent = {\n    \"name\": \"Alice Johnson\",\n    \"age\": 20,\n    \"grades\": [95, 87, 92, 88],\n    \"enrolled\": True,\n    \"graduation_year\": None\n}\n\nprint(\"Python dictionary:\")\nprint(student)\nprint(f\"Type: {type(student)}\\n\")\n\n# Convert to JSON string\njson_string = json.dumps(student)\nprint(\"JSON string:\")\nprint(json_string)\nprint(f\"Type: {type(json_string)}\\n\")\n\n# Pretty-printed JSON (readable)\njson_pretty = json.dumps(student, indent=2)\nprint(\"Pretty JSON:\")\nprint(json_pretty)\nprint(\"\")\n\n# Example 2: JSON ‚Üí Python (Deserialization)\nprint(\"=== JSON to Python (Deserialization) ===\")\n\njson_data = '{\"product\": \"Laptop\", \"price\": 999.99, \"in_stock\": true}'\nprint(\"JSON string:\")\nprint(json_data)\nprint(f\"Type: {type(json_data)}\\n\")\n\n# Convert to Python\nproduct = json.loads(json_data)\nprint(\"Python dictionary:\")\nprint(product)\nprint(f\"Type: {type(product)}\")\nprint(f\"Accessing: product['price'] = ${product['price']}\\n\")\n\n# Example 3: Writing JSON to file\nprint(\"=== Writing JSON to File ===\")\n\nconfig = {\n    \"app_name\": \"MyApp\",\n    \"version\": \"1.0.0\",\n    \"debug_mode\": True,\n    \"database\": {\n        \"host\": \"localhost\",\n        \"port\": 5432,\n        \"name\": \"mydb\"\n    },\n    \"features\": [\"auth\", \"payments\", \"analytics\"]\n}\n\nwith open(\"config.json\", \"w\") as file:\n    json.dump(config, file, indent=2)\n\nprint(\"‚úì Wrote config.json\\n\")\n\n# Example 4: Reading JSON from file\nprint(\"=== Reading JSON from File ===\")\n\nwith open(\"config.json\", \"r\") as file:\n    loaded_config = json.load(file)\n\nprint(\"Loaded configuration:\")\nprint(f\"  App: {loaded_config['app_name']}\")\nprint(f\"  Version: {loaded_config['version']}\")\nprint(f\"  Database: {loaded_config['database']['host']}:{loaded_config['database']['port']}\")\nprint(f\"  Features: {', '.join(loaded_config['features'])}\\n\")\n\n# Example 5: Type conversions\nprint(\"=== JSON ‚Üî Python Type Mapping ===\")\n\ndata = {\n    \"string\": \"hello\",\n    \"number_int\": 42,\n    \"number_float\": 3.14,\n    \"boolean\": True,\n    \"null_value\": None,\n    \"array\": [1, 2, 3],\n    \"object\": {\"key\": \"value\"}\n}\n\njson_str = json.dumps(data, indent=2)\nprint(\"Python ‚Üí JSON:\")\nprint(json_str)\nprint(\"\")\n\nback_to_python = json.loads(json_str)\nprint(\"JSON ‚Üí Python:\")\nfor key, value in back_to_python.items():\n    print(f\"  {key}: {value} (type: {type(value).__name__})\")\n\nprint(\"\")\n\n# Example 6: Working with lists of objects\nprint(\"=== List of Objects ===\")\n\nusers = [\n    {\"id\": 1, \"name\": \"Alice\", \"role\": \"admin\"},\n    {\"id\": 2, \"name\": \"Bob\", \"role\": \"user\"},\n    {\"id\": 3, \"name\": \"Carol\", \"role\": \"moderator\"}\n]\n\n# Save to file\nwith open(\"users.json\", \"w\") as file:\n    json.dump(users, file, indent=2)\n\nprint(\"‚úì Saved users.json\")\n\n# Load and process\nwith open(\"users.json\", \"r\") as file:\n    loaded_users = json.load(file)\n\nprint(\"\\nUsers from file:\")\nfor user in loaded_users:\n    print(f\"  - {user['name']} (ID: {user['id']}, Role: {user['role']})\")\n\nprint(\"\")\n\n# Example 7: Error handling\nprint(\"=== Error Handling ===\")\n\n# Invalid JSON\ninvalid_json = '{\"name\": \"Alice\", age: 25}'  # Missing quotes on 'age'\n\ntry:\n    json.loads(invalid_json)\nexcept json.JSONDecodeError as e:\n    print(f\"‚ùå JSON Error: {e}\")\n    print(\"   (Keys must be in double quotes)\\n\")\n\n# File not found\ntry:\n    with open(\"missing.json\", \"r\") as file:\n        json.load(file)\nexcept FileNotFoundError:\n    print(\"‚ùå File not found: missing.json\\n\")\n\nprint(\"‚úì All JSON examples completed!\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: JSON Operations",
              "content": "**Import json module:**\n```python\nimport json\n```\n\n**Python ‚Üí JSON String:**\n```python\ndata = {\"name\": \"Alice\", \"age\": 25}\n\n# Convert to JSON string\njson_string = json.dumps(data)\n# '{\"name\": \"Alice\", \"age\": 25}'\n\n# Pretty-printed (readable)\njson_pretty = json.dumps(data, indent=2)\n# {\n#   \"name\": \"Alice\",\n#   \"age\": 25\n# }\n```\n\n**JSON String ‚Üí Python:**\n```python\njson_string = '{\"name\": \"Alice\", \"age\": 25}'\n\n# Convert to Python\ndata = json.loads(json_string)\n# {'name': 'Alice', 'age': 25}\n```\n\n**Python ‚Üí JSON File:**\n```python\ndata = {\"name\": \"Alice\", \"age\": 25}\n\nwith open(\"data.json\", \"w\") as file:\n    json.dump(data, file, indent=2)\n# File created with pretty JSON\n```\n\n**JSON File ‚Üí Python:**\n```python\nwith open(\"data.json\", \"r\") as file:\n    data = json.load(file)\n# data is now a Python dict\n```\n\n**Type Conversions (JSON ‚Üî Python):**\n\n| Python Type | JSON Type | Example |\n|-------------|-----------|----------|\n| dict | object | {\"key\": \"value\"} |\n| list | array | [1, 2, 3] |\n| str | string | \"hello\" |\n| int, float | number | 42, 3.14 |\n| True | true | true |\n| False | false | false |\n| None | null | null |\n\n**Mnemonic: Remember 's' for string**\n- `dump**s**` - dump to **s**tring\n- `load**s**` - load from **s**tring\n- `dump` - dump to **file**\n- `load` - load from **file**\n\n**Common options:**\n\n```python\njson.dumps(data, \n    indent=2,          # Pretty-print with 2 spaces\n    sort_keys=True,    # Sort keys alphabetically\n    ensure_ascii=False # Allow non-ASCII characters\n)\n```\n\n**Error handling:**\n\n```python\ntry:\n    data = json.loads(json_string)\nexcept json.JSONDecodeError as e:\n    print(f\"Invalid JSON: {e}\")\n\ntry:\n    with open(\"data.json\", \"r\") as f:\n        data = json.load(f)\nexcept FileNotFoundError:\n    print(\"File not found\")\nexcept json.JSONDecodeError:\n    print(\"Invalid JSON in file\")\n```\n\n**What CAN'T be converted to JSON:**\n\n```python\n# ‚ùå Sets\ndata = {1, 2, 3}  # Can't convert set\n\n# ‚ùå Tuples (converted to arrays)\ndata = (1, 2, 3)  # Becomes [1, 2, 3] in JSON\n\n# ‚ùå Functions\ndata = {\"func\": lambda x: x}  # Can't convert function\n\n# ‚ùå Custom objects\nclass Person:\n    pass\ndata = Person()  # Can't convert (need custom encoder)\n```\n\n**JSON can only handle:**\n- Dictionaries\n- Lists  \n- Strings\n- Numbers (int, float)\n- Booleans (True/False)\n- None (null)\n\n**Complete workflow:**\n\n```python\n# 1. Create Python data\ndata = {\"users\": [\"Alice\", \"Bob\"], \"count\": 2}\n\n# 2. Save to JSON file\nwith open(\"data.json\", \"w\") as f:\n    json.dump(data, f, indent=2)\n\n# 3. Load from JSON file\nwith open(\"data.json\", \"r\") as f:\n    loaded = json.load(f)\n\n# 4. Use the data\nfor user in loaded[\"users\"]:\n    print(user)\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using json.dump vs json.dumps Incorrectly**\n```python\n# WRONG - dump() to string, dumps() to file\ndata = {\"name\": \"Alice\"}\njson_string = json.dump(data)  # TypeError: missing file argument!\nwith open(\"data.json\", \"w\") as f:\n    f.write(json.dumps(data))  # Works but inefficient\n\n# CORRECT - dump() to file, dumps() to string\njson_string = json.dumps(data)  # Returns string\nwith open(\"data.json\", \"w\") as f:\n    json.dump(data, f)  # Writes directly to file\n```\n\n**2. Not Handling JSON Decode Errors**\n```python\n# WRONG - Crashes on invalid JSON\nwith open(\"data.json\") as f:\n    data = json.load(f)  # JSONDecodeError on invalid JSON!\n\n# CORRECT - Handle parse errors\ntry:\n    with open(\"data.json\") as f:\n        data = json.load(f)\nexcept json.JSONDecodeError as e:\n    print(f\"Invalid JSON: {e}\")\n    data = {}\n```\n\n**3. Trying to Serialize Non-JSON Types**\n```python\n# WRONG - datetime not JSON serializable\nimport datetime\ndata = {\"created\": datetime.datetime.now()}\njson.dumps(data)  # TypeError!\n\n# CORRECT - Convert to string first\ndata = {\"created\": datetime.datetime.now().isoformat()}\njson.dumps(data)  # Works\n```\n\n**4. Losing Data Types on Round-Trip**\n```python\n# WRONG - Tuples become lists, sets not supported\ndata = {\"coords\": (1, 2), \"items\": {1, 2, 3}}\njson.dumps(data)  # TypeError for set!\n\n# CORRECT - Convert to supported types\ndata = {\"coords\": [1, 2], \"items\": [1, 2, 3]}\n# Or use custom encoder for complex types\n```\n\n**5. Not Using indent for Readable Output**\n```python\n# WRONG - Unreadable single-line JSON\ndata = {\"users\": [{\"name\": \"Alice\"}, {\"name\": \"Bob\"}]}\nwith open(\"data.json\", \"w\") as f:\n    json.dump(data, f)  # Hard to read/debug\n\n# CORRECT - Use indent for pretty printing\nwith open(\"data.json\", \"w\") as f:\n    json.dump(data, f, indent=2)  # Human-readable\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **JSON = JavaScript Object Notation** - Universal format for data exchange. Every programming language and web API uses it.\n- **import json** - Python's built-in module for working with JSON. No installation needed.\n- **dump/dumps (Serialize):** Python ‚Üí JSON. dumps = string, dump = file. Remember 's' for string!\n- **load/loads (Deserialize):** JSON ‚Üí Python. loads = string, load = file. Remember 's' for string!\n- **Always use indent=2** when writing JSON files: json.dump(data, file, indent=2). Makes JSON human-readable.\n- **Type conversions:** dict‚Üîobject, list‚Üîarray, str‚Üîstring, int/float‚Üînumber, True/False‚Üîtrue/false, None‚Üînull.\n- **Handle errors:** FileNotFoundError (file missing) and json.JSONDecodeError (invalid JSON). Always use try/except.\n- **JSON limitations:** Can only encode dict, list, str, int, float, bool, None. Cannot encode sets, functions, or custom objects.\n- **JSON keys must be strings!** {'name': 'Alice'} works, {123: 'Alice'} will have key converted to string '123'.\n- **Common use:** Save app state, config files, API communication, data exchange between programs."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-04-challenge-3",
              "title": "Interactive Exercise: User Profile Manager",
              "description": "Create a user profile management system that:\n1. Saves user profiles to JSON file\n2. Loads user profiles from JSON file  \n3. Adds a new user profile\n4. Updates an existing user profile\n5. Displays all profiles\n\nEach profile should have: username, email, age, premium (boolean)\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "instructions": "Create a user profile management system that:\n1. Saves user profiles to JSON file\n2. Loads user profiles from JSON file  \n3. Adds a new user profile\n4. Updates an existing user profile\n5. Displays all profiles\n\nEach profile should have: username, email, age, premium (boolean)\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "starterCode": "import json\n\nFILENAME = \"profiles.json\"\n\ndef save_profiles(profiles):\n    \"\"\"Save profiles list to JSON file.\n    \n    Args:\n        profiles: List of profile dictionaries\n    \"\"\"\n    # TODO: Open file in write mode\n    # TODO: Use json.dump() with indent=2\n    pass\n\ndef load_profiles():\n    \"\"\"Load profiles from JSON file.\n    \n    Returns:\n        list: List of profiles, or empty list if file doesn't exist\n    \"\"\"\n    try:\n        # TODO: Open file in read mode\n        # TODO: Use json.load() to read\n        # TODO: Return the profiles\n        pass\n    except FileNotFoundError:\n        # File doesn't exist yet, return empty list\n        return []\n\ndef add_profile(username, email, age, premium=False):\n    \"\"\"Add a new user profile.\n    \n    Args:\n        username: User's username\n        email: User's email\n        age: User's age\n        premium: Premium status (default False)\n    \"\"\"\n    # TODO: Load existing profiles\n    # TODO: Create new profile dictionary\n    # TODO: Append to profiles list\n    # TODO: Save profiles\n    pass\n\ndef update_profile(username, **updates):\n    \"\"\"Update an existing profile.\n    \n    Args:\n        username: Username to update\n        **updates: Fields to update (email, age, premium)\n    \n    Returns:\n        bool: True if updated, False if user not found\n    \"\"\"\n    # TODO: Load profiles\n    # TODO: Find profile with matching username\n    # TODO: Update fields from **updates\n    # TODO: Save profiles\n    # TODO: Return True if found, False otherwise\n    pass\n\ndef display_profiles():\n    \"\"\"Display all profiles.\"\"\"\n    # TODO: Load profiles\n    # TODO: Print each profile nicely\n    pass\n\n# Test your functions\nprint(\"=== User Profile Manager ===\")\n\nprint(\"\\n1. Adding profiles...\")\nadd_profile(\"alice\", \"alice@example.com\", 25, True)\nadd_profile(\"bob\", \"bob@example.com\", 30)\nadd_profile(\"carol\", \"carol@example.com\", 28, True)\n\nprint(\"\\n2. All profiles:\")\ndisplay_profiles()\n\nprint(\"\\n3. Updating Bob's profile...\")\nupdate_profile(\"bob\", premium=True, age=31)\n\nprint(\"\\n4. Updated profiles:\")\ndisplay_profiles()",
              "solution": "import json\n\n# User Profile Manager\n# This solution demonstrates JSON file operations for data persistence\n\nFILENAME = \"profiles.json\"\n\ndef save_profiles(profiles):\n    \"\"\"Save profiles list to JSON file.\"\"\"\n    # Open file in write mode and save with pretty formatting\n    with open(FILENAME, 'w') as file:\n        json.dump(profiles, file, indent=2)\n\ndef load_profiles():\n    \"\"\"Load profiles from JSON file.\"\"\"\n    try:\n        with open(FILENAME, 'r') as file:\n            return json.load(file)\n    except FileNotFoundError:\n        # File doesn't exist yet, return empty list\n        return []\n\ndef add_profile(username, email, age, premium=False):\n    \"\"\"Add a new user profile.\"\"\"\n    # Step 1: Load existing profiles\n    profiles = load_profiles()\n    \n    # Step 2: Create new profile dictionary\n    new_profile = {\n        'username': username,\n        'email': email,\n        'age': age,\n        'premium': premium\n    }\n    \n    # Step 3: Append to profiles list\n    profiles.append(new_profile)\n    \n    # Step 4: Save profiles\n    save_profiles(profiles)\n    print(f\"Added profile for '{username}'\")\n\ndef update_profile(username, **updates):\n    \"\"\"Update an existing profile.\"\"\"\n    # Step 1: Load profiles\n    profiles = load_profiles()\n    \n    # Step 2: Find profile with matching username\n    for profile in profiles:\n        if profile['username'] == username:\n            # Step 3: Update fields from **updates\n            for key, value in updates.items():\n                if key in profile:\n                    profile[key] = value\n            \n            # Step 4: Save profiles\n            save_profiles(profiles)\n            print(f\"Updated profile for '{username}'\")\n            return True\n    \n    print(f\"User '{username}' not found\")\n    return False\n\ndef display_profiles():\n    \"\"\"Display all profiles.\"\"\"\n    profiles = load_profiles()\n    \n    if not profiles:\n        print(\"No profiles found.\")\n        return\n    \n    for profile in profiles:\n        status = \"Premium\" if profile['premium'] else \"Free\"\n        print(f\"  {profile['username']}: {profile['email']}, age {profile['age']} ({status})\")\n\n# Test the functions\nprint(\"=== User Profile Manager ===\")\n\nprint(\"\\n1. Adding profiles...\")\nadd_profile(\"alice\", \"alice@example.com\", 25, True)\nadd_profile(\"bob\", \"bob@example.com\", 30)\nadd_profile(\"carol\", \"carol@example.com\", 28, True)\n\nprint(\"\\n2. All profiles:\")\ndisplay_profiles()\n\nprint(\"\\n3. Updating Bob's profile...\")\nupdate_profile(\"bob\", premium=True, age=31)\n\nprint(\"\\n4. Updated profiles:\")\ndisplay_profiles()",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use json.dump(profiles, file, indent=2) to save. Use json.load(file) to load. Remember to use 'with' statement for files!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-05",
          "title": "File Paths and Directory Operations",
          "moduleId": "module-09",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: GPS for Your File System",
              "content": "**The Problem: Hardcoded Paths Break**\n\n```python\n# Windows path\nfile = open('C:\\\\Users\\\\Alice\\\\Documents\\\\data.txt')\n\n# Mac/Linux path  \nfile = open('/home/alice/documents/data.txt')\n\n# Breaks when you share code!\n```\n\n**Real-world analogy: Street Addresses**\n\nImagine giving directions:\n- ‚ùå \"Go to 123 Main St, Apartment 4B\" (hardcoded - only works in one city)\n- ‚úÖ \"Go to my_home/living_room/couch\" (relative - works anywhere)\n\n**pathlib is your GPS for files:**\n- Cross-platform (works on Windows, Mac, Linux)\n- Relative paths (\"start from current location\")\n- Path operations (join, split, check existence)\n- Directory operations (create, list, delete)\n\n**Key concepts:**\n\n**1. Absolute vs Relative Paths:**\n```python\n# Absolute (full address from root)\n/home/alice/projects/myapp/data.txt\nC:\\Users\\Alice\\Projects\\myapp\\data.txt\n\n# Relative (from current location)\ndata.txt\n./data.txt\n../other_folder/file.txt\n```\n\n**2. Path Components:**\n```python\n/home/alice/projects/myapp/data.txt\n‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ      ‚îÇ\n‚îÇ     ‚îÇ     ‚îÇ        ‚îÇ      ‚îî‚îÄ filename\n‚îÇ     ‚îÇ     ‚îÇ        ‚îî‚îÄ parent directory\n‚îÇ     ‚îÇ     ‚îî‚îÄ grandparent directory\n‚îÇ     ‚îî‚îÄ great-grandparent\n‚îî‚îÄ root\n```\n\n**3. Special paths:**\n- `.` = current directory\n- `..` = parent directory  \n- `~` = home directory\n- `/` = root directory (Unix)\n- `C:\\` = drive root (Windows)\n\n**Why pathlib over string concatenation:**\n\n‚ùå **Don't do this:**\n```python\npath = 'folder' + '/' + 'file.txt'  # Breaks on Windows!\npath = 'C:\\\\Users\\\\' + name  # Escape chars nightmare\n```\n\n‚úÖ **Do this:**\n```python\nfrom pathlib import Path\npath = Path('folder') / 'file.txt'  # Works everywhere!\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Working with Paths",
              "content": "**Key Path operations:**\n\n1. **Path.cwd()** - Current working directory\n2. **Path.home()** - User's home directory\n3. **Path() / 'file'** - Join paths (cross-platform!)\n4. **.exists()** - Check if path exists\n5. **.is_file() / .is_dir()** - Check type\n6. **.mkdir()** - Create directory\n7. **.glob(pattern)** - Find files matching pattern\n8. **.rglob(pattern)** - Recursive glob (search subdirectories)\n9. **.read_text() / .write_text()** - Quick file I/O\n10. **.resolve()** - Convert to absolute path\n\n**mkdir parameters:**\n- `parents=True` - Create parent directories if needed\n- `exist_ok=True` - Don't error if directory already exists",
              "code": "from pathlib import Path\nimport os\n\n# Example 1: Creating paths\nprint(\"=== Creating Paths ===\")\n\n# Current directory\ncurrent = Path.cwd()  # cwd = current working directory\nprint(f\"Current directory: {current}\")\n\n# Home directory\nhome = Path.home()\nprint(f\"Home directory: {home}\")\n\n# Build path with / operator (cross-platform!)\ndata_file = Path('data') / 'users.txt'\nprint(f\"Data file path: {data_file}\")\n\n# Multiple levels\nconfig_path = Path('config') / 'settings' / 'app.json'\nprint(f\"Config path: {config_path}\\n\")\n\n# Example 2: Path information\nprint(\"=== Path Information ===\")\n\npath = Path('projects/myapp/src/main.py')\n\nprint(f\"Full path: {path}\")\nprint(f\"Name: {path.name}\")  # main.py\nprint(f\"Stem: {path.stem}\")  # main (without extension)\nprint(f\"Suffix: {path.suffix}\")  # .py\nprint(f\"Parent: {path.parent}\")  # projects/myapp/src\nprint(f\"Parents[0]: {path.parents[0]}\")  # immediate parent\nprint(f\"Parents[1]: {path.parents[1]}\")  # grandparent\nprint(f\"Parts: {path.parts}\\n\")  # ('projects', 'myapp', 'src', 'main.py')\n\n# Example 3: Checking existence\nprint(\"=== Checking Existence ===\")\n\n# Create a test file\ntest_file = Path('test.txt')\ntest_file.write_text('Hello, World!')\n\nprint(f\"test.txt exists: {test_file.exists()}\")\nprint(f\"test.txt is file: {test_file.is_file()}\")\nprint(f\"test.txt is directory: {test_file.is_dir()}\")\n\n# Check non-existent\nfake = Path('nonexistent.txt')\nprint(f\"nonexistent.txt exists: {fake.exists()}\\n\")\n\n# Example 4: Creating directories\nprint(\"=== Creating Directories ===\")\n\n# Create single directory\nPath('output').mkdir(exist_ok=True)\nprint(\"‚úì Created 'output' directory\")\n\n# Create nested directories\nPath('data/processed/2024').mkdir(parents=True, exist_ok=True)\nprint(\"‚úì Created nested 'data/processed/2024' directories\\n\")\n\n# Example 5: Listing directory contents\nprint(\"=== Listing Directory Contents ===\")\n\n# List all items in current directory\nprint(\"Files in current directory:\")\nfor item in Path('.').iterdir():\n    if item.is_file():\n        print(f\"  üìÑ {item.name}\")\n\nprint(\"\\nDirectories in current directory:\")\nfor item in Path('.').iterdir():\n    if item.is_dir():\n        print(f\"  üìÅ {item.name}\")\n\n# Example 6: Glob patterns (finding files)\nprint(\"\\n=== Finding Files with Glob ===\")\n\n# Create some test files\nfor i in range(3):\n    (Path('output') / f'file{i}.txt').write_text(f'Content {i}')\n    (Path('output') / f'data{i}.json').write_text('{}')\n\nprint(\"Created test files in output/\")\n\n# Find all .txt files\nprint(\"\\nAll .txt files in output/:\")\nfor file in Path('output').glob('*.txt'):\n    print(f\"  - {file.name}\")\n\n# Find all .json files\nprint(\"\\nAll .json files in output/:\")\nfor file in Path('output').glob('*.json'):\n    print(f\"  - {file.name}\")\n\n# Recursive glob (search subdirectories too)\nprint(\"\\nAll .txt files (recursive):\")\nfor file in Path('.').rglob('*.txt'):\n    print(f\"  - {file}\")\n\nprint(\"\")\n\n# Example 7: Reading and writing with Path\nprint(\"=== Reading/Writing with Path ===\")\n\ndata_path = Path('data.txt')\n\n# Write text\ndata_path.write_text('Line 1\\nLine 2\\nLine 3\\n')\nprint(\"‚úì Wrote data.txt\")\n\n# Read text\ncontent = data_path.read_text()\nprint(\"\\nContent:\")\nprint(content)\n\n# Read lines\nlines = data_path.read_text().splitlines()\nprint(f\"Number of lines: {len(lines)}\\n\")\n\n# Example 8: Absolute vs Relative paths\nprint(\"=== Absolute vs Relative Paths ===\")\n\nrelative = Path('data/file.txt')\nprint(f\"Relative: {relative}\")\nprint(f\"Absolute: {relative.resolve()}\")\nprint(f\"Is absolute: {relative.is_absolute()}\")\n\nabsolute = Path.cwd() / 'data' / 'file.txt'\nprint(f\"\\nAbsolute: {absolute}\")\nprint(f\"Is absolute: {absolute.is_absolute()}\\n\")\n\n# Example 9: Joining paths safely\nprint(\"=== Joining Paths (Cross-Platform) ===\")\n\nbase = Path('projects')\nsubdir = 'myapp'\nfilename = 'config.json'\n\n# Method 1: / operator\npath1 = base / subdir / filename\nprint(f\"Using /: {path1}\")\n\n# Method 2: joinpath\npath2 = base.joinpath(subdir, filename)\nprint(f\"Using joinpath: {path2}\")\n\nprint(\"\\n‚úì Both create correct path for your OS!\")\nprint(\"(Forward slashes on Unix, backslashes on Windows)\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: pathlib Operations",
              "content": "**Import pathlib:**\n```python\nfrom pathlib import Path\n```\n\n**Creating paths:**\n```python\n# Current directory\nPath.cwd()\n\n# Home directory\nPath.home()\n\n# From string\nPath('folder/file.txt')\nPath('/absolute/path/file.txt')\n\n# Join paths (cross-platform!)\nPath('folder') / 'subfolder' / 'file.txt'\n```\n\n**Path information:**\n```python\npath = Path('projects/myapp/src/main.py')\n\npath.name      # 'main.py' (filename)\npath.stem      # 'main' (filename without extension)\npath.suffix    # '.py' (extension)\npath.parent    # Path('projects/myapp/src')\npath.parts     # ('projects', 'myapp', 'src', 'main.py')\n```\n\n**Checking existence:**\n```python\npath.exists()   # True if exists\npath.is_file()  # True if file\npath.is_dir()   # True if directory\npath.is_absolute()  # True if absolute path\n```\n\n**Creating directories:**\n```python\n# Create directory\nPath('output').mkdir()\n\n# Create with parents\nPath('data/processed/2024').mkdir(parents=True)\n\n# Don't error if exists\nPath('output').mkdir(exist_ok=True)\n\n# Both options\nPath('data/logs').mkdir(parents=True, exist_ok=True)\n```\n\n**Listing directory:**\n```python\n# List all items\nfor item in Path('.').iterdir():\n    print(item)\n\n# List only files\nfor item in Path('.').iterdir():\n    if item.is_file():\n        print(item)\n\n# List only directories\nfor item in Path('.').iterdir():\n    if item.is_dir():\n        print(item)\n```\n\n**Finding files (glob):**\n```python\n# All .txt files in directory\nfor file in Path('folder').glob('*.txt'):\n    print(file)\n\n# All .py files (recursive)\nfor file in Path('.').rglob('*.py'):\n    print(file)\n\n# Specific pattern\nfor file in Path('.').glob('data_*.csv'):\n    print(file)\n```\n\n**Reading/Writing:**\n```python\npath = Path('file.txt')\n\n# Write text\npath.write_text('Hello, World!')\n\n# Read text\ncontent = path.read_text()\n\n# Write bytes\npath.write_bytes(b'\\x00\\x01\\x02')\n\n# Read bytes\ndata = path.read_bytes()\n```\n\n**Path conversions:**\n```python\n# Relative to absolute\nrelative = Path('data/file.txt')\nabsolute = relative.resolve()\n\n# Path to string\npath_str = str(path)\n```\n\n**Deleting:**\n```python\n# Delete file\nPath('file.txt').unlink()\n\n# Delete empty directory\nPath('folder').rmdir()\n\n# Delete directory with contents (need shutil)\nimport shutil\nshutil.rmtree('folder')\n```\n\n**Common patterns:**\n\n**1. Process all files in directory:**\n```python\nfor file in Path('data').glob('*.csv'):\n    # Process each CSV file\n    content = file.read_text()\n    process(content)\n```\n\n**2. Create directory structure:**\n```python\nbase = Path('project')\n(base / 'src').mkdir(parents=True, exist_ok=True)\n(base / 'tests').mkdir(exist_ok=True)\n(base / 'data').mkdir(exist_ok=True)\n```\n\n**3. Safe file operations:**\n```python\npath = Path('data.txt')\n\nif path.exists():\n    content = path.read_text()\nelse:\n    print('File not found')\n```\n\n**Why pathlib is better:**\n\n‚ùå **Old way (os module):**\n```python\nimport os\npath = os.path.join('folder', 'file.txt')\nif os.path.exists(path):\n    with open(path) as f:\n        content = f.read()\n```\n\n‚úÖ **New way (pathlib):**\n```python\nfrom pathlib import Path\npath = Path('folder') / 'file.txt'\nif path.exists():\n    content = path.read_text()\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Hardcoding Path Separators**\n```python\n# WRONG - Breaks on different operating systems\npath = \"data\\\\files\\\\report.txt\"  # Only works on Windows!\npath = \"data/files/report.txt\"  # May fail on Windows\n\n# CORRECT - Use pathlib or os.path.join\nfrom pathlib import Path\npath = Path(\"data\") / \"files\" / \"report.txt\"  # Works everywhere\n```\n\n**2. Not Checking if Path Exists Before Operations**\n```python\n# WRONG - Crashes if directory doesn't exist\nfrom pathlib import Path\nPath(\"new_dir/file.txt\").write_text(\"data\")  # FileNotFoundError!\n\n# CORRECT - Create parent directories first\nfrom pathlib import Path\npath = Path(\"new_dir/file.txt\")\npath.parent.mkdir(parents=True, exist_ok=True)\npath.write_text(\"data\")\n```\n\n**3. Using String Concatenation for Paths**\n```python\n# WRONG - Missing separator, fragile\nfolder = \"data\"\nfilename = \"report.txt\"\npath = folder + filename  # \"datareport.txt\" - wrong!\n\n# CORRECT - Use proper path joining\nfrom pathlib import Path\npath = Path(folder) / filename  # \"data/report.txt\"\n```\n\n**4. Not Handling Permissions Errors**\n```python\n# WRONG - Crashes on permission denied\nfrom pathlib import Path\nPath(\"/etc/passwd\").write_text(\"hacked\")  # PermissionError!\n\n# CORRECT - Handle permission errors\nfrom pathlib import Path\ntry:\n    Path(\"somefile.txt\").write_text(\"data\")\nexcept PermissionError:\n    print(\"Cannot write to this location\")\n```\n\n**5. Confusing Relative and Absolute Paths**\n```python\n# WRONG - Relative path changes with working directory\nfrom pathlib import Path\npath = Path(\"data/file.txt\")\n# If script runs from different directory, path is wrong!\n\n# CORRECT - Use absolute path relative to script\nfrom pathlib import Path\nscript_dir = Path(__file__).parent\npath = script_dir / \"data\" / \"file.txt\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **from pathlib import Path** - Modern, cross-platform way to work with file paths. Replaces old os.path module.\n- **Path() / 'file'** - Join paths with / operator. Works on Windows, Mac, Linux automatically. Better than string concatenation.\n- **Path.cwd()** - Current working directory. **Path.home()** - User's home directory. Starting points for paths.\n- **.mkdir(parents=True, exist_ok=True)** - Safely create directories. parents=True creates parent dirs, exist_ok=True doesn't error if exists.\n- **.glob(pattern)** - Find files matching pattern. **.rglob(pattern)** - Recursive glob (search subdirectories too).\n- **.exists(), .is_file(), .is_dir()** - Check if path exists and what type it is. Always check before operations.\n- **.name, .stem, .suffix, .parent** - Get path components. name=filename, stem=filename without extension, suffix=extension, parent=parent directory.\n- **.read_text() / .write_text()** - Quick file I/O. For simple text files, easier than open().\n- **.iterdir()** - List directory contents. Returns Path objects for each item. Use .is_file() or .is_dir() to filter.\n- **Cross-platform:** pathlib handles path differences between OS automatically. Write once, works everywhere!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-05-challenge-3",
              "title": "Interactive Exercise: Project File Organizer",
              "description": "Create a file organizer that:\n1. Creates a project directory structure\n2. Finds all files of specific types\n3. Organizes files into folders by type\n4. Lists all files in the organized structure\n\n**Project structure to create:**\n```\nproject/\n  ‚îú‚îÄ‚îÄ images/\n  ‚îú‚îÄ‚îÄ documents/\n  ‚îú‚îÄ‚îÄ code/\n  ‚îî‚îÄ‚îÄ data/\n```\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "instructions": "Create a file organizer that:\n1. Creates a project directory structure\n2. Finds all files of specific types\n3. Organizes files into folders by type\n4. Lists all files in the organized structure\n\n**Project structure to create:**\n```\nproject/\n  ‚îú‚îÄ‚îÄ images/\n  ‚îú‚îÄ‚îÄ documents/\n  ‚îú‚îÄ‚îÄ code/\n  ‚îî‚îÄ‚îÄ data/\n```\n\n**Your task:**\nImplement the functions below.\n\n**Starter code:**",
              "starterCode": "from pathlib import Path\n\ndef create_project_structure(base_path):\n    \"\"\"Create project directory structure.\n    \n    Args:\n        base_path: Base directory path (string or Path)\n    \"\"\"\n    # TODO: Convert to Path object\n    # TODO: Create base directory\n    # TODO: Create subdirectories: images, documents, code, data\n    # Use mkdir(parents=True, exist_ok=True)\n    pass\n\ndef find_files_by_extension(directory, extension):\n    \"\"\"Find all files with specific extension.\n    \n    Args:\n        directory: Directory to search\n        extension: File extension (e.g., '.txt', '.py')\n        \n    Returns:\n        list: List of Path objects\n    \"\"\"\n    # TODO: Convert directory to Path\n    # TODO: Use glob to find files with extension\n    # TODO: Return list of matching files\n    pass\n\ndef organize_files(source_dir, dest_dir):\n    \"\"\"Organize files by type into folders.\n    \n    Args:\n        source_dir: Source directory with mixed files\n        dest_dir: Destination directory (project structure)\n    \"\"\"\n    # TODO: Define file type mappings\n    # Images: .jpg, .png, .gif ‚Üí images/\n    # Documents: .txt, .pdf, .doc ‚Üí documents/\n    # Code: .py, .js, .html ‚Üí code/\n    # Data: .csv, .json, .xml ‚Üí data/\n    \n    # TODO: For each file in source_dir:\n    #   - Get file extension\n    #   - Determine destination folder\n    #   - Copy or move file to destination\n    pass\n\ndef list_project_files(project_dir):\n    \"\"\"List all files in project structure.\n    \n    Args:\n        project_dir: Project directory path\n    \"\"\"\n    # TODO: For each subdirectory:\n    #   - Print directory name\n    #   - List files in that directory\n    pass\n\n# Test your functions\nprint(\"=== File Organizer ===\")\n\nprint(\"\\n1. Creating project structure...\")\ncreate_project_structure('my_project')\n\nprint(\"\\n2. Creating test files...\")\n# Create some test files\ntest_files = [\n    'photo1.jpg', 'photo2.png',\n    'document.txt', 'report.pdf',\n    'script.py', 'app.js',\n    'data.csv', 'config.json'\n]\n\nfor filename in test_files:\n    Path(filename).write_text(f'Content of {filename}')\nprint(f\"‚úì Created {len(test_files)} test files\")\n\nprint(\"\\n3. Finding .jpg files...\")\njpg_files = find_files_by_extension('.', '.jpg')\nfor f in jpg_files:\n    print(f\"  - {f.name}\")\n\nprint(\"\\n4. Organizing files...\")\norganize_files('.', 'my_project')\n\nprint(\"\\n5. Project structure:\")\nlist_project_files('my_project')",
              "solution": "from pathlib import Path\nimport shutil\n\n# Project File Organizer\n# This solution demonstrates pathlib for file system operations\n\ndef create_project_structure(base_path):\n    \"\"\"Create project directory structure.\"\"\"\n    # Step 1: Convert to Path object\n    base = Path(base_path)\n    \n    # Step 2: Define subdirectories\n    subdirs = ['images', 'documents', 'code', 'data']\n    \n    # Step 3: Create base and all subdirectories\n    for subdir in subdirs:\n        (base / subdir).mkdir(parents=True, exist_ok=True)\n    \n    print(f\"Created project structure at '{base_path}'\")\n\ndef find_files_by_extension(directory, extension):\n    \"\"\"Find all files with specific extension.\"\"\"\n    # Convert to Path and use glob\n    path = Path(directory)\n    \n    # Make sure extension starts with dot\n    if not extension.startswith('.'):\n        extension = '.' + extension\n    \n    # Use glob to find matching files\n    return list(path.glob('*' + extension))\n\ndef organize_files(source_dir, dest_dir):\n    \"\"\"Organize files by type into folders.\"\"\"\n    # Step 1: Define file type mappings\n    type_mappings = {\n        'images': ['.jpg', '.png', '.gif', '.jpeg', '.bmp'],\n        'documents': ['.txt', '.pdf', '.doc', '.docx', '.md'],\n        'code': ['.py', '.js', '.html', '.css', '.java'],\n        'data': ['.csv', '.json', '.xml', '.yaml', '.xlsx']\n    }\n    \n    source = Path(source_dir)\n    dest = Path(dest_dir)\n    \n    # Step 2: Process each file in source directory\n    for file_path in source.iterdir():\n        if file_path.is_file():\n            ext = file_path.suffix.lower()\n            \n            # Find matching folder\n            for folder, extensions in type_mappings.items():\n                if ext in extensions:\n                    # Copy file to appropriate folder\n                    dest_path = dest / folder / file_path.name\n                    shutil.copy2(file_path, dest_path)\n                    print(f\"  Copied {file_path.name} to {folder}/\")\n                    break\n\ndef list_project_files(project_dir):\n    \"\"\"List all files in project structure.\"\"\"\n    project = Path(project_dir)\n    \n    for subdir in sorted(project.iterdir()):\n        if subdir.is_dir():\n            print(f\"\\n{subdir.name}/\")\n            files = list(subdir.iterdir())\n            if files:\n                for file in files:\n                    print(f\"  - {file.name}\")\n            else:\n                print(\"  (empty)\")\n\n# Test the functions\nprint(\"=== File Organizer ===\")\n\nprint(\"\\n1. Creating project structure...\")\ncreate_project_structure('my_project')\n\nprint(\"\\n2. Creating test files...\")\ntest_files = [\n    'photo1.jpg', 'photo2.png',\n    'document.txt', 'report.pdf',\n    'script.py', 'app.js',\n    'data.csv', 'config.json'\n]\n\nfor filename in test_files:\n    Path(filename).write_text(f'Content of {filename}')\nprint(f\"Created {len(test_files)} test files\")\n\nprint(\"\\n3. Finding .jpg files...\")\njpg_files = find_files_by_extension('.', '.jpg')\nfor f in jpg_files:\n    print(f\"  - {f.name}\")\n\nprint(\"\\n4. Organizing files...\")\norganize_files('.', 'my_project')\n\nprint(\"\\n5. Project structure:\")\nlist_project_files('my_project')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Path(dir).mkdir(parents=True, exist_ok=True) to create directories. Use Path(dir).glob('*' + extension) to find files. Use file.rename() or shutil.copy() to move files."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-06",
          "title": "Mini-Project: Log File Analyzer",
          "moduleId": "module-09",
          "order": 6,
          "estimatedMinutes": 45,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Project Overview: The System Detective",
              "content": "**The Challenge:** Build a log analyzer that reads server log files, extracts insights, and generates reports.\n\n**Real-world scenario:** You're a DevOps engineer. Your web server generates thousands of log entries daily. You need to:\n- Find all errors and warnings\n- Identify which pages are most visited\n- Track response times\n- Generate daily reports\n- Export data for analysis\n\n**What you'll build:**\n\n1. **Log Parser:**\n   - Read log files (text format)\n   - Parse each line into structured data\n   - Handle different log formats\n\n2. **Analysis Engine:**\n   - Count errors, warnings, info messages\n   - Find slowest requests\n   - Identify most common errors\n   - Calculate statistics\n\n3. **Report Generator:**\n   - Summary statistics\n   - Top errors\n   - Export to CSV\n   - Save analysis to JSON\n\n**Sample log format:**\n```\n2024-01-15 10:23:45 [ERROR] Database connection failed\n2024-01-15 10:23:46 [INFO] User login: alice@example.com\n2024-01-15 10:23:47 [WARNING] Slow query: 2.5s\n```\n\n**Skills applied:**\n- Reading text files with `with` statement\n- String parsing and pattern matching\n- Working with CSV for exports\n- Working with JSON for structured data\n- Using pathlib for file operations\n- Error handling throughout\n\n**Project structure:**\n```\nlog_analyzer/\n  ‚îú‚îÄ‚îÄ logs/           # Input log files\n  ‚îú‚îÄ‚îÄ reports/        # Generated reports\n  ‚îú‚îÄ‚îÄ exports/        # CSV/JSON exports\n  ‚îî‚îÄ‚îÄ analyzer.py     # Main program\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Implementation: Log File Analyzer",
              "content": "This production-ready log analyzer demonstrates:\n\n**File I/O Concepts:**\n1. **Reading files** with `with` statement\n2. **Writing files** for reports\n3. **CSV export** with csv module\n4. **JSON export** for structured data\n5. **pathlib** for cross-platform paths\n6. **Error handling** throughout\n\n**Data Processing:**\n- Parsing log lines into structured objects\n- Grouping and counting with Counter and defaultdict\n- Filtering data (errors, warnings)\n- Statistical analysis\n\n**Real-world Features:**\n- Handles malformed log lines\n- Generates multiple output formats\n- Creates directory structure\n- Professional report formatting\n- Reusable functions\n\n**Why this matters:**\nLog analysis is essential in DevOps, security, and troubleshooting. This project teaches real skills used daily by software engineers.",
              "code": "\"\"\"Log File Analyzer - Complete File I/O Application\n\nDemonstrates: file reading, parsing, CSV export, JSON export,\npath operations, error handling, and data analysis.\n\"\"\"\n\nfrom pathlib import Path\nimport csv\nimport json\nfrom datetime import datetime\nfrom collections import defaultdict, Counter\n\n# ============================================================================\n# Log Entry Class\n# ============================================================================\n\nclass LogEntry:\n    \"\"\"Represents a single log entry.\"\"\"\n    \n    def __init__(self, timestamp, level, message):\n        self.timestamp = timestamp\n        self.level = level\n        self.message = message\n    \n    def __repr__(self):\n        return f\"LogEntry({self.timestamp}, {self.level}, {self.message[:30]}...)\"\n\n# ============================================================================\n# Log Parser\n# ============================================================================\n\ndef parse_log_line(line):\n    \"\"\"Parse a single log line.\n    \n    Format: YYYY-MM-DD HH:MM:SS [LEVEL] Message\n    \n    Returns:\n        LogEntry or None if parsing fails\n    \"\"\"\n    try:\n        # Split by brackets to get level\n        parts = line.strip().split('[')\n        if len(parts) < 2:\n            return None\n        \n        # Extract timestamp (before first [)\n        timestamp_str = parts[0].strip()\n        \n        # Extract level and message\n        level_and_msg = parts[1].split(']', 1)\n        if len(level_and_msg) < 2:\n            return None\n        \n        level = level_and_msg[0].strip()\n        message = level_and_msg[1].strip()\n        \n        return LogEntry(timestamp_str, level, message)\n    \n    except Exception:\n        return None\n\ndef read_log_file(filepath):\n    \"\"\"Read and parse entire log file.\n    \n    Returns:\n        list: List of LogEntry objects\n    \"\"\"\n    entries = []\n    \n    try:\n        with open(filepath, 'r') as file:\n            for line_num, line in enumerate(file, 1):\n                entry = parse_log_line(line)\n                if entry:\n                    entries.append(entry)\n    \n    except FileNotFoundError:\n        print(f\"Error: Log file '{filepath}' not found\")\n        return []\n    except Exception as e:\n        print(f\"Error reading log file: {e}\")\n        return []\n    \n    return entries\n\n# ============================================================================\n# Analysis Functions\n# ============================================================================\n\ndef analyze_logs(entries):\n    \"\"\"Analyze log entries and generate statistics.\n    \n    Returns:\n        dict: Analysis results\n    \"\"\"\n    # Count by level\n    level_counts = Counter(entry.level for entry in entries)\n    \n    # Count messages\n    message_counts = Counter(entry.message for entry in entries)\n    \n    # Group by level\n    by_level = defaultdict(list)\n    for entry in entries:\n        by_level[entry.level].append(entry)\n    \n    # Statistics\n    analysis = {\n        'total_entries': len(entries),\n        'level_counts': dict(level_counts),\n        'error_count': level_counts.get('ERROR', 0),\n        'warning_count': level_counts.get('WARNING', 0),\n        'info_count': level_counts.get('INFO', 0),\n        'top_errors': message_counts.most_common(5),\n        'entries_by_level': {level: len(items) for level, items in by_level.items()}\n    }\n    \n    return analysis\n\ndef find_errors(entries):\n    \"\"\"Find all error entries.\n    \n    Returns:\n        list: Error LogEntry objects\n    \"\"\"\n    return [entry for entry in entries if entry.level == 'ERROR']\n\ndef find_warnings(entries):\n    \"\"\"Find all warning entries.\n    \n    Returns:\n        list: Warning LogEntry objects\n    \"\"\"\n    return [entry for entry in entries if entry.level == 'WARNING']\n\n# ============================================================================\n# Export Functions\n# ============================================================================\n\ndef export_to_csv(entries, filepath):\n    \"\"\"Export log entries to CSV.\"\"\"\n    with open(filepath, 'w', newline='') as file:\n        writer = csv.writer(file)\n        \n        # Header\n        writer.writerow(['Timestamp', 'Level', 'Message'])\n        \n        # Data\n        for entry in entries:\n            writer.writerow([entry.timestamp, entry.level, entry.message])\n    \n    print(f\"‚úì Exported {len(entries)} entries to {filepath}\")\n\ndef export_analysis_to_json(analysis, filepath):\n    \"\"\"Export analysis results to JSON.\"\"\"\n    # Convert Counter objects to regular dicts for JSON\n    json_data = {\n        'total_entries': analysis['total_entries'],\n        'level_counts': analysis['level_counts'],\n        'error_count': analysis['error_count'],\n        'warning_count': analysis['warning_count'],\n        'info_count': analysis['info_count'],\n        'top_errors': [[msg, count] for msg, count in analysis['top_errors']]\n    }\n    \n    with open(filepath, 'w') as file:\n        json.dump(json_data, file, indent=2)\n    \n    print(f\"‚úì Exported analysis to {filepath}\")\n\n# ============================================================================\n# Report Generator\n# ============================================================================\n\ndef generate_report(entries, analysis, output_dir):\n    \"\"\"Generate comprehensive text report.\"\"\"\n    report_path = Path(output_dir) / 'report.txt'\n    \n    with open(report_path, 'w') as file:\n        file.write(\"=\" * 70 + \"\\n\")\n        file.write(\"LOG ANALYSIS REPORT\\n\")\n        file.write(\"=\" * 70 + \"\\n\\n\")\n        \n        # Summary\n        file.write(\"SUMMARY\\n\")\n        file.write(\"-\" * 70 + \"\\n\")\n        file.write(f\"Total Entries: {analysis['total_entries']}\\n\")\n        file.write(f\"Errors: {analysis['error_count']}\\n\")\n        file.write(f\"Warnings: {analysis['warning_count']}\\n\")\n        file.write(f\"Info: {analysis['info_count']}\\n\\n\")\n        \n        # Level breakdown\n        file.write(\"LEVEL BREAKDOWN\\n\")\n        file.write(\"-\" * 70 + \"\\n\")\n        for level, count in analysis['level_counts'].items():\n            percentage = (count / analysis['total_entries']) * 100\n            file.write(f\"{level:12} {count:6} ({percentage:.1f}%)\\n\")\n        file.write(\"\\n\")\n        \n        # Top errors\n        file.write(\"TOP 5 ERRORS\\n\")\n        file.write(\"-\" * 70 + \"\\n\")\n        for i, (message, count) in enumerate(analysis['top_errors'], 1):\n            file.write(f\"{i}. [{count}x] {message}\\n\")\n        file.write(\"\\n\")\n        \n        file.write(\"=\" * 70 + \"\\n\")\n    \n    print(f\"‚úì Generated report: {report_path}\")\n    return report_path\n\n# ============================================================================\n# Main Application\n# ============================================================================\n\ndef create_sample_log():\n    \"\"\"Create sample log file for testing.\"\"\"\n    log_entries = [\n        \"2024-01-15 10:00:00 [INFO] Server started\",\n        \"2024-01-15 10:00:05 [INFO] User login: alice@example.com\",\n        \"2024-01-15 10:00:10 [ERROR] Database connection failed\",\n        \"2024-01-15 10:00:15 [WARNING] High memory usage: 85%\",\n        \"2024-01-15 10:00:20 [INFO] User login: bob@example.com\",\n        \"2024-01-15 10:00:25 [ERROR] Database connection failed\",\n        \"2024-01-15 10:00:30 [INFO] Processing request: /api/users\",\n        \"2024-01-15 10:00:35 [WARNING] Slow query: 2.5s\",\n        \"2024-01-15 10:00:40 [ERROR] File not found: config.yaml\",\n        \"2024-01-15 10:00:45 [INFO] Request completed: 200 OK\",\n        \"2024-01-15 10:00:50 [ERROR] Database connection failed\",\n        \"2024-01-15 10:00:55 [WARNING] Cache miss rate: 45%\",\n        \"2024-01-15 10:01:00 [INFO] User logout: alice@example.com\",\n        \"2024-01-15 10:01:05 [ERROR] Invalid API key\",\n        \"2024-01-15 10:01:10 [INFO] Backup completed successfully\",\n    ]\n    \n    Path('logs').mkdir(exist_ok=True)\n    log_file = Path('logs') / 'server.log'\n    \n    with open(log_file, 'w') as file:\n        for entry in log_entries:\n            file.write(entry + '\\n')\n    \n    print(f\"‚úì Created sample log: {log_file}\")\n    return log_file\n\ndef run_analyzer():\n    \"\"\"Main analyzer workflow.\"\"\"\n    print(\"=\" * 70)\n    print(\"LOG FILE ANALYZER\")\n    print(\"=\" * 70)\n    \n    # Create directories\n    for dir_name in ['logs', 'reports', 'exports']:\n        Path(dir_name).mkdir(exist_ok=True)\n    \n    # Create sample log\n    print(\"\\n1. Creating sample log file...\")\n    log_file = create_sample_log()\n    \n    # Read and parse\n    print(\"\\n2. Reading and parsing log file...\")\n    entries = read_log_file(log_file)\n    print(f\"‚úì Parsed {len(entries)} log entries\")\n    \n    # Analyze\n    print(\"\\n3. Analyzing logs...\")\n    analysis = analyze_logs(entries)\n    print(f\"‚úì Found {analysis['error_count']} errors\")\n    print(f\"‚úì Found {analysis['warning_count']} warnings\")\n    \n    # Generate report\n    print(\"\\n4. Generating report...\")\n    report_path = generate_report(entries, analysis, 'reports')\n    \n    # Export to CSV\n    print(\"\\n5. Exporting data...\")\n    errors = find_errors(entries)\n    export_to_csv(errors, 'exports/errors.csv')\n    export_to_csv(entries, 'exports/all_logs.csv')\n    \n    # Export analysis to JSON\n    export_analysis_to_json(analysis, 'exports/analysis.json')\n    \n    # Display report\n    print(\"\\n6. Report Contents:\")\n    print(\"=\" * 70)\n    with open(report_path, 'r') as f:\n        print(f.read())\n    \n    print(\"\\n\" + \"=\" * 70)\n    print(\"‚úì Analysis complete!\")\n    print(f\"  - Report: {report_path}\")\n    print(f\"  - CSV exports: exports/\")\n    print(f\"  - JSON analysis: exports/analysis.json\")\n    print(\"=\" * 70)\n\n# Run the analyzer\nif __name__ == '__main__':\n    run_analyzer()",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Code Architecture Breakdown",
              "content": "**Project Structure:**\n\n```\n1. LogEntry Class\n   - Data structure for parsed log entries\n   - Stores timestamp, level, message\n\n2. Parser Functions\n   - parse_log_line() - Parse single line\n   - read_log_file() - Read entire file\n   - Error handling for malformed data\n\n3. Analysis Functions\n   - analyze_logs() - Generate statistics\n   - find_errors() - Filter errors\n   - find_warnings() - Filter warnings\n   - Uses Counter and defaultdict\n\n4. Export Functions\n   - export_to_csv() - CSV format\n   - export_analysis_to_json() - JSON format\n   - Proper file handling with 'with'\n\n5. Report Generator\n   - generate_report() - Text report\n   - Formatted output\n   - Summary statistics\n\n6. Main Application\n   - run_analyzer() - Orchestrates workflow\n   - Creates directories\n   - Handles full pipeline\n```\n\n**Data Flow:**\n\n```\nLog File (text)\n    ‚Üì\nRead with 'with' statement\n    ‚Üì\nParse each line ‚Üí LogEntry objects\n    ‚Üì\nAnalyze (count, group, filter)\n    ‚Üì\nGenerate outputs:\n  - Text report\n  - CSV export\n  - JSON export\n```\n\n**File I/O Patterns Used:**\n\n1. **Reading:**\n   ```python\n   with open(filepath, 'r') as file:\n       for line in file:\n           process(line)\n   ```\n\n2. **Writing:**\n   ```python\n   with open(filepath, 'w') as file:\n       file.write(content)\n   ```\n\n3. **CSV Export:**\n   ```python\n   with open(filepath, 'w', newline='') as file:\n       writer = csv.writer(file)\n       writer.writerow(data)\n   ```\n\n4. **JSON Export:**\n   ```python\n   with open(filepath, 'w') as file:\n       json.dump(data, file, indent=2)\n   ```\n\n5. **Path Operations:**\n   ```python\n   Path('dir').mkdir(exist_ok=True)\n   path = Path('dir') / 'file.txt'\n   ```\n\n**Why This Architecture:**\n\n‚úÖ **Separation of concerns** - Each function has one job\n‚úÖ **Reusable** - Functions can be used independently  \n‚úÖ **Testable** - Easy to unit test each function\n‚úÖ **Maintainable** - Clear structure, easy to modify\n‚úÖ **Production-ready** - Error handling, logging, multiple outputs"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Reading Entire Large Log File Into Memory**\n```python\n# WRONG - Loads entire file (could be gigabytes!)\nwith open(\"huge.log\") as f:\n    content = f.read()\n    for line in content.split(\"\\n\"):\n        process(line)\n\n# CORRECT - Read line by line\nwith open(\"huge.log\") as f:\n    for line in f:  # Iterates without loading all\n        process(line)\n```\n\n**2. Not Handling Log Rotation**\n```python\n# WRONG - Misses logs when file is rotated\nwith open(\"app.log\") as f:\n    while True:\n        line = f.readline()  # Stops at EOF, misses new file\n\n# CORRECT - Reopen file periodically or use watchdog\nimport time\nwhile True:\n    with open(\"app.log\") as f:\n        for line in f:\n            process(line)\n    time.sleep(1)  # Check for new content\n```\n\n**3. Using print for Log Output**\n```python\n# WRONG - No timestamps, no levels, hard to filter\nprint(\"Error: something failed\")\nprint(\"User logged in\")\n\n# CORRECT - Use logging module\nimport logging\nlogging.basicConfig(level=logging.INFO)\nlogging.error(\"Something failed\")\nlogging.info(\"User logged in\")\n```\n\n**4. Regex for Every Line of Large Files**\n```python\n# WRONG - Compiling regex inside loop is slow\nimport re\nfor line in open(\"huge.log\"):\n    if re.match(r\"ERROR.*\", line):  # Recompiles every time!\n        print(line)\n\n# CORRECT - Compile regex once outside loop\nimport re\npattern = re.compile(r\"ERROR.*\")\nfor line in open(\"huge.log\"):\n    if pattern.match(line):\n        print(line)\n```\n\n**5. Not Handling Encoding Errors in Logs**\n```python\n# WRONG - Crashes on binary/corrupt data\nwith open(\"mixed.log\") as f:\n    for line in f:  # UnicodeDecodeError on binary!\n        print(line)\n\n# CORRECT - Handle encoding errors\nwith open(\"mixed.log\", encoding=\"utf-8\", errors=\"replace\") as f:\n    for line in f:\n        print(line)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Combine all File I/O skills:** Real projects use text files, CSV, JSON, and path operations together. This project demonstrates integration.\n- **Structure matters:** Separate parsing, analysis, and export into distinct functions. Makes code testable and maintainable.\n- **Error handling is essential:** Production code handles malformed data, missing files, and edge cases gracefully. Always use try/except.\n- **Multiple output formats:** Generate reports in multiple formats (text, CSV, JSON) for different audiences and use cases.\n- **Use appropriate data structures:** Counter for counting, defaultdict for grouping, lists for ordering. Choose the right tool.\n- **Path operations for portability:** Use pathlib for cross-platform file operations. mkdir(exist_ok=True) prevents errors.\n- **Parse then analyze:** First convert raw text into structured objects (LogEntry), then analyze the structured data. Separation of concerns.\n- **Real-world applications:** Log analysis is crucial in DevOps, security monitoring, troubleshooting, and system optimization.\n- **File I/O patterns are universal:** These patterns (read, parse, analyze, export) apply to any data processing task.\n- **Professional code practices:** Type hints, docstrings, error messages, organized functions - write code others can understand and maintain."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-06-challenge-3",
              "title": "Extension Challenge: Add Advanced Features",
              "description": "**Challenge 1: Add Time-Based Analysis**\n\nExtend the analyzer to:\n- Parse timestamps properly\n- Group logs by hour\n- Find peak error times\n- Calculate time ranges\n\n**Challenge 2: Add Filtering**\n\nAdd ability to:\n- Filter by date range\n- Filter by log level\n- Search for keywords in messages\n- Export filtered results\n\n**Challenge 3: Add Statistical Analysis**\n\nCalculate:\n- Average errors per hour\n- Error rate percentage\n- Time between errors\n- Most active hours\n\n**Starter code for Challenge 1:**",
              "instructions": "**Challenge 1: Add Time-Based Analysis**\n\nExtend the analyzer to:\n- Parse timestamps properly\n- Group logs by hour\n- Find peak error times\n- Calculate time ranges\n\n**Challenge 2: Add Filtering**\n\nAdd ability to:\n- Filter by date range\n- Filter by log level\n- Search for keywords in messages\n- Export filtered results\n\n**Challenge 3: Add Statistical Analysis**\n\nCalculate:\n- Average errors per hour\n- Error rate percentage\n- Time between errors\n- Most active hours\n\n**Starter code for Challenge 1:**",
              "starterCode": "from datetime import datetime\n\ndef parse_timestamp(timestamp_str):\n    \"\"\"Parse timestamp string to datetime object.\n    \n    Args:\n        timestamp_str: String like '2024-01-15 10:00:00'\n        \n    Returns:\n        datetime object or None if parsing fails\n    \"\"\"\n    try:\n        return datetime.strptime(timestamp_str, '%Y-%m-%d %H:%M:%S')\n    except ValueError:\n        return None\n\ndef group_by_hour(entries):\n    \"\"\"Group log entries by hour.\n    \n    Returns:\n        dict: {hour: [entries]}\n    \"\"\"\n    # TODO: Parse timestamps\n    # TODO: Extract hour from datetime\n    # TODO: Group entries by hour\n    # TODO: Return grouped data\n    pass\n\ndef find_peak_error_hour(entries):\n    \"\"\"Find hour with most errors.\n    \n    Returns:\n        tuple: (hour, error_count)\n    \"\"\"\n    # TODO: Filter errors only\n    # TODO: Group by hour\n    # TODO: Count errors per hour\n    # TODO: Return hour with max errors\n    pass",
              "solution": "from datetime import datetime\nfrom collections import defaultdict\n\n# Advanced Log Analyzer\n# This solution demonstrates time-based analysis with datetime\n\ndef parse_timestamp(timestamp_str):\n    \"\"\"Parse timestamp string to datetime object.\"\"\"\n    try:\n        return datetime.strptime(timestamp_str, '%Y-%m-%d %H:%M:%S')\n    except ValueError:\n        return None\n\ndef group_by_hour(entries):\n    \"\"\"Group log entries by hour.\"\"\"\n    # Use defaultdict for automatic list creation\n    grouped = defaultdict(list)\n    \n    for entry in entries:\n        # Parse the timestamp\n        dt = parse_timestamp(entry['timestamp'])\n        if dt:\n            # Extract hour and group\n            hour = dt.hour\n            grouped[hour].append(entry)\n    \n    return dict(grouped)\n\ndef find_peak_error_hour(entries):\n    \"\"\"Find hour with most errors.\"\"\"\n    # Step 1: Filter errors only\n    errors = [e for e in entries if e.get('level') == 'ERROR']\n    \n    if not errors:\n        return (None, 0)\n    \n    # Step 2: Count errors per hour\n    hour_counts = defaultdict(int)\n    for entry in errors:\n        dt = parse_timestamp(entry['timestamp'])\n        if dt:\n            hour_counts[dt.hour] += 1\n    \n    # Step 3: Find hour with max errors\n    peak_hour = max(hour_counts, key=hour_counts.get)\n    return (peak_hour, hour_counts[peak_hour])\n\ndef filter_by_date_range(entries, start_date, end_date):\n    \"\"\"Filter entries by date range.\"\"\"\n    filtered = []\n    for entry in entries:\n        dt = parse_timestamp(entry['timestamp'])\n        if dt and start_date <= dt <= end_date:\n            filtered.append(entry)\n    return filtered\n\ndef filter_by_level(entries, level):\n    \"\"\"Filter entries by log level.\"\"\"\n    return [e for e in entries if e.get('level') == level.upper()]\n\ndef calculate_error_rate(entries):\n    \"\"\"Calculate error rate percentage.\"\"\"\n    if not entries:\n        return 0.0\n    error_count = sum(1 for e in entries if e.get('level') == 'ERROR')\n    return (error_count / len(entries)) * 100\n\n# Test the functions\ntest_entries = [\n    {'timestamp': '2024-01-15 09:00:00', 'level': 'INFO', 'message': 'Start'},\n    {'timestamp': '2024-01-15 09:30:00', 'level': 'ERROR', 'message': 'Failed'},\n    {'timestamp': '2024-01-15 10:00:00', 'level': 'ERROR', 'message': 'Timeout'},\n    {'timestamp': '2024-01-15 10:15:00', 'level': 'ERROR', 'message': 'Connection'},\n    {'timestamp': '2024-01-15 11:00:00', 'level': 'INFO', 'message': 'OK'},\n]\n\nprint(\"=== Advanced Log Analysis ===\")\n\nprint(\"\\n1. Group by hour:\")\nfor hour, items in group_by_hour(test_entries).items():\n    print(f\"  Hour {hour}:00 - {len(items)} entries\")\n\nprint(\"\\n2. Peak error hour:\")\nhour, count = find_peak_error_hour(test_entries)\nprint(f\"  Hour {hour}:00 with {count} errors\")\n\nprint(\"\\n3. Error rate:\")\nrate = calculate_error_rate(test_entries)\nprint(f\"  {rate:.1f}% of entries are errors\")\n\nprint(\"\\n4. Filter by level (ERROR):\")\nerrors = filter_by_level(test_entries, 'ERROR')\nfor e in errors:\n    print(f\"  {e['timestamp']}: {e['message']}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use datetime.strptime() to parse timestamps. Use datetime.hour to extract hour. Use defaultdict(list) to group by hour."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-09-lesson-07",
          "title": "Modern File Handling with Pathlib (Python 3.4+)",
          "moduleId": "module-09",
          "order": 7,
          "estimatedMinutes": 35,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Imagine you're giving directions to your house:\n\n**Old way (os.path):** \"Go to drive C, then folder Users, then folder Alice, then folder Documents, then file notes.txt\"\n```python\nimport os\npath = os.path.join('C:', 'Users', 'Alice', 'Documents', 'notes.txt')\n```\n\n**New way (pathlib):** Just describe the path naturally!\n```python\nfrom pathlib import Path\npath = Path('C:/Users/Alice/Documents') / 'notes.txt'\n```\n\n### Why pathlib is Better:\n\n**1. Object-Oriented Design**\nInstead of passing strings to functions, paths are objects with methods:\n```python\n# Old way (os.path)\nimport os\nif os.path.exists(filepath):\n    content = open(filepath).read()\n    print(os.path.basename(filepath))\n\n# New way (pathlib)\nfrom pathlib import Path\npath = Path(filepath)\nif path.exists():\n    content = path.read_text()\n    print(path.name)\n```\n\n**2. The / Operator for Joining Paths**\n```python\n# Old way - clunky\npath = os.path.join('folder', 'subfolder', 'file.txt')\n\n# New way - natural!\npath = Path('folder') / 'subfolder' / 'file.txt'\n```\n\n**3. Cross-Platform by Default**\nPathlib automatically uses the right separator:\n- Windows: `C:\\Users\\Alice`\n- Mac/Linux: `/home/alice`\n\n**4. Built-in File Operations**\n```python\npath = Path('data.txt')\npath.write_text('Hello!')  # Write file\ncontent = path.read_text()  # Read file\npath.unlink()  # Delete file\n```\n\n### When to Use pathlib:\n- Any new Python 3 project\n- File system operations (create, delete, rename)\n- Path manipulation (joining, splitting)\n- Finding files (glob patterns)\n- Reading/writing files\n\n**pathlib is the modern standard** - prefer it over os.path for all new code!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Pathlib Essentials",
              "content": "**Expected Output:**\n```\n=== Creating Paths ===\nPath: folder/subfolder/file.txt\nUsing / operator: data/users/config.json\n\n=== Path Properties ===\nFull path: /home/user/project/data/report.csv\nName: report.csv\nStem (no extension): report\nSuffix: .csv\nParent: /home/user/project/data\nParts: ('/', 'home', 'user', 'project', 'data', 'report.csv')\n\n=== Checking Paths ===\nCurrent directory exists: True\nIs it a directory: True\nIs it a file: False\n\n=== Reading and Writing ===\nWrote: pathlib_demo.txt\nRead content: Hello from pathlib!\nThis is line 2.\n\n=== Finding Files ===\nPython files: ['script.py', 'utils.py', 'main.py']\nAll text files (recursive): ['notes.txt', 'data/log.txt']\n\n=== Directory Operations ===\nCreated: output/reports/2024\nFiles in current dir: [list of files]\n```",
              "code": "# Modern File Handling with Pathlib\nfrom pathlib import Path\n\nprint(\"=== Creating Paths ===\")\n\n# Create a path using / operator (works on all platforms!)\npath = Path('folder') / 'subfolder' / 'file.txt'\nprint(f\"Path: {path}\")\n\n# Multiple ways to create paths\npath1 = Path('data', 'users', 'config.json')  # Using arguments\npath2 = Path('data/users/config.json')  # Using string\npath3 = Path('data') / 'users' / 'config.json'  # Using / operator\nprint(f\"Using / operator: {path3}\")\nprint()\n\nprint(\"=== Path Properties ===\")\n\n# Path has useful properties\nfile_path = Path('/home/user/project/data/report.csv')\nprint(f\"Full path: {file_path}\")\nprint(f\"Name: {file_path.name}\")  # report.csv\nprint(f\"Stem (no extension): {file_path.stem}\")  # report\nprint(f\"Suffix: {file_path.suffix}\")  # .csv\nprint(f\"Parent: {file_path.parent}\")  # /home/user/project/data\nprint(f\"Parts: {file_path.parts}\")  # All path components\nprint()\n\nprint(\"=== Checking Paths ===\")\n\n# Check if paths exist\ncurrent = Path('.')\nprint(f\"Current directory exists: {current.exists()}\")\nprint(f\"Is it a directory: {current.is_dir()}\")\nprint(f\"Is it a file: {current.is_file()}\")\nprint()\n\nprint(\"=== Reading and Writing ===\")\n\n# Write text to file (creates if doesn't exist)\ndemo_file = Path('pathlib_demo.txt')\ndemo_file.write_text('Hello from pathlib!\\nThis is line 2.')\nprint(f\"Wrote: {demo_file}\")\n\n# Read text from file\ncontent = demo_file.read_text()\nprint(f\"Read content: {content}\")\nprint()\n\nprint(\"=== Finding Files ===\")\n\n# glob() finds files matching a pattern\ncurrent_dir = Path('.')\n\n# Find all .py files in current directory\npy_files = list(current_dir.glob('*.py'))\nprint(f\"Python files: {[f.name for f in py_files[:3]]}\")\n\n# Find files recursively with **\nall_txt = list(current_dir.glob('**/*.txt'))\nprint(f\"All text files (recursive): {[str(f) for f in all_txt[:3]]}\")\nprint()\n\nprint(\"=== Directory Operations ===\")\n\n# Create directories (including parents)\noutput_dir = Path('output') / 'reports' / '2024'\noutput_dir.mkdir(parents=True, exist_ok=True)\nprint(f\"Created: {output_dir}\")\n\n# List directory contents\nfiles_in_current = list(Path('.').iterdir())\nprint(f\"Files in current dir: {[f.name for f in files_in_current[:5]]}\")\nprint()\n\nprint(\"=== Practical Example: Organize Files ===\")\n\ndef organize_downloads(download_folder):\n    \"\"\"Organize files by extension.\"\"\"\n    downloads = Path(download_folder)\n    \n    # Define categories\n    categories = {\n        '.pdf': 'Documents',\n        '.jpg': 'Images',\n        '.png': 'Images',\n        '.mp3': 'Music',\n        '.mp4': 'Videos',\n    }\n    \n    for file in downloads.iterdir():\n        if file.is_file():\n            # Get the category folder\n            suffix = file.suffix.lower()\n            category = categories.get(suffix, 'Other')\n            \n            # Create category folder\n            dest_folder = downloads / category\n            dest_folder.mkdir(exist_ok=True)\n            \n            # Move file (in real code)\n            # file.rename(dest_folder / file.name)\n            print(f\"Would move {file.name} -> {category}/\")\n\n# Demo (won't actually run without a downloads folder)\nprint(\"File organizer function created!\")\n\n# Cleanup demo file\ndemo_file.unlink()  # Delete the file\nprint(f\"Cleaned up: {demo_file}\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "### Creating Paths:\n\n```python\nfrom pathlib import Path\n\n# From string\npath = Path('/home/user/file.txt')\n\n# From multiple parts\npath = Path('folder', 'subfolder', 'file.txt')\n\n# Using / operator (recommended!)\npath = Path('folder') / 'subfolder' / 'file.txt'\n\n# Current directory\ncurrent = Path('.')  # or Path.cwd()\n\n# Home directory\nhome = Path.home()  # e.g., /home/alice or C:\\Users\\Alice\n```\n\n### Path Properties:\n\n| Property | Example for `/home/user/data.csv` |\n|----------|-----------------------------------|\n| `.name` | `data.csv` |\n| `.stem` | `data` |\n| `.suffix` | `.csv` |\n| `.parent` | `/home/user` |\n| `.parts` | `('/', 'home', 'user', 'data.csv')` |\n| `.anchor` | `/` (root) |\n\n### Checking Paths:\n\n```python\npath = Path('some/path')\n\npath.exists()     # Does it exist?\npath.is_file()    # Is it a file?\npath.is_dir()     # Is it a directory?\npath.is_absolute()  # Is it absolute path?\n```\n\n### Reading and Writing:\n\n```python\npath = Path('file.txt')\n\n# Write text (creates file)\npath.write_text('Hello world')\n\n# Read text\ncontent = path.read_text()\n\n# Write bytes\npath.write_bytes(b'\\x00\\x01\\x02')\n\n# Read bytes\ndata = path.read_bytes()\n```\n\n### Directory Operations:\n\n```python\ndir_path = Path('my_folder')\n\n# Create directory\ndir_path.mkdir()  # Error if parent doesn't exist\ndir_path.mkdir(parents=True)  # Create parents too\ndir_path.mkdir(exist_ok=True)  # No error if exists\n\n# List contents\nfor item in dir_path.iterdir():\n    print(item)\n\n# Delete empty directory\ndir_path.rmdir()\n```\n\n### Finding Files (glob):\n\n```python\npath = Path('project')\n\n# Find by pattern\npath.glob('*.py')  # All .py files in directory\npath.glob('**/*.py')  # All .py files recursively\npath.glob('data_*.csv')  # Files starting with data_\npath.glob('**/test_*.py')  # Test files anywhere\n```\n\n### File Operations:\n\n```python\npath = Path('file.txt')\n\n# Rename/move\npath.rename('new_name.txt')\npath.rename(Path('other_folder') / 'file.txt')\n\n# Delete file\npath.unlink()\npath.unlink(missing_ok=True)  # No error if missing (3.8+)\n\n# Get file info\nstats = path.stat()\nprint(stats.st_size)  # File size in bytes\nprint(stats.st_mtime)  # Modification time\n```\n\n### pathlib vs os.path Comparison:\n\n| Task | os.path (old) | pathlib (new) |\n|------|---------------|---------------|\n| Join paths | `os.path.join('a', 'b')` | `Path('a') / 'b'` |\n| Get filename | `os.path.basename(p)` | `path.name` |\n| Get extension | `os.path.splitext(p)[1]` | `path.suffix` |\n| Check exists | `os.path.exists(p)` | `path.exists()` |\n| Read file | `open(p).read()` | `path.read_text()` |\n| Create dir | `os.makedirs(p)` | `path.mkdir(parents=True)` |\n| List files | `os.listdir(p)` | `path.iterdir()` |\n| Find files | `glob.glob('*.py')` | `path.glob('*.py')` |"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Mixing Path Objects and Strings Incorrectly**\n```python\n# WRONG - String methods don't work on Path\nfrom pathlib import Path\npath = Path(\"folder/file.txt\")\npath.split(\"/\")  # AttributeError!\n\n# CORRECT - Use Path methods or convert to string\nfrom pathlib import Path\npath = Path(\"folder/file.txt\")\nparts = path.parts  # ('folder', 'file.txt')\n# Or: str(path).split(\"/\") if you need string ops\n```\n\n**2. Forgetting Path() Returns New Object**\n```python\n# WRONG - Original path unchanged\nfrom pathlib import Path\npath = Path(\"folder\")\npath.with_suffix(\".txt\")  # Returns new Path, doesn't modify!\nprint(path)  # Still \"folder\"\n\n# CORRECT - Assign the result\nfrom pathlib import Path\npath = Path(\"folder\")\npath = path.with_suffix(\".txt\")  # Assign new path\n```\n\n**3. Using os.path When pathlib Would Be Cleaner**\n```python\n# WRONG - Verbose and less readable\nimport os\nbase = os.path.dirname(os.path.abspath(__file__))\npath = os.path.join(base, \"data\", \"file.txt\")\nname = os.path.splitext(os.path.basename(path))[0]\n\n# CORRECT - pathlib is cleaner\nfrom pathlib import Path\nbase = Path(__file__).parent\npath = base / \"data\" / \"file.txt\"\nname = path.stem\n```\n\n**4. Not Using resolve() for Symlinks**\n```python\n# WRONG - Symlinks not resolved, may cause issues\nfrom pathlib import Path\npath = Path(\"link_to_file\")\nprint(path.exists())  # True, but where does it point?\n\n# CORRECT - Resolve to real path\nfrom pathlib import Path\npath = Path(\"link_to_file\").resolve()\nprint(path)  # Shows actual file location\n```\n\n**5. Iterating Directory Without Error Handling**\n```python\n# WRONG - Crashes on permission denied\nfrom pathlib import Path\nfor f in Path(\"/root\").iterdir():  # PermissionError!\n    print(f)\n\n# CORRECT - Handle permission errors\nfrom pathlib import Path\ntry:\n    for f in Path(\"/root\").iterdir():\n        print(f)\nexcept PermissionError:\n    print(\"Cannot access directory\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **pathlib is the modern way** to handle file paths in Python 3\n- **Use `/` operator** to join paths: `Path('folder') / 'file.txt'`\n- **Path objects have properties:** `.name`, `.stem`, `.suffix`, `.parent`\n- **Built-in file operations:** `read_text()`, `write_text()`, `unlink()`\n- **Check paths:** `exists()`, `is_file()`, `is_dir()`\n- **Create directories:** `mkdir(parents=True, exist_ok=True)`\n- **Find files with glob:** `path.glob('*.py')`, `path.glob('**/*.txt')`\n- **Cross-platform automatically** - no need to worry about `/` vs `\\`\n- **Prefer pathlib over os.path** for all new Python 3 code\n\n### Quick Reference:\n\n```python\nfrom pathlib import Path\n\n# Create paths\npath = Path('folder') / 'file.txt'\n\n# Path info\npath.name      # filename with extension\npath.stem      # filename without extension\npath.suffix    # extension (.txt)\npath.parent    # parent directory\n\n# Check path\npath.exists()  # does it exist?\npath.is_file() # is it a file?\npath.is_dir()  # is it a directory?\n\n# Read/write\npath.read_text()       # read file content\npath.write_text('hi')  # write to file\n\n# Directory ops\npath.mkdir(parents=True, exist_ok=True)\npath.iterdir()  # list contents\n\n# Find files\npath.glob('*.py')      # find .py files\npath.glob('**/*.txt')  # recursive search\n```"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-09-lesson-07-challenge-1",
              "title": "Practice: File Organizer with Pathlib",
              "description": "Build a file organizer that:\n\n1. Scans a directory for files\n2. Groups files by extension\n3. Reports file counts and sizes\n4. Finds the largest files\n5. Creates organized folder structure\n\n**Use pathlib features:**\n- Path() / operator for joining\n- .suffix for extensions\n- .stat() for file sizes\n- .glob() for finding files\n- .mkdir() for creating directories",
              "instructions": "Build a file organizer that:\n\n1. Scans a directory for files\n2. Groups files by extension\n3. Reports file counts and sizes\n4. Finds the largest files\n5. Creates organized folder structure\n\n**Use pathlib features:**\n- Path() / operator for joining\n- .suffix for extensions\n- .stat() for file sizes\n- .glob() for finding files\n- .mkdir() for creating directories",
              "starterCode": "from pathlib import Path\nfrom collections import defaultdict\n\ndef analyze_directory(directory):\n    \"\"\"Analyze files in a directory using pathlib.\n    \n    Args:\n        directory: Path to directory to analyze\n    \n    Returns:\n        dict with analysis results\n    \"\"\"\n    path = Path(directory)\n    \n    # TODO: Check if directory exists\n    if not path.exists():\n        return {\"error\": \"Directory not found\"}\n    \n    # TODO: Count files by extension\n    extension_counts = defaultdict(int)\n    extension_sizes = defaultdict(int)\n    all_files = []\n    \n    # TODO: Iterate through files\n    for item in path.iterdir():\n        if item.is_file():\n            # Get extension and size\n            ext = item.suffix.lower() or 'no_extension'\n            size = item.stat().st_size\n            \n            extension_counts[ext] += 1\n            extension_sizes[ext] += size\n            all_files.append((item.name, size))\n    \n    # TODO: Find largest files\n    largest = sorted(all_files, key=lambda x: x[1], reverse=True)[:5]\n    \n    return {\n        'total_files': len(all_files),\n        'by_extension': dict(extension_counts),\n        'sizes_by_extension': dict(extension_sizes),\n        'largest_files': largest\n    }\n\ndef format_size(bytes_size):\n    \"\"\"Format bytes as human-readable size.\"\"\"\n    for unit in ['B', 'KB', 'MB', 'GB']:\n        if bytes_size < 1024:\n            return f\"{bytes_size:.1f} {unit}\"\n        bytes_size /= 1024\n    return f\"{bytes_size:.1f} TB\"\n\n# Test with current directory\nresults = analyze_directory('.')\n\nprint(\"=== Directory Analysis ===\")\nprint(f\"Total files: {results['total_files']}\")\nprint(\"\\nFiles by extension:\")\nfor ext, count in results['by_extension'].items():\n    size = format_size(results['sizes_by_extension'][ext])\n    print(f\"  {ext}: {count} files ({size})\")\nprint(\"\\nLargest files:\")\nfor name, size in results['largest_files']:\n    print(f\"  {name}: {format_size(size)}\")",
              "solution": "from pathlib import Path\nfrom collections import defaultdict\n\ndef analyze_directory(directory):\n    \"\"\"Analyze files in a directory using pathlib.\n    \n    Args:\n        directory: Path to directory to analyze\n    \n    Returns:\n        dict with analysis results\n    \"\"\"\n    path = Path(directory)\n    \n    # Check if directory exists\n    if not path.exists():\n        return {\"error\": \"Directory not found\"}\n    \n    if not path.is_dir():\n        return {\"error\": \"Path is not a directory\"}\n    \n    # Count files by extension\n    extension_counts = defaultdict(int)\n    extension_sizes = defaultdict(int)\n    all_files = []\n    \n    # Iterate through all files (including subdirectories)\n    for item in path.glob('**/*'):  # Recursive\n        if item.is_file():\n            # Get extension and size\n            ext = item.suffix.lower() or '.no_extension'\n            try:\n                size = item.stat().st_size\n            except (OSError, PermissionError):\n                continue  # Skip files we can't access\n            \n            extension_counts[ext] += 1\n            extension_sizes[ext] += size\n            all_files.append((item, size))\n    \n    # Find largest files\n    largest = sorted(all_files, key=lambda x: x[1], reverse=True)[:5]\n    \n    return {\n        'total_files': len(all_files),\n        'by_extension': dict(extension_counts),\n        'sizes_by_extension': dict(extension_sizes),\n        'largest_files': [(f.name, size) for f, size in largest]\n    }\n\ndef format_size(bytes_size):\n    \"\"\"Format bytes as human-readable size.\"\"\"\n    for unit in ['B', 'KB', 'MB', 'GB']:\n        if bytes_size < 1024:\n            return f\"{bytes_size:.1f} {unit}\"\n        bytes_size /= 1024\n    return f\"{bytes_size:.1f} TB\"\n\ndef create_organized_structure(source_dir, dest_dir):\n    \"\"\"Create organized folder structure by file type.\"\"\"\n    source = Path(source_dir)\n    dest = Path(dest_dir)\n    \n    # Categories\n    categories = {\n        'Images': ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.svg'],\n        'Documents': ['.pdf', '.doc', '.docx', '.txt', '.md', '.rtf'],\n        'Code': ['.py', '.js', '.html', '.css', '.java', '.cpp'],\n        'Data': ['.csv', '.json', '.xml', '.xlsx', '.sql'],\n        'Media': ['.mp3', '.mp4', '.wav', '.avi', '.mkv'],\n    }\n    \n    # Create destination folders\n    for category in categories:\n        (dest / category).mkdir(parents=True, exist_ok=True)\n    (dest / 'Other').mkdir(exist_ok=True)\n    \n    # Report what would be organized\n    for file in source.iterdir():\n        if file.is_file():\n            suffix = file.suffix.lower()\n            \n            # Find category\n            target_cat = 'Other'\n            for cat, extensions in categories.items():\n                if suffix in extensions:\n                    target_cat = cat\n                    break\n            \n            print(f\"{file.name} -> {target_cat}/\")\n    \n    print(f\"\\nCreated folder structure in: {dest}\")\n\n# Test with current directory\nresults = analyze_directory('.')\n\nprint(\"=== Directory Analysis ===\")\nprint(f\"Total files: {results['total_files']}\")\nprint(\"\\nFiles by extension:\")\nfor ext, count in sorted(results['by_extension'].items()):\n    size = format_size(results['sizes_by_extension'][ext])\n    print(f\"  {ext}: {count} files ({size})\")\nprint(\"\\nLargest files:\")\nfor name, size in results['largest_files']:\n    print(f\"  {name}: {format_size(size)}\")\n\nprint(\"\\n=== Would Organize As ===\")\n# create_organized_structure('.', 'organized')  # Uncomment to run",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use path.glob('**/*') for recursive file search. Use path.suffix for extension. Use path.stat().st_size for file size. Use path.mkdir(parents=True, exist_ok=True) to create directories safely."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to handle permission errors",
                  "consequence": "Program crashes on protected files",
                  "correction": "Wrap stat() calls in try/except"
                },
                {
                  "mistake": "Using os.path instead of pathlib",
                  "consequence": "Misses pathlib's cleaner syntax",
                  "correction": "Use Path() and its methods throughout"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-10",
      "title": "Modules & Packages",
      "description": "Organizing and reusing code with modern Python tooling",
      "difficulty": "intermediate",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-10-lesson-01",
          "title": "Importing Modules - Using Python's Built-in Libraries",
          "moduleId": "module-10",
          "order": 1,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Your Code Toolbox",
              "content": "**Modules = Pre-written code you can use**\n\nImagine building a house. You don't make your own nails, hammer, or saw - you use tools others have already made. Python modules are like that toolbox.\n\n**Python comes with 200+ built-in modules:**\n- **math** - Mathematical functions (sqrt, sin, cos)\n- **random** - Generate random numbers\n- **datetime** - Work with dates and times\n- **json** - Handle JSON data (we used this!)\n- **csv** - Handle CSV files (we used this too!)\n- **pathlib** - File system operations (Path)\n\n**Why use modules?**\n1. **Don't reinvent the wheel** - Use tested, optimized code\n2. **Save time** - Focus on your unique logic\n3. **Cleaner code** - Keep your files small and focused\n4. **Community knowledge** - Benefit from expert implementations\n\n**Real-world analogy:** Calculator vs Computer\n- Without modules: Like doing all math in your head\n- With modules: Like having a calculator, spreadsheet, and computer"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Import Styles",
              "content": "**Import styles:**\n1. `import math` - Use as math.sqrt()\n2. `from math import sqrt` - Use directly as sqrt()\n3. `import math as m` - Alias for shorter names\n4. `from math import *` - Import everything (avoid this!)\n\n**Best practice:** Use `import module` or `from module import specific_items`",
              "code": "# Style 1: Import entire module\nimport math\n\nprint(\"=== Import Entire Module ===\")\nprint(f\"Square root of 16: {math.sqrt(16)}\")\nprint(f\"Pi: {math.pi}\")\nprint(f\"Sin(90¬∞): {math.sin(math.radians(90))}\\n\")\n\n# Style 2: Import specific functions\nfrom math import sqrt, pi\n\nprint(\"=== Import Specific Functions ===\")\nprint(f\"Square root of 25: {sqrt(25)}\")\nprint(f\"Pi: {pi}\\n\")\n\n# Style 3: Import with alias\nimport datetime as dt\n\nprint(\"=== Import with Alias ===\")\nnow = dt.datetime.now()\nprint(f\"Current time: {now}\")\nprint(f\"Year: {now.year}\\n\")\n\n# Style 4: Import all (not recommended)\nfrom random import *\n\nprint(\"=== Import All (use sparingly) ===\")\nprint(f\"Random number: {randint(1, 100)}\")\nprint(f\"Random choice: {choice(['apple', 'banana', 'cherry'])}\\n\")\n\n# Popular modules\nprint(\"=== Common Built-in Modules ===\")\n\nimport os\nprint(f\"Current directory: {os.getcwd()}\")\n\nimport sys\nprint(f\"Python version: {sys.version.split()[0]}\")\n\nimport time\nstart = time.time()\ntime.sleep(0.1)\nprint(f\"Elapsed: {time.time() - start:.2f}s\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic import:**\n```python\nimport math\nresult = math.sqrt(16)  # Must use math.sqrt()\n```\n\n**Import specific items:**\n```python\nfrom math import sqrt, pi\nresult = sqrt(16)  # Use directly\n```\n\n**Import with alias:**\n```python\nimport datetime as dt\nnow = dt.datetime.now()  # Use dt instead of datetime\n```\n\n**Common modules:**\n- **math** - sqrt(), sin(), cos(), pi, e\n- **random** - randint(), choice(), shuffle()\n- **datetime** - datetime.now(), timedelta\n- **time** - time(), sleep()\n- **os** - getcwd(), listdir(), mkdir()\n- **sys** - argv, exit(), version"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using from module import * (Wildcard Imports)**\n```python\n# WRONG - Pollutes namespace, hides where names come from\nfrom math import *\nfrom random import *\nsqrt(16)  # Which module? Hard to track!\n\n# CORRECT - Import specifically\nfrom math import sqrt, pi\nfrom random import randint\nsqrt(16)  # Clear it's from math\n```\n\n**2. Circular Imports**\n```python\n# WRONG - module_a imports module_b, module_b imports module_a\n# module_a.py\nfrom module_b import func_b  # Fails if module_b imports module_a!\n\n# CORRECT - Import inside function or restructure\n# module_a.py\ndef func_a():\n    from module_b import func_b  # Import when needed\n    return func_b()\n```\n\n**3. Shadowing Built-in Module Names**\n```python\n# WRONG - File named \"random.py\" shadows built-in\n# random.py\nimport random  # Imports itself, not built-in!\nprint(random.randint(1, 10))  # AttributeError!\n\n# CORRECT - Don't name files after built-in modules\n# my_random.py or utils.py\nimport random\nprint(random.randint(1, 10))  # Works\n```\n\n**4. Importing Without Installing**\n```python\n# WRONG - Assuming package is installed\nimport requests  # ModuleNotFoundError if not installed!\n\n# CORRECT - Check and provide helpful message\ntry:\n    import requests\nexcept ImportError:\n    print(\"Please install requests: pip install requests\")\n    raise\n```\n\n**5. Relative vs Absolute Import Confusion**\n```python\n# WRONG - Relative import in script (not package)\nfrom .utils import helper  # ImportError in script!\n\n# CORRECT - Use absolute import in scripts\nfrom mypackage.utils import helper\n# Or relative only inside packages:\n# from . import utils  # Only works inside a package\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Modules = reusable code libraries.** Python has 200+ built-in modules.\n- **import module** - Use as module.function()\n- **from module import item** - Use item directly\n- **import module as alias** - Shorter name (import pandas as pd)\n- **Avoid from module import *** - Pollutes namespace\n- **Common modules:** math, random, datetime, json, csv, pathlib, os, sys"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-01-challenge-3",
              "title": "Interactive Exercise",
              "description": "Use the `random` module to:\n1. Generate 5 random numbers between 1-100\n2. Shuffle a list of names\n3. Pick a random winner\n\n**Starter code:**",
              "instructions": "Use the `random` module to:\n1. Generate 5 random numbers between 1-100\n2. Shuffle a list of names\n3. Pick a random winner\n\n**Starter code:**",
              "starterCode": "import random\n\n# TODO: Generate 5 random numbers\nnumbers = []\n\n# TODO: Create list of names\nnames = ['Alice', 'Bob', 'Carol', 'David']\n\n# TODO: Shuffle names\n\n# TODO: Pick random winner\nwinner = None\n\nprint(f\"Numbers: {numbers}\")\nprint(f\"Shuffled: {names}\")\nprint(f\"Winner: {winner}\")",
              "solution": "import random\n\n# Using the random module\n# This solution demonstrates common random operations\n\n# Step 1: Generate 5 random numbers between 1-100\nnumbers = [random.randint(1, 100) for _ in range(5)]\n\n# Step 2: Create and shuffle a list of names\nnames = ['Alice', 'Bob', 'Carol', 'David']\nrandom.shuffle(names)  # Shuffles the list in place\n\n# Step 3: Pick a random winner\nwinner = random.choice(names)\n\n# Display results\nprint(f\"Random numbers: {numbers}\")\nprint(f\"Shuffled names: {names}\")\nprint(f\"Winner: {winner}\")\n\n# Bonus: Other useful random functions\nprint(f\"\\nBonus examples:\")\nprint(f\"Random float 0-1: {random.random():.3f}\")\nprint(f\"Random float 1-10: {random.uniform(1, 10):.2f}\")\nprint(f\"Random sample of 2: {random.sample(names, 2)}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use random.randint(1, 100) for numbers, random.shuffle(list) to shuffle, random.choice(list) to pick one."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-10-lesson-02",
          "title": "Creating Your Own Modules",
          "moduleId": "module-10",
          "order": 2,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Your Personal Library",
              "content": "**A module is just a .py file with functions/classes you can import.**\n\nInstead of copying the same functions between projects, create a module once and import it everywhere!\n\n**Example:** You write utility functions for string formatting:\n```python\n# utils.py\ndef capitalize_words(text):\n    return text.title()\n\ndef remove_spaces(text):\n    return text.replace(' ', '')\n```\n\nNow use it in any project:\n```python\n# my_app.py\nimport utils\nresult = utils.capitalize_words('hello world')\n```\n\n**Benefits:**\n1. **Reusability** - Write once, use everywhere\n2. **Organization** - Keep related code together\n3. **Testing** - Test modules independently\n4. **Collaboration** - Share code with team"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Creating a Module",
              "content": "**Key concepts:**\n1. Module = .py file with functions/classes/variables\n2. Import with `import filename` (no .py extension!)\n3. `if __name__ == '__main__':` - Code that runs only when file executed directly, not when imported\n4. Can define constants, functions, classes in module",
              "code": "# First, create a module file: math_utils.py\n# (In real project, save as separate file)\n\nmath_utils_code = '''\ndef add(a, b):\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\ndef multiply(a, b):\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\ndef is_even(n):\n    \"\"\"Check if number is even.\"\"\"\n    return n % 2 == 0\n\nPI = 3.14159\n\nif __name__ == \"__main__\":\n    # This code runs only when file is executed directly\n    print(\"Testing math_utils...\")\n    print(f\"5 + 3 = {add(5, 3)}\")\n    print(f\"5 * 3 = {multiply(5, 3)}\")\n    print(f\"Is 4 even? {is_even(4)}\")\n'''\n\n# Save the module\nfrom pathlib import Path\nPath('math_utils.py').write_text(math_utils_code)\n\nprint(\"=== Created math_utils.py module ===\")\nprint(math_utils_code)\nprint()\n\n# Now import and use it\nimport math_utils\n\nprint(\"=== Using the Module ===\")\nprint(f\"10 + 5 = {math_utils.add(10, 5)}\")\nprint(f\"10 * 5 = {math_utils.multiply(10, 5)}\")\nprint(f\"Is 7 even? {math_utils.is_even(7)}\")\nprint(f\"Pi constant: {math_utils.PI}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Creating a module:**\n```python\n# my_module.py\ndef my_function():\n    return \"Hello\"\n\nMY_CONSTANT = 42\n```\n\n**Using your module:**\n```python\n# main.py\nimport my_module\nresult = my_module.my_function()\n```\n\n**The __name__ == '__main__' pattern:**\n```python\n# my_module.py\ndef helper():\n    return \"I'm a helper\"\n\nif __name__ == \"__main__\":\n    # Runs only when: python my_module.py\n    # Does NOT run when: import my_module\n    print(\"Testing module...\")\n    print(helper())\n```\n\n**Why use __name__ == '__main__'?**\n- Test code while developing\n- Demo module functionality\n- Provide CLI interface\n- Code runs when executed directly, not when imported"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Missing if __name__ == '__main__' Guard**\n```python\n# WRONG - Code runs on import!\n# my_module.py\nprint(\"Module loading...\")  # Runs when imported!\ndo_setup()  # Also runs!\n\n# CORRECT - Guard execution code\n# my_module.py\ndef do_setup():\n    print(\"Setting up...\")\n\nif __name__ == '__main__':\n    do_setup()  # Only runs when executed directly\n```\n\n**2. Importing Module From Same Directory Fails**\n```python\n# WRONG - Current directory not always in path\n# main.py\nimport my_module  # ModuleNotFoundError sometimes!\n\n# CORRECT - Ensure directory is in path\nimport sys\nfrom pathlib import Path\nsys.path.insert(0, str(Path(__file__).parent))\nimport my_module\n```\n\n**3. Modifying Module-Level Variables**\n```python\n# WRONG - Changes not shared between imports\n# config.py\nDEBUG = False\n\n# main.py\nimport config\nconfig.DEBUG = True  # Only changes in this import!\n\n# CORRECT - Use functions or classes for mutable state\n# config.py\n_config = {'DEBUG': False}\ndef set_debug(value):\n    _config['DEBUG'] = value\ndef is_debug():\n    return _config['DEBUG']\n```\n\n**4. Using __all__ Incorrectly**\n```python\n# WRONG - __all__ doesn't restrict direct imports\n# my_module.py\n__all__ = ['public_func']\ndef public_func(): pass\ndef _private_func(): pass\n\n# user.py\nfrom my_module import _private_func  # Still works!\n\n# CORRECT - __all__ only affects \"from module import *\"\nfrom my_module import *  # Only gets public_func\n```\n\n**5. Forgetting .py Extension in Import**\n```python\n# WRONG - Including file extension\nimport my_module.py  # SyntaxError!\n\n# CORRECT - Just the module name\nimport my_module\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Module = any .py file.** Can contain functions, classes, variables.\n- **Import your module:** `import my_module` (no .py!)\n- **if __name__ == '__main__':' - Code runs only when file executed directly\n- **Use modules for:** Organizing code, reusability, testing\n- **Module must be in same directory or Python path to import**"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-02-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a `string_utils.py` module with:\n1. `reverse(text)` - Reverse a string\n2. `count_vowels(text)` - Count vowels\n3. Test code in `if __name__ == '__main__':`",
              "instructions": "Create a `string_utils.py` module with:\n1. `reverse(text)` - Reverse a string\n2. `count_vowels(text)` - Count vowels\n3. Test code in `if __name__ == '__main__':`",
              "starterCode": "# Create string_utils.py module\n\ndef reverse(text):\n    # TODO: Return reversed text\n    pass\n\ndef count_vowels(text):\n    # TODO: Count a, e, i, o, u (case-insensitive)\n    pass\n\nif __name__ == \"__main__\":\n    # TODO: Test your functions\n    pass",
              "solution": "# string_utils.py module\n# This solution demonstrates creating a custom module\n\ndef reverse(text):\n    \"\"\"Reverse a string.\n    \n    Args:\n        text: String to reverse\n        \n    Returns:\n        Reversed string\n    \"\"\"\n    return text[::-1]\n\ndef count_vowels(text):\n    \"\"\"Count vowels in a string (case-insensitive).\n    \n    Args:\n        text: String to analyze\n        \n    Returns:\n        Number of vowels (a, e, i, o, u)\n    \"\"\"\n    vowels = 'aeiou'\n    return sum(1 for char in text.lower() if char in vowels)\n\ndef is_palindrome(text):\n    \"\"\"Bonus: Check if text is a palindrome.\"\"\"\n    cleaned = ''.join(c.lower() for c in text if c.isalnum())\n    return cleaned == cleaned[::-1]\n\n# Test code - only runs when file is executed directly\nif __name__ == \"__main__\":\n    print(\"=== Testing string_utils module ===\")\n    \n    # Test reverse\n    print(f\"\\nreverse('hello') = '{reverse('hello')}'\")\n    print(f\"reverse('Python') = '{reverse('Python')}'\")\n    \n    # Test count_vowels\n    print(f\"\\ncount_vowels('hello') = {count_vowels('hello')}\")\n    print(f\"count_vowels('AEIOU') = {count_vowels('AEIOU')}\")\n    print(f\"count_vowels('Python') = {count_vowels('Python')}\")\n    \n    # Test palindrome (bonus)\n    print(f\"\\nis_palindrome('radar') = {is_palindrome('radar')}\")\n    print(f\"is_palindrome('hello') = {is_palindrome('hello')}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "reverse: text[::-1], count_vowels: sum(1 for char in text.lower() if char in 'aeiou')"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-10-lesson-03",
          "title": "Packages and Project Structure",
          "moduleId": "module-10",
          "order": 3,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Organizing Your Library",
              "content": "**Module = single file. Package = folder of modules.**\n\nImagine a library:\n- **Module** = single book\n- **Package** = bookshelf with related books organized together\n\n**Package structure:**\n```\nmy_package/\n  __init__.py       ‚Üê Makes it a package!\n  module1.py\n  module2.py\n  sub_package/\n    __init__.py\n    module3.py\n```\n\n**Real example - web framework:**\n```\nflask/\n  __init__.py\n  app.py\n  routing.py\n  templating/\n    __init__.py\n    jinja.py\n```\n\n**The magic __init__.py:**\n- Empty file that tells Python \"this directory is a package\"\n- Can contain initialization code\n- Controls what `from package import *` imports"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Creating a Package",
              "content": "**Key points:**\n1. __init__.py makes directory a package\n2. Can import from __init__.py for convenience\n3. __all__ controls what `from package import *` imports\n4. Packages can be nested (sub-packages)\n5. Use relative imports (from .module) inside packages",
              "code": "from pathlib import Path\n\n# Create package structure\nprint(\"=== Creating Package Structure ===\")\n\nbase = Path('my_tools')\nbase.mkdir(exist_ok=True)\n\n# Create __init__.py (makes it a package)\n(base / '__init__.py').write_text('''\n\"\"\"My Tools Package - Utility functions.\"\"\"\n\nfrom .string_ops import reverse, uppercase\nfrom .math_ops import add, multiply\n\n__version__ = '1.0.0'\n__all__ = ['reverse', 'uppercase', 'add', 'multiply']\n''')\n\n# Create string_ops.py module\n(base / 'string_ops.py').write_text('''\ndef reverse(text):\n    return text[::-1]\n\ndef uppercase(text):\n    return text.upper()\n\ndef lowercase(text):  # Not exported by default\n    return text.lower()\n''')\n\n# Create math_ops.py module\n(base / 'math_ops.py').write_text('''\ndef add(a, b):\n    return a + b\n\ndef multiply(a, b):\n    return a * b\n\ndef subtract(a, b):  # Not exported by default\n    return a - b\n''')\n\nprint(\"‚úì Created my_tools package\")\nprint(\"  - my_tools/__init__.py\")\nprint(\"  - my_tools/string_ops.py\")\nprint(\"  - my_tools/math_ops.py\\n\")\n\n# Import and use the package\nprint(\"=== Using the Package ===\")\n\nimport my_tools\n\nprint(f\"Version: {my_tools.__version__}\")\nprint(f\"Reverse 'hello': {my_tools.reverse('hello')}\")\nprint(f\"Uppercase 'world': {my_tools.uppercase('world')}\")\nprint(f\"Add 5 + 3: {my_tools.add(5, 3)}\")\nprint(f\"Multiply 4 * 7: {my_tools.multiply(4, 7)}\\n\")\n\n# Import specific module\nfrom my_tools import string_ops\n\nprint(\"=== Using Specific Module ===\")\nprint(f\"Lowercase (direct): {string_ops.lowercase('HELLO')}\")\n\n# Nested package\nprint(\"\\n=== Creating Nested Package ===\")\n\nutils = base / 'utils'\nutils.mkdir(exist_ok=True)\n(utils / '__init__.py').write_text('\"\"\"Utility subpackage.\"\"\"')\n(utils / 'file_ops.py').write_text('''\ndef read_file(path):\n    with open(path) as f:\n        return f.read()\n''')\n\nprint(\"‚úì Created nested package: my_tools/utils/\")\n\n# Use nested package\nfrom my_tools.utils import file_ops\nprint(\"‚úì Can import: from my_tools.utils import file_ops\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Package structure:**\n```\nmy_package/\n  __init__.py      ‚Üê Required! Makes it a package\n  module1.py\n  module2.py\n```\n\n**Basic __init__.py:**\n```python\n# my_package/__init__.py\n\"\"\"Package docstring.\"\"\"\n\n# Import for convenience\nfrom .module1 import function1\nfrom .module2 import function2\n\n__version__ = '1.0.0'\n```\n\n**Importing from packages:**\n```python\n# Import package\nimport my_package\nmy_package.function1()\n\n# Import module from package\nfrom my_package import module1\nmodule1.function1()\n\n# Import function directly\nfrom my_package.module1 import function1\nfunction1()\n```\n\n**Relative imports (inside package):**\n```python\n# In my_package/module1.py\nfrom . import module2  # Same package\nfrom .module2 import function  # Specific import\nfrom ..other_package import something  # Parent package\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting __init__.py in Package**\n```python\n# WRONG - Directory without __init__.py (before Python 3.3)\n# mypackage/\n#   utils.py  # Not a package without __init__.py!\n\n# CORRECT - Add __init__.py (can be empty)\n# mypackage/\n#   __init__.py\n#   utils.py\n```\n\n**2. Incorrect Relative Import Syntax**\n```python\n# WRONG - Missing dot for current package\n# mypackage/module_a.py\nfrom module_b import func  # Looks for top-level module_b!\n\n# CORRECT - Use dot for relative imports\n# mypackage/module_a.py\nfrom .module_b import func  # Same package\nfrom ..other_package import func  # Parent's sibling\n```\n\n**3. Running Package Module Directly**\n```python\n# WRONG - Running module directly breaks relative imports\n# python mypackage/module.py  # Relative imports fail!\n\n# CORRECT - Run as module from parent directory\n# python -m mypackage.module\n```\n\n**4. Circular Dependencies in Packages**\n```python\n# WRONG - Package imports create circular dependency\n# mypackage/__init__.py\nfrom .module_a import func_a  # module_a imports module_b\nfrom .module_b import func_b  # module_b imports module_a - circular!\n\n# CORRECT - Import lazily or restructure\n# mypackage/__init__.py\ndef get_func_a():\n    from .module_a import func_a\n    return func_a\n```\n\n**5. Exposing Too Much in __init__.py**\n```python\n# WRONG - Importing everything, slow package load\n# mypackage/__init__.py\nfrom .heavy_module import *  # Loads everything on import!\nfrom .another_heavy import *\n\n# CORRECT - Keep __init__.py light, import explicitly\n# mypackage/__init__.py\n__all__ = ['main_function']\nfrom .core import main_function  # Only essential exports\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Package = directory with __init__.py** (collection of modules)\n- **__init__.py required** to make directory a package (can be empty)\n- **Import from package:** `from package.module import function`\n- **Relative imports:** `from .module import function` (inside package)\n- **__all__ in __init__.py** controls what `import *` imports\n- **Nested packages allowed** for organizing large projects"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-03-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a package structure:\n```\nutils/\n  __init__.py\n  text.py      (capitalize, reverse)\n  numbers.py   (is_even, is_prime)\n```",
              "instructions": "Create a package structure:\n```\nutils/\n  __init__.py\n  text.py      (capitalize, reverse)\n  numbers.py   (is_even, is_prime)\n```",
              "starterCode": "from pathlib import Path\n\n# TODO: Create utils directory\n\n# TODO: Create __init__.py\n\n# TODO: Create text.py with capitalize and reverse\n\n# TODO: Create numbers.py with is_even and is_prime\n\n# TODO: Import and test",
              "solution": "from pathlib import Path\n\n# Creating a Python Package\n# This solution demonstrates package structure\n\n# Step 1: Create the utils directory\nutils_dir = Path('utils')\nutils_dir.mkdir(exist_ok=True)\n\n# Step 2: Create __init__.py (makes it a package)\ninit_content = '''\"\"\"Utils package for text and number operations.\"\"\"\n\nfrom .text import capitalize, reverse\nfrom .numbers import is_even, is_prime\n\n__all__ = ['capitalize', 'reverse', 'is_even', 'is_prime']\n'''\n(utils_dir / '__init__.py').write_text(init_content)\n\n# Step 3: Create text.py module\ntext_content = '''\"\"\"Text utility functions.\"\"\"\n\ndef capitalize(text):\n    \"\"\"Capitalize first letter of each word.\"\"\"\n    return text.title()\n\ndef reverse(text):\n    \"\"\"Reverse a string.\"\"\"\n    return text[::-1]\n'''\n(utils_dir / 'text.py').write_text(text_content)\n\n# Step 4: Create numbers.py module\nnumbers_content = '''\"\"\"Number utility functions.\"\"\"\n\ndef is_even(n):\n    \"\"\"Check if number is even.\"\"\"\n    return n % 2 == 0\n\ndef is_prime(n):\n    \"\"\"Check if number is prime.\"\"\"\n    if n < 2:\n        return False\n    for i in range(2, int(n ** 0.5) + 1):\n        if n % i == 0:\n            return False\n    return True\n'''\n(utils_dir / 'numbers.py').write_text(numbers_content)\n\nprint(\"Created utils package with:\")\nprint(\"  - utils/__init__.py\")\nprint(\"  - utils/text.py\")\nprint(\"  - utils/numbers.py\")\n\n# Step 5: Test the package\nprint(\"\\nTesting the package:\")\n\n# Import from our new package\nimport utils\n\nprint(f\"capitalize('hello world') = '{utils.capitalize('hello world')}'\")\nprint(f\"reverse('Python') = '{utils.reverse('Python')}'\")\nprint(f\"is_even(4) = {utils.is_even(4)}\")\nprint(f\"is_prime(17) = {utils.is_prime(17)}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Path('utils').mkdir(), write_text() for files, import utils to test."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-10-lesson-04",
          "title": "Modern Python Tooling with uv",
          "moduleId": "module-10",
          "order": 4,
          "estimatedMinutes": 45,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "The Revolution: Why uv Changes Everything",
              "content": "**uv is the future of Python tooling.** Created by Astral (the company behind Ruff), uv is a single tool that replaces pip, pip-tools, pipenv, poetry, pyenv, and virtualenv - all while being 10-100x faster.\n\n**What uv replaces:**\n- **pip** - Package installation\n- **pip-tools** - Dependency locking\n- **virtualenv/venv** - Virtual environment creation\n- **pyenv** - Python version management\n- **pipenv/poetry** - Project management\n\n**Why is uv so fast?**\n- Written in Rust (not Python)\n- Parallel downloads and installations\n- Global cache shared across projects\n- Smart dependency resolution\n\n**Speed comparison (installing Django + dependencies):**\n- pip: ~15 seconds\n- poetry: ~12 seconds\n- uv: ~0.5 seconds (30x faster!)\n\n**Real-world impact:**\n- CI/CD pipelines run faster\n- New developers onboard in seconds\n- Dependency updates are instant\n- No more coffee breaks while installing packages!"
            },
            {
              "type": "EXAMPLE",
              "title": "Installing uv",
              "content": "**Installing uv is a one-line command.** Once installed, it manages itself - no Python required for installation!\n\n**Note:** Python 3.13 is the current stable version. Python 3.14 was released in October 2025.",
              "code": "# This code demonstrates uv installation commands\n# Run these in your terminal, not in Python!\n\nprint(\"=\"*60)\nprint(\"INSTALLING uv - Choose your platform:\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# WINDOWS (PowerShell) - Recommended\n# ============================================\npowershell -ExecutionPolicy ByPass -c \"irm https://astral.sh/uv/install.ps1 | iex\"\n\n# Or using winget:\nwinget install astral-sh.uv\n\n# ============================================\n# MAC/LINUX (Terminal)\n# ============================================\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n\n# Or using Homebrew (Mac):\nbrew install uv\n\n# ============================================\n# VERIFY INSTALLATION\n# ============================================\nuv --version\n# Output: uv 0.5.x (or newer)\n\n# ============================================\n# UPDATE uv (it updates itself!)\n# ============================================\nuv self update\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"AFTER INSTALLATION - Test it works:\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# Check uv version\nuv --version\n\n# See all available commands\nuv help\n\n# uv is now ready to use!\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Creating Your First Project with uv",
              "content": "**The modern workflow uses `uv init` to create projects.** This creates a complete project structure with pyproject.toml, README, and a starter Python file.\n\n**Key files uv creates:**\n- `pyproject.toml` - Project configuration and dependencies\n- `uv.lock` - Exact versions for reproducible builds\n- `.python-version` - Python version for this project\n- `hello.py` - Starter Python script",
              "code": "# Demonstration of uv project workflow\n# Run these commands in your terminal!\n\nprint(\"=\"*60)\nprint(\"CREATING A NEW PROJECT WITH uv\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# Step 1: Create a new project\nuv init my-awesome-project\ncd my-awesome-project\n\n# What uv creates:\n# my-awesome-project/\n#   pyproject.toml    <- Project config and dependencies\n#   README.md         <- Documentation\n#   hello.py          <- Starter script\n#   .python-version   <- Python version (e.g., \"3.13\")\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"EXAMINING THE GENERATED pyproject.toml\")\nprint(\"=\"*60)\n\npyproject_example = '''[project]\nname = \"my-awesome-project\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nreadme = \"README.md\"\nrequires-python = \">=3.13\"\ndependencies = []\n\n[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n'''\nprint(pyproject_example)\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"ADDING DEPENDENCIES\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# Add a single package\nuv add requests\n\n# Add multiple packages at once\nuv add fastapi pydantic httpx\n\n# Add with version constraints\nuv add \"pandas>=2.0.0\"\nuv add \"numpy>=1.24,<2.0\"\n\n# Add development dependencies (testing, linting)\nuv add --dev pytest ruff mypy\n\n# What happens when you run 'uv add':\n# 1. Downloads the package (cached globally)\n# 2. Updates pyproject.toml with the dependency\n# 3. Updates uv.lock with exact versions\n# 4. Installs into project's virtual environment\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"RUNNING YOUR CODE\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# The magic command: uv run\n# No need to manually activate virtual environments!\n\n# Run a Python script\nuv run python hello.py\n\n# Run a module\nuv run python -m pytest\n\n# Run an installed tool\nuv run ruff check .\n\n# Start a REPL with project dependencies\nuv run python\n\n# What 'uv run' does:\n# 1. Creates virtual environment if needed\n# 2. Installs dependencies if needed\n# 3. Runs your command with correct Python\n# All automatically, instantly!\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Python Version Management",
              "content": "**uv can install and manage Python versions too!** No need for pyenv or separate Python installers. uv downloads and manages Python versions automatically.\n\n**Supported versions:** Python 3.8 through 3.13 (and 3.14 beta)",
              "code": "print(\"=\"*60)\nprint(\"PYTHON VERSION MANAGEMENT WITH uv\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# INSTALLING PYTHON VERSIONS\n# ============================================\n\n# Install the latest Python 3.13\nuv python install 3.13\n\n# Install a specific version\nuv python install 3.13.1\n\n# Install multiple versions\nuv python install 3.12 3.13\n\n# Install the latest available Python\nuv python install\n\n# ============================================\n# LISTING PYTHON VERSIONS\n# ============================================\n\n# See all installed Python versions\nuv python list\n\n# Output example:\n# cpython-3.13.1-macos-aarch64-none    ~/.local/share/uv/python/cpython-3.13.1\n# cpython-3.12.8-macos-aarch64-none    ~/.local/share/uv/python/cpython-3.12.8\n\n# ============================================\n# PINNING PROJECT PYTHON VERSION\n# ============================================\n\n# Pin Python version for a project\nuv python pin 3.13\n\n# This creates/updates .python-version file\n# Contents: 3.13\n\n# Now 'uv run' always uses Python 3.13 for this project!\n\n# ============================================\n# CREATING PROJECT WITH SPECIFIC PYTHON\n# ============================================\n\n# Create project requiring Python 3.13+\nuv init my-project --python 3.13\n\n# Or specify in pyproject.toml:\n# requires-python = \">=3.13\"\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"EXAMPLE: COMPLETE PROJECT SETUP\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# Full workflow for a new FastAPI project:\n\n# 1. Ensure Python 3.13 is available\nuv python install 3.13\n\n# 2. Create the project\nuv init fastapi-demo --python 3.13\ncd fastapi-demo\n\n# 3. Add dependencies\nuv add fastapi uvicorn pydantic\n\n# 4. Add dev dependencies\nuv add --dev pytest httpx ruff\n\n# 5. Run the app\nuv run uvicorn main:app --reload\n\n# That's it! No manual venv creation, no activation,\n# no pip install. Just uv and you're running!\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: The uv.lock File and Reproducible Builds",
              "content": "**The uv.lock file ensures everyone gets exactly the same dependencies.** Unlike requirements.txt, it captures the complete dependency tree with cryptographic hashes.\n\n**Why this matters:**\n- Works on your machine AND production\n- No \"it works on my laptop\" bugs\n- Security: verifies package integrity\n- Speed: uv knows exactly what to install",
              "code": "print(\"=\"*60)\nprint(\"UNDERSTANDING uv.lock\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# WHAT uv.lock CONTAINS\n# ============================================\n\n# When you run 'uv add requests', uv.lock records:\n# - Exact version installed (e.g., requests 2.32.3)\n# - All transitive dependencies (urllib3, certifi, etc.)\n# - SHA256 hashes for each package\n# - Python version compatibility\n\n# Example uv.lock snippet (don't edit manually!):\n\"\"\"\n\nlock_example = '''version = 1\nrequires-python = \">=3.13\"\n\n[[package]]\nname = \"requests\"\nversion = \"2.32.3\"\nsource = { registry = \"https://pypi.org/simple\" }\ndependencies = [\n    { name = \"certifi\" },\n    { name = \"charset-normalizer\" },\n    { name = \"idna\" },\n    { name = \"urllib3\" },\n]\nwheels = [\n    { url = \"https://files.pythonhosted.org/...\", hash = \"sha256:...\" },\n]\n'''\nprint(lock_example)\n\nprint(\"\"\"\n# ============================================\n# KEY COMMANDS FOR REPRODUCIBILITY\n# ============================================\n\n# Update the lock file (after manual pyproject.toml edits)\nuv lock\n\n# Install exactly what's in uv.lock (CI/CD, production)\nuv sync\n\n# Update all dependencies to latest compatible versions\nuv lock --upgrade\n\n# Update a specific package\nuv lock --upgrade-package requests\n\n# ============================================\n# WORKFLOW FOR TEAMS\n# ============================================\n\n# Developer 1 adds a package:\nuv add httpx\ngit add pyproject.toml uv.lock\ngit commit -m \"Add httpx for async HTTP\"\ngit push\n\n# Developer 2 pulls and syncs:\ngit pull\nuv sync  # Gets EXACTLY the same versions!\n\n# CI/CD pipeline:\ngit clone repo\nuv sync  # Reproducible every time!\nuv run pytest\n\"\"\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Understanding pyproject.toml",
              "content": "**pyproject.toml is the modern standard for Python project configuration.** It replaces setup.py, setup.cfg, requirements.txt, and various tool-specific config files.\n\n**Sections in pyproject.toml:**\n\n**[project]** - Core project metadata\n- `name` - Package name (lowercase, hyphens)\n- `version` - Semantic version (\"1.0.0\")\n- `description` - One-line summary\n- `requires-python` - Minimum Python version\n- `dependencies` - Runtime dependencies\n\n**[project.optional-dependencies]** - Extra dependencies\n- `dev` - Development tools (pytest, ruff)\n- `docs` - Documentation (sphinx, mkdocs)\n\n**[tool.*]** - Tool-specific configuration\n- `[tool.ruff]` - Ruff linter settings\n- `[tool.pytest.ini_options]` - Pytest settings\n- `[tool.mypy]` - Type checker settings\n\n**Version specifiers:**\n- `>=3.0.0` - At least version 3.0.0\n- `>=3.0.0,<4.0.0` - Compatible range\n- `~=3.0.0` - Same as >=3.0.0,<3.1.0\n- `==3.0.0` - Exact version (avoid when possible)"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using `pip install` Instead of `uv add`**\n```bash\n# WRONG - Installs but doesn't track in pyproject.toml\nuv pip install requests  # Not tracked!\n\n# CORRECT - Adds to pyproject.toml and installs\nuv add requests  # Tracked in pyproject.toml and uv.lock\n```\n\n**2. Running Python Directly Instead of via uv**\n```bash\n# WRONG - Uses system Python, wrong dependencies\npython app.py  # Which Python? Which packages?\n\n# CORRECT - Uses project's Python and dependencies\nuv run python app.py  # Always correct!\n```\n\n**3. Committing .venv to Git**\n```bash\n# WRONG - Huge, platform-specific\ngit add .venv/  # 100s of MB, breaks on other platforms!\n\n# CORRECT - Only commit config files\n# .gitignore:\n.venv/\n__pycache__/\n*.pyc\n\n# Commit these:\ngit add pyproject.toml uv.lock\n```\n\n**4. Manually Editing uv.lock**\n```bash\n# WRONG - Manual edits break consistency\n# Editing uv.lock by hand\n\n# CORRECT - Let uv manage the lock file\nuv lock  # Regenerate from pyproject.toml\nuv lock --upgrade  # Update all packages\n```\n\n**5. Forgetting to Sync After Git Pull**\n```bash\n# WRONG - Outdated dependencies\ngit pull\npython app.py  # Missing new dependencies!\n\n# CORRECT - Always sync after pull\ngit pull\nuv sync  # Install any new/updated dependencies\nuv run python app.py\n```\n\n**6. Not Pinning Python Version**\n```toml\n# WRONG - Any Python 3.x might be used\n[project]\nrequires-python = \">=3\"\n\n# CORRECT - Specify minimum version you've tested\n[project]\nrequires-python = \">=3.13\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **uv is the modern Python toolchain** - Replaces pip, venv, pyenv, poetry in one 10-100x faster tool\n- **Install with one command** - `curl -LsSf https://astral.sh/uv/install.sh | sh` (Mac/Linux) or PowerShell installer (Windows)\n- **`uv init project-name`** - Creates new project with pyproject.toml\n- **`uv add package`** - Adds dependency to pyproject.toml and installs\n- **`uv run python script.py`** - Runs with correct Python and dependencies (no activation needed!)\n- **`uv sync`** - Installs exactly what's in uv.lock (reproducible builds)\n- **`uv python install 3.13`** - Installs Python versions (replaces pyenv)\n- **pyproject.toml** - Modern project config, replaces requirements.txt\n- **uv.lock** - Ensures reproducible builds across all machines\n- **Always use `uv run`** - Never worry about activating virtual environments again"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-04-challenge-1",
              "title": "Challenge 1: Create a FastAPI Project",
              "description": "Create a pyproject.toml for a FastAPI web API project. The project should include FastAPI, Pydantic (for data validation), Uvicorn (ASGI server), and development dependencies for testing and linting.\n\n**Requirements:**\n- Project name: \"my-api\"\n- Python 3.13 or higher\n- Production dependencies: fastapi, pydantic, uvicorn\n- Dev dependencies: pytest, httpx (for testing async), ruff",
              "instructions": "Create a complete pyproject.toml file that follows modern Python standards with uv.",
              "starterCode": "# Create a pyproject.toml for a FastAPI project\n# Requirements:\n# - Project name: my-api\n# - Version: 0.1.0\n# - Python >= 3.13\n# - Dependencies: fastapi, pydantic, uvicorn\n# - Dev dependencies: pytest, httpx, ruff\n\npyproject_content = '''\n# TODO: Write your pyproject.toml content here\n'''\n\n# Display the configuration\nprint(\"Generated pyproject.toml:\")\nprint(\"=\" * 50)\nprint(pyproject_content)\n\n# Validate structure\nif \"[project]\" in pyproject_content:\n    print(\"\\n[OK] Has [project] section\")\nif \"fastapi\" in pyproject_content.lower():\n    print(\"[OK] Has FastAPI dependency\")\nif \"requires-python\" in pyproject_content:\n    print(\"[OK] Has Python version requirement\")",
              "solution": "# Complete pyproject.toml for a FastAPI project\n# This demonstrates modern Python project configuration\n\npyproject_content = '''[project]\nname = \"my-api\"\nversion = \"0.1.0\"\ndescription = \"A modern FastAPI web API\"\nreadme = \"README.md\"\nrequires-python = \">=3.13\"\ndependencies = [\n    \"fastapi>=0.115.0\",\n    \"pydantic>=2.10.0\",\n    \"uvicorn[standard]>=0.32.0\",\n]\n\n[project.optional-dependencies]\ndev = [\n    \"pytest>=8.0.0\",\n    \"httpx>=0.28.0\",\n    \"ruff>=0.8.0\",\n]\n\n[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n\n[tool.ruff]\nline-length = 88\ntarget-version = \"py313\"\n\n[tool.ruff.lint]\nselect = [\"E\", \"F\", \"I\", \"UP\", \"B\"]\n\n[tool.pytest.ini_options]\ntestpaths = [\"tests\"]\nasyncio_mode = \"auto\"\n'''\n\n# Display the configuration\nprint(\"Generated pyproject.toml:\")\nprint(\"=\" * 50)\nprint(pyproject_content)\n\n# Validate the structure\nprint(\"\\n\" + \"=\" * 50)\nprint(\"Validation:\")\nprint(\"=\" * 50)\n\nchecks = [\n    (\"[project]\" in pyproject_content, \"Has [project] section\"),\n    (\"fastapi\" in pyproject_content.lower(), \"Has FastAPI dependency\"),\n    (\"pydantic\" in pyproject_content.lower(), \"Has Pydantic dependency\"),\n    (\"uvicorn\" in pyproject_content.lower(), \"Has Uvicorn dependency\"),\n    (\"requires-python\" in pyproject_content, \"Has Python version requirement\"),\n    (\">=3.13\" in pyproject_content, \"Requires Python 3.13+\"),\n    (\"[project.optional-dependencies]\" in pyproject_content, \"Has dev dependencies\"),\n    (\"pytest\" in pyproject_content.lower(), \"Has pytest for testing\"),\n    (\"ruff\" in pyproject_content.lower(), \"Has ruff for linting\"),\n    (\"[tool.ruff]\" in pyproject_content, \"Has Ruff configuration\"),\n]\n\nfor passed, description in checks:\n    status = \"PASS\" if passed else \"FAIL\"\n    print(f\"[{status}] {description}\")\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"To use this project:\")\nprint(\"=\" * 50)\nprint(\"\"\"\n1. Save as pyproject.toml\n2. Run: uv sync\n3. Run: uv run uvicorn main:app --reload\n\"\"\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "pyproject.toml has required project section",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start with [project] section containing name, version, requires-python, and dependencies list."
                },
                {
                  "level": 2,
                  "text": "Use [project.optional-dependencies] with a 'dev' key for development dependencies."
                },
                {
                  "level": 3,
                  "text": "Add [build-system] with hatchling, and [tool.ruff] for linter configuration."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Missing quotes around dependency strings",
                  "consequence": "TOML parsing error",
                  "correction": "Each dependency must be a quoted string: \"fastapi>=0.115.0\""
                },
                {
                  "mistake": "Using requirements.txt format",
                  "consequence": "Invalid TOML - wrong format",
                  "correction": "Use TOML list format with brackets and quoted strings"
                },
                {
                  "mistake": "Forgetting requires-python",
                  "consequence": "May run on incompatible Python versions",
                  "correction": "Always specify requires-python = \">=3.13\" or your minimum version"
                },
                {
                  "mistake": "Putting dev deps in main dependencies",
                  "consequence": "Production installs unnecessary packages",
                  "correction": "Use [project.optional-dependencies] dev = [...] for dev-only packages"
                }
              ],
              "difficulty": "intermediate"
            },
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-04-challenge-2",
              "title": "Challenge 2: uv Workflow Simulation",
              "description": "Create a Python script that simulates the uv workflow by generating the correct terminal commands for different scenarios. This helps reinforce the uv command patterns.\n\n**Scenarios to handle:**\n1. Starting a new project from scratch\n2. Cloning and setting up an existing project\n3. Adding new dependencies to a project\n4. Updating all dependencies",
              "instructions": "Implement functions that return the correct uv commands for each workflow scenario.",
              "starterCode": "def new_project_workflow(project_name: str, python_version: str = \"3.13\") -> list[str]:\n    \"\"\"Generate commands to create a new uv project.\n    \n    Args:\n        project_name: Name of the new project\n        python_version: Python version to use (default: 3.13)\n    \n    Returns:\n        List of terminal commands to execute\n    \"\"\"\n    # TODO: Return list of uv commands\n    pass\n\ndef clone_project_workflow(repo_url: str) -> list[str]:\n    \"\"\"Generate commands to clone and set up an existing project.\n    \n    Args:\n        repo_url: Git repository URL\n    \n    Returns:\n        List of terminal commands to execute\n    \"\"\"\n    # TODO: Return list of commands (git clone + uv sync)\n    pass\n\ndef add_dependencies_workflow(packages: list[str], dev: bool = False) -> list[str]:\n    \"\"\"Generate commands to add dependencies.\n    \n    Args:\n        packages: List of package names to add\n        dev: If True, add as dev dependencies\n    \n    Returns:\n        List of uv commands\n    \"\"\"\n    # TODO: Return uv add commands\n    pass\n\ndef update_dependencies_workflow(package: str | None = None) -> list[str]:\n    \"\"\"Generate commands to update dependencies.\n    \n    Args:\n        package: Specific package to update, or None for all\n    \n    Returns:\n        List of uv commands\n    \"\"\"\n    # TODO: Return uv lock --upgrade commands\n    pass\n\n# Test the functions\nprint(\"=== New Project Workflow ===\")\nfor cmd in new_project_workflow(\"my-app\", \"3.13\") or []:\n    print(f\"  $ {cmd}\")\n\nprint(\"\\n=== Clone Project Workflow ===\")\nfor cmd in clone_project_workflow(\"https://github.com/user/repo.git\") or []:\n    print(f\"  $ {cmd}\")",
              "solution": "def new_project_workflow(project_name: str, python_version: str = \"3.13\") -> list[str]:\n    \"\"\"Generate commands to create a new uv project.\n    \n    Args:\n        project_name: Name of the new project\n        python_version: Python version to use (default: 3.13)\n    \n    Returns:\n        List of terminal commands to execute\n    \"\"\"\n    return [\n        f\"uv python install {python_version}\",\n        f\"uv init {project_name} --python {python_version}\",\n        f\"cd {project_name}\",\n        \"uv add --dev pytest ruff\",\n        \"uv run python hello.py\",\n    ]\n\ndef clone_project_workflow(repo_url: str) -> list[str]:\n    \"\"\"Generate commands to clone and set up an existing project.\n    \n    Args:\n        repo_url: Git repository URL\n    \n    Returns:\n        List of terminal commands to execute\n    \"\"\"\n    # Extract project name from URL\n    project_name = repo_url.rstrip(\"/\").split(\"/\")[-1].replace(\".git\", \"\")\n    \n    return [\n        f\"git clone {repo_url}\",\n        f\"cd {project_name}\",\n        \"uv sync\",\n        \"uv run python -m pytest\",\n    ]\n\ndef add_dependencies_workflow(packages: list[str], dev: bool = False) -> list[str]:\n    \"\"\"Generate commands to add dependencies.\n    \n    Args:\n        packages: List of package names to add\n        dev: If True, add as dev dependencies\n    \n    Returns:\n        List of uv commands\n    \"\"\"\n    if not packages:\n        return [\"# No packages specified\"]\n    \n    packages_str = \" \".join(packages)\n    dev_flag = \"--dev \" if dev else \"\"\n    \n    return [\n        f\"uv add {dev_flag}{packages_str}\",\n        \"# pyproject.toml and uv.lock are automatically updated\",\n        \"git add pyproject.toml uv.lock\",\n        f\"git commit -m 'Add {', '.join(packages)}'\",\n    ]\n\ndef update_dependencies_workflow(package: str | None = None) -> list[str]:\n    \"\"\"Generate commands to update dependencies.\n    \n    Args:\n        package: Specific package to update, or None for all\n    \n    Returns:\n        List of uv commands\n    \"\"\"\n    if package:\n        return [\n            f\"uv lock --upgrade-package {package}\",\n            \"uv sync\",\n            \"uv run python -m pytest\",\n            f\"git commit -am 'Update {package}'\",\n        ]\n    else:\n        return [\n            \"uv lock --upgrade\",\n            \"uv sync\",\n            \"uv run python -m pytest\",\n            \"git commit -am 'Update all dependencies'\",\n        ]\n\n# Test all workflows\nprint(\"=\" * 60)\nprint(\"uv WORKFLOW COMMAND GENERATOR\")\nprint(\"=\" * 60)\n\nprint(\"\\n=== 1. New Project Workflow ===\")\nprint(\"Creating a new Python 3.13 project named 'my-app':\")\nfor cmd in new_project_workflow(\"my-app\", \"3.13\"):\n    print(f\"  $ {cmd}\")\n\nprint(\"\\n=== 2. Clone Project Workflow ===\")\nprint(\"Cloning and setting up an existing project:\")\nfor cmd in clone_project_workflow(\"https://github.com/user/awesome-api.git\"):\n    print(f\"  $ {cmd}\")\n\nprint(\"\\n=== 3. Add Dependencies Workflow ===\")\nprint(\"Adding production dependencies:\")\nfor cmd in add_dependencies_workflow([\"requests\", \"pandas\"]):\n    print(f\"  $ {cmd}\")\n\nprint(\"\\nAdding dev dependencies:\")\nfor cmd in add_dependencies_workflow([\"pytest\", \"black\"], dev=True):\n    print(f\"  $ {cmd}\")\n\nprint(\"\\n=== 4. Update Dependencies Workflow ===\")\nprint(\"Updating a specific package:\")\nfor cmd in update_dependencies_workflow(\"requests\"):\n    print(f\"  $ {cmd}\")\n\nprint(\"\\nUpdating all packages:\")\nfor cmd in update_dependencies_workflow():\n    print(f\"  $ {cmd}\")\n\nprint(\"\\n\" + \"=\" * 60)\nprint(\"Key uv Commands Summary:\")\nprint(\"=\" * 60)\nprint(\"\"\"\n  uv init <name>          Create new project\n  uv add <package>        Add dependency\n  uv add --dev <package>  Add dev dependency\n  uv sync                 Install from lock file\n  uv run <command>        Run with project deps\n  uv lock --upgrade       Update all packages\n  uv python install       Install Python version\n\"\"\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "All workflow functions return valid command lists",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Each function should return a list of strings, where each string is a terminal command."
                },
                {
                  "level": 2,
                  "text": "For new projects: uv python install, uv init, cd, uv add --dev, uv run"
                },
                {
                  "level": 3,
                  "text": "For adding packages with --dev flag, use string formatting: f\"uv add {'--dev ' if dev else ''}{packages}\""
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to cd into project directory",
                  "consequence": "Commands run in wrong directory",
                  "correction": "Include 'cd project_name' after init or clone"
                },
                {
                  "mistake": "Not running uv sync after cloning",
                  "consequence": "Dependencies not installed",
                  "correction": "Always run 'uv sync' after cloning a uv project"
                },
                {
                  "mistake": "Using pip install instead of uv add",
                  "consequence": "Dependencies not tracked in pyproject.toml",
                  "correction": "Always use 'uv add' to add dependencies"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-10-lesson-05",
          "title": "Code Quality with Ruff",
          "moduleId": "module-10",
          "order": 5,
          "estimatedMinutes": 40,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "The Revolution: One Tool to Rule Them All",
              "content": "**Ruff is a Python linter and formatter that replaces 5+ tools in one.** Also created by Astral (makers of uv), Ruff is written in Rust and is 10-100x faster than the tools it replaces.\n\n**What Ruff replaces:**\n- **Flake8** - Linting (style and error checking)\n- **Black** - Code formatting\n- **isort** - Import sorting\n- **pyupgrade** - Upgrade Python syntax to newer versions\n- **autoflake** - Remove unused imports/variables\n- **pydocstyle** - Docstring checking\n- **bandit** - Security checks\n\n**Why Ruff is transformative:**\n- **10-100x faster** than Flake8, Black, etc.\n- **Single config** in pyproject.toml (not 5 separate configs)\n- **Drop-in replacement** for existing tools\n- **700+ rules** covering most linting needs\n- **Auto-fix** for many issues\n\n**Speed comparison (linting CPython codebase):**\n- Flake8: ~60 seconds\n- Ruff: ~0.3 seconds (200x faster!)\n\n**Real-world impact:**\n- Pre-commit hooks run instantly\n- IDE feedback is real-time\n- CI pipelines are faster\n- Developers actually use it (because it's fast)"
            },
            {
              "type": "EXAMPLE",
              "title": "Installing and Running Ruff",
              "content": "**Ruff can be installed with uv or pip.** Since we're using uv for our projects, we add it as a dev dependency.\n\n**Note:** Ruff integrates with VS Code, PyCharm, and other editors for real-time feedback as you type.",
              "code": "# Ruff installation and basic usage demonstration\n# Run these commands in your terminal!\n\nprint(\"=\"*60)\nprint(\"INSTALLING RUFF\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# INSTALLATION OPTIONS\n# ============================================\n\n# Option 1: Add to project with uv (recommended)\nuv add --dev ruff\n\n# Option 2: Install globally with uv\nuv tool install ruff\n\n# Option 3: Install with pip\npip install ruff\n\n# Verify installation\nruff --version\n# Output: ruff 0.8.x\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"BASIC COMMANDS\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# LINTING (finding problems)\n# ============================================\n\n# Check all Python files in current directory\nruff check .\n\n# Check a specific file\nruff check app.py\n\n# Check with auto-fix (safe fixes only)\nruff check --fix .\n\n# Check with ALL auto-fixes (including unsafe)\nruff check --fix --unsafe-fixes .\n\n# ============================================\n# FORMATTING (making code pretty)\n# ============================================\n\n# Format all Python files\nruff format .\n\n# Format a specific file\nruff format app.py\n\n# Check formatting without changing files\nruff format --check .\n\n# Show what would change (diff)\nruff format --diff .\n\n# ============================================\n# COMBINING BOTH\n# ============================================\n\n# Typical workflow: format then lint\nruff format . && ruff check --fix .\n\n# Or in one command with uv\nuv run ruff format . && uv run ruff check --fix .\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: What Ruff Catches",
              "content": "**Ruff catches many types of issues.** This example shows common problems and how Ruff identifies them with rule codes.\n\n**Rule code format:**\n- Letter(s) = category (E=pycodestyle, F=pyflakes, I=isort, etc.)\n- Number = specific rule within category\n- Example: F401 = unused import, E501 = line too long",
              "code": "# This file contains intentional errors for Ruff to catch\n# Run: ruff check example.py\n\nprint(\"=\"*60)\nprint(\"COMMON ISSUES RUFF CATCHES\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# EXAMPLE CODE WITH ISSUES\n# ============================================\n\"\"\")\n\nbad_code = '''\n# Save this as example.py and run: ruff check example.py\n\nimport os              # F401: unused import\nimport json           # Used below\nfrom typing import List  # UP006: Use list instead of List (Python 3.9+)\nimport sys            # I001: imports should be sorted\n\ndef calculate(x,y):   # E231: missing whitespace after ','\n    result=x+y        # E225: missing whitespace around operator\n    unused_var = 10   # F841: local variable never used\n    return result\n\ndef long_function_with_very_long_name_that_exceeds_line_length_limit(parameter_one, parameter_two, parameter_three):  # E501: line too long\n    pass\n\nif True == True:      # E712: comparison to True should be 'if True:'\n    print(\"hello\")    \n\nx = []                \nif len(x) == 0:       # SIM103: use 'if not x:' instead\n    print(\"empty\")\n\ndata = json.loads('{\"a\": 1}')\n'''\nprint(bad_code)\n\nprint(\"\"\"\n# ============================================\n# RUFF OUTPUT FOR THIS CODE\n# ============================================\n\n$ ruff check example.py\n\nexample.py:3:8: F401 [*] `os` imported but unused\nexample.py:5:20: UP006 [*] Use `list` instead of `List` for type annotation\nexample.py:6:1: I001 [*] Import block is un-sorted or un-formatted\nexample.py:8:17: E231 [*] Missing whitespace after ','\nexample.py:9:11: E225 [*] Missing whitespace around operator\nexample.py:10:5: F841 [*] Local variable `unused_var` is assigned but never used\nexample.py:13:89: E501 Line too long (120 > 88 characters)\nexample.py:16:4: E712 [*] Comparison to `True` should be `cond is True` or `if cond:`\nexample.py:20:4: SIM103 [*] Return the condition directly\n\n[*] = auto-fixable with --fix\n\n# ============================================\n# AFTER RUNNING: ruff check --fix example.py\n# ============================================\n\"\"\")\n\nfixed_code = '''\nimport json\nimport sys  # Now sorted, unused 'os' removed\n\n\ndef calculate(x, y):  # Proper spacing\n    result = x + y    # Proper spacing\n    return result     # Unused variable removed\n\n\ndef long_function(  # Split long line\n    parameter_one,\n    parameter_two,\n    parameter_three,\n):\n    pass\n\n\nif True:              # Simplified comparison\n    print(\"hello\")\n\nx = []\nif not x:             # Simplified check\n    print(\"empty\")\n\ndata = json.loads('{\"a\": 1}')\n'''\nprint(\"\\nFixed code:\")\nprint(fixed_code)",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Configuring Ruff in pyproject.toml",
              "content": "**All Ruff configuration goes in pyproject.toml.** This is one of Ruff's best features - no need for separate .flake8, pyproject.toml (black), isort.cfg, etc.\n\n**Key configuration sections:**\n- `[tool.ruff]` - General settings (line length, Python version)\n- `[tool.ruff.lint]` - Which rules to enable/disable\n- `[tool.ruff.format]` - Formatting options",
              "code": "print(\"=\"*60)\nprint(\"RUFF CONFIGURATION IN pyproject.toml\")\nprint(\"=\"*60)\n\nbasic_config = '''\n# ============================================\n# BASIC CONFIGURATION (Good starting point)\n# ============================================\n\n[tool.ruff]\n# Same as Black for consistency\nline-length = 88\n\n# Target Python version (enables version-specific rules)\ntarget-version = \"py313\"\n\n# Directories to exclude\nexclude = [\n    \".venv\",\n    \"__pycache__\",\n    \"migrations\",\n    \"*.pyi\",\n]\n\n[tool.ruff.lint]\n# Rule selection - start conservative, add more over time\nselect = [\n    \"E\",    # pycodestyle errors (most important)\n    \"F\",    # pyflakes (unused imports, undefined names)\n    \"I\",    # isort (import sorting)\n    \"UP\",   # pyupgrade (modernize syntax)\n    \"B\",    # flake8-bugbear (common bugs)\n    \"SIM\",  # flake8-simplify (simplify code)\n]\n\n# Rules to ignore (if needed)\nignore = [\n    \"E501\",  # Line too long (formatter handles this)\n]\n\n# Allow autofix for all enabled rules\nfixable = [\"ALL\"]\n\n[tool.ruff.format]\n# Use double quotes (like Black)\nquote-style = \"double\"\n\n# Indent with spaces (not tabs)\nindent-style = \"space\"\n\n# Unix-style line endings\nline-ending = \"lf\"\n'''\nprint(basic_config)\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"ADVANCED CONFIGURATION\")\nprint(\"=\"*60)\n\nadvanced_config = '''\n# ============================================\n# ADVANCED CONFIGURATION (Strict mode)\n# ============================================\n\n[tool.ruff]\nline-length = 88\ntarget-version = \"py313\"\n\n[tool.ruff.lint]\n# Enable many more rules for strict checking\nselect = [\n    \"E\",     # pycodestyle errors\n    \"W\",     # pycodestyle warnings\n    \"F\",     # pyflakes\n    \"I\",     # isort\n    \"UP\",    # pyupgrade\n    \"B\",     # flake8-bugbear\n    \"SIM\",   # flake8-simplify\n    \"C4\",    # flake8-comprehensions\n    \"DTZ\",   # flake8-datetimez (timezone-aware datetime)\n    \"T20\",   # flake8-print (no print statements)\n    \"RET\",   # flake8-return (return statement issues)\n    \"PTH\",   # flake8-use-pathlib (prefer pathlib over os.path)\n    \"ERA\",   # eradicate (commented-out code)\n    \"PL\",    # pylint rules\n    \"RUF\",   # Ruff-specific rules\n]\n\n# Per-file rule ignores\n[tool.ruff.lint.per-file-ignores]\n\"tests/*\" = [\"S101\"]  # Allow assert in tests\n\"__init__.py\" = [\"F401\"]  # Allow unused imports in __init__\n\"scripts/*\" = [\"T201\"]  # Allow print in scripts\n\n# isort configuration\n[tool.ruff.lint.isort]\nknown-first-party = [\"myproject\"]  # Your package name\ncombine-as-imports = true\n\n# pylint configuration\n[tool.ruff.lint.pylint]\nmax-args = 5  # Maximum function arguments\n'''\nprint(advanced_config)\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"RULE CATEGORIES EXPLAINED\")\nprint(\"=\"*60)\n\nprint(\"\"\"\nMost commonly used rule categories:\n\nE/W  - pycodestyle (PEP 8 style)\nF    - pyflakes (errors like undefined names)\nI    - isort (import sorting)\nUP   - pyupgrade (use modern Python syntax)\nB    - bugbear (likely bugs)\nSIM  - simplify (code simplification)\nC4   - comprehensions (list/dict/set)\nPTH  - pathlib (prefer Path over os.path)\nT20  - print (no print() in production)\nRUF  - Ruff-specific rules\n\nSee all rules: https://docs.astral.sh/ruff/rules/\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: IDE Integration (VS Code)",
              "content": "**Ruff integrates with VS Code for real-time feedback.** This means you see errors as you type, and can fix them with a single click.\n\n**The Ruff extension provides:**\n- Red squiggles for errors\n- Yellow squiggles for warnings\n- Quick fix menu (lightbulb icon)\n- Format on save\n- Organize imports on save",
              "code": "print(\"=\"*60)\nprint(\"VS CODE INTEGRATION\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# STEP 1: Install the Ruff Extension\n# ============================================\n\n1. Open VS Code\n2. Go to Extensions (Ctrl+Shift+X / Cmd+Shift+X)\n3. Search for \"Ruff\"\n4. Install \"Ruff\" by Astral\n\n# ============================================\n# STEP 2: Configure VS Code Settings\n# ============================================\n\nAdd to your settings.json (Ctrl+, then click \"Open Settings (JSON)\"):\n\"\"\")\n\nvscode_settings = '''\n{\n    // Use Ruff as the default formatter for Python\n    \"[python]\": {\n        \"editor.formatOnSave\": true,\n        \"editor.defaultFormatter\": \"charliermarsh.ruff\",\n        \"editor.codeActionsOnSave\": {\n            \"source.fixAll\": \"explicit\",\n            \"source.organizeImports\": \"explicit\"\n        }\n    },\n    \n    // Ruff extension settings\n    \"ruff.lint.run\": \"onType\",  // Check as you type\n    \"ruff.organizeImports\": true,\n    \"ruff.fixAll\": true\n}\n'''\nprint(vscode_settings)\n\nprint(\"\"\"\n# ============================================\n# STEP 3: Enjoy Real-Time Feedback!\n# ============================================\n\nNow when you code:\n\n1. Errors show immediately as you type\n2. Saving auto-formats and fixes issues\n3. Imports are automatically organized\n4. Hover over issues to see explanations\n5. Click the lightbulb for quick fixes\n\n# ============================================\n# OTHER IDE SUPPORT\n# ============================================\n\n- PyCharm: Use External Tools or Ruff plugin\n- Neovim: Use null-ls or conform.nvim with ruff\n- Sublime Text: Use SublimeLinter-ruff\n- Emacs: Use ruff-lsp\n\nRuff also provides an LSP server:\n  ruff server\n  \nThis enables IDE integration for any LSP-compatible editor.\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Pre-commit Integration",
              "content": "**Ruff works great with pre-commit hooks.** This ensures code quality before commits reach the repository.\n\n**Pre-commit** is a tool that runs checks before each git commit. If checks fail, the commit is rejected until you fix the issues.",
              "code": "print(\"=\"*60)\nprint(\"PRE-COMMIT INTEGRATION\")\nprint(\"=\"*60)\n\nprint(\"\"\"\n# ============================================\n# STEP 1: Install pre-commit\n# ============================================\n\nuv add --dev pre-commit\n\n# ============================================\n# STEP 2: Create .pre-commit-config.yaml\n# ============================================\n\"\"\")\n\npre_commit_config = '''\n# .pre-commit-config.yaml\nrepos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: v0.8.0  # Use latest version\n    hooks:\n      # Run the linter\n      - id: ruff\n        args: [--fix]  # Auto-fix issues\n      # Run the formatter\n      - id: ruff-format\n'''\nprint(pre_commit_config)\n\nprint(\"\"\"\n# ============================================\n# STEP 3: Install the Git Hook\n# ============================================\n\nuv run pre-commit install\n\n# Output: pre-commit installed at .git/hooks/pre-commit\n\n# ============================================\n# STEP 4: How It Works\n# ============================================\n\n# Now when you try to commit:\n$ git add app.py\n$ git commit -m \"Add feature\"\n\nruff....................................Passed\nruff-format.............................Passed\n\n# All checks passed - commit succeeds!\n\n# If there are issues:\nruff....................................Failed\n- hook id: ruff\n- files were modified by this hook\n\n# Ruff auto-fixed the issues!\n# Just stage the changes and commit again:\n$ git add -u\n$ git commit -m \"Add feature\"\n\n# ============================================\n# RUN ON ALL FILES (one-time cleanup)\n# ============================================\n\nuv run pre-commit run --all-files\n\n# This checks/fixes all files, not just staged ones\n# Great for initial setup or periodic cleanup\n\"\"\")\n\nprint(\"\\n\" + \"=\"*60)\nprint(\"COMPLETE pyproject.toml WITH PRE-COMMIT\")\nprint(\"=\"*60)\n\ncomplete_config = '''\n[project]\nname = \"my-project\"\nversion = \"0.1.0\"\nrequires-python = \">=3.13\"\ndependencies = [\n    \"fastapi>=0.115.0\",\n]\n\n[project.optional-dependencies]\ndev = [\n    \"pytest>=8.0.0\",\n    \"ruff>=0.8.0\",\n    \"pre-commit>=4.0.0\",\n]\n\n[tool.ruff]\nline-length = 88\ntarget-version = \"py313\"\n\n[tool.ruff.lint]\nselect = [\"E\", \"F\", \"I\", \"UP\", \"B\", \"SIM\"]\nfixable = [\"ALL\"]\n\n[tool.ruff.format]\nquote-style = \"double\"\n'''\nprint(complete_config)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Black AND Ruff Format Together**\n```bash\n# WRONG - Redundant, may conflict\nuv add --dev black ruff\n# Running both formatters\nblack . && ruff format .  # Unnecessary!\n\n# CORRECT - Use only Ruff (it includes Black's formatting)\nuv add --dev ruff\nruff format .\n```\n\n**2. Ignoring All Rules in a Category**\n```toml\n# WRONG - Disabling too much\n[tool.ruff.lint]\nignore = [\"E\", \"W\"]  # Ignores ALL style rules!\n\n# CORRECT - Ignore specific rules only\n[tool.ruff.lint]\nignore = [\"E501\"]  # Just line length\n```\n\n**3. Not Running Format AND Check**\n```bash\n# WRONG - Only formatting\nruff format .\n# Code has style errors!\n\n# CORRECT - Format first, then lint\nruff format .\nruff check --fix .\n```\n\n**4. Using Unsafe Fixes Without Review**\n```bash\n# DANGEROUS - May break code\nruff check --fix --unsafe-fixes .\n# Auto-applied without review!\n\n# SAFE - Review unsafe fixes first\nruff check .  # See all issues\nruff check --fix .  # Apply safe fixes only\n# Manually review and fix unsafe issues\n```\n\n**5. Forgetting to Configure target-version**\n```toml\n# WRONG - Defaults to old Python\n[tool.ruff]\nline-length = 88\n# Missing target-version!\n\n# CORRECT - Specify your Python version\n[tool.ruff]\nline-length = 88\ntarget-version = \"py313\"  # Enables Python 3.13 rules\n```\n\n**6. Not Updating Ruff Regularly**\n```bash\n# WRONG - Using old version with missing rules\n# ruff 0.1.x from a year ago\n\n# CORRECT - Keep Ruff updated\nuv add --dev ruff@latest\n# Or in pre-commit, update rev to latest version\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Ruff replaces 5+ tools** - Flake8, Black, isort, pyupgrade, autoflake in one 10-100x faster tool\n- **Two commands to remember** - `ruff format .` (formatting) and `ruff check --fix .` (linting)\n- **Configure in pyproject.toml** - All settings in one file under `[tool.ruff]`\n- **Start with these rules** - `select = [\"E\", \"F\", \"I\", \"UP\", \"B\", \"SIM\"]` covers most needs\n- **target-version = \"py313\"** - Enables Python 3.13-specific rules and upgrades\n- **VS Code integration** - Install Ruff extension for real-time feedback\n- **Pre-commit hooks** - Add ruff and ruff-format to catch issues before commit\n- **Auto-fix is safe** - `--fix` only applies safe fixes; unsafe ones require `--unsafe-fixes`\n- **Same as Black** - Ruff format is compatible with Black's style (88 chars, double quotes)"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-05-challenge-1",
              "title": "Challenge 1: Configure Ruff for Your Project",
              "description": "Create a complete Ruff configuration in pyproject.toml for a web API project. The configuration should:\n- Target Python 3.13\n- Use 88 character line length\n- Enable common rule categories (E, F, I, UP, B, SIM)\n- Ignore print statements in scripts folder\n- Configure isort to recognize your package name",
              "instructions": "Write a complete [tool.ruff] configuration section for pyproject.toml.",
              "starterCode": "# Create a Ruff configuration for a FastAPI project\n# Project name: my_api\n\nruff_config = '''\n[tool.ruff]\n# TODO: Add line-length\n# TODO: Add target-version\n\n[tool.ruff.lint]\n# TODO: Add rule selection\n# TODO: Add ignores if needed\n\n# TODO: Add per-file ignores for scripts/\n\n[tool.ruff.format]\n# TODO: Configure formatting options\n'''\n\nprint(\"Ruff Configuration:\")\nprint(\"=\" * 50)\nprint(ruff_config)\n\n# Validate the configuration\nif \"py313\" in ruff_config or \"py313\" in ruff_config:\n    print(\"\\n[OK] Targets Python 3.13\")\nif \"88\" in ruff_config:\n    print(\"[OK] Line length is 88\")\nif '\"E\"' in ruff_config and '\"F\"' in ruff_config:\n    print(\"[OK] Has E and F rules enabled\")",
              "solution": "# Complete Ruff configuration for a FastAPI project\n\nruff_config = '''[tool.ruff]\n# Match Black's formatting standards\nline-length = 88\n\n# Target Python 3.13 for modern syntax rules\ntarget-version = \"py313\"\n\n# Exclude common directories\nexclude = [\n    \".venv\",\n    \"__pycache__\",\n    \".git\",\n    \"migrations\",\n]\n\n[tool.ruff.lint]\n# Enable comprehensive rule set\nselect = [\n    \"E\",     # pycodestyle errors\n    \"W\",     # pycodestyle warnings  \n    \"F\",     # pyflakes\n    \"I\",     # isort\n    \"UP\",    # pyupgrade\n    \"B\",     # flake8-bugbear\n    \"SIM\",   # flake8-simplify\n    \"C4\",    # flake8-comprehensions\n    \"PTH\",   # flake8-use-pathlib\n]\n\n# Rules to ignore\nignore = [\n    \"E501\",  # Line too long (formatter handles this)\n]\n\n# Allow all auto-fixes\nfixable = [\"ALL\"]\nunfixable = []\n\n# Per-file rule ignores\n[tool.ruff.lint.per-file-ignores]\n\"scripts/*\" = [\"T201\"]  # Allow print() in scripts\n\"tests/*\" = [\"S101\"]    # Allow assert in tests\n\"__init__.py\" = [\"F401\"]  # Allow unused imports in __init__\n\n# Configure import sorting\n[tool.ruff.lint.isort]\nknown-first-party = [\"my_api\"]\ncombine-as-imports = true\nforce-single-line = false\n\n[tool.ruff.format]\n# Use double quotes like Black\nquote-style = \"double\"\n\n# Use spaces for indentation\nindent-style = \"space\"\n\n# Unix-style line endings\nline-ending = \"lf\"\n\n# Keep magic trailing comma\nskip-magic-trailing-comma = false\n'''\n\nprint(\"Ruff Configuration for FastAPI Project:\")\nprint(\"=\" * 50)\nprint(ruff_config)\n\n# Validate the configuration\nprint(\"\\n\" + \"=\" * 50)\nprint(\"Configuration Validation:\")\nprint(\"=\" * 50)\n\nchecks = [\n    (\"py313\" in ruff_config, \"Targets Python 3.13\"),\n    (\"88\" in ruff_config, \"Line length is 88\"),\n    ('\"E\"' in ruff_config, \"pycodestyle errors enabled\"),\n    ('\"F\"' in ruff_config, \"pyflakes enabled\"),\n    ('\"I\"' in ruff_config, \"isort enabled\"),\n    ('\"UP\"' in ruff_config, \"pyupgrade enabled\"),\n    ('\"B\"' in ruff_config, \"bugbear enabled\"),\n    ('\"SIM\"' in ruff_config, \"simplify enabled\"),\n    (\"per-file-ignores\" in ruff_config, \"Has per-file ignores\"),\n    (\"scripts/*\" in ruff_config, \"Scripts folder configured\"),\n    (\"known-first-party\" in ruff_config, \"isort knows first-party packages\"),\n    (\"quote-style\" in ruff_config, \"Quote style configured\"),\n]\n\nfor passed, description in checks:\n    status = \"PASS\" if passed else \"FAIL\"\n    print(f\"[{status}] {description}\")\n\nprint(\"\\n\" + \"=\" * 50)\nprint(\"Usage:\")\nprint(\"=\" * 50)\nprint(\"\"\"\n# Format code:\nuv run ruff format .\n\n# Lint and fix:\nuv run ruff check --fix .\n\n# Check without fixing:\nuv run ruff check .\n\"\"\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Configuration includes required sections",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start with [tool.ruff] section containing line-length and target-version."
                },
                {
                  "level": 2,
                  "text": "Add [tool.ruff.lint] with select = [\"E\", \"F\", \"I\", \"UP\", \"B\", \"SIM\"] for common rules."
                },
                {
                  "level": 3,
                  "text": "Use [tool.ruff.lint.per-file-ignores] with pattern \"scripts/*\" = [\"T201\"] to allow print in scripts."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Missing target-version",
                  "consequence": "Won't suggest Python 3.13-specific improvements",
                  "correction": "Add target-version = \"py313\" under [tool.ruff]"
                },
                {
                  "mistake": "Forgetting isort configuration",
                  "consequence": "First-party imports sorted incorrectly",
                  "correction": "Add [tool.ruff.lint.isort] with known-first-party"
                },
                {
                  "mistake": "Using string instead of list for select",
                  "consequence": "TOML parsing error",
                  "correction": "Use select = [\"E\", \"F\"] not select = \"E, F\""
                }
              ],
              "difficulty": "intermediate"
            },
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-05-challenge-2",
              "title": "Challenge 2: Fix Code with Ruff Rules",
              "description": "Given a Python file with multiple code quality issues, identify what Ruff would flag and manually fix each issue. This exercise helps you understand what each rule category catches.\n\n**Rules to apply:**\n- F401: Remove unused imports\n- F841: Remove unused variables  \n- E225: Add whitespace around operators\n- UP006: Use modern type hints (list instead of List)\n- SIM103: Return condition directly\n- I001: Sort imports correctly",
              "instructions": "Fix all the code quality issues in the given code snippet.",
              "starterCode": "# This code has multiple Ruff violations\n# Fix all issues following the rules\n\nbad_code = '''\nimport os\nimport json\nfrom typing import List, Optional\nimport sys\n\ndef get_items(data:dict)->List[str]:\n    result=[]           \n    unused_temp = \"temp\" \n    for key,value in data.items():\n        if value is not None:\n            result.append(key)\n    return result\n\ndef check_empty(items: list) -> bool:\n    if len(items) == 0:\n        return True\n    else:\n        return False\n\ndef process(x,y):\n    total=x+y\n    return total\n'''\n\n# TODO: Write the fixed version of this code\nfixed_code = '''\n# Write your fixed code here\n'''\n\nprint(\"Original code with issues:\")\nprint(bad_code)\nprint(\"\\nYour fixed code:\")\nprint(fixed_code)",
              "solution": "# This code has multiple Ruff violations\n# All issues have been fixed according to the rules\n\nbad_code = '''\nimport os\nimport json\nfrom typing import List, Optional\nimport sys\n\ndef get_items(data:dict)->List[str]:\n    result=[]           \n    unused_temp = \"temp\" \n    for key,value in data.items():\n        if value is not None:\n            result.append(key)\n    return result\n\ndef check_empty(items: list) -> bool:\n    if len(items) == 0:\n        return True\n    else:\n        return False\n\ndef process(x,y):\n    total=x+y\n    return total\n'''\n\nfixed_code = '''\nimport json  # I001: Sorted alphabetically, removed unused os/sys\n\n\ndef get_items(data: dict) -> list[str]:  # UP006: list instead of List, E225: spacing\n    result = []  # E225: spacing around =\n    # F841: Removed unused_temp variable\n    for key, value in data.items():  # E231: spacing after comma\n        if value is not None:\n            result.append(key)\n    return result\n\n\ndef check_empty(items: list) -> bool:\n    return len(items) == 0  # SIM103: Return condition directly\n\n\ndef process(x, y):  # E231: spacing after comma\n    total = x + y  # E225: spacing around operators\n    return total\n'''\n\nprint(\"Original code with issues:\")\nprint(bad_code)\n\nprint(\"\\n\" + \"=\" * 60)\nprint(\"Fixed code with explanations:\")\nprint(\"=\" * 60)\nprint(fixed_code)\n\nprint(\"\\n\" + \"=\" * 60)\nprint(\"Summary of fixes applied:\")\nprint(\"=\" * 60)\n\nfixes = [\n    (\"F401\", \"Removed unused imports: os, sys, Optional\"),\n    (\"I001\", \"Sorted imports alphabetically\"),\n    (\"UP006\", \"Changed List[str] to list[str] (Python 3.9+ syntax)\"),\n    (\"E225\", \"Added whitespace around = and other operators\"),\n    (\"E231\", \"Added whitespace after commas in function parameters\"),\n    (\"F841\", \"Removed unused variable 'unused_temp'\"),\n    (\"SIM103\", \"Simplified check_empty to return condition directly\"),\n]\n\nfor code, description in fixes:\n    print(f\"  {code}: {description}\")\n\nprint(\"\\n\" + \"=\" * 60)\nprint(\"Ruff commands that would catch these:\")\nprint(\"=\" * 60)\nprint(\"\"\"\n# Check for issues:\nruff check original.py\n\n# Auto-fix most issues:\nruff check --fix original.py\n\n# Format the code:\nruff format original.py\n\"\"\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Fixed code removes unused imports",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start by removing unused imports (os, sys, Optional). Keep only json since it might be used."
                },
                {
                  "level": 2,
                  "text": "For SIM103, if you're returning True/False based on a condition, just return the condition itself."
                },
                {
                  "level": 3,
                  "text": "UP006: In Python 3.9+, use list[str] instead of List[str] from typing."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Keeping Optional import",
                  "consequence": "F401 unused import warning",
                  "correction": "Remove Optional if not used in type hints"
                },
                {
                  "mistake": "Not simplifying boolean returns",
                  "consequence": "SIM103 warning remains",
                  "correction": "Replace if/else True/False with return condition"
                },
                {
                  "mistake": "Using typing.List in Python 3.9+",
                  "consequence": "UP006 warning for outdated syntax",
                  "correction": "Use built-in list[str] instead of List[str]"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-10-lesson-06",
          "title": "Popular Third-Party Packages",
          "moduleId": "module-10",
          "order": 6,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Standing on the Shoulders of Giants",
              "content": "**Don't reinvent the wheel!** For almost any task, someone has already written a great library.\n\n**Essential Categories:**\n\n**1. Web Development:**\n- **FastAPI** - Modern, async API framework (recommended)\n- **Flask** - Lightweight, good for learning\n- **Django** - Full-featured web framework\n- **requests** - HTTP library (much better than urllib!)\n\n**2. Data Science:**\n- **pandas** - Data analysis (Excel on steroids)\n- **numpy** - Numerical computing\n- **matplotlib** - Data visualization\n- **scikit-learn** - Machine learning\n\n**3. Web Scraping:**\n- **beautifulsoup4** - Parse HTML/XML\n- **selenium** - Browser automation\n- **scrapy** - Web crawling framework\n\n**4. Utilities:**\n- **python-dotenv** - Load environment variables\n- **pytest** - Testing framework\n- **black** - Code formatter\n- **pillow** - Image processing\n\n**How to choose packages:**\n1. Check PyPI downloads\n2. Look at GitHub stars\n3. Read documentation quality\n4. Check last update date\n5. Review issue tracker"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Popular Packages Demo",
              "content": "**Key packages and what they're best for:**\n- **requests**: HTTP requests (APIs, web scraping)\n- **pandas**: Data analysis, CSV/Excel manipulation\n- **Flask/FastAPI**: Building web apps and APIs\n- **beautifulsoup4**: Parsing HTML/XML\n- **python-dotenv**: Managing config/secrets\n\n**Installation:** `uv add package-name` (or `pip install package-name`)",
              "code": "# Note: These examples show usage. Install with: uv add <package>\n\nprint(\"=== requests - HTTP Made Easy ===\")\nprint(\"\"\"\n# Without requests (painful!):\nimport urllib.request\nresponse = urllib.request.urlopen('https://api.github.com')\ndata = response.read().decode('utf-8')\n\n# With requests (easy!):\nimport requests\nresponse = requests.get('https://api.github.com')\ndata = response.json()  # Auto-parses JSON!\n\"\"\")\n\nprint(\"\\n=== pandas - Data Analysis ===\")\nprint(\"\"\"\nimport pandas as pd\n\n# Read CSV\ndf = pd.read_csv('data.csv')\n\n# Quick stats\nprint(df.describe())\n\n# Filter data\nfiltered = df[df['age'] > 25]\n\n# Group and aggregate\nby_city = df.groupby('city')['salary'].mean()\n\n# Export to Excel\ndf.to_excel('output.xlsx')\n\"\"\")\n\nprint(\"\\n=== Flask - Web Framework ===\")\nprint(\"\"\"\nfrom flask import Flask\napp = Flask(__name__)\n\n@app.route('/')\ndef home():\n    return 'Hello, World!'\n\n@app.route('/api/users/<int:user_id>')\ndef get_user(user_id):\n    return {'id': user_id, 'name': 'Alice'}\n\nif __name__ == '__main__':\n    app.run(debug=True)\n\"\"\")\n\nprint(\"\\n=== beautifulsoup4 - Web Scraping ===\")\nprint(\"\"\"\nfrom bs4 import BeautifulSoup\nimport requests\n\n# Fetch webpage\nresponse = requests.get('https://example.com')\nsoup = BeautifulSoup(response.content, 'html.parser')\n\n# Extract data\ntitle = soup.find('title').text\nlinks = [a['href'] for a in soup.find_all('a')]\nheadings = soup.find_all('h2')\n\"\"\")\n\nprint(\"\\n=== python-dotenv - Environment Variables ===\")\nprint(\"\"\"\n# .env file:\n# DATABASE_URL=postgresql://localhost/mydb\n# SECRET_KEY=my-secret-key\n\nfrom dotenv import load_dotenv\nimport os\n\nload_dotenv()  # Load from .env file\n\ndb_url = os.getenv('DATABASE_URL')\nsecret = os.getenv('SECRET_KEY')\n\"\"\")\n\nprint(\"\\n=== Package Combinations ===\")\nprint(\"\"\"\nCommon project stacks:\n\nWeb API:\n  - FastAPI (framework)\n  - pydantic (data validation)\n  - sqlalchemy (database)\n  - requests (external APIs)\n\nData Pipeline:\n  - pandas (data processing)\n  - sqlalchemy (database)\n  - schedule (task scheduling)\n  - python-dotenv (config)\n\nWeb Scraping:\n  - requests (fetch pages)\n  - beautifulsoup4 (parse HTML)\n  - pandas (organize data)\n  - openpyxl (export to Excel)\n\"\"\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Finding packages:**\n```bash\n# Search PyPI\npip search keyword  # (disabled, use pypi.org instead)\n\n# Browse at https://pypi.org\n# Check GitHub for popular projects\n```\n\n**Installing:**\n```bash\n# Basic install\npip install requests\n\n# Specific version\npip install requests==2.31.0\n\n# Upgrade\npip install --upgrade requests\n\n# With extras\npip install fastapi[all]  # Installs optional dependencies\n```\n\n**Common package patterns:**\n```python\n# requests - HTTP\nimport requests\nresponse = requests.get(url)\ndata = response.json()\n\n# pandas - Data\nimport pandas as pd\ndf = pd.read_csv('file.csv')\n\n# flask - Web\nfrom flask import Flask\napp = Flask(__name__)\n\n# beautifulsoup - Parsing\nfrom bs4 import BeautifulSoup\nsoup = BeautifulSoup(html, 'html.parser')\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Not Reading Package Documentation**\n```python\n# WRONG - Assuming API without checking docs\nimport requests\nrequests.fetch(\"https://api.example.com\")  # AttributeError!\n\n# CORRECT - Read docs, use correct API\nimport requests\nrequests.get(\"https://api.example.com\")  # Correct method\n```\n\n**2. Ignoring Package Deprecation Warnings**\n```python\n# WRONG - Using deprecated functions\nimport pandas as pd\ndf.append(new_row)  # DeprecationWarning, removed in future!\n\n# CORRECT - Use recommended alternatives\nimport pandas as pd\ndf = pd.concat([df, new_row])  # Current approach\n```\n\n**3. Installing Wrong Package (Typosquatting)**\n```python\n# WRONG - Typo could install malicious package!\nuv add reqeusts  # Misspelled - could be malware!\n\n# CORRECT - Double-check package names\nuv add requests  # Correct spelling\n# Also verify on pypi.org before installing\n```\n\n**4. Not Checking Package Compatibility**\n```python\n# WRONG - Package doesn't support your Python version\n# Python 3.8 project\nuv add package-requiring-3.10  # Installation fails!\n\n# CORRECT - Check Python version requirements first\n# Read package docs or pypi.org for version compatibility\n# Use: uv add \"package>=1.0,<2.0; python_version>='3.10'\"\n```\n\n**5. Importing Unused Heavy Packages**\n```python\n# WRONG - Importing everything slows startup\nimport pandas  # Heavy import even if barely used\nimport numpy\n\n# CORRECT - Import only what you need, when you need it\ndef process_data(file):\n    import pandas as pd  # Import only when function called\n    return pd.read_csv(file)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Don't reinvent the wheel** - Use existing packages for common tasks\n- **requests** - Best HTTP library for sync code (APIs, web scraping)\n- **httpx** - Modern HTTP library with async support (use for async code)\n- **pandas** - Data analysis and Excel/CSV manipulation\n- **Flask/FastAPI** - Web frameworks for APIs and websites\n- **beautifulsoup4** - HTML/XML parsing for web scraping\n- **pytest** - Modern testing framework\n- **Check PyPI** (pypi.org) for packages. 400,000+ available!\n- **Always use virtual environments** when installing packages\n- **Pro tip**: For async applications, prefer httpx over requests"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-06-challenge-1",
              "title": "Interactive Exercise",
              "description": "Research and create requirements.txt for a data analysis project that needs:\n- Data reading/writing\n- HTTP requests\n- Data visualization\n- Testing",
              "instructions": "Research and create requirements.txt for a data analysis project that needs:\n- Data reading/writing\n- HTTP requests\n- Data visualization\n- Testing",
              "starterCode": "# TODO: Research packages for:\n# 1. CSV/Excel operations\n# 2. HTTP requests\n# 3. Plotting graphs\n# 4. Unit testing\n\nrequirements = \"\"\"\n# TODO: Add packages\n\"\"\"\n\nfrom pathlib import Path\nPath('requirements.txt').write_text(requirements)\nprint(requirements)",
              "solution": "# Data Analysis Project Requirements\n# This solution shows popular packages for each category\n\nrequirements = \"\"\"# Data Analysis Project Dependencies\n# Install with: pip install -r requirements.txt\n\n# ============ Data Reading/Writing ============\n# Pandas - The go-to library for data analysis\npandas>=2.0.0\n# OpenPyXL - Read/write Excel files\nopenpyxl>=3.1.0\n\n# ============ HTTP Requests ============\n# Requests - Simple HTTP library\nrequests>=2.28.0\n\n# ============ Data Visualization ============\n# Matplotlib - Comprehensive plotting library\nmatplotlib>=3.7.0\n# Seaborn - Statistical data visualization\nseaborn>=0.12.0\n\n# ============ Testing ============\n# Pytest - Modern testing framework\npytest>=7.3.0\n# Pytest-cov - Coverage reporting\npytest-cov>=4.0.0\n\n# ============ Optional but Recommended ============\n# NumPy - Numerical computing\nnumpy>=1.24.0\n# Jupyter - Interactive notebooks\njupyterlab>=4.0.0\n\"\"\"\n\nfrom pathlib import Path\nPath('requirements.txt').write_text(requirements.strip())\n\nprint(\"Created requirements.txt for Data Analysis project\")\nprint(\"\\n\" + \"=\" * 50)\nprint(requirements)\n\nprint(\"\\nPackage Summary:\")\nprint(\"  - pandas, openpyxl: Data reading/writing\")\nprint(\"  - requests: HTTP requests\")\nprint(\"  - matplotlib, seaborn: Visualization\")\nprint(\"  - pytest, pytest-cov: Testing\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Popular choices: pandas, requests, matplotlib, pytest"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-10-lesson-07",
          "title": "Mini-Project: Python Project Initializer",
          "moduleId": "module-10",
          "order": 7,
          "estimatedMinutes": 45,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Project Overview",
              "content": "**Build a Project Initializer Tool!**\n\nYou'll create a CLI tool that sets up new Python projects with:\n- Proper package structure\n- Custom modules\n- requirements.txt with popular packages\n- Virtual environment instructions\n- Example code using third-party libraries\n\n**What you'll practice:**\n- Creating packages with `__init__.py`\n- Writing reusable modules\n- Managing dependencies\n- Importing and using modules\n- Project organization best practices\n\n**Project Structure:**\n```\nproject_initializer/\n‚îú‚îÄ‚îÄ __init__.py\n‚îú‚îÄ‚îÄ templates/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ web_template.py\n‚îÇ   ‚îî‚îÄ‚îÄ data_template.py\n‚îú‚îÄ‚îÄ utils/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ file_utils.py\n‚îÇ   ‚îî‚îÄ‚îÄ package_checker.py\n‚îî‚îÄ‚îÄ main.py\n```\n\n**Features:**\n1. Choose project type (web, data science, general)\n2. Generate appropriate folder structure\n3. Create requirements.txt with relevant packages\n4. Generate sample code files\n5. Display setup instructions"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 1: File Utilities Module",
              "content": "**file_utils.py** provides reusable file operations:\n- `create_directory_structure()`: Recursively creates folders\n- `write_file()`: Safely writes files\n- `create_init_file()`: Creates `__init__.py` files\n- Uses pathlib for cross-platform paths\n- `if __name__ == '__main__':` allows testing the module",
              "code": "# project_initializer/utils/file_utils.py\n\"\"\"Utility functions for file and directory operations.\"\"\"\n\nfrom pathlib import Path\nimport json\n\ndef create_directory_structure(base_path, structure):\n    \"\"\"Create directories from a nested dictionary structure.\n    \n    Args:\n        base_path: Root directory path\n        structure: Dict representing folder structure\n    \n    Example:\n        structure = {\n            'src': {\n                'utils': {},\n                'models': {}\n            }\n        }\n    \"\"\"\n    base = Path(base_path)\n    base.mkdir(exist_ok=True)\n    \n    for name, subdirs in structure.items():\n        dir_path = base / name\n        dir_path.mkdir(exist_ok=True)\n        print(f\"‚úì Created: {dir_path}\")\n        \n        if subdirs:\n            create_directory_structure(dir_path, subdirs)\n\ndef write_file(path, content):\n    \"\"\"Write content to a file.\"\"\"\n    file_path = Path(path)\n    file_path.parent.mkdir(parents=True, exist_ok=True)\n    file_path.write_text(content)\n    print(f\"‚úì Created: {file_path}\")\n\ndef create_init_file(directory, content=\"\"):\n    \"\"\"Create __init__.py file in directory.\"\"\"\n    init_path = Path(directory) / \"__init__.py\"\n    init_path.write_text(content)\n    print(f\"‚úì Created: {init_path}\")\n\nif __name__ == \"__main__\":\n    # Test the module\n    print(\"Testing file_utils module...\\n\")\n    \n    test_structure = {\n        'test_project': {\n            'src': {},\n            'tests': {}\n        }\n    }\n    \n    create_directory_structure('temp', test_structure)\n    print(\"\\n‚úì Module works correctly!\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 2: Package Templates Module",
              "content": "**Template modules** define project blueprints:\n- Each template is a separate module\n- Exports: requirements, folder structure, starter code\n- `get_template()` function returns complete configuration\n- Demonstrates module organization and reusability",
              "code": "# project_initializer/templates/web_template.py\n\"\"\"Templates for web development projects.\"\"\"\n\nREQUIREMENTS = \"\"\"\n# Web Development Dependencies\nflask>=3.0.0\nrequests>=2.31.0\npython-dotenv>=1.0.0\npytest>=7.4.0\n\"\"\".strip()\n\nSTRUCTURE = {\n    'app': {\n        'routes': {},\n        'models': {},\n        'static': {\n            'css': {},\n            'js': {}\n        },\n        'templates': {}\n    },\n    'tests': {}\n}\n\nMAIN_CODE = '''\nfrom flask import Flask, jsonify\nfrom dotenv import load_dotenv\nimport os\n\nload_dotenv()\n\napp = Flask(__name__)\napp.config['SECRET_KEY'] = os.getenv('SECRET_KEY', 'dev-key-change-this')\n\n@app.route('/')\ndef home():\n    return jsonify({\n        'message': 'Welcome to your Flask API!',\n        'status': 'running'\n    })\n\n@app.route('/api/health')\ndef health():\n    return jsonify({'status': 'healthy'})\n\nif __name__ == '__main__':\n    app.run(debug=True, port=5000)\n'''\n\nENV_TEMPLATE = \"\"\"\n# Environment Variables\nSECRET_KEY=your-secret-key-here\nDATABASE_URL=sqlite:///app.db\nDEBUG=True\n\"\"\".strip()\n\ndef get_template():\n    \"\"\"Return complete web project template.\"\"\"\n    return {\n        'requirements': REQUIREMENTS,\n        'structure': STRUCTURE,\n        'main_code': MAIN_CODE,\n        'env': ENV_TEMPLATE,\n        'description': 'Flask web application with API endpoints'\n    }\n\n# project_initializer/templates/data_template.py\n\"\"\"Templates for data science projects.\"\"\"\n\nREQUIREMENTS = \"\"\"\n# Data Science Dependencies\npandas>=2.0.0\nnumpy>=1.24.0\nmatplotlib>=3.7.0\nseaborn>=0.12.0\njupyter>=1.0.0\npytest>=7.4.0\n\"\"\".strip()\n\nSTRUCTURE = {\n    'data': {\n        'raw': {},\n        'processed': {}\n    },\n    'notebooks': {},\n    'src': {\n        'analysis': {},\n        'visualization': {}\n    },\n    'tests': {}\n}\n\nMAIN_CODE = '''\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom pathlib import Path\n\ndef load_data(filepath):\n    \"\"\"Load data from CSV file.\"\"\"\n    return pd.read_csv(filepath)\n\ndef analyze_data(df):\n    \"\"\"Perform basic data analysis.\"\"\"\n    print(\"Dataset Info:\")\n    print(f\"Rows: {len(df)}\")\n    print(f\"Columns: {len(df.columns)}\")\n    print(\"\\nSummary Statistics:\")\n    print(df.describe())\n    return df.describe()\n\ndef visualize_data(df, column):\n    \"\"\"Create visualization for a column.\"\"\"\n    plt.figure(figsize=(10, 6))\n    df[column].hist(bins=30)\n    plt.title(f'Distribution of {column}')\n    plt.xlabel(column)\n    plt.ylabel('Frequency')\n    plt.savefig(f'output_{column}.png')\n    print(f\"‚úì Saved visualization: output_{column}.png\")\n\nif __name__ == '__main__':\n    print(\"Data Analysis Pipeline Ready!\")\n    print(\"Place your CSV files in the data/raw/ directory\")\n'''\n\ndef get_template():\n    \"\"\"Return complete data science project template.\"\"\"\n    return {\n        'requirements': REQUIREMENTS,\n        'structure': STRUCTURE,\n        'main_code': MAIN_CODE,\n        'description': 'Data science project with pandas and visualization'\n    }",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 3: Package Initialization Files",
              "content": "**__init__.py files** define package interfaces:\n- Main `__init__.py`: Package metadata, version, convenient imports\n- `utils/__init__.py`: Exports utility functions\n- `templates/__init__.py`: Template registry and getter functions\n- `__all__` controls what's exported\n- Runs initialization code when package is imported",
              "code": "# project_initializer/__init__.py\n\"\"\"Python Project Initializer Package.\n\nA tool for quickly setting up new Python projects with proper structure,\ndependencies, and example code.\n\"\"\"\n\n__version__ = '1.0.0'\n__author__ = 'Your Name'\n\n# Import main functionality\nfrom .utils.file_utils import create_directory_structure, write_file\nfrom .templates import web_template, data_template\n\n# Define what gets imported with 'from project_initializer import *'\n__all__ = [\n    'create_directory_structure',\n    'write_file',\n    'web_template',\n    'data_template',\n    'create_project'\n]\n\ndef create_project(project_name, project_type='general'):\n    \"\"\"Convenience function to create a new project.\"\"\"\n    print(f\"Creating {project_type} project: {project_name}\")\n    # Implementation in main.py\n\nprint(f\"Project Initializer v{__version__} loaded\")\n\n# project_initializer/utils/__init__.py\n\"\"\"Utility modules for project initialization.\"\"\"\n\nfrom .file_utils import (\n    create_directory_structure,\n    write_file,\n    create_init_file\n)\n\n__all__ = ['create_directory_structure', 'write_file', 'create_init_file']\n\n# project_initializer/templates/__init__.py\n\"\"\"Project templates for different types of Python projects.\"\"\"\n\nfrom . import web_template\nfrom . import data_template\n\nTEMPLATES = {\n    'web': web_template,\n    'data': data_template\n}\n\ndef get_available_templates():\n    \"\"\"Return list of available project templates.\"\"\"\n    return list(TEMPLATES.keys())\n\ndef get_template(template_type):\n    \"\"\"Get template configuration by type.\"\"\"\n    if template_type in TEMPLATES:\n        return TEMPLATES[template_type].get_template()\n    raise ValueError(f\"Unknown template: {template_type}\")\n\n__all__ = ['TEMPLATES', 'get_available_templates', 'get_template']",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 4: Main Application",
              "content": "**Main application** ties everything together:\n- Imports from our custom packages\n- Uses template modules to get configurations\n- Uses file_utils to create structure\n- Demonstrates practical module usage\n- CLI interface with `if __name__ == '__main__':`\n- Can be run as script or imported as module",
              "code": "# project_initializer/main.py\n\"\"\"Main entry point for project initializer.\"\"\"\n\nfrom pathlib import Path\nimport sys\n\n# Import from our package\nfrom utils.file_utils import create_directory_structure, write_file, create_init_file\nfrom templates import get_available_templates, get_template\n\ndef create_project(project_name, template_type='web'):\n    \"\"\"Create a new Python project from template.\n    \n    Args:\n        project_name: Name of the project\n        template_type: Type of template ('web' or 'data')\n    \"\"\"\n    print(f\"\\n{'='*50}\")\n    print(f\"Creating {template_type.upper()} project: {project_name}\")\n    print('='*50 + '\\n')\n    \n    # Get template configuration\n    try:\n        template = get_template(template_type)\n    except ValueError as e:\n        print(f\"Error: {e}\")\n        print(f\"Available templates: {', '.join(get_available_templates())}\")\n        return\n    \n    # Create base directory\n    project_path = Path(project_name)\n    if project_path.exists():\n        print(f\"Error: Directory '{project_name}' already exists!\")\n        return\n    \n    project_path.mkdir()\n    print(f\"‚úì Created project directory: {project_name}\\n\")\n    \n    # Create folder structure\n    print(\"Creating directory structure...\")\n    create_directory_structure(project_path, template['structure'])\n    \n    # Create __init__.py files for Python packages\n    print(\"\\nCreating package files...\")\n    for folder in ['app', 'src', 'tests'] if template_type == 'web' else ['src', 'tests']:\n        folder_path = project_path / folder\n        if folder_path.exists():\n            create_init_file(folder_path)\n    \n    # Write main application file\n    print(\"\\nCreating main application...\")\n    main_file = project_path / ('app.py' if template_type == 'web' else 'main.py')\n    write_file(main_file, template['main_code'])\n    \n    # Write requirements.txt\n    print(\"\\nCreating requirements.txt...\")\n    write_file(project_path / 'requirements.txt', template['requirements'])\n    \n    # Write .env file for web projects\n    if template_type == 'web' and 'env' in template:\n        print(\"Creating .env template...\")\n        write_file(project_path / '.env.example', template['env'])\n    \n    # Create README\n    readme_content = f\"\"\"# {project_name}\n\n{template['description']}\n\n## Setup\n\n1. Create virtual environment:\n   ```bash\n   python -m venv venv\n   source venv/bin/activate  # On Windows: venv\\\\Scripts\\\\activate\n   ```\n\n2. Install dependencies:\n   ```bash\n   pip install -r requirements.txt\n   ```\n\n3. Run the application:\n   ```bash\n   python {'app.py' if template_type == 'web' else 'main.py'}\n   ```\n\n## Project Structure\n\nGenerated using Python Project Initializer.\n\"\"\"\n    write_file(project_path / 'README.md', readme_content)\n    \n    # Success message\n    print(\"\\n\" + \"=\"*50)\n    print(\"‚úì Project created successfully!\")\n    print(\"=\"*50)\n    print(f\"\\nNext steps:\")\n    print(f\"1. cd {project_name}\")\n    print(f\"2. python -m venv venv\")\n    print(f\"3. source venv/bin/activate\")\n    print(f\"4. pip install -r requirements.txt\")\n    print(f\"5. python {'app.py' if template_type == 'web' else 'main.py'}\")\n    print(\"\\nHappy coding! üöÄ\\n\")\n\ndef main():\n    \"\"\"Main CLI interface.\"\"\"\n    print(\"\\n\" + \"=\"*50)\n    print(\"Python Project Initializer\")\n    print(\"=\"*50)\n    \n    # Get project name\n    if len(sys.argv) > 1:\n        project_name = sys.argv[1]\n    else:\n        project_name = input(\"\\nProject name: \").strip()\n    \n    if not project_name:\n        print(\"Error: Project name required!\")\n        return\n    \n    # Get project type\n    print(f\"\\nAvailable templates: {', '.join(get_available_templates())}\")\n    if len(sys.argv) > 2:\n        template_type = sys.argv[2]\n    else:\n        template_type = input(\"Template type (web/data) [web]: \").strip() or 'web'\n    \n    # Create the project\n    create_project(project_name, template_type)\n\nif __name__ == '__main__':\n    main()",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "How It All Works Together",
              "content": "**Module Organization:**\n\n```\nproject_initializer/          # Main package\n‚îú‚îÄ‚îÄ __init__.py              # Package interface, metadata\n‚îú‚îÄ‚îÄ main.py                  # Entry point (can run standalone)\n‚îú‚îÄ‚îÄ utils/                   # Utilities package\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py         # Exports utility functions\n‚îÇ   ‚îî‚îÄ‚îÄ file_utils.py       # File operations module\n‚îî‚îÄ‚îÄ templates/               # Templates package\n    ‚îú‚îÄ‚îÄ __init__.py         # Template registry\n    ‚îú‚îÄ‚îÄ web_template.py     # Web project template\n    ‚îî‚îÄ‚îÄ data_template.py    # Data science template\n```\n\n**Import Chain:**\n1. `main.py` imports from `utils` and `templates`\n2. `utils/__init__.py` imports from `file_utils.py`\n3. `templates/__init__.py` imports from template modules\n4. Each `__init__.py` exposes clean API via `__all__`\n\n**Running the Project:**\n```bash\n# As a script\npython project_initializer/main.py my_project web\n\n# Or import as package\npython -c \"from project_initializer import create_project; create_project('test', 'data')\"\n```\n\n**Key Concepts Demonstrated:**\n- ‚úì Package structure with `__init__.py`\n- ‚úì Relative imports within package\n- ‚úì Module reusability\n- ‚úì `if __name__ == '__main__':` pattern\n- ‚úì Dependency management (requirements.txt)\n- ‚úì Virtual environment workflow"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Hardcoding Paths in Project Templates**\n```python\n# WRONG - Paths won't work on other systems\nPROJECT_DIR = \"C:/Users/me/projects/new_project\"\n\n# CORRECT - Use relative paths or user input\nfrom pathlib import Path\nPROJECT_DIR = Path.cwd() / project_name\n```\n\n**2. Not Handling Existing Files**\n```python\n# WRONG - Overwrites without asking\ndef create_project(name):\n    Path(name).mkdir()  # FileExistsError if exists!\n    (Path(name) / \"main.py\").write_text(template)  # Overwrites!\n\n# CORRECT - Check and ask before overwriting\ndef create_project(name):\n    path = Path(name)\n    if path.exists():\n        response = input(f\"{name} exists. Overwrite? (y/n): \")\n        if response.lower() != 'y':\n            return\n    path.mkdir(exist_ok=True)\n```\n\n**3. Forgetting Cross-Platform Compatibility**\n```python\n# WRONG - Unix-only commands in templates\nTEMPLATE = '''#!/bin/bash\nchmod +x run.py\n./run.py\n'''  # Fails on Windows!\n\n# CORRECT - Use Python for cross-platform operations\nTEMPLATE = '''#!/usr/bin/env python3\nimport subprocess\nimport sys\nsubprocess.run([sys.executable, \"run.py\"])\n'''\n```\n\n**4. Not Validating User Input**\n```python\n# WRONG - Using user input directly in paths\nproject_name = input(\"Project name: \")\nPath(project_name).mkdir()  # \"../../../etc\" could be dangerous!\n\n# CORRECT - Validate and sanitize input\nimport re\nproject_name = input(\"Project name: \")\nif not re.match(r'^[a-zA-Z][a-zA-Z0-9_-]*$', project_name):\n    print(\"Invalid name. Use letters, numbers, -, _ only\")\n    sys.exit(1)\n```\n\n**5. Not Including Essential Files in Templates**\n```python\n# WRONG - Missing important files\ndef create_project(name):\n    Path(name).mkdir()\n    (Path(name) / \"main.py\").write_text(\"\")  # No .gitignore, README, etc!\n\n# CORRECT - Include all essential files\ndef create_project(name):\n    base = Path(name)\n    base.mkdir()\n    (base / \"main.py\").write_text(main_template)\n    (base / \".gitignore\").write_text(gitignore_template)\n    (base / \"README.md\").write_text(readme_template)\n    (base / \"pyproject.toml\").write_text(pyproject_template)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Packages = directories with __init__.py** - Organize related modules together\n- **__init__.py controls package interface** - Use __all__ to define public API\n- **Modules are reusable** - Write once, import anywhere in your package\n- **if __name__ == '__main__':' is essential** - Test modules independently\n- **requirements.txt manages dependencies** - Document what packages your project needs\n- **Virtual environments isolate projects** - Each project gets its own package versions\n- **Proper structure scales** - Start organized, stay organized as project grows\n- **Import from packages with dot notation** - from .module import function for relative imports"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-10-lesson-07-challenge-1",
              "title": "Extend the Project Initializer",
              "description": "Add a new project template to the initializer. Create a 'cli' template for command-line applications that includes argparse setup, a main entry point, and appropriate project structure.",
              "instructions": "Create a new template module called cli_template.py that:\n1. Defines REQUIREMENTS with click or argparse\n2. Defines STRUCTURE with src/, tests/, and docs/ directories\n3. Defines MAIN_CODE with a CLI skeleton using argparse\n4. Implements get_template() to return the configuration\n5. Register your template in templates/__init__.py",
              "starterCode": "# cli_template.py - Create a CLI project template\n\"\"\"Template for command-line application projects.\"\"\"\n\n# TODO: Define REQUIREMENTS with CLI dependencies\nREQUIREMENTS = \"\"\"\n# CLI Dependencies\n# Add appropriate packages here\n\"\"\".strip()\n\n# TODO: Define project STRUCTURE\nSTRUCTURE = {\n    # Add your directory structure here\n}\n\n# TODO: Define MAIN_CODE with argparse CLI skeleton\nMAIN_CODE = '''\n# Your CLI application code here\n'''\n\ndef get_template():\n    \"\"\"Return complete CLI project template.\"\"\"\n    # TODO: Return template configuration dict\n    pass\n\n# Test your template\nif __name__ == '__main__':\n    template = get_template()\n    print(f\"Template: {template['description']}\")\n    print(f\"Requirements:\\n{template['requirements']}\")",
              "solution": "# cli_template.py - CLI project template\n\"\"\"Template for command-line application projects.\"\"\"\n\nREQUIREMENTS = \"\"\"\n# CLI Dependencies\nclick>=8.1.0\nrich>=13.0.0\npytest>=7.4.0\n\"\"\".strip()\n\nSTRUCTURE = {\n    'src': {\n        'commands': {},\n        'utils': {}\n    },\n    'tests': {},\n    'docs': {}\n}\n\nMAIN_CODE = '''\nimport argparse\nimport sys\n\ndef main():\n    parser = argparse.ArgumentParser(\n        description='My CLI Application',\n        formatter_class=argparse.RawDescriptionHelpFormatter\n    )\n    \n    parser.add_argument('--version', action='version', version='1.0.0')\n    parser.add_argument('-v', '--verbose', action='store_true', help='Enable verbose output')\n    \n    subparsers = parser.add_subparsers(dest='command', help='Available commands')\n    \n    # Add 'run' subcommand\n    run_parser = subparsers.add_parser('run', help='Run the application')\n    run_parser.add_argument('name', help='Name to greet')\n    \n    args = parser.parse_args()\n    \n    if args.command == 'run':\n        print(f\"Hello, {args.name}!\")\n    else:\n        parser.print_help()\n\nif __name__ == '__main__':\n    main()\n'''\n\ndef get_template():\n    \"\"\"Return complete CLI project template.\"\"\"\n    return {\n        'requirements': REQUIREMENTS,\n        'structure': STRUCTURE,\n        'main_code': MAIN_CODE,\n        'description': 'Command-line application with argparse'\n    }\n\nif __name__ == '__main__':\n    template = get_template()\n    print(f\"Template: {template['description']}\")\n    print(f\"Requirements:\\n{template['requirements']}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Template module runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Follow the pattern from web_template.py and data_template.py. Your get_template() function should return a dictionary with 'requirements', 'structure', 'main_code', and 'description' keys."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to return a dictionary from get_template()",
                  "consequence": "TypeError when the main application tries to access template keys",
                  "correction": "Return a dict with all required keys: requirements, structure, main_code, description"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-11",
      "title": "Classes & Objects (OOP)",
      "description": "Object-oriented programming fundamentals",
      "difficulty": "advanced",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-11-lesson-01",
          "title": "Introduction to Classes and Objects",
          "moduleId": "module-11",
          "order": 1,
          "estimatedMinutes": 25,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Blueprint vs. House",
              "content": "**Think of it like houses:**\n\n- **Class** = Blueprint üìã\n  - The design/template\n  - Defines what a house should have (rooms, doors, windows)\n  - You can't live in a blueprint!\n\n- **Object** = Actual House üè†\n  - Built from the blueprint\n  - Each house can have different colors, sizes, furniture\n  - You can have many houses from one blueprint\n\n**Example:**\n- **Class: Dog** (blueprint)\n  - All dogs have: name, age, breed\n  - All dogs can: bark, eat, sleep\n\n- **Objects: Actual dogs** (instances)\n  - Buddy (3 years old, Golden Retriever)\n  - Max (5 years old, Beagle)\n  - Luna (2 years old, Husky)\n\n**Why use classes?**\n1. **Organization** - Group related data and functions\n2. **Reusability** - Create multiple objects from one class\n3. **Modeling** - Represent real-world things in code\n4. **Maintenance** - Change blueprint, all objects benefit"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Your First Class",
              "content": "**Key components:**\n- `class Dog:` - Defines the class (blueprint)\n- `__init__()` - Constructor, runs when creating object\n- `self` - Refers to the current object instance\n- `self.name` - Instance attribute (unique to each object)\n- Methods - Functions inside a class\n- `Dog(...)` - Creates a new object (instance)\n\n**The `self` parameter:**\n- First parameter of every instance method\n- Python automatically passes it\n- Refers to the specific object calling the method",
              "code": "# Define a class (blueprint)\nclass Dog:\n    # Constructor - runs when creating a new dog\n    def __init__(self, name, age, breed):\n        # Instance attributes (each dog has their own)\n        self.name = name\n        self.age = age\n        self.breed = breed\n    \n    # Instance method (behavior)\n    def bark(self):\n        return f\"{self.name} says: Woof! Woof!\"\n    \n    def birthday(self):\n        self.age += 1\n        return f\"Happy birthday {self.name}! Now {self.age} years old.\"\n    \n    def info(self):\n        return f\"{self.name} is a {self.age}-year-old {self.breed}\"\n\n# Create objects (actual dogs)\ndog1 = Dog(\"Buddy\", 3, \"Golden Retriever\")\ndog2 = Dog(\"Max\", 5, \"Beagle\")\ndog3 = Dog(\"Luna\", 2, \"Husky\")\n\nprint(\"=== Dog Objects ===\")\nprint(dog1.info())\nprint(dog2.info())\nprint(dog3.info())\n\nprint(\"\\n=== Dogs Barking ===\")\nprint(dog1.bark())\nprint(dog2.bark())\nprint(dog3.bark())\n\nprint(\"\\n=== Birthday Time ===\")\nprint(dog1.birthday())\nprint(f\"Updated info: {dog1.info()}\")\n\n# Accessing attributes\nprint(\"\\n=== Accessing Attributes ===\")\nprint(f\"Dog 2's name: {dog2.name}\")\nprint(f\"Dog 3's age: {dog3.age}\")\n\n# Modifying attributes\ndog2.breed = \"Beagle Mix\"\nprint(f\"Updated: {dog2.info()}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Class definition:**\n```python\nclass ClassName:\n    def __init__(self, parameters):\n        self.attribute = value\n    \n    def method_name(self):\n        # do something\n        return result\n```\n\n**Creating objects:**\n```python\nobj = ClassName(arguments)\n```\n\n**Key terms:**\n- **Class** - The blueprint/template\n- **Object/Instance** - Specific creation from the class\n- **`__init__()`** - Constructor method (initializer)\n- **`self`** - Reference to the current instance\n- **Attribute** - Variable belonging to object (self.name)\n- **Method** - Function belonging to class\n\n**Naming conventions:**\n- Classes: `CapitalCase` (Dog, BankAccount)\n- Methods: `snake_case` (bark, get_balance)\n- Attributes: `snake_case` (name, account_number)"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting self Parameter in Methods**\n```python\n# WRONG - Missing self parameter\nclass Dog:\n    def bark():  # Missing self!\n        print(\"Woof!\")\n\nd = Dog()\nd.bark()  # TypeError: bark() takes 0 arguments but 1 was given\n\n# CORRECT - Include self as first parameter\nclass Dog:\n    def bark(self):\n        print(\"Woof!\")\n```\n\n**2. Not Using self to Access Instance Attributes**\n```python\n# WRONG - Accessing variable without self\nclass Person:\n    def __init__(self, name):\n        name = name  # Assigns to local variable, not attribute!\n\n    def greet(self):\n        print(name)  # NameError: name not defined\n\n# CORRECT - Use self for instance attributes\nclass Person:\n    def __init__(self, name):\n        self.name = name  # Stores as instance attribute\n\n    def greet(self):\n        print(self.name)  # Accesses instance attribute\n```\n\n**3. Confusing Class and Instance**\n```python\n# WRONG - Calling method on class instead of instance\nclass Calculator:\n    def add(self, a, b):\n        return a + b\n\nresult = Calculator.add(1, 2)  # TypeError!\n\n# CORRECT - Create instance first, then call method\nclass Calculator:\n    def add(self, a, b):\n        return a + b\n\ncalc = Calculator()  # Create instance\nresult = calc.add(1, 2)  # Call method on instance\n```\n\n**4. Mutable Default Argument in __init__**\n```python\n# WRONG - Mutable default shared between instances!\nclass Team:\n    def __init__(self, members=[]):  # Shared list!\n        self.members = members\n\nt1 = Team()\nt1.members.append(\"Alice\")\nt2 = Team()\nprint(t2.members)  # ['Alice'] - Unexpected!\n\n# CORRECT - Use None and create new list\nclass Team:\n    def __init__(self, members=None):\n        self.members = members if members else []\n```\n\n**5. Printing Object Without __str__**\n```python\n# WRONG - No readable string representation\nclass Product:\n    def __init__(self, name, price):\n        self.name = name\n        self.price = price\n\np = Product(\"Apple\", 1.50)\nprint(p)  # <__main__.Product object at 0x...> - Useless!\n\n# CORRECT - Define __str__ for readable output\nclass Product:\n    def __init__(self, name, price):\n        self.name = name\n        self.price = price\n\n    def __str__(self):\n        return f\"{self.name}: ${self.price}\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Class = Blueprint, Object = Instance** - One class, many objects\n- **__init__() is the constructor** - Runs when creating new object\n- **self refers to the current instance** - Must be first parameter\n- **Attributes store data** (self.name) - Each object has its own\n- **Methods define behavior** - Functions inside classes\n- **Create objects with ClassName(args)** - Calls __init__()\n- **Access with dot notation** - obj.attribute, obj.method()\n- **Classes organize related code** - Data + behavior together"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-11-lesson-01-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a BankAccount class with:\n- Attributes: account_holder, balance\n- Methods: deposit, withdraw, get_balance\n- Create two account objects and perform transactions",
              "instructions": "Create a BankAccount class with:\n- Attributes: account_holder, balance\n- Methods: deposit, withdraw, get_balance\n- Create two account objects and perform transactions",
              "starterCode": "class BankAccount:\n    def __init__(self, account_holder, initial_balance=0):\n        # TODO: Set account_holder and balance attributes\n        pass\n    \n    def deposit(self, amount):\n        # TODO: Add amount to balance\n        pass\n    \n    def withdraw(self, amount):\n        # TODO: Subtract amount if sufficient balance\n        # Return True if successful, False if insufficient funds\n        pass\n    \n    def get_balance(self):\n        # TODO: Return current balance\n        pass\n\n# TODO: Create two accounts\n# TODO: Perform deposits and withdrawals\n# TODO: Print balances",
              "solution": "# BankAccount Class\n# This solution demonstrates basic OOP concepts\n\nclass BankAccount:\n    \"\"\"A simple bank account class.\"\"\"\n    \n    def __init__(self, account_holder, initial_balance=0):\n        \"\"\"Initialize account with holder name and optional balance.\"\"\"\n        self.account_holder = account_holder\n        self.balance = initial_balance\n    \n    def deposit(self, amount):\n        \"\"\"Add money to the account.\"\"\"\n        if amount > 0:\n            self.balance += amount\n            print(f\"Deposited ${amount:.2f}. New balance: ${self.balance:.2f}\")\n        else:\n            print(\"Deposit amount must be positive\")\n    \n    def withdraw(self, amount):\n        \"\"\"Withdraw money if sufficient balance.\"\"\"\n        if amount <= 0:\n            print(\"Withdrawal amount must be positive\")\n            return False\n        if amount > self.balance:\n            print(f\"Insufficient funds. Available: ${self.balance:.2f}\")\n            return False\n        self.balance -= amount\n        print(f\"Withdrew ${amount:.2f}. New balance: ${self.balance:.2f}\")\n        return True\n    \n    def get_balance(self):\n        \"\"\"Return current balance.\"\"\"\n        return self.balance\n\n# Create two accounts\nalice_account = BankAccount(\"Alice\", 1000)\nbob_account = BankAccount(\"Bob\", 500)\n\n# Perform transactions\nprint(f\"=== {alice_account.account_holder}'s Account ===\")\nalice_account.deposit(200)\nalice_account.withdraw(150)\n\nprint(f\"\\n=== {bob_account.account_holder}'s Account ===\")\nbob_account.deposit(300)\nbob_account.withdraw(1000)  # Should fail\n\n# Print final balances\nprint(\"\\n=== Final Balances ===\")\nprint(f\"{alice_account.account_holder}: ${alice_account.get_balance():.2f}\")\nprint(f\"{bob_account.account_holder}: ${bob_account.get_balance():.2f}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember to use self.attribute_name to access instance attributes. Check if balance is sufficient before withdrawing."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-11-lesson-02",
          "title": "Class Attributes and Methods",
          "moduleId": "module-11",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Shared vs. Personal",
              "content": "**Think of a car dealership:**\n\n**Instance Attributes** (Personal)\n- Each car has its own: color, mileage, VIN number\n- Different for every car\n- Defined in `__init__` with `self.attribute`\n\n**Class Attributes** (Shared)\n- All cars share: manufacturer name, warranty period\n- Same for every car\n- Defined directly in class, outside methods\n\n**Example:**\n```\nInstance (Personal):           Class (Shared):\n- My car is red               - All are Toyota\n- My car has 15k miles        - All have 3-year warranty\n- My VIN: ABC123              - All made in 2024\n```\n\n**Types of methods:**\n\n1. **Instance methods** (most common)\n   - Work with specific object (self)\n   - Can access instance AND class attributes\n\n2. **Class methods** (@classmethod)\n   - Work with the class itself (cls)\n   - Often used for alternative constructors\n\n3. **Static methods** (@staticmethod)\n   - Don't access instance or class\n   - Utility functions related to the class"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Instance vs Class Attributes",
              "content": "**Key differences:**\n\n**Instance Attributes:**\n- Defined with `self.attribute` in `__init__`\n- Unique to each object\n- Access with `self.attribute` or `obj.attribute`\n\n**Class Attributes:**\n- Defined directly in class body\n- Shared by all instances\n- Access with `ClassName.attribute` or `cls.attribute`\n\n**Method Types:**\n- `def method(self):` - Instance method\n- `@classmethod def method(cls):` - Class method\n- `@staticmethod def method():` - Static method",
              "code": "class Car:\n    # Class attributes (shared by all cars)\n    manufacturer = \"Toyota\"\n    warranty_years = 3\n    total_cars = 0  # Track how many cars created\n    \n    def __init__(self, model, color, price):\n        # Instance attributes (unique to each car)\n        self.model = model\n        self.color = color\n        self.price = price\n        self.mileage = 0\n        \n        # Increment class attribute\n        Car.total_cars += 1\n    \n    # Instance method (works with specific car)\n    def drive(self, miles):\n        self.mileage += miles\n        return f\"{self.color} {self.model} drove {miles} miles. Total: {self.mileage}\"\n    \n    def info(self):\n        return f\"{Car.manufacturer} {self.model} ({self.color}) - ${self.price} - {self.mileage} miles\"\n    \n    # Class method (works with the class)\n    @classmethod\n    def from_string(cls, car_string):\n        \"\"\"Alternative constructor from string 'Model,Color,Price'\"\"\"\n        model, color, price = car_string.split(',')\n        return cls(model, color, float(price))\n    \n    @classmethod\n    def get_total_cars(cls):\n        return f\"Total {cls.manufacturer} cars created: {cls.total_cars}\"\n    \n    # Static method (utility function)\n    @staticmethod\n    def is_luxury(price):\n        \"\"\"Check if price indicates luxury car\"\"\"\n        return price > 50000\n\n# Create cars normally\nprint(\"=== Creating Cars ===\")\ncar1 = Car(\"Camry\", \"Blue\", 28000)\ncar2 = Car(\"Corolla\", \"Red\", 23000)\ncar3 = Car(\"Avalon\", \"Black\", 42000)\n\nprint(car1.info())\nprint(car2.info())\nprint(car3.info())\n\nprint(\"\\n=== Class Attributes (Shared) ===\")\nprint(f\"Manufacturer: {Car.manufacturer}\")\nprint(f\"Warranty: {Car.warranty_years} years\")\nprint(Car.get_total_cars())\n\nprint(\"\\n=== Instance Attributes (Unique) ===\")\nprint(f\"Car 1 color: {car1.color}\")\nprint(f\"Car 2 model: {car2.model}\")\nprint(f\"Car 3 price: ${car3.price}\")\n\nprint(\"\\n=== Using Instance Method ===\")\nprint(car1.drive(100))\nprint(car1.drive(50))\nprint(car2.drive(200))\n\nprint(\"\\n=== Using Class Method (Alternative Constructor) ===\")\ncar4 = Car.from_string(\"RAV4,Silver,32000\")\nprint(car4.info())\nprint(Car.get_total_cars())\n\nprint(\"\\n=== Using Static Method ===\")\nprint(f\"Is $28,000 luxury? {Car.is_luxury(28000)}\")\nprint(f\"Is $42,000 luxury? {Car.is_luxury(42000)}\")\nprint(f\"Is car3 luxury? {Car.is_luxury(car3.price)}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Instance vs Class Attributes:**\n```python\nclass MyClass:\n    # Class attribute (shared)\n    class_var = \"shared by all\"\n    \n    def __init__(self):\n        # Instance attribute (unique)\n        self.instance_var = \"unique to each\"\n\nobj = MyClass()\nprint(obj.instance_var)  # Unique\nprint(MyClass.class_var) # Shared\n```\n\n**Method decorators:**\n```python\nclass MyClass:\n    # Instance method (most common)\n    def instance_method(self):\n        return f\"Instance: {self.attribute}\"\n    \n    # Class method\n    @classmethod\n    def class_method(cls):\n        return f\"Class: {cls.class_attribute}\"\n    \n    # Static method\n    @staticmethod\n    def static_method(arg):\n        return f\"Static: {arg}\"\n```\n\n**When to use each:**\n- **Instance method**: When you need object's data (self)\n- **Class method**: Alternative constructors, class-level operations\n- **Static method**: Utility functions that don't need instance/class data"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Confusing Class vs Instance Attributes**\n```python\n# WRONG - Modifying class attribute via instance\nclass Counter:\n    count = 0  # Class attribute\n\nc1 = Counter()\nc1.count = 5  # Creates INSTANCE attribute, doesn't change class!\nc2 = Counter()\nprint(c2.count)  # Still 0!\n\n# CORRECT - Use class name to modify class attribute\nclass Counter:\n    count = 0\n\nCounter.count = 5  # Modifies class attribute\nprint(Counter.count)  # 5\n```\n\n**2. Mutable Class Attribute Shared Unexpectedly**\n```python\n# WRONG - List as class attribute is shared!\nclass Team:\n    members = []  # Shared between all instances!\n\nt1 = Team()\nt1.members.append(\"Alice\")\nt2 = Team()\nprint(t2.members)  # ['Alice'] - Wrong!\n\n# CORRECT - Initialize mutable attributes in __init__\nclass Team:\n    def __init__(self):\n        self.members = []  # Each instance gets own list\n```\n\n**3. Forgetting cls in Class Methods**\n```python\n# WRONG - Using self in class method\nclass Person:\n    count = 0\n\n    @classmethod\n    def get_count(self):  # Should be cls!\n        return Person.count\n\n# CORRECT - Use cls as first parameter\nclass Person:\n    count = 0\n\n    @classmethod\n    def get_count(cls):\n        return cls.count\n```\n\n**4. Using self in Static Methods**\n```python\n# WRONG - Static methods don't have self\nclass Math:\n    @staticmethod\n    def add(self, a, b):  # self not available!\n        return a + b\n\n# CORRECT - Static methods have no self or cls\nclass Math:\n    @staticmethod\n    def add(a, b):\n        return a + b\n```\n\n**5. Not Using @classmethod for Alternative Constructors**\n```python\n# WRONG - Regular method for construction\nclass Date:\n    def __init__(self, year, month, day):\n        self.year = year\n        self.month = month\n        self.day = day\n\n    def from_string(self, s):  # Returns wrong class in subclasses!\n        parts = s.split('-')\n        return Date(*parts)\n\n# CORRECT - Use classmethod for alternative constructors\nclass Date:\n    def __init__(self, year, month, day):\n        self.year = year\n        self.month = month\n        self.day = day\n\n    @classmethod\n    def from_string(cls, s):\n        parts = s.split('-')\n        return cls(*parts)  # Works with subclasses!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Instance attributes (self.x)** - Unique to each object\n- **Class attributes** - Shared by all instances\n- **Access class attributes with ClassName.attribute** - Not self\n- **Instance methods** - Use self, work with object data\n- **Class methods (@classmethod)** - Use cls, often alternative constructors\n- **Static methods (@staticmethod)** - No self/cls, utility functions\n- **cls parameter** - Refers to the class (like self for classes)\n- **Use class attributes for constants** - Values same for all instances"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-11-lesson-02-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create an Employee class with:\n- Class attributes: company_name, employee_count\n- Instance attributes: name, position, salary\n- Instance method: give_raise(amount)\n- Class method: from_dict(employee_dict)\n- Static method: is_valid_salary(amount)",
              "instructions": "Create an Employee class with:\n- Class attributes: company_name, employee_count\n- Instance attributes: name, position, salary\n- Instance method: give_raise(amount)\n- Class method: from_dict(employee_dict)\n- Static method: is_valid_salary(amount)",
              "starterCode": "class Employee:\n    # TODO: Add class attributes\n    \n    def __init__(self, name, position, salary):\n        # TODO: Set instance attributes\n        # TODO: Increment employee_count\n        pass\n    \n    def give_raise(self, amount):\n        # TODO: Increase salary\n        pass\n    \n    @classmethod\n    def from_dict(cls, emp_dict):\n        # TODO: Create employee from dictionary\n        # Example: {'name': 'John', 'position': 'Dev', 'salary': 75000}\n        pass\n    \n    @staticmethod\n    def is_valid_salary(amount):\n        # TODO: Return True if salary between 20k and 500k\n        pass\n\n# TODO: Create employees and test methods",
              "solution": "# Employee Class with Class/Static Methods\n# This solution demonstrates different types of methods\n\nclass Employee:\n    \"\"\"Employee class with class and static methods.\"\"\"\n    \n    # Class attributes - shared by all instances\n    company_name = \"TechCorp\"\n    employee_count = 0\n    \n    def __init__(self, name, position, salary):\n        \"\"\"Initialize employee with name, position, and salary.\"\"\"\n        self.name = name\n        self.position = position\n        self.salary = salary\n        # Increment class-level counter\n        Employee.employee_count += 1\n    \n    def give_raise(self, amount):\n        \"\"\"Instance method: Give employee a raise.\"\"\"\n        if amount > 0:\n            self.salary += amount\n            print(f\"{self.name} received a ${amount:,.2f} raise!\")\n            print(f\"New salary: ${self.salary:,.2f}\")\n    \n    @classmethod\n    def from_dict(cls, emp_dict):\n        \"\"\"Class method: Create employee from dictionary.\"\"\"\n        return cls(\n            name=emp_dict['name'],\n            position=emp_dict['position'],\n            salary=emp_dict['salary']\n        )\n    \n    @staticmethod\n    def is_valid_salary(amount):\n        \"\"\"Static method: Check if salary is in valid range.\"\"\"\n        return 20000 <= amount <= 500000\n    \n    def __str__(self):\n        return f\"{self.name} - {self.position} (${self.salary:,.2f})\"\n\n# Test the Employee class\nprint(f\"=== {Employee.company_name} Employee System ===\")\n\n# Create employees\nemp1 = Employee(\"Alice\", \"Developer\", 75000)\nemp2 = Employee(\"Bob\", \"Manager\", 90000)\n\n# Create from dictionary (class method)\nemp_data = {'name': 'Carol', 'position': 'Designer', 'salary': 65000}\nemp3 = Employee.from_dict(emp_data)\n\n# Print all employees\nprint(f\"\\nTotal employees: {Employee.employee_count}\")\nfor emp in [emp1, emp2, emp3]:\n    print(f\"  - {emp}\")\n\n# Test give_raise\nprint(\"\\n--- Giving raises ---\")\nemp1.give_raise(5000)\n\n# Test static method\nprint(\"\\n--- Salary validation ---\")\ntest_salaries = [15000, 50000, 600000]\nfor sal in test_salaries:\n    valid = Employee.is_valid_salary(sal)\n    print(f\"${sal:,}: {'Valid' if valid else 'Invalid'}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use cls.attribute for class attributes in class methods. Static methods don't use cls or self."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-11-lesson-03",
          "title": "Inheritance",
          "moduleId": "module-11",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Family Tree",
              "content": "**Think of it like genetics:**\n\n**Parent Class (Base/Superclass)**\n- Defines common features\n- Example: Animal\n  - All animals: eat, sleep, breathe\n\n**Child Class (Derived/Subclass)**\n- Inherits from parent\n- Adds specific features\n- Examples:\n  - Dog (Animal) ‚Üí adds bark()\n  - Cat (Animal) ‚Üí adds meow()\n  - Bird (Animal) ‚Üí adds fly()\n\n**Inheritance Benefits:**\n\n1. **Code Reuse** ‚ôªÔ∏è\n   - Write common code once in parent\n   - All children automatically get it\n\n2. **Organization** üìÅ\n   - Clear hierarchy\n   - Related classes grouped\n\n3. **Extensibility** üîß\n   - Add new types easily\n   - Override behavior when needed\n\n4. **Polymorphism** üé≠\n   - Treat different types uniformly\n   - More on this in next lesson\n\n**Real-world examples:**\n- Vehicle ‚Üí Car, Motorcycle, Truck\n- Shape ‚Üí Circle, Square, Triangle\n- Employee ‚Üí Manager, Developer, Designer\n- Account ‚Üí CheckingAccount, SavingsAccount"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Basic Inheritance",
              "content": "**Key concepts:**\n\n**Inheritance syntax:**\n```python\nclass ChildClass(ParentClass):\n    ...\n```\n\n**super() function:**\n- Calls parent class methods\n- Common in `__init__` to initialize parent attributes\n- `super().__init__(args)` calls parent's constructor\n\n**Method overriding:**\n- Child can replace parent's method\n- Same name, different implementation\n- Dog overrides Animal's `info()` method\n\n**Inherited features:**\n- Dog, Cat, Bird all inherit `eat()` and `sleep()`\n- No need to rewrite common functionality",
              "code": "# Parent class (base class)\nclass Animal:\n    def __init__(self, name, age):\n        self.name = name\n        self.age = age\n        print(f\"Animal created: {name}\")\n    \n    def eat(self):\n        return f\"{self.name} is eating\"\n    \n    def sleep(self):\n        return f\"{self.name} is sleeping\"\n    \n    def info(self):\n        return f\"{self.name} is {self.age} years old\"\n\n# Child class (derived class)\nclass Dog(Animal):  # Inherits from Animal\n    def __init__(self, name, age, breed):\n        # Call parent's __init__\n        super().__init__(name, age)\n        # Add dog-specific attribute\n        self.breed = breed\n    \n    def bark(self):\n        return f\"{self.name} says: Woof! Woof!\"\n    \n    # Override parent method\n    def info(self):\n        return f\"{self.name} is a {self.age}-year-old {self.breed}\"\n\nclass Cat(Animal):  # Also inherits from Animal\n    def __init__(self, name, age, indoor=True):\n        super().__init__(name, age)\n        self.indoor = indoor\n    \n    def meow(self):\n        return f\"{self.name} says: Meow!\"\n    \n    def info(self):\n        location = \"indoor\" if self.indoor else \"outdoor\"\n        return f\"{self.name} is a {self.age}-year-old {location} cat\"\n\nclass Bird(Animal):\n    def __init__(self, name, age, can_fly=True):\n        super().__init__(name, age)\n        self.can_fly = can_fly\n    \n    def chirp(self):\n        return f\"{self.name} says: Chirp chirp!\"\n    \n    def fly(self):\n        if self.can_fly:\n            return f\"{self.name} is flying!\"\n        return f\"{self.name} can't fly (maybe a penguin?)\"\n\nprint(\"=== Creating Animals ===\")\ndog = Dog(\"Buddy\", 3, \"Golden Retriever\")\ncat = Cat(\"Whiskers\", 2, indoor=True)\nbird = Bird(\"Tweety\", 1, can_fly=True)\npenguin = Bird(\"Pingu\", 5, can_fly=False)\n\nprint(\"\\n=== Inherited Methods (from Animal) ===\")\nprint(dog.eat())\nprint(cat.sleep())\nprint(bird.eat())\n\nprint(\"\\n=== Child-Specific Methods ===\")\nprint(dog.bark())\nprint(cat.meow())\nprint(bird.chirp())\nprint(bird.fly())\nprint(penguin.fly())\n\nprint(\"\\n=== Overridden info() Method ===\")\nprint(dog.info())\nprint(cat.info())\nprint(bird.info())\n\nprint(\"\\n=== Checking Inheritance ===\")\nprint(f\"Is dog an Animal? {isinstance(dog, Animal)}\")\nprint(f\"Is dog a Dog? {isinstance(dog, Dog)}\")\nprint(f\"Is dog a Cat? {isinstance(dog, Cat)}\")\nprint(f\"Is Dog a subclass of Animal? {issubclass(Dog, Animal)}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Creating inheritance:**\n```python\n# Parent class\nclass Parent:\n    def __init__(self, x):\n        self.x = x\n    \n    def method(self):\n        return \"parent\"\n\n# Child class\nclass Child(Parent):  # Inherit from Parent\n    def __init__(self, x, y):\n        super().__init__(x)  # Call parent's __init__\n        self.y = y\n    \n    # Override parent method\n    def method(self):\n        return \"child\"\n```\n\n**super() function:**\n```python\nsuper().__init__(args)     # Call parent's __init__\nsuper().method(args)       # Call parent's method\n```\n\n**Multiple levels:**\n```python\nclass Grandparent:\n    pass\n\nclass Parent(Grandparent):\n    pass\n\nclass Child(Parent):\n    pass  # Child inherits from both Parent and Grandparent\n```\n\n**Checking relationships:**\n```python\nisinstance(obj, ClassName)  # Is obj an instance of ClassName?\nissubclass(Child, Parent)   # Is Child a subclass of Parent?\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting super().__init__() in Child Class**\n```python\n# WRONG - Parent __init__ not called\nclass Animal:\n    def __init__(self, name):\n        self.name = name\n\nclass Dog(Animal):\n    def __init__(self, name, breed):\n        self.breed = breed  # self.name never set!\n\nd = Dog(\"Rex\", \"Labrador\")\nprint(d.name)  # AttributeError!\n\n# CORRECT - Call parent's __init__\nclass Dog(Animal):\n    def __init__(self, name, breed):\n        super().__init__(name)\n        self.breed = breed\n```\n\n**2. Incorrect super() Syntax**\n```python\n# WRONG - Old Python 2 style\nclass Dog(Animal):\n    def __init__(self):\n        super(Dog, self).__init__()  # Verbose, error-prone\n\n# CORRECT - Modern Python 3 style\nclass Dog(Animal):\n    def __init__(self):\n        super().__init__()  # Cleaner, always correct\n```\n\n**3. Overriding Method Without Calling Parent**\n```python\n# WRONG - Parent logic completely replaced\nclass Animal:\n    def speak(self):\n        print(f\"{self.name} makes a sound\")\n        log_sound()  # Important logging!\n\nclass Dog(Animal):\n    def speak(self):  # Log never called!\n        print(\"Woof!\")\n\n# CORRECT - Extend, don't replace (when appropriate)\nclass Dog(Animal):\n    def speak(self):\n        super().speak()  # Parent logging happens\n        print(\"Woof!\")  # Add dog-specific behavior\n```\n\n**4. Deep Inheritance Hierarchies**\n```python\n# WRONG - Too many levels, hard to understand\nclass A: pass\nclass B(A): pass\nclass C(B): pass\nclass D(C): pass\nclass E(D): pass  # 5 levels deep!\n\n# CORRECT - Prefer composition over deep inheritance\nclass Engine: pass\nclass Car:\n    def __init__(self):\n        self.engine = Engine()  # Composition\n```\n\n**5. Not Checking isinstance for Type**\n```python\n# WRONG - Checking exact class misses subclasses\nclass Animal: pass\nclass Dog(Animal): pass\n\ndef feed(animal):\n    if type(animal) == Animal:  # Dog is not exactly Animal!\n        animal.eat()\n\n# CORRECT - Use isinstance to include subclasses\ndef feed(animal):\n    if isinstance(animal, Animal):  # Includes Dog!\n        animal.eat()\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Inheritance creates 'is-a' relationships** - Dog is an Animal\n- **Syntax: class Child(Parent):** - Inherit from parent class\n- **super() calls parent methods** - Especially __init__()\n- **Children inherit all parent attributes/methods** - No rewriting needed\n- **Override methods by redefining them** - Same name, new implementation\n- **Use isinstance(obj, Class)** - Check if object is instance of class\n- **Use issubclass(Child, Parent)** - Check inheritance relationship\n- **DRY principle** - Don't Repeat Yourself, use inheritance"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-11-lesson-03-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a Vehicle hierarchy:\n- Vehicle (parent): brand, year, start(), stop()\n- Car (child): num_doors, additional info\n- Motorcycle (child): has_sidecar, additional info\nBoth children should override info() and add specific methods",
              "instructions": "Create a Vehicle hierarchy:\n- Vehicle (parent): brand, year, start(), stop()\n- Car (child): num_doors, additional info\n- Motorcycle (child): has_sidecar, additional info\nBoth children should override info() and add specific methods",
              "starterCode": "class Vehicle:\n    def __init__(self, brand, year):\n        # TODO: Set brand and year\n        pass\n    \n    def start(self):\n        # TODO: Return start message\n        pass\n    \n    def stop(self):\n        # TODO: Return stop message\n        pass\n    \n    def info(self):\n        # TODO: Return basic info\n        pass\n\nclass Car(Vehicle):\n    def __init__(self, brand, year, num_doors):\n        # TODO: Call parent __init__ and set num_doors\n        pass\n    \n    def info(self):\n        # TODO: Override with car-specific info\n        pass\n\nclass Motorcycle(Vehicle):\n    def __init__(self, brand, year, has_sidecar=False):\n        # TODO: Call parent __init__ and set has_sidecar\n        pass\n    \n    def info(self):\n        # TODO: Override with motorcycle-specific info\n        pass\n\n# TODO: Create vehicles and test methods",
              "solution": "# Vehicle Hierarchy\n# This solution demonstrates inheritance and method overriding\n\nclass Vehicle:\n    \"\"\"Base class for all vehicles.\"\"\"\n    \n    def __init__(self, brand, year):\n        \"\"\"Initialize vehicle with brand and year.\"\"\"\n        self.brand = brand\n        self.year = year\n        self.is_running = False\n    \n    def start(self):\n        \"\"\"Start the vehicle.\"\"\"\n        self.is_running = True\n        return f\"{self.brand} is starting...\"\n    \n    def stop(self):\n        \"\"\"Stop the vehicle.\"\"\"\n        self.is_running = False\n        return f\"{self.brand} has stopped.\"\n    \n    def info(self):\n        \"\"\"Return basic vehicle info.\"\"\"\n        return f\"{self.year} {self.brand}\"\n\nclass Car(Vehicle):\n    \"\"\"Car class - inherits from Vehicle.\"\"\"\n    \n    def __init__(self, brand, year, num_doors):\n        \"\"\"Initialize car with doors.\"\"\"\n        super().__init__(brand, year)\n        self.num_doors = num_doors\n    \n    def info(self):\n        \"\"\"Override: Car-specific info.\"\"\"\n        base_info = super().info()\n        return f\"{base_info} - {self.num_doors}-door car\"\n    \n    def honk(self):\n        \"\"\"Car-specific method.\"\"\"\n        return \"Beep beep!\"\n\nclass Motorcycle(Vehicle):\n    \"\"\"Motorcycle class - inherits from Vehicle.\"\"\"\n    \n    def __init__(self, brand, year, has_sidecar=False):\n        \"\"\"Initialize motorcycle with sidecar option.\"\"\"\n        super().__init__(brand, year)\n        self.has_sidecar = has_sidecar\n    \n    def info(self):\n        \"\"\"Override: Motorcycle-specific info.\"\"\"\n        base_info = super().info()\n        sidecar_text = \"with sidecar\" if self.has_sidecar else \"no sidecar\"\n        return f\"{base_info} - motorcycle ({sidecar_text})\"\n    \n    def wheelie(self):\n        \"\"\"Motorcycle-specific method.\"\"\"\n        if self.has_sidecar:\n            return \"Can't wheelie with a sidecar!\"\n        return \"Doing a wheelie!\"\n\n# Test the vehicle hierarchy\nprint(\"=== Vehicle Hierarchy Demo ===\")\n\n# Create vehicles\nmy_car = Car(\"Toyota\", 2022, 4)\nmy_bike = Motorcycle(\"Harley\", 2021, has_sidecar=True)\nold_bike = Motorcycle(\"Honda\", 2020)\n\n# Test info (polymorphism)\nprint(\"\\nVehicle Info:\")\nfor vehicle in [my_car, my_bike, old_bike]:\n    print(f\"  - {vehicle.info()}\")\n\n# Test start/stop\nprint(f\"\\n{my_car.start()}\")\nprint(f\"{my_car.stop()}\")\n\n# Test specific methods\nprint(f\"\\nCar honk: {my_car.honk()}\")\nprint(f\"Bike with sidecar: {my_bike.wheelie()}\")\nprint(f\"Regular bike: {old_bike.wheelie()}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use super().__init__() to call parent constructor. Override info() to provide specific details."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-11-lesson-04",
          "title": "Polymorphism",
          "moduleId": "module-11",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Many Forms, Same Interface",
              "content": "**Polymorphism** = \"Many forms\"\n\n**Think of it like a TV remote:**\n- Same button (\"Play\") works on:\n  - DVD player ‚Üí plays DVD\n  - Streaming box ‚Üí plays stream\n  - Game console ‚Üí starts game\n- **Same interface, different behavior**\n\n**In Python:**\n```\nSame method name, different implementations:\n\ndog.speak() ‚Üí \"Woof!\"\ncat.speak() ‚Üí \"Meow!\"\nbird.speak() ‚Üí \"Chirp!\"\n\nAll respond to speak(), each does it differently\n```\n\n**Two types of polymorphism:**\n\n**1. Method Overriding** (inheritance-based)\n- Child classes override parent method\n- Same method name, different implementation\n```python\nclass Animal:\n    def speak(self): pass\n\nclass Dog(Animal):\n    def speak(self): return \"Woof\"\n\nclass Cat(Animal):\n    def speak(self): return \"Meow\"\n```\n\n**2. Duck Typing** (\"If it walks like a duck...\")\n- Don't check type, check behavior\n- If it has the method, use it!\n```python\n# Don't care about type, just that it has speak()\nfor animal in animals:\n    print(animal.speak())  # Works for any object with speak()\n```\n\n**Benefits:**\n- Write generic code\n- Easy to extend\n- Flexible and reusable"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Polymorphism in Action",
              "content": "**Polymorphism demonstrated:**\n\n**1. Method Overriding:**\n- Each shape implements `area()` and `perimeter()` differently\n- Same method names, different calculations\n\n**2. Uniform Interface:**\n- `print_shape_info()` works with any shape\n- Doesn't care about specific type\n- Just calls `area()` and `perimeter()`\n\n**3. Duck Typing:**\n- `Square` doesn't inherit from `Shape`\n- But has required methods\n- Works perfectly with polymorphic functions!\n\n**Key insight:** Code to interfaces, not implementations",
              "code": "# Base class with common interface\nclass Shape:\n    def __init__(self, name):\n        self.name = name\n    \n    def area(self):\n        raise NotImplementedError(\"Subclass must implement area()\")\n    \n    def perimeter(self):\n        raise NotImplementedError(\"Subclass must implement perimeter()\")\n    \n    def describe(self):\n        return f\"{self.name}: Area = {self.area()}, Perimeter = {self.perimeter()}\"\n\n# Different shapes, same interface\nclass Circle(Shape):\n    def __init__(self, radius):\n        super().__init__(\"Circle\")\n        self.radius = radius\n    \n    def area(self):\n        return 3.14159 * self.radius ** 2\n    \n    def perimeter(self):\n        return 2 * 3.14159 * self.radius\n\nclass Rectangle(Shape):\n    def __init__(self, width, height):\n        super().__init__(\"Rectangle\")\n        self.width = width\n        self.height = height\n    \n    def area(self):\n        return self.width * self.height\n    \n    def perimeter(self):\n        return 2 * (self.width + self.height)\n\nclass Triangle(Shape):\n    def __init__(self, base, height, side1, side2, side3):\n        super().__init__(\"Triangle\")\n        self.base = base\n        self.height = height\n        self.sides = [side1, side2, side3]\n    \n    def area(self):\n        return 0.5 * self.base * self.height\n    \n    def perimeter(self):\n        return sum(self.sides)\n\n# Polymorphic function - works with any Shape\ndef print_shape_info(shape):\n    \"\"\"Works with any object that has area() and perimeter()\"\"\"\n    print(f\"{shape.name}:\")\n    print(f\"  Area: {shape.area():.2f}\")\n    print(f\"  Perimeter: {shape.perimeter():.2f}\")\n    print()\n\ndef calculate_total_area(shapes):\n    \"\"\"Works with list of any shapes\"\"\"\n    total = sum(shape.area() for shape in shapes)\n    return total\n\n# Create different shapes\nprint(\"=== Creating Shapes ===\")\ncircle = Circle(5)\nrectangle = Rectangle(4, 6)\ntriangle = Triangle(base=3, height=4, side1=3, side2=4, side3=5)\n\n# Polymorphism: same method, different behavior\nprint(\"\\n=== Polymorphism: Each shape implements methods differently ===\")\nprint_shape_info(circle)\nprint_shape_info(rectangle)\nprint_shape_info(triangle)\n\n# Polymorphism: treating different types uniformly\nprint(\"=== Treating Different Shapes Uniformly ===\")\nshapes = [circle, rectangle, triangle]\n\nfor shape in shapes:\n    print(shape.describe())\n\nprint(f\"\\nTotal area of all shapes: {calculate_total_area(shapes):.2f}\")\n\n# Duck typing: if it has the methods, it works!\nprint(\"\\n=== Duck Typing ===\")\n\nclass Square:  # Doesn't inherit from Shape!\n    def __init__(self, side):\n        self.name = \"Square\"\n        self.side = side\n    \n    def area(self):\n        return self.side ** 2\n    \n    def perimeter(self):\n        return 4 * self.side\n\nsquare = Square(5)\nprint_shape_info(square)  # Works! Has area() and perimeter()\n\n# Add to shapes list\nshapes.append(square)\nprint(f\"Total area including square: {calculate_total_area(shapes):.2f}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Creating polymorphic behavior:**\n\n**Step 1: Define common interface**\n```python\nclass Base:\n    def method(self):\n        raise NotImplementedError(\"Must override\")\n```\n\n**Step 2: Override in children**\n```python\nclass Child1(Base):\n    def method(self):\n        return \"Child1 implementation\"\n\nclass Child2(Base):\n    def method(self):\n        return \"Child2 implementation\"\n```\n\n**Step 3: Use polymorphically**\n```python\ndef process(obj):\n    return obj.method()  # Works with any child!\n\nprocess(Child1())  # ‚Üí \"Child1 implementation\"\nprocess(Child2())  # ‚Üí \"Child2 implementation\"\n```\n\n**Duck typing:**\n```python\ndef process(obj):\n    # Don't check type, just call method\n    return obj.method()  # Works with ANY object that has method()\n```\n\n**Key pattern:**\n```python\n# Instead of this (bad):\nif isinstance(obj, Dog):\n    obj.bark()\nelif isinstance(obj, Cat):\n    obj.meow()\n\n# Do this (good):\nobj.speak()  # All have speak(), different implementations\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Not Defining Common Interface in Base Class**\n```python\n# WRONG - No shared interface, inconsistent methods\nclass Dog:\n    def bark(self):\n        return \"Woof!\"\n\nclass Cat:\n    def meow(self):  # Different method name!\n        return \"Meow!\"\n\n# CORRECT - Common interface in base class\nclass Animal:\n    def speak(self):  # Define interface\n        raise NotImplementedError\n\nclass Dog(Animal):\n    def speak(self):\n        return \"Woof!\"\n\nclass Cat(Animal):\n    def speak(self):\n        return \"Meow!\"\n```\n\n**2. Checking Type Instead of Behavior**\n```python\n# WRONG - Checking type breaks polymorphism\ndef process(animal):\n    if isinstance(animal, Dog):\n        animal.bark()\n    elif isinstance(animal, Cat):\n        animal.meow()  # Must change for every new animal!\n\n# CORRECT - Rely on common interface\ndef process(animal):\n    animal.speak()  # Works for any animal with speak()\n```\n\n**3. Forgetting to Override Method**\n```python\n# WRONG - Using parent's generic implementation\nclass Shape:\n    def area(self):\n        return 0  # Generic default\n\nclass Circle(Shape):\n    def __init__(self, radius):\n        self.radius = radius\n    # Forgot to override area()!\n\nc = Circle(5)\nprint(c.area())  # Returns 0 - wrong!\n\n# CORRECT - Override method or use NotImplementedError\nclass Shape:\n    def area(self):\n        raise NotImplementedError(\"Subclass must implement\")\n```\n\n**4. Breaking Liskov Substitution Principle**\n```python\n# WRONG - Child changes expected behavior\nclass Bird:\n    def fly(self):\n        return \"Flying high!\"\n\nclass Penguin(Bird):\n    def fly(self):\n        raise Exception(\"Can't fly!\")  # Breaks expectations!\n\n# CORRECT - Restructure inheritance\nclass Bird:\n    pass\n\nclass FlyingBird(Bird):\n    def fly(self):\n        return \"Flying high!\"\n\nclass Penguin(Bird):  # Doesn't inherit fly()\n    def swim(self):\n        return \"Swimming!\"\n```\n\n**5. Not Using ABC for Abstract Base Classes**\n```python\n# WRONG - Can instantiate \"abstract\" class\nclass Shape:\n    def area(self):\n        raise NotImplementedError\n\ns = Shape()  # Allowed but wrong!\n\n# CORRECT - Use ABC to prevent instantiation\nfrom abc import ABC, abstractmethod\n\nclass Shape(ABC):\n    @abstractmethod\n    def area(self):\n        pass\n\ns = Shape()  # TypeError: Can't instantiate abstract class\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Polymorphism = 'many forms'** - Same interface, different implementations\n- **Method overriding enables polymorphism** - Children override parent methods\n- **Write code to interfaces** - Don't check types, call methods\n- **Duck typing: 'If it walks like a duck...'** - Behavior matters, not type\n- **Polymorphic functions work with any compatible type** - Very flexible\n- **Add new types without changing existing code** - Open/Closed Principle\n- **NotImplementedError in base class** - Forces children to implement\n- **Python doesn't require inheritance for polymorphism** - Just matching methods"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-11-lesson-04-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a payment processing system:\n- Payment base class with pay() method\n- CreditCard, PayPal, Bitcoin subclasses\n- process_payment() function that works with any payment type\n- Each payment type implements pay() differently",
              "instructions": "Create a payment processing system:\n- Payment base class with pay() method\n- CreditCard, PayPal, Bitcoin subclasses\n- process_payment() function that works with any payment type\n- Each payment type implements pay() differently",
              "starterCode": "class Payment:\n    def __init__(self, amount):\n        self.amount = amount\n    \n    def pay(self):\n        # TODO: Raise NotImplementedError\n        pass\n\nclass CreditCard(Payment):\n    def __init__(self, amount, card_number):\n        # TODO: Call parent init and store card_number\n        pass\n    \n    def pay(self):\n        # TODO: Return payment message\n        pass\n\nclass PayPal(Payment):\n    def __init__(self, amount, email):\n        # TODO: Call parent init and store email\n        pass\n    \n    def pay(self):\n        # TODO: Return payment message\n        pass\n\nclass Bitcoin(Payment):\n    def __init__(self, amount, wallet_address):\n        # TODO: Call parent init and store wallet_address\n        pass\n    \n    def pay(self):\n        # TODO: Return payment message\n        pass\n\ndef process_payment(payment):\n    # TODO: Process any payment type\n    pass\n\n# TODO: Create different payment types and process them",
              "solution": "# Payment Processing System\n# This solution demonstrates polymorphism in action\n\nclass Payment:\n    \"\"\"Base class for all payment methods.\"\"\"\n    \n    def __init__(self, amount):\n        self.amount = amount\n    \n    def pay(self):\n        \"\"\"Must be implemented by subclasses.\"\"\"\n        raise NotImplementedError(\"Subclasses must implement pay()\")\n\nclass CreditCard(Payment):\n    \"\"\"Credit card payment method.\"\"\"\n    \n    def __init__(self, amount, card_number):\n        super().__init__(amount)\n        # Store only last 4 digits for security\n        self.card_last_four = card_number[-4:]\n    \n    def pay(self):\n        \"\"\"Process credit card payment.\"\"\"\n        return f\"Charged ${self.amount:.2f} to card ending in {self.card_last_four}\"\n\nclass PayPal(Payment):\n    \"\"\"PayPal payment method.\"\"\"\n    \n    def __init__(self, amount, email):\n        super().__init__(amount)\n        self.email = email\n    \n    def pay(self):\n        \"\"\"Process PayPal payment.\"\"\"\n        return f\"Sent ${self.amount:.2f} via PayPal to {self.email}\"\n\nclass Bitcoin(Payment):\n    \"\"\"Bitcoin payment method.\"\"\"\n    \n    def __init__(self, amount, wallet_address):\n        super().__init__(amount)\n        # Shorten wallet address for display\n        self.wallet_short = wallet_address[:8] + '...'\n    \n    def pay(self):\n        \"\"\"Process Bitcoin payment.\"\"\"\n        btc_amount = self.amount / 45000  # Simplified conversion\n        return f\"Sent {btc_amount:.6f} BTC (${self.amount:.2f}) to {self.wallet_short}\"\n\ndef process_payment(payment):\n    \"\"\"Process any type of payment (polymorphism).\"\"\"\n    print(f\"Processing {type(payment).__name__} payment...\")\n    result = payment.pay()\n    print(f\"  {result}\")\n    return result\n\n# Test the payment system\nprint(\"=== Payment Processing System ===\")\n\n# Create different payment types\npayments = [\n    CreditCard(99.99, \"4111111111111234\"),\n    PayPal(49.99, \"user@example.com\"),\n    Bitcoin(199.99, \"1A1zP1eP5QGefi2DMPTfTL5SLmv7\")\n]\n\n# Process all payments using the same function\nprint(\"\\nProcessing payments:\")\nfor payment in payments:\n    process_payment(payment)\n    print()\n\n# Demonstrate polymorphism\nprint(\"The same function works with any payment type!\")\nprint(f\"All payments inherit from: {Payment.__name__}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Each pay() method should return a string describing the payment. process_payment() should work with any Payment object."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-11-lesson-05",
          "title": "Encapsulation and Properties",
          "moduleId": "module-11",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Information Hiding",
              "content": "**Encapsulation** = Bundling data with methods that operate on that data, and restricting direct access\n\n**Think of a car:**\n- You don't access engine internals directly\n- You use interface: steering wheel, pedals, gear shift\n- Engine details are hidden (encapsulated)\n- Prevents mistakes (can't accidentally break transmission)\n\n**In Python:**\n\n**Public** (normal attributes)\n```python\nself.name = \"John\"  # Anyone can access/modify\nobj.name = \"Jane\"   # Direct access\n```\n\n**Protected** (single underscore)\n```python\nself._internal = value  # Convention: \"please don't touch\"\n# Not enforced, just a hint to other developers\n```\n\n**Private** (double underscore)\n```python\nself.__secret = value  # Name mangling, harder to access\n# Becomes _ClassName__secret\n```\n\n**Why encapsulate?**\n\n1. **Validation** ‚úì\n   - Check values before setting\n   - Prevent invalid states\n\n2. **Controlled access** üîí\n   - Read-only attributes\n   - Computed values\n\n3. **Change implementation** üîß\n   - Modify internals without breaking code\n   - Maintain backward compatibility\n\n4. **Hide complexity** üé≠\n   - Simple interface, complex internals"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Properties and Encapsulation",
              "content": "**@property decorator creates managed attributes:**\n\n**1. Read-only property:**\n```python\n@property\ndef balance(self):\n    return self.__balance\n```\nUsage: `account.balance` (looks like attribute, actually method)\n\n**2. Property with setter:**\n```python\n@property\ndef fee(self):\n    return self._fee\n\n@fee.setter\ndef fee(self, value):\n    if value < 0:\n        raise ValueError()\n    self._fee = value\n```\n\n**3. Write-only property:**\n- Getter raises AttributeError\n- Only setter works\n\n**Key benefits:**\n- Validation on setting\n- Read-only access\n- Computed values\n- Looks like attribute access",
              "code": "class BankAccount:\n    def __init__(self, account_holder, initial_balance=0):\n        self.account_holder = account_holder  # Public\n        self._transaction_fee = 1.50          # Protected (by convention)\n        self.__balance = initial_balance       # Private (name mangled)\n        self.__pin = None                      # Private\n    \n    # Property: balance (read-only)\n    @property\n    def balance(self):\n        \"\"\"Read-only access to balance\"\"\"\n        return self.__balance\n    \n    # Property: pin (write-only via setter)\n    @property\n    def pin(self):\n        \"\"\"Can't read PIN!\"\"\"\n        raise AttributeError(\"PIN is write-only\")\n    \n    @pin.setter\n    def pin(self, value):\n        \"\"\"Set PIN with validation\"\"\"\n        if not isinstance(value, str) or len(value) != 4 or not value.isdigit():\n            raise ValueError(\"PIN must be 4 digits\")\n        self.__pin = value\n        print(\"PIN set successfully\")\n    \n    # Property with getter and setter\n    @property\n    def transaction_fee(self):\n        return self._transaction_fee\n    \n    @transaction_fee.setter\n    def transaction_fee(self, value):\n        if value < 0:\n            raise ValueError(\"Fee cannot be negative\")\n        self._transaction_fee = value\n    \n    # Methods that use private attributes\n    def deposit(self, amount):\n        if amount <= 0:\n            raise ValueError(\"Deposit must be positive\")\n        self.__balance += amount - self._transaction_fee\n        return f\"Deposited ${amount}. Fee: ${self._transaction_fee}. New balance: ${self.__balance}\"\n    \n    def withdraw(self, amount, pin):\n        if pin != self.__pin:\n            raise ValueError(\"Invalid PIN\")\n        if amount <= 0:\n            raise ValueError(\"Withdrawal must be positive\")\n        total = amount + self._transaction_fee\n        if total > self.__balance:\n            raise ValueError(\"Insufficient funds\")\n        self.__balance -= total\n        return f\"Withdrew ${amount}. Fee: ${self._transaction_fee}. New balance: ${self.__balance}\"\n\nprint(\"=== Creating Account ===\")\naccount = BankAccount(\"Alice\", 1000)\n\nprint(\"\\n=== Reading Balance (Property) ===\")\nprint(f\"Balance: ${account.balance}\")  # Uses @property\n\n# Try to modify balance directly (won't work!)\nprint(\"\\n=== Trying to Modify Balance Directly ===\")\ntry:\n    account.balance = 5000  # No setter defined!\nexcept AttributeError as e:\n    print(f\"Error: {e}\")\n\nprint(\"\\n=== Setting PIN (Property with Validation) ===\")\naccount.pin = \"1234\"  # Uses @pin.setter\n\n# Invalid PINs\nprint(\"\\n=== Invalid PIN Examples ===\")\ntry:\n    account.pin = \"123\"  # Too short\nexcept ValueError as e:\n    print(f\"Error: {e}\")\n\ntry:\n    account.pin = \"abcd\"  # Not digits\nexcept ValueError as e:\n    print(f\"Error: {e}\")\n\nprint(\"\\n=== Can't Read PIN ===\")\ntry:\n    print(account.pin)  # Raises AttributeError\nexcept AttributeError as e:\n    print(f\"Error: {e}\")\n\nprint(\"\\n=== Transaction Fee Property ===\")\nprint(f\"Current fee: ${account.transaction_fee}\")\naccount.transaction_fee = 2.00\nprint(f\"New fee: ${account.transaction_fee}\")\n\ntry:\n    account.transaction_fee = -5  # Validation!\nexcept ValueError as e:\n    print(f\"Error: {e}\")\n\nprint(\"\\n=== Using Methods ===\")\nprint(account.deposit(500))\nprint(account.withdraw(200, \"1234\"))\n\nprint(\"\\n=== Wrong PIN ===\")\ntry:\n    account.withdraw(100, \"9999\")\nexcept ValueError as e:\n    print(f\"Error: {e}\")\n\nprint(f\"\\nFinal balance: ${account.balance}\")\n\n# Demonstrate name mangling\nprint(\"\\n=== Name Mangling (Private Attributes) ===\")\nprint(f\"Can't access __balance directly: {hasattr(account, '__balance')}\")\nprint(f\"But it's stored as _BankAccount__balance: {hasattr(account, '_BankAccount__balance')}\")\nprint(\"(Don't do this in real code - defeats the purpose!)\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Attribute access levels:**\n```python\nclass MyClass:\n    def __init__(self):\n        self.public = \"anyone can access\"\n        self._protected = \"convention: internal use\"\n        self.__private = \"name mangled\"\n```\n\n**Property (read-only):**\n```python\nclass MyClass:\n    def __init__(self):\n        self.__value = 0\n    \n    @property\n    def value(self):\n        return self.__value\n\nobj = MyClass()\nprint(obj.value)      # OK - calls getter\nobj.value = 10        # Error - no setter\n```\n\n**Property with setter:**\n```python\nclass MyClass:\n    def __init__(self):\n        self.__value = 0\n    \n    @property\n    def value(self):\n        return self.__value\n    \n    @value.setter\n    def value(self, val):\n        if val < 0:\n            raise ValueError(\"Must be positive\")\n        self.__value = val\n\nobj = MyClass()\nobj.value = 10        # OK - validated\nobj.value = -5        # Error - validation failed\n```\n\n**Property with deleter:**\n```python\n@value.deleter\ndef value(self):\n    print(\"Deleting value\")\n    del self.__value\n\ndel obj.value  # Calls deleter\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Single Underscore Thinking It's Private**\n```python\n# WRONG - Single underscore is just convention, not enforced\nclass Account:\n    def __init__(self):\n        self._balance = 100  # \"Private\" by convention only\n\nacc = Account()\nacc._balance = -1000  # Still accessible!\n\n# CORRECT - Use double underscore for name mangling\nclass Account:\n    def __init__(self):\n        self.__balance = 100  # Name-mangled to _Account__balance\n\nacc = Account()\nacc.__balance = -1000  # Creates NEW attribute, doesn't modify original!\n```\n\n**2. Property Without Setter Allows No Modification**\n```python\n# WRONG - Read-only property but trying to set\nclass Person:\n    def __init__(self, name):\n        self._name = name\n\n    @property\n    def name(self):\n        return self._name\n\np = Person(\"Alice\")\np.name = \"Bob\"  # AttributeError: can't set attribute\n\n# CORRECT - Add setter if modification needed\nclass Person:\n    def __init__(self, name):\n        self._name = name\n\n    @property\n    def name(self):\n        return self._name\n\n    @name.setter\n    def name(self, value):\n        self._name = value\n```\n\n**3. Property Setter Not Validating**\n```python\n# WRONG - Setter allows invalid values\nclass Circle:\n    @property\n    def radius(self):\n        return self._radius\n\n    @radius.setter\n    def radius(self, value):\n        self._radius = value  # No validation!\n\nc = Circle()\nc.radius = -5  # Invalid but accepted!\n\n# CORRECT - Validate in setter\nclass Circle:\n    @radius.setter\n    def radius(self, value):\n        if value < 0:\n            raise ValueError(\"Radius must be positive\")\n        self._radius = value\n```\n\n**4. Computing Property Every Access**\n```python\n# WRONG - Expensive computation on every access\nclass Report:\n    @property\n    def summary(self):\n        # Queries database every time!\n        return database.generate_report()\n\nr = Report()\nprint(r.summary)  # Database query\nprint(r.summary)  # Another query!\n\n# CORRECT - Cache computed values\nclass Report:\n    def __init__(self):\n        self._summary = None\n\n    @property\n    def summary(self):\n        if self._summary is None:\n            self._summary = database.generate_report()\n        return self._summary\n```\n\n**5. Accessing Private Attributes Directly in Subclass**\n```python\n# WRONG - Name mangling affects subclass access\nclass Parent:\n    def __init__(self):\n        self.__secret = 42\n\nclass Child(Parent):\n    def reveal(self):\n        return self.__secret  # AttributeError!\n\n# CORRECT - Use protected (_) or provide accessor\nclass Parent:\n    def __init__(self):\n        self._secret = 42  # Protected, not private\n\nclass Child(Parent):\n    def reveal(self):\n        return self._secret  # Works\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Encapsulation = bundling data with methods** that control access\n- **Public (name)** - normal access by everyone\n- **Protected (_name)** - convention for internal use\n- **Private (__name)** - name mangling, harder to access\n- **@property decorator** - makes method look like attribute\n- **@property.setter** - validates and controls setting\n- **Read-only properties** - only @property, no setter\n- **Computed properties** - calculate value on-the-fly, no storage needed"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-11-lesson-05-challenge-3",
              "title": "Interactive Exercise",
              "description": "Create a Temperature class that:\n- Stores temperature in Celsius (private)\n- Has celsius property (read/write with validation)\n- Has fahrenheit property (computed, read/write)\n- Has kelvin property (computed, read-only)\n- Validates: Celsius >= -273.15 (absolute zero)",
              "instructions": "Create a Temperature class that:\n- Stores temperature in Celsius (private)\n- Has celsius property (read/write with validation)\n- Has fahrenheit property (computed, read/write)\n- Has kelvin property (computed, read-only)\n- Validates: Celsius >= -273.15 (absolute zero)",
              "starterCode": "class Temperature:\n    def __init__(self, celsius=0):\n        # TODO: Initialize with validation\n        pass\n    \n    @property\n    def celsius(self):\n        # TODO: Return celsius\n        pass\n    \n    @celsius.setter\n    def celsius(self, value):\n        # TODO: Validate and set celsius\n        pass\n    \n    @property\n    def fahrenheit(self):\n        # TODO: Convert celsius to fahrenheit\n        # Formula: (C * 9/5) + 32\n        pass\n    \n    @fahrenheit.setter\n    def fahrenheit(self, value):\n        # TODO: Convert fahrenheit to celsius and set\n        # Formula: (F - 32) * 5/9\n        pass\n    \n    @property\n    def kelvin(self):\n        # TODO: Convert celsius to kelvin (read-only!)\n        # Formula: C + 273.15\n        pass\n\n# TODO: Create temperature objects and test properties",
              "solution": "# Temperature Class with Properties\n# This solution demonstrates properties for encapsulation\n\nclass Temperature:\n    \"\"\"Temperature class with automatic unit conversion.\"\"\"\n    \n    ABSOLUTE_ZERO = -273.15  # In Celsius\n    \n    def __init__(self, celsius=0):\n        \"\"\"Initialize temperature in Celsius.\"\"\"\n        self.celsius = celsius  # Uses the setter for validation\n    \n    @property\n    def celsius(self):\n        \"\"\"Get temperature in Celsius.\"\"\"\n        return self._celsius\n    \n    @celsius.setter\n    def celsius(self, value):\n        \"\"\"Set temperature in Celsius with validation.\"\"\"\n        if value < self.ABSOLUTE_ZERO:\n            raise ValueError(f\"Temperature cannot be below absolute zero ({self.ABSOLUTE_ZERO}C)\")\n        self._celsius = value\n    \n    @property\n    def fahrenheit(self):\n        \"\"\"Get temperature in Fahrenheit (computed).\"\"\"\n        return (self._celsius * 9/5) + 32\n    \n    @fahrenheit.setter\n    def fahrenheit(self, value):\n        \"\"\"Set temperature via Fahrenheit.\"\"\"\n        self.celsius = (value - 32) * 5/9  # Converts and validates\n    \n    @property\n    def kelvin(self):\n        \"\"\"Get temperature in Kelvin (read-only).\"\"\"\n        return self._celsius + 273.15\n    \n    def __str__(self):\n        return f\"{self._celsius:.2f}C / {self.fahrenheit:.2f}F / {self.kelvin:.2f}K\"\n\n# Test the Temperature class\nprint(\"=== Temperature Class Demo ===\")\n\n# Create temperature object\ntemp = Temperature(25)  # 25 Celsius\nprint(f\"\\nInitial: {temp}\")\n\n# Read properties\nprint(f\"\\nCelsius: {temp.celsius}C\")\nprint(f\"Fahrenheit: {temp.fahrenheit}F\")\nprint(f\"Kelvin: {temp.kelvin}K\")\n\n# Modify via Celsius\ntemp.celsius = 100\nprint(f\"\\nAfter setting 100C: {temp}\")\n\n# Modify via Fahrenheit\ntemp.fahrenheit = 32\nprint(f\"After setting 32F: {temp}\")\n\n# Test validation\nprint(\"\\nTesting validation:\")\ntry:\n    temp.celsius = -300  # Below absolute zero\nexcept ValueError as e:\n    print(f\"  Error: {e}\")\n\n# Create at absolute zero\nprint(\"\\nAt absolute zero:\")\ncold = Temperature(-273.15)\nprint(f\"  {cold}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use self.__celsius for private storage. Validate >= -273.15 in celsius setter."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-11-lesson-06",
          "title": "Mini-Project: RPG Character System",
          "moduleId": "module-11",
          "order": 6,
          "estimatedMinutes": 45,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Project Overview",
              "content": "**Build an RPG Character System!**\n\nCreate a role-playing game character system with:\n- Base Character class (parent)\n- Warrior, Mage, Rogue classes (children)\n- Inventory management\n- Combat system\n- Leveling and experience\n\n**OOP Concepts Applied:**\n\n1. **Classes & Objects**\n   - Character blueprint\n   - Multiple character instances\n\n2. **Inheritance**\n   - Character (parent)\n   - Warrior, Mage, Rogue (children)\n\n3. **Polymorphism**\n   - Each class has unique `special_attack()`\n   - All work with same combat system\n\n4. **Encapsulation**\n   - Private attributes (health, mana)\n   - Properties with validation\n\n5. **Class Attributes**\n   - Character count\n   - Class-specific bonuses\n\n**Project Structure:**\n```\nCharacter (base)\n‚îú‚îÄ‚îÄ Warrior (high HP, melee)\n‚îú‚îÄ‚îÄ Mage (magic, low HP)\n‚îî‚îÄ‚îÄ Rogue (speed, critical hits)\n```\n\n**Features:**\n- Health/Mana management with validation\n- Inventory system\n- Level-up mechanics\n- Unique abilities per class\n- Combat simulation"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 1: Base Character Class",
              "content": "**Base Character class features:**\n\n**Encapsulation:**\n- Private attributes: `__health`, `__mana`, `__experience`\n- Properties with validation\n- Health can't exceed max or go below 0\n\n**Class attributes:**\n- `total_characters` tracks all characters\n\n**Instance methods:**\n- `attack()`, `take_damage()`, `heal()`\n- `add_experience()`, `level_up()`\n- `add_item()`, `show_inventory()`\n\n**Foundation for inheritance:**\n- Children will override `special_attack()`",
              "code": "class Character:\n    \"\"\"Base character class for RPG\"\"\"\n    \n    # Class attributes\n    total_characters = 0\n    \n    def __init__(self, name, char_class, level=1):\n        # Public attributes\n        self.name = name\n        self.char_class = char_class\n        self.level = level\n        \n        # Private attributes (encapsulation)\n        self.__health = 100\n        self.__max_health = 100\n        self.__mana = 50\n        self.__max_mana = 50\n        self.__experience = 0\n        \n        # Protected attributes\n        self._inventory = []\n        self._is_alive = True\n        \n        # Increment class counter\n        Character.total_characters += 1\n        print(f\"Character created: {name} the {char_class} (Level {level})\")\n    \n    # Properties with encapsulation\n    @property\n    def health(self):\n        return self.__health\n    \n    @health.setter\n    def health(self, value):\n        \"\"\"Set health with validation\"\"\"\n        if value > self.__max_health:\n            value = self.__max_health\n        if value <= 0:\n            value = 0\n            self._is_alive = False\n            print(f\"{self.name} has been defeated!\")\n        self.__health = value\n    \n    @property\n    def mana(self):\n        return self.__mana\n    \n    @mana.setter\n    def mana(self, value):\n        \"\"\"Set mana with validation\"\"\"\n        if value > self.__max_mana:\n            value = self.__max_mana\n        if value < 0:\n            value = 0\n        self.__mana = value\n    \n    @property\n    def max_health(self):\n        return self.__max_health\n    \n    @property\n    def max_mana(self):\n        return self.__max_mana\n    \n    @property\n    def experience(self):\n        return self.__experience\n    \n    # Instance methods\n    def attack(self, target):\n        \"\"\"Basic attack\"\"\"\n        damage = 10 * self.level\n        print(f\"{self.name} attacks {target.name} for {damage} damage!\")\n        target.take_damage(damage)\n        return damage\n    \n    def take_damage(self, amount):\n        \"\"\"Take damage\"\"\"\n        self.health -= amount\n        if self._is_alive:\n            print(f\"{self.name} has {self.health}/{self.max_health} HP remaining\")\n    \n    def heal(self, amount):\n        \"\"\"Heal character\"\"\"\n        old_health = self.health\n        self.health += amount\n        healed = self.health - old_health\n        print(f\"{self.name} healed for {healed} HP ({self.health}/{self.max_health})\")\n    \n    def add_experience(self, amount):\n        \"\"\"Add experience and check for level up\"\"\"\n        self.__experience += amount\n        exp_needed = self.level * 100\n        print(f\"{self.name} gained {amount} XP ({self.__experience}/{exp_needed})\")\n        \n        if self.__experience >= exp_needed:\n            self.level_up()\n    \n    def level_up(self):\n        \"\"\"Level up character\"\"\"\n        self.level += 1\n        self.__max_health += 20\n        self.__max_mana += 10\n        self.health = self.__max_health  # Full heal on level up\n        self.mana = self.__max_mana\n        self.__experience = 0\n        print(f\"üéâ {self.name} leveled up to {self.level}!\")\n        print(f\"   HP: {self.__max_health}, Mana: {self.__max_mana}\")\n    \n    def add_item(self, item):\n        \"\"\"Add item to inventory\"\"\"\n        self._inventory.append(item)\n        print(f\"{self.name} obtained: {item}\")\n    \n    def show_inventory(self):\n        \"\"\"Display inventory\"\"\"\n        if not self._inventory:\n            print(f\"{self.name}'s inventory is empty\")\n        else:\n            print(f\"{self.name}'s inventory:\")\n            for i, item in enumerate(self._inventory, 1):\n                print(f\"  {i}. {item}\")\n    \n    def special_attack(self, target):\n        \"\"\"Override in subclasses\"\"\"\n        raise NotImplementedError(\"Subclass must implement special_attack\")\n    \n    def __str__(self):\n        status = \"ALIVE\" if self._is_alive else \"DEFEATED\"\n        return f\"{self.name} | {self.char_class} | Lvl {self.level} | HP: {self.health}/{self.max_health} | Mana: {self.mana}/{self.max_mana} | {status}\"\n    \n    @classmethod\n    def get_character_count(cls):\n        return f\"Total characters created: {cls.total_characters}\"\n\nprint(\"=== Testing Base Character ===\")\nchar = Character(\"TestHero\", \"Generic\")\nprint(char)\nchar.add_item(\"Health Potion\")\nchar.add_item(\"Sword\")\nchar.show_inventory()\nprint(Character.get_character_count())",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 2: Warrior, Mage, Rogue Classes",
              "content": "**Three character classes demonstrating inheritance:**\n\n**Warrior:**\n- Higher starting HP (150)\n- Builds rage with attacks\n- Special: Berserker Rage (requires 50 rage)\n\n**Mage:**\n- Lower HP (80), higher mana (100)\n- Special: Fireball (costs 30 mana)\n- Unique: restore_mana() ability\n\n**Rogue:**\n- Normal HP\n- Can enter stealth\n- Special: Backstab (requires stealth)\n- Critical hit chance on normal attacks\n\n**Key inheritance features:**\n- All call `super().__init__()`\n- Override `special_attack()` polymorphically\n- Some override `attack()` with enhanced versions\n- Access parent's private attributes via name mangling",
              "code": "class Warrior(Character):\n    \"\"\"Warrior class - high HP, melee damage\"\"\"\n    \n    # Class attribute\n    armor_bonus = 1.5\n    \n    def __init__(self, name, level=1):\n        super().__init__(name, \"Warrior\", level)\n        # Warriors start with more health\n        self._Character__max_health = 150\n        self.health = 150\n        self._rage = 0\n    \n    def special_attack(self, target):\n        \"\"\"Berserker Rage - powerful attack\"\"\"\n        if self._rage < 50:\n            print(f\"{self.name} needs 50 rage (has {self._rage})\")\n            return 0\n        \n        damage = 30 * self.level\n        self._rage = 0\n        print(f\"‚öîÔ∏è  {self.name} uses BERSERKER RAGE!\")\n        print(f\"   Devastating attack for {damage} damage!\")\n        target.take_damage(damage)\n        return damage\n    \n    def attack(self, target):\n        \"\"\"Override attack to build rage\"\"\"\n        damage = super().attack(target)\n        self._rage += 20\n        print(f\"   Rage increased to {self._rage}\")\n        return damage\n\nclass Mage(Character):\n    \"\"\"Mage class - magic damage, low HP\"\"\"\n    \n    # Class attribute\n    spell_power = 1.8\n    \n    def __init__(self, name, level=1):\n        super().__init__(name, \"Mage\", level)\n        # Mages have less health but more mana\n        self._Character__max_health = 80\n        self._Character__max_mana = 100\n        self.health = 80\n        self.mana = 100\n    \n    def special_attack(self, target):\n        \"\"\"Fireball - magical damage\"\"\"\n        mana_cost = 30\n        if self.mana < mana_cost:\n            print(f\"{self.name} needs {mana_cost} mana (has {self.mana})\")\n            return 0\n        \n        self.mana -= mana_cost\n        damage = int(25 * self.level * self.spell_power)\n        print(f\"üî• {self.name} casts FIREBALL!\")\n        print(f\"   Magical damage: {damage}\")\n        target.take_damage(damage)\n        return damage\n    \n    def restore_mana(self, amount=20):\n        \"\"\"Mage-specific ability\"\"\"\n        old_mana = self.mana\n        self.mana += amount\n        restored = self.mana - old_mana\n        print(f\"{self.name} meditates, restoring {restored} mana ({self.mana}/{self.max_mana})\")\n\nclass Rogue(Character):\n    \"\"\"Rogue class - speed and critical hits\"\"\"\n    \n    # Class attribute\n    crit_chance = 0.3  # 30% crit chance\n    \n    def __init__(self, name, level=1):\n        super().__init__(name, \"Rogue\", level)\n        self._stealth = False\n    \n    def special_attack(self, target):\n        \"\"\"Backstab - critical damage from stealth\"\"\"\n        if not self._stealth:\n            print(f\"{self.name} needs to be in stealth!\")\n            return 0\n        \n        damage = 40 * self.level\n        self._stealth = False\n        print(f\"üó°Ô∏è  {self.name} uses BACKSTAB from stealth!\")\n        print(f\"   Critical damage: {damage}\")\n        target.take_damage(damage)\n        return damage\n    \n    def enter_stealth(self):\n        \"\"\"Rogue-specific ability\"\"\"\n        self._stealth = True\n        print(f\"{self.name} enters stealth mode...\")\n    \n    def attack(self, target):\n        \"\"\"Override attack for critical hits\"\"\"\n        import random\n        damage = 10 * self.level\n        \n        if random.random() < self.crit_chance:\n            damage *= 2\n            print(f\"üí• CRITICAL HIT!\")\n        \n        print(f\"{self.name} attacks {target.name} for {damage} damage!\")\n        target.take_damage(damage)\n        return damage\n\nprint(\"\\n=== Creating Different Classes ===\")\nwarrior = Warrior(\"Conan\")\nmage = Mage(\"Gandalf\")\nrogue = Rogue(\"Assassin\")\n\nprint(\"\\n=== Character Stats ===\")\nprint(warrior)\nprint(mage)\nprint(rogue)\n\nprint(f\"\\n{Character.get_character_count()}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Step 3: Combat Simulation",
              "content": "**Combat system demonstrating all OOP concepts:**\n\n**1. Polymorphism:**\n- Different classes all have `attack()` and `special_attack()`\n- Same combat loop works for any character type\n- Each implements abilities differently\n\n**2. Encapsulation:**\n- Health/mana managed through properties\n- Validation prevents invalid values\n- Private attributes protected\n\n**3. Inheritance:**\n- All share Character base functionality\n- Each adds unique features\n- Override methods for custom behavior\n\n**4. Class attributes:**\n- `total_characters` tracks all instances\n- Each class has specific bonuses\n\n**Complete RPG foundation ready to extend!**",
              "code": "def combat_demo():\n    \"\"\"Demonstrate polymorphic combat\"\"\"\n    print(\"\\n\" + \"=\"*50)\n    print(\"COMBAT ARENA\")\n    print(\"=\"*50)\n    \n    # Create fighters\n    hero = Warrior(\"Aragorn\", level=2)\n    villain = Mage(\"Saruman\", level=2)\n    \n    print(\"\\n=== Round 1: Basic Attacks ===\")\n    hero.attack(villain)\n    villain.attack(hero)\n    \n    print(\"\\n=== Round 2: More Attacks ===\")\n    hero.attack(villain)\n    villain.attack(hero)\n    \n    print(\"\\n=== Round 3: Special Attacks ===\")\n    # Warrior has rage now\n    hero.special_attack(villain)\n    # Mage casts fireball\n    villain.special_attack(hero)\n    \n    print(\"\\n=== Current Status ===\")\n    print(hero)\n    print(villain)\n    \n    print(\"\\n=== Healing ===\")\n    hero.heal(30)\n    villain.restore_mana(50)\n    \n    print(\"\\n=== Final Status ===\")\n    print(hero)\n    print(villain)\n\ndef polymorphism_demo():\n    \"\"\"Demonstrate polymorphism - different classes, same interface\"\"\"\n    print(\"\\n\" + \"=\"*50)\n    print(\"POLYMORPHISM DEMONSTRATION\")\n    print(\"=\"*50)\n    \n    # Create different character types\n    characters = [\n        Warrior(\"Brutor\"),\n        Mage(\"Merlin\"),\n        Rogue(\"Shadow\")\n    ]\n    \n    dummy = Character(\"Target Dummy\", \"Dummy\")\n    dummy.health = 500  # Lots of HP\n    \n    print(\"\\nAll characters attacking same target:\\n\")\n    \n    # Polymorphic loop - works with any Character subclass\n    for char in characters:\n        char.attack(dummy)\n        print()\n    \n    print(\"\\n=== Special Attacks ===\")\n    \n    # Warrior builds rage first\n    warrior = characters[0]\n    warrior.attack(dummy)\n    warrior.attack(dummy)\n    warrior.special_attack(dummy)  # Berserker Rage\n    \n    # Mage has mana\n    mage = characters[1]\n    mage.special_attack(dummy)  # Fireball\n    \n    # Rogue needs stealth\n    rogue = characters[2]\n    rogue.enter_stealth()\n    rogue.special_attack(dummy)  # Backstab\n    \n    print(f\"\\n{dummy.name}: {dummy.health}/{dummy.max_health} HP\")\n\ndef leveling_demo():\n    \"\"\"Demonstrate leveling system\"\"\"\n    print(\"\\n\" + \"=\"*50)\n    print(\"LEVELING SYSTEM\")\n    print(\"=\"*50)\n    \n    hero = Rogue(\"Leveling Hero\")\n    print(f\"\\nStarting stats: {hero}\")\n    \n    print(\"\\n=== Gaining Experience ===\")\n    hero.add_experience(50)\n    hero.add_experience(30)\n    hero.add_experience(30)  # Should level up (needs 100)\n    \n    print(f\"\\nAfter level up: {hero}\")\n    \n    print(\"\\n=== Inventory Management ===\")\n    hero.add_item(\"Dagger of Shadows\")\n    hero.add_item(\"Health Potion x3\")\n    hero.add_item(\"Smoke Bomb\")\n    hero.show_inventory()\n\n# Run all demonstrations\ncombat_demo()\npolymorphism_demo()\nleveling_demo()\n\nprint(\"\\n\" + \"=\"*50)\nprint(Character.get_character_count())\nprint(\"=\"*50)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. God Class with Too Many Responsibilities**\n```python\n# WRONG - One class does everything\nclass Game:\n    def __init__(self):\n        self.player_health = 100\n        self.inventory = []\n        self.enemies = []\n\n    def attack(self): pass\n    def defend(self): pass\n    def render_graphics(self): pass\n    def play_sound(self): pass\n    def save_game(self): pass  # Too many responsibilities!\n\n# CORRECT - Split into focused classes\nclass Player:\n    def attack(self): pass\n    def defend(self): pass\n\nclass Renderer:\n    def render(self): pass\n\nclass AudioManager:\n    def play_sound(self): pass\n```\n\n**2. Not Initializing Inherited Attributes**\n```python\n# WRONG - Child forgets parent's __init__\nclass Character:\n    def __init__(self, name, health):\n        self.name = name\n        self.health = health\n\nclass Warrior(Character):\n    def __init__(self, name, weapon):\n        self.weapon = weapon  # health and name not set!\n\nw = Warrior(\"Conan\", \"Sword\")\nprint(w.health)  # AttributeError!\n\n# CORRECT - Always call parent's __init__\nclass Warrior(Character):\n    def __init__(self, name, health, weapon):\n        super().__init__(name, health)\n        self.weapon = weapon\n```\n\n**3. Modifying List Attributes from Multiple Characters**\n```python\n# WRONG - Shared class attribute modified by all\nclass Character:\n    abilities = []  # Shared between all characters!\n\n    def learn(self, ability):\n        self.abilities.append(ability)\n\nwarrior = Character()\nwarrior.learn(\"Slash\")\nmage = Character()\nprint(mage.abilities)  # ['Slash'] - Wrong!\n\n# CORRECT - Instance attribute for each character\nclass Character:\n    def __init__(self):\n        self.abilities = []  # Each instance gets own list\n```\n\n**4. Not Separating Game Logic from Display**\n```python\n# WRONG - Mixed logic and display\nclass Combat:\n    def attack(self, attacker, defender):\n        damage = attacker.power - defender.defense\n        defender.health -= damage\n        print(f\"{attacker.name} hits for {damage}!\")  # UI in logic!\n        print(\"=\"*40)\n\n# CORRECT - Separate concerns\nclass Combat:\n    def attack(self, attacker, defender):\n        damage = attacker.power - defender.defense\n        defender.health -= damage\n        return damage  # Return data, don't print\n\nclass Display:\n    def show_attack(self, attacker, damage):\n        print(f\"{attacker.name} hits for {damage}!\")\n```\n\n**5. Hardcoding Values Instead of Using Constants**\n```python\n# WRONG - Magic numbers throughout code\nclass Player:\n    def __init__(self):\n        self.health = 100\n        self.max_health = 100\n        self.damage = 10\n\n    def heal(self):\n        self.health = min(self.health + 25, 100)  # Magic numbers!\n\n# CORRECT - Use class constants\nclass Player:\n    MAX_HEALTH = 100\n    BASE_DAMAGE = 10\n    HEAL_AMOUNT = 25\n\n    def __init__(self):\n        self.health = self.MAX_HEALTH\n        self.damage = self.BASE_DAMAGE\n\n    def heal(self):\n        self.health = min(self.health + self.HEAL_AMOUNT, self.MAX_HEALTH)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **OOP organizes complex systems** - RPG demonstrates real-world structure\n- **Inheritance creates hierarchies** - Character ‚Üí Warrior/Mage/Rogue\n- **Polymorphism enables flexibility** - Same combat loop, different behaviors\n- **Encapsulation protects data** - Health/mana validated through properties\n- **Properties provide controlled access** - Can't set invalid values\n- **Class attributes track shared data** - Total character count\n- **Method overriding customizes behavior** - Each class has unique attacks\n- **super() maintains parent functionality** - Call parent then add custom logic"
            }
          ],
          "challenges": []
        }
      ]
    },
    {
      "id": "module-12",
      "title": "Decorators",
      "description": "Advanced function modification techniques",
      "difficulty": "advanced",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-12-lesson-01",
          "title": "Decorators",
          "moduleId": "module-12",
          "order": 1,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Gift Wrapping Functions",
              "content": "**Decorators = Function wrappers**\n\n**Think of gift wrapping:**\n- You have a gift (function)\n- You wrap it in fancy paper (decorator)\n- The gift is the same, but now it's enhanced!\n\n**What decorators do:**\n- Add functionality to existing functions\n- Without modifying the original function\n- Reusable across multiple functions\n\n**Common uses:**\n1. **Logging** üìù - Track when functions are called\n2. **Timing** ‚è±Ô∏è - Measure execution time\n3. **Authentication** üîê - Check permissions\n4. **Validation** ‚úÖ - Verify inputs\n5. **Caching** üíæ - Store results\n\n**Basic syntax:**\n```python\n@decorator_name\ndef my_function():\n    pass\n\n# Same as:\nmy_function = decorator_name(my_function)\n```\n\n**Key insight:**\nDecorators are functions that take a function and return a wrapped version."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Understanding Decorators",
              "content": "**How decorators work:**\n\n1. **Decorator function:**\n```python\ndef my_decorator(func):\n    def wrapper(*args, **kwargs):\n        # Before function call\n        result = func(*args, **kwargs)\n        # After function call\n        return result\n    return wrapper\n```\n\n2. **@ syntax:**\n```python\n@my_decorator\ndef my_func():\n    pass\n```\n\n3. **Stacking:**\n- Applied bottom-to-top\n- `@timer @log @validate` means: validate ‚Üí log ‚Üí timer\n\n4. **@wraps(func):**\n- Preserves original function's name, docstring\n- From functools module",
              "code": "import time\nfrom functools import wraps\n\n# Simple decorator without arguments\ndef timer_decorator(func):\n    \"\"\"Measures function execution time\"\"\"\n    @wraps(func)  # Preserves original function metadata\n    def wrapper(*args, **kwargs):\n        start = time.time()\n        result = func(*args, **kwargs)\n        end = time.time()\n        print(f\"{func.__name__} took {end - start:.4f} seconds\")\n        return result\n    return wrapper\n\ndef log_decorator(func):\n    \"\"\"Logs function calls\"\"\"\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        print(f\"Calling {func.__name__} with args={args}, kwargs={kwargs}\")\n        result = func(*args, **kwargs)\n        print(f\"{func.__name__} returned: {result}\")\n        return result\n    return wrapper\n\ndef validate_positive(func):\n    \"\"\"Validates that all arguments are positive numbers\"\"\"\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        for arg in args:\n            if isinstance(arg, (int, float)) and arg < 0:\n                raise ValueError(f\"All arguments must be positive, got {arg}\")\n        return func(*args, **kwargs)\n    return wrapper\n\n# Using decorators\nprint(\"=== Timer Decorator ===\")\n\n@timer_decorator\ndef slow_function():\n    \"\"\"Simulates slow operation\"\"\"\n    time.sleep(0.1)\n    return \"Done!\"\n\nresult = slow_function()\nprint(f\"Result: {result}\\n\")\n\nprint(\"=== Log Decorator ===\")\n\n@log_decorator\ndef add(a, b):\n    return a + b\n\nresult = add(5, 3)\nprint()\n\nprint(\"=== Validation Decorator ===\")\n\n@validate_positive\ndef calculate_area(width, height):\n    return width * height\n\nprint(f\"Area (5, 10): {calculate_area(5, 10)}\")\n\ntry:\n    calculate_area(-5, 10)\nexcept ValueError as e:\n    print(f\"Error: {e}\")\n\nprint(\"\\n=== Stacking Decorators ===\")\n\n@timer_decorator\n@log_decorator\n@validate_positive\ndef multiply(a, b):\n    return a * b\n\nprint(\"Calling multiply(4, 7):\")\nresult = multiply(4, 7)\n\nprint(\"\\n=== Without Decorator Syntax ===\")\ndef divide(a, b):\n    return a / b\n\n# Manual decoration (equivalent to @decorator)\ndivide_logged = log_decorator(divide)\nresult = divide_logged(10, 2)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic decorator pattern:**\n```python\ndef decorator(func):\n    def wrapper(*args, **kwargs):\n        # Do something before\n        result = func(*args, **kwargs)\n        # Do something after\n        return result\n    return wrapper\n\n@decorator\ndef my_function():\n    pass\n```\n\n**Decorator with arguments:**\n```python\ndef repeat(times):\n    def decorator(func):\n        def wrapper(*args, **kwargs):\n            for _ in range(times):\n                result = func(*args, **kwargs)\n            return result\n        return wrapper\n    return decorator\n\n@repeat(3)\ndef greet():\n    print(\"Hello!\")\n```\n\n**Class as decorator:**\n```python\nclass CountCalls:\n    def __init__(self, func):\n        self.func = func\n        self.count = 0\n    \n    def __call__(self, *args, **kwargs):\n        self.count += 1\n        print(f\"Call {self.count}\")\n        return self.func(*args, **kwargs)\n\n@CountCalls\ndef function():\n    pass\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Decorators with Arguments",
              "content": "**Decorator with arguments pattern:**\n\n```python\ndef decorator_with_args(arg1, arg2):\n    def decorator(func):\n        def wrapper(*args, **kwargs):\n            # Use arg1, arg2 here\n            return func(*args, **kwargs)\n        return wrapper\n    return decorator\n```\n\n**Three levels:**\n1. Outer function: takes decorator arguments\n2. Middle function: takes the function to decorate\n3. Inner wrapper: the actual wrapper\n\n**Class-based decorators:**\n- Use `__init__` to receive function\n- Use `__call__` to make instance callable\n- Can maintain state (like call count)",
              "code": "from functools import wraps\nimport time\n\n# Decorator factory (takes arguments)\ndef repeat(times):\n    \"\"\"Repeats function execution N times\"\"\"\n    def decorator(func):\n        @wraps(func)\n        def wrapper(*args, **kwargs):\n            result = None\n            for i in range(times):\n                print(f\"  Execution {i+1}/{times}\")\n                result = func(*args, **kwargs)\n            return result\n        return wrapper\n    return decorator\n\ndef retry(max_attempts=3, delay=1):\n    \"\"\"Retries function on exception\"\"\"\n    def decorator(func):\n        @wraps(func)\n        def wrapper(*args, **kwargs):\n            for attempt in range(max_attempts):\n                try:\n                    return func(*args, **kwargs)\n                except Exception as e:\n                    if attempt == max_attempts - 1:\n                        raise\n                    print(f\"Attempt {attempt + 1} failed: {e}. Retrying in {delay}s...\")\n                    time.sleep(delay)\n        return wrapper\n    return decorator\n\ndef cache_result(func):\n    \"\"\"Simple caching decorator\"\"\"\n    cached = {}\n    @wraps(func)\n    def wrapper(*args):\n        if args in cached:\n            print(f\"  Cache hit for {args}\")\n            return cached[args]\n        print(f\"  Computing for {args}\")\n        result = func(*args)\n        cached[args] = result\n        return result\n    return wrapper\n\nprint(\"=== Repeat Decorator ===\")\n\n@repeat(times=3)\ndef greet(name):\n    print(f\"  Hello, {name}!\")\n\ngreet(\"Alice\")\n\nprint(\"\\n=== Retry Decorator ===\")\n\nattempt_count = 0\n\n@retry(max_attempts=3, delay=0.5)\ndef unreliable_function():\n    global attempt_count\n    attempt_count += 1\n    if attempt_count < 3:\n        raise ConnectionError(\"Network error\")\n    return \"Success!\"\n\nresult = unreliable_function()\nprint(f\"Final result: {result}\")\n\nprint(\"\\n=== Cache Decorator ===\")\n\n@cache_result\ndef fibonacci(n):\n    if n < 2:\n        return n\n    return fibonacci(n-1) + fibonacci(n-2)\n\nprint(\"First call:\")\nresult = fibonacci(5)\nprint(f\"fibonacci(5) = {result}\")\n\nprint(\"\\nSecond call (should use cache):\")\nresult = fibonacci(5)\nprint(f\"fibonacci(5) = {result}\")\n\nprint(\"\\n=== Class-Based Decorator ===\")\n\nclass CountCalls:\n    \"\"\"Decorator that counts function calls\"\"\"\n    def __init__(self, func):\n        self.func = func\n        self.count = 0\n        self.__name__ = func.__name__\n    \n    def __call__(self, *args, **kwargs):\n        self.count += 1\n        print(f\"[Call #{self.count}] {self.func.__name__}\")\n        return self.func(*args, **kwargs)\n    \n    def reset_count(self):\n        self.count = 0\n\n@CountCalls\ndef process_data(data):\n    return f\"Processed: {data}\"\n\nprocess_data(\"A\")\nprocess_data(\"B\")\nprocess_data(\"C\")\nprint(f\"Total calls: {process_data.count}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting @wraps - Losing Function Metadata**\n```python\n# WRONG - Original function name/docstring is lost\ndef my_decorator(func):\n    def wrapper(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrapper\n\n@my_decorator\ndef greet():\n    \"\"\"Says hello\"\"\"\n    pass\n\nprint(greet.__name__)  # Prints 'wrapper', not 'greet'\n\n# CORRECT - Preserve metadata with @wraps\nfrom functools import wraps\n\ndef my_decorator(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrapper\n```\n\n**2. Not Returning the Wrapper Function**\n```python\n# WRONG - Decorator doesn't return wrapper\ndef my_decorator(func):\n    def wrapper(*args, **kwargs):\n        return func(*args, **kwargs)\n    # Missing return!\n\n@my_decorator\ndef greet():\n    print(\"Hello\")\n\ngreet()  # TypeError: 'NoneType' object is not callable\n\n# CORRECT - Always return the wrapper\ndef my_decorator(func):\n    def wrapper(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrapper  # Don't forget this!\n```\n\n**3. Forgetting *args and **kwargs in Wrapper**\n```python\n# WRONG - Wrapper doesn't accept arguments\ndef my_decorator(func):\n    def wrapper():  # No parameters!\n        return func()\n    return wrapper\n\n@my_decorator\ndef add(a, b):\n    return a + b\n\nadd(2, 3)  # TypeError: wrapper() takes 0 arguments\n\n# CORRECT - Accept any arguments\ndef my_decorator(func):\n    def wrapper(*args, **kwargs):\n        return func(*args, **kwargs)\n    return wrapper\n```\n\n**4. Confusing Decorator vs Decorator Factory**\n```python\n# WRONG - Using parentheses when not needed\n@my_decorator()  # Error if my_decorator doesn't return a decorator\ndef greet():\n    pass\n\n# CORRECT - No parentheses for simple decorator\n@my_decorator\ndef greet():\n    pass\n\n# CORRECT - Parentheses only for decorator factories\n@repeat(times=3)  # repeat() returns the actual decorator\ndef greet():\n    pass\n```\n\n**5. Not Returning the Original Function's Result**\n```python\n# WRONG - Wrapper doesn't return the result\ndef my_decorator(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        print(\"Before\")\n        func(*args, **kwargs)  # Result is lost!\n        print(\"After\")\n    return wrapper\n\n@my_decorator\ndef add(a, b):\n    return a + b\n\nresult = add(2, 3)  # Returns None!\n\n# CORRECT - Return the function's result\ndef my_decorator(func):\n    @wraps(func)\n    def wrapper(*args, **kwargs):\n        print(\"Before\")\n        result = func(*args, **kwargs)\n        print(\"After\")\n        return result  # Return the result!\n    return wrapper\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Decorators wrap functions** to add functionality without modifying them\n- **@decorator syntax** is shorthand for `func = decorator(func)`\n- **Use @wraps(func)** from functools to preserve function metadata\n- **Pattern: def decorator(func): def wrapper(): return wrapper**\n- **Decorators with arguments** require an extra level (factory pattern)\n- **Stack decorators** by using multiple @ - applied bottom to top\n- **Class-based decorators** use __init__ and __call__\n- **Common uses:** logging, timing, validation, caching, authentication"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-01-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a @benchmark decorator that:\n- Measures execution time\n- Counts function calls\n- Prints results in a formatted way\n- Works with any function",
              "instructions": "Create a @benchmark decorator that:\n- Measures execution time\n- Counts function calls\n- Prints results in a formatted way\n- Works with any function",
              "starterCode": "from functools import wraps\nimport time\n\nclass benchmark:\n    # TODO: Implement __init__ to receive function\n    # TODO: Track call_count and total_time\n    \n    def __init__(self, func):\n        pass\n    \n    # TODO: Implement __call__ to wrap function\n    def __call__(self, *args, **kwargs):\n        pass\n    \n    # TODO: Add method to print stats\n    def print_stats(self):\n        pass\n\n# Test the decorator\n@benchmark\ndef calculate(n):\n    total = sum(range(n))\n    return total\n\n# TODO: Call function multiple times\n# TODO: Print statistics",
              "solution": "from functools import wraps\nimport time\n\n# Benchmark Decorator Class\n# This solution demonstrates class-based decorators\n\nclass benchmark:\n    \"\"\"Decorator that benchmarks function execution.\"\"\"\n    \n    def __init__(self, func):\n        \"\"\"Store the decorated function.\"\"\"\n        self.func = func\n        self.call_count = 0\n        self.total_time = 0.0\n        # Preserve function metadata\n        wraps(func)(self)\n    \n    def __call__(self, *args, **kwargs):\n        \"\"\"Execute function and track metrics.\"\"\"\n        # Measure execution time\n        start = time.time()\n        result = self.func(*args, **kwargs)\n        elapsed = time.time() - start\n        \n        # Update statistics\n        self.call_count += 1\n        self.total_time += elapsed\n        \n        # Print timing info\n        print(f\"[{self.func.__name__}] Call #{self.call_count}: {elapsed:.6f}s\")\n        \n        return result\n    \n    def print_stats(self):\n        \"\"\"Print accumulated statistics.\"\"\"\n        avg_time = self.total_time / self.call_count if self.call_count > 0 else 0\n        print(f\"\\n=== Benchmark Stats for '{self.func.__name__}' ===\")\n        print(f\"  Total calls: {self.call_count}\")\n        print(f\"  Total time: {self.total_time:.6f}s\")\n        print(f\"  Avg time: {avg_time:.6f}s\")\n    \n    def reset(self):\n        \"\"\"Reset statistics.\"\"\"\n        self.call_count = 0\n        self.total_time = 0.0\n\n# Test the decorator\n@benchmark\ndef calculate(n):\n    \"\"\"Calculate sum of range.\"\"\"\n    total = sum(range(n))\n    return total\n\n@benchmark\ndef slow_function():\n    \"\"\"Simulated slow function.\"\"\"\n    time.sleep(0.1)\n    return \"done\"\n\n# Call functions multiple times\nprint(\"=== Testing calculate() ===\")\nfor i in [100000, 500000, 1000000]:\n    result = calculate(i)\n    print(f\"  Result: {result:,}\")\n\nprint(\"\\n=== Testing slow_function() ===\")\nfor _ in range(3):\n    slow_function()\n\n# Print statistics\ncalculate.print_stats()\nslow_function.print_stats()",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use time.time() to measure execution time. Track count in __call__. Store cumulative time."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-12-lesson-02",
          "title": "Generators and Iterators",
          "moduleId": "module-12",
          "order": 2,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: One Item at a Time",
              "content": "**Generators = Lazy iterators**\n\n**Think of a streaming service:**\n- **List approach:** Download entire movie first, then watch\n  - Uses lots of memory\n  - Have to wait for full download\n\n- **Generator approach:** Stream one frame at a time\n  - Minimal memory\n  - Start watching immediately\n  - Only load what you need\n\n**Why use generators?**\n\n1. **Memory Efficient** üíæ\n   - Don't store all values\n   - Generate on-demand\n   - Perfect for large datasets\n\n2. **Lazy Evaluation** üò¥\n   - Only compute when needed\n   - Can represent infinite sequences\n\n3. **Pipeline Processing** ‚ö°\n   - Chain operations efficiently\n   - Process streams of data\n\n**Key difference:**\n```python\n# List - all at once\ndef get_numbers():\n    return [1, 2, 3, 4, 5]  # All in memory\n\n# Generator - one at a time\ndef get_numbers():\n    yield 1\n    yield 2\n    yield 3\n    yield 4\n    yield 5  # Generated on demand\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Generators with yield",
              "content": "**yield keyword:**\n- Pauses function execution\n- Returns value to caller\n- Remembers state\n- Resumes on next iteration\n\n**Generator features:**\n- `next(gen)`: Get next value\n- `gen.send(value)`: Send value to generator\n- `gen.close()`: Stop generator\n- One-time use (exhausted after iteration)\n\n**Memory comparison:**\n```python\nlist(range(1000000))      # 8MB+ memory\n(x for x in range(1000000))  # ~128 bytes\n```",
              "code": "# Regular function returns list (all at once)\ndef count_up_to_list(n):\n    \"\"\"Returns list of numbers - uses memory\"\"\"\n    result = []\n    for i in range(1, n + 1):\n        result.append(i)\n    return result\n\n# Generator function uses yield (one at a time)\ndef count_up_to_generator(n):\n    \"\"\"Yields numbers one by one - memory efficient\"\"\"\n    for i in range(1, n + 1):\n        print(f\"  Generating {i}\")\n        yield i\n\nprint(\"=== List vs Generator ===\")\nprint(\"\\nList (all at once):\")\nlist_result = count_up_to_list(5)\nprint(f\"Type: {type(list_result)}\")\nprint(f\"Values: {list_result}\")\nprint(f\"Can iterate again: {list(list_result)}\")\n\nprint(\"\\nGenerator (one at a time):\")\ngen_result = count_up_to_generator(5)\nprint(f\"Type: {type(gen_result)}\")\nprint(\"Iterating through generator:\")\nfor num in gen_result:\n    print(f\"    Got: {num}\")\n\nprint(\"\\nTrying to iterate again (generator exhausted):\")\nprint(f\"List: {list(gen_result)}\")\n\nprint(\"\\n=== Practical Example: Reading Large File ===\")\n\ndef read_file_list(filename):\n    \"\"\"Reads entire file into memory\"\"\"\n    with open(filename) as f:\n        return f.readlines()  # All lines at once\n\ndef read_file_generator(filename):\n    \"\"\"Yields lines one at a time\"\"\"\n    with open(filename) as f:\n        for line in f:\n            yield line.strip()\n\n# Create test file\nwith open('test.txt', 'w') as f:\n    for i in range(5):\n        f.write(f\"Line {i + 1}\\n\")\n\nprint(\"\\nUsing generator to read file:\")\nfor line in read_file_generator('test.txt'):\n    print(f\"  {line}\")\n\nprint(\"\\n=== Generator with State ===\")\n\ndef fibonacci_generator(limit):\n    \"\"\"Generate Fibonacci sequence\"\"\"\n    a, b = 0, 1\n    count = 0\n    while count < limit:\n        yield a\n        a, b = b, a + b\n        count += 1\n\nprint(\"Fibonacci numbers:\")\nfor num in fibonacci_generator(10):\n    print(num, end=\" \")\nprint()\n\nprint(\"\\n=== Infinite Generator ===\")\n\ndef infinite_counter(start=0):\n    \"\"\"Infinite sequence - only possible with generators!\"\"\"\n    while True:\n        yield start\n        start += 1\n\nprint(\"First 10 from infinite counter:\")\ncounter = infinite_counter(100)\nfor _ in range(10):\n    print(next(counter), end=\" \")\nprint()\n\nprint(\"\\n=== Generator with Send ===\")\n\ndef echo_generator():\n    \"\"\"Generator that can receive values\"\"\"\n    while True:\n        received = yield\n        if received:\n            print(f\"  Received: {received}\")\n            yield f\"Echo: {received}\"\n\necho = echo_generator()\nnext(echo)  # Prime the generator\nresponse = echo.send(\"Hello\")\nprint(f\"  {response}\")\nnext(echo)\nresponse = echo.send(\"World\")\nprint(f\"  {response}\")\n\nimport os\nos.remove('test.txt')",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Generator function:**\n```python\ndef my_generator():\n    yield 1\n    yield 2\n    yield 3\n\ngen = my_generator()  # Creates generator object\nprint(next(gen))      # 1\nprint(next(gen))      # 2\n```\n\n**Generator expression:**\n```python\n# List comprehension (all at once)\nsquares_list = [x**2 for x in range(10)]\n\n# Generator expression (lazy)\nsquares_gen = (x**2 for x in range(10))\n```\n\n**Iterator protocol:**\n```python\nclass MyIterator:\n    def __iter__(self):\n        return self\n    \n    def __next__(self):\n        # Return next value or raise StopIteration\n        pass\n```\n\n**Using generators:**\n```python\n# In for loop\nfor item in my_generator():\n    print(item)\n\n# With next()\ngen = my_generator()\nvalue = next(gen)\n\n# Convert to list (caution: loads all into memory)\nall_values = list(my_generator())\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Generator Expressions and Pipelines",
              "content": "**Generator expressions:**\n- Syntax: `(expression for item in iterable)`\n- Like list comprehension but with ()\n- Lazy evaluation\n- Much more memory efficient\n\n**Generator pipelines:**\n- Chain generators together\n- Each stage processes one item at a time\n- Very efficient for large datasets\n- Data flows through on demand\n\n**Benefits:**\n```python\n# Instead of:\ndata = read_all()           # 1GB in memory\nfiltered = filter_data(data) # 2GB in memory\nresult = process(filtered)   # 3GB in memory\n\n# Do this:\nresult = process(filter_data(read_all()))\n# Only processes one item at a time!\n```",
              "code": "print(\"=== Generator Expression vs List Comprehension ===\")\n\nimport sys\n\n# List comprehension - creates full list\nsquares_list = [x**2 for x in range(1000)]\nprint(f\"List size: {sys.getsizeof(squares_list)} bytes\")\n\n# Generator expression - lazy evaluation\nsquares_gen = (x**2 for x in range(1000))\nprint(f\"Generator size: {sys.getsizeof(squares_gen)} bytes\")\nprint(f\"Memory savings: {sys.getsizeof(squares_list) / sys.getsizeof(squares_gen):.1f}x\\n\")\n\nprint(\"=== Generator Pipeline ===\")\n\ndef read_numbers():\n    \"\"\"Simulate reading data\"\"\"\n    for i in range(1, 11):\n        print(f\"  Reading: {i}\")\n        yield i\n\ndef square(numbers):\n    \"\"\"Square each number\"\"\"\n    for n in numbers:\n        print(f\"  Squaring: {n}\")\n        yield n ** 2\n\ndef filter_large(numbers, threshold=50):\n    \"\"\"Filter numbers above threshold\"\"\"\n    for n in numbers:\n        if n > threshold:\n            print(f\"  Filtering: {n} (kept)\")\n            yield n\n        else:\n            print(f\"  Filtering: {n} (dropped)\")\n\n# Build pipeline (no execution yet!)\nprint(\"Building pipeline (lazy - nothing happens yet)...\")\npipeline = filter_large(square(read_numbers()), threshold=50)\nprint(f\"Pipeline created: {pipeline}\\n\")\n\nprint(\"Executing pipeline (pulling values)...\")\nresults = list(pipeline)\nprint(f\"\\nFinal results: {results}\")\n\nprint(\"\\n=== Practical Example: Data Processing ===\")\n\ndef read_log_lines(filename):\n    \"\"\"Read log file line by line\"\"\"\n    with open(filename) as f:\n        for line in f:\n            yield line.strip()\n\ndef parse_log_line(lines):\n    \"\"\"Parse log lines into structured data\"\"\"\n    for line in lines:\n        parts = line.split('|')\n        if len(parts) >= 3:\n            yield {\n                'timestamp': parts[0],\n                'level': parts[1],\n                'message': parts[2]\n            }\n\ndef filter_errors(logs):\n    \"\"\"Filter only ERROR level logs\"\"\"\n    for log in logs:\n        if log['level'] == 'ERROR':\n            yield log\n\n# Create sample log file\nwith open('app.log', 'w') as f:\n    f.write('2024-01-01 10:00|INFO|Application started\\n')\n    f.write('2024-01-01 10:05|ERROR|Database connection failed\\n')\n    f.write('2024-01-01 10:10|INFO|Retrying connection\\n')\n    f.write('2024-01-01 10:15|ERROR|Authentication failed\\n')\n    f.write('2024-01-01 10:20|INFO|Application stopped\\n')\n\nprint(\"Processing logs (memory efficient):\")\nlog_pipeline = filter_errors(parse_log_line(read_log_lines('app.log')))\n\nfor error in log_pipeline:\n    print(f\"  ERROR at {error['timestamp']}: {error['message']}\")\n\nprint(\"\\n=== Generator with Cleanup ===\")\n\ndef managed_resource():\n    \"\"\"Generator with setup and teardown\"\"\"\n    print(\"  Setting up resource...\")\n    resource = \"Database Connection\"\n    try:\n        for i in range(3):\n            print(f\"  Using resource: {i}\")\n            yield resource\n    finally:\n        print(\"  Cleaning up resource...\")\n\nprint(\"Using generator with cleanup:\")\nfor item in managed_resource():\n    print(f\"  Got: {item}\")\n\nimport os\nos.remove('app.log')",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Trying to Reuse an Exhausted Generator**\n```python\n# WRONG - Generator is exhausted after first use\ndef numbers():\n    yield 1\n    yield 2\n    yield 3\n\ngen = numbers()\nprint(list(gen))  # [1, 2, 3]\nprint(list(gen))  # [] - Empty! Generator exhausted\n\n# CORRECT - Create a new generator each time\nprint(list(numbers()))  # [1, 2, 3]\nprint(list(numbers()))  # [1, 2, 3]\n```\n\n**2. Using return Instead of yield**\n```python\n# WRONG - Returns only once, not a generator\ndef get_numbers():\n    for i in range(5):\n        return i  # Stops immediately!\n\nresult = get_numbers()\nprint(result)  # Just 0, not a generator\n\n# CORRECT - Use yield to create generator\ndef get_numbers():\n    for i in range(5):\n        yield i  # Pauses and resumes\n\nfor num in get_numbers():\n    print(num)  # 0, 1, 2, 3, 4\n```\n\n**3. Calling len() on a Generator**\n```python\n# WRONG - Generators don't support len()\ngen = (x for x in range(100))\nprint(len(gen))  # TypeError: object has no len()\n\n# CORRECT - Convert to list first (uses memory)\ngen = (x for x in range(100))\nprint(len(list(gen)))  # 100\n\n# BETTER - Use a separate counter if you need length\ncount = sum(1 for _ in gen)\n```\n\n**4. Storing Generator Expression Without Calling**\n```python\n# WRONG - Generator created but source changes\nnumbers = [1, 2, 3]\ngen = (x * 2 for x in numbers)\nnumbers.append(4)  # Modifying source!\nprint(list(gen))  # [2, 4, 6, 8] - Includes 4!\n\n# CORRECT - Use list() to capture values immediately\nnumbers = [1, 2, 3]\nresult = list(x * 2 for x in numbers)  # Captured now\nnumbers.append(4)\nprint(result)  # [2, 4, 6] - Original values\n```\n\n**5. Using next() Without StopIteration Handling**\n```python\n# WRONG - StopIteration crashes program\ndef limited():\n    yield 1\n    yield 2\n\ngen = limited()\nprint(next(gen))  # 1\nprint(next(gen))  # 2\nprint(next(gen))  # StopIteration error!\n\n# CORRECT - Provide default value\ngen = limited()\nprint(next(gen, 'done'))  # 1\nprint(next(gen, 'done'))  # 2\nprint(next(gen, 'done'))  # 'done' - No error\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Generators use yield instead of return** - pause and resume execution\n- **Memory efficient** - generate values on demand, don't store all\n- **One-time use** - exhausted after iteration, can't reuse\n- **Generator expressions:** (x for x in iterable) - like list comp with ()\n- **Perfect for large datasets** - process millions of items with minimal memory\n- **Pipeline processing** - chain generators for efficient data transformation\n- **Infinite sequences possible** - while True: yield x\n- **Use next(gen) to get next value** - for loops call this automatically"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-02-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a batched_reader generator that:\n- Reads numbers from 1 to N\n- Yields them in batches of specified size\n- Example: batched_reader(10, batch_size=3) yields [1,2,3], [4,5,6], [7,8,9], [10]",
              "instructions": "Create a batched_reader generator that:\n- Reads numbers from 1 to N\n- Yields them in batches of specified size\n- Example: batched_reader(10, batch_size=3) yields [1,2,3], [4,5,6], [7,8,9], [10]",
              "starterCode": "def batched_reader(n, batch_size=10):\n    \"\"\"Yield numbers in batches\"\"\"\n    # TODO: Implement generator that yields batches\n    pass\n\n# Test your generator\nfor batch in batched_reader(25, batch_size=7):\n    print(f\"Batch: {batch}\")",
              "solution": "# Batched Reader Generator\n# This solution demonstrates generators for batch processing\n\ndef batched_reader(n, batch_size=10):\n    \"\"\"Yield numbers 1 to n in batches.\n    \n    Args:\n        n: Upper limit (inclusive)\n        batch_size: Size of each batch\n        \n    Yields:\n        Lists of numbers in batches\n    \"\"\"\n    batch = []\n    \n    for num in range(1, n + 1):\n        batch.append(num)\n        \n        # Yield when batch is full\n        if len(batch) == batch_size:\n            yield batch\n            batch = []  # Start new batch\n    \n    # Don't forget the final partial batch\n    if batch:\n        yield batch\n\n# Alternative implementation using list slicing\ndef batched_reader_v2(n, batch_size=10):\n    \"\"\"Alternative implementation using range slicing.\"\"\"\n    numbers = list(range(1, n + 1))\n    for i in range(0, len(numbers), batch_size):\n        yield numbers[i:i + batch_size]\n\n# Test the generator\nprint(\"=== Batched Reader Demo ===\")\n\nprint(\"\\nBatches of 7 from 1-25:\")\nfor batch in batched_reader(25, batch_size=7):\n    print(f\"  Batch: {batch}\")\n\nprint(\"\\nBatches of 5 from 1-12:\")\nfor batch in batched_reader(12, batch_size=5):\n    print(f\"  Batch: {batch}\")\n\nprint(\"\\nBatches of 3 from 1-10:\")\nfor batch in batched_reader(10, batch_size=3):\n    print(f\"  Batch: {batch}\")\n\n# Show memory efficiency\nprint(\"\\n=== Memory Efficiency ===\")\nprint(\"Generator yields batches one at a time,\")\nprint(\"not loading all data into memory at once!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use a loop with range(1, n+1). Accumulate items in a list, yield when batch is full, and don't forget the final partial batch."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-12-lesson-03",
          "title": "Context Managers",
          "moduleId": "module-12",
          "order": 3,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Automatic Cleanup",
              "content": "**Context Managers = Guaranteed cleanup**\n\n**Think of borrowing a library book:**\n- ‚ùå **Without context manager:**\n  ```\n  1. Check out book\n  2. Read it\n  3. Forget to return it!\n  4. Get fined\n  ```\n\n- ‚úÖ **With context manager:**\n  ```\n  1. Auto check-out when you enter library\n  2. Read\n  3. Auto return when you leave\n  4. No fines!\n  ```\n\n**The problem they solve:**\n```python\n# Easy to forget cleanup!\nfile = open('data.txt')\ndata = file.read()\n# Oops, forgot file.close()!\n# File handle stays open\n```\n\n```python\n# Context manager guarantees cleanup\nwith open('data.txt') as file:\n    data = file.read()\n# File automatically closed, even if error!\n```\n\n**Common use cases:**\n1. **File handling** üìÅ - Auto close files\n2. **Database connections** üóÑÔ∏è - Auto close connections\n3. **Locks** üîí - Auto release locks\n4. **Transactions** üí≥ - Auto commit/rollback\n5. **Temporary state** ‚è±Ô∏è - Auto restore state\n\n**Key benefit:** Cleanup happens EVEN IF ERRORS OCCUR!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Understanding with Statement",
              "content": "**The `with` statement:**\n\n1. **Calls `__enter__()`:**\n   - Runs setup code\n   - Returns resource (file object)\n\n2. **Executes code block:**\n   - Your code runs\n   - Uses the resource\n\n3. **Calls `__exit__()`:**\n   - Runs cleanup code\n   - ALWAYS executes, even on errors\n   - Receives exception info if error occurred\n\n**Multiple context managers:**\n```python\n# Old way\nwith open('a.txt') as f1:\n    with open('b.txt') as f2:\n        ...\n\n# Modern way (Python 3.1+)\nwith open('a.txt') as f1, open('b.txt') as f2:\n    ...\n```",
              "code": "print(\"=== Without Context Manager ===\")\n\n# Manual resource management (error-prone)\ndef read_file_manual(filename):\n    file = None\n    try:\n        file = open(filename, 'r')\n        content = file.read()\n        return content\n    except Exception as e:\n        print(f\"Error: {e}\")\n        return None\n    finally:\n        if file:\n            file.close()\n            print(\"File closed manually\")\n\n# Create test file\nwith open('test.txt', 'w') as f:\n    f.write('Hello, World!')\n\nresult = read_file_manual('test.txt')\nprint(f\"Content: {result}\\n\")\n\nprint(\"=== With Context Manager ===\")\n\n# Clean and simple\ndef read_file_context(filename):\n    with open(filename, 'r') as file:\n        content = file.read()\n        return content\n    # File automatically closed here!\n\nresult = read_file_context('test.txt')\nprint(f\"Content: {result}\")\nprint(\"File automatically closed\\n\")\n\nprint(\"=== Context Manager with Error ===\")\n\ntry:\n    with open('test.txt', 'r') as file:\n        content = file.read()\n        print(f\"Read: {content}\")\n        raise ValueError(\"Simulated error!\")\n        print(\"This never executes\")\nexcept ValueError as e:\n    print(f\"Caught: {e}\")\n    print(\"File was still closed automatically!\\n\")\n\nprint(\"=== Multiple Context Managers ===\")\n\n# Create two files\nwith open('input.txt', 'w') as f:\n    f.write('Line 1\\nLine 2\\nLine 3')\n\n# Use multiple context managers\nwith open('input.txt', 'r') as infile, open('output.txt', 'w') as outfile:\n    for line in infile:\n        outfile.write(line.upper())\n    print(\"Copied and uppercased to output.txt\")\n# Both files automatically closed\n\nwith open('output.txt', 'r') as f:\n    print(f\"Output: {f.read()}\")\n\nprint(\"\\n=== What Happens Behind the Scenes ===\")\n\nclass FileSimulator:\n    \"\"\"Simulates what happens with context manager\"\"\"\n    def __init__(self, filename):\n        self.filename = filename\n        self.file = None\n    \n    def __enter__(self):\n        print(f\"  __enter__ called: Opening {self.filename}\")\n        self.file = open(self.filename, 'r')\n        return self.file\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print(f\"  __exit__ called: Closing {self.filename}\")\n        if self.file:\n            self.file.close()\n        if exc_type:\n            print(f\"  Exception occurred: {exc_type.__name__}: {exc_val}\")\n        return False  # Don't suppress exceptions\n\nprint(\"Using custom FileSimulator:\")\nwith FileSimulator('test.txt') as f:\n    content = f.read()\n    print(f\"  Read content: {content}\")\nprint(\"  Back outside context\\n\")\n\nimport os\nfor filename in ['test.txt', 'input.txt', 'output.txt']:\n    if os.path.exists(filename):\n        os.remove(filename)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic context manager usage:**\n```python\nwith expression as variable:\n    # Use variable\n    pass\n# Cleanup happened automatically\n```\n\n**Creating context manager (class-based):**\n```python\nclass MyContext:\n    def __enter__(self):\n        # Setup\n        return resource\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        # Cleanup\n        return False  # Don't suppress exceptions\n\nwith MyContext() as resource:\n    # Use resource\n    pass\n```\n\n**__exit__ parameters:**\n- `exc_type`: Exception class (or None)\n- `exc_val`: Exception instance (or None)\n- `exc_tb`: Traceback (or None)\n- Return True to suppress exception\n- Return False/None to propagate exception\n\n**Multiple managers:**\n```python\nwith context1() as c1, context2() as c2:\n    # Use both\n    pass\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Custom Context Managers",
              "content": "**Two ways to create context managers:**\n\n**1. Class-based (more control):**\n```python\nclass MyContext:\n    def __enter__(self): ...\n    def __exit__(self, ...): ...\n```\n- More verbose\n- Full control over behavior\n- Can maintain complex state\n\n**2. Function-based with @contextmanager:**\n```python\n@contextmanager\ndef my_context():\n    # Setup\n    yield resource\n    # Cleanup\n```\n- Simpler syntax\n- Code before yield = __enter__\n- Code after yield = __exit__\n- Must use try/finally for proper cleanup\n\n**Suppressing exceptions:**\n- Return True from __exit__ to suppress\n- Use carefully - can hide bugs!",
              "code": "import time\nfrom contextlib import contextmanager\n\nprint(\"=== Class-Based Context Manager ===\")\n\nclass Timer:\n    \"\"\"Context manager for timing code blocks\"\"\"\n    \n    def __init__(self, name=\"Code block\"):\n        self.name = name\n        self.start_time = None\n        self.elapsed = None\n    \n    def __enter__(self):\n        print(f\"Starting timer: {self.name}\")\n        self.start_time = time.time()\n        return self\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        self.elapsed = time.time() - self.start_time\n        print(f\"Finished: {self.name} took {self.elapsed:.4f}s\")\n        return False\n\nwith Timer(\"Sleep test\"):\n    time.sleep(0.1)\n\nprint()\n\nclass DatabaseConnection:\n    \"\"\"Simulates database connection manager\"\"\"\n    \n    def __init__(self, db_name):\n        self.db_name = db_name\n        self.connected = False\n    \n    def __enter__(self):\n        print(f\"  Connecting to {self.db_name}...\")\n        self.connected = True\n        print(f\"  Connected!\")\n        return self\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        if exc_type:\n            print(f\"  Rolling back due to error: {exc_val}\")\n        else:\n            print(f\"  Committing changes...\")\n        print(f\"  Closing connection to {self.db_name}\")\n        self.connected = False\n        return False\n    \n    def execute(self, query):\n        if not self.connected:\n            raise RuntimeError(\"Not connected!\")\n        print(f\"  Executing: {query}\")\n        return \"Success\"\n\nprint(\"\\nSuccessful transaction:\")\nwith DatabaseConnection(\"users.db\") as db:\n    db.execute(\"SELECT * FROM users\")\n    db.execute(\"UPDATE users SET active=1\")\n\nprint(\"\\nTransaction with error:\")\ntry:\n    with DatabaseConnection(\"users.db\") as db:\n        db.execute(\"SELECT * FROM users\")\n        raise ValueError(\"Something went wrong!\")\n        db.execute(\"This never runs\")\nexcept ValueError:\n    print(\"  Error handled\\n\")\n\nprint(\"=== Function-Based with @contextmanager ===\")\n\n@contextmanager\ndef timer(name):\n    \"\"\"Function-based timer context manager\"\"\"\n    print(f\"Starting: {name}\")\n    start = time.time()\n    try:\n        yield  # Code block runs here\n    finally:\n        elapsed = time.time() - start\n        print(f\"Finished: {name} took {elapsed:.4f}s\")\n\nwith timer(\"Quick operation\"):\n    time.sleep(0.05)\n    print(\"  Doing work...\")\n\nprint()\n\n@contextmanager\ndef temporary_directory_change(path):\n    \"\"\"Temporarily change directory\"\"\"\n    import os\n    original = os.getcwd()\n    print(f\"  Changing to: {path}\")\n    os.chdir(path)\n    try:\n        yield original\n    finally:\n        print(f\"  Restoring to: {original}\")\n        os.chdir(original)\n\nprint(\"Current directory example:\")\nimport os\nprint(f\"Before: {os.getcwd()}\")\nwith temporary_directory_change('/tmp'):\n    print(f\"Inside: {os.getcwd()}\")\nprint(f\"After: {os.getcwd()}\")\n\nprint(\"\\n=== Suppressing Exceptions ===\")\n\nclass IgnoreErrors:\n    \"\"\"Context manager that suppresses exceptions\"\"\"\n    \n    def __init__(self, *exception_types):\n        self.exception_types = exception_types or (Exception,)\n    \n    def __enter__(self):\n        return self\n    \n    def __exit__(self, exc_type, exc_val, exc_tb):\n        if exc_type and issubclass(exc_type, self.exception_types):\n            print(f\"  Suppressed: {exc_type.__name__}: {exc_val}\")\n            return True  # Suppress the exception\n        return False\n\nprint(\"Suppressing ValueError:\")\nwith IgnoreErrors(ValueError):\n    print(\"  Before error\")\n    raise ValueError(\"This will be suppressed\")\n    print(\"  This won't run\")\nprint(\"  Continued after context\\n\")\n\nprint(\"Not suppressing TypeError:\")\ntry:\n    with IgnoreErrors(ValueError):\n        print(\"  Before error\")\n        raise TypeError(\"This will NOT be suppressed\")\nexcept TypeError as e:\n    print(f\"  Caught: {e}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Return the Resource in __enter__**\n```python\n# WRONG - __enter__ returns None\nclass FileManager:\n    def __init__(self, filename):\n        self.file = open(filename, 'r')\n    \n    def __enter__(self):\n        pass  # Returns None!\n    \n    def __exit__(self, *args):\n        self.file.close()\n\nwith FileManager('data.txt') as f:\n    f.read()  # AttributeError: 'NoneType' has no attribute 'read'\n\n# CORRECT - Return the resource\nclass FileManager:\n    def __enter__(self):\n        return self.file  # Return the resource!\n```\n\n**2. Missing try/finally in @contextmanager**\n```python\n# WRONG - Cleanup doesn't run on exception\nfrom contextlib import contextmanager\n\n@contextmanager\ndef managed_resource():\n    print('Setup')\n    yield 'resource'\n    print('Cleanup')  # NEVER runs if exception!\n\n# CORRECT - Use try/finally\n@contextmanager\ndef managed_resource():\n    print('Setup')\n    try:\n        yield 'resource'\n    finally:\n        print('Cleanup')  # Always runs!\n```\n\n**3. Returning True in __exit__ Accidentally**\n```python\n# WRONG - Silently swallows exceptions\nclass BadManager:\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print('Cleaning up')\n        return True  # Suppresses ALL exceptions!\n\nwith BadManager():\n    raise ValueError('Error!')  # Silently ignored!\n\n# CORRECT - Return False or None\nclass GoodManager:\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        print('Cleaning up')\n        return False  # Let exceptions propagate\n```\n\n**4. Using Resource After Context Closes**\n```python\n# WRONG - Using resource after context ends\nwith open('data.txt', 'r') as f:\n    pass  # Context ends here\n\ncontent = f.read()  # ValueError: I/O operation on closed file\n\n# CORRECT - Read inside the context\nwith open('data.txt', 'r') as f:\n    content = f.read()  # Read while file is open\n\nprint(content)  # Use the data after\n```\n\n**5. Multiple yields in @contextmanager**\n```python\n# WRONG - Multiple yields cause RuntimeError\nfrom contextlib import contextmanager\n\n@contextmanager\ndef bad_manager():\n    yield 'first'\n    yield 'second'  # RuntimeError: generator didn't stop!\n\n# CORRECT - Exactly one yield\n@contextmanager\ndef good_manager():\n    setup()\n    try:\n        yield 'resource'  # Only ONE yield\n    finally:\n        cleanup()\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Context managers guarantee cleanup** - Even if exceptions occur\n- **with statement calls __enter__ and __exit__** - Automatic resource management\n- **Two ways to create:** Class-based or @contextmanager decorator\n- **@contextmanager is simpler** - Code before yield = setup, after = cleanup\n- **__exit__ receives exception info** - Can suppress by returning True\n- **Always use try/finally** - Ensures cleanup code runs\n- **Common uses:** files, database connections, locks, temporary state\n- **Multiple contexts:** with ctx1() as a, ctx2() as b: ..."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-03-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a ListModifier context manager that:\n- Accepts a list as input\n- Backs up the list on entry\n- Allows modifications in the context\n- Restores the original list if an exception occurs\n- Keeps modifications if no exception",
              "instructions": "Create a ListModifier context manager that:\n- Accepts a list as input\n- Backs up the list on entry\n- Allows modifications in the context\n- Restores the original list if an exception occurs\n- Keeps modifications if no exception",
              "starterCode": "from contextlib import contextmanager\n\n@contextmanager\ndef list_modifier(lst):\n    # TODO: Backup the list\n    # TODO: Yield to allow modifications\n    # TODO: If exception, restore backup\n    # TODO: If no exception, keep changes\n    pass\n\n# Test your context manager\nmy_list = [1, 2, 3]\n\nprint(f\"Original: {my_list}\")\n\n# Successful modification\nwith list_modifier(my_list):\n    my_list.append(4)\n    my_list.append(5)\n\nprint(f\"After success: {my_list}\")\n\n# Failed modification (should restore)\ntry:\n    with list_modifier(my_list):\n        my_list.append(6)\n        raise ValueError(\"Oops!\")\nexcept ValueError:\n    pass\n\nprint(f\"After failure: {my_list}\")",
              "solution": "from contextlib import contextmanager\n\n# List Modifier Context Manager\n# This solution demonstrates transactional list operations\n\n@contextmanager\ndef list_modifier(lst):\n    \"\"\"Context manager for transactional list modifications.\n    \n    Backs up the list and restores it if an exception occurs.\n    Keeps changes if no exception.\n    \"\"\"\n    # Step 1: Create backup of the list\n    backup = lst.copy()\n    \n    try:\n        # Step 2: Yield control to the context block\n        yield lst\n        # Step 3: If we get here, no exception - keep changes\n        print(\"  (Changes committed)\")\n    except Exception as e:\n        # Step 4: Exception occurred - restore backup\n        lst[:] = backup  # Modify list in-place\n        print(f\"  (Changes rolled back due to: {e})\")\n        raise  # Re-raise the exception\n\n# Test the context manager\nprint(\"=== List Modifier Demo ===\")\n\nmy_list = [1, 2, 3]\nprint(f\"\\nOriginal: {my_list}\")\n\n# Test 1: Successful modification\nprint(\"\\nTest 1: Successful modification\")\nwith list_modifier(my_list):\n    my_list.append(4)\n    my_list.append(5)\n\nprint(f\"After success: {my_list}\")\n\n# Test 2: Failed modification (should restore)\nprint(\"\\nTest 2: Failed modification\")\ntry:\n    with list_modifier(my_list):\n        my_list.append(6)\n        my_list.append(7)\n        print(f\"  During modification: {my_list}\")\n        raise ValueError(\"Simulated error!\")\nexcept ValueError:\n    pass\n\nprint(f\"After failure: {my_list}\")\nprint(\"\\nNotice: list was restored to state before the failed modification!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use list.copy() to backup. In the except block, restore the list using list[:] = backup to modify in-place."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-12-lesson-04",
          "title": "Advanced Comprehensions",
          "moduleId": "module-12",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Compact List Creation",
              "content": "**Comprehensions = Concise collection creation**\n\n**Think of a shopping list:**\n\n‚ùå **Traditional approach (loop):**\n```python\nshopping_list = []\nfor item in all_items:\n    if item.price < 10:\n        shopping_list.append(item.name)\n```\n\n‚úÖ **Comprehension (one line):**\n```python\nshopping_list = [item.name for item in all_items if item.price < 10]\n```\n\n**Types of comprehensions:**\n\n1. **List comprehension** `[...]`\n   ```python\n   squares = [x**2 for x in range(10)]\n   ```\n\n2. **Dictionary comprehension** `{key: value}`\n   ```python\n   squares_dict = {x: x**2 for x in range(10)}\n   ```\n\n3. **Set comprehension** `{value}`\n   ```python\n   unique_lengths = {len(word) for word in words}\n   ```\n\n4. **Generator expression** `(...)`\n   ```python\n   squares_gen = (x**2 for x in range(10))\n   ```\n\n**When to use comprehensions:**\n- ‚úÖ Simple transformations\n- ‚úÖ Filtering collections\n- ‚úÖ Creating new collections\n- ‚ùå Complex logic (use regular loops)\n- ‚ùå Side effects (printing, file I/O)\n\n**Benefits:**\n- More readable (when simple)\n- Often faster\n- More Pythonic\n- Less code"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: List Comprehensions",
              "content": "**List comprehension syntax:**\n\n**Basic:**\n```python\n[expression for item in iterable]\n```\n\n**With filter:**\n```python\n[expression for item in iterable if condition]\n```\n\n**With conditional expression:**\n```python\n[expr1 if condition else expr2 for item in iterable]\n```\n\n**Nested:**\n```python\n[expression for outer in iterable1 for inner in iterable2]\n# Same as:\nfor outer in iterable1:\n    for inner in iterable2:\n        expression\n```\n\n**Key difference:**\n- Filter: `if` at end (no else)\n- Transform: `if/else` before `for`",
              "code": "print(\"=== Basic List Comprehension ===\")\n\n# Traditional loop\nsquares_loop = []\nfor x in range(10):\n    squares_loop.append(x**2)\nprint(f\"Loop: {squares_loop}\")\n\n# List comprehension\nsquares_comp = [x**2 for x in range(10)]\nprint(f\"Comprehension: {squares_comp}\")\n\nprint(\"\\n=== Comprehension with Condition (Filter) ===\")\n\n# Only even numbers\nevens = [x for x in range(20) if x % 2 == 0]\nprint(f\"Evens: {evens}\")\n\n# Only positive numbers\nnumbers = [-5, -3, -1, 0, 2, 4, 6]\npositive = [x for x in numbers if x > 0]\nprint(f\"Positive: {positive}\")\n\n# Words longer than 3 characters\nwords = ['a', 'the', 'cat', 'in', 'hat', 'python', 'is', 'cool']\nlong_words = [word for word in words if len(word) > 3]\nprint(f\"Long words: {long_words}\")\n\nprint(\"\\n=== Comprehension with Transformation ===\")\n\n# Uppercase all words\nupper_words = [word.upper() for word in words]\nprint(f\"Uppercase: {upper_words}\")\n\n# Length of each word\nword_lengths = [len(word) for word in words]\nprint(f\"Lengths: {word_lengths}\")\n\n# Complex transformation\nusers = ['alice', 'bob', 'charlie']\nuser_info = [f\"User: {name.title()} ({len(name)} chars)\" for name in users]\nprint(f\"User info: {user_info}\")\n\nprint(\"\\n=== Comprehension with if-else (Transform) ===\")\n\n# Classify numbers as even or odd\nnumbers = [1, 2, 3, 4, 5, 6]\nclassified = ['even' if x % 2 == 0 else 'odd' for x in numbers]\nprint(f\"Classified: {classified}\")\n\n# Cap values at 100\nscores = [85, 92, 105, 78, 110, 88]\ncapped = [score if score <= 100 else 100 for score in scores]\nprint(f\"Capped scores: {capped}\")\n\n# Absolute values using conditional\nvalues = [-5, 3, -2, 8, -1]\nabsolute = [x if x >= 0 else -x for x in values]\nprint(f\"Absolute: {absolute}\")\n\nprint(\"\\n=== Multiple Conditions ===\")\n\n# Filter: divisible by 2 AND divisible by 3\nnumbers = range(1, 31)\ndiv_by_6 = [x for x in numbers if x % 2 == 0 if x % 3 == 0]\nprint(f\"Divisible by 6: {div_by_6}\")\n\n# Same as: if x % 2 == 0 and x % 3 == 0\ndiv_by_6_alt = [x for x in numbers if x % 2 == 0 and x % 3 == 0]\nprint(f\"Alternative: {div_by_6_alt}\")\n\nprint(\"\\n=== Nested Loops in Comprehension ===\")\n\n# Cartesian product\ncolors = ['red', 'blue']\nsizes = ['S', 'M', 'L']\ncombinations = [f\"{color}-{size}\" for color in colors for size in sizes]\nprint(f\"Combinations: {combinations}\")\n\n# Flatten nested list\nnested = [[1, 2], [3, 4], [5, 6]]\nflattened = [num for sublist in nested for num in sublist]\nprint(f\"Flattened: {flattened}\")\n\n# Matrix operations\nmatrix = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n]\n# Get all elements\nall_elements = [num for row in matrix for num in row]\nprint(f\"All elements: {all_elements}\")\n\n# Transpose matrix\ntransposed = [[row[i] for row in matrix] for i in range(3)]\nprint(f\"Transposed: {transposed}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**List comprehension patterns:**\n\n```python\n# 1. Basic transformation\n[x*2 for x in numbers]\n\n# 2. Filter only\n[x for x in numbers if x > 0]\n\n# 3. Transform with filter\n[x*2 for x in numbers if x > 0]\n\n# 4. Conditional transform (no filter)\n[x if x > 0 else 0 for x in numbers]\n\n# 5. Conditional transform AND filter\n[x*2 if x > 10 else x for x in numbers if x != 0]\n```\n\n**Dictionary comprehension:**\n```python\n{key: value for item in iterable}\n{x: x**2 for x in range(5)}\n# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}\n```\n\n**Set comprehension:**\n```python\n{expression for item in iterable}\n{len(word) for word in words}\n# {3, 5, 6}  # Unique lengths\n```\n\n**When NOT to use:**\n```python\n# Bad - too complex\n[process(x, y) for x in data if validate(x) \n for y in x.items if y.type == 'special' \n if check(y)]\n\n# Better - use regular loop\nresults = []\nfor x in data:\n    if validate(x):\n        for y in x.items:\n            if y.type == 'special' and check(y):\n                results.append(process(x, y))\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Dict and Set Comprehensions",
              "content": "**Dictionary comprehension syntax:**\n```python\n{key_expr: value_expr for item in iterable}\n{key_expr: value_expr for item in iterable if condition}\n```\n\n**Set comprehension syntax:**\n```python\n{expression for item in iterable}\n{expression for item in iterable if condition}\n```\n\n**Practical patterns:**\n\n**1. Create lookup tables:**\n```python\nlookup = {item.id: item for item in items}\n```\n\n**2. Invert dictionaries:**\n```python\ninverted = {v: k for k, v in orig.items()}\n```\n\n**3. Filter dictionaries:**\n```python\nfiltered = {k: v for k, v in d.items() if condition}\n```\n\n**4. Get unique values:**\n```python\nunique = {item.property for item in items}\n```",
              "code": "print(\"=== Dictionary Comprehension ===\")\n\n# Create dict from range\nsquares_dict = {x: x**2 for x in range(6)}\nprint(f\"Squares: {squares_dict}\")\n\n# From two lists\nnames = ['Alice', 'Bob', 'Charlie']\nages = [25, 30, 35]\npeople = {name: age for name, age in zip(names, ages)}\nprint(f\"People: {people}\")\n\n# Swap keys and values\noriginal = {'a': 1, 'b': 2, 'c': 3}\nswapped = {value: key for key, value in original.items()}\nprint(f\"Swapped: {swapped}\")\n\n# Filter dictionary\nscores = {'Alice': 95, 'Bob': 67, 'Charlie': 89, 'David': 45}\npassing = {name: score for name, score in scores.items() if score >= 70}\nprint(f\"Passing: {passing}\")\n\n# Transform values\ntemps_celsius = {'morning': 20, 'noon': 28, 'evening': 22}\ntemps_fahrenheit = {time: (temp * 9/5) + 32 \n                    for time, temp in temps_celsius.items()}\nprint(f\"Fahrenheit: {temps_fahrenheit}\")\n\nprint(\"\\n=== Set Comprehension ===\")\n\n# Unique squares\nnumbers = [1, 2, 3, 4, 5, 1, 2, 3]\nunique_squares = {x**2 for x in numbers}\nprint(f\"Unique squares: {unique_squares}\")\n\n# Unique word lengths\nsentence = \"the quick brown fox jumps over the lazy dog\"\nword_lengths = {len(word) for word in sentence.split()}\nprint(f\"Unique word lengths: {sorted(word_lengths)}\")\n\n# Unique first letters\nwords = ['apple', 'banana', 'apricot', 'blueberry', 'cherry']\nfirst_letters = {word[0] for word in words}\nprint(f\"First letters: {sorted(first_letters)}\")\n\nprint(\"\\n=== Practical Examples ===\")\n\n# Count word frequency\ntext = \"python is great and python is fun and python is powerful\"\nwords = text.split()\nword_count = {word: words.count(word) for word in set(words)}\nprint(f\"Word frequency: {word_count}\")\n\n# Group by property\nstudents = [\n    {'name': 'Alice', 'grade': 'A'},\n    {'name': 'Bob', 'grade': 'B'},\n    {'name': 'Charlie', 'grade': 'A'},\n    {'name': 'David', 'grade': 'C'},\n    {'name': 'Eve', 'grade': 'B'}\n]\n\n# Group names by grade\nby_grade = {}\nfor student in students:\n    grade = student['grade']\n    if grade not in by_grade:\n        by_grade[grade] = []\n    by_grade[grade].append(student['name'])\n\nprint(f\"\\nGrouped by grade: {by_grade}\")\n\n# Create lookup table\nproducts = [\n    {'id': 1, 'name': 'Widget', 'price': 9.99},\n    {'id': 2, 'name': 'Gadget', 'price': 19.99},\n    {'id': 3, 'name': 'Doohickey', 'price': 14.99}\n]\n\nproduct_lookup = {p['id']: p for p in products}\nprint(f\"\\nProduct lookup:\")\nfor pid, product in product_lookup.items():\n    print(f\"  {pid}: {product['name']} - ${product['price']}\")\n\n# Multi-level filtering and transformation\ndata = [\n    {'name': 'file1.py', 'size': 1024},\n    {'name': 'file2.txt', 'size': 2048},\n    {'name': 'file3.py', 'size': 512},\n    {'name': 'file4.txt', 'size': 128}\n]\n\n# Python files with size in KB\npy_files = {f['name']: f['size'] / 1024 \n            for f in data \n            if f['name'].endswith('.py')}\nprint(f\"\\nPython files (KB): {py_files}\")\n\nprint(\"\\n=== Combining Comprehensions ===\")\n\n# Matrix to dict of dicts\nmatrix = [\n    [1, 2, 3],\n    [4, 5, 6],\n    [7, 8, 9]\n]\n\n# Create dict: {row_index: {col_index: value}}\nmatrix_dict = {i: {j: val for j, val in enumerate(row)} \n               for i, row in enumerate(matrix)}\nprint(f\"Matrix as dict:\")\nfor row_idx, row_dict in matrix_dict.items():\n    print(f\"  Row {row_idx}: {row_dict}\")\n\n# Nested dict comprehension: grade statistics\ngrades = {\n    'Math': [85, 90, 78, 92],\n    'Science': [88, 76, 95, 84],\n    'English': [92, 89, 91, 88]\n}\n\nstats = {\n    subject: {\n        'avg': sum(scores) / len(scores),\n        'max': max(scores),\n        'min': min(scores)\n    }\n    for subject, scores in grades.items()\n}\n\nprint(f\"\\nGrade statistics:\")\nfor subject, stat in stats.items():\n    print(f\"  {subject}: avg={stat['avg']:.1f}, max={stat['max']}, min={stat['min']}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Confusing Conditional Position in Comprehensions**\n```python\n# WRONG - Filter condition needs 'else' at the start\nresult = [x if x > 5 for x in range(10)]  # SyntaxError!\n\n# CORRECT - Filter at end (no else)\nresult = [x for x in range(10) if x > 5]  # [6, 7, 8, 9]\n\n# CORRECT - Transform at start (needs else)\nresult = [x if x > 5 else 0 for x in range(10)]\n```\n\n**2. Creating Empty Dict Instead of Set**\n```python\n# WRONG - Empty braces create dict, not set\nempty = {}  # This is a dict!\nprint(type(empty))  # <class 'dict'>\n\n# CORRECT - Use set() for empty set\nempty = set()  # This is a set\n```\n\n**3. Overwriting Dict Keys in Comprehension**\n```python\n# WRONG - Duplicate keys overwrite silently\nitems = [('a', 1), ('b', 2), ('a', 3)]\nresult = {k: v for k, v in items}  # {'a': 3} - First lost!\n\n# CORRECT - Handle duplicates with defaultdict\nfrom collections import defaultdict\nresult = defaultdict(list)\n```\n\n**4. Nested Comprehension Read Order**\n```python\n# WRONG - Thinking inner loop comes first\nmatrix = [[1, 2], [3, 4]]\nresult = [x for row in matrix for x in row]  # [1,2,3,4] flat!\n\n# CORRECT - Use nested comprehensions for structure\nresult = [[x * 2 for x in row] for row in matrix]\n```\n\n**5. Using List Comprehension for Side Effects**\n```python\n# WRONG - Creating list for side effects\n[print(x) for x in range(5)]  # Wasteful\n\n# CORRECT - Use regular loop\nfor x in range(5):\n    print(x)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **List comprehension:** [expr for item in iterable if condition]\n- **Dict comprehension:** {key: value for item in iterable}\n- **Set comprehension:** {expr for item in iterable} - auto deduplicates\n- **Filter at end:** if condition (no else)\n- **Transform before for:** expr1 if cond else expr2\n- **Nested comprehensions:** for x in a for y in b (reads left to right)\n- **Use for simple operations** - Complex logic needs regular loops\n- **More Pythonic and often faster** than equivalent loops"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-04-challenge-4",
              "title": "Interactive Exercise",
              "description": "Given a list of transactions, create:\n1. Dict of total spending per category (dict comprehension)\n2. Set of unique categories (set comprehension)\n3. List of transaction descriptions for amounts > 50 (list comprehension)",
              "instructions": "Given a list of transactions, create:\n1. Dict of total spending per category (dict comprehension)\n2. Set of unique categories (set comprehension)\n3. List of transaction descriptions for amounts > 50 (list comprehension)",
              "starterCode": "transactions = [\n    {'amount': 45.50, 'category': 'food', 'desc': 'Grocery shopping'},\n    {'amount': 12.00, 'category': 'transport', 'desc': 'Bus fare'},\n    {'amount': 78.90, 'category': 'food', 'desc': 'Restaurant'},\n    {'amount': 100.00, 'category': 'entertainment', 'desc': 'Concert'},\n    {'amount': 25.00, 'category': 'transport', 'desc': 'Taxi'},\n    {'amount': 55.00, 'category': 'food', 'desc': 'Takeout'}\n]\n\n# TODO: Create dict of total per category\ntotals_by_category = {}\n\n# TODO: Create set of unique categories\ncategories = set()\n\n# TODO: Create list of descriptions for amounts > 50\nlarge_transactions = []\n\nprint(f\"Totals: {totals_by_category}\")\nprint(f\"Categories: {categories}\")\nprint(f\"Large: {large_transactions}\")",
              "solution": "# Comprehensions for Transaction Analysis\n# This solution demonstrates dict, set, and list comprehensions\n\ntransactions = [\n    {'amount': 45.50, 'category': 'food', 'desc': 'Grocery shopping'},\n    {'amount': 12.00, 'category': 'transport', 'desc': 'Bus fare'},\n    {'amount': 78.90, 'category': 'food', 'desc': 'Restaurant'},\n    {'amount': 100.00, 'category': 'entertainment', 'desc': 'Concert'},\n    {'amount': 25.00, 'category': 'transport', 'desc': 'Taxi'},\n    {'amount': 55.00, 'category': 'food', 'desc': 'Takeout'}\n]\n\n# Step 1: Get unique categories first (set comprehension)\ncategories = {t['category'] for t in transactions}\n\n# Step 2: Dict of total spending per category (dict comprehension)\n# Sum amounts for each category\ntotals_by_category = {\n    cat: sum(t['amount'] for t in transactions if t['category'] == cat)\n    for cat in categories\n}\n\n# Step 3: List of descriptions for amounts > 50 (list comprehension)\nlarge_transactions = [\n    f\"{t['desc']} (${t['amount']:.2f})\"\n    for t in transactions\n    if t['amount'] > 50\n]\n\n# Display results\nprint(\"=== Transaction Analysis ===\")\n\nprint(\"\\n1. Unique Categories (set comprehension):\")\nprint(f\"   {categories}\")\n\nprint(\"\\n2. Totals by Category (dict comprehension):\")\nfor cat, total in totals_by_category.items():\n    print(f\"   {cat}: ${total:.2f}\")\n\nprint(\"\\n3. Large Transactions > $50 (list comprehension):\")\nfor desc in large_transactions:\n    print(f\"   - {desc}\")\n\n# Bonus: Combined generator expression\nprint(\"\\n4. Total spending (generator expression):\")\ntotal_spent = sum(t['amount'] for t in transactions)\nprint(f\"   ${total_spent:.2f}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "For totals: group by category and sum amounts. Use sum() with a generator expression."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-12-lesson-05",
          "title": "Type Hints and Annotations",
          "moduleId": "module-12",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Documentation in Code",
              "content": "**Type Hints = Code documentation + Error prevention**\n\n**Think of labeled containers:**\n\n‚ùå **Without type hints:**\n```python\ndef process(data, flag):\n    # What type is data? String? List?\n    # What's flag? Boolean? String?\n    pass\n```\n\n‚úÖ **With type hints:**\n```python\ndef process(data: list[str], flag: bool) -> None:\n    # Clear! data is list of strings\n    # flag is boolean\n    # Returns nothing\n    pass\n```\n\n**Benefits:**\n\n1. **Better documentation** üìñ\n   - See expected types at a glance\n   - No need to guess\n\n2. **IDE support** üöÄ\n   - Better autocomplete\n   - Catch errors before running\n\n3. **Error prevention** üõ°Ô∏è\n   - Type checkers find bugs\n   - Before code runs!\n\n4. **Code maintainability** üîß\n   - Easier for others to understand\n   - Refactoring is safer\n\n**Important:** Type hints are **optional** and **not enforced at runtime**!\n- Python doesn't check types when running\n- Use tools like mypy for type checking\n- Mainly for development/tooling\n\n**Common types:**\n- `int`, `float`, `str`, `bool`\n- `list`, `dict`, `set`, `tuple`\n- `Optional[type]` - can be None\n- `Union[type1, type2]` - can be either\n- `Any` - any type"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Basic Type Hints",
              "content": "**Type hint syntax:**\n\n**Function annotations:**\n```python\ndef function(param: type) -> return_type:\n    pass\n```\n\n**Variable annotations:**\n```python\nvariable: type = value\n```\n\n**Important notes:**\n\n1. **Not enforced at runtime:**\n   ```python\n   def add(a: int, b: int) -> int:\n       return a + b\n   \n   add(\"hello\", \"world\")  # Works! No error at runtime\n   ```\n\n2. **Need type checker:**\n   - Use `mypy` or similar tool\n   - Checks types before running\n   - IDE integration\n\n3. **Modern syntax (Python 3.10+):**\n   ```python\n   # Old\n   Optional[str]  ‚Üí str | None\n   Union[int, str] ‚Üí int | str\n   ```",
              "code": "print(\"=== Basic Type Hints ===\")\n\n# Simple function with type hints\ndef greet(name: str) -> str:\n    \"\"\"Return a greeting message\"\"\"\n    return f\"Hello, {name}!\"\n\nresult = greet(\"Alice\")\nprint(result)\n\n# Multiple parameters\ndef add_numbers(a: int, b: int) -> int:\n    \"\"\"Add two integers\"\"\"\n    return a + b\n\nprint(f\"Sum: {add_numbers(5, 3)}\")\n\n# Default values with type hints\ndef create_user(name: str, age: int = 18, active: bool = True) -> dict:\n    \"\"\"Create user dictionary\"\"\"\n    return {'name': name, 'age': age, 'active': active}\n\nuser = create_user(\"Bob\", 25)\nprint(f\"User: {user}\")\n\nprint(\"\\n=== Collection Type Hints ===\")\n\n# List of specific type\ndef process_names(names: list[str]) -> list[str]:\n    \"\"\"Convert names to uppercase\"\"\"\n    return [name.upper() for name in names]\n\nnames = [\"alice\", \"bob\", \"charlie\"]\nprint(f\"Uppercase: {process_names(names)}\")\n\n# Dictionary with type hints\ndef count_words(text: str) -> dict[str, int]:\n    \"\"\"Count word frequency\"\"\"\n    words = text.split()\n    return {word: words.count(word) for word in set(words)}\n\nresult = count_words(\"hello world hello\")\nprint(f\"Word count: {result}\")\n\n# Tuple with specific types\ndef get_user_info(user_id: int) -> tuple[str, int, str]:\n    \"\"\"Return (name, age, email)\"\"\"\n    return (\"Alice\", 25, \"alice@example.com\")\n\nname, age, email = get_user_info(1)\nprint(f\"User: {name}, {age}, {email}\")\n\nprint(\"\\n=== Optional and None ===\")\n\nfrom typing import Optional\n\n# Optional means \"can be None\"\ndef find_user(user_id: int) -> Optional[dict]:\n    \"\"\"Find user by ID, return None if not found\"\"\"\n    if user_id == 1:\n        return {'id': 1, 'name': 'Alice'}\n    return None\n\nuser = find_user(1)\nprint(f\"Found: {user}\")\n\nuser = find_user(999)\nprint(f\"Not found: {user}\")\n\n# Modern Python 3.10+ can use | None\ndef find_product(product_id: int) -> dict | None:\n    \"\"\"Find product, None if not found\"\"\"\n    return None\n\nprint(\"\\n=== Union Types ===\")\n\nfrom typing import Union\n\n# Can be multiple types\ndef process_id(user_id: Union[int, str]) -> str:\n    \"\"\"Accept int or string ID\"\"\"\n    return f\"ID: {user_id}\"\n\nprint(process_id(123))\nprint(process_id(\"ABC123\"))\n\n# Modern Python 3.10+ can use |\ndef format_value(value: int | float | str) -> str:\n    \"\"\"Format any of these types\"\"\"\n    return f\"Value: {value}\"\n\nprint(format_value(42))\nprint(format_value(3.14))\nprint(format_value(\"text\"))\n\nprint(\"\\n=== Variable Annotations ===\")\n\n# Annotate variables\nname: str = \"Alice\"\nage: int = 25\nscores: list[int] = [85, 90, 92]\nconfig: dict[str, bool] = {'debug': True, 'verbose': False}\n\nprint(f\"Name: {name}, Age: {age}\")\nprint(f\"Scores: {scores}\")\nprint(f\"Config: {config}\")\n\n# Type hints don't prevent wrong types at runtime!\nname = 123  # No error! Type hints are not enforced\nprint(f\"Name is now: {name} (still works, but type checkers would complain)\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic types:**\n```python\ndef func(x: int, y: str, z: bool) -> float:\n    pass\n```\n\n**Collections:**\n```python\n# Old style (typing module)\nfrom typing import List, Dict, Set, Tuple\nlist[str]     # Python 3.9+\nList[str]     # Older, still works\n\ndict[str, int]\nDict[str, int]\n\nset[int]\nSet[int]\n\ntuple[str, int, bool]  # Fixed size\nTuple[str, int, bool]\n```\n\n**Optional and Union:**\n```python\nfrom typing import Optional, Union\n\n# Can be None\nOptional[str]  # Same as Union[str, None]\nstr | None     # Python 3.10+\n\n# Multiple types\nUnion[int, str]\nint | str      # Python 3.10+\n```\n\n**Any and None:**\n```python\nfrom typing import Any\n\nAny          # Any type allowed\nNone         # Returns nothing\nvoid         # NOT valid in Python, use None\n```\n\n**Callable (function types):**\n```python\nfrom typing import Callable\n\n# Function that takes (int, str) and returns bool\nCallable[[int, str], bool]\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Advanced Type Hints",
              "content": "**Advanced type hint concepts:**\n\n**1. Any:**\n- Accepts any type\n- Opts out of type checking\n- Use sparingly\n\n**2. Callable:**\n```python\nCallable[[arg1_type, arg2_type], return_type]\nCallable[[], None]  # No args, no return\n```\n\n**3. Type aliases:**\n```python\nUserId = int\nUserDict = dict[str, Any]\n```\n\n**4. TypeVar (generics):**\n```python\nT = TypeVar('T')\ndef func(x: T) -> T:  # Same type in and out\n    return x\n```\n\n**5. Self-referencing:**\n```python\nclass Node:\n    def get_parent(self) -> 'Node | None':\n        ...\n```\nUse quotes for forward references\n\n**Type checking tools:**\n- mypy: `mypy script.py`\n- pyright: Built into VS Code\n- pyre: Facebook's type checker",
              "code": "from typing import Any, Callable, TypeVar, Generic\n\nprint(\"=== Any Type ===\")\n\ndef process_data(data: Any) -> Any:\n    \"\"\"Accept and return any type\"\"\"\n    return data\n\nprint(process_data(123))\nprint(process_data(\"text\"))\nprint(process_data([1, 2, 3]))\n\nprint(\"\\n=== Callable (Function) Types ===\")\n\ndef apply_operation(value: int, operation: Callable[[int], int]) -> int:\n    \"\"\"Apply a function to a value\"\"\"\n    return operation(value)\n\ndef double(x: int) -> int:\n    return x * 2\n\ndef square(x: int) -> int:\n    return x ** 2\n\nprint(f\"Double 5: {apply_operation(5, double)}\")\nprint(f\"Square 5: {apply_operation(5, square)}\")\n\n# Lambda with type hints (in context)\nresult = apply_operation(10, lambda x: x + 1)\nprint(f\"Add 1 to 10: {result}\")\n\nprint(\"\\n=== Type Aliases ===\")\n\n# Create type aliases for complex types\nVector = list[float]\nMatrix = list[list[float]]\nJSONDict = dict[str, Any]\n\ndef add_vectors(v1: Vector, v2: Vector) -> Vector:\n    \"\"\"Add two vectors\"\"\"\n    return [a + b for a, b in zip(v1, v2)]\n\nvec1: Vector = [1.0, 2.0, 3.0]\nvec2: Vector = [4.0, 5.0, 6.0]\nresult = add_vectors(vec1, vec2)\nprint(f\"Vector sum: {result}\")\n\nprint(\"\\n=== Class Type Hints ===\")\n\nclass User:\n    def __init__(self, name: str, age: int):\n        self.name: str = name\n        self.age: int = age\n    \n    def get_info(self) -> str:\n        \"\"\"Return user info\"\"\"\n        return f\"{self.name} ({self.age})\"\n    \n    @classmethod\n    def from_dict(cls, data: dict[str, Any]) -> 'User':\n        \"\"\"Create User from dictionary\"\"\"\n        return cls(data['name'], data['age'])\n    \n    def is_adult(self) -> bool:\n        \"\"\"Check if user is adult\"\"\"\n        return self.age >= 18\n\nuser = User(\"Alice\", 25)\nprint(user.get_info())\n\nuser2 = User.from_dict({'name': 'Bob', 'age': 30})\nprint(f\"Is Bob adult? {user2.is_adult()}\")\n\nprint(\"\\n=== Generic Types ===\")\n\nT = TypeVar('T')  # Generic type variable\n\ndef get_first(items: list[T]) -> T | None:\n    \"\"\"Get first item from list\"\"\"\n    return items[0] if items else None\n\n# Works with any type\nprint(f\"First int: {get_first([1, 2, 3])}\")\nprint(f\"First str: {get_first(['a', 'b', 'c'])}\")\nprint(f\"Empty: {get_first([])}\")\n\ndef swap_pair(a: T, b: T) -> tuple[T, T]:\n    \"\"\"Swap two values of same type\"\"\"\n    return b, a\n\nprint(f\"Swap ints: {swap_pair(1, 2)}\")\nprint(f\"Swap strs: {swap_pair('hello', 'world')}\")\n\nprint(\"\\n=== Practical Example: Typed Data Processing ===\")\n\nfrom typing import Iterator\n\ndef read_numbers(filename: str) -> Iterator[int]:\n    \"\"\"Read numbers from file, one per line\"\"\"\n    with open(filename) as f:\n        for line in f:\n            yield int(line.strip())\n\ndef calculate_stats(numbers: list[int]) -> dict[str, float]:\n    \"\"\"Calculate statistics\"\"\"\n    return {\n        'mean': sum(numbers) / len(numbers),\n        'min': float(min(numbers)),\n        'max': float(max(numbers))\n    }\n\n# Create test file\nwith open('numbers.txt', 'w') as f:\n    f.write('10\\n20\\n30\\n40\\n50')\n\nnumbers = list(read_numbers('numbers.txt'))\nstats = calculate_stats(numbers)\nprint(f\"Numbers: {numbers}\")\nprint(f\"Stats: {stats}\")\n\nprint(\"\\n=== Type Checking Example ===\")\n\ndef process_config(config: dict[str, str | int | bool]) -> None:\n    \"\"\"Process configuration\"\"\"\n    for key, value in config.items():\n        print(f\"{key}: {value} ({type(value).__name__})\")\n\nconfig = {\n    'host': 'localhost',\n    'port': 8080,\n    'debug': True,\n    'timeout': 30\n}\n\nprocess_config(config)\n\nimport os\nif os.path.exists('numbers.txt'):\n    os.remove('numbers.txt')",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Mutable Default Arguments with Type Hints**\n```python\n# WRONG - Mutable default shared across calls\ndef add_item(item: str, items: list[str] = []) -> list[str]:\n    items.append(item)\n    return items\n\n# CORRECT - Use None and create new list\ndef add_item(item: str, items: list[str] | None = None) -> list[str]:\n    if items is None:\n        items = []\n    items.append(item)\n    return items\n```\n\n**2. Confusing list vs List (Python < 3.9)**\n```python\n# WRONG on Python < 3.9\ndef process(items: list[str]) -> dict[str, int]:  # TypeError!\n    pass\n\n# CORRECT for Python < 3.9 - use typing module\nfrom typing import List, Dict\ndef process(items: List[str]) -> Dict[str, int]:\n    pass\n```\n\n**3. Expecting Runtime Type Checking**\n```python\n# WRONG - Type hints don't enforce at runtime\ndef greet(name: str) -> str:\n    return f'Hello, {name}'\n\ngreet(123)  # No error! Returns 'Hello, 123'\n\n# CORRECT - Add runtime validation if needed\ndef greet(name: str) -> str:\n    if not isinstance(name, str):\n        raise TypeError('name must be a string')\n    return f'Hello, {name}'\n```\n\n**4. Wrong Optional Syntax**\n```python\n# WRONG - Optional means 'can be None', not optional param\nfrom typing import Optional\ndef greet(name: Optional[str]) -> str:  # Still required!\n    return f'Hello, {name}'\n\ngreet()  # TypeError: missing argument 'name'\n\n# CORRECT - Add default value\ndef greet(name: str | None = None) -> str:\n    return f'Hello, {name or \"stranger\"}'\n```\n\n**5. Forward Reference Without Quotes**\n```python\n# WRONG - Class not defined yet\nclass Node:\n    def get_next(self) -> Node:  # NameError!\n        pass\n\n# CORRECT - Use string for forward reference\nclass Node:\n    def get_next(self) -> 'Node':  # Works!\n        pass\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Type hints are optional** - Not enforced at runtime, for tooling/documentation\n- **Syntax: param: type -> return_type** - Annotate parameters and return values\n- **Use type checkers** - mypy, pyright catch errors before running\n- **Optional[T] means T | None** - Can be the type or None\n- **Union[A, B] means A | B** - Can be either type (Python 3.10+)\n- **TypedDict for structured dicts** - Better than dict[str, Any]\n- **list[str], dict[str, int]** - Use lowercase on Python 3.9+\n- **Benefits: IDE support, documentation, error prevention** - Makes code more maintainable"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-05-challenge-4",
              "title": "Interactive Exercise",
              "description": "Add complete type hints to this function:\n- Parameter: list of dictionaries with 'name' (str) and 'score' (int)\n- Return: dictionary mapping names to scores, only for scores >= 70",
              "instructions": "Add complete type hints to this function:\n- Parameter: list of dictionaries with 'name' (str) and 'score' (int)\n- Return: dictionary mapping names to scores, only for scores >= 70",
              "starterCode": "def get_passing_students(students):\n    \"\"\"Return dict of students with passing scores\"\"\"\n    # TODO: Add type hints to function signature\n    return {s['name']: s['score'] for s in students if s['score'] >= 70}\n\n# Test\nstudents = [\n    {'name': 'Alice', 'score': 85},\n    {'name': 'Bob', 'score': 65},\n    {'name': 'Charlie', 'score': 92}\n]\n\nresult = get_passing_students(students)\nprint(result)",
              "solution": "# Type Hints for Student Scores\n# This solution demonstrates comprehensive type annotations\n\nfrom typing import TypedDict\n\n# Define a TypedDict for better type safety\nclass Student(TypedDict):\n    name: str\n    score: int\n\ndef get_passing_students(students: list[Student]) -> dict[str, int]:\n    \"\"\"Return dict of students with passing scores (>= 70).\n    \n    Args:\n        students: List of student dicts with 'name' and 'score' keys\n        \n    Returns:\n        Dictionary mapping student names to their scores\n    \"\"\"\n    return {s['name']: s['score'] for s in students if s['score'] >= 70}\n\n# Alternative with simpler type hints (no TypedDict)\ndef get_passing_students_simple(\n    students: list[dict[str, str | int]]\n) -> dict[str, int]:\n    \"\"\"Alternative with inline type hints.\"\"\"\n    return {s['name']: s['score'] for s in students if s['score'] >= 70}\n\n# Test data\nstudents: list[Student] = [\n    {'name': 'Alice', 'score': 85},\n    {'name': 'Bob', 'score': 65},\n    {'name': 'Charlie', 'score': 92},\n    {'name': 'Diana', 'score': 70},\n]\n\n# Test the function\nprint(\"=== Type Hints Demo ===\")\nresult = get_passing_students(students)\n\nprint(f\"\\nAll students: {len(students)}\")\nprint(f\"Passing students: {len(result)}\")\nprint(f\"\\nPassing scores:\")\nfor name, score in result.items():\n    print(f\"  {name}: {score}\")\n\n# Type hints help with:\nprint(\"\\nType hints enable:\")\nprint(\"  - IDE autocompletion\")\nprint(\"  - Static type checking (mypy)\")\nprint(\"  - Better documentation\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Parameter type: list[dict[str, int | str]]. Return type: dict[str, int]"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-12-lesson-06",
          "title": "Regular Expressions",
          "moduleId": "module-12",
          "order": 6,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Pattern Matching",
              "content": "**Regular Expressions (regex) = Advanced find/replace**\n\n**Think of a search filter:**\n\n‚ùå **Simple string matching:**\n```python\nif '@' in email and '.' in email:\n    # Too simple!\n    pass\n```\n\n‚úÖ **Regex pattern:**\n```python\nimport re\nif re.match(r'^[\\w.-]+@[\\w.-]+\\.\\w+$', email):\n    # Precise pattern!\n    pass\n```\n\n**What regex can do:**\n\n1. **Validate** ‚úì\n   - Email addresses\n   - Phone numbers\n   - Passwords\n   - URLs\n\n2. **Extract** üîç\n   - Dates from text\n   - Phone numbers from documents\n   - URLs from HTML\n\n3. **Replace** üîÑ\n   - Format phone numbers\n   - Remove unwanted characters\n   - Transform text patterns\n\n4. **Split** ‚úÇÔ∏è\n   - Complex delimiters\n   - Multiple separators\n   - Conditional splitting\n\n**Common patterns:**\n- `.` - Any character (except newline)\n- `\\d` - Digit (0-9)\n- `\\w` - Word character (a-z, A-Z, 0-9, _)\n- `\\s` - Whitespace (space, tab, newline)\n- `*` - 0 or more\n- `+` - 1 or more\n- `?` - 0 or 1 (optional)\n- `[]` - Character class\n- `()` - Group\n- `^` - Start of string\n- `$` - End of string"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Basic Regular Expressions",
              "content": "**Key regex functions:**\n\n**1. re.match(pattern, string):**\n- Matches at START of string\n- Returns Match object or None\n```python\nre.match(r\"Hello\", \"Hello World\")  # Matches\nre.match(r\"World\", \"Hello World\")  # Doesn't match\n```\n\n**2. re.search(pattern, string):**\n- Searches ANYWHERE in string\n- Returns first match\n```python\nre.search(r\"World\", \"Hello World\")  # Matches\n```\n\n**3. re.findall(pattern, string):**\n- Returns list of ALL matches\n```python\nre.findall(r\"\\d+\", \"10 cats, 20 dogs\")  # ['10', '20']\n```\n\n**4. re.sub(pattern, replacement, string):**\n- Replace matches\n```python\nre.sub(r\"\\d+\", \"X\", \"10 cats\")  # \"X cats\"\n```\n\n**Raw strings (r\"\"):**\n- Use r\"\" for regex patterns\n- Prevents backslash escaping issues\n- r\"\\d\" not \"\\\\d\"",
              "code": "import re\n\nprint(\"=== Basic Matching ===\")\n\n# re.match() - Match at start of string\ntext = \"Hello World\"\nif re.match(r\"Hello\", text):\n    print(f\"'{text}' starts with 'Hello'\")\n\nif not re.match(r\"World\", text):\n    print(f\"'{text}' does NOT start with 'World'\")\n\n# re.search() - Find anywhere in string\nif re.search(r\"World\", text):\n    print(f\"'{text}' contains 'World'\")\n\n# re.findall() - Find all occurrences\ntext = \"The price is $10, $20, and $30\"\nprices = re.findall(r\"\\$\\d+\", text)\nprint(f\"Found prices: {prices}\")\n\nprint(\"\\n=== Character Classes ===\")\n\n# \\d - digits\ntext = \"My phone: 555-1234\"\ndigits = re.findall(r\"\\d\", text)\nprint(f\"All digits: {''.join(digits)}\")\n\n# \\d+ - one or more digits\nnumbers = re.findall(r\"\\d+\", text)\nprint(f\"Number groups: {numbers}\")\n\n# \\w - word characters\ntext = \"Hello, World! 123\"\nwords = re.findall(r\"\\w+\", text)\nprint(f\"Words: {words}\")\n\n# \\s - whitespace\ntext = \"Split   on    spaces\"\nparts = re.split(r\"\\s+\", text)\nprint(f\"Split parts: {parts}\")\n\nprint(\"\\n=== Quantifiers ===\")\n\n# * - zero or more\npattern = r\"a*b\"\nprint(f\"'b' matches: {bool(re.match(pattern, 'b'))}\")\nprint(f\"'ab' matches: {bool(re.match(pattern, 'ab'))}\")\nprint(f\"'aaab' matches: {bool(re.match(pattern, 'aaab'))}\")\n\n# + - one or more\npattern = r\"a+b\"\nprint(f\"\\n'b' matches a+b: {bool(re.match(pattern, 'b'))}\")\nprint(f\"'ab' matches a+b: {bool(re.match(pattern, 'ab'))}\")\n\n# ? - zero or one (optional)\npattern = r\"colou?r\"  # Matches color or colour\nprint(f\"\\n'color' matches: {bool(re.match(pattern, 'color'))}\")\nprint(f\"'colour' matches: {bool(re.match(pattern, 'colour'))}\")\n\n# {n} - exactly n times\npattern = r\"\\d{3}\"  # Exactly 3 digits\nprint(f\"\\n'123' matches \\\\d{{3}}: {bool(re.match(pattern, '123'))}\")\nprint(f\"'12' matches \\\\d{{3}}: {bool(re.match(pattern, '12'))}\")\n\n# {n,m} - between n and m times\npattern = r\"\\d{2,4}\"  # 2 to 4 digits\nprint(f\"\\n'12' matches \\\\d{{2,4}}: {bool(re.match(pattern, '12'))}\")\nprint(f\"'123' matches \\\\d{{2,4}}: {bool(re.match(pattern, '123'))}\")\n\nprint(\"\\n=== Anchors and Boundaries ===\")\n\n# ^ - start of string\npattern = r\"^Hello\"\nprint(f\"'Hello World' starts with Hello: {bool(re.match(pattern, 'Hello World'))}\")\nprint(f\"'Say Hello' starts with Hello: {bool(re.match(pattern, 'Say Hello'))}\")\n\n# $ - end of string\npattern = r\"World$\"\nprint(f\"\\n'Hello World' ends with World: {bool(re.search(pattern, 'Hello World'))}\")\nprint(f\"'World Hello' ends with World: {bool(re.search(pattern, 'World Hello'))}\")\n\n# Combining ^ and $ - full string match\npattern = r\"^\\d{3}$\"  # Exactly 3 digits, nothing else\nprint(f\"\\n'123' is exactly 3 digits: {bool(re.match(pattern, '123'))}\")\nprint(f\"'1234' is exactly 3 digits: {bool(re.match(pattern, '1234'))}\")\n\nprint(\"\\n=== Character Classes ===\")\n\n# [abc] - any of these characters\npattern = r\"[aeiou]\"\nvowels = re.findall(pattern, \"hello world\")\nprint(f\"Vowels in 'hello world': {vowels}\")\n\n# [a-z] - range\npattern = r\"[a-z]+\"\nwords = re.findall(pattern, \"Hello123World456\")\nprint(f\"Lowercase words: {words}\")\n\n# [^abc] - NOT these characters\npattern = r\"[^aeiou]+\"\nconsonants = re.findall(pattern, \"hello world\")\nprint(f\"Consonant groups: {consonants}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Pattern syntax quick reference:**\n\n**Special characters:**\n```\n.   Any character (except newline)\n\\d  Digit [0-9]\n\\D  Not digit [^0-9]\n\\w  Word char [a-zA-Z0-9_]\n\\W  Not word char\n\\s  Whitespace [ \\t\\n\\r\\f\\v]\n\\S  Not whitespace\n```\n\n**Quantifiers:**\n```\n*      0 or more\n+      1 or more\n?      0 or 1 (optional)\n{3}    Exactly 3\n{2,5}  Between 2 and 5\n{2,}   2 or more\n```\n\n**Anchors:**\n```\n^   Start of string\n$   End of string\n\\b  Word boundary\n```\n\n**Groups:**\n```\n(...)   Capturing group\n(?:...)  Non-capturing group\n|       OR (alternation)\n```\n\n**Character classes:**\n```\n[abc]    Any of a, b, c\n[a-z]    Range (a through z)\n[^abc]   NOT a, b, or c\n```\n\n**Escaping special chars:**\n```\n\\.  Literal dot\n\\$  Literal dollar sign\n\\*  Literal asterisk\nUse \\ before special characters\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Groups and Practical Patterns",
              "content": "**Capturing groups:**\n```python\npattern = r\"(\\d{3})-(\\d{3})-(\\d{4})\"\nmatch = re.search(pattern, \"555-123-4567\")\nmatch.group(0)  # Full match: \"555-123-4567\"\nmatch.group(1)  # First group: \"555\"\nmatch.groups()  # All groups: ('555', '123', '4567')\n```\n\n**Named groups:**\n```python\npattern = r\"(?P<area>\\d{3})-(?P<num>\\d{3})\"\nmatch.group('area')  # By name\nmatch.groupdict()    # Dict of named groups\n```\n\n**Substitution with groups:**\n```python\n# Swap first and last name\nre.sub(r'(\\w+) (\\w+)', r'\\2, \\1', \"John Doe\")\n# Result: \"Doe, John\"\n```\n\n**Flags:**\n```python\nre.IGNORECASE  # Case-insensitive\nre.MULTILINE   # ^ and $ match line boundaries\nre.DOTALL      # . matches newlines too\n```",
              "code": "import re\n\nprint(\"=== Capturing Groups ===\")\n\n# Groups with ()\npattern = r\"(\\d{3})-(\\d{3})-(\\d{4})\"\nphone = \"555-123-4567\"\nmatch = re.search(pattern, phone)\n\nif match:\n    print(f\"Full match: {match.group(0)}\")\n    print(f\"Area code: {match.group(1)}\")\n    print(f\"Exchange: {match.group(2)}\")\n    print(f\"Number: {match.group(3)}\")\n    print(f\"All groups: {match.groups()}\")\n\n# Named groups\npattern = r\"(?P<area>\\d{3})-(?P<exchange>\\d{3})-(?P<number>\\d{4})\"\nmatch = re.search(pattern, phone)\n\nif match:\n    print(f\"\\nNamed groups:\")\n    print(f\"Area: {match.group('area')}\")\n    print(f\"Exchange: {match.group('exchange')}\")\n    print(f\"Number: {match.group('number')}\")\n    print(f\"Dict: {match.groupdict()}\")\n\nprint(\"\\n=== Email Validation ===\")\n\nemail_pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'\n\nemails = [\n    \"user@example.com\",\n    \"test.user@domain.co.uk\",\n    \"invalid@\",\n    \"@invalid.com\",\n    \"no-at-sign.com\"\n]\n\nfor email in emails:\n    valid = bool(re.match(email_pattern, email))\n    print(f\"{email:25} {'‚úì Valid' if valid else '‚úó Invalid'}\")\n\nprint(\"\\n=== URL Extraction ===\")\n\ntext = \"\"\"\nCheck out https://www.example.com and http://test.org\nAlso visit ftp://files.example.com for downloads.\n\"\"\"\n\nurl_pattern = r'https?://[\\w.-]+\\.[a-zA-Z]{2,}'\nurls = re.findall(url_pattern, text)\nprint(f\"Found URLs: {urls}\")\n\nprint(\"\\n=== Phone Number Formatting ===\")\n\ndef format_phone(phone):\n    \"\"\"Extract and format phone number\"\"\"\n    # Remove all non-digits\n    digits = re.sub(r'\\D', '', phone)\n    \n    # Format as (XXX) XXX-XXXX\n    if len(digits) == 10:\n        return f\"({digits[:3]}) {digits[3:6]}-{digits[6:]}\"\n    return phone\n\nphones = [\n    \"5551234567\",\n    \"555-123-4567\",\n    \"(555) 123-4567\",\n    \"555.123.4567\"\n]\n\nfor phone in phones:\n    formatted = format_phone(phone)\n    print(f\"{phone:20} ‚Üí {formatted}\")\n\nprint(\"\\n=== Date Extraction ===\")\n\ntext = \"Meeting on 2024-01-15, deadline 03/20/2024, event: 12-25-2024\"\n\n# Multiple date formats\ndate_patterns = [\n    r'\\d{4}-\\d{2}-\\d{2}',  # YYYY-MM-DD\n    r'\\d{2}/\\d{2}/\\d{4}',  # MM/DD/YYYY\n    r'\\d{2}-\\d{2}-\\d{4}',  # MM-DD-YYYY\n]\n\nall_dates = []\nfor pattern in date_patterns:\n    dates = re.findall(pattern, text)\n    all_dates.extend(dates)\n\nprint(f\"Dates found: {all_dates}\")\n\nprint(\"\\n=== Text Substitution ===\")\n\n# Replace multiple spaces with single space\ntext = \"Too    many     spaces\"\ncleaned = re.sub(r'\\s+', ' ', text)\nprint(f\"Original: '{text}'\")\nprint(f\"Cleaned:  '{cleaned}'\")\n\n# Remove HTML tags\nhtml = \"<p>Hello <b>World</b>!</p>\"\nplain = re.sub(r'<[^>]+>', '', html)\nprint(f\"\\nHTML: {html}\")\nprint(f\"Plain: {plain}\")\n\n# Censor words\ntext = \"This is damn bad stuff\"\ncensored = re.sub(r'\\b(damn|bad)\\b', '***', text, flags=re.IGNORECASE)\nprint(f\"\\nOriginal: {text}\")\nprint(f\"Censored: {censored}\")\n\nprint(\"\\n=== Split with Regex ===\")\n\n# Split on multiple delimiters\ntext = \"apple;banana,cherry:date|elderberry\"\nfruits = re.split(r'[;,:|\n]+', text)\nprint(f\"Fruits: {fruits}\")\n\n# Split but keep delimiter\ntext = \"Question? Answer! Statement.\"\nparts = re.split(r'([.!?])', text)\nprint(f\"With punctuation: {parts}\")\n\nprint(\"\\n=== Password Validation ===\")\n\ndef validate_password(password):\n    \"\"\"Validate password strength\"\"\"\n    checks = {\n        'length': len(password) >= 8,\n        'uppercase': bool(re.search(r'[A-Z]', password)),\n        'lowercase': bool(re.search(r'[a-z]', password)),\n        'digit': bool(re.search(r'\\d', password)),\n        'special': bool(re.search(r'[!@#$%^&*()]', password))\n    }\n    \n    return all(checks.values()), checks\n\npasswords = [\n    \"weak\",\n    \"StrongPass123!\",\n    \"NoDigits!\",\n    \"ALLUPPER123!\"\n]\n\nfor pwd in passwords:\n    valid, checks = validate_password(pwd)\n    status = \"‚úì Valid\" if valid else \"‚úó Invalid\"\n    print(f\"{pwd:20} {status}\")\n    if not valid:\n        failed = [k for k, v in checks.items() if not v]\n        print(f\"{'':20} Missing: {', '.join(failed)}\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting Raw Strings for Patterns**\n```python\n# WRONG - Backslash gets interpreted as escape\npattern = '\\d+'  # Actually matches 'd+'\nre.search(pattern, '123')  # None!\n\n# CORRECT - Use raw string\npattern = r'\\d+'  # Matches digits\nre.search(pattern, '123')  # Match!\n```\n\n**2. Confusing match() vs search()**\n```python\n# WRONG - match() only checks start of string\ntext = 'hello 123 world'\nre.match(r'\\d+', text)  # None! Doesn't start with digit\n\n# CORRECT - search() finds anywhere\nre.search(r'\\d+', text)  # Match! Finds '123'\n\n# CORRECT - match() with ^ anchor equivalent\nre.search(r'^\\d+', text)  # None (same as match)\n```\n\n**3. Greedy vs Non-Greedy Matching**\n```python\n# WRONG - Greedy .* matches too much\nhtml = '<b>bold</b> and <b>more</b>'\nre.search(r'<b>.*</b>', html).group()  # '<b>bold</b> and <b>more</b>'\n\n# CORRECT - Non-greedy .*? matches minimum\nre.search(r'<b>.*?</b>', html).group()  # '<b>bold</b>'\n```\n\n**4. Not Checking for None Before Using Match**\n```python\n# WRONG - AttributeError if no match\nresult = re.search(r'\\d+', 'no numbers').group()  # Error!\n\n# CORRECT - Check for match first\nmatch = re.search(r'\\d+', 'no numbers')\nif match:\n    result = match.group()\nelse:\n    result = None\n```\n\n**5. Forgetting to Escape Special Characters**\n```python\n# WRONG - . and $ are special regex chars\nre.search(r'file.txt', 'file_txt')  # Match! . matches any char\nre.search(r'$100', 'costs $100')  # None! $ means end of string\n\n# CORRECT - Escape special characters\nre.search(r'file\\.txt', 'file_txt')  # None (correct)\nre.search(r'\\$100', 'costs $100')  # Match!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **re.search() finds anywhere, re.match() only at start** - Most common confusion\n- **Always use raw strings r''** - Prevents backslash escaping issues\n- **\\d digit, \\w word, \\s space** - Most common character classes\n- **+ means 1+, * means 0+, ? means 0 or 1** - Quantifiers\n- **^ start, $ end** - Anchors for full string matching\n- **() creates groups** - Access with match.group(1), match.groups()\n- **Named groups: (?P<name>...)** - Better than numbers\n- **Compile patterns if reusing:** pattern = re.compile(r'...')"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-12-lesson-06-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a log parser that extracts:\n1. Timestamp (YYYY-MM-DD HH:MM:SS)\n2. Log level (INFO, WARNING, ERROR)\n3. Message\nFrom log lines like: \"2024-01-15 10:30:45 [ERROR] Database connection failed\"",
              "instructions": "Create a log parser that extracts:\n1. Timestamp (YYYY-MM-DD HH:MM:SS)\n2. Log level (INFO, WARNING, ERROR)\n3. Message\nFrom log lines like: \"2024-01-15 10:30:45 [ERROR] Database connection failed\"",
              "starterCode": "import re\n\ndef parse_log_line(line):\n    # TODO: Create regex pattern with named groups\n    pattern = r''\n    \n    # TODO: Match and extract groups\n    match = None\n    \n    if match:\n        return match.groupdict()\n    return None\n\nlogs = [\n    \"2024-01-15 10:30:45 [ERROR] Database connection failed\",\n    \"2024-01-15 10:31:12 [INFO] Application started\",\n    \"2024-01-15 10:35:22 [WARNING] High memory usage\"\n]\n\nfor log in logs:\n    parsed = parse_log_line(log)\n    print(parsed)",
              "solution": "import re\n\n# Log Parser with Regex\n# This solution demonstrates named groups in regular expressions\n\ndef parse_log_line(line):\n    \"\"\"Parse a log line and extract components.\n    \n    Expected format: YYYY-MM-DD HH:MM:SS [LEVEL] Message\n    \"\"\"\n    # Create regex pattern with named groups\n    pattern = r'''\n        (?P<timestamp>\\d{4}-\\d{2}-\\d{2}\\s\\d{2}:\\d{2}:\\d{2})  # Date and time\n        \\s+                                                     # Whitespace\n        \\[(?P<level>\\w+)\\]                                     # Log level in brackets\n        \\s+                                                     # Whitespace\n        (?P<message>.+)                                         # Message (rest of line)\n    '''\n    \n    # Match using VERBOSE flag for readable pattern\n    match = re.match(pattern, line, re.VERBOSE)\n    \n    if match:\n        return match.groupdict()\n    return None\n\n# Alternative simpler pattern (single line)\ndef parse_log_simple(line):\n    \"\"\"Simpler version without verbose mode.\"\"\"\n    pattern = r'(?P<timestamp>[\\d-]+\\s[\\d:]+)\\s\\[(?P<level>\\w+)\\]\\s(?P<message>.+)'\n    match = re.match(pattern, line)\n    return match.groupdict() if match else None\n\n# Test logs\nlogs = [\n    \"2024-01-15 10:30:45 [ERROR] Database connection failed\",\n    \"2024-01-15 10:31:12 [INFO] Application started\",\n    \"2024-01-15 10:35:22 [WARNING] High memory usage\",\n    \"2024-01-15 11:00:00 [DEBUG] Processing request #42\"\n]\n\nprint(\"=== Log Parser Demo ===\")\n\n# Parse and display each log\nfor log in logs:\n    parsed = parse_log_line(log)\n    if parsed:\n        print(f\"\\nTimestamp: {parsed['timestamp']}\")\n        print(f\"Level:     {parsed['level']}\")\n        print(f\"Message:   {parsed['message']}\")\n\n# Count by level\nprint(\"\\n=== Summary ===\")\nlevels = [parse_log_line(log)['level'] for log in logs]\nfor level in set(levels):\n    count = levels.count(level)\n    print(f\"  {level}: {count}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use named groups: (?P<name>pattern). Timestamp: \\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}. Level: \\w+."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-13",
      "title": "Asynchronous Python",
      "description": "Writing concurrent code with async/await",
      "difficulty": "advanced",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-13-lesson-01",
          "title": "Why Async Matters",
          "moduleId": "module-13",
          "order": 1,
          "estimatedMinutes": 25,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding Blocking vs Non-Blocking I/O",
              "content": "**The Problem: Waiting Around**\n\nImagine you're a waiter at a restaurant. With **synchronous** (blocking) code:\n- You take an order from table 1\n- You walk to the kitchen and WAIT there until the food is ready\n- Only then do you go to table 2\n- Meanwhile, tables 3, 4, 5... are all waiting!\n\nWith **asynchronous** (non-blocking) code:\n- You take an order from table 1, send it to kitchen\n- While kitchen cooks, you take orders from table 2, 3, 4...\n- When food is ready, you deliver it\n- Everyone gets served faster!\n\n**In programming terms:**\n- **Blocking I/O**: Your program WAITS for network/file operations\n- **Non-blocking I/O**: Your program does OTHER work while waiting\n\n**Common blocking operations:**\n- Network requests (API calls, downloading files)\n- File I/O (reading/writing large files)\n- Database queries\n- User input\n\n**The key insight:**\nMost of your program's time is spent WAITING, not computing. Async lets you use that waiting time productively."
            },
            {
              "type": "EXAMPLE",
              "title": "Synchronous vs Asynchronous Comparison",
              "content": "**Sync approach:**\n```python\nimport time\n\ndef fetch_data(url):\n    time.sleep(1)  # Simulate network delay\n    return f\"Data from {url}\"\n\n# Takes 3 seconds total (1 + 1 + 1)\nresult1 = fetch_data(\"url1\")\nresult2 = fetch_data(\"url2\")\nresult3 = fetch_data(\"url3\")\n```\n\n**Async approach:**\n```python\nimport asyncio\n\nasync def fetch_data(url):\n    await asyncio.sleep(1)  # Non-blocking wait\n    return f\"Data from {url}\"\n\n# Takes ~1 second total (all run concurrently)\nresults = await asyncio.gather(\n    fetch_data(\"url1\"),\n    fetch_data(\"url2\"),\n    fetch_data(\"url3\")\n)\n```\n\n**Key differences:**\n- `async def` creates a coroutine\n- `await` pauses execution without blocking\n- `asyncio.gather()` runs multiple coroutines concurrently",
              "code": "import time\n\n# Simulating synchronous approach\nprint(\"=== Synchronous (Blocking) ===\")\n\ndef sync_fetch(url):\n    \"\"\"Simulates a blocking network request\"\"\"\n    print(f\"  Fetching {url}...\")\n    time.sleep(0.5)  # Blocking wait\n    return f\"Data from {url}\"\n\nstart = time.time()\nresults = []\nfor url in [\"api/users\", \"api/posts\", \"api/comments\"]:\n    results.append(sync_fetch(url))\nend = time.time()\n\nprint(f\"  Results: {results}\")\nprint(f\"  Total time: {end - start:.2f}s (sequential)\\n\")\n\n# Simulating async approach (conceptual)\nprint(\"=== Asynchronous (Non-blocking) Concept ===\")\nprint(\"  With async, all 3 requests run concurrently\")\nprint(\"  Total time would be ~0.5s instead of 1.5s\")\nprint(\"  3x faster for I/O-bound operations!\\n\")\n\n# Show the pattern\nprint(\"=== The Async Pattern ===\")\nasync_code = '''\nimport asyncio\n\nasync def fetch(url):\n    await asyncio.sleep(0.5)  # Non-blocking\n    return f\"Data from {url}\"\n\nasync def main():\n    # Run all 3 concurrently\n    results = await asyncio.gather(\n        fetch(\"api/users\"),\n        fetch(\"api/posts\"),\n        fetch(\"api/comments\")\n    )\n    return results\n\n# Run the async code\nresults = asyncio.run(main())\n'''\nprint(async_code)",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Sync Code in Async Functions**\n```python\n# WRONG - time.sleep blocks the event loop\nasync def fetch_data():\n    time.sleep(1)  # Blocks everything!\n    return 'data'\n\n# CORRECT - Use async sleep\nasync def fetch_data():\n    await asyncio.sleep(1)  # Non-blocking\n    return 'data'\n```\n\n**2. Calling Async Function Without await**\n```python\n# WRONG - Returns coroutine, not result\nasync def get_user():\n    return {'name': 'Alice'}\n\nuser = get_user()  # <coroutine object>\nprint(user['name'])  # TypeError!\n\n# CORRECT - Use await\nuser = await get_user()  # {'name': 'Alice'}\nprint(user['name'])  # 'Alice'\n```\n\n**3. Mixing Sync and Async Incorrectly**\n```python\n# WRONG - Can't await in non-async function\ndef main():\n    result = await get_data()  # SyntaxError!\n\n# CORRECT - Use async def or asyncio.run()\nasync def main():\n    result = await get_data()  # Works!\n\n# Or from sync code:\nresult = asyncio.run(get_data())  # Works!\n```\n\n**4. Using Async for CPU-Bound Tasks**\n```python\n# WRONG - Async doesn't help CPU work\nasync def compute():\n    return sum(range(10**7))  # Still blocks!\n\n# CORRECT - Use multiprocessing for CPU\nfrom concurrent.futures import ProcessPoolExecutor\n\ndef compute():\n    return sum(range(10**7))\n\nwith ProcessPoolExecutor() as pool:\n    result = pool.submit(compute)\n```\n\n**5. Forgetting to Run the Event Loop**\n```python\n# WRONG - Coroutine never executed\nasync def main():\n    print('Hello')\n\nmain()  # Nothing happens! Just creates coroutine\n\n# CORRECT - Use asyncio.run()\nimport asyncio\nasyncio.run(main())  # Prints 'Hello'\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "When Async Helps vs When It Doesn't",
              "content": "**Async is GREAT for I/O-bound tasks:**\n- API calls and web requests\n- Database queries\n- File operations\n- WebSocket connections\n- Any operation where you're WAITING for external systems\n\n**Async does NOT help CPU-bound tasks:**\n- Mathematical computations\n- Image processing\n- Data crunching\n- Machine learning training\n\n**Why?** Async is about using wait time efficiently. If there's no waiting (pure computation), there's no time to reclaim.\n\n**Rule of thumb:**\n- **I/O-bound** (waiting) -> Use `async/await`\n- **CPU-bound** (computing) -> Use `multiprocessing`\n- **Mixed** -> Combine both approaches"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-01-challenge-1",
              "title": "Identify Blocking Operations",
              "description": "Look at the code below and identify which operations are blocking (would benefit from async).",
              "instructions": "Add comments to identify which operations are blocking I/O operations that would benefit from async, and which are CPU-bound operations that would not.",
              "starterCode": "# Identify which operations would benefit from async\n\nimport time\n\ndef process_data():\n    # Operation 1: Read a file\n    with open('data.txt') as f:\n        data = f.read()\n    \n    # Operation 2: Calculate statistics\n    total = sum(range(1000000))\n    \n    # Operation 3: Make API request\n    # response = requests.get('https://api.example.com/data')\n    \n    # Operation 4: Sort a large list\n    sorted_data = sorted(range(100000), reverse=True)\n    \n    # Operation 5: Save to database\n    # db.save(data)\n    \n    return total\n\n# TODO: Add comments above each operation:\n# - \"BLOCKING I/O - async would help\" for I/O operations\n# - \"CPU-BOUND - async won't help\" for computation",
              "solution": "# Identify which operations would benefit from async\n\nimport time\n\ndef process_data():\n    # Operation 1: Read a file\n    # BLOCKING I/O - async would help (use aiofiles)\n    with open('data.txt') as f:\n        data = f.read()\n    \n    # Operation 2: Calculate statistics\n    # CPU-BOUND - async won't help (use multiprocessing)\n    total = sum(range(1000000))\n    \n    # Operation 3: Make API request\n    # BLOCKING I/O - async would help (use httpx or aiohttp)\n    # response = requests.get('https://api.example.com/data')\n    \n    # Operation 4: Sort a large list\n    # CPU-BOUND - async won't help (pure computation)\n    sorted_data = sorted(range(100000), reverse=True)\n    \n    # Operation 5: Save to database\n    # BLOCKING I/O - async would help (use async DB driver)\n    # db.save(data)\n    \n    return total\n\n# Summary:\n# - File I/O: Blocking (async helps)\n# - API requests: Blocking (async helps)\n# - Database: Blocking (async helps)\n# - Sorting/math: CPU-bound (async doesn't help)\n\nprint(\"I/O-bound operations benefit from async:\")\nprint(\"  - File reading/writing\")\nprint(\"  - Network requests\")\nprint(\"  - Database queries\")\nprint(\"\\nCPU-bound operations need multiprocessing:\")\nprint(\"  - Calculations\")\nprint(\"  - Sorting\")\nprint(\"  - Data processing\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "I/O operations involve waiting for external resources (files, network, database). CPU operations are pure computation."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Thinking async speeds up all code",
                  "consequence": "No performance improvement for CPU-bound tasks",
                  "correction": "Async only helps when waiting for I/O operations"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-13-lesson-02",
          "title": "async/await Basics",
          "moduleId": "module-13",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding Coroutines",
              "content": "**What is a coroutine?**\n\nA coroutine is a special function that can pause and resume its execution. When you write `async def`, you're creating a coroutine function.\n\n**Key concepts:**\n\n1. **`async def`** - Declares a coroutine function\n   ```python\n   async def my_function():\n       return \"Hello\"\n   ```\n\n2. **Coroutine object** - What you get when you CALL an async function\n   ```python\n   coro = my_function()  # Creates coroutine object\n   # Does NOT run the function yet!\n   ```\n\n3. **`await`** - Actually runs the coroutine and waits for result\n   ```python\n   result = await my_function()  # NOW it runs\n   ```\n\n**Important:** You can only use `await` inside an `async def` function!\n\n**The mental model:**\n- Regular function: Runs to completion, returns value\n- Coroutine: Can pause at `await`, let other code run, then resume"
            },
            {
              "type": "EXAMPLE",
              "title": "Your First Async Function",
              "content": "**Basic async function:**\n```python\nimport asyncio\n\nasync def greet(name):\n    await asyncio.sleep(1)  # Pause 1 second (non-blocking)\n    return f\"Hello, {name}!\"\n\n# Running the coroutine\nresult = asyncio.run(greet(\"Alice\"))\nprint(result)  # Hello, Alice!\n```\n\n**Key points:**\n- `asyncio.run()` starts the event loop and runs a coroutine\n- `await asyncio.sleep()` pauses without blocking\n- The function returns normally after awaiting",
              "code": "import asyncio\n\n# Define an async function (coroutine)\nasync def greet(name):\n    \"\"\"Async greeting with simulated delay\"\"\"\n    print(f\"  Starting to greet {name}...\")\n    await asyncio.sleep(0.5)  # Non-blocking pause\n    print(f\"  Finished greeting {name}!\")\n    return f\"Hello, {name}!\"\n\nasync def fetch_user_data(user_id):\n    \"\"\"Simulates fetching user data from API\"\"\"\n    print(f\"  Fetching user {user_id}...\")\n    await asyncio.sleep(0.3)  # Simulate network delay\n    return {\"id\": user_id, \"name\": f\"User_{user_id}\"}\n\n# The main async function\nasync def main():\n    print(\"=== Basic Async Function ===\")\n    \n    # Await a single coroutine\n    greeting = await greet(\"Alice\")\n    print(f\"  Result: {greeting}\\n\")\n    \n    print(\"=== Calling Multiple Async Functions ===\")\n    \n    # These run sequentially (one after another)\n    user1 = await fetch_user_data(1)\n    user2 = await fetch_user_data(2)\n    print(f\"  User 1: {user1}\")\n    print(f\"  User 2: {user2}\\n\")\n    \n    print(\"=== What NOT to Do ===\")\n    print(\"  # This creates a coroutine but doesn't run it:\")\n    print(\"  coro = greet('Bob')  # Just creates object\")\n    print(\"  # Must use: result = await coro\")\n\n# Run the async code\nprint(\"Starting async program...\\n\")\nasyncio.run(main())\nprint(\"\\nAsync program complete!\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Awaiting Non-Awaitable Objects**\n```python\n# WRONG - Regular function not awaitable\ndef regular_func():\n    return 'data'\n\nasync def main():\n    result = await regular_func()  # TypeError!\n\n# CORRECT - Only await async functions\nasync def async_func():\n    return 'data'\n\nasync def main():\n    result = await async_func()  # Works!\n```\n\n**2. Using asyncio.run() Inside Async Context**\n```python\n# WRONG - Can't nest asyncio.run()\nasync def main():\n    result = asyncio.run(other_async())  # RuntimeError!\n\n# CORRECT - Just await it\nasync def main():\n    result = await other_async()  # Works!\n```\n\n**3. Awaiting Inside List Comprehension**\n```python\n# WRONG - Can't use await in list comprehension directly\nasync def main():\n    results = [await fetch(i) for i in range(3)]  # Runs sequentially!\n\n# CORRECT - Use asyncio.gather for concurrency\nasync def main():\n    results = await asyncio.gather(*[fetch(i) for i in range(3)])\n```\n\n**4. Calling Coroutine Without Scheduling**\n```python\n# WRONG - Coroutine created but never runs\nasync def main():\n    fetch_data()  # Warning: coroutine never awaited!\n\n# CORRECT - Use await or schedule it\nasync def main():\n    await fetch_data()  # Runs and waits\n    # Or create a task\n    task = asyncio.create_task(fetch_data())\n```\n\n**5. Infinite Loop Without Yielding**\n```python\n# WRONG - Blocks event loop forever\nasync def bad_loop():\n    while True:\n        process_data()  # No await, blocks!\n\n# CORRECT - Yield control periodically\nasync def good_loop():\n    while True:\n        process_data()\n        await asyncio.sleep(0)  # Yield to event loop\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "The Golden Rules",
              "content": "**Cannot call async function directly:**\n```python\nasync def get_data():\n    return \"data\"\n\n# WRONG - creates coroutine object, doesn't run\nresult = get_data()  # <coroutine object>\n\n# RIGHT - use await (inside async function)\nresult = await get_data()\n\n# RIGHT - use asyncio.run() (from regular code)\nresult = asyncio.run(get_data())\n```\n\n**await only works inside async def:**\n```python\n# WRONG - SyntaxError\ndef regular_function():\n    result = await get_data()  # Error!\n\n# RIGHT\nasync def async_function():\n    result = await get_data()  # Works!\n```\n\n**The entry point:**\nUse `asyncio.run(main())` to start your async code from regular Python."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-02-challenge-1",
              "title": "Convert Sync to Async",
              "description": "Convert the synchronous function to an async function.",
              "instructions": "Convert the `fetch_weather` function to be async. Use `await asyncio.sleep()` instead of `time.sleep()`, and properly run it with `asyncio.run()`.",
              "starterCode": "import time\n\n# Synchronous version\ndef fetch_weather(city):\n    \"\"\"Fetches weather data (simulated)\"\"\"\n    print(f\"Fetching weather for {city}...\")\n    time.sleep(1)  # Simulate API call\n    return {\"city\": city, \"temp\": 72, \"condition\": \"sunny\"}\n\n# TODO: Convert to async version\n# async def fetch_weather_async(city):\n#     ...\n\n# Test the sync version\nresult = fetch_weather(\"New York\")\nprint(f\"Result: {result}\")\n\n# TODO: Test the async version\n# result = asyncio.run(fetch_weather_async(\"New York\"))",
              "solution": "import asyncio\n\n# Async version of fetch_weather\nasync def fetch_weather_async(city):\n    \"\"\"Fetches weather data asynchronously (simulated)\"\"\"\n    print(f\"Fetching weather for {city}...\")\n    await asyncio.sleep(1)  # Non-blocking sleep\n    return {\"city\": city, \"temp\": 72, \"condition\": \"sunny\"}\n\n# Main async function to demonstrate\nasync def main():\n    print(\"=== Async Weather Fetch ===\")\n    \n    # Single fetch\n    result = await fetch_weather_async(\"New York\")\n    print(f\"Result: {result}\\n\")\n    \n    # Multiple fetches (still sequential for now)\n    print(\"Fetching multiple cities...\")\n    cities = [\"London\", \"Tokyo\", \"Paris\"]\n    for city in cities:\n        weather = await fetch_weather_async(city)\n        print(f\"  {weather}\")\n\n# Run the async code\nprint(\"Starting async weather app...\\n\")\nasyncio.run(main())\nprint(\"\\nDone!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Replace `def` with `async def`, `time.sleep()` with `await asyncio.sleep()`, and use `asyncio.run()` to execute."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to import asyncio",
                  "consequence": "NameError: name 'asyncio' is not defined",
                  "correction": "Add `import asyncio` at the top"
                },
                {
                  "mistake": "Calling async function without await",
                  "consequence": "Returns coroutine object instead of result",
                  "correction": "Use `await` or `asyncio.run()`"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-13-lesson-03",
          "title": "The Event Loop",
          "moduleId": "module-13",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "How the Event Loop Works",
              "content": "**The Event Loop: The Conductor of Async Code**\n\nThink of the event loop as a conductor in an orchestra:\n- It coordinates all the async tasks\n- Decides which task runs next\n- Handles switching between paused tasks\n\n**How it works:**\n1. You submit coroutines to the event loop\n2. Event loop runs them until they hit `await`\n3. When one pauses, it runs another\n4. When awaited operation completes, it resumes that coroutine\n\n**Key functions:**\n- `asyncio.run(coro)` - Create loop, run coroutine, close loop\n- `asyncio.gather(*coros)` - Run multiple coroutines concurrently\n- `asyncio.create_task(coro)` - Schedule coroutine to run soon\n\n**Important:** There's only ONE event loop per thread. All async operations share it."
            },
            {
              "type": "EXAMPLE",
              "title": "Running Coroutines Concurrently",
              "content": "**Sequential vs Concurrent execution:**\n\n**Sequential (slow):**\n```python\nresult1 = await fetch(url1)  # Wait 1s\nresult2 = await fetch(url2)  # Wait 1s\nresult3 = await fetch(url3)  # Wait 1s\n# Total: 3 seconds\n```\n\n**Concurrent with gather (fast):**\n```python\nresults = await asyncio.gather(\n    fetch(url1),\n    fetch(url2),\n    fetch(url3)\n)\n# Total: ~1 second (all run at once)\n```",
              "code": "import asyncio\nimport time\n\nasync def fetch_data(name, delay):\n    \"\"\"Simulates an async operation with variable delay\"\"\"\n    print(f\"  [{name}] Starting...\")\n    await asyncio.sleep(delay)\n    print(f\"  [{name}] Done after {delay}s!\")\n    return f\"{name}_result\"\n\nasync def main():\n    print(\"=== Sequential Execution ===\")\n    start = time.time()\n    \n    # Each await blocks until complete\n    r1 = await fetch_data(\"Task1\", 0.5)\n    r2 = await fetch_data(\"Task2\", 0.5)\n    r3 = await fetch_data(\"Task3\", 0.5)\n    \n    print(f\"  Results: {[r1, r2, r3]}\")\n    print(f\"  Time: {time.time() - start:.2f}s\\n\")\n    \n    print(\"=== Concurrent with asyncio.gather() ===\")\n    start = time.time()\n    \n    # All tasks run concurrently!\n    results = await asyncio.gather(\n        fetch_data(\"TaskA\", 0.5),\n        fetch_data(\"TaskB\", 0.5),\n        fetch_data(\"TaskC\", 0.5)\n    )\n    \n    print(f\"  Results: {results}\")\n    print(f\"  Time: {time.time() - start:.2f}s (3x faster!)\\n\")\n    \n    print(\"=== Using asyncio.create_task() ===\")\n    start = time.time()\n    \n    # Create tasks (they start running immediately)\n    task1 = asyncio.create_task(fetch_data(\"TaskX\", 0.3))\n    task2 = asyncio.create_task(fetch_data(\"TaskY\", 0.5))\n    task3 = asyncio.create_task(fetch_data(\"TaskZ\", 0.4))\n    \n    # Do other work while tasks run...\n    print(\"  [Main] Tasks started, doing other work...\")\n    await asyncio.sleep(0.1)\n    print(\"  [Main] Other work done, waiting for tasks...\")\n    \n    # Collect results\n    results = [await task1, await task2, await task3]\n    print(f\"  Results: {results}\")\n    print(f\"  Time: {time.time() - start:.2f}s\")\n\nprint(\"Event Loop Demo\\n\")\nasyncio.run(main())",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Creating Event Loop When One Exists**\n```python\n# WRONG - RuntimeError if loop already running\nasync def main():\n    loop = asyncio.get_event_loop()  # OK\n    loop.run_until_complete(other())  # Error!\n\n# CORRECT - Just await inside async context\nasync def main():\n    await other()  # Works!\n```\n\n**2. Tasks Not Started Until Awaited**\n```python\n# WRONG - Tasks don't start\nasync def main():\n    tasks = [my_coro() for i in range(3)]  # Just coroutines!\n    # Nothing happens yet\n\n# CORRECT - Use create_task to start immediately\nasync def main():\n    tasks = [asyncio.create_task(my_coro()) for i in range(3)]\n    # Tasks start running now!\n    await asyncio.gather(*tasks)\n```\n\n**3. Not Waiting for All Tasks to Complete**\n```python\n# WRONG - Tasks may not finish before exit\nasync def main():\n    asyncio.create_task(long_task())  # Starts\n    asyncio.create_task(long_task())  # Starts\n    # main() exits, tasks cancelled!\n\n# CORRECT - Wait for all tasks\nasync def main():\n    tasks = [\n        asyncio.create_task(long_task()),\n        asyncio.create_task(long_task())\n    ]\n    await asyncio.gather(*tasks)  # Wait for all\n```\n\n**4. Blocking the Event Loop with Sync Code**\n```python\n# WRONG - requests.get blocks entire loop\nasync def fetch():\n    return requests.get('https://api.example.com')  # Blocks!\n\n# CORRECT - Use async HTTP library\nasync def fetch():\n    async with httpx.AsyncClient() as client:\n        return await client.get('https://api.example.com')\n```\n\n**5. Getting Wrong Event Loop Reference**\n```python\n# WRONG in Python 3.10+ (deprecated)\nloop = asyncio.get_event_loop()  # Warning!\n\n# CORRECT - Use get_running_loop inside async\nasync def main():\n    loop = asyncio.get_running_loop()  # Correct!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "One Event Loop Per Thread",
              "content": "**Critical concept:** Each thread has exactly one event loop.\n\n**Common patterns:**\n\n```python\n# Pattern 1: asyncio.run() - creates new loop, runs, closes\nasyncio.run(main())  # Most common\n\n# Pattern 2: asyncio.gather() - run multiple coroutines\nawait asyncio.gather(coro1, coro2, coro3)\n\n# Pattern 3: asyncio.create_task() - schedule for later\ntask = asyncio.create_task(my_coro())\n# ... do other things ...\nresult = await task\n```\n\n**gather() vs create_task():**\n- `gather()`: Wait for ALL results together\n- `create_task()`: Fire-and-forget, collect results later\n\n**When to use which:**\n- Need all results at once -> `gather()`\n- Need to do work while tasks run -> `create_task()`"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-03-challenge-1",
              "title": "Run Coroutines Concurrently",
              "description": "Use asyncio.gather() to run multiple fetch operations concurrently.",
              "instructions": "Complete the `fetch_all_users` function to fetch all user IDs concurrently using `asyncio.gather()`. The function should return a list of all user data.",
              "starterCode": "import asyncio\n\nasync def fetch_user(user_id):\n    \"\"\"Simulates fetching a user from API\"\"\"\n    await asyncio.sleep(0.5)  # Simulate network delay\n    return {\"id\": user_id, \"name\": f\"User_{user_id}\"}\n\nasync def fetch_all_users(user_ids):\n    \"\"\"Fetch all users concurrently\"\"\"\n    # TODO: Use asyncio.gather() to fetch all users at once\n    # Return a list of user data dictionaries\n    pass\n\nasync def main():\n    user_ids = [1, 2, 3, 4, 5]\n    print(f\"Fetching {len(user_ids)} users...\")\n    \n    users = await fetch_all_users(user_ids)\n    \n    print(\"\\nResults:\")\n    for user in users:\n        print(f\"  {user}\")\n\nasyncio.run(main())",
              "solution": "import asyncio\nimport time\n\nasync def fetch_user(user_id):\n    \"\"\"Simulates fetching a user from API\"\"\"\n    print(f\"  Fetching user {user_id}...\")\n    await asyncio.sleep(0.5)  # Simulate network delay\n    return {\"id\": user_id, \"name\": f\"User_{user_id}\"}\n\nasync def fetch_all_users(user_ids):\n    \"\"\"Fetch all users concurrently using asyncio.gather()\"\"\"\n    # Create coroutines for each user\n    coroutines = [fetch_user(uid) for uid in user_ids]\n    \n    # Run all concurrently and collect results\n    results = await asyncio.gather(*coroutines)\n    \n    return results\n\nasync def main():\n    user_ids = [1, 2, 3, 4, 5]\n    print(f\"Fetching {len(user_ids)} users concurrently...\")\n    \n    start = time.time()\n    users = await fetch_all_users(user_ids)\n    elapsed = time.time() - start\n    \n    print(f\"\\nResults (took {elapsed:.2f}s):\")\n    for user in users:\n        print(f\"  {user}\")\n    \n    print(f\"\\nNote: 5 users in {elapsed:.2f}s instead of 2.5s!\")\n\nasyncio.run(main())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create a list of coroutines with list comprehension, then use `await asyncio.gather(*coroutines)` to run them all."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the * in gather(*coroutines)",
                  "consequence": "TypeError: gather() takes no positional arguments",
                  "correction": "Use * to unpack the list: asyncio.gather(*coroutines)"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-04",
          "title": "Async Context Managers",
          "moduleId": "module-13",
          "order": 4,
          "estimatedMinutes": 25,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Resource Cleanup in Async Code",
              "content": "**The Problem: Cleaning Up Async Resources**\n\nJust like regular code needs `with` statements for proper cleanup, async code needs `async with` for async resources.\n\n**Regular context manager:**\n```python\nwith open('file.txt') as f:\n    data = f.read()\n# File automatically closed\n```\n\n**Async context manager:**\n```python\nasync with aiofiles.open('file.txt') as f:\n    data = await f.read()\n# File automatically closed\n```\n\n**Why async context managers?**\n- Some resources need async setup/teardown\n- Network connections, database connections, file handles\n- Ensures cleanup even if errors occur\n\n**Common async context managers:**\n- `aiofiles.open()` - Async file I/O\n- `httpx.AsyncClient()` - HTTP connection pooling\n- `asyncpg.create_pool()` - PostgreSQL connections\n- Database sessions and transactions"
            },
            {
              "type": "EXAMPLE",
              "title": "Using async with for File I/O",
              "content": "**aiofiles library:**\n```python\nimport aiofiles\n\nasync with aiofiles.open('data.txt', 'r') as f:\n    content = await f.read()\n\nasync with aiofiles.open('output.txt', 'w') as f:\n    await f.write('Hello, World!')\n```\n\n**Why use aiofiles instead of regular open()?**\n- Regular file I/O blocks the event loop\n- aiofiles uses thread pool for non-blocking file access\n- Allows other coroutines to run during file operations",
              "code": "import asyncio\n\n# Note: In real code, you'd use aiofiles library\n# pip install aiofiles\n\n# Simulating async file operations\nclass AsyncFile:\n    \"\"\"Simulates aiofiles behavior for demonstration\"\"\"\n    \n    def __init__(self, filename, mode='r'):\n        self.filename = filename\n        self.mode = mode\n        self.content = \"\"\n    \n    async def __aenter__(self):\n        \"\"\"Async context manager entry\"\"\"\n        print(f\"  Opening {self.filename}...\")\n        await asyncio.sleep(0.1)  # Simulate async open\n        return self\n    \n    async def __aexit__(self, exc_type, exc_val, exc_tb):\n        \"\"\"Async context manager exit - cleanup\"\"\"\n        print(f\"  Closing {self.filename}...\")\n        await asyncio.sleep(0.05)  # Simulate async close\n        return False\n    \n    async def read(self):\n        await asyncio.sleep(0.1)  # Simulate async read\n        return f\"Content of {self.filename}\"\n    \n    async def write(self, data):\n        await asyncio.sleep(0.1)  # Simulate async write\n        self.content = data\n        print(f\"  Wrote: {data[:50]}...\")\n\nasync def demo_async_file():\n    print(\"=== Async File Reading ===\")\n    \n    async with AsyncFile('data.txt', 'r') as f:\n        content = await f.read()\n        print(f\"  Read: {content}\")\n    \n    print(\"\\n=== Async File Writing ===\")\n    \n    async with AsyncFile('output.txt', 'w') as f:\n        await f.write(\"Hello from async Python!\")\n    \n    print(\"\\n=== Real aiofiles usage would look like ===\")\n    code = '''\n    import aiofiles\n    \n    async def read_file(path):\n        async with aiofiles.open(path, 'r') as f:\n            return await f.read()\n    \n    async def write_file(path, content):\n        async with aiofiles.open(path, 'w') as f:\n            await f.write(content)\n    '''\n    print(code)\n\nasyncio.run(demo_async_file())",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Regular with Instead of async with**\n```python\n# WRONG - with doesn't call __aenter__/__aexit__\nasync def fetch():\n    with httpx.AsyncClient() as client:  # Error or wrong behavior\n        return await client.get(url)\n\n# CORRECT - Use async with\nasync def fetch():\n    async with httpx.AsyncClient() as client:\n        return await client.get(url)\n```\n\n**2. Creating New Client for Each Request**\n```python\n# WRONG - Inefficient, creates new connection each time\nasync def fetch_many(urls):\n    for url in urls:\n        async with httpx.AsyncClient() as client:\n            await client.get(url)  # New connection each time!\n\n# CORRECT - Reuse client for multiple requests\nasync def fetch_many(urls):\n    async with httpx.AsyncClient() as client:\n        for url in urls:\n            await client.get(url)  # Reuses connection\n```\n\n**3. Forgetting await in Async Context Manager**\n```python\n# WRONG - Returns coroutine not result\nasync def read_file():\n    async with aiofiles.open('file.txt') as f:\n        return f.read()  # Returns coroutine!\n\n# CORRECT - Await the read\nasync def read_file():\n    async with aiofiles.open('file.txt') as f:\n        return await f.read()  # Returns content\n```\n\n**4. Not Handling Exceptions in Context Manager**\n```python\n# WRONG - Exception leaves resource unclosed\nasync def bad():\n    client = httpx.AsyncClient()\n    await client.get(url)  # If error, never closed!\n\n# CORRECT - Use async with for cleanup\nasync def good():\n    async with httpx.AsyncClient() as client:\n        await client.get(url)  # Closed even on error\n```\n\n**5. Mixing Sync and Async Context Managers**\n```python\n# WRONG - Can't use sync context manager in async\nasync def bad():\n    with open('file.txt') as f:  # Blocks!\n        return f.read()\n\n# CORRECT - Use async file library\nimport aiofiles\nasync def good():\n    async with aiofiles.open('file.txt') as f:\n        return await f.read()  # Non-blocking\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Always Properly Close Async Resources",
              "content": "**Best practices for async resources:**\n\n1. **Always use `async with` when available:**\n   ```python\n   async with resource as r:\n       await r.do_something()\n   # Automatically cleaned up\n   ```\n\n2. **For HTTP clients, reuse connections:**\n   ```python\n   async with httpx.AsyncClient() as client:\n       # Reuse this client for multiple requests\n       r1 = await client.get(url1)\n       r2 = await client.get(url2)\n   ```\n\n3. **Database connections should be pooled:**\n   ```python\n   async with database.pool.acquire() as conn:\n       result = await conn.fetch(query)\n   ```\n\n**Why cleanup matters:**\n- Unclosed connections leak memory\n- Too many open files causes errors\n- Database connections are limited\n- Network sockets are limited"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-04-challenge-1",
              "title": "Async File Processing",
              "description": "Create an async function that processes multiple files concurrently.",
              "instructions": "Complete the `process_files` function that reads multiple files concurrently and returns their contents. Use the provided AsyncFileReader class.",
              "starterCode": "import asyncio\n\nclass AsyncFileReader:\n    \"\"\"Simulates async file reading\"\"\"\n    \n    def __init__(self, filename):\n        self.filename = filename\n    \n    async def __aenter__(self):\n        await asyncio.sleep(0.2)  # Simulate open\n        return self\n    \n    async def __aexit__(self, *args):\n        await asyncio.sleep(0.1)  # Simulate close\n    \n    async def read(self):\n        await asyncio.sleep(0.3)  # Simulate read\n        return f\"Content of {self.filename}\"\n\nasync def read_file(filename):\n    \"\"\"Read a single file asynchronously\"\"\"\n    # TODO: Use async with to read the file\n    pass\n\nasync def process_files(filenames):\n    \"\"\"Read multiple files concurrently\"\"\"\n    # TODO: Use asyncio.gather to read all files\n    pass\n\nasync def main():\n    files = [\"file1.txt\", \"file2.txt\", \"file3.txt\"]\n    contents = await process_files(files)\n    for content in contents:\n        print(content)\n\nasyncio.run(main())",
              "solution": "import asyncio\nimport time\n\nclass AsyncFileReader:\n    \"\"\"Simulates async file reading\"\"\"\n    \n    def __init__(self, filename):\n        self.filename = filename\n    \n    async def __aenter__(self):\n        print(f\"  Opening {self.filename}...\")\n        await asyncio.sleep(0.2)  # Simulate open\n        return self\n    \n    async def __aexit__(self, *args):\n        print(f\"  Closing {self.filename}...\")\n        await asyncio.sleep(0.1)  # Simulate close\n    \n    async def read(self):\n        await asyncio.sleep(0.3)  # Simulate read\n        return f\"Content of {self.filename}\"\n\nasync def read_file(filename):\n    \"\"\"Read a single file asynchronously\"\"\"\n    async with AsyncFileReader(filename) as f:\n        content = await f.read()\n        return content\n\nasync def process_files(filenames):\n    \"\"\"Read multiple files concurrently\"\"\"\n    # Create coroutines for each file\n    coroutines = [read_file(f) for f in filenames]\n    \n    # Run all concurrently\n    results = await asyncio.gather(*coroutines)\n    \n    return results\n\nasync def main():\n    files = [\"file1.txt\", \"file2.txt\", \"file3.txt\"]\n    \n    print(\"Processing files concurrently...\")\n    start = time.time()\n    \n    contents = await process_files(files)\n    \n    elapsed = time.time() - start\n    print(f\"\\nResults (took {elapsed:.2f}s):\")\n    for content in contents:\n        print(f\"  {content}\")\n\nasyncio.run(main())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use `async with AsyncFileReader(filename) as f:` to open files, then `await f.read()` to read content."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using regular 'with' instead of 'async with'",
                  "consequence": "TypeError or blocking behavior",
                  "correction": "Always use 'async with' for async context managers"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-05",
          "title": "Async HTTP with httpx",
          "moduleId": "module-13",
          "order": 5,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "httpx vs requests Library",
              "content": "**The Problem with requests:**\n\nThe popular `requests` library is synchronous. Each request blocks until complete.\n\n```python\nimport requests\n\n# This blocks for each request\nr1 = requests.get(url1)  # Wait 1s\nr2 = requests.get(url2)  # Wait 1s\nr3 = requests.get(url3)  # Wait 1s\n# Total: 3 seconds\n```\n\n**httpx: The async alternative**\n\n```python\nimport httpx\n\nasync with httpx.AsyncClient() as client:\n    # All requests run concurrently\n    r1, r2, r3 = await asyncio.gather(\n        client.get(url1),\n        client.get(url2),\n        client.get(url3)\n    )\n# Total: ~1 second\n```\n\n**Why httpx?**\n- Supports both sync and async\n- HTTP/2 support\n- Modern Python API\n- Connection pooling built-in\n- Similar API to requests (easy migration)"
            },
            {
              "type": "EXAMPLE",
              "title": "Making Concurrent HTTP Requests",
              "content": "**Basic httpx usage:**\n```python\nimport httpx\n\n# Sync usage (like requests)\nresponse = httpx.get('https://api.example.com/data')\n\n# Async usage\nasync with httpx.AsyncClient() as client:\n    response = await client.get('https://api.example.com/data')\n```\n\n**Connection pooling with AsyncClient:**\nAlways use `async with` to manage the client lifecycle!",
              "code": "import asyncio\n\n# Simulating httpx behavior (real httpx requires installation)\n# pip install httpx\n\nclass MockAsyncClient:\n    \"\"\"Simulates httpx.AsyncClient for demonstration\"\"\"\n    \n    async def __aenter__(self):\n        print(\"  [Client] Connection pool opened\")\n        return self\n    \n    async def __aexit__(self, *args):\n        print(\"  [Client] Connection pool closed\")\n    \n    async def get(self, url):\n        print(f\"  GET {url}\")\n        await asyncio.sleep(0.3)  # Simulate network\n        return MockResponse(url, 200)\n    \n    async def post(self, url, json=None):\n        print(f\"  POST {url}\")\n        await asyncio.sleep(0.3)\n        return MockResponse(url, 201, json)\n\nclass MockResponse:\n    def __init__(self, url, status_code, data=None):\n        self.url = url\n        self.status_code = status_code\n        self._data = data or {\"source\": url}\n    \n    def json(self):\n        return self._data\n    \n    @property\n    def text(self):\n        return str(self._data)\n\nasync def demo_async_http():\n    print(\"=== Async HTTP Requests ===\")\n    \n    async with MockAsyncClient() as client:\n        # Single request\n        response = await client.get(\"https://api.example.com/users\")\n        print(f\"  Status: {response.status_code}\")\n        print(f\"  Data: {response.json()}\\n\")\n        \n        # Multiple concurrent requests\n        print(\"=== Concurrent Requests ===\")\n        responses = await asyncio.gather(\n            client.get(\"https://api.example.com/users\"),\n            client.get(\"https://api.example.com/posts\"),\n            client.get(\"https://api.example.com/comments\")\n        )\n        \n        for r in responses:\n            print(f\"  {r.url}: {r.status_code}\")\n    \n    print(\"\\n=== Real httpx usage ===\")\n    code = '''\n    import httpx\n    import asyncio\n    \n    async def fetch_all():\n        async with httpx.AsyncClient() as client:\n            responses = await asyncio.gather(\n                client.get(\"https://api.github.com/users/python\"),\n                client.get(\"https://api.github.com/users/django\"),\n                client.get(\"https://api.github.com/users/fastapi\")\n            )\n            return [r.json() for r in responses]\n    \n    users = asyncio.run(fetch_all())\n    '''\n    print(code)\n\nasyncio.run(demo_async_http())",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using requests Instead of httpx in Async Code**\n```python\n# WRONG - requests blocks the event loop\nasync def fetch():\n    import requests\n    return requests.get(url)  # Blocks everything!\n\n# CORRECT - Use httpx for async\nasync def fetch():\n    async with httpx.AsyncClient() as client:\n        return await client.get(url)  # Non-blocking\n```\n\n**2. Not Handling HTTP Errors**\n```python\n# WRONG - No error handling\nasync def fetch():\n    async with httpx.AsyncClient() as client:\n        return await client.get(url)  # May fail silently\n\n# CORRECT - Check status and handle errors\nasync def fetch():\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url)\n        response.raise_for_status()  # Raises on 4xx/5xx\n        return response.json()\n```\n\n**3. Not Setting Timeouts**\n```python\n# WRONG - No timeout, can hang forever\nasync with httpx.AsyncClient() as client:\n    await client.get(url)  # May wait forever\n\n# CORRECT - Always set timeout\nasync with httpx.AsyncClient(timeout=30.0) as client:\n    await client.get(url)  # Fails after 30s\n```\n\n**4. Making Too Many Concurrent Requests**\n```python\n# WRONG - May overwhelm server or get rate limited\nurls = [url for url in range(1000)]  # 1000 URLs!\nawait asyncio.gather(*[client.get(u) for u in urls])  # Boom!\n\n# CORRECT - Limit concurrency with semaphore\nsem = asyncio.Semaphore(10)  # Max 10 at a time\nasync def limited_fetch(url):\n    async with sem:\n        return await client.get(url)\n```\n\n**5. Forgetting to Parse Response**\n```python\n# WRONG - response is Response object, not data\nasync def get_users():\n    async with httpx.AsyncClient() as client:\n        return await client.get(url)  # Returns Response!\n\nusers = await get_users()\nprint(users['name'])  # TypeError!\n\n# CORRECT - Parse JSON response\nasync def get_users():\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url)\n        return response.json()  # Returns dict!\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Connection Pooling with AsyncClient",
              "content": "**Always use `async with httpx.AsyncClient()`:**\n\n```python\n# GOOD - connections are pooled and reused\nasync with httpx.AsyncClient() as client:\n    for url in urls:\n        response = await client.get(url)\n\n# BAD - creates new connection for each request\nfor url in urls:\n    async with httpx.AsyncClient() as client:\n        response = await client.get(url)\n```\n\n**Benefits of connection pooling:**\n- Reuses TCP connections (faster)\n- Reduces server load\n- Automatic connection management\n- Proper cleanup on exit\n\n**Timeouts and limits:**\n```python\nasync with httpx.AsyncClient(\n    timeout=10.0,\n    limits=httpx.Limits(max_connections=100)\n) as client:\n    ...\n```"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-05-challenge-1",
              "title": "Fetch Multiple URLs Concurrently",
              "description": "Create an async function to fetch multiple URLs and return their responses.",
              "instructions": "Complete the `fetch_urls` function that takes a list of URLs and fetches them all concurrently. Return a list of response data.",
              "starterCode": "import asyncio\n\n# Mock client for demonstration\nclass MockClient:\n    async def __aenter__(self): return self\n    async def __aexit__(self, *args): pass\n    \n    async def get(self, url):\n        await asyncio.sleep(0.2)\n        return MockResponse(url)\n\nclass MockResponse:\n    def __init__(self, url):\n        self.url = url\n        self.status_code = 200\n    \n    def json(self):\n        return {\"url\": self.url, \"data\": \"sample\"}\n\nasync def fetch_urls(urls):\n    \"\"\"Fetch all URLs concurrently and return list of JSON data\"\"\"\n    # TODO: Use async with MockClient() as client\n    # TODO: Use asyncio.gather to fetch all URLs\n    # TODO: Return list of response.json() for each response\n    pass\n\nasync def main():\n    urls = [\n        \"https://api.example.com/users\",\n        \"https://api.example.com/posts\",\n        \"https://api.example.com/comments\"\n    ]\n    \n    results = await fetch_urls(urls)\n    for result in results:\n        print(result)\n\nasyncio.run(main())",
              "solution": "import asyncio\nimport time\n\n# Mock client for demonstration\nclass MockClient:\n    async def __aenter__(self):\n        print(\"  Client opened\")\n        return self\n    \n    async def __aexit__(self, *args):\n        print(\"  Client closed\")\n    \n    async def get(self, url):\n        print(f\"  Fetching {url}...\")\n        await asyncio.sleep(0.2)\n        return MockResponse(url)\n\nclass MockResponse:\n    def __init__(self, url):\n        self.url = url\n        self.status_code = 200\n    \n    def json(self):\n        return {\"url\": self.url, \"data\": \"sample\"}\n\nasync def fetch_urls(urls):\n    \"\"\"Fetch all URLs concurrently and return list of JSON data\"\"\"\n    async with MockClient() as client:\n        # Create list of coroutines\n        coroutines = [client.get(url) for url in urls]\n        \n        # Fetch all concurrently\n        responses = await asyncio.gather(*coroutines)\n        \n        # Extract JSON from each response\n        return [response.json() for response in responses]\n\nasync def main():\n    urls = [\n        \"https://api.example.com/users\",\n        \"https://api.example.com/posts\",\n        \"https://api.example.com/comments\"\n    ]\n    \n    print(\"Fetching URLs concurrently...\")\n    start = time.time()\n    \n    results = await fetch_urls(urls)\n    \n    elapsed = time.time() - start\n    print(f\"\\nResults (took {elapsed:.2f}s):\")\n    for result in results:\n        print(f\"  {result}\")\n\nasyncio.run(main())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create coroutines with [client.get(url) for url in urls], then use await asyncio.gather(*coroutines)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not using async with for the client",
                  "consequence": "Connection pool not properly managed",
                  "correction": "Always use async with httpx.AsyncClient() as client:"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-06",
          "title": "Error Handling in Async",
          "moduleId": "module-13",
          "order": 6,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "How Exceptions Propagate in Async Code",
              "content": "**Exceptions in async code work similarly to sync code:**\n\n```python\nasync def might_fail():\n    raise ValueError(\"Oops!\")\n\ntry:\n    await might_fail()\nexcept ValueError as e:\n    print(f\"Caught: {e}\")\n```\n\n**But with concurrent tasks, it's trickier:**\n\nWith `asyncio.gather()`, if one task fails:\n- By default, ALL tasks are cancelled\n- First exception is raised\n\n**Solution: `return_exceptions=True`**\n```python\nresults = await asyncio.gather(\n    task1(),\n    task2(),  # This might fail\n    task3(),\n    return_exceptions=True\n)\n# results = [result1, ValueError(...), result3]\n```\n\nNow exceptions are returned as values instead of raised!"
            },
            {
              "type": "EXAMPLE",
              "title": "Handling Errors with TaskGroup and wait_for",
              "content": "**Python 3.11+ TaskGroup:**\n```python\nasync with asyncio.TaskGroup() as tg:\n    tg.create_task(task1())\n    tg.create_task(task2())\n# All tasks complete or all are cancelled on error\n```\n\n**Timeouts with wait_for:**\n```python\ntry:\n    result = await asyncio.wait_for(slow_task(), timeout=5.0)\nexcept asyncio.TimeoutError:\n    print(\"Task took too long!\")\n```",
              "code": "import asyncio\n\nasync def successful_task(name):\n    await asyncio.sleep(0.2)\n    return f\"{name} completed\"\n\nasync def failing_task(name):\n    await asyncio.sleep(0.1)\n    raise ValueError(f\"{name} failed!\")\n\nasync def slow_task():\n    await asyncio.sleep(5)  # Very slow\n    return \"Finally done\"\n\nasync def main():\n    print(\"=== gather() Default Behavior ===\")\n    try:\n        results = await asyncio.gather(\n            successful_task(\"Task1\"),\n            failing_task(\"Task2\"),\n            successful_task(\"Task3\")\n        )\n    except ValueError as e:\n        print(f\"  Caught exception: {e}\")\n        print(\"  (Other tasks were cancelled)\\n\")\n    \n    print(\"=== gather() with return_exceptions=True ===\")\n    results = await asyncio.gather(\n        successful_task(\"TaskA\"),\n        failing_task(\"TaskB\"),\n        successful_task(\"TaskC\"),\n        return_exceptions=True\n    )\n    \n    for i, result in enumerate(results):\n        if isinstance(result, Exception):\n            print(f\"  Task {i}: ERROR - {result}\")\n        else:\n            print(f\"  Task {i}: {result}\")\n    \n    print(\"\\n=== Timeout with wait_for() ===\")\n    try:\n        # This will timeout after 0.5 seconds\n        result = await asyncio.wait_for(\n            slow_task(),\n            timeout=0.5\n        )\n    except asyncio.TimeoutError:\n        print(\"  Task timed out after 0.5s!\")\n    \n    print(\"\\n=== Individual Error Handling ===\")\n    \n    async def safe_fetch(url):\n        \"\"\"Wrapper that handles errors gracefully\"\"\"\n        try:\n            await asyncio.sleep(0.1)\n            if \"bad\" in url:\n                raise ConnectionError(f\"Failed to connect to {url}\")\n            return {\"url\": url, \"data\": \"success\"}\n        except ConnectionError as e:\n            return {\"url\": url, \"error\": str(e)}\n    \n    urls = [\"good.com\", \"bad.com\", \"also-good.com\"]\n    results = await asyncio.gather(*[safe_fetch(url) for url in urls])\n    \n    for result in results:\n        if \"error\" in result:\n            print(f\"  FAIL: {result['url']} - {result['error']}\")\n        else:\n            print(f\"  OK: {result['url']}\")\n\nasyncio.run(main())",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. One Failed Task Cancels All Others**\n```python\n# WRONG - One error cancels everything\nresults = await asyncio.gather(\n    fetch(url1),\n    fetch(url2),  # If this fails, url1 and url3 cancelled!\n    fetch(url3)\n)\n\n# CORRECT - Use return_exceptions=True\nresults = await asyncio.gather(\n    fetch(url1),\n    fetch(url2),\n    fetch(url3),\n    return_exceptions=True  # All complete!\n)\n```\n\n**2. Not Checking for Exceptions in Results**\n```python\n# WRONG - Results may contain exceptions\nresults = await asyncio.gather(*tasks, return_exceptions=True)\nfor r in results:\n    print(r['data'])  # May be Exception, not dict!\n\n# CORRECT - Check each result\nfor r in results:\n    if isinstance(r, Exception):\n        print(f'Error: {r}')\n    else:\n        print(r['data'])\n```\n\n**3. Forgetting TimeoutError Handling**\n```python\n# WRONG - TimeoutError not caught\nresult = await asyncio.wait_for(slow_task(), timeout=5)\n# If timeout, crashes!\n\n# CORRECT - Handle timeout\ntry:\n    result = await asyncio.wait_for(slow_task(), timeout=5)\nexcept asyncio.TimeoutError:\n    result = None  # Handle timeout gracefully\n```\n\n**4. Swallowing Exceptions Silently**\n```python\n# WRONG - Exception ignored\nasync def bad_fetch(url):\n    try:\n        return await client.get(url)\n    except:\n        pass  # Silent failure, returns None!\n\n# CORRECT - Log or re-raise\nasync def good_fetch(url):\n    try:\n        return await client.get(url)\n    except Exception as e:\n        logger.error(f'Fetch failed: {e}')\n        raise  # Or return error indicator\n```\n\n**5. CancelledError Not Re-raised**\n```python\n# WRONG - Swallowing CancelledError breaks cancellation\nasync def bad():\n    try:\n        await some_task()\n    except:\n        print('Error')  # Catches CancelledError too!\n\n# CORRECT - Re-raise CancelledError\nasync def good():\n    try:\n        await some_task()\n    except asyncio.CancelledError:\n        raise  # Must re-raise!\n    except Exception as e:\n        print(f'Error: {e}')\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "gather() with return_exceptions=True",
              "content": "**When to use `return_exceptions=True`:**\n\n1. **When you want ALL tasks to complete** (even if some fail)\n2. **When you need to handle each error individually**\n3. **When failures are expected** (like network requests)\n\n**Pattern for handling mixed results:**\n```python\nresults = await asyncio.gather(*tasks, return_exceptions=True)\n\nsuccesses = []\nerrors = []\n\nfor result in results:\n    if isinstance(result, Exception):\n        errors.append(result)\n    else:\n        successes.append(result)\n\nprint(f\"{len(successes)} succeeded, {len(errors)} failed\")\n```\n\n**Best practice:** Wrap individual tasks in try/except for graceful handling."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-06-challenge-1",
              "title": "Handle Timeout in Async Operation",
              "description": "Use asyncio.wait_for to implement timeout handling for a slow operation.",
              "instructions": "Complete the `fetch_with_timeout` function that attempts to fetch data but times out after a specified duration. Return None if timeout occurs.",
              "starterCode": "import asyncio\n\nasync def slow_api_call(delay):\n    \"\"\"Simulates a slow API that takes 'delay' seconds\"\"\"\n    await asyncio.sleep(delay)\n    return {\"status\": \"success\", \"data\": \"result\"}\n\nasync def fetch_with_timeout(delay, timeout):\n    \"\"\"Fetch data with timeout. Return None if timeout occurs.\"\"\"\n    # TODO: Use asyncio.wait_for with timeout\n    # TODO: Handle TimeoutError and return None\n    pass\n\nasync def main():\n    # This should succeed (0.5s delay, 1s timeout)\n    result1 = await fetch_with_timeout(0.5, 1.0)\n    print(f\"Result 1: {result1}\")\n    \n    # This should timeout (2s delay, 0.5s timeout)\n    result2 = await fetch_with_timeout(2.0, 0.5)\n    print(f\"Result 2: {result2}\")\n\nasyncio.run(main())",
              "solution": "import asyncio\n\nasync def slow_api_call(delay):\n    \"\"\"Simulates a slow API that takes 'delay' seconds\"\"\"\n    print(f\"  API call starting (will take {delay}s)...\")\n    await asyncio.sleep(delay)\n    return {\"status\": \"success\", \"data\": \"result\"}\n\nasync def fetch_with_timeout(delay, timeout):\n    \"\"\"Fetch data with timeout. Return None if timeout occurs.\"\"\"\n    try:\n        result = await asyncio.wait_for(\n            slow_api_call(delay),\n            timeout=timeout\n        )\n        return result\n    except asyncio.TimeoutError:\n        print(f\"  Timeout after {timeout}s!\")\n        return None\n\nasync def main():\n    print(\"=== Test 1: Should succeed ===\")\n    result1 = await fetch_with_timeout(0.5, 1.0)\n    print(f\"Result 1: {result1}\\n\")\n    \n    print(\"=== Test 2: Should timeout ===\")\n    result2 = await fetch_with_timeout(2.0, 0.5)\n    print(f\"Result 2: {result2}\\n\")\n    \n    print(\"=== Test 3: Multiple with gather ===\")\n    results = await asyncio.gather(\n        fetch_with_timeout(0.2, 1.0),\n        fetch_with_timeout(0.3, 1.0),\n        fetch_with_timeout(5.0, 0.5),  # This will timeout\n    )\n    \n    for i, r in enumerate(results):\n        status = \"SUCCESS\" if r else \"TIMEOUT\"\n        print(f\"  Task {i+1}: {status}\")\n\nasyncio.run(main())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use try/except asyncio.TimeoutError around asyncio.wait_for(coroutine, timeout=timeout)"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Catching generic Exception instead of TimeoutError",
                  "consequence": "Hiding other errors",
                  "correction": "Specifically catch asyncio.TimeoutError"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-07",
          "title": "Mini-Project: Async Web Scraper",
          "moduleId": "module-13",
          "order": 7,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Practical Async Patterns",
              "content": "**Building a real async application:**\n\nWhen scraping websites or making many API calls, you need:\n\n1. **Rate limiting** - Don't overwhelm servers\n2. **Error handling** - Network fails, sites go down\n3. **Concurrency control** - Limit parallel requests\n4. **Progress tracking** - Know what's happening\n\n**The Semaphore pattern:**\n```python\nsemaphore = asyncio.Semaphore(10)  # Max 10 concurrent\n\nasync def limited_fetch(url):\n    async with semaphore:\n        return await fetch(url)\n```\n\n**Rate limiting with delays:**\n```python\nasync def polite_fetch(url):\n    result = await fetch(url)\n    await asyncio.sleep(0.5)  # Be nice to servers!\n    return result\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Async Scraper with Rate Limiting",
              "content": "**Key components:**\n1. Semaphore for concurrency control\n2. Error handling for each request\n3. Progress tracking\n4. Respectful delays between requests",
              "code": "import asyncio\nimport time\nfrom dataclasses import dataclass\nfrom typing import List, Optional\n\n@dataclass\nclass FetchResult:\n    url: str\n    success: bool\n    data: Optional[str] = None\n    error: Optional[str] = None\n\nclass AsyncScraper:\n    \"\"\"Async web scraper with rate limiting and error handling\"\"\"\n    \n    def __init__(self, max_concurrent: int = 5, delay: float = 0.1):\n        self.semaphore = asyncio.Semaphore(max_concurrent)\n        self.delay = delay\n        self.completed = 0\n        self.total = 0\n    \n    async def fetch_one(self, url: str) -> FetchResult:\n        \"\"\"Fetch a single URL with rate limiting\"\"\"\n        async with self.semaphore:  # Limit concurrency\n            try:\n                # Simulate network request\n                await asyncio.sleep(0.2 + (hash(url) % 10) / 100)\n                \n                # Simulate occasional failures\n                if \"fail\" in url:\n                    raise ConnectionError(f\"Failed to connect to {url}\")\n                \n                self.completed += 1\n                print(f\"  [{self.completed}/{self.total}] Fetched {url}\")\n                \n                # Be respectful - add delay between requests\n                await asyncio.sleep(self.delay)\n                \n                return FetchResult(\n                    url=url,\n                    success=True,\n                    data=f\"Content from {url}\"\n                )\n            \n            except Exception as e:\n                self.completed += 1\n                print(f\"  [{self.completed}/{self.total}] FAILED {url}: {e}\")\n                return FetchResult(\n                    url=url,\n                    success=False,\n                    error=str(e)\n                )\n    \n    async def fetch_all(self, urls: List[str]) -> List[FetchResult]:\n        \"\"\"Fetch all URLs concurrently with rate limiting\"\"\"\n        self.total = len(urls)\n        self.completed = 0\n        \n        print(f\"\\nStarting fetch of {self.total} URLs...\")\n        print(f\"Max concurrent: {self.semaphore._value}\")\n        print(f\"Delay between requests: {self.delay}s\\n\")\n        \n        # Create tasks for all URLs\n        tasks = [self.fetch_one(url) for url in urls]\n        \n        # Run all with concurrency control\n        results = await asyncio.gather(*tasks)\n        \n        return results\n\nasync def main():\n    print(\"=== Async Web Scraper Demo ===\")\n    \n    # Sample URLs (some will fail)\n    urls = [\n        \"https://example.com/page1\",\n        \"https://example.com/page2\",\n        \"https://fail.com/page\",  # Will fail\n        \"https://example.com/page3\",\n        \"https://example.com/page4\",\n        \"https://fail.com/other\",  # Will fail\n        \"https://example.com/page5\",\n        \"https://example.com/page6\",\n    ]\n    \n    # Create scraper with limits\n    scraper = AsyncScraper(\n        max_concurrent=3,  # Only 3 at a time\n        delay=0.1  # 100ms between requests\n    )\n    \n    start = time.time()\n    results = await scraper.fetch_all(urls)\n    elapsed = time.time() - start\n    \n    # Summary\n    successes = [r for r in results if r.success]\n    failures = [r for r in results if not r.success]\n    \n    print(f\"\\n=== Results ===\")\n    print(f\"Total time: {elapsed:.2f}s\")\n    print(f\"Successful: {len(successes)}\")\n    print(f\"Failed: {len(failures)}\")\n    \n    if failures:\n        print(f\"\\nFailed URLs:\")\n        for f in failures:\n            print(f\"  - {f.url}: {f.error}\")\n\nprint(\"Async Scraper with Rate Limiting\\n\")\nasyncio.run(main())",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Be Respectful - Add Delays Between Requests",
              "content": "**Web scraping etiquette:**\n\n1. **Rate limit your requests**\n   - Use semaphores to limit concurrent connections\n   - Add delays between requests\n\n2. **Handle errors gracefully**\n   - Sites go down, connections fail\n   - Don't crash on individual failures\n\n3. **Respect robots.txt**\n   - Check if scraping is allowed\n   - Some sites block scrapers\n\n4. **Identify yourself**\n   - Set a proper User-Agent header\n   - Include contact info if possible\n\n**Good scraper pattern:**\n```python\nclass RespectfulScraper:\n    def __init__(self):\n        self.semaphore = asyncio.Semaphore(5)\n        self.delay = 1.0  # 1 second between requests\n    \n    async def fetch(self, url):\n        async with self.semaphore:\n            try:\n                result = await self.client.get(url)\n                await asyncio.sleep(self.delay)\n                return result\n            except Exception as e:\n                return None\n```"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-07-challenge-1",
              "title": "Build URL Fetcher with Error Handling",
              "description": "Create an async URL fetcher that handles errors gracefully and reports results.",
              "instructions": "Complete the `URLFetcher` class that fetches multiple URLs concurrently, handles errors gracefully, and returns both successful and failed results.",
              "starterCode": "import asyncio\nfrom dataclasses import dataclass\nfrom typing import List, Tuple\n\n@dataclass\nclass Result:\n    url: str\n    success: bool\n    content: str = \"\"\n    error: str = \"\"\n\nclass URLFetcher:\n    def __init__(self, max_concurrent: int = 3):\n        self.semaphore = asyncio.Semaphore(max_concurrent)\n    \n    async def fetch_one(self, url: str) -> Result:\n        \"\"\"Fetch a single URL. Handle errors gracefully.\"\"\"\n        # TODO: Use semaphore for rate limiting\n        # TODO: Simulate fetch with asyncio.sleep(0.2)\n        # TODO: Simulate failure if 'error' in url\n        # TODO: Return Result with success/failure info\n        pass\n    \n    async def fetch_all(self, urls: List[str]) -> Tuple[List[Result], List[Result]]:\n        \"\"\"Fetch all URLs. Return (successes, failures).\"\"\"\n        # TODO: Use asyncio.gather to fetch all\n        # TODO: Separate results into successes and failures\n        pass\n\nasync def main():\n    urls = [\n        \"https://api.example.com/data\",\n        \"https://error.example.com/fail\",\n        \"https://api.example.com/users\",\n        \"https://api.example.com/posts\",\n        \"https://error.example.com/broken\",\n    ]\n    \n    fetcher = URLFetcher(max_concurrent=2)\n    successes, failures = await fetcher.fetch_all(urls)\n    \n    print(f\"Successes: {len(successes)}\")\n    print(f\"Failures: {len(failures)}\")\n\nasyncio.run(main())",
              "solution": "import asyncio\nfrom dataclasses import dataclass\nfrom typing import List, Tuple\n\n@dataclass\nclass Result:\n    url: str\n    success: bool\n    content: str = \"\"\n    error: str = \"\"\n\nclass URLFetcher:\n    def __init__(self, max_concurrent: int = 3):\n        self.semaphore = asyncio.Semaphore(max_concurrent)\n    \n    async def fetch_one(self, url: str) -> Result:\n        \"\"\"Fetch a single URL. Handle errors gracefully.\"\"\"\n        async with self.semaphore:\n            try:\n                print(f\"  Fetching {url}...\")\n                await asyncio.sleep(0.2)  # Simulate network delay\n                \n                # Simulate failure for URLs containing 'error'\n                if 'error' in url:\n                    raise ConnectionError(f\"Failed to connect to {url}\")\n                \n                return Result(\n                    url=url,\n                    success=True,\n                    content=f\"Data from {url}\"\n                )\n            \n            except Exception as e:\n                return Result(\n                    url=url,\n                    success=False,\n                    error=str(e)\n                )\n    \n    async def fetch_all(self, urls: List[str]) -> Tuple[List[Result], List[Result]]:\n        \"\"\"Fetch all URLs. Return (successes, failures).\"\"\"\n        # Fetch all concurrently\n        results = await asyncio.gather(\n            *[self.fetch_one(url) for url in urls]\n        )\n        \n        # Separate into successes and failures\n        successes = [r for r in results if r.success]\n        failures = [r for r in results if not r.success]\n        \n        return successes, failures\n\nasync def main():\n    urls = [\n        \"https://api.example.com/data\",\n        \"https://error.example.com/fail\",\n        \"https://api.example.com/users\",\n        \"https://api.example.com/posts\",\n        \"https://error.example.com/broken\",\n    ]\n    \n    print(\"=== URL Fetcher Demo ===\")\n    print(f\"Fetching {len(urls)} URLs with max 2 concurrent...\\n\")\n    \n    fetcher = URLFetcher(max_concurrent=2)\n    successes, failures = await fetcher.fetch_all(urls)\n    \n    print(f\"\\n=== Results ===\")\n    print(f\"Successes: {len(successes)}\")\n    for r in successes:\n        print(f\"  OK: {r.url}\")\n    \n    print(f\"\\nFailures: {len(failures)}\")\n    for r in failures:\n        print(f\"  FAIL: {r.url} - {r.error}\")\n\nasyncio.run(main())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use `async with self.semaphore:` to limit concurrency. Wrap the fetch logic in try/except to catch errors."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not using the semaphore",
                  "consequence": "No rate limiting, may overwhelm server",
                  "correction": "Always wrap fetch logic in async with self.semaphore:"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-14",
      "title": "HTTP & Web APIs",
      "description": "Working with web services",
      "difficulty": "advanced",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-14-lesson-01",
          "title": "HTTP Basics and the Requests Library",
          "moduleId": "module-14",
          "order": 1,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: How the Web Works",
              "content": "**HTTP = How computers talk on the web**\n\n**Think of it like a restaurant:**\n\n**Client (You) ‚Üí Server (Kitchen)**\n- You: \"Can I have a burger?\" (REQUEST)\n- Kitchen: \"Here's your burger!\" (RESPONSE)\n\n**HTTP Request Methods:**\n\n1. **GET** üìñ - Read/retrieve data\n   - Like asking to see the menu\n   - \"Show me the user with ID 5\"\n\n2. **POST** ‚ûï - Create new data\n   - Like placing an order\n   - \"Create a new user account\"\n\n3. **PUT** üìù - Update existing data\n   - Like changing your order\n   - \"Update user profile\"\n\n4. **DELETE** üóëÔ∏è - Remove data\n   - Like canceling your order\n   - \"Delete this post\"\n\n**HTTP Status Codes:**\n- **2xx (Success)** ‚úÖ\n  - 200: OK - Request succeeded\n  - 201: Created - New resource created\n\n- **3xx (Redirect)** ‚Ü™Ô∏è\n  - 301: Moved permanently\n  - 302: Temporary redirect\n\n- **4xx (Client Error)** ‚ùå\n  - 400: Bad request\n  - 401: Unauthorized\n  - 404: Not found\n\n- **5xx (Server Error)** üí•\n  - 500: Internal server error\n  - 503: Service unavailable\n\n**Headers:** Metadata about the request/response\n- Content-Type: application/json\n- Authorization: Bearer token\n- User-Agent: Browser info"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Making HTTP Requests",
              "content": "**requests library key features:**\n\n**1. HTTP Methods:**\n```python\nrequests.get(url)     # Retrieve\nrequests.post(url)    # Create\nrequests.put(url)     # Update\nrequests.delete(url)  # Remove\n```\n\n**2. Response object:**\n```python\nresponse.status_code  # 200, 404, etc.\nresponse.ok           # True if 2xx\nresponse.json()       # Parse JSON\nresponse.text         # Raw text\nresponse.headers      # Response headers\n```\n\n**3. Sending data:**\n```python\n# JSON data\nrequests.post(url, json={'key': 'value'})\n\n# Form data\nrequests.post(url, data={'key': 'value'})\n\n# Query parameters\nrequests.get(url, params={'key': 'value'})\n```\n\n**4. Headers:**\n```python\nheaders = {'Authorization': 'Bearer token'}\nrequests.get(url, headers=headers)\n```",
              "code": "import requests\nimport json\n\nprint(\"=== GET Request - Retrieve Data ===\")\n\n# Simple GET request\nresponse = requests.get('https://jsonplaceholder.typicode.com/users/1')\n\nprint(f\"Status Code: {response.status_code}\")\nprint(f\"Success: {response.ok}\")\nprint(f\"\\nResponse Headers:\")\nfor key, value in list(response.headers.items())[:5]:\n    print(f\"  {key}: {value}\")\n\n# Parse JSON response\nuser = response.json()\nprint(f\"\\nUser Data:\")\nprint(f\"  Name: {user['name']}\")\nprint(f\"  Email: {user['email']}\")\nprint(f\"  City: {user['address']['city']}\")\n\nprint(\"\\n=== GET with Query Parameters ===\")\n\n# Get multiple users\nparams = {\n    '_limit': 3,\n    '_sort': 'name'\n}\n\nresponse = requests.get(\n    'https://jsonplaceholder.typicode.com/users',\n    params=params\n)\n\nusers = response.json()\nprint(f\"Retrieved {len(users)} users:\")\nfor user in users:\n    print(f\"  - {user['name']} ({user['email']})\")\n\nprint(\"\\n=== POST Request - Create Data ===\")\n\n# Create new post\nnew_post = {\n    'title': 'My First Post',\n    'body': 'This is the content of my post',\n    'userId': 1\n}\n\nresponse = requests.post(\n    'https://jsonplaceholder.typicode.com/posts',\n    json=new_post\n)\n\nprint(f\"Status Code: {response.status_code}\")\ncreated_post = response.json()\nprint(f\"Created Post:\")\nprint(f\"  ID: {created_post.get('id')}\")\nprint(f\"  Title: {created_post['title']}\")\nprint(f\"  Body: {created_post['body']}\")\n\nprint(\"\\n=== PUT Request - Update Data ===\")\n\n# Update existing post\nupdated_post = {\n    'id': 1,\n    'title': 'Updated Title',\n    'body': 'Updated content',\n    'userId': 1\n}\n\nresponse = requests.put(\n    'https://jsonplaceholder.typicode.com/posts/1',\n    json=updated_post\n)\n\nprint(f\"Status Code: {response.status_code}\")\nresult = response.json()\nprint(f\"Updated Post:\")\nprint(f\"  Title: {result['title']}\")\nprint(f\"  Body: {result['body']}\")\n\nprint(\"\\n=== DELETE Request - Remove Data ===\")\n\nresponse = requests.delete('https://jsonplaceholder.typicode.com/posts/1')\n\nprint(f\"Status Code: {response.status_code}\")\nprint(f\"Deletion successful: {response.status_code == 200}\")\n\nprint(\"\\n=== Custom Headers ===\")\n\nheaders = {\n    'User-Agent': 'Python Training Course/1.0',\n    'Accept': 'application/json',\n    'Custom-Header': 'Custom Value'\n}\n\nresponse = requests.get(\n    'https://httpbin.org/headers',\n    headers=headers\n)\n\nreceived_headers = response.json()\nprint(\"Headers sent and received:\")\nfor key, value in received_headers['headers'].items():\n    print(f\"  {key}: {value}\")\n\nprint(\"\\n=== Error Handling ===\")\n\ntry:\n    response = requests.get('https://jsonplaceholder.typicode.com/users/999')\n    response.raise_for_status()  # Raises exception for 4xx/5xx\n    \n    user = response.json()\n    if not user:\n        print(\"User not found (empty response)\")\n    else:\n        print(f\"Found: {user['name']}\")\nexcept requests.exceptions.HTTPError as e:\n    print(f\"HTTP Error: {e}\")\nexcept requests.exceptions.RequestException as e:\n    print(f\"Request Error: {e}\")\n\nprint(\"\\n=== Timeout and Retries ===\")\n\ntry:\n    response = requests.get(\n        'https://jsonplaceholder.typicode.com/users/1',\n        timeout=5  # 5 second timeout\n    )\n    print(f\"Request completed in {response.elapsed.total_seconds():.3f}s\")\nexcept requests.exceptions.Timeout:\n    print(\"Request timed out!\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic request pattern:**\n```python\nimport requests\n\n# GET request\nresponse = requests.get(url)\n\n# Check status\nif response.ok:  # or response.status_code == 200\n    data = response.json()\n```\n\n**With parameters:**\n```python\n# Query parameters (?key=value&key2=value2)\nparams = {'key': 'value', 'key2': 'value2'}\nresponse = requests.get(url, params=params)\n\n# POST with JSON data\ndata = {'name': 'Alice', 'age': 25}\nresponse = requests.post(url, json=data)\n\n# Custom headers\nheaders = {'Authorization': 'Bearer token'}\nresponse = requests.get(url, headers=headers)\n```\n\n**Error handling:**\n```python\ntry:\n    response = requests.get(url, timeout=5)\n    response.raise_for_status()  # Raise exception for errors\n    data = response.json()\nexcept requests.exceptions.HTTPError:\n    print(\"HTTP error\")\nexcept requests.exceptions.Timeout:\n    print(\"Timeout\")\nexcept requests.exceptions.RequestException:\n    print(\"Request failed\")\n```\n\n**Common patterns:**\n```python\n# Check status\nif response.status_code == 200:\n    # Success\n    pass\n\n# Parse response\njson_data = response.json()  # For JSON\ntext_data = response.text    # For text\nbinary = response.content    # For binary\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Working with Real APIs",
              "content": "**Building API clients - best practices:**\n\n**1. Use sessions:**\n```python\nsession = requests.Session()\nsession.headers['Authorization'] = 'token'\n# Reuses connection, faster!\n```\n\n**2. Error handling:**\n```python\ntry:\n    response.raise_for_status()\nexcept requests.exceptions.HTTPError:\n    # Handle 4xx/5xx\nexcept requests.exceptions.Timeout:\n    # Handle timeout\n```\n\n**3. Caching:**\n- Store responses temporarily\n- Reduce API calls\n- Faster for repeated requests\n\n**4. Rate limiting:**\n- Respect API limits\n- Avoid being blocked\n- Track request timestamps\n\n**5. Type hints:**\n```python\ndef get_user(username: str) -> Optional[Dict]:\n    ...\n```\nClear what function expects/returns",
              "code": "import requests\nfrom typing import Optional, Dict, List\n\nprint(\"=== GitHub API Example ===\")\n\nclass GitHubAPI:\n    \"\"\"Simple GitHub API client\"\"\"\n    \n    BASE_URL = 'https://api.github.com'\n    \n    def __init__(self, token: Optional[str] = None):\n        self.session = requests.Session()\n        if token:\n            self.session.headers['Authorization'] = f'token {token}'\n        self.session.headers['Accept'] = 'application/vnd.github.v3+json'\n    \n    def get_user(self, username: str) -> Optional[Dict]:\n        \"\"\"Get user information\"\"\"\n        response = self.session.get(f'{self.BASE_URL}/users/{username}')\n        \n        if response.ok:\n            return response.json()\n        return None\n    \n    def get_repos(self, username: str, limit: int = 5) -> List[Dict]:\n        \"\"\"Get user repositories\"\"\"\n        response = self.session.get(\n            f'{self.BASE_URL}/users/{username}/repos',\n            params={'sort': 'updated', 'per_page': limit}\n        )\n        \n        if response.ok:\n            return response.json()\n        return []\n\n# Use the API client\ngh = GitHubAPI()\n\n# Get user info\nuser = gh.get_user('octocat')\nif user:\n    print(f\"User: {user['login']}\")\n    print(f\"Name: {user['name']}\")\n    print(f\"Public Repos: {user['public_repos']}\")\n    print(f\"Followers: {user['followers']}\")\n\n# Get repositories\nrepos = gh.get_repos('octocat', limit=3)\nprint(f\"\\nTop {len(repos)} repositories:\")\nfor repo in repos:\n    print(f\"  - {repo['name']}: {repo['description'] or 'No description'}\")\n    print(f\"    ‚≠ê {repo['stargazers_count']} stars\")\n\nprint(\"\\n=== Weather API Example (OpenWeatherMap concept) ===\")\n\nclass WeatherAPI:\n    \"\"\"Weather API client (example structure)\"\"\"\n    \n    def __init__(self, api_key: str):\n        self.api_key = api_key\n        self.base_url = 'https://api.openweathermap.org/data/2.5'\n    \n    def get_current_weather(self, city: str) -> Optional[Dict]:\n        \"\"\"Get current weather for a city\"\"\"\n        params = {\n            'q': city,\n            'appid': self.api_key,\n            'units': 'metric'\n        }\n        \n        try:\n            response = requests.get(\n                f'{self.base_url}/weather',\n                params=params,\n                timeout=10\n            )\n            response.raise_for_status()\n            return response.json()\n        except requests.exceptions.RequestException as e:\n            print(f\"Error fetching weather: {e}\")\n            return None\n\n# Example usage (would need real API key)\nprint(\"Weather API structure example (requires API key)\")\nprint(\"  weather = WeatherAPI('your-api-key')\")\nprint(\"  data = weather.get_current_weather('London')\")\n\nprint(\"\\n=== API Response Caching ===\")\n\nimport time\nfrom functools import lru_cache\n\nclass CachedAPI:\n    \"\"\"API client with caching\"\"\"\n    \n    def __init__(self):\n        self.cache = {}\n        self.cache_duration = 300  # 5 minutes\n    \n    def get_data(self, url: str) -> Optional[Dict]:\n        \"\"\"Get data with caching\"\"\"\n        now = time.time()\n        \n        # Check cache\n        if url in self.cache:\n            cached_data, timestamp = self.cache[url]\n            if now - timestamp < self.cache_duration:\n                print(f\"  ‚úì Cache hit for {url}\")\n                return cached_data\n        \n        # Make request\n        print(f\"  ‚Üí Making request to {url}\")\n        try:\n            response = requests.get(url, timeout=5)\n            response.raise_for_status()\n            data = response.json()\n            \n            # Cache the result\n            self.cache[url] = (data, now)\n            return data\n        except requests.exceptions.RequestException as e:\n            print(f\"  ‚úó Error: {e}\")\n            return None\n\napi = CachedAPI()\n\nurl = 'https://jsonplaceholder.typicode.com/users/1'\n\nprint(\"First request (will fetch):\")\ndata1 = api.get_data(url)\nif data1:\n    print(f\"  Got: {data1['name']}\")\n\nprint(\"\\nSecond request (will use cache):\")\ndata2 = api.get_data(url)\nif data2:\n    print(f\"  Got: {data2['name']}\")\n\nprint(\"\\n=== Rate Limiting ===\")\n\nimport time\n\nclass RateLimitedAPI:\n    \"\"\"API client with rate limiting\"\"\"\n    \n    def __init__(self, requests_per_minute: int = 60):\n        self.requests_per_minute = requests_per_minute\n        self.request_times = []\n    \n    def _wait_if_needed(self):\n        \"\"\"Wait if rate limit would be exceeded\"\"\"\n        now = time.time()\n        \n        # Remove requests older than 1 minute\n        self.request_times = [\n            t for t in self.request_times \n            if now - t < 60\n        ]\n        \n        # Wait if at limit\n        if len(self.request_times) >= self.requests_per_minute:\n            wait_time = 60 - (now - self.request_times[0])\n            if wait_time > 0:\n                print(f\"  Rate limit reached, waiting {wait_time:.1f}s...\")\n                time.sleep(wait_time)\n                self.request_times = []\n    \n    def get(self, url: str) -> Optional[requests.Response]:\n        \"\"\"Make rate-limited GET request\"\"\"\n        self._wait_if_needed()\n        self.request_times.append(time.time())\n        return requests.get(url)\n\napi = RateLimitedAPI(requests_per_minute=2)\n\nprint(\"Making rate-limited requests:\")\nfor i in range(3):\n    print(f\"  Request {i+1}\")\n    response = api.get('https://jsonplaceholder.typicode.com/users/1')\n    print(f\"    Status: {response.status_code}\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **HTTP methods: GET (read), POST (create), PUT (update), DELETE (remove)**\n- **requests library makes HTTP easy** - requests.get(), .post(), etc.\n- **Always handle errors** - Network can fail, use try/except\n- **response.json() parses JSON** - Most APIs return JSON\n- **Use sessions for multiple requests** - Faster, maintains headers\n- **Set timeouts** - Prevent hanging: timeout=10\n- **Check response.ok or status_code** - Don't assume success\n- **Type hints improve API clients** - Clear interfaces and documentation\n- **For async: use httpx instead** - Drop-in replacement with `async with httpx.AsyncClient() as client: await client.get(url)` - same API as requests but supports async/await"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-01-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a simple API client for JSONPlaceholder that:\n- Gets all posts for a specific user\n- Filters posts by keyword in title\n- Returns formatted results\nImplement error handling and use type hints.",
              "instructions": "Create a simple API client for JSONPlaceholder that:\n- Gets all posts for a specific user\n- Filters posts by keyword in title\n- Returns formatted results\nImplement error handling and use type hints.",
              "starterCode": "import requests\nfrom typing import List, Dict, Optional\n\nclass PostsAPI:\n    BASE_URL = 'https://jsonplaceholder.typicode.com'\n    \n    def get_user_posts(self, user_id: int) -> List[Dict]:\n        # TODO: Get all posts for user_id\n        pass\n    \n    def filter_posts_by_keyword(self, posts: List[Dict], keyword: str) -> List[Dict]:\n        # TODO: Filter posts where keyword is in title\n        pass\n    \n    def format_post(self, post: Dict) -> str:\n        # TODO: Return formatted string \"[ID] Title\"\n        pass\n\n# Test\napi = PostsAPI()\nposts = api.get_user_posts(1)\nfiltered = api.filter_posts_by_keyword(posts, 'sunt')\nfor post in filtered:\n    print(api.format_post(post))",
              "solution": "import requests\nfrom typing import List, Dict, Optional\n\n# JSONPlaceholder API Client\n# This solution demonstrates API consumption with error handling\n\nclass PostsAPI:\n    \"\"\"API client for JSONPlaceholder posts.\"\"\"\n    \n    BASE_URL = 'https://jsonplaceholder.typicode.com'\n    \n    def get_user_posts(self, user_id: int) -> List[Dict]:\n        \"\"\"Get all posts for a specific user.\"\"\"\n        try:\n            url = f\"{self.BASE_URL}/posts\"\n            response = requests.get(url, params={'userId': user_id})\n            response.raise_for_status()  # Raise exception for HTTP errors\n            return response.json()\n        except requests.RequestException as e:\n            print(f\"Error fetching posts: {e}\")\n            return []\n    \n    def filter_posts_by_keyword(self, posts: List[Dict], keyword: str) -> List[Dict]:\n        \"\"\"Filter posts where keyword appears in title (case-insensitive).\"\"\"\n        keyword_lower = keyword.lower()\n        return [\n            post for post in posts\n            if keyword_lower in post.get('title', '').lower()\n        ]\n    \n    def format_post(self, post: Dict) -> str:\n        \"\"\"Return formatted string for a post.\"\"\"\n        post_id = post.get('id', '?')\n        title = post.get('title', 'No title')\n        return f\"[{post_id}] {title}\"\n    \n    def get_post_summary(self, user_id: int) -> Dict:\n        \"\"\"Get summary of user's posts.\"\"\"\n        posts = self.get_user_posts(user_id)\n        return {\n            'user_id': user_id,\n            'total_posts': len(posts),\n            'posts': posts\n        }\n\n# Test the API client\nprint(\"=== Posts API Client Demo ===\")\n\napi = PostsAPI()\n\n# Get posts for user 1\nprint(\"\\nFetching posts for user 1...\")\nposts = api.get_user_posts(1)\nprint(f\"Found {len(posts)} posts\")\n\n# Filter by keyword\nprint(\"\\nFiltering posts with 'sunt' in title:\")\nfiltered = api.filter_posts_by_keyword(posts, 'sunt')\nfor post in filtered:\n    print(f\"  {api.format_post(post)}\")\n\n# Show first 3 posts\nprint(\"\\nFirst 3 posts:\")\nfor post in posts[:3]:\n    print(f\"  {api.format_post(post)}\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use requests.get with params={'userId': user_id}. Filter with list comprehension checking if keyword in post['title']. Format with f-string."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-14-lesson-02",
          "title": "FastAPI Fundamentals",
          "moduleId": "module-14",
          "order": 2,
          "estimatedMinutes": 45,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why FastAPI?",
              "content": "**FastAPI: The Modern Python Web Framework**\n\nFastAPI has rapidly become the go-to framework for building APIs in Python. Here's why:\n\n**1. Modern and Fast**\n- Built on Python 3.6+ type hints\n- One of the fastest Python frameworks (on par with NodeJS and Go)\n- Async support out of the box\n\n**2. Automatic Documentation**\n- OpenAPI (Swagger) docs generated automatically at `/docs`\n- ReDoc alternative at `/redoc`\n- No manual documentation maintenance\n\n**3. Type-Based Validation**\n```python\ndef get_item(item_id: int):  # Validates item_id is an integer\n    ...\n```\n- Type hints = automatic request validation\n- Pydantic models for complex data\n- Clear error messages\n\n**4. Developer Experience**\n- Excellent IDE support (autocomplete, type checking)\n- Intuitive API design\n- Comprehensive error messages\n\n**5. Industry Adoption**\n- 78k+ GitHub stars (surpassed Flask)\n- Used by Microsoft, Netflix, Uber\n- Active community and ecosystem\n\n**When to Use FastAPI:**\n- New API projects\n- Microservices\n- Data-heavy applications\n- When you want automatic docs\n- When performance matters"
            },
            {
              "type": "EXAMPLE",
              "title": "Your First FastAPI App",
              "content": "**Getting Started with FastAPI:**\n\n**1. Installation:**\n```bash\nuv add \"fastapi[standard]\"\n# Or: pip install \"fastapi[standard]\"\n```\n\n**2. Basic app structure:**\n```python\nfrom fastapi import FastAPI\n\napp = FastAPI()\n\n@app.get(\"/\")\nasync def root():\n    return {\"message\": \"Hello World\"}\n```\n\n**3. Running the server:**\n```bash\nuvicorn main:app --reload\n# --reload enables auto-restart on code changes\n```\n\n**4. Access your API:**\n- API: http://localhost:8000\n- Swagger docs: http://localhost:8000/docs\n- ReDoc: http://localhost:8000/redoc\n\n**Key Concepts:**\n- `FastAPI()` creates the application instance\n- `@app.get(\"/\")` decorates route handlers\n- `async def` enables async/await (optional but recommended)\n- Return dicts/lists - FastAPI converts to JSON automatically",
              "code": "from fastapi import FastAPI\nimport uvicorn\n\n# Create FastAPI application with metadata\napp = FastAPI(\n    title=\"Personal Finance API\",\n    description=\"API for managing personal finances\",\n    version=\"1.0.0\"\n)\n\n# Root endpoint\n@app.get(\"/\")\nasync def root():\n    \"\"\"Welcome message and API info.\"\"\"\n    return {\n        \"message\": \"Welcome to the Personal Finance API\",\n        \"version\": \"1.0.0\",\n        \"docs\": \"/docs\"\n    }\n\n# Health check endpoint\n@app.get(\"/health\")\nasync def health():\n    \"\"\"Health check for monitoring.\"\"\"\n    return {\"status\": \"healthy\"}\n\n# API info endpoint\n@app.get(\"/api/info\")\nasync def api_info():\n    \"\"\"Return API metadata.\"\"\"\n    return {\n        \"name\": app.title,\n        \"version\": app.version,\n        \"description\": app.description,\n        \"endpoints\": [\n            {\"path\": \"/\", \"method\": \"GET\", \"description\": \"Root\"},\n            {\"path\": \"/health\", \"method\": \"GET\", \"description\": \"Health check\"},\n            {\"path\": \"/docs\", \"method\": \"GET\", \"description\": \"Swagger UI\"}\n        ]\n    }\n\n# Demo: Show what the API returns\nprint(\"=== FastAPI Application Demo ===\")\nprint(f\"App Title: {app.title}\")\nprint(f\"Version: {app.version}\")\nprint(\"\\nEndpoints defined:\")\nfor route in app.routes:\n    if hasattr(route, 'methods'):\n        methods = ', '.join(route.methods - {'HEAD', 'OPTIONS'})\n        print(f\"  {methods:6} {route.path}\")\n\nprint(\"\\n=== To run this app ===\")\nprint(\"Save as main.py and run:\")\nprint(\"  uvicorn main:app --reload\")\nprint(\"\\nThen visit:\")\nprint(\"  http://localhost:8000      - API root\")\nprint(\"  http://localhost:8000/docs - Swagger UI\")\n\n# Uncomment to run directly:\n# if __name__ == \"__main__\":\n#     uvicorn.run(app, host=\"0.0.0.0\", port=8000)",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Path and Query Parameters",
              "content": "**Path Parameters:**\n```python\n@app.get(\"/items/{item_id}\")\nasync def get_item(item_id: int):  # Extracted from URL\n    return {\"item_id\": item_id}\n```\n- Defined in the path with `{parameter}`\n- Type hints enable automatic validation\n- Invalid types return 422 Validation Error\n\n**Query Parameters:**\n```python\n@app.get(\"/items/\")\nasync def list_items(skip: int = 0, limit: int = 10):\n    return {\"skip\": skip, \"limit\": limit}\n```\n- Parameters not in path become query params\n- Default values make them optional\n- Access via `?skip=0&limit=10`\n\n**Query with Validation:**\n```python\nfrom fastapi import Query\n\n@app.get(\"/search/\")\nasync def search(\n    q: str = Query(..., min_length=3),  # Required, min 3 chars\n    limit: int = Query(default=10, le=100)  # Max 100\n):\n    return {\"query\": q, \"limit\": limit}\n```\n- `Query(...)` means required\n- `Query(default=X)` sets default\n- Add constraints: `min_length`, `max_length`, `le`, `ge`",
              "code": "from fastapi import FastAPI, Query, Path, HTTPException\nfrom typing import Optional\n\napp = FastAPI(title=\"Transaction API\")\n\n# Sample data\ntransactions = {\n    1: {\"id\": 1, \"amount\": 100.00, \"category\": \"Food\", \"description\": \"Groceries\"},\n    2: {\"id\": 2, \"amount\": 50.00, \"category\": \"Transport\", \"description\": \"Uber\"},\n    3: {\"id\": 3, \"amount\": 200.00, \"category\": \"Food\", \"description\": \"Restaurant\"},\n    4: {\"id\": 4, \"amount\": 75.00, \"category\": \"Entertainment\", \"description\": \"Movies\"},\n    5: {\"id\": 5, \"amount\": 300.00, \"category\": \"Shopping\", \"description\": \"Clothes\"},\n}\n\nprint(\"=== Path Parameters ===\")\n\n@app.get(\"/transactions/{transaction_id}\")\nasync def get_transaction(\n    transaction_id: int = Path(..., title=\"Transaction ID\", ge=1)\n):\n    \"\"\"Get a specific transaction by ID.\"\"\"\n    if transaction_id not in transactions:\n        raise HTTPException(status_code=404, detail=\"Transaction not found\")\n    return transactions[transaction_id]\n\n# Demonstrate path parameter extraction\nprint(\"Path: /transactions/{transaction_id}\")\nprint(\"Example: /transactions/1 -> Returns transaction with ID 1\")\nprint(\"Type validation: /transactions/abc -> 422 Error (not an integer)\")\n\nprint(\"\\n=== Query Parameters ===\")\n\n@app.get(\"/transactions/\")\nasync def list_transactions(\n    skip: int = Query(default=0, ge=0, description=\"Records to skip\"),\n    limit: int = Query(default=10, le=100, description=\"Max records to return\"),\n    category: Optional[str] = Query(default=None, description=\"Filter by category\")\n):\n    \"\"\"List transactions with pagination and filtering.\"\"\"\n    results = list(transactions.values())\n    \n    # Filter by category if provided\n    if category:\n        results = [t for t in results if t[\"category\"].lower() == category.lower()]\n    \n    # Apply pagination\n    paginated = results[skip:skip + limit]\n    \n    return {\n        \"transactions\": paginated,\n        \"total\": len(results),\n        \"skip\": skip,\n        \"limit\": limit,\n        \"category_filter\": category\n    }\n\nprint(\"Path: /transactions/\")\nprint(\"Query params: skip, limit, category\")\nprint(\"Example: /transactions/?skip=0&limit=5\")\nprint(\"Example: /transactions/?category=Food\")\n\nprint(\"\\n=== Query Validation ===\")\n\n@app.get(\"/search/\")\nasync def search_transactions(\n    q: str = Query(\n        ...,  # Required\n        min_length=2,\n        max_length=50,\n        description=\"Search query\"\n    ),\n    min_amount: Optional[float] = Query(default=None, ge=0),\n    max_amount: Optional[float] = Query(default=None, ge=0)\n):\n    \"\"\"Search transactions by description.\"\"\"\n    results = [\n        t for t in transactions.values()\n        if q.lower() in t[\"description\"].lower()\n    ]\n    \n    if min_amount is not None:\n        results = [t for t in results if t[\"amount\"] >= min_amount]\n    if max_amount is not None:\n        results = [t for t in results if t[\"amount\"] <= max_amount]\n    \n    return {\"query\": q, \"results\": results, \"count\": len(results)}\n\nprint(\"Required query: q (2-50 chars)\")\nprint(\"Optional: min_amount, max_amount\")\nprint(\"Example: /search/?q=food&min_amount=50\")\n\nprint(\"\\n=== Combined Parameters ===\")\n\n@app.get(\"/users/{user_id}/transactions/\")\nasync def get_user_transactions(\n    user_id: int = Path(..., ge=1),\n    skip: int = 0,\n    limit: int = Query(default=10, le=50)\n):\n    \"\"\"Get transactions for a specific user (demo).\"\"\"\n    # In real app, would filter by user_id\n    return {\n        \"user_id\": user_id,\n        \"transactions\": list(transactions.values())[skip:skip + limit]\n    }\n\nprint(\"Path + Query: /users/{user_id}/transactions/?skip=0&limit=5\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Request Body with Pydantic",
              "content": "**Pydantic Models for Request Bodies:**\n\nPydantic provides automatic validation for complex data:\n\n```python\nfrom pydantic import BaseModel, Field\n\nclass Item(BaseModel):\n    name: str\n    price: float = Field(..., gt=0)  # Required, > 0\n    quantity: int = Field(default=1, ge=1)\n```\n\n**Using in Endpoints:**\n```python\n@app.post(\"/items/\")\nasync def create_item(item: Item):\n    return item  # FastAPI validates automatically\n```\n\n**Validation Features:**\n- `Field(...)` - Required field\n- `Field(default=X)` - Default value\n- `gt`, `ge`, `lt`, `le` - Numeric bounds\n- `min_length`, `max_length` - String length\n- `regex` - Pattern matching\n\n**Optional Fields:**\n```python\nclass Item(BaseModel):\n    name: str\n    description: str | None = None  # Optional\n```\n\n**Nested Models:**\n```python\nclass Address(BaseModel):\n    city: str\n    country: str\n\nclass User(BaseModel):\n    name: str\n    address: Address  # Nested validation\n```",
              "code": "from fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel, Field, field_validator\nfrom typing import Optional\nfrom datetime import datetime\nfrom enum import Enum\n\napp = FastAPI(title=\"Transaction API with Pydantic\")\n\nprint(\"=== Pydantic Models ===\")\n\n# Enum for transaction categories\nclass Category(str, Enum):\n    food = \"Food\"\n    transport = \"Transport\"\n    entertainment = \"Entertainment\"\n    shopping = \"Shopping\"\n    utilities = \"Utilities\"\n    other = \"Other\"\n\n# Request model for creating transactions\nclass TransactionCreate(BaseModel):\n    \"\"\"Model for creating a new transaction.\"\"\"\n    amount: float = Field(\n        ...,\n        gt=0,\n        description=\"Transaction amount (must be positive)\"\n    )\n    category: Category = Field(\n        ...,\n        description=\"Transaction category\"\n    )\n    description: Optional[str] = Field(\n        default=None,\n        max_length=200,\n        description=\"Optional description\"\n    )\n    \n    # Custom validator\n    @field_validator('description')\n    @classmethod\n    def clean_description(cls, v):\n        if v:\n            return v.strip()\n        return v\n\n# Response model (includes generated fields)\nclass Transaction(BaseModel):\n    \"\"\"Full transaction model with all fields.\"\"\"\n    id: int\n    amount: float\n    category: Category\n    description: Optional[str]\n    created_at: datetime\n\n# Example instance\nexample = TransactionCreate(\n    amount=99.99,\n    category=Category.food,\n    description=\"Weekly groceries\"\n)\nprint(f\"Example TransactionCreate:\")\nprint(f\"  {example.model_dump()}\")\n\nprint(\"\\n=== Validation in Action ===\")\n\n# In-memory storage\ntransactions_db: dict[int, Transaction] = {}\nnext_id = 1\n\n@app.post(\"/transactions/\", response_model=Transaction)\nasync def create_transaction(transaction: TransactionCreate):\n    \"\"\"Create a new transaction.\"\"\"\n    global next_id\n    \n    # Create full transaction with generated fields\n    new_transaction = Transaction(\n        id=next_id,\n        amount=transaction.amount,\n        category=transaction.category,\n        description=transaction.description,\n        created_at=datetime.now()\n    )\n    \n    transactions_db[next_id] = new_transaction\n    next_id += 1\n    \n    return new_transaction\n\n# Demonstrate validation\nprint(\"Valid request body:\")\nprint('''  {\n    \"amount\": 50.00,\n    \"category\": \"Food\",\n    \"description\": \"Lunch\"\n  }''')\n\nprint(\"\\nInvalid request (amount <= 0):\")\nprint('''  {\n    \"amount\": -10,\n    \"category\": \"Food\"\n  }''')\nprint(\"  -> 422 Validation Error\")\n\nprint(\"\\n=== Update Models ===\")\n\n# Partial update model (all fields optional)\nclass TransactionUpdate(BaseModel):\n    \"\"\"Model for updating a transaction (all optional).\"\"\"\n    amount: Optional[float] = Field(default=None, gt=0)\n    category: Optional[Category] = None\n    description: Optional[str] = Field(default=None, max_length=200)\n\n@app.patch(\"/transactions/{transaction_id}\", response_model=Transaction)\nasync def update_transaction(\n    transaction_id: int,\n    updates: TransactionUpdate\n):\n    \"\"\"Partially update a transaction.\"\"\"\n    if transaction_id not in transactions_db:\n        raise HTTPException(status_code=404, detail=\"Transaction not found\")\n    \n    stored = transactions_db[transaction_id]\n    update_data = updates.model_dump(exclude_unset=True)\n    \n    # Apply only provided updates\n    for field, value in update_data.items():\n        setattr(stored, field, value)\n    \n    return stored\n\nprint(\"PATCH /transactions/1\")\nprint(\"Body: {\\\"amount\\\": 75.00}  # Only update amount\")\n\nprint(\"\\n=== Nested Models ===\")\n\nclass Merchant(BaseModel):\n    name: str\n    category: str\n    location: Optional[str] = None\n\nclass DetailedTransaction(BaseModel):\n    amount: float = Field(..., gt=0)\n    merchant: Merchant  # Nested model\n    notes: Optional[str] = None\n\nexample_nested = {\n    \"amount\": 42.50,\n    \"merchant\": {\n        \"name\": \"Coffee Shop\",\n        \"category\": \"Food & Drink\",\n        \"location\": \"Downtown\"\n    },\n    \"notes\": \"Morning coffee\"\n}\n\nprint(f\"Nested model example:\")\nprint(f\"  {example_nested}\")\n\n# Validate the nested structure\nvalidated = DetailedTransaction(**example_nested)\nprint(f\"\\nValidated merchant: {validated.merchant.name}\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "**Getting Started:**\n- Install: `uv add \"fastapi[standard]\"` or `pip install \"fastapi[standard]\"`\n- Run: `uvicorn main:app --reload`\n- Auto-docs at `/docs` (Swagger) and `/redoc`\n\n**Core Concepts:**\n- `@app.get()`, `@app.post()`, `@app.put()`, `@app.delete()` - HTTP method decorators\n- **Path parameters:** `/items/{item_id}` - extracted from URL\n- **Query parameters:** Function params not in path become query params\n- **Request bodies:** Use Pydantic models for automatic validation\n\n**Type Hints = Validation:**\n```python\ndef endpoint(item_id: int):  # Validates as integer\n    ...\n```\n\n**Pydantic for Complex Data:**\n```python\nclass Item(BaseModel):\n    name: str\n    price: float = Field(..., gt=0)\n```\n\n**Key Advantages over Flask:**\n- Automatic request validation\n- Automatic API documentation\n- Async by default\n- Better IDE support\n- Type-safe development"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-02-challenge-1",
              "title": "Build a Budget Tracker API",
              "description": "Create a FastAPI application for tracking budget categories with:\n- GET /categories/ - List all budget categories\n- GET /categories/{category_id} - Get a specific category\n- POST /categories/ - Create a new category with name and budget limit\n- GET /categories/{category_id}/remaining - Calculate remaining budget\n\nUse Pydantic models for validation and include proper error handling.",
              "instructions": "Create a FastAPI application for tracking budget categories with:\n- GET /categories/ - List all budget categories\n- GET /categories/{category_id} - Get a specific category\n- POST /categories/ - Create a new category with name and budget limit\n- GET /categories/{category_id}/remaining - Calculate remaining budget\n\nUse Pydantic models for validation and include proper error handling.",
              "starterCode": "from fastapi import FastAPI, HTTPException, Query\nfrom pydantic import BaseModel, Field\nfrom typing import Optional\n\napp = FastAPI(title=\"Budget Tracker API\")\n\n# In-memory storage\ncategories_db = {}\nnext_id = 1\n\n# TODO: Create Pydantic models\nclass CategoryCreate(BaseModel):\n    pass  # Add fields: name (str), budget_limit (float > 0), spent (float >= 0, default 0)\n\nclass Category(BaseModel):\n    pass  # Add fields: id, name, budget_limit, spent\n\n# TODO: Implement endpoints\n\n@app.get(\"/categories/\")\nasync def list_categories():\n    # Return all categories\n    pass\n\n@app.get(\"/categories/{category_id}\")\nasync def get_category(category_id: int):\n    # Return specific category or 404\n    pass\n\n@app.post(\"/categories/\")\nasync def create_category(category: CategoryCreate):\n    # Create and return new category\n    pass\n\n@app.get(\"/categories/{category_id}/remaining\")\nasync def get_remaining_budget(category_id: int):\n    # Return remaining budget (limit - spent)\n    pass\n\n# Test the API structure\nprint(\"Budget Tracker API\")\nprint(\"Run with: uvicorn main:app --reload\")",
              "solution": "from fastapi import FastAPI, HTTPException, Query\nfrom pydantic import BaseModel, Field\nfrom typing import Optional\n\napp = FastAPI(\n    title=\"Budget Tracker API\",\n    description=\"Track spending across budget categories\",\n    version=\"1.0.0\"\n)\n\n# In-memory storage\ncategories_db: dict[int, \"Category\"] = {}\nnext_id = 1\n\n# Pydantic Models\nclass CategoryCreate(BaseModel):\n    \"\"\"Model for creating a new category.\"\"\"\n    name: str = Field(..., min_length=1, max_length=50, description=\"Category name\")\n    budget_limit: float = Field(..., gt=0, description=\"Monthly budget limit\")\n    spent: float = Field(default=0, ge=0, description=\"Amount already spent\")\n\nclass Category(BaseModel):\n    \"\"\"Full category model with ID.\"\"\"\n    id: int\n    name: str\n    budget_limit: float\n    spent: float\n\nclass RemainingBudget(BaseModel):\n    \"\"\"Response model for remaining budget.\"\"\"\n    category_id: int\n    category_name: str\n    budget_limit: float\n    spent: float\n    remaining: float\n    percent_used: float\n\n# Endpoints\n@app.get(\"/categories/\", response_model=list[Category])\nasync def list_categories(\n    skip: int = Query(default=0, ge=0),\n    limit: int = Query(default=10, le=50)\n):\n    \"\"\"List all budget categories with pagination.\"\"\"\n    categories = list(categories_db.values())\n    return categories[skip:skip + limit]\n\n@app.get(\"/categories/{category_id}\", response_model=Category)\nasync def get_category(category_id: int):\n    \"\"\"Get a specific category by ID.\"\"\"\n    if category_id not in categories_db:\n        raise HTTPException(\n            status_code=404,\n            detail=f\"Category with ID {category_id} not found\"\n        )\n    return categories_db[category_id]\n\n@app.post(\"/categories/\", response_model=Category, status_code=201)\nasync def create_category(category: CategoryCreate):\n    \"\"\"Create a new budget category.\"\"\"\n    global next_id\n    \n    # Check for duplicate names\n    for existing in categories_db.values():\n        if existing.name.lower() == category.name.lower():\n            raise HTTPException(\n                status_code=400,\n                detail=f\"Category '{category.name}' already exists\"\n            )\n    \n    # Create new category\n    new_category = Category(\n        id=next_id,\n        name=category.name,\n        budget_limit=category.budget_limit,\n        spent=category.spent\n    )\n    \n    categories_db[next_id] = new_category\n    next_id += 1\n    \n    return new_category\n\n@app.get(\"/categories/{category_id}/remaining\", response_model=RemainingBudget)\nasync def get_remaining_budget(category_id: int):\n    \"\"\"Calculate remaining budget for a category.\"\"\"\n    if category_id not in categories_db:\n        raise HTTPException(\n            status_code=404,\n            detail=f\"Category with ID {category_id} not found\"\n        )\n    \n    category = categories_db[category_id]\n    remaining = category.budget_limit - category.spent\n    percent_used = (category.spent / category.budget_limit) * 100 if category.budget_limit > 0 else 0\n    \n    return RemainingBudget(\n        category_id=category.id,\n        category_name=category.name,\n        budget_limit=category.budget_limit,\n        spent=category.spent,\n        remaining=remaining,\n        percent_used=round(percent_used, 1)\n    )\n\n# Demo: Add sample data and show structure\nprint(\"=== Budget Tracker API ===\")\nprint(\"\\nEndpoints:\")\nfor route in app.routes:\n    if hasattr(route, 'methods'):\n        methods = ', '.join(route.methods - {'HEAD', 'OPTIONS'})\n        if methods:\n            print(f\"  {methods:6} {route.path}\")\n\nprint(\"\\nExample requests:\")\nprint(\"  POST /categories/\")\nprint('  Body: {\"name\": \"Groceries\", \"budget_limit\": 500}')\nprint(\"\\n  GET /categories/1/remaining\")\nprint('  Response: {\"remaining\": 350, \"percent_used\": 30.0}')\n\nprint(\"\\nRun with: uvicorn main:app --reload\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Field(..., gt=0) for required positive numbers. Use HTTPException(status_code=404, detail='message') for not found errors."
                },
                {
                  "level": 2,
                  "text": "For remaining budget, calculate: budget_limit - spent. Return a dict or create a RemainingBudget Pydantic model."
                },
                {
                  "level": 3,
                  "text": "Check if category_id in categories_db before accessing. Use global next_id and increment after creating each category."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to raise HTTPException for missing resources",
                  "consequence": "KeyError or None returned instead of proper 404",
                  "correction": "Always check if resource exists and raise HTTPException(status_code=404, detail='...')"
                },
                {
                  "mistake": "Not using Field() for validation constraints",
                  "consequence": "Invalid data like negative amounts accepted",
                  "correction": "Use Field(..., gt=0) for positive numbers, Field(default=0, ge=0) for non-negative"
                },
                {
                  "mistake": "Forgetting to increment next_id after creating",
                  "consequence": "Duplicate IDs, data overwritten",
                  "correction": "Always increment next_id after successful creation: next_id += 1"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-03",
          "title": "Alternative: Building APIs with Flask",
          "moduleId": "module-14",
          "order": 3,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Flask: Understanding Web Framework Fundamentals",
              "content": "**Why Learn Flask?**\n\nWhile FastAPI is the modern choice for new APIs, Flask remains valuable for:\n\n1. **Understanding Fundamentals** - Flask's explicit approach teaches you how web frameworks work under the hood\n2. **Legacy Codebases** - Many production systems still use Flask\n3. **Simple Prototypes** - Quick scripts and internal tools\n4. **Extensive Ecosystem** - Thousands of Flask extensions available\n\n**Flask = Lightweight web framework for Python**\n\n**Think of it like a restaurant:**\n- **Routes** = Menu items (what you can order)\n- **Methods** = How to order (dine-in, takeout, delivery)\n- **Responses** = What you get back\n\n**REST API Principles (same as FastAPI):**\n\n1. **Resources** - Things you work with (users, posts, products)\n2. **URLs** - Addresses for resources (`/api/users`, `/api/posts`)\n3. **HTTP Methods** - Actions on resources\n   - GET `/api/users` - List all users\n   - GET `/api/users/1` - Get user #1\n   - POST `/api/users` - Create new user\n   - PUT `/api/users/1` - Update user #1\n   - DELETE `/api/users/1` - Delete user #1\n\n4. **JSON** - Data format for requests/responses\n\n**Flask vs FastAPI:**\n- Flask requires manual validation; FastAPI validates automatically\n- Flask needs extensions for docs; FastAPI generates docs from code\n- Flask is synchronous by default; FastAPI is async-first\n- Both are excellent choices - know when to use each!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Basic Flask API",
              "content": "**Flask API key concepts:**\n\n**1. Routes:**\n```python\n@app.route('/path', methods=['GET', 'POST'])\ndef function():\n    return jsonify(data)\n```\n\n**2. URL parameters:**\n```python\n@app.route('/users/<int:user_id>')\ndef get_user(user_id):\n    # user_id is extracted from URL\n```\n\n**3. Request data:**\n```python\ndata = request.get_json()  # Parse JSON body\nparams = request.args      # Query parameters\n```\n\n**4. Responses:**\n```python\nreturn jsonify(data)           # 200 OK\nreturn jsonify(data), 201      # Created\nreturn jsonify(error), 404     # Not found\n```\n\n**5. HTTP status codes:**\n- 200: Success\n- 201: Created\n- 400: Bad request\n- 404: Not found\n- 500: Server error",
              "code": "from flask import Flask, jsonify, request\n\napp = Flask(__name__)\n\n# In-memory data store\nusers = [\n    {'id': 1, 'name': 'Alice', 'email': 'alice@example.com'},\n    {'id': 2, 'name': 'Bob', 'email': 'bob@example.com'}\n]\n\nprint(\"=== Basic Routes ===\")\n\n@app.route('/')\ndef home():\n    \"\"\"Root endpoint\"\"\"\n    return jsonify({\n        'message': 'Welcome to the API',\n        'version': '1.0',\n        'endpoints': {\n            'users': '/api/users',\n            'health': '/api/health'\n        }\n    })\n\n@app.route('/api/health')\ndef health():\n    \"\"\"Health check endpoint\"\"\"\n    return jsonify({'status': 'healthy', 'service': 'user-api'})\n\nprint(\"\\n=== GET - Read Resources ===\")\n\n@app.route('/api/users', methods=['GET'])\ndef get_users():\n    \"\"\"Get all users\"\"\"\n    return jsonify({\n        'users': users,\n        'count': len(users)\n    })\n\n@app.route('/api/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    \"\"\"Get specific user by ID\"\"\"\n    user = next((u for u in users if u['id'] == user_id), None)\n    \n    if user:\n        return jsonify(user)\n    return jsonify({'error': 'User not found'}), 404\n\nprint(\"\\n=== POST - Create Resources ===\")\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    \"\"\"Create new user\"\"\"\n    data = request.get_json()\n    \n    # Validation\n    if not data or 'name' not in data or 'email' not in data:\n        return jsonify({'error': 'Name and email required'}), 400\n    \n    # Create new user\n    new_user = {\n        'id': max([u['id'] for u in users]) + 1 if users else 1,\n        'name': data['name'],\n        'email': data['email']\n    }\n    \n    users.append(new_user)\n    \n    return jsonify(new_user), 201\n\nprint(\"\\n=== PUT - Update Resources ===\")\n\n@app.route('/api/users/<int:user_id>', methods=['PUT'])\ndef update_user(user_id):\n    \"\"\"Update existing user\"\"\"\n    user = next((u for u in users if u['id'] == user_id), None)\n    \n    if not user:\n        return jsonify({'error': 'User not found'}), 404\n    \n    data = request.get_json()\n    \n    # Update fields if provided\n    if 'name' in data:\n        user['name'] = data['name']\n    if 'email' in data:\n        user['email'] = data['email']\n    \n    return jsonify(user)\n\nprint(\"\\n=== DELETE - Remove Resources ===\")\n\n@app.route('/api/users/<int:user_id>', methods=['DELETE'])\ndef delete_user(user_id):\n    \"\"\"Delete user\"\"\"\n    global users\n    user = next((u for u in users if u['id'] == user_id), None)\n    \n    if not user:\n        return jsonify({'error': 'User not found'}), 404\n    \n    users = [u for u in users if u['id'] != user_id]\n    \n    return jsonify({'message': 'User deleted', 'id': user_id})\n\nprint(\"\\n=== Error Handling ===\")\n\n@app.errorhandler(404)\ndef not_found(error):\n    \"\"\"Handle 404 errors\"\"\"\n    return jsonify({'error': 'Resource not found'}), 404\n\n@app.errorhandler(500)\ndef internal_error(error):\n    \"\"\"Handle 500 errors\"\"\"\n    return jsonify({'error': 'Internal server error'}), 500\n\nif __name__ == '__main__':\n    print(\"\\n=== Starting Flask API ===\")\n    print(\"API will run on http://localhost:5000\")\n    print(\"\\nEndpoints:\")\n    print(\"  GET    /api/users       - List all users\")\n    print(\"  GET    /api/users/<id>  - Get specific user\")\n    print(\"  POST   /api/users       - Create user\")\n    print(\"  PUT    /api/users/<id>  - Update user\")\n    print(\"  DELETE /api/users/<id>  - Delete user\")\n    print(\"\\nNote: Run with 'python app.py' to start server\")\n    \n    # For demonstration, we'll show the structure\n    # In real use: app.run(debug=True)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Basic Flask app structure:**\n```python\nfrom flask import Flask, jsonify, request\n\napp = Flask(__name__)\n\n@app.route('/path')\ndef handler():\n    return jsonify({'key': 'value'})\n\nif __name__ == '__main__':\n    app.run(debug=True)\n```\n\n**Route patterns:**\n```python\n# Static route\n@app.route('/users')\n\n# With parameter\n@app.route('/users/<user_id>')\n\n# With type converter\n@app.route('/users/<int:user_id>')\n\n# Multiple methods\n@app.route('/users', methods=['GET', 'POST'])\n```\n\n**Request handling:**\n```python\n# Get JSON data\ndata = request.get_json()\n\n# Get query parameters\npage = request.args.get('page', default=1, type=int)\n\n# Get form data\nname = request.form.get('name')\n\n# Get headers\ntoken = request.headers.get('Authorization')\n```\n\n**Response patterns:**\n```python\n# JSON response\nreturn jsonify(data)\n\n# With status code\nreturn jsonify(data), 201\n\n# With headers\nreturn jsonify(data), 200, {'X-Custom': 'value'}\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Advanced Flask Features",
              "content": "**Advanced Flask patterns:**\n\n**1. Query parameters:**\n```python\npage = request.args.get('page', 1, type=int)\nsort = request.args.get('sort', 'name')\n```\n\n**2. Validation:**\n- Check required fields\n- Validate data types\n- Return 400 for invalid data\n\n**3. Decorators:**\n```python\n@require_auth\ndef protected_route():\n    ...\n```\n\n**4. Custom error handlers:**\n```python\n@app.errorhandler(CustomError)\ndef handle_error(e):\n    return jsonify(...), 400\n```\n\n**5. Response helpers:**\n- Consistent response format\n- Easier to maintain\n- Better client experience\n\n**6. API versioning:**\n- /api/v1/... for version 1\n- /api/v2/... for version 2\n- Allows breaking changes",
              "code": "from flask import Flask, jsonify, request, abort\nfrom functools import wraps\nimport re\n\napp = Flask(__name__)\n\n# Sample data\ntasks = [\n    {'id': 1, 'title': 'Learn Python', 'completed': True},\n    {'id': 2, 'title': 'Build API', 'completed': False}\n]\n\nprint(\"=== Query Parameters ===\")\n\n@app.route('/api/tasks')\ndef get_tasks():\n    \"\"\"Get tasks with optional filtering\"\"\"\n    # Get query parameters\n    completed = request.args.get('completed')\n    limit = request.args.get('limit', default=10, type=int)\n    \n    filtered_tasks = tasks\n    \n    # Filter by completed status\n    if completed is not None:\n        is_completed = completed.lower() == 'true'\n        filtered_tasks = [t for t in tasks if t['completed'] == is_completed]\n    \n    # Limit results\n    filtered_tasks = filtered_tasks[:limit]\n    \n    return jsonify({\n        'tasks': filtered_tasks,\n        'count': len(filtered_tasks),\n        'filters': {'completed': completed, 'limit': limit}\n    })\n\nprint(\"\\n=== Request Validation ===\")\n\ndef validate_task(data):\n    \"\"\"Validate task data\"\"\"\n    errors = []\n    \n    if not data:\n        return ['No data provided']\n    \n    if 'title' not in data:\n        errors.append('Title is required')\n    elif len(data['title'].strip()) < 3:\n        errors.append('Title must be at least 3 characters')\n    \n    if 'completed' in data and not isinstance(data['completed'], bool):\n        errors.append('Completed must be boolean')\n    \n    return errors\n\n@app.route('/api/tasks', methods=['POST'])\ndef create_task():\n    \"\"\"Create new task with validation\"\"\"\n    data = request.get_json()\n    \n    # Validate\n    errors = validate_task(data)\n    if errors:\n        return jsonify({'errors': errors}), 400\n    \n    # Create task\n    new_task = {\n        'id': max([t['id'] for t in tasks]) + 1 if tasks else 1,\n        'title': data['title'].strip(),\n        'completed': data.get('completed', False)\n    }\n    \n    tasks.append(new_task)\n    \n    return jsonify(new_task), 201\n\nprint(\"\\n=== Decorators for Authentication ===\")\n\ndef require_api_key(f):\n    \"\"\"Decorator to require API key\"\"\"\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        api_key = request.headers.get('X-API-Key')\n        \n        if not api_key or api_key != 'secret-key-123':\n            return jsonify({'error': 'Invalid or missing API key'}), 401\n        \n        return f(*args, **kwargs)\n    return decorated_function\n\n@app.route('/api/admin/tasks', methods=['DELETE'])\n@require_api_key\ndef delete_all_tasks():\n    \"\"\"Delete all tasks (requires API key)\"\"\"\n    global tasks\n    count = len(tasks)\n    tasks = []\n    \n    return jsonify({'message': f'Deleted {count} tasks'})\n\nprint(\"\\n=== Error Handlers ===\")\n\nclass ValidationError(Exception):\n    \"\"\"Custom validation error\"\"\"\n    pass\n\n@app.errorhandler(ValidationError)\ndef handle_validation_error(error):\n    return jsonify({'error': str(error)}), 400\n\n@app.errorhandler(404)\ndef not_found(error):\n    return jsonify({\n        'error': 'Resource not found',\n        'status': 404\n    }), 404\n\nprint(\"\\n=== Response Helpers ===\")\n\ndef success_response(data, message=None, status=200):\n    \"\"\"Create success response\"\"\"\n    response = {'success': True, 'data': data}\n    if message:\n        response['message'] = message\n    return jsonify(response), status\n\ndef error_response(message, status=400):\n    \"\"\"Create error response\"\"\"\n    return jsonify({\n        'success': False,\n        'error': message\n    }), status\n\n@app.route('/api/tasks/<int:task_id>', methods=['PATCH'])\ndef update_task_partial(task_id):\n    \"\"\"Partially update task\"\"\"\n    task = next((t for t in tasks if t['id'] == task_id), None)\n    \n    if not task:\n        return error_response('Task not found', 404)\n    \n    data = request.get_json()\n    \n    if 'title' in data:\n        task['title'] = data['title']\n    if 'completed' in data:\n        task['completed'] = data['completed']\n    \n    return success_response(task, 'Task updated')\n\nprint(\"\\n=== API Versioning ===\")\n\n@app.route('/api/v1/tasks')\ndef get_tasks_v1():\n    \"\"\"Version 1 of tasks endpoint\"\"\"\n    return jsonify({'version': 1, 'tasks': tasks})\n\n@app.route('/api/v2/tasks')\ndef get_tasks_v2():\n    \"\"\"Version 2 with enhanced response\"\"\"\n    return jsonify({\n        'version': 2,\n        'data': {\n            'tasks': tasks,\n            'total': len(tasks),\n            'completed': len([t for t in tasks if t['completed']]),\n            'pending': len([t for t in tasks if not t['completed']])\n        }\n    })\n\nif __name__ == '__main__':\n    print(\"\\n=== Flask API with Advanced Features ===\")\n    print(\"\\nFeatures demonstrated:\")\n    print(\"  ‚úì Query parameters\")\n    print(\"  ‚úì Request validation\")\n    print(\"  ‚úì Authentication decorator\")\n    print(\"  ‚úì Custom error handlers\")\n    print(\"  ‚úì Response helpers\")\n    print(\"  ‚úì API versioning\")\n    print(\"\\nExample requests:\")\n    print(\"  GET /api/tasks?completed=true&limit=5\")\n    print(\"  POST /api/tasks (with JSON body)\")\n    print(\"  DELETE /api/admin/tasks (requires X-API-Key header)\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Flask makes APIs easy** - Lightweight, simple decorator-based routing\n- **@app.route() defines endpoints** - URL paths that respond to requests\n- **methods=['GET', 'POST']** - Specify which HTTP methods to accept\n- **request.get_json()** - Get JSON data from request body\n- **jsonify()** - Convert Python dict/list to JSON response\n- **Return status codes** - (data, 201) for created, (error, 404) for not found\n- **Validate input** - Always check required fields and data types\n- **Use decorators for reusable logic** - Authentication, validation, etc."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-02-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a Flask API for a simple blog with:\n- GET /api/posts - List all posts\n- GET /api/posts/<id> - Get specific post\n- POST /api/posts - Create post (requires title and content)\n- DELETE /api/posts/<id> - Delete post\nInclude validation and proper status codes.",
              "instructions": "Create a Flask API for a simple blog with:\n- GET /api/posts - List all posts\n- GET /api/posts/<id> - Get specific post\n- POST /api/posts - Create post (requires title and content)\n- DELETE /api/posts/<id> - Delete post\nInclude validation and proper status codes.",
              "starterCode": "from flask import Flask, jsonify, request\n\napp = Flask(__name__)\nposts = []\n\n# TODO: Implement the endpoints\n\nif __name__ == '__main__':\n    app.run(debug=True)",
              "solution": "from flask import Flask, jsonify, request\n\n# Flask Blog API\n# This solution demonstrates RESTful API endpoints\n\napp = Flask(__name__)\n\n# In-memory storage (would use database in production)\nposts = [\n    {'id': 1, 'title': 'First Post', 'content': 'Hello World!'},\n    {'id': 2, 'title': 'Second Post', 'content': 'More content here.'}\n]\nnext_id = 3\n\n@app.route('/api/posts', methods=['GET'])\ndef get_all_posts():\n    \"\"\"List all posts.\"\"\"\n    return jsonify({'posts': posts, 'count': len(posts)}), 200\n\n@app.route('/api/posts/<int:post_id>', methods=['GET'])\ndef get_post(post_id):\n    \"\"\"Get a specific post by ID.\"\"\"\n    post = next((p for p in posts if p['id'] == post_id), None)\n    if post:\n        return jsonify(post), 200\n    return jsonify({'error': 'Post not found'}), 404\n\n@app.route('/api/posts', methods=['POST'])\ndef create_post():\n    \"\"\"Create a new post.\"\"\"\n    global next_id\n    data = request.get_json()\n    \n    # Validate required fields\n    if not data:\n        return jsonify({'error': 'No data provided'}), 400\n    if 'title' not in data or not data['title'].strip():\n        return jsonify({'error': 'Title is required'}), 400\n    if 'content' not in data or not data['content'].strip():\n        return jsonify({'error': 'Content is required'}), 400\n    \n    # Create new post\n    new_post = {\n        'id': next_id,\n        'title': data['title'].strip(),\n        'content': data['content'].strip()\n    }\n    posts.append(new_post)\n    next_id += 1\n    \n    return jsonify(new_post), 201\n\n@app.route('/api/posts/<int:post_id>', methods=['DELETE'])\ndef delete_post(post_id):\n    \"\"\"Delete a post by ID.\"\"\"\n    global posts\n    post = next((p for p in posts if p['id'] == post_id), None)\n    if not post:\n        return jsonify({'error': 'Post not found'}), 404\n    \n    posts = [p for p in posts if p['id'] != post_id]\n    return jsonify({'message': f'Post {post_id} deleted'}), 200\n\nif __name__ == '__main__':\n    print(\"\\nFlask Blog API running at http://localhost:5000\")\n    print(\"\\nEndpoints:\")\n    print(\"  GET    /api/posts       - List all posts\")\n    print(\"  GET    /api/posts/<id>  - Get specific post\")\n    print(\"  POST   /api/posts       - Create post\")\n    print(\"  DELETE /api/posts/<id>  - Delete post\")\n    app.run(debug=True)",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use @app.route decorator with methods parameter. Validate required fields. Return appropriate status codes (200, 201, 404, 400)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-14-lesson-pydantic-v2",
          "title": "Pydantic v2 Deep Dive",
          "moduleId": "module-14",
          "order": 4,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Pydantic v2 - Data Validation Made Easy",
              "content": "**What is Pydantic?**\n\nPydantic is the most popular data validation library in Python, used by FastAPI, LangChain, and thousands of production applications.\n\n**Why use Pydantic?**\n- **Type Safety**: Define your data structure once, get validation everywhere\n- **Clear Error Messages**: Know exactly what went wrong and where\n- **IDE Support**: Autocomplete and type checking work perfectly\n- **JSON Serialization**: Easy conversion to/from JSON, dicts, and more\n- **Settings Management**: Load config from environment variables\n\n**Pydantic v2 Revolution (2023):**\n\nPydantic v2 was completely rewritten in Rust, making it:\n- **5-50x faster** than v1\n- **More memory efficient**\n- **Stricter validation** by default\n\n**Key v2 Syntax Changes:**\n\n| v1 (Old) | v2 (New) |\n|----------|----------|\n| `@validator` | `@field_validator` |\n| `@root_validator` | `@model_validator` |\n| `.dict()` | `.model_dump()` |\n| `.parse_obj()` | `.model_validate()` |\n| `Config` class | `model_config` dict |\n| `schema()` | `model_json_schema()` |\n\n**When to Use Pydantic:**\n- API request/response validation\n- Configuration management\n- Data parsing and cleaning\n- Any structured data handling"
            },
            {
              "type": "EXAMPLE",
              "title": "BaseModel Patterns",
              "content": "**Core Pydantic Patterns:**\n\n**1. Field Constraints:**\n```python\nField(..., gt=0)       # Greater than 0 (required)\nField(default=1, ge=1) # >= 1 with default\nField(min_length=3)    # String min length\nField(pattern=r'^...')  # Regex pattern\n```\n\n**2. Type Hints:**\n```python\nstr | None      # Optional string (Python 3.10+)\nlist[str]       # List of strings\ndict[str, int]  # Dict with string keys, int values\n```\n\n**3. Enums for Choices:**\n```python\nclass Category(str, Enum):\n    INCOME = \"income\"\n    EXPENSE = \"expense\"\n```\nInherit from `str` so JSON serialization works correctly.\n\n**4. model_config:**\n```python\nmodel_config = {\n    \"str_strip_whitespace\": True,\n    \"str_min_length\": 1,\n    \"extra\": \"forbid\"  # Reject unknown fields\n}\n```",
              "code": "from pydantic import BaseModel, Field\nfrom datetime import datetime\nfrom enum import Enum\nfrom typing import Optional\n\nprint(\"=== Pydantic v2 BaseModel Patterns ===\")\n\n# Enum for type safety on categorical values\nclass Category(str, Enum):\n    INCOME = \"income\"\n    EXPENSE = \"expense\"\n    TRANSFER = \"transfer\"\n\n# Main model with various field patterns\nclass Transaction(BaseModel):\n    \"\"\"A financial transaction with full validation.\"\"\"\n    \n    # Required field with constraint: must be positive\n    amount: float = Field(..., gt=0, description=\"Must be positive\")\n    \n    # Enum field - only valid categories accepted\n    category: Category\n    \n    # Optional field with default None\n    description: str | None = None\n    \n    # Auto-generated timestamp\n    created_at: datetime = Field(default_factory=datetime.now)\n    \n    # Model-level configuration\n    model_config = {\n        \"str_strip_whitespace\": True,  # Auto-strip whitespace from strings\n        \"str_min_length\": 1,            # No empty strings allowed\n    }\n\n# Create a valid transaction\nprint(\"\\n1. Creating valid transaction:\")\ntxn = Transaction(\n    amount=99.99,\n    category=Category.EXPENSE,\n    description=\"  Weekly groceries  \"  # Whitespace will be stripped\n)\nprint(f\"   Amount: ${txn.amount}\")\nprint(f\"   Category: {txn.category.value}\")\nprint(f\"   Description: '{txn.description}'\")\nprint(f\"   Created: {txn.created_at.strftime('%Y-%m-%d %H:%M')}\")\n\n# Convert to dict (v2 method)\nprint(\"\\n2. Convert to dictionary:\")\ndata = txn.model_dump()\nprint(f\"   {data}\")\n\n# Convert to JSON string\nprint(\"\\n3. Convert to JSON:\")\njson_str = txn.model_dump_json()\nprint(f\"   {json_str}\")\n\n# Create from dict (v2 method)\nprint(\"\\n4. Create from dictionary:\")\nraw_data = {\n    \"amount\": 50.0,\n    \"category\": \"income\",\n    \"description\": \"Refund\"\n}\ntxn2 = Transaction.model_validate(raw_data)\nprint(f\"   Created: {txn2.category.value} - ${txn2.amount}\")\n\n# Validation errors\nprint(\"\\n5. Validation errors:\")\nfrom pydantic import ValidationError\n\ntry:\n    bad_txn = Transaction(\n        amount=-50,  # Negative amount - invalid!\n        category=\"invalid_category\"  # Not in enum\n    )\nexcept ValidationError as e:\n    print(f\"   Errors found: {e.error_count()}\")\n    for error in e.errors():\n        print(f\"   - {error['loc'][0]}: {error['msg']}\")\n\nprint(\"\\n6. Model schema (for API docs):\")\nschema = Transaction.model_json_schema()\nprint(f\"   Title: {schema.get('title')}\")\nprint(f\"   Required fields: {schema.get('required')}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Field Validators",
              "content": "**Custom Validation with @field_validator:**\n\nField validators let you add custom logic beyond built-in constraints.\n\n**Key Rules:**\n1. Use `@field_validator('field_name')` decorator\n2. Always add `@classmethod` decorator below it\n3. First parameter is `cls`, second is the value `v`\n4. Raise `ValueError` for validation failures\n5. Return the (possibly modified) value\n\n**Validator Modes:**\n```python\n@field_validator('field', mode='before')  # Before Pydantic validates\n@field_validator('field', mode='after')   # After Pydantic validates (default)\n```\n\n**Common Use Cases:**\n- Normalizing data (lowercase, strip whitespace)\n- Complex validation (business rules)\n- Data transformation (parse strings to numbers)\n- Cross-referencing external data",
              "code": "from pydantic import BaseModel, field_validator, ValidationError\n\nprint(\"=== Pydantic v2 Field Validators ===\")\n\nclass TransactionCreate(BaseModel):\n    \"\"\"Transaction model with custom validators.\"\"\"\n    \n    amount: float\n    category: str\n    reference_code: str | None = None\n    \n    @field_validator(\"amount\")\n    @classmethod\n    def amount_must_be_positive(cls, v: float) -> float:\n        \"\"\"Ensure amount is positive and round to 2 decimals.\"\"\"\n        if v <= 0:\n            raise ValueError(\"Amount must be positive\")\n        return round(v, 2)  # Normalize to 2 decimal places\n    \n    @field_validator(\"category\")\n    @classmethod\n    def category_must_be_valid(cls, v: str) -> str:\n        \"\"\"Validate and normalize category.\"\"\"\n        valid = [\"income\", \"expense\", \"transfer\"]\n        normalized = v.lower().strip()\n        if normalized not in valid:\n            raise ValueError(f\"Category must be one of: {valid}\")\n        return normalized  # Return lowercase version\n    \n    @field_validator(\"reference_code\")\n    @classmethod\n    def validate_reference_code(cls, v: str | None) -> str | None:\n        \"\"\"Validate reference code format if provided.\"\"\"\n        if v is None:\n            return v\n        # Must be format: TXN-XXXXX (TXN- followed by 5 digits)\n        if not v.startswith(\"TXN-\") or len(v) != 9:\n            raise ValueError(\"Reference code must be format TXN-XXXXX\")\n        if not v[4:].isdigit():\n            raise ValueError(\"Reference code must end with 5 digits\")\n        return v.upper()\n\n# Test valid transaction\nprint(\"\\n1. Valid transaction:\")\ntxn = TransactionCreate(\n    amount=99.999,      # Will be rounded to 99.99\n    category=\"EXPENSE\", # Will be normalized to \"expense\"\n    reference_code=\"TXN-12345\"\n)\nprint(f\"   Amount: ${txn.amount}\")  # 99.99\nprint(f\"   Category: {txn.category}\")  # expense\nprint(f\"   Reference: {txn.reference_code}\")\n\n# Test validation errors\nprint(\"\\n2. Invalid amount:\")\ntry:\n    bad = TransactionCreate(amount=-50, category=\"expense\")\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")\n\nprint(\"\\n3. Invalid category:\")\ntry:\n    bad = TransactionCreate(amount=50, category=\"invalid\")\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")\n\nprint(\"\\n4. Invalid reference code:\")\ntry:\n    bad = TransactionCreate(\n        amount=50,\n        category=\"expense\",\n        reference_code=\"INVALID\"\n    )\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")\n\n# Validator that runs before type coercion\nprint(\"\\n5. Mode='before' validator example:\")\n\nclass FlexibleAmount(BaseModel):\n    \"\"\"Accept amount as string or number.\"\"\"\n    amount: float\n    \n    @field_validator(\"amount\", mode=\"before\")\n    @classmethod\n    def parse_amount(cls, v):\n        \"\"\"Handle string amounts like '$50' or '50.00'.\"\"\"\n        if isinstance(v, str):\n            # Remove currency symbols and commas\n            cleaned = v.replace(\"$\", \"\").replace(\",\", \"\").strip()\n            return float(cleaned)\n        return v\n\nprint(\"   From string '$1,234.56':\")\nresult = FlexibleAmount(amount=\"$1,234.56\")\nprint(f\"   Parsed amount: {result.amount}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Model Validators",
              "content": "**Cross-Field Validation with @model_validator:**\n\nWhen you need to validate relationships BETWEEN fields, use model validators.\n\n**Key Differences from field_validator:**\n- Runs after all individual fields are validated\n- Has access to ALL fields at once\n- Returns the entire model instance (or values dict)\n\n**Modes:**\n```python\n@model_validator(mode='before')  # Gets raw input dict\n@model_validator(mode='after')   # Gets validated model instance\n```\n\n**Common Use Cases:**\n- Password confirmation matching\n- Date range validation (start < end)\n- Conditional requirements (if field A, then field B required)\n- Business rule validation (spent <= limit)",
              "code": "from pydantic import BaseModel, model_validator, ValidationError\nfrom typing import Self\n\nprint(\"=== Pydantic v2 Model Validators ===\")\n\n# Example 1: Budget validation\nclass Budget(BaseModel):\n    \"\"\"Budget with cross-field validation.\"\"\"\n    \n    monthly_limit: float\n    spent: float\n    category: str\n    \n    @model_validator(mode=\"after\")\n    def check_not_overspent(self) -> Self:\n        \"\"\"Ensure spent doesn't exceed the limit.\"\"\"\n        if self.spent > self.monthly_limit:\n            raise ValueError(\n                f\"Spent (${self.spent}) cannot exceed \"\n                f\"monthly limit (${self.monthly_limit})\"\n            )\n        return self\n\nprint(\"\\n1. Valid budget:\")\nbudget = Budget(monthly_limit=1000, spent=750, category=\"Food\")\nprint(f\"   Limit: ${budget.monthly_limit}\")\nprint(f\"   Spent: ${budget.spent}\")\nprint(f\"   Remaining: ${budget.monthly_limit - budget.spent}\")\n\nprint(\"\\n2. Overspent budget (validation error):\")\ntry:\n    bad_budget = Budget(monthly_limit=500, spent=750, category=\"Shopping\")\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")\n\n# Example 2: Date range validation\nfrom datetime import date\n\nclass DateRange(BaseModel):\n    \"\"\"Date range with start before end validation.\"\"\"\n    \n    start_date: date\n    end_date: date\n    description: str | None = None\n    \n    @model_validator(mode=\"after\")\n    def check_dates(self) -> Self:\n        \"\"\"Ensure start_date is before end_date.\"\"\"\n        if self.start_date >= self.end_date:\n            raise ValueError(\"start_date must be before end_date\")\n        return self\n\nprint(\"\\n3. Valid date range:\")\ndr = DateRange(\n    start_date=date(2024, 1, 1),\n    end_date=date(2024, 12, 31),\n    description=\"Year 2024\"\n)\nprint(f\"   Range: {dr.start_date} to {dr.end_date}\")\n\nprint(\"\\n4. Invalid date range:\")\ntry:\n    bad_range = DateRange(\n        start_date=date(2024, 12, 31),\n        end_date=date(2024, 1, 1)\n    )\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")\n\n# Example 3: mode='before' for preprocessing\nclass UserRegistration(BaseModel):\n    \"\"\"Registration with password confirmation.\"\"\"\n    \n    username: str\n    password: str\n    \n    @model_validator(mode=\"before\")\n    @classmethod\n    def check_passwords_match(cls, data: dict) -> dict:\n        \"\"\"Verify password and confirm_password match before validation.\"\"\"\n        password = data.get(\"password\")\n        confirm = data.get(\"confirm_password\")\n        \n        if password and confirm and password != confirm:\n            raise ValueError(\"Passwords do not match\")\n        \n        # Remove confirm_password from data (not in model)\n        data.pop(\"confirm_password\", None)\n        return data\n\nprint(\"\\n5. Valid registration:\")\nuser = UserRegistration.model_validate({\n    \"username\": \"alice\",\n    \"password\": \"secret123\",\n    \"confirm_password\": \"secret123\"\n})\nprint(f\"   Username: {user.username}\")\nprint(f\"   Password set: {'*' * len(user.password)}\")\n\nprint(\"\\n6. Password mismatch:\")\ntry:\n    bad_user = UserRegistration.model_validate({\n        \"username\": \"bob\",\n        \"password\": \"secret123\",\n        \"confirm_password\": \"different\"\n    })\nexcept ValidationError as e:\n    for error in e.errors():\n        print(f\"   Error: {error['msg']}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Settings Management",
              "content": "**Pydantic Settings for Configuration:**\n\nThe `pydantic-settings` package handles application configuration:\n- Read from environment variables\n- Load from `.env` files\n- Type validation on config values\n- Default values with overrides\n\n**Installation:**\n```bash\nuv add pydantic-settings\n# or: pip install pydantic-settings\n```\n\n**Key Features:**\n- Automatic env var reading (case-insensitive)\n- Nested settings with prefixes\n- Multiple .env file support\n- Secrets file support\n\n**Best Practices:**\n- Never commit `.env` to git\n- Provide `.env.example` with placeholder values\n- Use type hints for validation\n- Set sensible defaults for development",
              "code": "# Note: pydantic-settings is a separate package\n# Install with: uv add pydantic-settings\n\nfrom pydantic import Field\nimport os\n\nprint(\"=== Pydantic Settings Management ===\")\n\n# Simulate pydantic-settings behavior\n# In real code, you'd use: from pydantic_settings import BaseSettings\n\n# First, let's simulate environment variables\nos.environ[\"DATABASE_URL\"] = \"postgresql://user:pass@localhost/mydb\"\nos.environ[\"SECRET_KEY\"] = \"super-secret-key-12345\"\nos.environ[\"DEBUG\"] = \"true\"\nos.environ[\"MAX_CONNECTIONS\"] = \"100\"\n\nprint(\"\\n1. Basic Settings Pattern:\")\nprint(\"\"\"\nfrom pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    database_url: str\n    secret_key: str\n    debug: bool = False\n    max_connections: int = 10\n    \n    model_config = {\n        \"env_file\": \".env\",\n        \"env_file_encoding\": \"utf-8\"\n    }\n\nsettings = Settings()  # Reads from environment\n\"\"\")\n\n# Demonstrate the concept with a regular BaseModel\nfrom pydantic import BaseModel\n\nclass Settings(BaseModel):\n    \"\"\"Application settings (simulated).\"\"\"\n    \n    database_url: str\n    secret_key: str\n    debug: bool = False\n    max_connections: int = 10\n    api_version: str = \"v1\"\n    \n    @classmethod\n    def from_env(cls) -> \"Settings\":\n        \"\"\"Load settings from environment variables.\"\"\"\n        return cls(\n            database_url=os.environ.get(\"DATABASE_URL\", \"\"),\n            secret_key=os.environ.get(\"SECRET_KEY\", \"\"),\n            debug=os.environ.get(\"DEBUG\", \"false\").lower() == \"true\",\n            max_connections=int(os.environ.get(\"MAX_CONNECTIONS\", \"10\")),\n            api_version=os.environ.get(\"API_VERSION\", \"v1\")\n        )\n\nsettings = Settings.from_env()\n\nprint(\"\\n2. Loaded settings:\")\nprint(f\"   Database: {settings.database_url[:30]}...\")\nprint(f\"   Debug mode: {settings.debug}\")\nprint(f\"   Max connections: {settings.max_connections}\")\nprint(f\"   API version: {settings.api_version}\")\n\n# Nested settings example\nprint(\"\\n3. Nested Settings Pattern:\")\n\nclass DatabaseSettings(BaseModel):\n    \"\"\"Database configuration.\"\"\"\n    url: str\n    pool_size: int = 5\n    echo: bool = False\n\nclass CacheSettings(BaseModel):\n    \"\"\"Cache configuration.\"\"\"\n    redis_url: str = \"redis://localhost:6379\"\n    ttl_seconds: int = 3600\n\nclass AppSettings(BaseModel):\n    \"\"\"Main application settings with nested configs.\"\"\"\n    \n    app_name: str = \"My App\"\n    debug: bool = False\n    database: DatabaseSettings\n    cache: CacheSettings = CacheSettings()\n\napp_settings = AppSettings(\n    app_name=\"Finance Tracker\",\n    debug=True,\n    database=DatabaseSettings(\n        url=\"postgresql://localhost/finance\",\n        pool_size=10\n    )\n)\n\nprint(f\"   App: {app_settings.app_name}\")\nprint(f\"   Debug: {app_settings.debug}\")\nprint(f\"   DB Pool: {app_settings.database.pool_size}\")\nprint(f\"   Cache TTL: {app_settings.cache.ttl_seconds}s\")\n\n# Example .env file\nprint(\"\\n4. Example .env file:\")\nenv_example = \"\"\"\n# .env.example - Copy to .env and fill in values\nDATABASE_URL=postgresql://user:password@localhost/dbname\nSECRET_KEY=your-secret-key-here\nDEBUG=false\nMAX_CONNECTIONS=50\nREDIS_URL=redis://localhost:6379\n\"\"\"\nprint(env_example)\n\nprint(\"5. Real pydantic-settings usage:\")\nprint(\"\"\"\nfrom pydantic_settings import BaseSettings, SettingsConfigDict\n\nclass Settings(BaseSettings):\n    model_config = SettingsConfigDict(\n        env_file='.env',\n        env_file_encoding='utf-8',\n        case_sensitive=False,\n        extra='ignore'\n    )\n    \n    # All fields auto-read from environment\n    database_url: str\n    secret_key: str\n    debug: bool = False\n\n# Usage in FastAPI:\nfrom functools import lru_cache\n\n@lru_cache  # Cache settings for performance\ndef get_settings():\n    return Settings()\n\"\"\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Pydantic v2 Key Takeaways",
              "content": "**Core Concepts:**\n- **BaseModel** - Define data structures with type hints\n- **Field()** - Add constraints and metadata\n- **@field_validator** - Custom single-field validation\n- **@model_validator** - Cross-field validation\n- **pydantic-settings** - Configuration management\n\n**v2 Syntax Summary:**\n```python\n# Models\nmodel.model_dump()        # Convert to dict\nmodel.model_dump_json()   # Convert to JSON string\nModel.model_validate(data) # Create from dict\nModel.model_json_schema() # Get JSON schema\n\n# Validators\n@field_validator('field')\n@classmethod\ndef validate(cls, v): ...\n\n@model_validator(mode='after')\ndef validate(self) -> Self: ...\n\n# Configuration\nmodel_config = {\n    'str_strip_whitespace': True,\n    'extra': 'forbid'\n}\n```\n\n**Best Practices:**\n- Use enums for categorical values\n- Return modified values from validators\n- Use `mode='before'` for preprocessing\n- Keep validation logic simple and focused\n- Use Field descriptions for API documentation\n- Never commit secrets in settings files"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-pydantic-v2-challenge",
              "title": "Build a User Profile Validator",
              "description": "Create a complete user profile validation system using Pydantic v2 patterns including field validators, model validators, and proper error handling.",
              "instructions": "Create a UserProfile model with:\n- username: 3-20 alphanumeric characters, lowercase only\n- email: valid email format (use EmailStr or validate manually)\n- age: optional, must be 13-120 if provided\n- bio: optional, max 500 characters\n- website: optional, must start with https:// if provided\n\nAdd a model validator to ensure: if age < 18, bio cannot contain certain keywords.\n\nTest with valid and invalid data.",
              "starterCode": "from pydantic import BaseModel, Field, field_validator, model_validator, ValidationError\nfrom typing import Self\n\nclass UserProfile(BaseModel):\n    \"\"\"User profile with comprehensive validation.\"\"\"\n    \n    username: str\n    email: str\n    age: int | None = None\n    bio: str | None = None\n    website: str | None = None\n    \n    # TODO: Add field validator for username\n    # - Must be 3-20 characters\n    # - Only alphanumeric\n    # - Convert to lowercase\n    \n    # TODO: Add field validator for email\n    # - Must contain @\n    # - Must have domain after @\n    \n    # TODO: Add field validator for age\n    # - If provided, must be 13-120\n    \n    # TODO: Add field validator for website\n    # - If provided, must start with https://\n    \n    # TODO: Add model validator\n    # - If age < 18, bio cannot contain \"adult\" or \"18+\"\n    \n    pass\n\n# Test your implementation\ntest_cases = [\n    {\"username\": \"Alice123\", \"email\": \"alice@test.com\", \"age\": 25},\n    {\"username\": \"ab\", \"email\": \"invalid\"},  # Should fail\n    {\"username\": \"teen_user\", \"email\": \"teen@test.com\", \"age\": 15, \"bio\": \"I love coding\"},\n]\n\nfor data in test_cases:\n    try:\n        user = UserProfile.model_validate(data)\n        print(f\"Valid: {user.username}\")\n    except ValidationError as e:\n        print(f\"Invalid: {e.error_count()} errors\")",
              "solution": "from pydantic import BaseModel, Field, field_validator, model_validator, ValidationError\nfrom typing import Self\nimport re\n\nclass UserProfile(BaseModel):\n    \"\"\"User profile with comprehensive Pydantic v2 validation.\"\"\"\n    \n    username: str = Field(..., min_length=3, max_length=20)\n    email: str\n    age: int | None = Field(default=None, ge=13, le=120)\n    bio: str | None = Field(default=None, max_length=500)\n    website: str | None = None\n    \n    @field_validator(\"username\")\n    @classmethod\n    def validate_username(cls, v: str) -> str:\n        \"\"\"Username must be alphanumeric and lowercase.\"\"\"\n        if not v.isalnum():\n            raise ValueError(\"Username must be alphanumeric only\")\n        return v.lower()\n    \n    @field_validator(\"email\")\n    @classmethod\n    def validate_email(cls, v: str) -> str:\n        \"\"\"Basic email validation.\"\"\"\n        if \"@\" not in v:\n            raise ValueError(\"Email must contain @\")\n        parts = v.split(\"@\")\n        if len(parts) != 2 or not parts[1] or \".\" not in parts[1]:\n            raise ValueError(\"Invalid email format\")\n        return v.lower()\n    \n    @field_validator(\"website\")\n    @classmethod\n    def validate_website(cls, v: str | None) -> str | None:\n        \"\"\"Website must use HTTPS if provided.\"\"\"\n        if v is None:\n            return v\n        if not v.startswith(\"https://\"):\n            raise ValueError(\"Website must start with https://\")\n        return v\n    \n    @model_validator(mode=\"after\")\n    def check_age_restrictions(self) -> Self:\n        \"\"\"If user is under 18, bio cannot contain adult content markers.\"\"\"\n        if self.age is not None and self.age < 18 and self.bio:\n            restricted_words = [\"adult\", \"18+\", \"nsfw\"]\n            bio_lower = self.bio.lower()\n            for word in restricted_words:\n                if word in bio_lower:\n                    raise ValueError(\n                        f\"Bio cannot contain '{word}' for users under 18\"\n                    )\n        return self\n\n# Test valid profiles\nprint(\"=== Testing UserProfile Validation ===\")\n\nprint(\"\\n1. Valid adult user:\")\nuser1 = UserProfile(\n    username=\"Alice123\",\n    email=\"alice@example.com\",\n    age=25,\n    bio=\"Python developer and coffee enthusiast\",\n    website=\"https://alice.dev\"\n)\nprint(f\"   Username: {user1.username}\")\nprint(f\"   Email: {user1.email}\")\nprint(f\"   Age: {user1.age}\")\n\nprint(\"\\n2. Valid teen user:\")\nuser2 = UserProfile(\n    username=\"TeenCoder\",\n    email=\"TEEN@School.EDU\",\n    age=15,\n    bio=\"Learning to code!\"\n)\nprint(f\"   Username: {user2.username}\")\nprint(f\"   Email: {user2.email}\")\n\nprint(\"\\n3. Minimal valid user:\")\nuser3 = UserProfile(username=\"minimal\", email=\"min@test.com\")\nprint(f\"   Username: {user3.username}\")\nprint(f\"   Age: {user3.age} (optional)\")\n\n# Test validation errors\nprint(\"\\n4. Invalid cases:\")\n\ntest_cases = [\n    ({\"username\": \"ab\", \"email\": \"test@test.com\"}, \"Username too short\"),\n    ({\"username\": \"valid\", \"email\": \"invalid\"}, \"Invalid email\"),\n    ({\"username\": \"valid\", \"email\": \"a@b.com\", \"age\": 10}, \"Age too young\"),\n    ({\"username\": \"valid\", \"email\": \"a@b.com\", \"website\": \"http://insecure.com\"}, \"HTTP not HTTPS\"),\n    ({\"username\": \"teen\", \"email\": \"a@b.com\", \"age\": 15, \"bio\": \"I am 18+ years\"}, \"Restricted content for minor\"),\n]\n\nfor data, expected_error in test_cases:\n    try:\n        UserProfile.model_validate(data)\n        print(f\"   Unexpected success for: {expected_error}\")\n    except ValidationError as e:\n        print(f\"   Caught: {expected_error}\")\n        print(f\"      -> {e.errors()[0]['msg']}\")\n\nprint(\"\\n5. Export to JSON:\")\njson_output = user1.model_dump_json(indent=2)\nprint(json_output)",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Valid user profile creates successfully",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Invalid username is rejected",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use @field_validator with @classmethod decorator. Return the modified value. Raise ValueError for validation failures."
                },
                {
                  "level": 2,
                  "text": "For username: use v.isalnum() to check alphanumeric. For email: split by '@' and check parts. Use v.lower() to normalize."
                },
                {
                  "level": 3,
                  "text": "For model_validator: use mode='after', return Self type hint. Check if self.age is not None and self.age < 18, then check self.bio for restricted words."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting @classmethod decorator after @field_validator",
                  "consequence": "TypeError: validator takes wrong number of arguments",
                  "correction": "Always add @classmethod below @field_validator"
                },
                {
                  "mistake": "Not returning the value from field validator",
                  "consequence": "Field becomes None unexpectedly",
                  "correction": "Always return v (or modified v) from field validators"
                },
                {
                  "mistake": "Using @validator instead of @field_validator",
                  "consequence": "DeprecationWarning in Pydantic v2",
                  "correction": "Use @field_validator for v2 compatibility"
                },
                {
                  "mistake": "Forgetting to return self from model_validator",
                  "consequence": "Model becomes None after validation",
                  "correction": "Always return self at the end of model_validator"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-di",
          "title": "Dependency Injection in FastAPI",
          "moduleId": "module-14",
          "order": 5,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Dependency Injection?",
              "content": "**Dependency Injection (DI)** is a design pattern where objects receive their dependencies from external sources rather than creating them internally.\n\n**Why FastAPI Uses Dependency Injection:**\n\n1. **Reusability** - Write once, use in many endpoints\n2. **Testing** - Easy to swap real dependencies with mocks\n3. **Separation of Concerns** - Each function does one thing well\n4. **Clean Code** - No repetitive setup code in every endpoint\n\n**The Depends() Function:**\n\nFastAPI's `Depends()` is the key to DI:\n\n```python\nfrom fastapi import Depends\n\ndef get_database():\n    return DatabaseConnection()\n\n@app.get('/items')\ndef read_items(db = Depends(get_database)):\n    return db.get_all_items()\n```\n\n**How It Works:**\n1. FastAPI sees `Depends(get_database)`\n2. Before calling your endpoint, it calls `get_database()`\n3. The return value is injected as `db`\n4. Your endpoint uses `db` without knowing how it was created\n\n**Common Use Cases:**\n- Database connections\n- Authentication/Authorization\n- Configuration/Settings\n- Logging\n- Rate limiting\n- Pagination parameters"
            },
            {
              "type": "EXAMPLE",
              "title": "Simple Dependencies",
              "content": "**Basic dependency pattern:**\n\nA dependency is just a function that returns something your endpoint needs.\n\n**Key Points:**\n- Dependencies can be regular functions or async functions\n- They can return any type\n- FastAPI automatically calls them and passes the result\n- Multiple endpoints can share the same dependency",
              "code": "from fastapi import FastAPI, Depends\n\napp = FastAPI()\n\ndef get_db_connection():\n    \"\"\"Simulated database connection\"\"\"\n    return {\"connection\": \"active\", \"pool_size\": 10}\n\ndef get_settings():\n    \"\"\"Application settings\"\"\"\n    return {\n        \"app_name\": \"My API\",\n        \"debug\": True,\n        \"version\": \"1.0.0\"\n    }\n\n@app.get(\"/status\")\nasync def get_status(db = Depends(get_db_connection)):\n    \"\"\"Endpoint receives db connection automatically\"\"\"\n    return {\"db_status\": db[\"connection\"]}\n\n@app.get(\"/info\")\nasync def get_info(\n    db = Depends(get_db_connection),\n    settings = Depends(get_settings)\n):\n    \"\"\"Multiple dependencies in one endpoint\"\"\"\n    return {\n        \"app\": settings[\"app_name\"],\n        \"version\": settings[\"version\"],\n        \"db_pool\": db[\"pool_size\"]\n    }\n\n# Demonstration\nprint(\"=== Simple Dependencies ===\")\nprint(\"\\nDependency functions:\")\nprint(f\"  get_db_connection() -> {get_db_connection()}\")\nprint(f\"  get_settings() -> {get_settings()}\")\n\nprint(\"\\nEndpoints use Depends() to inject these automatically:\")\nprint(\"  @app.get('/status')\")\nprint(\"  async def get_status(db = Depends(get_db_connection)):\")\nprint(\"      return {'db_status': db['connection']}\")\n\nprint(\"\\nBenefits:\")\nprint(\"  - Endpoints don't create their own connections\")\nprint(\"  - Easy to swap dependencies for testing\")\nprint(\"  - Shared logic across multiple endpoints\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Dependencies with Yield (Cleanup)",
              "content": "**Dependencies that need cleanup use `yield`:**\n\nSome resources (database connections, file handles) need to be properly closed after use. Use `yield` instead of `return` to ensure cleanup.\n\n**Pattern:**\n```python\ndef get_resource():\n    resource = acquire_resource()  # Setup\n    try:\n        yield resource              # Provide to endpoint\n    finally:\n        resource.close()            # Cleanup (always runs)\n```\n\n**How It Works:**\n1. Code before `yield` runs before the endpoint\n2. The yielded value is injected into the endpoint\n3. Code after `yield` (in finally) runs after the response\n4. Cleanup runs even if the endpoint raises an exception",
              "code": "from fastapi import FastAPI, Depends\nfrom typing import Generator\n\napp = FastAPI()\n\ndef get_db() -> Generator[dict, None, None]:\n    \"\"\"Database connection with automatic cleanup\"\"\"\n    db = {\"connection\": \"open\", \"queries\": 0}\n    print(\"Opening database connection\")\n    try:\n        yield db\n    finally:\n        print(\"Closing database connection\")\n        db[\"connection\"] = \"closed\"\n\ndef get_file_handler() -> Generator[dict, None, None]:\n    \"\"\"File handler with cleanup\"\"\"\n    file = {\"name\": \"data.txt\", \"status\": \"open\"}\n    print(\"Opening file\")\n    try:\n        yield file\n    finally:\n        print(\"Closing file\")\n        file[\"status\"] = \"closed\"\n\n@app.get(\"/data\")\nasync def get_data(db = Depends(get_db)):\n    \"\"\"Database connection is automatically cleaned up after response\"\"\"\n    db[\"queries\"] += 1\n    return {\"status\": db[\"connection\"], \"queries\": db[\"queries\"]}\n\n@app.get(\"/read-file\")\nasync def read_file(\n    db = Depends(get_db),\n    file = Depends(get_file_handler)\n):\n    \"\"\"Multiple cleanup dependencies\"\"\"\n    return {\n        \"db\": db[\"connection\"],\n        \"file\": file[\"status\"]\n    }\n\n# Demonstration\nprint(\"=== Dependencies with Yield ===\")\nprint(\"\\nSimulating request lifecycle:\")\n\n# Simulate what FastAPI does\ndb_gen = get_db()\ndb = next(db_gen)  # Setup - opens connection\nprint(f\"  Endpoint receives: {db}\")\nprint(\"  Endpoint does its work...\")\n\n# Simulate cleanup after response\ntry:\n    next(db_gen)\nexcept StopIteration:\n    pass\n\nprint(f\"  After cleanup: connection is closed\")\n\nprint(\"\\nKey benefits:\")\nprint(\"  - Resources are ALWAYS cleaned up\")\nprint(\"  - Works even if endpoint raises exception\")\nprint(\"  - Perfect for DB connections, file handles, locks\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Chaining Dependencies",
              "content": "**Dependencies can depend on other dependencies:**\n\nThis creates a chain where each dependency builds on the previous one.\n\n**Common Pattern: Authentication Chain**\n```\nget_settings -> verify_token -> get_current_user\n```\n\n**Benefits:**\n- Each step has a single responsibility\n- Easy to test each step independently\n- Reuse intermediate dependencies\n- Clear error handling at each level",
              "code": "from fastapi import FastAPI, Depends, HTTPException\n\napp = FastAPI()\n\n# Level 1: Basic settings\ndef get_settings():\n    \"\"\"Provide application settings\"\"\"\n    return {\"api_key\": \"secret123\", \"admin_emails\": [\"admin@example.com\"]}\n\n# Level 2: Depends on settings\ndef verify_api_key(settings = Depends(get_settings)):\n    \"\"\"Verify API key (simulated - real app would check header)\"\"\"\n    # In real app: get key from header and compare\n    # For demo, we just return True\n    if settings[\"api_key\"]:\n        return True\n    raise HTTPException(status_code=401, detail=\"Invalid API key\")\n\n# Level 3: Depends on verification\ndef get_current_user(verified = Depends(verify_api_key)):\n    \"\"\"Get user only if API key is valid\"\"\"\n    if not verified:\n        raise HTTPException(status_code=401, detail=\"Not authenticated\")\n    return {\"user_id\": 1, \"name\": \"Alice\", \"role\": \"admin\"}\n\n# Level 4: Depends on current user\ndef require_admin(user = Depends(get_current_user)):\n    \"\"\"Check if user is admin\"\"\"\n    if user[\"role\"] != \"admin\":\n        raise HTTPException(status_code=403, detail=\"Admin required\")\n    return user\n\n@app.get(\"/me\")\nasync def read_user(user = Depends(get_current_user)):\n    \"\"\"Get current user info\"\"\"\n    return user\n\n@app.get(\"/admin/dashboard\")\nasync def admin_dashboard(admin = Depends(require_admin)):\n    \"\"\"Admin-only endpoint\"\"\"\n    return {\"message\": f\"Welcome, {admin['name']}!\", \"admin_panel\": True}\n\n# Demonstration\nprint(\"=== Chaining Dependencies ===\")\nprint(\"\\nDependency chain:\")\nprint(\"  get_settings()\")\nprint(\"      |\")\nprint(\"      v\")\nprint(\"  verify_api_key(settings)\")\nprint(\"      |\")\nprint(\"      v\")\nprint(\"  get_current_user(verified)\")\nprint(\"      |\")\nprint(\"      v\")\nprint(\"  require_admin(user)\")\n\nprint(\"\\nWhen /admin/dashboard is called:\")\nprint(\"  1. get_settings() returns config\")\nprint(\"  2. verify_api_key() checks the key\")\nprint(\"  3. get_current_user() returns user\")\nprint(\"  4. require_admin() checks admin role\")\nprint(\"  5. Endpoint runs with admin user\")\n\nprint(\"\\nSimulating the chain:\")\nsettings = get_settings()\nprint(f\"  Settings: {settings['api_key'][:6]}...\")\nverified = verify_api_key(settings)\nprint(f\"  Verified: {verified}\")\nuser = get_current_user(verified)\nprint(f\"  User: {user['name']} ({user['role']})\")\nadmin = require_admin(user)\nprint(f\"  Admin check passed: {admin['name']}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Class-Based Dependencies",
              "content": "**Use classes for dependencies with state or configuration:**\n\nClasses are useful when:\n- Dependencies have configuration options\n- You need to reuse with different settings\n- Dependencies maintain state across requests\n\n**Pattern: Callable Class**\n```python\nclass MyDependency:\n    def __init__(self, config):\n        self.config = config\n    \n    def __call__(self):\n        return self.config\n```\n\n**Shortcut: Depends() with class**\n```python\n# FastAPI automatically calls the class\n@app.get('/items')\ndef get_items(pagination: Pagination = Depends()):\n    # pagination is an instance of Pagination\n```",
              "code": "from fastapi import FastAPI, Depends, Query\n\napp = FastAPI()\n\nclass Pagination:\n    \"\"\"Reusable pagination parameters\"\"\"\n    \n    def __init__(\n        self,\n        skip: int = Query(0, ge=0, description=\"Items to skip\"),\n        limit: int = Query(10, ge=1, le=100, description=\"Max items\")\n    ):\n        self.skip = skip\n        self.limit = limit\n\nclass DatabaseConfig:\n    \"\"\"Database configuration as dependency\"\"\"\n    \n    def __init__(self, db_name: str = \"default\"):\n        self.db_name = db_name\n        self.connection_string = f\"sqlite:///{db_name}.db\"\n    \n    def __call__(self):\n        \"\"\"Makes the instance callable\"\"\"\n        return {\n            \"db\": self.db_name,\n            \"connection\": self.connection_string\n        }\n\n# Create instances with different configs\ndefault_db = DatabaseConfig(\"main\")\ntest_db = DatabaseConfig(\"test\")\n\n@app.get(\"/items\")\nasync def list_items(pagination: Pagination = Depends()):\n    \"\"\"Pagination is auto-instantiated from query params\"\"\"\n    return {\n        \"skip\": pagination.skip,\n        \"limit\": pagination.limit,\n        \"items\": [f\"item_{i}\" for i in range(pagination.skip, pagination.skip + pagination.limit)]\n    }\n\n@app.get(\"/users\")\nasync def list_users(pagination: Pagination = Depends()):\n    \"\"\"Same pagination class, different endpoint\"\"\"\n    return {\n        \"skip\": pagination.skip,\n        \"limit\": pagination.limit,\n        \"users\": [f\"user_{i}\" for i in range(pagination.skip, pagination.skip + pagination.limit)]\n    }\n\n@app.get(\"/db-info\")\nasync def get_db_info(db = Depends(default_db)):\n    \"\"\"Uses callable class instance\"\"\"\n    return db\n\n# Demonstration\nprint(\"=== Class-Based Dependencies ===\")\n\nprint(\"\\n1. Pagination class:\")\npagination = Pagination()  # Uses defaults\nprint(f\"   Default: skip={pagination.skip}, limit={pagination.limit}\")\n\nprint(\"\\n2. DatabaseConfig as callable:\")\nprint(f\"   default_db() -> {default_db()}\")\nprint(f\"   test_db() -> {test_db()}\")\n\nprint(\"\\n3. How Depends() works with classes:\")\nprint(\"   @app.get('/items')\")\nprint(\"   async def list_items(pagination: Pagination = Depends()):\")\nprint(\"       # FastAPI creates Pagination instance from query params\")\nprint(\"       # ?skip=10&limit=20 -> Pagination(skip=10, limit=20)\")\n\nprint(\"\\n4. Benefits of class-based dependencies:\")\nprint(\"   - Encapsulate related parameters\")\nprint(\"   - Add validation in __init__\")\nprint(\"   - Reuse across multiple endpoints\")\nprint(\"   - Configure different instances for different contexts\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Dependency Injection Key Takeaways",
              "content": "**Core Concepts:**\n- **Depends()** - FastAPI's DI mechanism\n- **Function dependencies** - Return values are injected\n- **Yield dependencies** - For cleanup (db connections, files)\n- **Chained dependencies** - Dependencies can use other dependencies\n- **Class dependencies** - For configurable, stateful dependencies\n\n**Patterns Summary:**\n```python\n# Simple function\ndef get_db():\n    return Database()\n\n# With cleanup\ndef get_db():\n    db = Database()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# Chained\ndef get_user(db = Depends(get_db)):\n    return db.get_user()\n\n# Class-based\nclass Pagination:\n    def __init__(self, skip: int = 0, limit: int = 10):\n        self.skip = skip\n        self.limit = limit\n```\n\n**Best Practices:**\n- Keep dependencies focused on one task\n- Use `yield` for resources needing cleanup\n- Chain dependencies for authentication flows\n- Use classes for configurable dependencies\n- Dependencies are great for cross-cutting concerns"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-di-challenge",
              "title": "Build a Rate Limiter Dependency",
              "description": "Create a rate limiting dependency that tracks requests per user and blocks if they exceed the limit.",
              "instructions": "Build a FastAPI application with a rate limiting dependency:\n\n1. Create a RateLimiter class that:\n   - Tracks request counts per user (use a dictionary)\n   - Has configurable max_requests and time_window\n   - Raises HTTPException(429) if limit exceeded\n\n2. Create a get_current_user dependency that returns a user dict\n\n3. Create a rate_limit dependency that:\n   - Depends on get_current_user\n   - Uses the RateLimiter to check/update request count\n   - Returns the user if allowed, raises 429 if not\n\n4. Create endpoints:\n   - GET /public - No rate limiting\n   - GET /api/data - Rate limited endpoint\n   - GET /api/status - Shows current request count",
              "starterCode": "from fastapi import FastAPI, Depends, HTTPException\nfrom datetime import datetime, timedelta\nfrom typing import Dict\n\napp = FastAPI()\n\n# TODO: Create RateLimiter class\n# - __init__(max_requests: int, time_window: int) - window in seconds\n# - check_rate_limit(user_id: str) -> bool - returns True if allowed\n# - get_request_count(user_id: str) -> int\n\nclass RateLimiter:\n    def __init__(self, max_requests: int = 10, time_window: int = 60):\n        pass  # Store config and create request tracking dict\n    \n    def check_rate_limit(self, user_id: str) -> bool:\n        pass  # Check if user is within limit\n    \n    def get_request_count(self, user_id: str) -> int:\n        pass  # Return current count for user\n\n# Create rate limiter instance\nrate_limiter = RateLimiter(max_requests=5, time_window=60)\n\n# TODO: Create get_current_user dependency\n# Returns: {\"user_id\": \"user123\", \"name\": \"Test User\"}\n\ndef get_current_user():\n    pass\n\n# TODO: Create rate_limit dependency\n# - Depends on get_current_user\n# - Checks rate limit, raises HTTPException(429) if exceeded\n# - Returns user if allowed\n\ndef rate_limit(user = Depends(get_current_user)):\n    pass\n\n# TODO: Create endpoints\n# GET /public - No rate limiting, returns {\"message\": \"Public endpoint\"}\n# GET /api/data - Rate limited, returns {\"data\": \"Secret data\", \"user\": user[\"name\"]}\n# GET /api/status - Rate limited, returns request count for user\n\n@app.get(\"/public\")\nasync def public_endpoint():\n    pass\n\n@app.get(\"/api/data\")\nasync def get_data(user = Depends(rate_limit)):\n    pass\n\n@app.get(\"/api/status\")\nasync def get_status(user = Depends(rate_limit)):\n    pass",
              "solution": "from fastapi import FastAPI, Depends, HTTPException\nfrom datetime import datetime, timedelta\nfrom typing import Dict, List\n\napp = FastAPI()\n\nclass RateLimiter:\n    \"\"\"Rate limiter using sliding window.\"\"\"\n    \n    def __init__(self, max_requests: int = 10, time_window: int = 60):\n        self.max_requests = max_requests\n        self.time_window = time_window  # seconds\n        self.requests: Dict[str, List[datetime]] = {}\n    \n    def _clean_old_requests(self, user_id: str) -> None:\n        \"\"\"Remove requests outside the time window.\"\"\"\n        if user_id not in self.requests:\n            return\n        \n        cutoff = datetime.now() - timedelta(seconds=self.time_window)\n        self.requests[user_id] = [\n            req_time for req_time in self.requests[user_id]\n            if req_time > cutoff\n        ]\n    \n    def check_rate_limit(self, user_id: str) -> bool:\n        \"\"\"Check if user is within rate limit. Records request if allowed.\"\"\"\n        self._clean_old_requests(user_id)\n        \n        if user_id not in self.requests:\n            self.requests[user_id] = []\n        \n        if len(self.requests[user_id]) >= self.max_requests:\n            return False\n        \n        # Record this request\n        self.requests[user_id].append(datetime.now())\n        return True\n    \n    def get_request_count(self, user_id: str) -> int:\n        \"\"\"Get current request count for user.\"\"\"\n        self._clean_old_requests(user_id)\n        return len(self.requests.get(user_id, []))\n\n# Create rate limiter instance\nrate_limiter = RateLimiter(max_requests=5, time_window=60)\n\ndef get_current_user():\n    \"\"\"Simulated user authentication.\"\"\"\n    # In real app, would extract from JWT token or session\n    return {\"user_id\": \"user123\", \"name\": \"Test User\"}\n\ndef rate_limit(user = Depends(get_current_user)):\n    \"\"\"Rate limiting dependency.\"\"\"\n    if not rate_limiter.check_rate_limit(user[\"user_id\"]):\n        raise HTTPException(\n            status_code=429,\n            detail=f\"Rate limit exceeded. Max {rate_limiter.max_requests} requests per {rate_limiter.time_window} seconds.\"\n        )\n    return user\n\n@app.get(\"/public\")\nasync def public_endpoint():\n    \"\"\"Public endpoint - no rate limiting.\"\"\"\n    return {\"message\": \"Public endpoint\"}\n\n@app.get(\"/api/data\")\nasync def get_data(user = Depends(rate_limit)):\n    \"\"\"Rate limited endpoint.\"\"\"\n    return {\n        \"data\": \"Secret data\",\n        \"user\": user[\"name\"]\n    }\n\n@app.get(\"/api/status\")\nasync def get_status(user = Depends(rate_limit)):\n    \"\"\"Get rate limit status.\"\"\"\n    return {\n        \"user\": user[\"name\"],\n        \"requests_made\": rate_limiter.get_request_count(user[\"user_id\"]),\n        \"max_requests\": rate_limiter.max_requests,\n        \"time_window_seconds\": rate_limiter.time_window\n    }\n\n# Demonstration\nif __name__ == \"__main__\":\n    print(\"=== Rate Limiter Dependency Demo ===\")\n    \n    print(\"\\n1. Testing rate limiter:\")\n    user = get_current_user()\n    print(f\"   User: {user['name']}\")\n    \n    print(\"\\n2. Making requests within limit:\")\n    for i in range(5):\n        allowed = rate_limiter.check_rate_limit(user[\"user_id\"])\n        count = rate_limiter.get_request_count(user[\"user_id\"])\n        print(f\"   Request {i+1}: {'Allowed' if allowed else 'Blocked'} (count: {count})\")\n    \n    print(\"\\n3. Request exceeding limit:\")\n    allowed = rate_limiter.check_rate_limit(user[\"user_id\"])\n    print(f\"   Request 6: {'Allowed' if allowed else 'Blocked - 429 Too Many Requests'}\")\n    \n    print(\"\\nRun with: uvicorn solution:app --reload\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "RateLimiter allows requests within limit",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "RateLimiter blocks requests over limit",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Store request timestamps in a list per user. Clean out timestamps older than time_window."
                },
                {
                  "level": 2,
                  "text": "Use datetime.now() and timedelta(seconds=time_window) to check if requests are within the window."
                },
                {
                  "level": 3,
                  "text": "The rate_limit dependency should call rate_limiter.check_rate_limit(user['user_id']) and raise HTTPException(status_code=429) if it returns False."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not cleaning old requests from the tracking dict",
                  "consequence": "Users stay rate-limited forever",
                  "correction": "Filter out requests older than time_window before checking count"
                },
                {
                  "mistake": "Forgetting to record successful requests",
                  "consequence": "Rate limit never triggers",
                  "correction": "Append datetime.now() to user's request list when allowed"
                },
                {
                  "mistake": "Using return instead of raise for HTTPException",
                  "consequence": "429 status not sent properly",
                  "correction": "Use 'raise HTTPException(status_code=429, detail=...)'"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-sqlalchemy",
          "title": "FastAPI + Async SQLAlchemy 2.0",
          "moduleId": "module-14",
          "order": 6,
          "estimatedMinutes": 50,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "SQLAlchemy 2.0 - Modern ORM",
              "content": "**SQLAlchemy 2.0** represents a major evolution with native async support, improved typing, and a cleaner API.\n\n**What's New in 2.0:**\n\n1. **Native Async Support** - First-class async/await without greenlet hacks\n2. **Mapped Types** - Better type hints with `Mapped[T]` and `mapped_column()`\n3. **DeclarativeBase** - New base class replaces `declarative_base()`\n4. **Unified Query API** - `select()` everywhere, no more `query()`\n\n**Old vs New:**\n\n```python\n# SQLAlchemy 1.x (OLD)\nfrom sqlalchemy.ext.declarative import declarative_base\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = 'users'\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100))\n\n# SQLAlchemy 2.0 (NEW)\nfrom sqlalchemy.orm import DeclarativeBase, Mapped, mapped_column\n\nclass Base(DeclarativeBase):\n    pass\n\nclass User(Base):\n    __tablename__ = 'users'\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(String(100))\n```\n\n**Async Drivers:**\n- **SQLite**: `aiosqlite` (development)\n- **PostgreSQL**: `asyncpg` (production)\n- **MySQL**: `asyncmy` or `aiomysql`\n\n**Connection URLs:**\n```python\n# Async SQLite\n\"sqlite+aiosqlite:///./app.db\"\n\n# Async PostgreSQL\n\"postgresql+asyncpg://user:pass@localhost/dbname\"\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Setting Up Async Engine",
              "content": "**Creating an async database engine for FastAPI:**\n\nThe async engine and session maker are the foundation of async SQLAlchemy.\n\n**Key Components:**\n- `create_async_engine()` - Creates the async database engine\n- `async_sessionmaker` - Factory for creating async sessions\n- `AsyncSession` - The async session type for type hints\n- `get_db()` - Dependency that yields sessions with cleanup\n\n**Important Settings:**\n- `echo=True` - Log all SQL queries (useful for development)\n- `expire_on_commit=False` - Keep object attributes after commit",
              "code": "from sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    AsyncSession,\n    async_sessionmaker\n)\nfrom fastapi import FastAPI, Depends\n\n# For development with SQLite (requires: pip install aiosqlite)\nDATABASE_URL = \"sqlite+aiosqlite:///./finance.db\"\n\n# For production with PostgreSQL (requires: pip install asyncpg)\n# DATABASE_URL = \"postgresql+asyncpg://user:pass@localhost/finance\"\n\n# Create the async engine\nengine = create_async_engine(\n    DATABASE_URL,\n    echo=True  # Log SQL queries (disable in production)\n)\n\n# Create async session factory\nasync_session = async_sessionmaker(\n    engine,\n    expire_on_commit=False  # Keep attributes accessible after commit\n)\n\n# Dependency for FastAPI\nasync def get_db():\n    \"\"\"Yield a database session with automatic cleanup.\"\"\"\n    async with async_session() as session:\n        yield session\n\n# Initialize database tables (call on startup)\nasync def init_db():\n    \"\"\"Create all tables.\"\"\"\n    async with engine.begin() as conn:\n        # Import your Base here\n        # await conn.run_sync(Base.metadata.create_all)\n        pass\n\napp = FastAPI()\n\n@app.on_event(\"startup\")\nasync def startup():\n    await init_db()\n\n# Demonstration\nprint(\"=== Async SQLAlchemy Engine Setup ===\")\nprint(f\"\\nDatabase URL: {DATABASE_URL}\")\nprint(\"\\nKey components:\")\nprint(\"  1. create_async_engine() - Async connection pool\")\nprint(\"  2. async_sessionmaker - Creates AsyncSession instances\")\nprint(\"  3. get_db() - FastAPI dependency with yield\")\nprint(\"\\nUsage in endpoint:\")\nprint(\"  @app.get('/users')\")\nprint(\"  async def get_users(db: AsyncSession = Depends(get_db)):\")\nprint(\"      result = await db.execute(select(User))\")\nprint(\"      return result.scalars().all()\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Defining Models with Mapped Types",
              "content": "**SQLAlchemy 2.0 models use type annotations for column definitions:**\n\n**Mapped Type Benefits:**\n- Full IDE autocomplete support\n- Type checking catches errors early\n- Cleaner, more Pythonic syntax\n- Required vs optional fields are explicit\n\n**Column Patterns:**\n```python\n# Required field\nname: Mapped[str] = mapped_column(String(100))\n\n# Optional field (nullable)\nbio: Mapped[str | None] = mapped_column(String(500), nullable=True)\n\n# With default\ncreated_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n\n# Relationship\nposts: Mapped[list[\"Post\"]] = relationship(back_populates=\"author\")\n```",
              "code": "from sqlalchemy.orm import DeclarativeBase, Mapped, mapped_column, relationship\nfrom sqlalchemy import ForeignKey, String\nfrom datetime import datetime\nfrom typing import List\n\nclass Base(DeclarativeBase):\n    \"\"\"Base class for all models.\"\"\"\n    pass\n\nclass User(Base):\n    \"\"\"User model with typed columns.\"\"\"\n    __tablename__ = \"users\"\n    \n    # Primary key - auto-increment integer\n    id: Mapped[int] = mapped_column(primary_key=True)\n    \n    # Required string fields with max length\n    email: Mapped[str] = mapped_column(String(255), unique=True)\n    name: Mapped[str] = mapped_column(String(100))\n    \n    # Timestamp with default value\n    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n    \n    # One-to-many relationship\n    transactions: Mapped[List[\"Transaction\"]] = relationship(\n        back_populates=\"user\",\n        cascade=\"all, delete-orphan\"  # Delete transactions when user deleted\n    )\n\nclass Transaction(Base):\n    \"\"\"Transaction model linked to User.\"\"\"\n    __tablename__ = \"transactions\"\n    \n    id: Mapped[int] = mapped_column(primary_key=True)\n    amount: Mapped[float]  # No mapped_column needed for simple types\n    category: Mapped[str] = mapped_column(String(50))\n    description: Mapped[str | None] = mapped_column(String(200), nullable=True)\n    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n    \n    # Foreign key to users table\n    user_id: Mapped[int] = mapped_column(ForeignKey(\"users.id\"))\n    \n    # Many-to-one relationship back to User\n    user: Mapped[\"User\"] = relationship(back_populates=\"transactions\")\n\n# Demonstration\nprint(\"=== SQLAlchemy 2.0 Models ===\")\nprint(\"\\nUser model columns:\")\nfor col in User.__table__.columns:\n    print(f\"  {col.name}: {col.type} (nullable={col.nullable})\")\n\nprint(\"\\nTransaction model columns:\")\nfor col in Transaction.__table__.columns:\n    print(f\"  {col.name}: {col.type} (nullable={col.nullable})\")\n\nprint(\"\\nRelationships:\")\nprint(\"  User.transactions -> List[Transaction]\")\nprint(\"  Transaction.user -> User\")\n\nprint(\"\\nKey improvements in 2.0:\")\nprint(\"  - Mapped[type] provides type hints\")\nprint(\"  - mapped_column() replaces Column()\")\nprint(\"  - Optional fields use str | None syntax\")\nprint(\"  - DeclarativeBase replaces declarative_base()\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "CRUD Operations",
              "content": "**Async CRUD operations with SQLAlchemy 2.0:**\n\nAll database operations are now async and use the `select()` function.\n\n**Pattern Changes from 1.x:**\n```python\n# OLD: session.query(User).filter(...)\n# NEW: await session.execute(select(User).where(...))\n\n# OLD: session.query(User).get(id)\n# NEW: await session.get(User, id)\n```\n\n**Result Processing:**\n- `result.scalars()` - Get ORM objects (not rows)\n- `result.scalar_one()` - Get exactly one result (raises if 0 or 2+)\n- `result.scalar_one_or_none()` - Get one or None\n- `result.all()` - Get all as list",
              "code": "from sqlalchemy import select\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom pydantic import BaseModel\n\n# Pydantic schemas for request/response\nclass UserCreate(BaseModel):\n    email: str\n    name: str\n\nclass UserResponse(BaseModel):\n    id: int\n    email: str\n    name: str\n    \n    class Config:\n        from_attributes = True  # Enable ORM mode\n\napp = FastAPI()\n\n# CREATE - Add new user\n@app.post(\"/users/\", response_model=UserResponse)\nasync def create_user(user: UserCreate, db: AsyncSession = Depends(get_db)):\n    \"\"\"Create a new user.\"\"\"\n    db_user = User(**user.model_dump())\n    db.add(db_user)\n    await db.commit()\n    await db.refresh(db_user)  # Reload to get generated id\n    return db_user\n\n# READ - Get single user\n@app.get(\"/users/{user_id}\", response_model=UserResponse)\nasync def get_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    \"\"\"Get user by ID.\"\"\"\n    result = await db.execute(\n        select(User).where(User.id == user_id)\n    )\n    user = result.scalar_one_or_none()\n    \n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    return user\n\n# READ - Get all users\n@app.get(\"/users/\", response_model=list[UserResponse])\nasync def get_users(\n    skip: int = 0,\n    limit: int = 100,\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Get all users with pagination.\"\"\"\n    result = await db.execute(\n        select(User).offset(skip).limit(limit)\n    )\n    return result.scalars().all()\n\n# UPDATE - Modify user\n@app.put(\"/users/{user_id}\", response_model=UserResponse)\nasync def update_user(\n    user_id: int,\n    user_update: UserCreate,\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Update user by ID.\"\"\"\n    result = await db.execute(\n        select(User).where(User.id == user_id)\n    )\n    user = result.scalar_one_or_none()\n    \n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    user.email = user_update.email\n    user.name = user_update.name\n    await db.commit()\n    await db.refresh(user)\n    return user\n\n# DELETE - Remove user\n@app.delete(\"/users/{user_id}\")\nasync def delete_user(user_id: int, db: AsyncSession = Depends(get_db)):\n    \"\"\"Delete user by ID.\"\"\"\n    result = await db.execute(\n        select(User).where(User.id == user_id)\n    )\n    user = result.scalar_one_or_none()\n    \n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    await db.delete(user)\n    await db.commit()\n    return {\"message\": \"User deleted\"}\n\n# Demonstration\nprint(\"=== Async CRUD Operations ===\")\nprint(\"\\nEndpoints:\")\nprint(\"  POST   /users/         - Create user\")\nprint(\"  GET    /users/{id}     - Get single user\")\nprint(\"  GET    /users/         - Get all users\")\nprint(\"  PUT    /users/{id}     - Update user\")\nprint(\"  DELETE /users/{id}     - Delete user\")\n\nprint(\"\\nKey patterns:\")\nprint(\"  - select(Model).where(...) for queries\")\nprint(\"  - result.scalar_one_or_none() for single row\")\nprint(\"  - result.scalars().all() for multiple rows\")\nprint(\"  - await db.commit() after changes\")\nprint(\"  - await db.refresh(obj) to reload\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Relationships and Eager Loading",
              "content": "**Loading related data efficiently with selectinload:**\n\n**The N+1 Problem:**\nWithout eager loading, accessing relationships causes extra queries:\n```python\nusers = await get_all_users()  # 1 query\nfor user in users:\n    print(user.transactions)   # N additional queries!\n```\n\n**Solution: Eager Loading Strategies:**\n- `selectinload()` - Separate SELECT IN query (best for collections)\n- `joinedload()` - JOIN in same query (best for single objects)\n- `subqueryload()` - Subquery (alternative to selectinload)\n\n**When to Use Each:**\n```python\n# For one-to-many (User -> Transactions)\nselectinload(User.transactions)\n\n# For many-to-one (Transaction -> User)\njoinedload(Transaction.user)\n```",
              "code": "from sqlalchemy import select\nfrom sqlalchemy.orm import selectinload, joinedload\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom fastapi import FastAPI, Depends\nfrom pydantic import BaseModel\nfrom typing import List\n\n# Response schemas with nested data\nclass TransactionResponse(BaseModel):\n    id: int\n    amount: float\n    category: str\n    \n    class Config:\n        from_attributes = True\n\nclass UserWithTransactions(BaseModel):\n    id: int\n    name: str\n    email: str\n    transactions: List[TransactionResponse]\n    \n    class Config:\n        from_attributes = True\n\napp = FastAPI()\n\n# Get user with all transactions (eager loaded)\n@app.get(\"/users/{user_id}/transactions\", response_model=UserWithTransactions)\nasync def get_user_with_transactions(\n    user_id: int,\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Get user with all their transactions in ONE query.\"\"\"\n    result = await db.execute(\n        select(User)\n        .options(selectinload(User.transactions))  # Eager load!\n        .where(User.id == user_id)\n    )\n    user = result.scalar_one_or_none()\n    \n    if not user:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    return user\n\n# Get all users with their transactions\n@app.get(\"/users/with-transactions\", response_model=List[UserWithTransactions])\nasync def get_all_users_with_transactions(\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Get all users with transactions - avoids N+1 queries.\"\"\"\n    result = await db.execute(\n        select(User).options(selectinload(User.transactions))\n    )\n    return result.scalars().all()\n\n# Get transaction with user info\n@app.get(\"/transactions/{tx_id}\")\nasync def get_transaction_with_user(\n    tx_id: int,\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Get transaction with user - uses joinedload for single object.\"\"\"\n    result = await db.execute(\n        select(Transaction)\n        .options(joinedload(Transaction.user))  # JOIN for single object\n        .where(Transaction.id == tx_id)\n    )\n    transaction = result.scalar_one_or_none()\n    \n    if not transaction:\n        raise HTTPException(status_code=404, detail=\"Transaction not found\")\n    \n    return {\n        \"id\": transaction.id,\n        \"amount\": transaction.amount,\n        \"category\": transaction.category,\n        \"user_name\": transaction.user.name\n    }\n\n# Demonstration\nprint(\"=== Eager Loading Strategies ===\")\n\nprint(\"\\nWithout eager loading (N+1 problem):\")\nprint(\"  Query 1: SELECT * FROM users\")\nprint(\"  Query 2: SELECT * FROM transactions WHERE user_id = 1\")\nprint(\"  Query 3: SELECT * FROM transactions WHERE user_id = 2\")\nprint(\"  ... (one query per user!)\")\n\nprint(\"\\nWith selectinload (2 queries total):\")\nprint(\"  Query 1: SELECT * FROM users\")\nprint(\"  Query 2: SELECT * FROM transactions WHERE user_id IN (1, 2, ...)\")\n\nprint(\"\\nWith joinedload (1 query total):\")\nprint(\"  Query: SELECT * FROM users JOIN transactions ON ...\")\n\nprint(\"\\nBest practices:\")\nprint(\"  - selectinload() for one-to-many (collections)\")\nprint(\"  - joinedload() for many-to-one (single objects)\")\nprint(\"  - Always eager load when you need related data\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Async SQLAlchemy 2.0 Takeaways",
              "content": "**Core Concepts:**\n\n1. **Async Engine Setup:**\n```python\nengine = create_async_engine(DATABASE_URL)\nasync_session = async_sessionmaker(engine)\n```\n\n2. **Mapped Types for Models:**\n```python\nclass User(Base):\n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(String(100))\n```\n\n3. **Select API:**\n```python\nresult = await db.execute(select(User).where(User.id == 1))\nuser = result.scalar_one_or_none()\n```\n\n4. **Eager Loading:**\n```python\nselect(User).options(selectinload(User.transactions))\n```\n\n**Migration from 1.x:**\n- `declarative_base()` -> `DeclarativeBase`\n- `Column(Type)` -> `Mapped[type] = mapped_column()`\n- `session.query()` -> `select()`\n- Sync functions -> async/await everywhere\n\n**Database Drivers:**\n- SQLite: `sqlite+aiosqlite:///./app.db`\n- PostgreSQL: `postgresql+asyncpg://user:pass@host/db`\n\n**Best Practices:**\n- Use `expire_on_commit=False` in sessionmaker\n- Always use `selectinload()` for collections to avoid N+1\n- Use Pydantic's `from_attributes = True` for ORM models\n- Wrap session in async context manager for cleanup"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-sqlalchemy-challenge",
              "title": "Build a Task Manager API with Async SQLAlchemy",
              "description": "Create a FastAPI application with async SQLAlchemy 2.0 that manages tasks organized by projects.",
              "instructions": "Build a task management API with the following requirements:\n\n1. Create two models:\n   - `Project`: id, name (str), description (optional str), created_at\n   - `Task`: id, title (str), completed (bool, default False), project_id (FK), created_at\n\n2. Set up async engine and session for SQLite\n\n3. Create endpoints:\n   - POST /projects/ - Create a new project\n   - GET /projects/{id} - Get project with all its tasks (eager loaded)\n   - POST /projects/{id}/tasks/ - Add task to project\n   - PUT /tasks/{id}/complete - Mark task as completed\n   - GET /projects/ - List all projects with task count\n\n4. Use proper Pydantic schemas for requests and responses",
              "starterCode": "from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession, async_sessionmaker\nfrom sqlalchemy.orm import DeclarativeBase, Mapped, mapped_column, relationship\nfrom sqlalchemy import ForeignKey, String, select\nfrom sqlalchemy.orm import selectinload\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom pydantic import BaseModel\nfrom datetime import datetime\nfrom typing import List\n\n# Database setup\nDATABASE_URL = \"sqlite+aiosqlite:///./tasks.db\"\n\n# TODO: Create engine and async_session\n\n# TODO: Create Base class\n\n# TODO: Create Project model\n# - id: primary key\n# - name: required string\n# - description: optional string\n# - created_at: datetime with default\n# - tasks: relationship to Task\n\n# TODO: Create Task model\n# - id: primary key\n# - title: required string\n# - completed: bool, default False\n# - project_id: foreign key\n# - created_at: datetime with default\n# - project: relationship back to Project\n\n# Pydantic Schemas\nclass ProjectCreate(BaseModel):\n    name: str\n    description: str | None = None\n\nclass TaskCreate(BaseModel):\n    title: str\n\nclass TaskResponse(BaseModel):\n    id: int\n    title: str\n    completed: bool\n    \n    class Config:\n        from_attributes = True\n\nclass ProjectResponse(BaseModel):\n    id: int\n    name: str\n    description: str | None\n    tasks: List[TaskResponse]\n    \n    class Config:\n        from_attributes = True\n\nclass ProjectSummary(BaseModel):\n    id: int\n    name: str\n    task_count: int\n    \n    class Config:\n        from_attributes = True\n\n# TODO: Create get_db dependency\n\napp = FastAPI()\n\n# TODO: Create startup event to initialize database\n\n# TODO: POST /projects/ - Create project\n\n# TODO: GET /projects/{project_id} - Get project with tasks\n\n# TODO: POST /projects/{project_id}/tasks/ - Add task to project\n\n# TODO: PUT /tasks/{task_id}/complete - Mark task completed\n\n# TODO: GET /projects/ - List all projects with task counts",
              "solution": "from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession, async_sessionmaker\nfrom sqlalchemy.orm import DeclarativeBase, Mapped, mapped_column, relationship\nfrom sqlalchemy import ForeignKey, String, select, func\nfrom sqlalchemy.orm import selectinload\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom pydantic import BaseModel\nfrom datetime import datetime\nfrom typing import List\n\n# Database setup\nDATABASE_URL = \"sqlite+aiosqlite:///./tasks.db\"\n\nengine = create_async_engine(DATABASE_URL, echo=True)\nasync_session = async_sessionmaker(engine, expire_on_commit=False)\n\nclass Base(DeclarativeBase):\n    pass\n\nclass Project(Base):\n    __tablename__ = \"projects\"\n    \n    id: Mapped[int] = mapped_column(primary_key=True)\n    name: Mapped[str] = mapped_column(String(100))\n    description: Mapped[str | None] = mapped_column(String(500), nullable=True)\n    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n    \n    tasks: Mapped[List[\"Task\"]] = relationship(\n        back_populates=\"project\",\n        cascade=\"all, delete-orphan\"\n    )\n\nclass Task(Base):\n    __tablename__ = \"tasks\"\n    \n    id: Mapped[int] = mapped_column(primary_key=True)\n    title: Mapped[str] = mapped_column(String(200))\n    completed: Mapped[bool] = mapped_column(default=False)\n    created_at: Mapped[datetime] = mapped_column(default=datetime.utcnow)\n    project_id: Mapped[int] = mapped_column(ForeignKey(\"projects.id\"))\n    \n    project: Mapped[\"Project\"] = relationship(back_populates=\"tasks\")\n\n# Pydantic Schemas\nclass ProjectCreate(BaseModel):\n    name: str\n    description: str | None = None\n\nclass TaskCreate(BaseModel):\n    title: str\n\nclass TaskResponse(BaseModel):\n    id: int\n    title: str\n    completed: bool\n    \n    class Config:\n        from_attributes = True\n\nclass ProjectResponse(BaseModel):\n    id: int\n    name: str\n    description: str | None\n    tasks: List[TaskResponse]\n    \n    class Config:\n        from_attributes = True\n\nclass ProjectSummary(BaseModel):\n    id: int\n    name: str\n    task_count: int\n\nasync def get_db():\n    async with async_session() as session:\n        yield session\n\napp = FastAPI()\n\n@app.on_event(\"startup\")\nasync def startup():\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n\n@app.post(\"/projects/\", response_model=ProjectResponse)\nasync def create_project(\n    project: ProjectCreate,\n    db: AsyncSession = Depends(get_db)\n):\n    db_project = Project(**project.model_dump())\n    db.add(db_project)\n    await db.commit()\n    await db.refresh(db_project)\n    return db_project\n\n@app.get(\"/projects/{project_id}\", response_model=ProjectResponse)\nasync def get_project(\n    project_id: int,\n    db: AsyncSession = Depends(get_db)\n):\n    result = await db.execute(\n        select(Project)\n        .options(selectinload(Project.tasks))\n        .where(Project.id == project_id)\n    )\n    project = result.scalar_one_or_none()\n    if not project:\n        raise HTTPException(status_code=404, detail=\"Project not found\")\n    return project\n\n@app.post(\"/projects/{project_id}/tasks/\", response_model=TaskResponse)\nasync def create_task(\n    project_id: int,\n    task: TaskCreate,\n    db: AsyncSession = Depends(get_db)\n):\n    # Verify project exists\n    result = await db.execute(\n        select(Project).where(Project.id == project_id)\n    )\n    if not result.scalar_one_or_none():\n        raise HTTPException(status_code=404, detail=\"Project not found\")\n    \n    db_task = Task(**task.model_dump(), project_id=project_id)\n    db.add(db_task)\n    await db.commit()\n    await db.refresh(db_task)\n    return db_task\n\n@app.put(\"/tasks/{task_id}/complete\", response_model=TaskResponse)\nasync def complete_task(\n    task_id: int,\n    db: AsyncSession = Depends(get_db)\n):\n    result = await db.execute(\n        select(Task).where(Task.id == task_id)\n    )\n    task = result.scalar_one_or_none()\n    if not task:\n        raise HTTPException(status_code=404, detail=\"Task not found\")\n    \n    task.completed = True\n    await db.commit()\n    await db.refresh(task)\n    return task\n\n@app.get(\"/projects/\", response_model=List[ProjectSummary])\nasync def list_projects(db: AsyncSession = Depends(get_db)):\n    result = await db.execute(\n        select(Project).options(selectinload(Project.tasks))\n    )\n    projects = result.scalars().all()\n    return [\n        ProjectSummary(\n            id=p.id,\n            name=p.name,\n            task_count=len(p.tasks)\n        )\n        for p in projects\n    ]\n\n# Demonstration\nif __name__ == \"__main__\":\n    print(\"=== Task Manager API ===\")\n    print(\"\\nEndpoints:\")\n    print(\"  POST /projects/              - Create project\")\n    print(\"  GET  /projects/{id}          - Get project with tasks\")\n    print(\"  POST /projects/{id}/tasks/   - Add task to project\")\n    print(\"  PUT  /tasks/{id}/complete    - Mark task done\")\n    print(\"  GET  /projects/              - List all with counts\")\n    print(\"\\nRun with: uvicorn solution:app --reload\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Project and Task models are properly defined with Mapped types",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "GET /projects/{id} uses selectinload for eager loading",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use `Mapped[str | None]` for optional fields and `mapped_column(nullable=True)`."
                },
                {
                  "level": 2,
                  "text": "For the list endpoint with task counts, you can either use selectinload and count in Python, or use a SQL COUNT subquery."
                },
                {
                  "level": 3,
                  "text": "Remember to call `await db.refresh(obj)` after commit to reload generated values like id."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to use selectinload when fetching projects with tasks",
                  "consequence": "Causes N+1 query problem or lazy loading errors in async",
                  "correction": "Always use .options(selectinload(Project.tasks)) when you need related data"
                },
                {
                  "mistake": "Not checking if project exists before adding task",
                  "consequence": "Foreign key error or confusing error message",
                  "correction": "Query for project first and return 404 if not found"
                },
                {
                  "mistake": "Missing from_attributes = True in Pydantic Config",
                  "consequence": "Pydantic cannot convert SQLAlchemy models to response",
                  "correction": "Add class Config with from_attributes = True in all response schemas"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-alembic",
          "title": "Database Migrations with Alembic",
          "moduleId": "module-14",
          "order": 7,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What are Database Migrations?",
              "content": "**Database Migrations = Version Control for Your Database Schema**\n\nAs your application evolves, your database schema changes too. Migrations let you:\n\n**Why Migrations Matter:**\n\n1. **Track Changes** - Every schema change is versioned and documented\n2. **Team Collaboration** - Multiple developers can evolve the schema safely\n3. **Reproducibility** - Recreate any database state from scratch\n4. **Rollback** - Undo changes if something goes wrong\n5. **Production Safety** - Apply changes reliably across environments\n\n**Without Migrations (Bad):**\n```python\n# Editing production database directly\nBase.metadata.create_all(engine)  # Only creates, never updates!\n```\n\n**With Migrations (Good):**\n```bash\n# Tracked, reversible, safe\nalembic revision --autogenerate -m \"add user email column\"\nalembic upgrade head\n```\n\n**Alembic is SQLAlchemy's Migration Tool:**\n- Created by the same author (Mike Bayer)\n- Generates migrations from model changes automatically\n- Supports async SQLAlchemy\n- Up/down migrations for safe rollbacks\n\n**Up vs Down Migrations:**\n\n```python\ndef upgrade():    # Apply changes\n    op.add_column('users', sa.Column('email', sa.String()))\n\ndef downgrade():  # Reverse changes\n    op.drop_column('users', 'email')\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Setting Up Alembic",
              "content": "**Installing and initializing Alembic for your FastAPI project:**\n\nAlembic provides templates for different setups. For async SQLAlchemy, use the async template.\n\n**Folder Structure After Init:**\n```\nproject/\n‚îú‚îÄ‚îÄ alembic.ini           # Alembic config (database URL, etc.)\n‚îú‚îÄ‚îÄ migrations/\n‚îÇ   ‚îú‚îÄ‚îÄ env.py            # Migration environment setup\n‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako    # Template for new migrations\n‚îÇ   ‚îî‚îÄ‚îÄ versions/         # Migration files go here\n‚îÇ       ‚îî‚îÄ‚îÄ abc123_initial.py\n```\n\n**Key Files:**\n- `alembic.ini` - Main configuration (edit database URL here)\n- `env.py` - Python code that runs migrations (customize for async)\n- `versions/` - Each migration is a Python file with up/down functions",
              "code": "# Installation\n# Using uv (recommended)\n# uv add alembic\n\n# Or using pip\n# pip install alembic\n\n# Initialize Alembic with async template\n# alembic init -t async migrations\n\nimport os\n\nprint(\"=== Alembic Project Structure ===\")\nprint(\"\"\"\nAfter running: alembic init -t async migrations\n\nproject/\n‚îú‚îÄ‚îÄ alembic.ini           # Main config file\n‚îú‚îÄ‚îÄ migrations/\n‚îÇ   ‚îú‚îÄ‚îÄ env.py            # Migration environment\n‚îÇ   ‚îú‚îÄ‚îÄ script.py.mako    # Migration template\n‚îÇ   ‚îî‚îÄ‚îÄ versions/         # Migration files\n‚îÇ       ‚îî‚îÄ‚îÄ (empty initially)\n‚îÇ\n‚îú‚îÄ‚îÄ app/\n‚îÇ   ‚îú‚îÄ‚îÄ models.py         # Your SQLAlchemy models\n‚îÇ   ‚îî‚îÄ‚îÄ config.py         # Database URL, settings\n‚îÇ\n‚îî‚îÄ‚îÄ main.py               # FastAPI app\n\"\"\")\n\nprint(\"\\n=== alembic.ini Key Settings ===\")\nprint(\"\"\"\n[alembic]\nscript_location = migrations\nprepend_sys_path = .\n\n# Database URL (or set in env.py)\nsqlalchemy.url = sqlite+aiosqlite:///./app.db\n\n[logging]\n# Logging configuration\n\"\"\")\n\nprint(\"\\n=== Common Commands ===\")\nprint(\"\"\"\n# Create new migration from model changes\nalembic revision --autogenerate -m \"add users table\"\n\n# Apply all pending migrations\nalembic upgrade head\n\n# Rollback one step\nalembic downgrade -1\n\n# Show current revision\nalembic current\n\n# Show migration history\nalembic history\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Configuring env.py for Async",
              "content": "**Configuring Alembic for async SQLAlchemy 2.0:**\n\nThe `env.py` file needs to be configured to:\n1. Import your models (so Alembic sees them)\n2. Use async engine creation\n3. Connect to your database URL from config\n\n**Key Imports:**\n- `async_engine_from_config` - Creates async engine from alembic.ini\n- `target_metadata` - Set to `Base.metadata` so autogenerate works\n\n**Important:** All your models must be imported before `target_metadata` is set!",
              "code": "# migrations/env.py\n\nfrom logging.config import fileConfig\nfrom sqlalchemy import pool\nfrom sqlalchemy.ext.asyncio import async_engine_from_config\nfrom alembic import context\nimport asyncio\n\n# Import your models - REQUIRED for autogenerate to work!\n# This imports Base.metadata with all model information\nfrom app.models import Base\nfrom app.config import settings\n\n# Alembic Config object\nconfig = context.config\n\n# Set database URL from your app settings\nconfig.set_main_option(\"sqlalchemy.url\", settings.database_url)\n\n# Set up logging\nif config.config_file_name is not None:\n    fileConfig(config.config_file_name)\n\n# This is the metadata Alembic uses to detect changes\n# It MUST reference your models' Base.metadata\ntarget_metadata = Base.metadata\n\ndef run_migrations_offline() -> None:\n    \"\"\"Run migrations without a database connection.\n    \n    Used for generating SQL scripts.\n    \"\"\"\n    url = config.get_main_option(\"sqlalchemy.url\")\n    context.configure(\n        url=url,\n        target_metadata=target_metadata,\n        literal_binds=True,\n        dialect_opts={\"paramstyle\": \"named\"},\n    )\n\n    with context.begin_transaction():\n        context.run_migrations()\n\ndef do_run_migrations(connection) -> None:\n    \"\"\"Run migrations with a database connection.\"\"\"\n    context.configure(\n        connection=connection,\n        target_metadata=target_metadata\n    )\n\n    with context.begin_transaction():\n        context.run_migrations()\n\nasync def run_async_migrations() -> None:\n    \"\"\"Create async engine and run migrations.\"\"\"\n    connectable = async_engine_from_config(\n        config.get_section(config.config_ini_section, {}),\n        prefix=\"sqlalchemy.\",\n        poolclass=pool.NullPool,\n    )\n\n    async with connectable.connect() as connection:\n        await connection.run_sync(do_run_migrations)\n\n    await connectable.dispose()\n\ndef run_migrations_online() -> None:\n    \"\"\"Run migrations in 'online' mode.\"\"\"\n    asyncio.run(run_async_migrations())\n\nif context.is_offline_mode():\n    run_migrations_offline()\nelse:\n    run_migrations_online()\n\n# Demonstration output\nprint(\"=== env.py Configuration ===\")\nprint(\"\\nKey points:\")\nprint(\"1. Import ALL your models before setting target_metadata\")\nprint(\"2. Use async_engine_from_config for async support\")\nprint(\"3. run_sync() bridges async engine with sync Alembic\")\nprint(\"4. Set database URL from your app config\")\nprint(\"\\nCommon issues:\")\nprint(\"- 'No changes detected' = Models not imported\")\nprint(\"- Connection errors = Wrong database URL\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Creating and Running Migrations",
              "content": "**Alembic CLI commands for managing migrations:**\n\n**Workflow:**\n1. Make changes to your SQLAlchemy models\n2. Run `alembic revision --autogenerate -m \"description\"`\n3. Review the generated migration file\n4. Run `alembic upgrade head` to apply\n\n**Always Review Autogenerated Migrations!**\nAlembic can detect:\n- New tables/columns\n- Dropped tables/columns\n- Changed column types\n- New indexes/constraints\n\nAlembic CANNOT detect:\n- Column renames (sees as drop + add)\n- Table renames\n- Some constraint changes",
              "code": "# === Creating and Running Migrations ===\n\n# STEP 1: Generate migration from model changes\n# alembic revision --autogenerate -m \"add transactions table\"\n\n# This creates a file like:\n# migrations/versions/abc123def456_add_transactions_table.py\n\n# STEP 2: Review the migration (ALWAYS DO THIS!)\n# Open the file and check upgrade() and downgrade()\n\n# STEP 3: Apply all pending migrations\n# alembic upgrade head\n\n# === Other Useful Commands ===\n\n# Show current database revision\n# alembic current\n\n# Show migration history\n# alembic history\n\n# Show verbose history with dates\n# alembic history --verbose\n\n# Upgrade to specific revision\n# alembic upgrade abc123\n\n# Downgrade one step\n# alembic downgrade -1\n\n# Downgrade to specific revision\n# alembic downgrade abc123\n\n# Downgrade all the way (careful!)\n# alembic downgrade base\n\n# Show SQL without running (dry run)\n# alembic upgrade head --sql\n\n# Create empty migration (for manual edits)\n# alembic revision -m \"custom data migration\"\n\nprint(\"=== Alembic Migration Commands ===\")\n\nprint(\"\\n--- Creating Migrations ---\")\nprint(\"alembic revision --autogenerate -m 'message'  # From model changes\")\nprint(\"alembic revision -m 'message'                 # Empty migration\")\n\nprint(\"\\n--- Applying Migrations ---\")\nprint(\"alembic upgrade head      # Apply all pending\")\nprint(\"alembic upgrade +1        # Apply next one\")\nprint(\"alembic upgrade abc123    # Upgrade to specific revision\")\n\nprint(\"\\n--- Rolling Back ---\")\nprint(\"alembic downgrade -1      # Rollback one step\")\nprint(\"alembic downgrade abc123  # Rollback to specific revision\")\nprint(\"alembic downgrade base    # Rollback everything (careful!)\")\n\nprint(\"\\n--- Inspection ---\")\nprint(\"alembic current           # Show current revision\")\nprint(\"alembic history           # Show migration history\")\nprint(\"alembic heads             # Show latest revisions\")\nprint(\"alembic show abc123       # Show specific migration\")\n\nprint(\"\\n--- Dry Run ---\")\nprint(\"alembic upgrade head --sql   # Show SQL without running\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Migration File Anatomy",
              "content": "**Understanding a migration file:**\n\nEvery migration file contains:\n1. **Docstring** - Description and metadata\n2. **Revision IDs** - Unique ID and link to previous migration\n3. **upgrade()** - Function to apply the migration\n4. **downgrade()** - Function to reverse the migration\n\n**Common Operations:**\n```python\n# Create table\nop.create_table('name', columns...)\n\n# Drop table\nop.drop_table('name')\n\n# Add column\nop.add_column('table', sa.Column('name', sa.Type()))\n\n# Drop column\nop.drop_column('table', 'column_name')\n\n# Create index\nop.create_index('ix_name', 'table', ['column'])\n\n# Add foreign key\nop.create_foreign_key('fk_name', 'source', 'target', ['col'], ['id'])\n```",
              "code": "# migrations/versions/abc123def456_add_transactions.py\n\n\"\"\"add transactions table\n\nRevision ID: abc123def456\nRevises: 9876fedcba  (previous migration, None if first)\nCreate Date: 2025-01-15 10:30:00.000000\n\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\n\n# Revision identifiers\nrevision = 'abc123def456'\ndown_revision = '9876fedcba'  # None if this is the first migration\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    \"\"\"Apply the migration - add transactions table.\"\"\"\n    \n    # Create the transactions table\n    op.create_table(\n        'transactions',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('amount', sa.Float(), nullable=False),\n        sa.Column('category', sa.String(50), nullable=False),\n        sa.Column('description', sa.String(200), nullable=True),\n        sa.Column('user_id', sa.Integer(), nullable=False),\n        sa.Column(\n            'created_at',\n            sa.DateTime(),\n            server_default=sa.func.now()\n        ),\n        # Foreign key constraint\n        sa.ForeignKeyConstraint(['user_id'], ['users.id'], ondelete='CASCADE'),\n    )\n    \n    # Create index for faster queries\n    op.create_index(\n        'ix_transactions_user_id',\n        'transactions',\n        ['user_id']\n    )\n    \n    # Create index for category filtering\n    op.create_index(\n        'ix_transactions_category',\n        'transactions',\n        ['category']\n    )\n\n\ndef downgrade() -> None:\n    \"\"\"Reverse the migration - remove transactions table.\"\"\"\n    \n    # Drop indexes first (reverse order of creation)\n    op.drop_index('ix_transactions_category', 'transactions')\n    op.drop_index('ix_transactions_user_id', 'transactions')\n    \n    # Drop the table\n    op.drop_table('transactions')\n\n\n# Demonstration\nprint(\"=== Migration File Structure ===\")\nprint(\"\"\"\nKey components:\n\n1. DOCSTRING - Description and metadata\n   '''add transactions table\n   Revision ID: abc123\n   Revises: prev123\n   '''\n\n2. REVISION IDS\n   revision = 'abc123'        # This migration's ID\n   down_revision = 'prev123'  # Previous migration (chain)\n\n3. UPGRADE FUNCTION\n   def upgrade():\n       op.create_table(...)\n       op.add_column(...)\n       op.create_index(...)\n\n4. DOWNGRADE FUNCTION (reverse of upgrade!)\n   def downgrade():\n       op.drop_index(...)   # Reverse order!\n       op.drop_column(...)\n       op.drop_table(...)\n\"\"\")\n\nprint(\"\\nCommon operations:\")\nprint(\"  op.create_table()     / op.drop_table()\")\nprint(\"  op.add_column()       / op.drop_column()\")\nprint(\"  op.alter_column()     - Change column properties\")\nprint(\"  op.create_index()     / op.drop_index()\")\nprint(\"  op.create_foreign_key() / op.drop_constraint()\")\n\nprint(\"\\nBest practices:\")\nprint(\"  - Always test downgrade before deploying\")\nprint(\"  - Review autogenerated migrations\")\nprint(\"  - Use descriptive migration messages\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Database Migration Takeaways",
              "content": "**Core Concepts:**\n\n1. **Never Edit Production Databases Directly**\n   - Always use migrations for schema changes\n   - `Base.metadata.create_all()` is only for development\n\n2. **Migration Workflow:**\n```bash\n# 1. Change your models\n# 2. Generate migration\nalembic revision --autogenerate -m \"description\"\n# 3. Review the migration file!\n# 4. Apply migration\nalembic upgrade head\n```\n\n3. **Key Commands:**\n   - `alembic upgrade head` - Apply all migrations\n   - `alembic downgrade -1` - Rollback one step\n   - `alembic current` - Show current revision\n   - `alembic history` - Show all migrations\n\n4. **Always Test Downgrades:**\n```bash\nalembic upgrade head    # Apply\nalembic downgrade -1    # Test rollback\nalembic upgrade head    # Re-apply\n```\n\n5. **env.py Configuration:**\n   - Import ALL models before `target_metadata`\n   - Use `async_engine_from_config` for async\n   - Set database URL from your app config\n\n**Common Pitfalls:**\n- Forgetting to import models (no changes detected)\n- Not reviewing autogenerated migrations\n- Column renames are detected as drop+add\n- Data migrations need manual handling"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-alembic-challenge",
              "title": "Write a Migration for User Profiles",
              "description": "Create an Alembic migration that adds a user_profiles table with proper relationships and indexes.",
              "instructions": "Write the upgrade() and downgrade() functions for a migration that:\n\n1. Creates a `user_profiles` table with:\n   - `id` (Integer, primary key)\n   - `user_id` (Integer, foreign key to users.id, unique)\n   - `bio` (String(500), nullable)\n   - `avatar_url` (String(255), nullable)\n   - `location` (String(100), nullable)\n   - `website` (String(255), nullable)\n   - `created_at` (DateTime, server default now)\n   - `updated_at` (DateTime, nullable)\n\n2. Adds a foreign key constraint with CASCADE delete\n\n3. Creates an index on `user_id` for faster lookups\n\n4. The downgrade() should reverse everything in the correct order",
              "starterCode": "\"\"\"add user_profiles table\n\nRevision ID: profile001\nRevises: users001\nCreate Date: 2025-01-15\n\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\n\nrevision = 'profile001'\ndown_revision = 'users001'\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    \"\"\"Create user_profiles table with FK to users.\"\"\"\n    # TODO: Create the user_profiles table\n    # - id: Integer primary key\n    # - user_id: Integer FK to users.id (unique, not null)\n    # - bio: String(500), nullable\n    # - avatar_url: String(255), nullable  \n    # - location: String(100), nullable\n    # - website: String(255), nullable\n    # - created_at: DateTime with server_default\n    # - updated_at: DateTime, nullable\n    \n    # TODO: Add foreign key with CASCADE delete\n    \n    # TODO: Create index on user_id\n    pass\n\n\ndef downgrade() -> None:\n    \"\"\"Remove user_profiles table.\"\"\"\n    # TODO: Drop in reverse order of creation\n    # 1. Drop index\n    # 2. Drop table (FK is dropped with table)\n    pass",
              "solution": "\"\"\"add user_profiles table\n\nRevision ID: profile001\nRevises: users001\nCreate Date: 2025-01-15\n\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\n\nrevision = 'profile001'\ndown_revision = 'users001'\nbranch_labels = None\ndepends_on = None\n\n\ndef upgrade() -> None:\n    \"\"\"Create user_profiles table with FK to users.\"\"\"\n    op.create_table(\n        'user_profiles',\n        sa.Column('id', sa.Integer(), primary_key=True),\n        sa.Column('user_id', sa.Integer(), nullable=False, unique=True),\n        sa.Column('bio', sa.String(500), nullable=True),\n        sa.Column('avatar_url', sa.String(255), nullable=True),\n        sa.Column('location', sa.String(100), nullable=True),\n        sa.Column('website', sa.String(255), nullable=True),\n        sa.Column(\n            'created_at',\n            sa.DateTime(),\n            server_default=sa.func.now()\n        ),\n        sa.Column('updated_at', sa.DateTime(), nullable=True),\n        # Foreign key with cascade delete\n        sa.ForeignKeyConstraint(\n            ['user_id'],\n            ['users.id'],\n            ondelete='CASCADE'\n        ),\n    )\n    \n    # Index for faster user lookups\n    op.create_index(\n        'ix_user_profiles_user_id',\n        'user_profiles',\n        ['user_id'],\n        unique=True  # Enforce one profile per user at DB level\n    )\n\n\ndef downgrade() -> None:\n    \"\"\"Remove user_profiles table.\"\"\"\n    # Drop index first\n    op.drop_index('ix_user_profiles_user_id', 'user_profiles')\n    \n    # Drop table (FK constraint is dropped with table)\n    op.drop_table('user_profiles')\n\n\n# Demonstration\nif __name__ == \"__main__\":\n    print(\"=== Migration: Add User Profiles ===\")\n    print(\"\\nupgrade() creates:\")\n    print(\"  - user_profiles table with all columns\")\n    print(\"  - Foreign key to users with CASCADE delete\")\n    print(\"  - Unique index on user_id\")\n    print(\"\\ndowngrade() removes (reverse order):\")\n    print(\"  1. Drop index\")\n    print(\"  2. Drop table (FK removed automatically)\")\n    print(\"\\nRun with:\")\n    print(\"  alembic upgrade profile001\")\n    print(\"  alembic downgrade users001\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "upgrade() creates user_profiles table with all required columns",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "downgrade() drops index before dropping table",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use op.create_table() with sa.Column() for each column. Include ForeignKeyConstraint in the table definition."
                },
                {
                  "level": 2,
                  "text": "For CASCADE delete, add ondelete='CASCADE' to ForeignKeyConstraint."
                },
                {
                  "level": 3,
                  "text": "In downgrade(), always drop indexes before dropping the table they belong to."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Dropping table before dropping its indexes in downgrade()",
                  "consequence": "Migration fails because index references a non-existent table",
                  "correction": "Always drop indexes first, then drop the table"
                },
                {
                  "mistake": "Forgetting server_default for created_at timestamp",
                  "consequence": "Existing rows would have NULL created_at values",
                  "correction": "Use server_default=sa.func.now() for automatic timestamps"
                },
                {
                  "mistake": "Not making user_id unique in a one-to-one relationship",
                  "consequence": "Multiple profiles could be created for the same user",
                  "correction": "Add unique=True to the column or create a unique index"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-sqlite",
          "title": "SQLite for Development",
          "moduleId": "module-14",
          "order": 8,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why SQLite for Development?",
              "content": "**SQLite is the Perfect Development Database**\n\nSQLite offers unique advantages for development and prototyping:\n\n**Zero Configuration:**\n- No database server to install or configure\n- Just a single file on disk\n- Ships with Python (sqlite3 module built-in)\n\n**Perfect for Learning:**\n```python\n# Your entire database is one file!\nimport sqlite3\nconn = sqlite3.connect('my_app.db')  # That's it!\n```\n\n**Great for Prototyping:**\n- Quick to set up, quick to tear down\n- Easy to reset (just delete the file)\n- No credentials or connection strings to manage\n- Works everywhere Python runs\n\n**Limitations to Know:**\n- **Single writer** - Only one process can write at a time\n- **No concurrent writes** - Writes block each other\n- **Limited scale** - Best for small/medium datasets\n- **No network access** - File-based, not client-server\n\n**When SQLite Works Great:**\n- Local development and testing\n- Small to medium applications\n- Prototypes and MVPs\n- Desktop and mobile apps\n- Data under a few GB\n\n**Production Considerations:**\nSQLite can work in production for read-heavy, single-user applications, but most web apps benefit from PostgreSQL or MySQL in production."
            },
            {
              "type": "EXAMPLE",
              "title": "SQLite with aiosqlite",
              "content": "**Async SQLite for FastAPI:**\n\nFastAPI is async by default, so we need async database access. The `aiosqlite` package provides async support for SQLite.\n\n**Installation:**\n```bash\n# Using uv (recommended)\nuv add aiosqlite\n\n# Or using pip\npip install aiosqlite\n```\n\n**Key Concepts:**\n\n1. **Async Engine Creation:**\n```python\nfrom sqlalchemy.ext.asyncio import create_async_engine\n\nengine = create_async_engine(\n    \"sqlite+aiosqlite:///./app.db\",\n    echo=True  # Log SQL statements\n)\n```\n\n2. **SQLite-specific Connection Args:**\n```python\nconnect_args={\"check_same_thread\": False}\n```\nThis is required because SQLite by default only allows access from the creating thread.\n\n3. **The URL Format:**\n- `sqlite+aiosqlite:///./app.db` - Relative path\n- `sqlite+aiosqlite:////absolute/path/app.db` - Absolute path\n- `sqlite+aiosqlite:///:memory:` - In-memory database",
              "code": "# For async FastAPI with SQLite\n# Install: uv add aiosqlite\n\nfrom sqlalchemy.ext.asyncio import create_async_engine\n\n# SQLite URL for async\nDATABASE_URL = \"sqlite+aiosqlite:///./app.db\"\n\nengine = create_async_engine(\n    DATABASE_URL,\n    echo=True,  # Log SQL for debugging\n    connect_args={\"check_same_thread\": False}  # Required for SQLite\n)\n\nprint(\"=== SQLite + aiosqlite Configuration ===\")\nprint(f\"Database URL: {DATABASE_URL}\")\nprint(\"\")\nprint(\"Key points:\")\nprint(\"  - 'sqlite+aiosqlite' = async SQLite driver\")\nprint(\"  - '///./app.db' = relative path (3 slashes)\")\nprint(\"  - 'echo=True' = log all SQL (great for debugging)\")\nprint(\"  - 'check_same_thread=False' = allow multi-thread access\")\nprint(\"\")\nprint(\"Alternative URLs:\")\nprint(\"  sqlite+aiosqlite:///:memory:      # In-memory (tests)\")\nprint(\"  sqlite+aiosqlite:////tmp/app.db   # Absolute path\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Development Database Setup",
              "content": "**Complete async database setup for FastAPI:**\n\nThis pattern sets up:\n1. Async engine for SQLite\n2. Async session factory\n3. Database initialization function\n4. FastAPI dependency for sessions\n\n**Project Structure:**\n```\nproject/\n‚îú‚îÄ‚îÄ app/\n‚îÇ   ‚îú‚îÄ‚îÄ database.py    # This file\n‚îÇ   ‚îú‚îÄ‚îÄ models.py      # SQLAlchemy models\n‚îÇ   ‚îî‚îÄ‚îÄ main.py        # FastAPI app\n‚îî‚îÄ‚îÄ dev.db             # Created automatically\n```",
              "code": "# database.py - Complete async SQLite setup\nfrom sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    async_sessionmaker,\n    AsyncSession\n)\nfrom sqlalchemy.orm import declarative_base\n\n# Database URL - file in current directory\nDATABASE_URL = \"sqlite+aiosqlite:///./dev.db\"\n\n# Create async engine\nengine = create_async_engine(\n    DATABASE_URL,\n    echo=True,  # Set to False in production\n    connect_args={\"check_same_thread\": False}\n)\n\n# Create async session factory\nasync_session = async_sessionmaker(\n    engine,\n    expire_on_commit=False,  # Keep objects usable after commit\n    class_=AsyncSession\n)\n\n# Base class for models\nBase = declarative_base()\n\nasync def init_db():\n    \"\"\"Create all tables from models.\n    \n    Call this at app startup:\n        @app.on_event(\"startup\")\n        async def startup():\n            await init_db()\n    \"\"\"\n    async with engine.begin() as conn:\n        # Import models here to ensure they're registered\n        # from app.models import User, Post  # noqa\n        await conn.run_sync(Base.metadata.create_all)\n\nasync def get_db():\n    \"\"\"FastAPI dependency for database sessions.\n    \n    Usage:\n        @app.get(\"/users\")\n        async def get_users(db: AsyncSession = Depends(get_db)):\n            result = await db.execute(select(User))\n            return result.scalars().all()\n    \"\"\"\n    async with async_session() as session:\n        try:\n            yield session\n            await session.commit()\n        except Exception:\n            await session.rollback()\n            raise\n        finally:\n            await session.close()\n\n# Demonstration\nprint(\"=== Development Database Setup ===\")\nprint(\"\")\nprint(\"Files created:\")\nprint(\"  database.py - This configuration\")\nprint(\"  dev.db      - SQLite database file (auto-created)\")\nprint(\"\")\nprint(\"Usage in FastAPI:\")\nprint('''\nfrom fastapi import FastAPI, Depends\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom app.database import get_db, init_db\n\napp = FastAPI()\n\n@app.on_event(\"startup\")\nasync def startup():\n    await init_db()\n\n@app.get(\"/items\")\nasync def get_items(db: AsyncSession = Depends(get_db)):\n    result = await db.execute(select(Item))\n    return result.scalars().all()\n''')",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "When to Move Beyond SQLite",
              "content": "**Signs You've Outgrown SQLite:**\n\nSQLite is excellent for development, but consider migrating when:\n\n**1. Multiple Concurrent Users:**\n- SQLite locks the entire database for writes\n- PostgreSQL/MySQL handle concurrent writes efficiently\n- Rule of thumb: > 10 concurrent writers = time to migrate\n\n**2. Need Advanced Features:**\n- **JSON operations** - PostgreSQL has native JSONB\n- **Full-text search** - Dedicated search engines or PostgreSQL\n- **Geospatial queries** - PostGIS extension\n- **Complex analytics** - Columnar databases\n\n**3. Production Deployment:**\n- Multiple app instances sharing data\n- Need for database replication\n- High availability requirements\n- Horizontal scaling needs\n\n**4. Data Size:**\n- SQLite works well up to ~1GB\n- Performance degrades with larger datasets\n- No query planner optimizations for big data\n\n**Migration Path:**\n```python\n# Development (SQLite)\nDEV_URL = \"sqlite+aiosqlite:///./dev.db\"\n\n# Production (PostgreSQL)\nPROD_URL = \"postgresql+asyncpg://user:pass@host/db\"\n\n# Use environment variable\nimport os\nDATABASE_URL = os.getenv(\"DATABASE_URL\", DEV_URL)\n```\n\n**The Good News:**\nWith SQLAlchemy, switching databases mostly requires:\n1. Change the connection URL\n2. Install the new driver (asyncpg for PostgreSQL)\n3. Run migrations (if schema changes needed)",
              "code": "import os\n\n# Environment-based database selection\n# This pattern lets you use SQLite locally, PostgreSQL in production\n\n# Development: SQLite (zero config)\nDEV_DATABASE_URL = \"sqlite+aiosqlite:///./dev.db\"\n\n# Production: PostgreSQL (scalable)\n# Set DATABASE_URL in your production environment\n# Example: postgresql+asyncpg://user:password@host:5432/dbname\n\nDATABASE_URL = os.getenv(\"DATABASE_URL\", DEV_DATABASE_URL)\n\nprint(\"=== When to Move Beyond SQLite ===\")\nprint(\"\")\nprint(\"Migrate when you have:\")\nprint(\"  - Multiple concurrent users writing data\")\nprint(\"  - Need for JSON queries, full-text search\")\nprint(\"  - Multiple app instances (containers, servers)\")\nprint(\"  - Data growing beyond a few GB\")\nprint(\"  - Production high-availability requirements\")\nprint(\"\")\nprint(\"Migration is easy with SQLAlchemy:\")\nprint(f\"  Current: {DATABASE_URL}\")\nprint(\"\")\nprint(\"To switch to PostgreSQL:\")\nprint(\"  1. uv add asyncpg  # PostgreSQL async driver\")\nprint(\"  2. Set DATABASE_URL environment variable\")\nprint(\"  3. Run alembic migrations\")\nprint(\"\")\nprint(\"Your SQLAlchemy models stay the same!\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "SQLite Development Takeaways",
              "content": "**Core Concepts:**\n\n1. **Zero Configuration** - SQLite requires no server, just a file\n2. **Ships with Python** - sqlite3 is built-in, add aiosqlite for async\n3. **Perfect for Development** - Quick setup, easy reset, portable\n\n**Setup Checklist:**\n```bash\nuv add aiosqlite  # Async SQLite driver\n```\n\n**Connection URL:**\n```python\n\"sqlite+aiosqlite:///./dev.db\"\n```\n\n**Required for SQLite:**\n```python\nconnect_args={\"check_same_thread\": False}\n```\n\n**Limitations to Remember:**\n- Single writer at a time\n- No concurrent writes\n- Best for data under a few GB\n- File-based (no network access)\n\n**When to Migrate:**\n- Multiple concurrent users\n- Need advanced features (JSON, full-text search)\n- Production with multiple instances\n- Data exceeding a few GB\n\n**Migration is Simple:**\n- SQLAlchemy abstracts the database\n- Change URL, install driver, run migrations\n- Your models stay the same"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-sqlite-challenge",
              "title": "Create an Async SQLite Database Setup",
              "description": "Create a complete async database configuration for a FastAPI development environment using SQLite and aiosqlite.",
              "instructions": "Create a database.py module that:\n\n1. Defines DATABASE_URL for SQLite with aiosqlite\n2. Creates an async engine with proper SQLite settings\n3. Creates an async session factory\n4. Implements an async init_db() function\n5. Implements an async get_db() dependency for FastAPI\n\nThe setup should be suitable for local development with proper error handling.",
              "starterCode": "# database.py - Async SQLite setup for FastAPI\nfrom sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    async_sessionmaker,\n    AsyncSession\n)\nfrom sqlalchemy.orm import declarative_base\n\n# TODO: Define DATABASE_URL for SQLite with aiosqlite\nDATABASE_URL = \"\"\n\n# TODO: Create async engine with SQLite-specific settings\nengine = None\n\n# TODO: Create async session factory\nasync_session = None\n\n# Base class for models\nBase = declarative_base()\n\n# TODO: Implement async init_db function\nasync def init_db():\n    \"\"\"Create all database tables.\"\"\"\n    pass\n\n# TODO: Implement async get_db dependency\nasync def get_db():\n    \"\"\"FastAPI dependency for database sessions.\"\"\"\n    pass\n\n# Test the setup\nif __name__ == \"__main__\":\n    import asyncio\n    \n    async def test():\n        await init_db()\n        print(\"Database initialized successfully!\")\n    \n    asyncio.run(test())",
              "solution": "# database.py - Async SQLite setup for FastAPI\nfrom sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    async_sessionmaker,\n    AsyncSession\n)\nfrom sqlalchemy.orm import declarative_base\n\n# SQLite URL with aiosqlite driver\nDATABASE_URL = \"sqlite+aiosqlite:///./dev.db\"\n\n# Create async engine with SQLite-specific settings\nengine = create_async_engine(\n    DATABASE_URL,\n    echo=True,  # Log SQL statements (disable in production)\n    connect_args={\"check_same_thread\": False}  # Required for SQLite\n)\n\n# Create async session factory\nasync_session = async_sessionmaker(\n    engine,\n    expire_on_commit=False,\n    class_=AsyncSession\n)\n\n# Base class for models\nBase = declarative_base()\n\nasync def init_db():\n    \"\"\"Create all database tables.\n    \n    Call this at FastAPI startup.\n    \"\"\"\n    async with engine.begin() as conn:\n        await conn.run_sync(Base.metadata.create_all)\n\nasync def get_db():\n    \"\"\"FastAPI dependency for database sessions.\n    \n    Provides an async session with automatic commit/rollback.\n    \"\"\"\n    async with async_session() as session:\n        try:\n            yield session\n            await session.commit()\n        except Exception:\n            await session.rollback()\n            raise\n        finally:\n            await session.close()\n\n# Test the setup\nif __name__ == \"__main__\":\n    import asyncio\n    \n    async def test():\n        await init_db()\n        print(\"Database initialized successfully!\")\n        print(f\"Using: {DATABASE_URL}\")\n    \n    asyncio.run(test())",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "DATABASE_URL uses sqlite+aiosqlite driver",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Engine includes check_same_thread=False",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "get_db handles commit and rollback properly",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "The DATABASE_URL format is 'sqlite+aiosqlite:///./filename.db' for a file in the current directory."
                },
                {
                  "level": 2,
                  "text": "SQLite requires connect_args={'check_same_thread': False} to work with async code."
                },
                {
                  "level": 3,
                  "text": "Use 'async with engine.begin() as conn:' in init_db, then 'await conn.run_sync(Base.metadata.create_all)'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using 'sqlite:///' without 'aiosqlite' in the URL",
                  "consequence": "Synchronous driver used, breaks async FastAPI",
                  "correction": "Use 'sqlite+aiosqlite:///' for async support"
                },
                {
                  "mistake": "Forgetting check_same_thread=False",
                  "consequence": "SQLite raises threading errors in async context",
                  "correction": "Add connect_args={'check_same_thread': False} to create_async_engine"
                },
                {
                  "mistake": "Not handling rollback in get_db",
                  "consequence": "Failed transactions may leave database in inconsistent state",
                  "correction": "Use try/except with await session.rollback() in the except block"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-postgresql",
          "title": "PostgreSQL for Production",
          "moduleId": "module-14",
          "order": 9,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why PostgreSQL?",
              "content": "**PostgreSQL: The Industry Standard for Production**\n\nWhen your application moves from development to production, PostgreSQL is the database of choice for most Python applications.\n\n**Why PostgreSQL?**\n\n1. **Concurrent Connections:**\n   - Handles thousands of simultaneous connections\n   - Connection pooling for efficient resource use\n   - No write locks like SQLite\n\n2. **ACID Compliance:**\n   - Atomicity: Transactions are all-or-nothing\n   - Consistency: Data integrity is maintained\n   - Isolation: Concurrent transactions don't interfere\n   - Durability: Committed data survives crashes\n\n3. **Advanced Features:**\n   - **JSONB**: Native JSON storage with indexing\n   - **Full-text search**: Built-in search without external tools\n   - **Array columns**: Store lists directly in columns\n   - **Geospatial**: PostGIS extension for location data\n\n4. **Cloud Options:**\n   - **Supabase**: PostgreSQL with instant APIs\n   - **Neon**: Serverless PostgreSQL with branching\n   - **Railway**: One-click deployment\n   - **AWS RDS / Azure / GCP**: Enterprise-grade managed services\n\n**SQLite vs PostgreSQL:**\n\n| Feature | SQLite | PostgreSQL |\n|---------|--------|------------|\n| Setup | Zero config | Requires server |\n| Concurrent writes | Single writer | Many writers |\n| Scale | Small/medium | Large/enterprise |\n| Features | Basic | Advanced |\n| Best for | Development | Production |"
            },
            {
              "type": "EXAMPLE",
              "title": "Setting Up PostgreSQL",
              "content": "**Three Ways to Get PostgreSQL Running:**\n\n**Option 1: Docker (Recommended for Development)**\n```bash\n# Start PostgreSQL container\ndocker run --name postgres \\\n  -e POSTGRES_PASSWORD=secret \\\n  -e POSTGRES_USER=myuser \\\n  -e POSTGRES_DB=mydb \\\n  -p 5432:5432 \\\n  -d postgres:16\n\n# Verify it's running\ndocker ps\n\n# Connect with psql\ndocker exec -it postgres psql -U myuser -d mydb\n```\n\n**Option 2: Local Installation**\n```bash\n# macOS\nbrew install postgresql@16\nbrew services start postgresql@16\n\n# Ubuntu/Debian\nsudo apt update\nsudo apt install postgresql postgresql-contrib\nsudo systemctl start postgresql\n\n# Windows\n# Download installer from postgresql.org\n```\n\n**Option 3: Cloud Services (Easiest for Production)**\n- **Supabase**: Free tier, instant setup at supabase.com\n- **Neon**: Serverless, generous free tier at neon.tech\n- **Railway**: Simple deployment at railway.app\n\nAll provide a connection string like:\n```\npostgresql://user:password@host:5432/database\n```",
              "code": "# PostgreSQL Setup Options\n\nprint(\"=== PostgreSQL Setup Guide ===\")\nprint(\"\")\nprint(\"Option 1: Docker (Recommended for Development)\")\nprint(\"-\" * 50)\nprint(\"\"\"docker run --name postgres \\\\\\n  -e POSTGRES_PASSWORD=secret \\\\\\n  -e POSTGRES_USER=myuser \\\\\\n  -e POSTGRES_DB=mydb \\\\\\n  -p 5432:5432 \\\\\\n  -d postgres:16\"\"\")\nprint(\"\")\nprint(\"Option 2: Local Installation\")\nprint(\"-\" * 50)\nprint(\"macOS:  brew install postgresql@16\")\nprint(\"Ubuntu: sudo apt install postgresql\")\nprint(\"\")\nprint(\"Option 3: Cloud Services\")\nprint(\"-\" * 50)\nprint(\"Supabase: https://supabase.com (free tier available)\")\nprint(\"Neon:     https://neon.tech (serverless PostgreSQL)\")\nprint(\"Railway:  https://railway.app (one-click deploy)\")\nprint(\"\")\nprint(\"All options provide a connection string:\")\nprint(\"  postgresql://user:password@host:5432/database\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Connecting with asyncpg",
              "content": "**asyncpg: The Fastest PostgreSQL Driver for Python**\n\nFor async FastAPI applications, `asyncpg` provides excellent performance.\n\n**Installation:**\n```bash\n# Using uv (recommended)\nuv add asyncpg\n\n# Or using pip\npip install asyncpg\n```\n\n**Connection URL Format:**\n```\npostgresql+asyncpg://username:password@host:port/database\n```\n\n**Key Configuration Options:**\n- `pool_size`: Number of connections to keep open (default: 5)\n- `max_overflow`: Extra connections allowed above pool_size (default: 10)\n- `pool_timeout`: Seconds to wait for a connection (default: 30)\n- `echo`: Log all SQL statements (useful for debugging)",
              "code": "# PostgreSQL connection with asyncpg\n# Install: uv add asyncpg\n\nfrom sqlalchemy.ext.asyncio import create_async_engine, async_sessionmaker\n\n# PostgreSQL URL format\n# postgresql+asyncpg://username:password@host:port/database\nDATABASE_URL = \"postgresql+asyncpg://myuser:secret@localhost:5432/mydb\"\n\n# Create async engine with connection pooling\nengine = create_async_engine(\n    DATABASE_URL,\n    pool_size=10,        # Keep 10 connections open\n    max_overflow=20,     # Allow 20 extra connections if needed\n    pool_timeout=30,     # Wait 30 seconds for connection\n    echo=True            # Log SQL statements (disable in production)\n)\n\n# Create async session factory\nasync_session = async_sessionmaker(\n    engine,\n    expire_on_commit=False\n)\n\nprint(\"=== PostgreSQL + asyncpg Configuration ===\")\nprint(f\"\")\nprint(f\"Database URL format:\")\nprint(f\"  postgresql+asyncpg://user:pass@host:5432/db\")\nprint(f\"\")\nprint(f\"Connection Pool Settings:\")\nprint(f\"  pool_size=10      # Base connections\")\nprint(f\"  max_overflow=20   # Extra connections allowed\")\nprint(f\"  pool_timeout=30   # Seconds to wait\")\nprint(f\"\")\nprint(f\"Why connection pooling matters:\")\nprint(f\"  - Creating connections is expensive\")\nprint(f\"  - Pool reuses existing connections\")\nprint(f\"  - Prevents connection exhaustion\")\nprint(f\"  - Handles concurrent requests efficiently\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Key Differences from SQLite",
              "content": "**PostgreSQL-Specific Features in SQLAlchemy:**\n\nPostgreSQL offers powerful data types not available in SQLite.\n\n**1. JSONB Columns:**\nStore JSON with full indexing and query support.\n\n**2. Array Columns:**\nStore lists directly without separate tables.\n\n**3. Full-Text Search:**\nBuilt-in search without external services.\n\n**4. UUID Primary Keys:**\nNative UUID support for distributed systems.\n\n**Note:** These features are PostgreSQL-specific. If you use them, your code won't work with SQLite. For development/production parity, consider using Docker to run PostgreSQL locally.",
              "code": "# PostgreSQL-specific features in SQLAlchemy\n# These features are NOT available in SQLite\n\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.orm import declarative_base, Mapped, mapped_column\nfrom sqlalchemy.dialects.postgresql import JSONB, ARRAY, UUID\nimport uuid\n\nBase = declarative_base()\n\nclass Transaction(Base):\n    \"\"\"Example model using PostgreSQL-specific types\"\"\"\n    __tablename__ = 'transactions'\n    \n    # UUID primary key (great for distributed systems)\n    id: Mapped[uuid.UUID] = mapped_column(\n        UUID(as_uuid=True), \n        primary_key=True, \n        default=uuid.uuid4\n    )\n    \n    # JSONB column - store structured data with indexing\n    metadata_: Mapped[dict] = mapped_column(\n        JSONB, \n        default={},\n        nullable=False\n    )\n    \n    # Array column - store lists directly\n    tags: Mapped[list[str]] = mapped_column(\n        ARRAY(String),\n        default=[]\n    )\n    \n    amount: Mapped[int] = mapped_column(Integer)\n\nprint(\"=== PostgreSQL-Specific Features ===\")\nprint(\"\")\nprint(\"1. JSONB Columns:\")\nprint(\"   - Store JSON with full query support\")\nprint(\"   - Example: metadata_->>'key' = 'value'\")\nprint(\"   - Can be indexed for performance\")\nprint(\"\")\nprint(\"2. Array Columns:\")\nprint(\"   - Store lists without separate tables\")\nprint(\"   - Example: tags = ['python', 'api']\")\nprint(\"   - Query: ANY(tags) = 'python'\")\nprint(\"\")\nprint(\"3. UUID Primary Keys:\")\nprint(\"   - Globally unique identifiers\")\nprint(\"   - Great for distributed systems\")\nprint(\"   - No central ID generator needed\")\nprint(\"\")\nprint(\"4. Full-Text Search:\")\nprint(\"   - Built into PostgreSQL\")\nprint(\"   - No external service needed\")\nprint(\"   - Supports ranking and highlighting\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Environment-Based Configuration",
              "content": "**Use Environment Variables for Database URLs**\n\nThe best practice is to use different databases for different environments:\n- **Development**: SQLite (zero config, easy reset)\n- **Testing**: SQLite in-memory or Docker PostgreSQL\n- **Production**: Managed PostgreSQL (Supabase, Neon, RDS)\n\n**Pydantic Settings** makes this easy by automatically reading from environment variables and `.env` files.\n\n**Key Principle:** Your code should work identically regardless of which database is configured. SQLAlchemy abstracts the differences.",
              "code": "# Environment-based database configuration\n# Works with both SQLite (dev) and PostgreSQL (prod)\n\nfrom pydantic_settings import BaseSettings\nfrom sqlalchemy.ext.asyncio import create_async_engine\n\nclass Settings(BaseSettings):\n    \"\"\"Application settings with environment variable support\"\"\"\n    \n    # Default to SQLite for local development\n    database_url: str = \"sqlite+aiosqlite:///./dev.db\"\n    \n    # Load from .env file automatically\n    model_config = {\"env_file\": \".env\"}\n\nsettings = Settings()\n\n# Engine configuration based on database type\ndef get_engine_kwargs():\n    \"\"\"Return appropriate engine kwargs based on database type\"\"\"\n    if \"sqlite\" in settings.database_url:\n        return {\n            \"connect_args\": {\"check_same_thread\": False}\n        }\n    else:\n        # PostgreSQL settings\n        return {\n            \"pool_size\": 10,\n            \"max_overflow\": 20,\n            \"pool_timeout\": 30\n        }\n\nengine = create_async_engine(\n    settings.database_url,\n    echo=True,\n    **get_engine_kwargs()\n)\n\nprint(\"=== Environment-Based Configuration ===\")\nprint(\"\")\nprint(\".env for Development:\")\nprint(\"-\" * 40)\nprint(\"# No DATABASE_URL needed - uses SQLite default\")\nprint(\"# Or explicitly:\")\nprint(\"DATABASE_URL=sqlite+aiosqlite:///./dev.db\")\nprint(\"\")\nprint(\".env for Production:\")\nprint(\"-\" * 40)\nprint(\"DATABASE_URL=postgresql+asyncpg://user:pass@host:5432/db\")\nprint(\"\")\nprint(f\"Current URL: {settings.database_url}\")\nprint(\"\")\nprint(\"Benefits:\")\nprint(\"  - Same code works in all environments\")\nprint(\"  - No secrets in source code\")\nprint(\"  - Easy to switch databases\")\nprint(\"  - SQLAlchemy handles the differences\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "PostgreSQL Production Takeaways",
              "content": "**Core Concepts:**\n\n1. **PostgreSQL is the production standard** - Handles concurrent users, advanced features, and scales well\n\n2. **asyncpg for async Python** - Fastest PostgreSQL driver, perfect for FastAPI\n\n3. **Connection pooling is essential** - Reuse connections, prevent exhaustion\n\n**Setup Options:**\n```bash\n# Docker (development)\ndocker run -d postgres:16 ...\n\n# Cloud (production)\n# Supabase, Neon, Railway - get connection string\n```\n\n**Connection URL:**\n```python\npostgresql+asyncpg://user:pass@host:5432/dbname\n```\n\n**PostgreSQL-Only Features:**\n- JSONB columns for structured data\n- Array columns for lists\n- Full-text search built-in\n- UUID primary keys\n\n**Environment Configuration:**\n```python\nfrom pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    database_url: str = \"sqlite+aiosqlite:///./dev.db\"\n    model_config = {\"env_file\": \".env\"}\n```\n\n**Best Practice:**\n- SQLite for local development (zero config)\n- PostgreSQL for production (full features)\n- Same SQLAlchemy code works with both"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-postgresql-challenge",
              "title": "Create a Production-Ready Database Configuration",
              "description": "Create a database configuration module that works with both SQLite (development) and PostgreSQL (production) based on environment variables.",
              "instructions": "Create a database.py module that:\n\n1. Uses Pydantic Settings to load DATABASE_URL from environment\n2. Defaults to SQLite for development\n3. Configures appropriate engine settings based on database type:\n   - SQLite: check_same_thread=False\n   - PostgreSQL: pool_size, max_overflow, pool_timeout\n4. Creates an async engine and session factory\n5. Works seamlessly with both databases",
              "starterCode": "# database.py - Production-ready database configuration\nfrom pydantic_settings import BaseSettings\nfrom sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    async_sessionmaker,\n    AsyncSession\n)\nfrom sqlalchemy.orm import declarative_base\n\nclass Settings(BaseSettings):\n    # TODO: Define database_url with SQLite default\n    pass\n\nsettings = Settings()\n\n# TODO: Create function to return engine kwargs based on DB type\ndef get_engine_kwargs() -> dict:\n    pass\n\n# TODO: Create async engine with appropriate settings\nengine = None\n\n# TODO: Create async session factory\nasync_session = None\n\n# Base class for models\nBase = declarative_base()\n\n# Test the configuration\nif __name__ == \"__main__\":\n    print(f\"Database URL: {settings.database_url}\")\n    print(f\"Engine kwargs: {get_engine_kwargs()}\")",
              "solution": "# database.py - Production-ready database configuration\nfrom pydantic_settings import BaseSettings\nfrom sqlalchemy.ext.asyncio import (\n    create_async_engine,\n    async_sessionmaker,\n    AsyncSession\n)\nfrom sqlalchemy.orm import declarative_base\n\nclass Settings(BaseSettings):\n    # Default to SQLite for local development\n    database_url: str = \"sqlite+aiosqlite:///./dev.db\"\n    \n    model_config = {\"env_file\": \".env\"}\n\nsettings = Settings()\n\ndef get_engine_kwargs() -> dict:\n    \"\"\"Return appropriate engine kwargs based on database type.\"\"\"\n    if \"sqlite\" in settings.database_url:\n        # SQLite-specific settings\n        return {\n            \"connect_args\": {\"check_same_thread\": False}\n        }\n    else:\n        # PostgreSQL settings with connection pooling\n        return {\n            \"pool_size\": 10,\n            \"max_overflow\": 20,\n            \"pool_timeout\": 30\n        }\n\n# Create async engine with appropriate settings\nengine = create_async_engine(\n    settings.database_url,\n    echo=True,  # Set to False in production\n    **get_engine_kwargs()\n)\n\n# Create async session factory\nasync_session = async_sessionmaker(\n    engine,\n    expire_on_commit=False,\n    class_=AsyncSession\n)\n\n# Base class for models\nBase = declarative_base()\n\n# Test the configuration\nif __name__ == \"__main__\":\n    print(f\"Database URL: {settings.database_url}\")\n    print(f\"Engine kwargs: {get_engine_kwargs()}\")\n    print(\"Configuration loaded successfully!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Settings class has database_url with SQLite default",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "get_engine_kwargs returns check_same_thread for SQLite",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "get_engine_kwargs returns pool settings for PostgreSQL",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use 'sqlite' in settings.database_url to check the database type."
                },
                {
                  "level": 2,
                  "text": "For PostgreSQL, include pool_size, max_overflow, and pool_timeout in the kwargs."
                },
                {
                  "level": 3,
                  "text": "Use **get_engine_kwargs() to spread the dictionary when creating the engine."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Hardcoding database URL instead of using environment variables",
                  "consequence": "Secrets exposed in source code, inflexible configuration",
                  "correction": "Use Pydantic Settings with env_file support"
                },
                {
                  "mistake": "Using same engine kwargs for SQLite and PostgreSQL",
                  "consequence": "SQLite errors with pool settings, PostgreSQL misses optimization",
                  "correction": "Check database type and return appropriate settings"
                },
                {
                  "mistake": "Forgetting pool_timeout for PostgreSQL",
                  "consequence": "Requests hang indefinitely when pool is exhausted",
                  "correction": "Always set pool_timeout to a reasonable value like 30 seconds"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-password-hashing",
          "title": "Password Hashing",
          "moduleId": "module-14",
          "order": 10,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Password Hashing?",
              "content": "**Never Store Plain Text Passwords**\n\nOne of the most critical security rules in software development: **NEVER store passwords in plain text**. If your database is breached, attackers would have immediate access to every user's password.\n\n**Hashing is One-Way**\n\nUnlike encryption (which can be reversed with a key), hashing is a **one-way function**:\n- Input: `\"secretpassword123\"` ‚Üí Output: `\"$2b$12$LQv3c1y...\"` (irreversible)\n- You cannot convert the hash back to the original password\n- To verify a password, you hash the attempt and compare hashes\n\n**Why Bcrypt?**\n\nBcrypt is the **industry standard** for password hashing:\n\n1. **Intentionally Slow** - Takes ~100ms to hash, making brute-force attacks impractical\n2. **Built-in Salt** - Each password gets a unique random salt\n3. **Adjustable Cost** - Can increase computation as hardware gets faster\n4. **Battle-Tested** - Used by major companies for decades\n\n**Salt Prevents Rainbow Table Attacks**\n\nA **rainbow table** is a precomputed table of common password hashes. Without salt:\n- `hash(\"password123\")` always produces the same hash\n- Attackers can look up hashes in rainbow tables\n\nWith salt (random data added before hashing):\n- `hash(\"password123\" + random_salt)` produces a unique hash every time\n- Rainbow tables become useless\n- Bcrypt handles salting automatically\n\n**Security Comparison:**\n\n| Method | Security | Use Case |\n|--------|----------|----------|\n| Plain text | None | Never! |\n| MD5/SHA1 | Weak | Never for passwords |\n| SHA256 | Medium | Not for passwords |\n| Bcrypt | Strong | Passwords |\n| Argon2 | Strongest | Passwords (newer) |"
            },
            {
              "type": "EXAMPLE",
              "title": "Using passlib with bcrypt",
              "content": "**passlib: The Recommended Library**\n\n`passlib` provides a clean, secure interface for password hashing. It handles all the complexity of salting, hashing, and verification.\n\n**Installation:**\n```bash\nuv add \"passlib[bcrypt]\"\n# or: pip install \"passlib[bcrypt]\"\n```\n\n**Key Concepts:**\n- `CryptContext`: Manages hashing schemes and configuration\n- `hash()`: Creates a secure hash from a password\n- `verify()`: Checks if a password matches a hash\n- `deprecated=\"auto\"`: Automatically handles scheme upgrades",
              "code": "# uv add \"passlib[bcrypt]\"\n\nfrom passlib.context import CryptContext\n\n# Configure password hashing context\n# - schemes: List of allowed hashing algorithms\n# - deprecated: Automatically rehash old schemes\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef hash_password(password: str) -> str:\n    \"\"\"Hash a password for storage.\n    \n    This creates a secure bcrypt hash with automatic salt.\n    Each call produces a different hash for the same password!\n    \"\"\"\n    return pwd_context.hash(password)\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    \"\"\"Verify a password against its hash.\n    \n    Returns True if the password matches, False otherwise.\n    Timing-safe comparison prevents timing attacks.\n    \"\"\"\n    return pwd_context.verify(plain_password, hashed_password)\n\n# Demonstration\nprint(\"=== Password Hashing Demo ===\")\nprint()\n\n# Hash a password\npassword = \"secretpassword123\"\nhashed = hash_password(password)\n\nprint(f\"Original password: {password}\")\nprint(f\"Hashed password:   {hashed}\")\nprint(f\"Hash length:       {len(hashed)} characters\")\nprint()\n\n# Notice: Same password produces different hashes (due to salt)\nprint(\"Same password, different hashes (salt makes each unique):\")\nfor i in range(3):\n    h = hash_password(password)\n    print(f\"  Hash {i+1}: {h[:30]}...\")\nprint()\n\n# Verify passwords\nprint(\"Password verification:\")\nprint(f\"  Correct password: {verify_password('secretpassword123', hashed)}\")\nprint(f\"  Wrong password:   {verify_password('wrongpassword', hashed)}\")\nprint(f\"  Empty password:   {verify_password('', hashed)}\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "User Registration Flow",
              "content": "**Secure Registration Pattern**\n\nWhen a user registers, you must:\n1. Validate the email format (use `EmailStr`)\n2. Check if the email is already registered\n3. Hash the password before storing\n4. Never log or return the password hash\n\n**Important Security Points:**\n- Store `hashed_password`, never `password`\n- Use `EmailStr` for automatic email validation\n- Return minimal user info (no password hash)\n- Use proper HTTP status codes (400 for validation errors)",
              "code": "from fastapi import FastAPI, HTTPException, Depends\nfrom pydantic import BaseModel, EmailStr\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy import select\nfrom passlib.context import CryptContext\n\napp = FastAPI()\n\n# Password hashing setup\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef hash_password(password: str) -> str:\n    return pwd_context.hash(password)\n\n# Pydantic models\nclass UserCreate(BaseModel):\n    \"\"\"User registration request.\"\"\"\n    email: EmailStr  # Automatic email format validation\n    password: str    # Plain text from user (will be hashed)\n\nclass UserResponse(BaseModel):\n    \"\"\"User response (never includes password!).\"\"\"\n    id: int\n    email: str\n    # Note: No password or hashed_password field!\n\n# Example User SQLAlchemy model (simplified)\n# class User(Base):\n#     __tablename__ = \"users\"\n#     id = Column(Integer, primary_key=True)\n#     email = Column(String, unique=True, nullable=False)\n#     hashed_password = Column(String, nullable=False)\n\n@app.post(\"/register\", response_model=UserResponse, status_code=201)\nasync def register(user: UserCreate, db: AsyncSession = Depends(get_db)):\n    \"\"\"Register a new user with secure password hashing.\"\"\"\n    \n    # Step 1: Check if user already exists\n    result = await db.execute(\n        select(User).where(User.email == user.email)\n    )\n    existing_user = result.scalar_one_or_none()\n    \n    if existing_user:\n        raise HTTPException(\n            status_code=400,\n            detail=\"Email already registered\"\n        )\n    \n    # Step 2: Hash password BEFORE storing\n    # CRITICAL: Never store plain text passwords!\n    hashed = hash_password(user.password)\n    \n    # Step 3: Create user with hashed password\n    db_user = User(\n        email=user.email,\n        hashed_password=hashed  # Store the HASH, not the password\n    )\n    \n    db.add(db_user)\n    await db.commit()\n    await db.refresh(db_user)\n    \n    # Step 4: Return user WITHOUT password info\n    return db_user\n\n# Demonstration of the flow\nprint(\"=== User Registration Flow ===\")\nprint()\nprint(\"1. User submits: { email: 'alice@example.com', password: 'secret123' }\")\nprint()\nprint(\"2. Server validates email format (EmailStr)\")\nprint()\nprint(\"3. Server checks database for existing user\")\nprint()\nprint(\"4. Server hashes password:\")\nexample_hash = hash_password(\"secret123\")\nprint(f\"   'secret123' -> '{example_hash[:40]}...'\")\nprint()\nprint(\"5. Server stores in database:\")\nprint(\"   { id: 1, email: 'alice@example.com', hashed_password: '$2b$12...' }\")\nprint()\nprint(\"6. Server responds with:\")\nprint(\"   { id: 1, email: 'alice@example.com' }\")\nprint(\"   (No password in response!)\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Login Verification",
              "content": "**Secure Login Pattern**\n\nDuring login, verify the password against the stored hash:\n1. Find the user by email\n2. Use `verify_password()` to compare\n3. Return generic error messages (don't reveal which field was wrong)\n4. Never log password attempts\n\n**Security Best Practice:**\nAlways return the same error message for \"user not found\" and \"wrong password\". This prevents attackers from discovering valid emails.",
              "code": "from fastapi import FastAPI, HTTPException, Depends\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy import select\nfrom passlib.context import CryptContext\n\napp = FastAPI()\n\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    \"\"\"Verify a password against its hash.\"\"\"\n    return pwd_context.verify(plain_password, hashed_password)\n\nasync def get_user_by_email(db: AsyncSession, email: str):\n    \"\"\"Retrieve user from database by email.\"\"\"\n    result = await db.execute(\n        select(User).where(User.email == email)\n    )\n    return result.scalar_one_or_none()\n\n@app.post(\"/login\")\nasync def login(\n    email: str,\n    password: str,\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Authenticate user with email and password.\"\"\"\n    \n    # Step 1: Find user by email\n    user = await get_user_by_email(db, email)\n    \n    # Step 2: Verify password (also handles user not found)\n    # SECURITY: Use same error message for both cases!\n    # This prevents email enumeration attacks.\n    if not user or not verify_password(password, user.hashed_password):\n        raise HTTPException(\n            status_code=401,\n            detail=\"Invalid credentials\"  # Generic message!\n        )\n    \n    # Step 3: Login successful\n    # In a real app, you'd create a JWT token here\n    return {\n        \"message\": \"Login successful\",\n        \"user_id\": user.id\n    }\n\n# Demonstration\nprint(\"=== Login Verification Flow ===\")\nprint()\n\n# Simulate stored hash\nstored_hash = pwd_context.hash(\"correctpassword\")\n\nprint(\"Stored in database:\")\nprint(f\"  email: 'alice@example.com'\")\nprint(f\"  hashed_password: '{stored_hash[:40]}...'\")\nprint()\n\nprint(\"Login attempt 1: Correct password\")\nresult = verify_password(\"correctpassword\", stored_hash)\nprint(f\"  verify_password('correctpassword', hash) = {result}\")\nprint(\"  Response: { message: 'Login successful' }\")\nprint()\n\nprint(\"Login attempt 2: Wrong password\")\nresult = verify_password(\"wrongpassword\", stored_hash)\nprint(f\"  verify_password('wrongpassword', hash) = {result}\")\nprint(\"  Response: 401 'Invalid credentials'\")\nprint()\n\nprint(\"SECURITY NOTE:\")\nprint(\"  Same error for 'user not found' and 'wrong password'\")\nprint(\"  Prevents attackers from discovering valid emails!\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Password Hashing Takeaways",
              "content": "**Core Principles:**\n\n1. **Use bcrypt via passlib** - Battle-tested, industry standard\n   ```python\n   from passlib.context import CryptContext\n   pwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n   ```\n\n2. **Never log or expose password hashes** - Even hashes are sensitive\n   - Don't include in API responses\n   - Don't log in application logs\n   - Don't store in client-side storage\n\n3. **Use EmailStr for email validation** - Automatic format checking\n   ```python\n   from pydantic import EmailStr\n   email: EmailStr  # Validates email format\n   ```\n\n4. **Generic error messages** - Prevent information disclosure\n   - Bad: \"Email not found\" / \"Wrong password\"\n   - Good: \"Invalid credentials\"\n\n**Quick Reference:**\n\n```python\n# Installation\nuv add \"passlib[bcrypt]\"\n\n# Setup\nfrom passlib.context import CryptContext\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\n# Hash (for registration)\nhashed = pwd_context.hash(password)\n\n# Verify (for login)\nif pwd_context.verify(provided_password, stored_hash):\n    # Login success\n```\n\n**Security Checklist:**\n- [ ] Never store plain text passwords\n- [ ] Use bcrypt (not MD5, SHA1, or SHA256)\n- [ ] Hash on the server, not client\n- [ ] Use generic authentication errors\n- [ ] Never log passwords or hashes"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-password-hashing-challenge",
              "title": "Build a Secure Authentication Module",
              "description": "Create a complete authentication module with password hashing that can be used in a FastAPI application.",
              "instructions": "Create an authentication module that:\n\n1. Sets up passlib with bcrypt for password hashing\n2. Implements `hash_password()` function\n3. Implements `verify_password()` function\n4. Creates a Pydantic model for user registration with email validation\n5. Creates a Pydantic model for user response (without password)\n6. Implements a mock `register_user()` function that:\n   - Validates the email isn't already taken\n   - Hashes the password before storing\n   - Returns the user without password info\n7. Implements a mock `authenticate_user()` function that:\n   - Looks up user by email\n   - Verifies password against stored hash\n   - Returns None if authentication fails",
              "starterCode": "from pydantic import BaseModel, EmailStr\nfrom passlib.context import CryptContext\nfrom typing import Optional, Dict\n\n# TODO: Set up password hashing context with bcrypt\npwd_context = None\n\n# TODO: Implement hash_password function\ndef hash_password(password: str) -> str:\n    \"\"\"Hash a password for secure storage.\"\"\"\n    pass\n\n# TODO: Implement verify_password function\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    \"\"\"Verify a password against its hash.\"\"\"\n    pass\n\n# TODO: Create UserCreate model with email (EmailStr) and password (str)\nclass UserCreate(BaseModel):\n    pass\n\n# TODO: Create UserResponse model with id (int) and email (str)\nclass UserResponse(BaseModel):\n    pass\n\n# Mock database\nusers_db: Dict[str, dict] = {}\nnext_id = 1\n\n# TODO: Implement register_user\ndef register_user(user_data: UserCreate) -> Optional[UserResponse]:\n    \"\"\"Register a new user with hashed password.\n    \n    Returns UserResponse on success, None if email exists.\n    \"\"\"\n    pass\n\n# TODO: Implement authenticate_user\ndef authenticate_user(email: str, password: str) -> Optional[UserResponse]:\n    \"\"\"Authenticate user with email and password.\n    \n    Returns UserResponse on success, None if authentication fails.\n    \"\"\"\n    pass\n\n# Test your implementation\nif __name__ == \"__main__\":\n    # Test registration\n    user = UserCreate(email=\"alice@example.com\", password=\"secret123\")\n    result = register_user(user)\n    print(f\"Registered: {result}\")\n    \n    # Test duplicate registration\n    result2 = register_user(user)\n    print(f\"Duplicate: {result2}\")\n    \n    # Test authentication\n    auth = authenticate_user(\"alice@example.com\", \"secret123\")\n    print(f\"Auth success: {auth}\")\n    \n    # Test wrong password\n    auth_fail = authenticate_user(\"alice@example.com\", \"wrong\")\n    print(f\"Auth fail: {auth_fail}\")",
              "solution": "from pydantic import BaseModel, EmailStr\nfrom passlib.context import CryptContext\nfrom typing import Optional, Dict\n\n# Password hashing context with bcrypt\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\ndef hash_password(password: str) -> str:\n    \"\"\"Hash a password for secure storage.\n    \n    Uses bcrypt with automatic salt generation.\n    Each call produces a different hash for the same password.\n    \"\"\"\n    return pwd_context.hash(password)\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    \"\"\"Verify a password against its hash.\n    \n    Uses timing-safe comparison to prevent timing attacks.\n    Returns True if password matches, False otherwise.\n    \"\"\"\n    return pwd_context.verify(plain_password, hashed_password)\n\nclass UserCreate(BaseModel):\n    \"\"\"User registration request model.\"\"\"\n    email: EmailStr  # Automatic email format validation\n    password: str\n\nclass UserResponse(BaseModel):\n    \"\"\"User response model (never includes password).\"\"\"\n    id: int\n    email: str\n\n# Mock database\nusers_db: Dict[str, dict] = {}\nnext_id = 1\n\ndef register_user(user_data: UserCreate) -> Optional[UserResponse]:\n    \"\"\"Register a new user with hashed password.\n    \n    Returns UserResponse on success, None if email exists.\n    \"\"\"\n    global next_id\n    \n    # Check if email already exists\n    if user_data.email in users_db:\n        return None\n    \n    # Hash password before storing\n    hashed = hash_password(user_data.password)\n    \n    # Create user record\n    user_record = {\n        \"id\": next_id,\n        \"email\": user_data.email,\n        \"hashed_password\": hashed  # Store hash, never plain password\n    }\n    \n    users_db[user_data.email] = user_record\n    next_id += 1\n    \n    # Return response without password info\n    return UserResponse(id=user_record[\"id\"], email=user_record[\"email\"])\n\ndef authenticate_user(email: str, password: str) -> Optional[UserResponse]:\n    \"\"\"Authenticate user with email and password.\n    \n    Returns UserResponse on success, None if authentication fails.\n    \"\"\"\n    # Look up user\n    user = users_db.get(email)\n    if not user:\n        return None\n    \n    # Verify password\n    if not verify_password(password, user[\"hashed_password\"]):\n        return None\n    \n    return UserResponse(id=user[\"id\"], email=user[\"email\"])\n\n# Test the implementation\nif __name__ == \"__main__\":\n    print(\"=== Password Hashing Challenge Solution ===\")\n    print()\n    \n    # Test registration\n    user = UserCreate(email=\"alice@example.com\", password=\"secret123\")\n    result = register_user(user)\n    print(f\"1. Registered: {result}\")\n    \n    # Test duplicate registration\n    result2 = register_user(user)\n    print(f\"2. Duplicate attempt: {result2}\")\n    \n    # Test successful authentication\n    auth = authenticate_user(\"alice@example.com\", \"secret123\")\n    print(f\"3. Auth with correct password: {auth}\")\n    \n    # Test wrong password\n    auth_fail = authenticate_user(\"alice@example.com\", \"wrongpassword\")\n    print(f\"4. Auth with wrong password: {auth_fail}\")\n    \n    # Test non-existent user\n    auth_none = authenticate_user(\"nobody@example.com\", \"secret123\")\n    print(f\"5. Auth for non-existent user: {auth_none}\")\n    \n    print()\n    print(\"Database contents (for debugging only):\")\n    for email, data in users_db.items():\n        print(f\"  {email}: hash={data['hashed_password'][:30]}...\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Password hashing produces valid bcrypt hash",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Password verification works correctly",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Registration returns user without password",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Authentication succeeds with correct password",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Authentication fails with wrong password",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\") to set up password hashing."
                },
                {
                  "level": 2,
                  "text": "For registration, always hash the password with pwd_context.hash() before storing. Never store the plain password."
                },
                {
                  "level": 3,
                  "text": "For authentication, use pwd_context.verify(plain_password, stored_hash) to check if the password matches."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Storing plain text password instead of hash",
                  "consequence": "Major security vulnerability - all passwords exposed if database is breached",
                  "correction": "Always use pwd_context.hash(password) before storing"
                },
                {
                  "mistake": "Including password or hashed_password in UserResponse",
                  "consequence": "Exposes sensitive data in API responses",
                  "correction": "UserResponse should only contain id and email"
                },
                {
                  "mistake": "Comparing hashes directly with == instead of verify()",
                  "consequence": "Vulnerable to timing attacks",
                  "correction": "Use pwd_context.verify() which uses timing-safe comparison"
                },
                {
                  "mistake": "Different error messages for 'user not found' vs 'wrong password'",
                  "consequence": "Allows attackers to enumerate valid emails",
                  "correction": "Return the same error/None for both cases"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-jwt",
          "title": "JWT Authentication",
          "moduleId": "module-14",
          "order": 11,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is JWT?",
              "content": "**JSON Web Token (JWT) - Stateless Authentication**\n\nJWT is a compact, URL-safe token format for securely transmitting information between parties. It's the industry standard for API authentication.\n\n**JWT Structure: header.payload.signature**\n\nA JWT consists of three parts separated by dots:\n\n```\neyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c\n```\n\n1. **Header** (red): Algorithm and token type\n   ```json\n   { \"alg\": \"HS256\", \"typ\": \"JWT\" }\n   ```\n\n2. **Payload** (purple): Claims (user data)\n   ```json\n   { \"sub\": \"user@example.com\", \"exp\": 1234567890 }\n   ```\n\n3. **Signature** (blue): Verification hash\n   ```\n   HMACSHA256(base64(header) + \".\" + base64(payload), secret)\n   ```\n\n**Stateless Authentication**\n\nUnlike sessions (stored on server), JWTs are **stateless**:\n- Server doesn't store session data\n- Token contains all needed info\n- Easily scales horizontally\n- No database lookup for each request\n\n**Access Tokens vs Refresh Tokens**\n\n| Token Type | Lifetime | Purpose |\n|------------|----------|----------|\n| Access Token | Short (15-60 min) | API authorization |\n| Refresh Token | Long (days/weeks) | Get new access tokens |\n\n**Why short-lived access tokens?**\n- If stolen, limited damage window\n- Refresh tokens stored securely (httpOnly cookies)\n- Revocation possible via refresh token invalidation\n\n**Library Choice: PyJWT**\n\nWe use `pyjwt` (NOT `python-jose` which is deprecated):\n```bash\nuv add pyjwt\n```\n\n**Security Considerations:**\n- Never store secrets in JWT payload (it's only base64 encoded, not encrypted)\n- Always use HTTPS\n- Set appropriate expiration times\n- Use strong secret keys (256+ bits)"
            },
            {
              "type": "EXAMPLE",
              "title": "Creating JWT Tokens",
              "content": "**Token Creation with PyJWT**\n\nThis example shows how to create and decode JWT tokens using the `pyjwt` library.\n\n**Key Concepts:**\n- `jwt.encode()`: Creates a token from payload and secret\n- `jwt.decode()`: Verifies and extracts payload from token\n- `exp` claim: Automatic expiration checking\n- Algorithm choice: HS256 is secure for most use cases\n\n**Installation:**\n```bash\nuv add pyjwt\n```",
              "code": "# uv add pyjwt\n\nimport jwt\nfrom datetime import datetime, timedelta\n\nSECRET_KEY = \"your-secret-key\"  # In production: from environment\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\ndef create_access_token(data: dict, expires_delta: timedelta | None = None) -> str:\n    \"\"\"Create a JWT access token.\n    \n    Args:\n        data: Payload to encode (e.g., {\"sub\": \"user@example.com\"})\n        expires_delta: Optional custom expiration time\n        \n    Returns:\n        Encoded JWT token string\n    \"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + (expires_delta or timedelta(minutes=15))\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef decode_token(token: str) -> dict:\n    \"\"\"Decode and verify a JWT token.\n    \n    Args:\n        token: The JWT token string\n        \n    Returns:\n        Decoded payload dictionary\n        \n    Raises:\n        jwt.ExpiredSignatureError: If token has expired\n        jwt.InvalidTokenError: If token is invalid\n    \"\"\"\n    return jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n\n# Demonstration\nprint(\"=== JWT Token Creation Demo ===\")\nprint()\n\n# Create a token for a user\nuser_data = {\"sub\": \"alice@example.com\", \"role\": \"admin\"}\ntoken = create_access_token(user_data, timedelta(minutes=30))\n\nprint(f\"User data: {user_data}\")\nprint(f\"\\nGenerated token:\")\nprint(f\"  {token[:50]}...\")\nprint(f\"  Length: {len(token)} characters\")\nprint()\n\n# Decode the token\ndecoded = decode_token(token)\nprint(f\"Decoded payload:\")\nprint(f\"  sub: {decoded['sub']}\")\nprint(f\"  role: {decoded['role']}\")\nprint(f\"  exp: {datetime.fromtimestamp(decoded['exp'])}\")\nprint()\n\n# Show token structure\nparts = token.split('.')\nprint(\"Token structure:\")\nprint(f\"  Header:    {parts[0][:30]}...\")\nprint(f\"  Payload:   {parts[1][:30]}...\")\nprint(f\"  Signature: {parts[2][:30]}...\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Token-Based Login",
              "content": "**Login Endpoint with JWT**\n\nThis example shows how to implement a login endpoint that returns JWT tokens.\n\n**Flow:**\n1. User submits email/password via `OAuth2PasswordRequestForm`\n2. Server verifies credentials against database\n3. If valid, create and return access token\n4. Client stores token for subsequent requests\n\n**OAuth2PasswordRequestForm:**\n- FastAPI's built-in form for username/password\n- Follows OAuth2 spec (uses \"username\" field)\n- Automatically validates form data",
              "code": "from fastapi import FastAPI, HTTPException, Depends\nfrom fastapi.security import OAuth2PasswordRequestForm\nfrom sqlalchemy.ext.asyncio import AsyncSession\nimport jwt\nfrom datetime import datetime, timedelta\nfrom passlib.context import CryptContext\n\napp = FastAPI()\n\n# Password hashing\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\n\n# JWT settings\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\ndef create_access_token(data: dict) -> str:\n    \"\"\"Create JWT token with 30 minute expiration.\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=30)\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nasync def authenticate_user(db: AsyncSession, email: str, password: str):\n    \"\"\"Verify user credentials.\n    \n    Returns user if valid, None otherwise.\n    \"\"\"\n    user = await get_user_by_email(db, email)\n    if not user:\n        return None\n    if not pwd_context.verify(password, user.hashed_password):\n        return None\n    return user\n\n@app.post(\"/token\")\nasync def login(\n    form_data: OAuth2PasswordRequestForm = Depends(),\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Login endpoint - returns JWT access token.\n    \n    Expects form data with 'username' (email) and 'password' fields.\n    Returns access_token and token_type for OAuth2 compatibility.\n    \"\"\"\n    # Authenticate user\n    user = await authenticate_user(db, form_data.username, form_data.password)\n    if not user:\n        raise HTTPException(\n            status_code=401,\n            detail=\"Invalid credentials\",\n            headers={\"WWW-Authenticate\": \"Bearer\"}\n        )\n    \n    # Create access token with user email as subject\n    access_token = create_access_token(data={\"sub\": user.email})\n    \n    return {\n        \"access_token\": access_token,\n        \"token_type\": \"bearer\"\n    }\n\n# Demonstration of the flow\nprint(\"=== Token-Based Login Flow ===\")\nprint()\nprint(\"1. Client sends POST /token with form data:\")\nprint(\"   { username: 'alice@example.com', password: 'secret123' }\")\nprint()\nprint(\"2. Server authenticates:\")\nprint(\"   - Looks up user by email\")\nprint(\"   - Verifies password hash\")\nprint()\nprint(\"3. If valid, server responds:\")\nexample_token = jwt.encode(\n    {\"sub\": \"alice@example.com\", \"exp\": datetime.utcnow() + timedelta(minutes=30)},\n    SECRET_KEY,\n    algorithm=ALGORITHM\n)\nprint(f\"   {{ access_token: '{example_token[:40]}...', token_type: 'bearer' }}\")\nprint()\nprint(\"4. Client stores token and includes in subsequent requests:\")\nprint(\"   Authorization: Bearer <token>\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Protected Routes",
              "content": "**Protecting Endpoints with JWT**\n\nThis example shows how to create protected routes that require valid JWT tokens.\n\n**Key Components:**\n- `OAuth2PasswordBearer`: Extracts token from Authorization header\n- `get_current_user`: Dependency that validates token and returns user\n- Protected endpoints use `Depends(get_current_user)`\n\n**Error Handling:**\n- `ExpiredSignatureError`: Token has expired\n- `InvalidTokenError`: Token is malformed or signature invalid\n- Always return 401 for auth failures",
              "code": "from fastapi import FastAPI, Depends, HTTPException\nfrom fastapi.security import OAuth2PasswordBearer\nfrom sqlalchemy.ext.asyncio import AsyncSession\nimport jwt\nfrom datetime import datetime, timedelta\n\napp = FastAPI()\n\n# JWT settings\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\n# OAuth2 scheme - tells FastAPI where to find the token\n# tokenUrl points to our login endpoint\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n\ndef decode_token(token: str) -> dict:\n    \"\"\"Decode and verify JWT token.\"\"\"\n    return jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n\nasync def get_current_user(\n    token: str = Depends(oauth2_scheme),\n    db: AsyncSession = Depends(get_db)\n):\n    \"\"\"Dependency to get current authenticated user.\n    \n    Extracts and validates JWT from Authorization header,\n    then fetches the user from database.\n    \n    Raises HTTPException 401 if:\n    - Token is missing or invalid\n    - Token has expired\n    - User not found in database\n    \"\"\"\n    credentials_exception = HTTPException(\n        status_code=401,\n        detail=\"Could not validate credentials\",\n        headers={\"WWW-Authenticate\": \"Bearer\"}\n    )\n    \n    try:\n        # Decode and verify token\n        payload = decode_token(token)\n        email: str = payload.get(\"sub\")\n        if email is None:\n            raise credentials_exception\n    except jwt.ExpiredSignatureError:\n        raise HTTPException(\n            status_code=401,\n            detail=\"Token expired\",\n            headers={\"WWW-Authenticate\": \"Bearer\"}\n        )\n    except jwt.InvalidTokenError:\n        raise HTTPException(\n            status_code=401,\n            detail=\"Invalid token\",\n            headers={\"WWW-Authenticate\": \"Bearer\"}\n        )\n    \n    # Fetch user from database\n    user = await get_user_by_email(db, email)\n    if user is None:\n        raise credentials_exception\n    \n    return user\n\n# Protected endpoint - requires valid JWT\n@app.get(\"/users/me\")\nasync def read_users_me(current_user = Depends(get_current_user)):\n    \"\"\"Get current user's profile.\n    \n    This endpoint is protected - requires valid JWT token\n    in Authorization header.\n    \"\"\"\n    return {\n        \"id\": current_user.id,\n        \"email\": current_user.email,\n        \"name\": current_user.name\n    }\n\n@app.get(\"/users/me/items\")\nasync def read_own_items(current_user = Depends(get_current_user)):\n    \"\"\"Get current user's items.\n    \n    Another protected endpoint example.\n    \"\"\"\n    return {\"items\": [], \"owner\": current_user.email}\n\n# Demonstration\nprint(\"=== Protected Routes Demo ===\")\nprint()\nprint(\"Request to protected endpoint:\")\nprint(\"  GET /users/me\")\nprint(\"  Headers: { Authorization: 'Bearer eyJhbG...' }\")\nprint()\nprint(\"Server processing:\")\nprint(\"  1. OAuth2PasswordBearer extracts token from header\")\nprint(\"  2. get_current_user dependency validates token\")\nprint(\"  3. If valid, user object passed to endpoint\")\nprint(\"  4. Endpoint returns user data\")\nprint()\nprint(\"Possible responses:\")\nprint(\"  200: { id: 1, email: 'alice@example.com', name: 'Alice' }\")\nprint(\"  401: { detail: 'Token expired' }\")\nprint(\"  401: { detail: 'Invalid token' }\")\nprint(\"  401: { detail: 'Could not validate credentials' }\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "JWT Authentication Takeaways",
              "content": "**Core Concepts:**\n\n1. **JWT Structure** - Three parts: header.payload.signature\n   - Header: Algorithm info\n   - Payload: User claims (sub, exp, etc.)\n   - Signature: Verifies integrity\n\n2. **Use PyJWT** - Modern, maintained library\n   ```python\n   import jwt\n   token = jwt.encode(payload, secret, algorithm=\"HS256\")\n   data = jwt.decode(token, secret, algorithms=[\"HS256\"])\n   ```\n\n3. **Token Flow:**\n   - Login: Verify credentials, return token\n   - Requests: Include token in Authorization header\n   - Server: Validate token, extract user\n\n4. **Security Best Practices:**\n   - Short expiration (15-60 minutes)\n   - Store secrets in environment variables\n   - Use HTTPS in production\n   - Handle expiration gracefully\n\n**Quick Reference:**\n\n```python\n# Installation\nuv add pyjwt\n\n# Create token\ntoken = jwt.encode(\n    {\"sub\": email, \"exp\": datetime.utcnow() + timedelta(minutes=30)},\n    SECRET_KEY,\n    algorithm=\"HS256\"\n)\n\n# Verify token\ntry:\n    payload = jwt.decode(token, SECRET_KEY, algorithms=[\"HS256\"])\nexcept jwt.ExpiredSignatureError:\n    # Handle expired\nexcept jwt.InvalidTokenError:\n    # Handle invalid\n```\n\n**Security Checklist:**\n- [ ] Use pyjwt (not python-jose)\n- [ ] Set appropriate expiration times\n- [ ] Store SECRET_KEY in environment\n- [ ] Always validate tokens on protected routes\n- [ ] Return generic error messages\n- [ ] Use HTTPS in production"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-jwt-challenge",
              "title": "Build a JWT Authentication System",
              "description": "Create a complete JWT authentication system with token creation, validation, and protected routes.",
              "instructions": "Create a JWT authentication module that:\n\n1. Implements `create_access_token(data, expires_delta)` function\n2. Implements `decode_token(token)` function with error handling\n3. Creates a mock `get_current_user(token)` function that:\n   - Decodes the token\n   - Handles ExpiredSignatureError\n   - Handles InvalidTokenError\n   - Returns user data from token payload\n4. Demonstrates the complete flow:\n   - Create a token for a user\n   - Decode and validate it\n   - Handle an expired token\n   - Handle an invalid token",
              "starterCode": "import jwt\nfrom datetime import datetime, timedelta\nfrom typing import Optional\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\n# TODO: Implement create_access_token\ndef create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:\n    \"\"\"Create a JWT access token with expiration.\"\"\"\n    pass\n\n# TODO: Implement decode_token\ndef decode_token(token: str) -> dict:\n    \"\"\"Decode and verify a JWT token.\"\"\"\n    pass\n\n# TODO: Implement get_current_user\ndef get_current_user(token: str) -> Optional[dict]:\n    \"\"\"Get user from token.\n    \n    Returns user dict on success, None on failure.\n    Should handle ExpiredSignatureError and InvalidTokenError.\n    \"\"\"\n    pass\n\n# Test your implementation\nif __name__ == \"__main__\":\n    print(\"=== JWT Authentication Test ===\")\n    \n    # Test 1: Create and decode valid token\n    user_data = {\"sub\": \"alice@example.com\", \"role\": \"admin\"}\n    token = create_access_token(user_data, timedelta(minutes=30))\n    print(f\"1. Token created: {token[:40]}...\")\n    \n    # Test 2: Get user from valid token\n    user = get_current_user(token)\n    print(f\"2. User from token: {user}\")\n    \n    # Test 3: Handle expired token\n    expired_token = create_access_token(user_data, timedelta(seconds=-1))\n    expired_user = get_current_user(expired_token)\n    print(f\"3. Expired token result: {expired_user}\")\n    \n    # Test 4: Handle invalid token\n    invalid_user = get_current_user(\"invalid.token.here\")\n    print(f\"4. Invalid token result: {invalid_user}\")",
              "solution": "import jwt\nfrom datetime import datetime, timedelta\nfrom typing import Optional\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\ndef create_access_token(data: dict, expires_delta: Optional[timedelta] = None) -> str:\n    \"\"\"Create a JWT access token with expiration.\n    \n    Args:\n        data: Payload to encode (e.g., {\"sub\": \"user@example.com\"})\n        expires_delta: Optional custom expiration time\n        \n    Returns:\n        Encoded JWT token string\n    \"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + (expires_delta or timedelta(minutes=15))\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef decode_token(token: str) -> dict:\n    \"\"\"Decode and verify a JWT token.\n    \n    Args:\n        token: The JWT token string\n        \n    Returns:\n        Decoded payload dictionary\n        \n    Raises:\n        jwt.ExpiredSignatureError: If token has expired\n        jwt.InvalidTokenError: If token is invalid\n    \"\"\"\n    return jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n\ndef get_current_user(token: str) -> Optional[dict]:\n    \"\"\"Get user from token.\n    \n    Returns user dict on success, None on failure.\n    Handles ExpiredSignatureError and InvalidTokenError.\n    \"\"\"\n    try:\n        payload = decode_token(token)\n        email = payload.get(\"sub\")\n        if email is None:\n            return None\n        # Return user data from token\n        return {\n            \"email\": email,\n            \"role\": payload.get(\"role\"),\n            \"exp\": payload.get(\"exp\")\n        }\n    except jwt.ExpiredSignatureError:\n        print(\"  Error: Token has expired\")\n        return None\n    except jwt.InvalidTokenError:\n        print(\"  Error: Invalid token\")\n        return None\n\n# Test the implementation\nif __name__ == \"__main__\":\n    print(\"=== JWT Authentication Test ===\")\n    print()\n    \n    # Test 1: Create and decode valid token\n    user_data = {\"sub\": \"alice@example.com\", \"role\": \"admin\"}\n    token = create_access_token(user_data, timedelta(minutes=30))\n    print(f\"1. Token created: {token[:40]}...\")\n    \n    # Test 2: Get user from valid token\n    user = get_current_user(token)\n    print(f\"2. User from token: {user}\")\n    print()\n    \n    # Test 3: Handle expired token\n    print(\"3. Testing expired token:\")\n    expired_token = create_access_token(user_data, timedelta(seconds=-1))\n    expired_user = get_current_user(expired_token)\n    print(f\"   Result: {expired_user}\")\n    print()\n    \n    # Test 4: Handle invalid token\n    print(\"4. Testing invalid token:\")\n    invalid_user = get_current_user(\"invalid.token.here\")\n    print(f\"   Result: {invalid_user}\")\n    print()\n    \n    print(\"=== All tests completed ===\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-jwt-1",
                  "description": "create_access_token produces valid JWT",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-jwt-2",
                  "description": "decode_token extracts correct payload",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-jwt-3",
                  "description": "get_current_user returns user for valid token",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-jwt-4",
                  "description": "get_current_user returns None for expired token",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-jwt-5",
                  "description": "get_current_user returns None for invalid token",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use jwt.encode() with SECRET_KEY and algorithm to create tokens. Include an 'exp' claim for expiration."
                },
                {
                  "level": 2,
                  "text": "Use jwt.decode() with algorithms as a list [ALGORITHM]. Wrap in try/except to handle errors."
                },
                {
                  "level": 3,
                  "text": "Catch jwt.ExpiredSignatureError for expired tokens and jwt.InvalidTokenError for malformed tokens."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using python-jose instead of pyjwt",
                  "consequence": "python-jose is deprecated and may have security issues",
                  "correction": "Use pyjwt: 'uv add pyjwt' and 'import jwt'"
                },
                {
                  "mistake": "Storing SECRET_KEY in code",
                  "consequence": "Secret exposed in version control",
                  "correction": "Load from environment: os.getenv('SECRET_KEY')"
                },
                {
                  "mistake": "Not setting token expiration",
                  "consequence": "Tokens valid forever if stolen",
                  "correction": "Always include 'exp' claim with reasonable timeout"
                },
                {
                  "mistake": "Using algorithm as string in decode instead of list",
                  "consequence": "Can cause algorithm confusion attacks",
                  "correction": "Use algorithms=[ALGORITHM] (list) in jwt.decode()"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-oauth2",
          "title": "OAuth2 with FastAPI",
          "moduleId": "module-14",
          "order": 12,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "OAuth2 in FastAPI",
              "content": "**OAuth2 is the Industry Standard for Authorization**\n\nOAuth2 is a protocol that allows applications to securely authorize users without handling passwords directly. FastAPI has excellent built-in OAuth2 support.\n\n**Key Concepts:**\n\n1. **OAuth2 is a Standard Protocol**\n   - Industry-standard for authorization\n   - Used by Google, GitHub, Facebook, etc.\n   - Separates authentication from authorization\n\n2. **FastAPI's Built-in OAuth2 Support**\n   - `OAuth2PasswordBearer` - Token-based authentication\n   - `OAuth2PasswordRequestForm` - Standard login form\n   - Automatic OpenAPI documentation\n\n3. **Password Flow (Resource Owner Password Flow)**\n   - Best for your own first-party applications\n   - User sends username/password directly\n   - Server returns access token\n   - Simple but only use with trusted clients\n\n4. **Scopes for Permission Control**\n   - Define what actions a token can perform\n   - Examples: `read`, `write`, `admin`\n   - Fine-grained access control\n   - Token can have multiple scopes\n\n**OAuth2 Flow:**\n```\n1. Client sends credentials to /token endpoint\n2. Server validates credentials\n3. Server returns access_token (+ optional refresh_token)\n4. Client includes token in Authorization header\n5. Server validates token on each request\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete OAuth2 Setup",
              "content": "**Setting up OAuth2 with FastAPI:**\n\nThis example shows a complete OAuth2 password flow implementation with FastAPI. The `OAuth2PasswordBearer` creates a security scheme that expects a token from the `/token` endpoint.\n\n```python\nfrom fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\n\napp = FastAPI()\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n\n@app.post(\"/token\")\nasync def login(form_data: OAuth2PasswordRequestForm = Depends()):\n    user = await authenticate_user(form_data.username, form_data.password)\n    if not user:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail=\"Incorrect username or password\",\n            headers={\"WWW-Authenticate\": \"Bearer\"},\n        )\n    access_token = create_access_token(data={\"sub\": user.email})\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n```\n\n**Key Components:**\n- `OAuth2PasswordBearer(tokenUrl=\"token\")` - Declares the token endpoint\n- `OAuth2PasswordRequestForm` - Handles `username` and `password` form fields\n- Returns token in standard OAuth2 format: `{access_token, token_type}`",
              "code": "from fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\nfrom datetime import datetime, timedelta\nimport jwt\n\nprint(\"=== OAuth2 with FastAPI ===\")\n\n# Configuration\nSECRET_KEY = \"your-secret-key-here\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\n# Simulated user database\nfake_users_db = {\n    \"alice@example.com\": {\n        \"email\": \"alice@example.com\",\n        \"hashed_password\": \"fakehashed_secret123\",\n        \"full_name\": \"Alice Smith\",\n        \"disabled\": False\n    }\n}\n\nprint(\"\\n1. OAuth2PasswordBearer Setup:\")\nprint(\"   oauth2_scheme = OAuth2PasswordBearer(tokenUrl='token')\")\nprint(\"   - Declares /token as the endpoint for obtaining tokens\")\nprint(\"   - Automatically extracts Bearer token from Authorization header\")\n\ndef fake_hash_password(password: str) -> str:\n    return \"fakehashed_\" + password\n\ndef verify_password(plain_password: str, hashed_password: str) -> bool:\n    return fake_hash_password(plain_password) == hashed_password\n\ndef authenticate_user(email: str, password: str):\n    user = fake_users_db.get(email)\n    if not user:\n        return None\n    if not verify_password(password, user[\"hashed_password\"]):\n        return None\n    return user\n\ndef create_access_token(data: dict, expires_delta: timedelta = None) -> str:\n    to_encode = data.copy()\n    expire = datetime.utcnow() + (expires_delta or timedelta(minutes=15))\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nprint(\"\\n2. Token Endpoint Implementation:\")\nprint(\"   @app.post('/token')\")\nprint(\"   async def login(form_data: OAuth2PasswordRequestForm = Depends()):\")\nprint(\"       # Validate credentials\")\nprint(\"       # Return {access_token, token_type}\")\n\n# Simulate the login flow\nprint(\"\\n3. Simulating Login Flow:\")\n\n# Step 1: User sends credentials\nprint(\"\\n   Step 1: User sends credentials\")\nprint(\"   POST /token\")\nprint(\"   Content-Type: application/x-www-form-urlencoded\")\nprint(\"   Body: username=alice@example.com&password=secret123\")\n\n# Step 2: Server authenticates\nuser = authenticate_user(\"alice@example.com\", \"secret123\")\nif user:\n    print(f\"\\n   Step 2: Server authenticates user: {user['full_name']}\")\n    \n    # Step 3: Server creates token\n    access_token = create_access_token(\n        data={\"sub\": user[\"email\"]},\n        expires_delta=timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    )\n    print(f\"\\n   Step 3: Server creates access token\")\n    print(f\"   Token: {access_token[:50]}...\")\n    \n    # Step 4: Return OAuth2 response\n    response = {\"access_token\": access_token, \"token_type\": \"bearer\"}\n    print(f\"\\n   Step 4: Server returns OAuth2 response:\")\n    print(f\"   {response}\")\n\nprint(\"\\n4. Using the Token:\")\nprint(\"   GET /protected-route\")\nprint(\"   Authorization: Bearer <access_token>\")\n\nprint(\"\\n5. Protected Route Example:\")\nprint('''\n   @app.get(\"/users/me\")\n   async def read_users_me(token: str = Depends(oauth2_scheme)):\n       user = await get_current_user(token)\n       return user\n''')\n\nprint(\"\\n=== Complete OAuth2 Flow ===\")\nprint(\"\"\"\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Client  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ /token  ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ Server  ‚îÇ\n‚îÇ         ‚îÇ     ‚îÇ (POST)  ‚îÇ     ‚îÇ         ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n     ‚îÇ               ‚îÇ               ‚îÇ\n     ‚îÇ  username +   ‚îÇ               ‚îÇ\n     ‚îÇ  password     ‚îÇ               ‚îÇ\n     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ               ‚îÇ\n     ‚îÇ               ‚îÇ  validate     ‚îÇ\n     ‚îÇ               ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n     ‚îÇ               ‚îÇ               ‚îÇ\n     ‚îÇ               ‚îÇ  access_token ‚îÇ\n     ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ\n     ‚îÇ               ‚îÇ               ‚îÇ\n     ‚îÇ  Use token    ‚îÇ               ‚îÇ\n     ‚îÇ  in headers   ‚îÇ               ‚îÇ\n     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n     ‚îÇ               ‚îÇ               ‚îÇ\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Using Scopes",
              "content": "**Scopes provide fine-grained permission control:**\n\nScopes define what actions a token is authorized to perform. This allows you to create tokens with limited permissions.\n\n```python\nfrom fastapi.security import SecurityScopes\n\noauth2_scheme = OAuth2PasswordBearer(\n    tokenUrl=\"token\",\n    scopes={\"read\": \"Read access\", \"write\": \"Write access\", \"admin\": \"Admin access\"}\n)\n\nasync def get_current_user(\n    security_scopes: SecurityScopes,\n    token: str = Depends(oauth2_scheme)\n) -> User:\n    # Verify token and check scopes\n    ...\n\n@app.get(\"/admin/users\")\nasync def list_all_users(\n    current_user: User = Security(get_current_user, scopes=[\"admin\"])\n):\n    return await get_all_users()\n```\n\n**Common Scope Patterns:**\n- `read` - View data only\n- `write` - Create and modify data\n- `delete` - Remove data\n- `admin` - Full administrative access\n- `users:read`, `users:write` - Resource-specific scopes",
              "code": "from datetime import datetime, timedelta\nimport jwt\n\nprint(\"=== OAuth2 Scopes in FastAPI ===\")\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\n\nprint(\"\\n1. Defining Scopes:\")\nprint('''\n   oauth2_scheme = OAuth2PasswordBearer(\n       tokenUrl=\"token\",\n       scopes={\n           \"read\": \"Read access\",\n           \"write\": \"Write access\",\n           \"admin\": \"Admin access\"\n       }\n   )\n''')\n\nprint(\"\\n2. Creating Tokens with Scopes:\")\n\ndef create_access_token_with_scopes(data: dict, scopes: list) -> str:\n    to_encode = data.copy()\n    to_encode.update({\n        \"exp\": datetime.utcnow() + timedelta(minutes=30),\n        \"scopes\": scopes\n    })\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\n# Regular user token\nuser_token = create_access_token_with_scopes(\n    data={\"sub\": \"user@example.com\"},\n    scopes=[\"read\"]\n)\nprint(f\"\\n   Regular user token (read only):\")\nprint(f\"   {user_token[:60]}...\")\n\n# Admin token\nadmin_token = create_access_token_with_scopes(\n    data={\"sub\": \"admin@example.com\"},\n    scopes=[\"read\", \"write\", \"admin\"]\n)\nprint(f\"\\n   Admin token (full access):\")\nprint(f\"   {admin_token[:60]}...\")\n\nprint(\"\\n3. Verifying Scopes:\")\n\ndef verify_token_scopes(token: str, required_scopes: list) -> dict:\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        token_scopes = payload.get(\"scopes\", [])\n        \n        # Check if all required scopes are present\n        for scope in required_scopes:\n            if scope not in token_scopes:\n                return {\"valid\": False, \"error\": f\"Missing scope: {scope}\"}\n        \n        return {\n            \"valid\": True,\n            \"user\": payload.get(\"sub\"),\n            \"scopes\": token_scopes\n        }\n    except jwt.InvalidTokenError:\n        return {\"valid\": False, \"error\": \"Invalid token\"}\n\n# Test scope verification\nprint(\"\\n   Testing regular user token for 'read' scope:\")\nresult = verify_token_scopes(user_token, [\"read\"])\nprint(f\"   {result}\")\n\nprint(\"\\n   Testing regular user token for 'admin' scope:\")\nresult = verify_token_scopes(user_token, [\"admin\"])\nprint(f\"   {result}\")\n\nprint(\"\\n   Testing admin token for 'admin' scope:\")\nresult = verify_token_scopes(admin_token, [\"admin\"])\nprint(f\"   {result}\")\n\nprint(\"\\n4. FastAPI Security Dependency:\")\nprint('''\n   from fastapi import Security\n   from fastapi.security import SecurityScopes\n   \n   async def get_current_user(\n       security_scopes: SecurityScopes,\n       token: str = Depends(oauth2_scheme)\n   ) -> User:\n       # Decode token\n       payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n       \n       # Get token scopes\n       token_scopes = payload.get(\"scopes\", [])\n       \n       # Verify required scopes\n       for scope in security_scopes.scopes:\n           if scope not in token_scopes:\n               raise HTTPException(\n                   status_code=403,\n                   detail=f\"Not enough permissions. Required: {scope}\"\n               )\n       \n       return await get_user_by_email(payload.get(\"sub\"))\n''')\n\nprint(\"\\n5. Protecting Routes with Scopes:\")\nprint('''\n   @app.get(\"/items\")\n   async def read_items(\n       user: User = Security(get_current_user, scopes=[\"read\"])\n   ):\n       return await get_all_items()\n   \n   @app.post(\"/items\")\n   async def create_item(\n       item: Item,\n       user: User = Security(get_current_user, scopes=[\"write\"])\n   ):\n       return await save_item(item)\n   \n   @app.get(\"/admin/users\")\n   async def list_all_users(\n       user: User = Security(get_current_user, scopes=[\"admin\"])\n   ):\n       return await get_all_users()\n''')\n\nprint(\"\\n=== Scope Hierarchy Pattern ===\")\nprint(\"\"\"\n   admin ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>\n     ‚îÇ                             ‚îÇ\n     ‚îú‚îÄ‚îÄ write ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ  All permissions\n     ‚îÇ     ‚îÇ                       ‚îÇ\n     ‚îÇ     ‚îî‚îÄ‚îÄ read ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ> ‚îÇ\n     ‚îÇ                             ‚îÇ\n   \n   Users can have multiple scopes:\n   - Regular user: [\"read\"]\n   - Editor: [\"read\", \"write\"]\n   - Admin: [\"read\", \"write\", \"admin\"]\n\"\"\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Refresh Tokens",
              "content": "**Refresh tokens allow obtaining new access tokens without re-authenticating:**\n\nAccess tokens are short-lived (15-60 minutes). Refresh tokens are long-lived (days/weeks) and can be exchanged for new access tokens.\n\n```python\nREFRESH_TOKEN_EXPIRE_DAYS = 7\n\ndef create_refresh_token(data: dict) -> str:\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(days=REFRESH_TOKEN_EXPIRE_DAYS)\n    to_encode.update({\"exp\": expire, \"type\": \"refresh\"})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\n@app.post(\"/token/refresh\")\nasync def refresh_token(refresh_token: str):\n    try:\n        payload = jwt.decode(refresh_token, SECRET_KEY, algorithms=[ALGORITHM])\n        if payload.get(\"type\") != \"refresh\":\n            raise HTTPException(status_code=401, detail=\"Invalid token type\")\n        email = payload.get(\"sub\")\n        new_access_token = create_access_token(data={\"sub\": email})\n        return {\"access_token\": new_access_token, \"token_type\": \"bearer\"}\n    except jwt.ExpiredSignatureError:\n        raise HTTPException(status_code=401, detail=\"Refresh token expired\")\n```\n\n**Why Use Refresh Tokens?**\n- Access tokens expire quickly for security\n- Users don't have to log in repeatedly\n- Refresh tokens can be revoked server-side",
              "code": "from datetime import datetime, timedelta\nimport jwt\n\nprint(\"=== Refresh Tokens ===\")\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\nREFRESH_TOKEN_EXPIRE_DAYS = 7\n\nprint(\"\\n1. Token Expiration Strategy:\")\nprint(f\"   Access Token: {ACCESS_TOKEN_EXPIRE_MINUTES} minutes (short-lived)\")\nprint(f\"   Refresh Token: {REFRESH_TOKEN_EXPIRE_DAYS} days (long-lived)\")\n\ndef create_access_token(data: dict) -> str:\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode.update({\"exp\": expire, \"type\": \"access\"})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef create_refresh_token(data: dict) -> str:\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(days=REFRESH_TOKEN_EXPIRE_DAYS)\n    to_encode.update({\"exp\": expire, \"type\": \"refresh\"})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nprint(\"\\n2. Creating Both Tokens on Login:\")\n\nuser_email = \"alice@example.com\"\n\naccess_token = create_access_token(data={\"sub\": user_email})\nrefresh_token = create_refresh_token(data={\"sub\": user_email})\n\nprint(f\"\\n   Access Token: {access_token[:50]}...\")\nprint(f\"   Refresh Token: {refresh_token[:50]}...\")\n\nlogin_response = {\n    \"access_token\": access_token,\n    \"refresh_token\": refresh_token,\n    \"token_type\": \"bearer\"\n}\nprint(f\"\\n   Login Response: {{\")\nprint(f\"       access_token: '...',\")\nprint(f\"       refresh_token: '...',\")\nprint(f\"       token_type: 'bearer'\")\nprint(f\"   }}\")\n\nprint(\"\\n3. Refresh Token Endpoint:\")\n\ndef refresh_access_token(refresh_token: str) -> dict:\n    try:\n        payload = jwt.decode(refresh_token, SECRET_KEY, algorithms=[ALGORITHM])\n        \n        # Verify this is a refresh token\n        if payload.get(\"type\") != \"refresh\":\n            return {\"error\": \"Invalid token type\"}\n        \n        # Get user email from token\n        email = payload.get(\"sub\")\n        \n        # Create new access token\n        new_access_token = create_access_token(data={\"sub\": email})\n        \n        return {\n            \"access_token\": new_access_token,\n            \"token_type\": \"bearer\"\n        }\n        \n    except jwt.ExpiredSignatureError:\n        return {\"error\": \"Refresh token expired - please login again\"}\n    except jwt.InvalidTokenError:\n        return {\"error\": \"Invalid refresh token\"}\n\nprint(\"\\n   Testing refresh endpoint:\")\nresult = refresh_access_token(refresh_token)\nif \"access_token\" in result:\n    print(f\"   New Access Token: {result['access_token'][:50]}...\")\n    print(f\"   Token Type: {result['token_type']}\")\nelse:\n    print(f\"   Error: {result['error']}\")\n\nprint(\"\\n4. Handling Expired Refresh Token:\")\nexpired_refresh = jwt.encode(\n    {\"sub\": user_email, \"exp\": datetime.utcnow() - timedelta(days=1), \"type\": \"refresh\"},\n    SECRET_KEY,\n    algorithm=ALGORITHM\n)\nresult = refresh_access_token(expired_refresh)\nprint(f\"   Result: {result}\")\n\nprint(\"\\n5. FastAPI Refresh Endpoint:\")\nprint('''\n   @app.post(\"/token/refresh\")\n   async def refresh_token(refresh_token: str):\n       try:\n           payload = jwt.decode(\n               refresh_token, SECRET_KEY, algorithms=[ALGORITHM]\n           )\n           if payload.get(\"type\") != \"refresh\":\n               raise HTTPException(\n                   status_code=401,\n                   detail=\"Invalid token type\"\n               )\n           email = payload.get(\"sub\")\n           new_access_token = create_access_token(data={\"sub\": email})\n           return {\n               \"access_token\": new_access_token,\n               \"token_type\": \"bearer\"\n           }\n       except jwt.ExpiredSignatureError:\n           raise HTTPException(\n               status_code=401,\n               detail=\"Refresh token expired\"\n           )\n''')\n\nprint(\"\\n=== Token Refresh Flow ===\")\nprint(\"\"\"\n   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n   ‚îÇ Client  ‚îÇ                    ‚îÇ Server  ‚îÇ\n   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 1. Login (username/password) ‚îÇ\n        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 2. access_token + refresh    ‚îÇ\n        ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 3. API request (access_token)‚îÇ\n        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ     ...time passes...        ‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 4. Access token expired!     ‚îÇ\n        ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 5. POST /token/refresh       ‚îÇ\n        ‚îÇ    (with refresh_token)      ‚îÇ\n        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 6. New access_token          ‚îÇ\n        ‚îÇ<‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ\n        ‚îÇ                              ‚îÇ\n        ‚îÇ 7. Continue with new token   ‚îÇ\n        ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ>‚îÇ\n\"\"\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "OAuth2 with FastAPI Takeaways",
              "content": "**Core Concepts:**\n\n1. **OAuth2 is the Standard** - Industry-wide authorization protocol\n   - FastAPI has built-in OAuth2 support\n   - Automatic OpenAPI documentation\n   - Works with any OAuth2 client\n\n2. **OAuth2PasswordBearer** - Token-based auth\n   ```python\n   oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"token\")\n   ```\n\n3. **Token Endpoint Pattern:**\n   ```python\n   @app.post(\"/token\")\n   async def login(form_data: OAuth2PasswordRequestForm = Depends()):\n       user = authenticate_user(form_data.username, form_data.password)\n       token = create_access_token(data={\"sub\": user.email})\n       return {\"access_token\": token, \"token_type\": \"bearer\"}\n   ```\n\n4. **Scopes for Permissions:**\n   - Define: `scopes={\"read\": \"Read access\", \"admin\": \"Admin access\"}`\n   - Protect: `Security(get_current_user, scopes=[\"admin\"])`\n   - Check in token validation\n\n5. **Refresh Tokens:**\n   - Short access tokens (15-60 min)\n   - Long refresh tokens (days/weeks)\n   - Exchange refresh for new access token\n\n**Security Best Practices:**\n- [ ] Use HTTPS in production\n- [ ] Store tokens securely (httpOnly cookies or secure storage)\n- [ ] Short access token expiration\n- [ ] Validate refresh token type\n- [ ] Consider token revocation for refresh tokens\n- [ ] Use scopes for fine-grained access control"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-oauth2-challenge",
              "title": "Build an OAuth2 Authentication System",
              "description": "Create a complete OAuth2 authentication system with scopes and refresh tokens.",
              "instructions": "Create an OAuth2 authentication module that:\n\n1. Implements `create_access_token(data, scopes)` with scope support\n2. Implements `create_refresh_token(data)` for token refresh\n3. Implements `verify_token_scopes(token, required_scopes)` that:\n   - Decodes the token\n   - Checks if all required scopes are present\n   - Returns user info or raises an error\n4. Implements `refresh_access_token(refresh_token)` that:\n   - Validates the refresh token type\n   - Returns a new access token\n5. Demonstrates the complete flow with different user roles",
              "starterCode": "import jwt\nfrom datetime import datetime, timedelta\nfrom typing import Optional, List\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\nREFRESH_TOKEN_EXPIRE_DAYS = 7\n\n# TODO: Implement create_access_token with scopes\ndef create_access_token(data: dict, scopes: List[str] = None) -> str:\n    \"\"\"Create an access token with optional scopes.\"\"\"\n    pass\n\n# TODO: Implement create_refresh_token\ndef create_refresh_token(data: dict) -> str:\n    \"\"\"Create a refresh token.\"\"\"\n    pass\n\n# TODO: Implement verify_token_scopes\ndef verify_token_scopes(token: str, required_scopes: List[str]) -> dict:\n    \"\"\"Verify token and check for required scopes.\n    \n    Returns dict with 'valid', 'user', 'scopes' on success.\n    Returns dict with 'valid': False, 'error' on failure.\n    \"\"\"\n    pass\n\n# TODO: Implement refresh_access_token\ndef refresh_access_token(refresh_token: str, scopes: List[str] = None) -> dict:\n    \"\"\"Exchange refresh token for new access token.\n    \n    Returns dict with 'access_token', 'token_type' on success.\n    Returns dict with 'error' on failure.\n    \"\"\"\n    pass\n\n# Test your implementation\nif __name__ == \"__main__\":\n    print(\"=== OAuth2 Authentication Test ===\")\n    \n    # Test 1: Create tokens for regular user\n    print(\"\\n1. Creating tokens for regular user...\")\n    user_data = {\"sub\": \"user@example.com\"}\n    access_token = create_access_token(user_data, scopes=[\"read\"])\n    refresh_token = create_refresh_token(user_data)\n    print(f\"   Access Token: {access_token[:40]}...\")\n    print(f\"   Refresh Token: {refresh_token[:40]}...\")\n    \n    # Test 2: Verify read scope (should succeed)\n    print(\"\\n2. Verifying 'read' scope...\")\n    result = verify_token_scopes(access_token, [\"read\"])\n    print(f\"   Result: {result}\")\n    \n    # Test 3: Verify admin scope (should fail)\n    print(\"\\n3. Verifying 'admin' scope...\")\n    result = verify_token_scopes(access_token, [\"admin\"])\n    print(f\"   Result: {result}\")\n    \n    # Test 4: Create admin token and verify\n    print(\"\\n4. Creating admin token...\")\n    admin_data = {\"sub\": \"admin@example.com\"}\n    admin_token = create_access_token(admin_data, scopes=[\"read\", \"write\", \"admin\"])\n    result = verify_token_scopes(admin_token, [\"admin\"])\n    print(f\"   Admin scope check: {result}\")\n    \n    # Test 5: Refresh token\n    print(\"\\n5. Refreshing access token...\")\n    new_tokens = refresh_access_token(refresh_token, scopes=[\"read\"])\n    print(f\"   New tokens: {new_tokens}\")",
              "solution": "import jwt\nfrom datetime import datetime, timedelta\nfrom typing import Optional, List\n\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\nREFRESH_TOKEN_EXPIRE_DAYS = 7\n\ndef create_access_token(data: dict, scopes: List[str] = None) -> str:\n    \"\"\"Create an access token with optional scopes.\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode.update({\n        \"exp\": expire,\n        \"type\": \"access\",\n        \"scopes\": scopes or []\n    })\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef create_refresh_token(data: dict) -> str:\n    \"\"\"Create a refresh token.\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(days=REFRESH_TOKEN_EXPIRE_DAYS)\n    to_encode.update({\n        \"exp\": expire,\n        \"type\": \"refresh\"\n    })\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\ndef verify_token_scopes(token: str, required_scopes: List[str]) -> dict:\n    \"\"\"Verify token and check for required scopes.\"\"\"\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        token_scopes = payload.get(\"scopes\", [])\n        \n        # Check all required scopes are present\n        for scope in required_scopes:\n            if scope not in token_scopes:\n                return {\n                    \"valid\": False,\n                    \"error\": f\"Missing required scope: {scope}\"\n                }\n        \n        return {\n            \"valid\": True,\n            \"user\": payload.get(\"sub\"),\n            \"scopes\": token_scopes\n        }\n    except jwt.ExpiredSignatureError:\n        return {\"valid\": False, \"error\": \"Token expired\"}\n    except jwt.InvalidTokenError:\n        return {\"valid\": False, \"error\": \"Invalid token\"}\n\ndef refresh_access_token(refresh_token: str, scopes: List[str] = None) -> dict:\n    \"\"\"Exchange refresh token for new access token.\"\"\"\n    try:\n        payload = jwt.decode(refresh_token, SECRET_KEY, algorithms=[ALGORITHM])\n        \n        # Verify this is a refresh token\n        if payload.get(\"type\") != \"refresh\":\n            return {\"error\": \"Invalid token type - expected refresh token\"}\n        \n        # Get user from token\n        user_email = payload.get(\"sub\")\n        if not user_email:\n            return {\"error\": \"Invalid token - no user\"}\n        \n        # Create new access token\n        new_access_token = create_access_token(\n            data={\"sub\": user_email},\n            scopes=scopes or []\n        )\n        \n        return {\n            \"access_token\": new_access_token,\n            \"token_type\": \"bearer\"\n        }\n    except jwt.ExpiredSignatureError:\n        return {\"error\": \"Refresh token expired - please login again\"}\n    except jwt.InvalidTokenError:\n        return {\"error\": \"Invalid refresh token\"}\n\n# Test the implementation\nif __name__ == \"__main__\":\n    print(\"=== OAuth2 Authentication Test ===\")\n    \n    # Test 1: Create tokens for regular user\n    print(\"\\n1. Creating tokens for regular user...\")\n    user_data = {\"sub\": \"user@example.com\"}\n    access_token = create_access_token(user_data, scopes=[\"read\"])\n    refresh_token = create_refresh_token(user_data)\n    print(f\"   Access Token: {access_token[:40]}...\")\n    print(f\"   Refresh Token: {refresh_token[:40]}...\")\n    \n    # Test 2: Verify read scope (should succeed)\n    print(\"\\n2. Verifying 'read' scope...\")\n    result = verify_token_scopes(access_token, [\"read\"])\n    print(f\"   Result: {result}\")\n    \n    # Test 3: Verify admin scope (should fail)\n    print(\"\\n3. Verifying 'admin' scope...\")\n    result = verify_token_scopes(access_token, [\"admin\"])\n    print(f\"   Result: {result}\")\n    \n    # Test 4: Create admin token and verify\n    print(\"\\n4. Creating admin token...\")\n    admin_data = {\"sub\": \"admin@example.com\"}\n    admin_token = create_access_token(admin_data, scopes=[\"read\", \"write\", \"admin\"])\n    result = verify_token_scopes(admin_token, [\"admin\"])\n    print(f\"   Admin scope check: {result}\")\n    \n    # Test 5: Refresh token\n    print(\"\\n5. Refreshing access token...\")\n    new_tokens = refresh_access_token(refresh_token, scopes=[\"read\"])\n    print(f\"   New tokens: {new_tokens}\")\n    \n    # Verify new access token works\n    if \"access_token\" in new_tokens:\n        result = verify_token_scopes(new_tokens[\"access_token\"], [\"read\"])\n        print(f\"   New token verification: {result}\")\n    \n    print(\"\\n=== All tests completed ===\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-oauth2-1",
                  "description": "create_access_token produces valid JWT with scopes",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-oauth2-2",
                  "description": "create_refresh_token produces valid refresh token",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-oauth2-3",
                  "description": "verify_token_scopes succeeds for valid scopes",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-oauth2-4",
                  "description": "verify_token_scopes fails for missing scopes",
                  "expectedOutput": "",
                  "isVisible": true
                },
                {
                  "id": "test-oauth2-5",
                  "description": "refresh_access_token returns new access token",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Include 'type' field in tokens to distinguish access from refresh tokens. Use 'scopes' as a list in the payload."
                },
                {
                  "level": 2,
                  "text": "In verify_token_scopes, iterate through required_scopes and check each one is in token_scopes."
                },
                {
                  "level": 3,
                  "text": "In refresh_access_token, first check payload.get('type') == 'refresh' before creating a new access token."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not distinguishing token types",
                  "consequence": "Access tokens could be used as refresh tokens",
                  "correction": "Add 'type': 'access' or 'type': 'refresh' to token payload"
                },
                {
                  "mistake": "Not validating scopes on every request",
                  "consequence": "Users can access routes without proper permissions",
                  "correction": "Always check required scopes against token scopes"
                },
                {
                  "mistake": "Storing refresh tokens client-side insecurely",
                  "consequence": "Tokens can be stolen via XSS attacks",
                  "correction": "Use httpOnly cookies or secure storage for refresh tokens"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-why-django",
          "title": "Why Django?",
          "moduleId": "module-14",
          "order": 13,
          "estimatedMinutes": 25,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Django vs FastAPI - When to Choose Each",
              "content": "**Django vs FastAPI: Two Excellent Choices**\n\nBoth Django and FastAPI are production-ready Python web frameworks, but they excel in different scenarios.\n\n**Django - The Batteries-Included Framework**\n- Full-stack web framework with everything built-in\n- Admin panel auto-generated from your models\n- Powerful ORM for database operations\n- Template engine for server-rendered HTML\n- Built-in authentication and authorization\n- Best for: Full web applications, rapid prototyping, content sites\n\n**FastAPI - The Modern API Framework**\n- API-focused with automatic OpenAPI documentation\n- Async-first design for high performance\n- Pydantic integration for validation\n- Lightweight and flexible\n- Best for: REST APIs, microservices, real-time applications\n\n**Choose Django When:**\n- You need an admin interface for content management\n- Building a full web app with templates (not just an API)\n- Rapid prototyping where speed of development matters\n- You want everything included out of the box\n- Working with relational databases extensively\n\n**Choose FastAPI When:**\n- Building pure REST APIs or GraphQL services\n- Need async/await for I/O-bound operations\n- Building microservices architecture\n- Performance is critical (FastAPI is faster for APIs)\n- You want more control and flexibility\n\n**Real-World Examples:**\n- Instagram, Pinterest, Spotify - Django\n- Netflix, Uber, Microsoft - FastAPI\n\n**Key Insight:** Many companies use both! Django for admin/CMS, FastAPI for APIs."
            },
            {
              "type": "EXAMPLE",
              "title": "Django's Batteries-Included Philosophy",
              "content": "**What You Get Out of the Box:**\n\nDjango follows the \"batteries-included\" philosophy - everything you need is built-in.\n\n**1. Admin Interface (Auto-generated CRUD)**\n```python\n# Just register your model\nfrom django.contrib import admin\nfrom .models import Product\n\nadmin.site.register(Product)\n# Now you have a full admin UI at /admin/\n```\n\n**2. ORM (Simpler than SQLAlchemy)**\n```python\n# Define model\nclass Product(models.Model):\n    name = models.CharField(max_length=100)\n    price = models.DecimalField(max_digits=10, decimal_places=2)\n\n# Query (no session management needed)\nProduct.objects.filter(price__lt=50).order_by('name')\n```\n\n**3. Built-in Authentication**\n```python\nfrom django.contrib.auth.decorators import login_required\n\n@login_required\ndef dashboard(request):\n    return render(request, 'dashboard.html')\n```\n\n**4. Forms and Validation**\n```python\nfrom django import forms\n\nclass ProductForm(forms.ModelForm):\n    class Meta:\n        model = Product\n        fields = ['name', 'price']\n# Auto-validates, auto-generates HTML\n```\n\n**5. Template Engine**\n```html\n{% for product in products %}\n  <h2>{{ product.name }}</h2>\n  <p>${{ product.price }}</p>\n{% endfor %}\n```\n\n**6. Security Features**\n- CSRF protection (automatic)\n- XSS protection (auto-escaped templates)\n- SQL injection prevention (ORM)\n- Clickjacking protection\n- Password hashing (bcrypt by default)"
            },
            {
              "type": "EXAMPLE",
              "title": "Django Project Structure",
              "content": "**Standard Django Project Layout:**\n\n```\nmyproject/\n|-- manage.py           # CLI tool for Django commands\n|-- myproject/\n|   |-- __init__.py\n|   |-- settings.py     # Configuration (database, apps, etc.)\n|   |-- urls.py         # URL routing (main router)\n|   |-- wsgi.py         # WSGI entry point (production)\n|   |-- asgi.py         # ASGI entry point (async)\n|-- myapp/\n|   |-- __init__.py\n|   |-- admin.py        # Admin configuration\n|   |-- models.py       # Database models (ORM)\n|   |-- views.py        # Request handlers\n|   |-- urls.py         # App-specific URLs\n|   |-- tests.py        # Tests\n|   |-- forms.py        # Form definitions\n|   |-- templates/      # HTML templates\n|   |-- static/         # CSS, JS, images\n|   |-- migrations/     # Database migrations\n```\n\n**Key Concepts:**\n\n- **Project vs App:** A project contains multiple apps. Apps are reusable components.\n- **settings.py:** Central configuration - database, installed apps, middleware\n- **urls.py:** Maps URLs to views (like FastAPI's path decorators)\n- **models.py:** Define your database schema with Python classes\n- **views.py:** Handle requests and return responses\n- **admin.py:** Register models for the admin interface\n\n**Django's MVT Pattern:**\n- **Model:** Data layer (models.py)\n- **View:** Logic layer (views.py)\n- **Template:** Presentation layer (templates/)"
            },
            {
              "type": "EXAMPLE",
              "title": "Quick Django Setup",
              "content": "**Getting Started with Django:**\n\n```bash\n# Install Django\nuv add django\n\n# Create project\ndjango-admin startproject finance_project\ncd finance_project\n\n# Create app\npython manage.py startapp tracker\n\n# Run development server\npython manage.py runserver\n```\n\n**After Running These Commands:**\n\n1. Visit http://127.0.0.1:8000/ to see the welcome page\n2. Visit http://127.0.0.1:8000/admin/ for the admin interface\n\n**Next Steps:**\n\n```python\n# 1. Add app to settings.py\nINSTALLED_APPS = [\n    ...\n    'tracker',\n]\n\n# 2. Create a model (tracker/models.py)\nfrom django.db import models\n\nclass Expense(models.Model):\n    description = models.CharField(max_length=200)\n    amount = models.DecimalField(max_digits=10, decimal_places=2)\n    date = models.DateField(auto_now_add=True)\n\n# 3. Create migrations\npython manage.py makemigrations\npython manage.py migrate\n\n# 4. Create superuser for admin\npython manage.py createsuperuser\n\n# 5. Register in admin (tracker/admin.py)\nfrom django.contrib import admin\nfrom .models import Expense\nadmin.site.register(Expense)\n```\n\n**You Now Have:**\n- A running web server\n- Admin interface with login\n- Database with your Expense model\n- Full CRUD via admin panel"
            },
            {
              "type": "KEY_POINT",
              "title": "Why Django? - Key Takeaways",
              "content": "**When to Use Django:**\n\n- **Admin interface needed:** Auto-generated CRUD for content management\n- **Full web application:** Templates, forms, authentication built-in\n- **Rapid development:** Get from idea to working app quickly\n- **Team projects:** Strong conventions mean consistent code\n- **Relational databases:** Django ORM is excellent\n\n**When to Use FastAPI Instead:**\n\n- **Pure APIs:** No templates or admin needed\n- **Async required:** WebSockets, real-time features\n- **Microservices:** Lightweight, containerized services\n- **Maximum performance:** FastAPI is faster for API workloads\n\n**Key Django Features:**\n\n1. **Batteries-included** - Everything you need out of the box\n2. **Admin panel** - Production-ready CRUD interface automatically\n3. **ORM** - Database operations without SQL\n4. **Security** - CSRF, XSS, SQL injection protection by default\n5. **Scalable** - Powers Instagram, Pinterest, Spotify\n\n**Bottom Line:**\n\n- Building a website with admin? **Django**\n- Building an API for a mobile app? **FastAPI**\n- Building both? Use both! They work great together."
            }
          ],
          "challenges": [
            {
              "type": "QUIZ",
              "id": "module-14-lesson-why-django-quiz",
              "title": "Django vs FastAPI Decision Making",
              "description": "Test your understanding of when to choose Django vs FastAPI.",
              "question": "You're building a content management system (CMS) where editors need to create, edit, and delete articles through a web interface. The site will also have a public-facing blog. Which framework is the better choice and why?",
              "options": [
                "FastAPI - because it has better documentation",
                "Django - because it has a built-in admin panel and template engine",
                "FastAPI - because it's async and faster",
                "Django - because it's older and more stable"
              ],
              "correctAnswer": 1,
              "explanation": "Django is the clear winner for CMS projects. Its auto-generated admin panel gives editors a ready-to-use interface for managing content without writing custom code. The built-in template engine handles the public blog pages. While FastAPI is faster for pure APIs, you'd have to build the entire admin interface and templating from scratch.",
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-django-models",
          "title": "Django Models & Admin",
          "moduleId": "module-14",
          "order": 14,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Django ORM",
              "content": "**Django ORM - Simpler Database Operations**\n\nDjango's ORM (Object-Relational Mapper) lets you work with databases using Python classes instead of raw SQL.\n\n**Key Concepts:**\n\n**1. Models = Python Classes That Map to Database Tables**\n```python\nclass Category(models.Model):\n    name = models.CharField(max_length=50)\n```\nThis creates a `category` table with an auto-generated `id` and a `name` column.\n\n**2. Simpler Than SQLAlchemy (More Opinionated)**\n\n| SQLAlchemy | Django |\n|------------|--------|\n| Requires explicit session management | Automatic connection handling |\n| Multiple query syntaxes | One consistent API |\n| Flexible but complex | Convention over configuration |\n\nDjango makes decisions for you - less flexibility, but faster development.\n\n**3. Migrations Handled Automatically**\n\n```bash\npython manage.py makemigrations  # Detect model changes\npython manage.py migrate          # Apply to database\n```\n\nDjango generates migration files automatically when you change your models.\n\n**Common Field Types:**\n- `CharField(max_length=N)` - Short text\n- `TextField()` - Long text\n- `IntegerField()` - Whole numbers\n- `DecimalField(max_digits, decimal_places)` - Money/precise decimals\n- `BooleanField()` - True/False\n- `DateTimeField()` - Date and time\n- `ForeignKey(Model, on_delete=...)` - Relationships"
            },
            {
              "type": "EXAMPLE",
              "title": "Creating Models",
              "content": "**Building a Finance Tracker with Django Models**\n\nLet's create models for tracking personal finances:\n\n**Key Patterns:**\n\n1. **Model Meta Class** - Configure model behavior\n```python\nclass Meta:\n    verbose_name_plural = \"categories\"  # Admin display name\n```\n\n2. **`__str__` Method** - Human-readable representation\n```python\ndef __str__(self):\n    return self.name  # Shows in admin and shell\n```\n\n3. **Choices for Fixed Options**\n```python\nTRANSACTION_TYPES = [\n    ('income', 'Income'),\n    ('expense', 'Expense'),\n]\n```\n\n4. **ForeignKey Relationships**\n```python\nuser = models.ForeignKey(User, on_delete=models.CASCADE)\n# CASCADE: Delete transactions if user is deleted\n# SET_NULL: Set to null if related object deleted\n# PROTECT: Prevent deletion if related objects exist\n```\n\n5. **Auto Timestamps**\n```python\ncreated_at = models.DateTimeField(auto_now_add=True)  # Set on create\nupdated_at = models.DateTimeField(auto_now=True)      # Update on save\n```",
              "code": "# tracker/models.py\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nclass Category(models.Model):\n    \"\"\"Expense/Income category for organizing transactions.\"\"\"\n    name = models.CharField(max_length=50)\n    description = models.TextField(blank=True)\n    \n    class Meta:\n        verbose_name_plural = \"categories\"\n    \n    def __str__(self):\n        return self.name\n\nclass Transaction(models.Model):\n    \"\"\"Financial transaction record.\"\"\"\n    TRANSACTION_TYPES = [\n        ('income', 'Income'),\n        ('expense', 'Expense'),\n    ]\n    \n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    amount = models.DecimalField(max_digits=10, decimal_places=2)\n    category = models.ForeignKey(Category, on_delete=models.SET_NULL, null=True)\n    transaction_type = models.CharField(max_length=10, choices=TRANSACTION_TYPES)\n    description = models.TextField(blank=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    def __str__(self):\n        return f\"{self.transaction_type}: ${self.amount}\"\n\n\n# Example usage in Django shell:\nprint(\"=== Django Models Example ===\")\nprint(\"\\nModel definitions created:\")\nprint(\"  - Category: name, description\")\nprint(\"  - Transaction: user, amount, category, type, description, created_at\")\n\nprint(\"\\nField types used:\")\nprint(\"  - CharField: Short text with max length\")\nprint(\"  - TextField: Long text (blank=True for optional)\")\nprint(\"  - DecimalField: Precise decimal numbers (for money)\")\nprint(\"  - ForeignKey: Relationship to another model\")\nprint(\"  - DateTimeField: Timestamps (auto_now_add for creation)\")\n\nprint(\"\\nRelationship behaviors:\")\nprint(\"  - CASCADE: Delete related objects when parent deleted\")\nprint(\"  - SET_NULL: Set to null when related object deleted\")\nprint(\"  - PROTECT: Prevent deletion if related objects exist\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Migrations",
              "content": "**Database Migrations with Django**\n\nMigrations track changes to your models and apply them to the database.\n\n**Migration Workflow:**\n\n1. **Make changes to models.py**\n2. **Generate migration files:**\n   ```bash\n   python manage.py makemigrations\n   ```\n   Creates a file like `0001_initial.py` in `migrations/` folder\n\n3. **Apply migrations to database:**\n   ```bash\n   python manage.py migrate\n   ```\n   Executes the SQL to create/alter tables\n\n**Useful Commands:**\n\n- **See pending migrations:**\n  ```bash\n  python manage.py showmigrations\n  ```\n\n- **See generated SQL:**\n  ```bash\n  python manage.py sqlmigrate tracker 0001\n  ```\n  Shows the actual SQL that will run\n\n- **Rollback migrations:**\n  ```bash\n  python manage.py migrate tracker 0001\n  ```\n  Reverts to a specific migration\n\n**Best Practices:**\n- Commit migration files to version control\n- Never edit existing migrations\n- Run `makemigrations` after every model change\n- Test migrations on a copy of production data",
              "code": "# Django Migration Commands\n\nprint(\"=== Django Migration Commands ===\")\n\nprint(\"\\n1. Create migration files:\")\nprint(\"   python manage.py makemigrations\")\nprint(\"   # Detects changes in models.py and creates migration files\")\n\nprint(\"\\n2. Apply migrations to database:\")\nprint(\"   python manage.py migrate\")\nprint(\"   # Runs all pending migrations\")\n\nprint(\"\\n3. Show generated SQL:\")\nprint(\"   python manage.py sqlmigrate tracker 0001\")\nprint(\"   # Displays the SQL that will be executed\")\n\nprint(\"\\n=== Example SQL Output ===\")\nexample_sql = '''\nBEGIN;\n--\n-- Create model Category\n--\nCREATE TABLE \"tracker_category\" (\n    \"id\" integer NOT NULL PRIMARY KEY AUTOINCREMENT,\n    \"name\" varchar(50) NOT NULL,\n    \"description\" text NOT NULL\n);\n--\n-- Create model Transaction\n--\nCREATE TABLE \"tracker_transaction\" (\n    \"id\" integer NOT NULL PRIMARY KEY AUTOINCREMENT,\n    \"amount\" decimal NOT NULL,\n    \"transaction_type\" varchar(10) NOT NULL,\n    \"description\" text NOT NULL,\n    \"created_at\" datetime NOT NULL,\n    \"category_id\" integer NULL REFERENCES \"tracker_category\" (\"id\"),\n    \"user_id\" integer NOT NULL REFERENCES \"auth_user\" (\"id\")\n);\nCOMMIT;\n'''\nprint(example_sql)\n\nprint(\"\\n=== Migration Best Practices ===\")\nprint(\"  - Always commit migration files to git\")\nprint(\"  - Never manually edit existing migrations\")\nprint(\"  - Run makemigrations after each model change\")\nprint(\"  - Test migrations locally before deploying\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Django Admin Setup",
              "content": "**The Django Admin - Free CRUD Interface**\n\nDjango automatically generates an admin interface for your models.\n\n**Basic Registration:**\n```python\nfrom django.contrib import admin\nfrom .models import Category\nadmin.site.register(Category)\n```\n\n**Advanced Configuration with ModelAdmin:**\n\n- **list_display** - Columns shown in list view\n- **list_filter** - Sidebar filters\n- **search_fields** - Searchable fields\n- **date_hierarchy** - Date-based navigation\n- **ordering** - Default sort order\n- **readonly_fields** - Non-editable fields\n\n**The `@admin.register` Decorator:**\n```python\n@admin.register(Category)\nclass CategoryAdmin(admin.ModelAdmin):\n    list_display = ['name', 'description']\n```\nCleaner than `admin.site.register(Category, CategoryAdmin)`.\n\n**Setup Steps:**\n1. Create superuser: `python manage.py createsuperuser`\n2. Run server: `python manage.py runserver`\n3. Visit: http://127.0.0.1:8000/admin/\n4. Log in with superuser credentials",
              "code": "# tracker/admin.py\nfrom django.contrib import admin\nfrom .models import Category, Transaction\n\n@admin.register(Category)\nclass CategoryAdmin(admin.ModelAdmin):\n    \"\"\"Admin configuration for Category model.\"\"\"\n    list_display = ['name', 'description']\n    search_fields = ['name']\n\n@admin.register(Transaction)\nclass TransactionAdmin(admin.ModelAdmin):\n    \"\"\"Admin configuration for Transaction model.\"\"\"\n    list_display = ['user', 'amount', 'category', 'transaction_type', 'created_at']\n    list_filter = ['transaction_type', 'category', 'created_at']\n    search_fields = ['description']\n    date_hierarchy = 'created_at'\n\n\nprint(\"=== Django Admin Configuration ===\")\n\nprint(\"\\nCategoryAdmin options:\")\nprint(\"  list_display: Shows name and description in list\")\nprint(\"  search_fields: Enables search by name\")\n\nprint(\"\\nTransactionAdmin options:\")\nprint(\"  list_display: Shows user, amount, category, type, date\")\nprint(\"  list_filter: Adds sidebar filters for type, category, date\")\nprint(\"  search_fields: Enables search by description\")\nprint(\"  date_hierarchy: Adds date-based drill-down navigation\")\n\nprint(\"\\n=== Admin Setup Commands ===\")\nprint(\"  1. python manage.py createsuperuser\")\nprint(\"     # Create admin login credentials\")\nprint(\"\")\nprint(\"  2. python manage.py runserver\")\nprint(\"     # Start development server\")\nprint(\"\")\nprint(\"  3. Visit http://127.0.0.1:8000/admin/\")\nprint(\"     # Access the admin interface\")\n\nprint(\"\\n=== What You Get ===\")\nprint(\"  - Full CRUD interface (Create, Read, Update, Delete)\")\nprint(\"  - Search, filter, and sort capabilities\")\nprint(\"  - Pagination for large datasets\")\nprint(\"  - Inline editing for related objects\")\nprint(\"  - History tracking for changes\")\nprint(\"  - Permission-based access control\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Querying Data",
              "content": "**Django ORM Queries**\n\nDjango provides an intuitive query API that translates to SQL.\n\n**Basic Queries:**\n```python\nModel.objects.all()           # SELECT * FROM model\nModel.objects.get(id=1)       # Single object (raises if not found)\nModel.objects.first()         # First object or None\nModel.objects.count()         # COUNT(*)\n```\n\n**Filtering:**\n```python\n.filter(field=value)          # WHERE field = value\n.exclude(field=value)         # WHERE field != value\n.filter(field__gte=100)       # >= 100 (greater than or equal)\n.filter(field__lt=50)         # < 50 (less than)\n.filter(field__contains='x')  # LIKE '%x%'\n.filter(field__isnull=True)   # IS NULL\n```\n\n**Ordering:**\n```python\n.order_by('field')            # ASC\n.order_by('-field')           # DESC\n.order_by('field1', '-field2')# Multiple columns\n```\n\n**Related Objects:**\n```python\n.filter(category__name='Food')     # Join and filter\n.select_related('category')        # Eager load (1 query)\n.prefetch_related('transactions')  # Batch load (2 queries)\n```\n\n**Aggregation:**\n```python\nfrom django.db.models import Sum, Avg, Count\n.aggregate(total=Sum('amount'))\n.values('category').annotate(count=Count('id'))\n```",
              "code": "# Django ORM Query Examples\n\nprint(\"=== Django ORM Queries ===\")\n\nprint(\"\\n1. Basic Queries:\")\nqueries = '''\n# Get all transactions\nTransaction.objects.all()\n\n# Filter by type\nTransaction.objects.filter(transaction_type='expense')\n\n# Filter by amount (greater than or equal)\nTransaction.objects.filter(amount__gte=100)\n\n# Filter by user and order by date (descending)\nTransaction.objects.filter(user=request.user).order_by('-created_at')\n'''\nprint(queries)\n\nprint(\"\\n2. Field Lookups (double underscore syntax):\")\nlookups = '''\n__exact     ->  = value (default)\n__iexact    ->  = value (case-insensitive)\n__contains  ->  LIKE '%value%'\n__icontains ->  LIKE '%value%' (case-insensitive)\n__gt        ->  > value\n__gte       ->  >= value\n__lt        ->  < value\n__lte       ->  <= value\n__in        ->  IN (list of values)\n__isnull    ->  IS NULL / IS NOT NULL\n__startswith->  LIKE 'value%'\n__endswith  ->  LIKE '%value'\n'''\nprint(lookups)\n\nprint(\"\\n3. Chaining Queries:\")\nchaining = '''\n# Multiple conditions (AND)\nTransaction.objects.filter(\n    transaction_type='expense',\n    amount__gte=50\n).order_by('-created_at')[:10]\n\n# OR conditions\nfrom django.db.models import Q\nTransaction.objects.filter(\n    Q(transaction_type='income') | Q(amount__gte=1000)\n)\n'''\nprint(chaining)\n\nprint(\"\\n4. Aggregation:\")\naggregation = '''\nfrom django.db.models import Sum, Avg, Count\n\n# Total expenses\nTransaction.objects.filter(\n    transaction_type='expense'\n).aggregate(total=Sum('amount'))\n# Returns: {'total': Decimal('1234.56')}\n\n# Count by category\nTransaction.objects.values('category__name').annotate(\n    count=Count('id'),\n    total=Sum('amount')\n)\n# Returns: [{'category__name': 'Food', 'count': 5, 'total': 250}, ...]\n'''\nprint(aggregation)",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "**Django Models:**\n- Models are Python classes that map to database tables\n- Use `models.CharField`, `DecimalField`, `ForeignKey`, etc. for columns\n- `__str__` method defines how objects display in admin\n- `class Meta` configures model behavior (ordering, plural name, etc.)\n\n**Migrations:**\n- `makemigrations` detects model changes and creates migration files\n- `migrate` applies changes to the database\n- `sqlmigrate` shows the generated SQL\n- Always commit migration files to version control\n\n**Admin Interface:**\n- Register models with `@admin.register(Model)` decorator\n- `ModelAdmin` class customizes the admin display\n- `list_display`, `list_filter`, `search_fields` for list view\n- Free CRUD interface with minimal code\n\n**ORM Queries:**\n- `Model.objects.all()` gets all records\n- `filter()` and `exclude()` for WHERE clauses\n- Double-underscore syntax for lookups: `__gte`, `__contains`, `__isnull`\n- Chain methods: `.filter().order_by().limit()`\n- Use `aggregate()` and `annotate()` for SQL aggregations"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-django-models-challenge",
              "title": "Build a Blog with Django Models",
              "description": "Create Django models for a blog application with Post and Comment models. Set up the admin interface to manage both models.",
              "instructions": "Create Django models for a blog:\n1. Post model with: title, content, author (ForeignKey to User), published_at, is_published (boolean)\n2. Comment model with: post (ForeignKey), author_name, content, created_at\n3. Register both models in admin with appropriate list_display and list_filter options\n4. Write a query to get all published posts ordered by date (newest first)",
              "starterCode": "from django.db import models\nfrom django.contrib.auth.models import User\n\n# TODO: Create Post model\nclass Post(models.Model):\n    # Add fields: title, content, author (FK), published_at, is_published\n    pass\n\n# TODO: Create Comment model  \nclass Comment(models.Model):\n    # Add fields: post (FK), author_name, content, created_at\n    pass\n\n# TODO: Admin configuration\n# from django.contrib import admin\n# @admin.register(Post)\n# class PostAdmin(admin.ModelAdmin):\n#     pass\n\n# Query: Get all published posts, newest first\n# published_posts = ???",
              "solution": "from django.db import models\nfrom django.contrib.auth.models import User\n\nclass Post(models.Model):\n    \"\"\"Blog post model.\"\"\"\n    title = models.CharField(max_length=200)\n    content = models.TextField()\n    author = models.ForeignKey(User, on_delete=models.CASCADE)\n    published_at = models.DateTimeField(null=True, blank=True)\n    is_published = models.BooleanField(default=False)\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    class Meta:\n        ordering = ['-published_at']\n    \n    def __str__(self):\n        return self.title\n\nclass Comment(models.Model):\n    \"\"\"Comment on a blog post.\"\"\"\n    post = models.ForeignKey(Post, on_delete=models.CASCADE, related_name='comments')\n    author_name = models.CharField(max_length=100)\n    content = models.TextField()\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    def __str__(self):\n        return f\"Comment by {self.author_name} on {self.post.title}\"\n\n# Admin configuration (in admin.py)\nfrom django.contrib import admin\n\n@admin.register(Post)\nclass PostAdmin(admin.ModelAdmin):\n    list_display = ['title', 'author', 'is_published', 'published_at']\n    list_filter = ['is_published', 'published_at', 'author']\n    search_fields = ['title', 'content']\n    date_hierarchy = 'published_at'\n\n@admin.register(Comment)\nclass CommentAdmin(admin.ModelAdmin):\n    list_display = ['author_name', 'post', 'created_at']\n    list_filter = ['created_at']\n    search_fields = ['author_name', 'content']\n\n# Query: Get all published posts, newest first\npublished_posts = Post.objects.filter(is_published=True).order_by('-published_at')\n\nprint(\"=== Blog Models Created ===\")\nprint(\"\\nPost model fields:\")\nprint(\"  - title: CharField(max_length=200)\")\nprint(\"  - content: TextField\")\nprint(\"  - author: ForeignKey(User)\")\nprint(\"  - published_at: DateTimeField\")\nprint(\"  - is_published: BooleanField\")\n\nprint(\"\\nComment model fields:\")\nprint(\"  - post: ForeignKey(Post)\")\nprint(\"  - author_name: CharField\")\nprint(\"  - content: TextField\")\nprint(\"  - created_at: DateTimeField\")\n\nprint(\"\\nQuery for published posts:\")\nprint(\"  Post.objects.filter(is_published=True).order_by('-published_at')\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use models.CharField for short text, models.TextField for long content. ForeignKey needs on_delete parameter."
                },
                {
                  "level": 2,
                  "text": "For admin list_display, use a list of field names as strings. For list_filter, include fields good for filtering like booleans and dates."
                },
                {
                  "level": 3,
                  "text": "Query syntax: Model.objects.filter(is_published=True).order_by('-published_at') - the minus sign means descending order."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting on_delete parameter for ForeignKey",
                  "consequence": "TypeError: ForeignKey requires on_delete argument",
                  "correction": "Use on_delete=models.CASCADE, SET_NULL, or PROTECT"
                },
                {
                  "mistake": "Using wrong field type for money/decimals",
                  "consequence": "Precision errors with FloatField",
                  "correction": "Use DecimalField(max_digits=10, decimal_places=2) for money"
                },
                {
                  "mistake": "Not defining __str__ method",
                  "consequence": "Objects show as 'Model object (1)' in admin",
                  "correction": "Add def __str__(self): return self.title"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-django-views",
          "title": "Django Views & Templates",
          "moduleId": "module-14",
          "order": 15,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Function-Based Views vs Class-Based Views",
              "content": "**Two Ways to Handle Requests in Django**\n\nDjango provides two paradigms for writing views: function-based views (FBVs) and class-based views (CBVs).\n\n**Function-Based Views (FBVs)**\n- Simple and explicit\n- Easy to understand and debug\n- Good for unique, one-off logic\n- Full control over request/response flow\n\n**Class-Based Views (CBVs)**\n- Reusable through inheritance\n- DRY (Don't Repeat Yourself)\n- Built-in handling for common patterns\n- Mixins for composable behavior\n\n**When to Use Each:**\n\n| Use FBVs When | Use CBVs When |\n|---------------|---------------|\n| Simple, unique logic | Standard CRUD operations |\n| Learning Django | Need inheritance/mixins |\n| One-off endpoints | Repeating patterns |\n| Complex conditional logic | Generic list/detail views |\n\n**The Django Philosophy:**\nStart with FBVs to understand the flow, then graduate to CBVs for common patterns. Many Django developers use a mix of both based on the situation."
            },
            {
              "type": "EXAMPLE",
              "title": "Function-Based Views in Action",
              "content": "**Building Transaction Views with FBVs**\n\nFunction-based views are straightforward: a function that takes a request and returns a response.\n\n**Key Imports:**\n- `render()` - Renders a template with context\n- `get_object_or_404()` - Gets an object or returns 404\n- `redirect()` - Redirects to another URL\n\n**Common Decorators:**\n- `@login_required` - Requires authentication\n- `@require_http_methods(['GET', 'POST'])` - Limits HTTP methods\n- `@csrf_exempt` - Disables CSRF protection (use carefully!)\n\n**Request Object Properties:**\n- `request.user` - Current logged-in user\n- `request.method` - HTTP method (GET, POST, etc.)\n- `request.POST` - Form data\n- `request.GET` - Query parameters",
              "code": "# views.py - Function-Based Views for Finance Tracker\nfrom django.shortcuts import render, get_object_or_404, redirect\nfrom django.http import HttpResponse\nfrom django.contrib.auth.decorators import login_required\nfrom django.views.decorators.http import require_http_methods\nfrom .models import Transaction, Category\nfrom .forms import TransactionForm\n\n\n@login_required\ndef transaction_list(request):\n    \"\"\"Display all transactions for the current user.\"\"\"\n    transactions = Transaction.objects.filter(\n        user=request.user\n    ).order_by('-created_at')\n    \n    return render(request, 'transactions/list.html', {\n        'transactions': transactions,\n        'title': 'My Transactions'\n    })\n\n\n@login_required\ndef transaction_detail(request, pk):\n    \"\"\"Display a single transaction.\"\"\"\n    transaction = get_object_or_404(\n        Transaction, \n        pk=pk, \n        user=request.user\n    )\n    \n    return render(request, 'transactions/detail.html', {\n        'transaction': transaction\n    })\n\n\n@login_required\n@require_http_methods(['GET', 'POST'])\ndef transaction_create(request):\n    \"\"\"Create a new transaction.\"\"\"\n    if request.method == 'POST':\n        form = TransactionForm(request.POST)\n        if form.is_valid():\n            transaction = form.save(commit=False)\n            transaction.user = request.user\n            transaction.save()\n            return redirect('transaction-list')\n    else:\n        form = TransactionForm()\n    \n    return render(request, 'transactions/form.html', {\n        'form': form,\n        'title': 'New Transaction'\n    })\n\n\n@login_required\ndef transaction_delete(request, pk):\n    \"\"\"Delete a transaction.\"\"\"\n    transaction = get_object_or_404(\n        Transaction, \n        pk=pk, \n        user=request.user\n    )\n    \n    if request.method == 'POST':\n        transaction.delete()\n        return redirect('transaction-list')\n    \n    return render(request, 'transactions/confirm_delete.html', {\n        'transaction': transaction\n    })\n\n\n# urls.py\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('', views.transaction_list, name='transaction-list'),\n    path('<int:pk>/', views.transaction_detail, name='transaction-detail'),\n    path('new/', views.transaction_create, name='transaction-create'),\n    path('<int:pk>/delete/', views.transaction_delete, name='transaction-delete'),\n]\n\n\nprint(\"=== Function-Based Views ===\")\n\nprint(\"\\nView Pattern:\")\nprint(\"  def view_name(request, *args, **kwargs):\")\nprint(\"      # Process request\")\nprint(\"      return render(request, 'template.html', context)\")\n\nprint(\"\\nKey Functions:\")\nprint(\"  render()           - Render template with context\")\nprint(\"  get_object_or_404  - Get object or return 404\")\nprint(\"  redirect()         - Redirect to URL or view name\")\n\nprint(\"\\nCommon Decorators:\")\nprint(\"  @login_required    - Require authentication\")\nprint(\"  @require_http_methods - Limit HTTP methods\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Class-Based Views - The Generic View Hierarchy",
              "content": "**Django's Class-Based View Hierarchy**\n\nDjango provides a rich hierarchy of generic views that handle common patterns.\n\n**Base Classes:**\n\n```\nView\n  |-- TemplateView (renders a template)\n  |-- RedirectView (redirects to URL)\n  |\n  |-- ListView (displays list of objects)\n  |-- DetailView (displays single object)\n  |\n  |-- CreateView (form to create object)\n  |-- UpdateView (form to update object)\n  |-- DeleteView (confirms and deletes object)\n  |\n  |-- FormView (generic form handling)\n```\n\n**Key Attributes:**\n\n- `model` - The Django model to work with\n- `template_name` - Template to render\n- `context_object_name` - Name for object(s) in template\n- `queryset` - Custom queryset (alternative to model)\n- `success_url` - Where to redirect after success\n- `fields` - Form fields to include (CreateView/UpdateView)\n\n**Key Methods to Override:**\n\n- `get_queryset()` - Customize which objects to display\n- `get_context_data()` - Add extra context to template\n- `form_valid()` - Handle successful form submission\n- `get_success_url()` - Dynamic success URL",
              "code": "# views.py - Class-Based Views for Finance Tracker\nfrom django.views.generic import (\n    ListView, DetailView, \n    CreateView, UpdateView, DeleteView\n)\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.urls import reverse_lazy\nfrom .models import Transaction, Category\n\n\nclass TransactionListView(LoginRequiredMixin, ListView):\n    \"\"\"Display all transactions for the current user.\"\"\"\n    model = Transaction\n    template_name = 'transactions/list.html'\n    context_object_name = 'transactions'\n    paginate_by = 20\n    \n    def get_queryset(self):\n        \"\"\"Only show current user's transactions.\"\"\"\n        return Transaction.objects.filter(\n            user=self.request.user\n        ).order_by('-created_at')\n    \n    def get_context_data(self, **kwargs):\n        \"\"\"Add extra context for the template.\"\"\"\n        context = super().get_context_data(**kwargs)\n        context['title'] = 'My Transactions'\n        context['total_count'] = self.get_queryset().count()\n        return context\n\n\nclass TransactionDetailView(LoginRequiredMixin, DetailView):\n    \"\"\"Display a single transaction.\"\"\"\n    model = Transaction\n    template_name = 'transactions/detail.html'\n    context_object_name = 'transaction'\n    \n    def get_queryset(self):\n        \"\"\"Ensure user can only view their own transactions.\"\"\"\n        return Transaction.objects.filter(user=self.request.user)\n\n\nclass TransactionCreateView(LoginRequiredMixin, CreateView):\n    \"\"\"Create a new transaction.\"\"\"\n    model = Transaction\n    fields = ['amount', 'category', 'description', 'transaction_type']\n    template_name = 'transactions/form.html'\n    success_url = reverse_lazy('transaction-list')\n    \n    def form_valid(self, form):\n        \"\"\"Set the user before saving.\"\"\"\n        form.instance.user = self.request.user\n        return super().form_valid(form)\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['title'] = 'New Transaction'\n        return context\n\n\nclass TransactionUpdateView(LoginRequiredMixin, UpdateView):\n    \"\"\"Update an existing transaction.\"\"\"\n    model = Transaction\n    fields = ['amount', 'category', 'description', 'transaction_type']\n    template_name = 'transactions/form.html'\n    success_url = reverse_lazy('transaction-list')\n    \n    def get_queryset(self):\n        \"\"\"Ensure user can only edit their own transactions.\"\"\"\n        return Transaction.objects.filter(user=self.request.user)\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['title'] = 'Edit Transaction'\n        return context\n\n\nclass TransactionDeleteView(LoginRequiredMixin, DeleteView):\n    \"\"\"Delete a transaction with confirmation.\"\"\"\n    model = Transaction\n    template_name = 'transactions/confirm_delete.html'\n    success_url = reverse_lazy('transaction-list')\n    \n    def get_queryset(self):\n        \"\"\"Ensure user can only delete their own transactions.\"\"\"\n        return Transaction.objects.filter(user=self.request.user)\n\n\n# urls.py - Much cleaner with CBVs\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('', \n         views.TransactionListView.as_view(), \n         name='transaction-list'),\n    path('<int:pk>/', \n         views.TransactionDetailView.as_view(), \n         name='transaction-detail'),\n    path('new/', \n         views.TransactionCreateView.as_view(), \n         name='transaction-create'),\n    path('<int:pk>/edit/', \n         views.TransactionUpdateView.as_view(), \n         name='transaction-update'),\n    path('<int:pk>/delete/', \n         views.TransactionDeleteView.as_view(), \n         name='transaction-delete'),\n]\n\n\nprint(\"=== Class-Based Views ===\")\n\nprint(\"\\nGeneric Views Used:\")\nprint(\"  ListView    - Display list of objects\")\nprint(\"  DetailView  - Display single object\")\nprint(\"  CreateView  - Form to create object\")\nprint(\"  UpdateView  - Form to update object\")\nprint(\"  DeleteView  - Confirm and delete\")\n\nprint(\"\\nKey Mixins:\")\nprint(\"  LoginRequiredMixin - Require authentication\")\n\nprint(\"\\nCommon Overrides:\")\nprint(\"  get_queryset()     - Filter accessible objects\")\nprint(\"  get_context_data() - Add template context\")\nprint(\"  form_valid()       - Handle form success\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "FBV vs CBV - Quick Reference",
              "content": "**Function-Based View Pattern:**\n```python\n@login_required\ndef my_view(request, pk):\n    obj = get_object_or_404(Model, pk=pk)\n    return render(request, 'template.html', {'obj': obj})\n```\n\n**Class-Based View Pattern:**\n```python\nclass MyView(LoginRequiredMixin, DetailView):\n    model = Model\n    template_name = 'template.html'\n    context_object_name = 'obj'\n```\n\n**Choosing Between Them:**\n\n- **FBV:** Full control, simple logic, unique behavior\n- **CBV:** CRUD operations, inheritance, DRY code\n\n**Pro Tip:** Django REST Framework uses CBVs extensively, so learning them prepares you for API development."
            },
            {
              "type": "THEORY",
              "title": "Django Template System Basics",
              "content": "**Templates - The Presentation Layer**\n\nDjango templates are HTML files with special syntax for dynamic content.\n\n**Template Location:**\nBy default, Django looks for templates in:\n1. `<app>/templates/<app>/` - App-specific templates\n2. `templates/` in project root (configure in settings)\n\n**Basic Syntax:**\n\n**1. Variables:** `{{ variable }}`\n```html\n<h1>Hello, {{ user.username }}!</h1>\n<p>Balance: ${{ account.balance }}</p>\n```\n\n**2. Tags:** `{% tag %}`\n```html\n{% if user.is_authenticated %}\n    Welcome back!\n{% else %}\n    Please log in.\n{% endif %}\n```\n\n**3. Filters:** `{{ variable|filter }}`\n```html\n{{ name|title }}           {# Capitalize words #}\n{{ date|date:\"M d, Y\" }}   {# Format date #}\n{{ text|truncatewords:30 }} {# Limit words #}\n{{ amount|floatformat:2 }}  {# Two decimals #}\n```\n\n**4. Comments:** `{# comment #}`\n```html\n{# This won't appear in the output #}\n```\n\n**Common Template Tags:**\n- `{% for %}...{% endfor %}` - Loop through items\n- `{% if %}...{% elif %}...{% else %}...{% endif %}` - Conditionals\n- `{% include 'partial.html' %}` - Include other templates\n- `{% url 'view-name' %}` - Generate URLs\n- `{% csrf_token %}` - CSRF protection for forms\n- `{% static 'path' %}` - Static file URLs"
            },
            {
              "type": "EXAMPLE",
              "title": "Template Inheritance and Blocks",
              "content": "**Template Inheritance - DRY for HTML**\n\nTemplate inheritance lets you create a base template with common structure and override specific blocks in child templates.\n\n**The Pattern:**\n1. Create a `base.html` with the common structure\n2. Define `{% block %}` placeholders for variable content\n3. Child templates `{% extends %}` the base and fill in blocks\n\n**Block Properties:**\n- `{% block name %}` defines a replaceable section\n- `{{ block.super }}` includes parent's content\n- Blocks can be nested\n- Undefined blocks keep parent's content\n\n**Best Practices:**\n- Keep base templates minimal\n- Use semantic block names (title, content, scripts)\n- Create intermediate templates for sections (e.g., dashboard_base.html)",
              "code": "<!-- templates/base.html - The foundation -->\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>{% block title %}Finance Tracker{% endblock %}</title>\n    <link href=\"https://cdn.jsdelivr.net/npm/tailwindcss@2/dist/tailwind.min.css\" rel=\"stylesheet\">\n    {% block extra_css %}{% endblock %}\n</head>\n<body class=\"bg-gray-100\">\n    <!-- Navigation -->\n    <nav class=\"bg-blue-600 text-white p-4\">\n        <div class=\"container mx-auto flex justify-between\">\n            <a href=\"{% url 'home' %}\" class=\"font-bold\">Finance Tracker</a>\n            {% block nav %}\n            <div>\n                {% if user.is_authenticated %}\n                    <a href=\"{% url 'transaction-list' %}\">Transactions</a>\n                    <a href=\"{% url 'logout' %}\" class=\"ml-4\">Logout</a>\n                {% else %}\n                    <a href=\"{% url 'login' %}\">Login</a>\n                {% endif %}\n            </div>\n            {% endblock %}\n        </div>\n    </nav>\n    \n    <!-- Main Content -->\n    <main class=\"container mx-auto py-8 px-4\">\n        {% block content %}\n        <!-- Child templates fill this in -->\n        {% endblock %}\n    </main>\n    \n    <!-- Footer -->\n    <footer class=\"bg-gray-800 text-white p-4 text-center\">\n        {% block footer %}\n        <p>&copy; 2024 Finance Tracker</p>\n        {% endblock %}\n    </footer>\n    \n    <!-- Scripts -->\n    {% block scripts %}{% endblock %}\n</body>\n</html>\n\n\n<!-- templates/transactions/list.html -->\n{% extends 'base.html' %}\n\n{% block title %}My Transactions - {{ block.super }}{% endblock %}\n\n{% block content %}\n<div class=\"max-w-4xl mx-auto\">\n    <div class=\"flex justify-between items-center mb-6\">\n        <h1 class=\"text-2xl font-bold\">My Transactions</h1>\n        <a href=\"{% url 'transaction-create' %}\" \n           class=\"bg-blue-500 text-white px-4 py-2 rounded\">\n            + New Transaction\n        </a>\n    </div>\n    \n    {% if transactions %}\n        <div class=\"bg-white rounded-lg shadow\">\n            {% for transaction in transactions %}\n                <div class=\"p-4 border-b flex justify-between items-center\">\n                    <div>\n                        <span class=\"font-medium\">{{ transaction.description }}</span>\n                        <span class=\"text-gray-500 text-sm ml-2\">\n                            {{ transaction.category.name }}\n                        </span>\n                    </div>\n                    <div class=\"flex items-center gap-4\">\n                        <span class=\"{% if transaction.amount < 0 %}text-red-500{% else %}text-green-500{% endif %} font-bold\">\n                            ${{ transaction.amount|floatformat:2 }}\n                        </span>\n                        <span class=\"text-gray-400 text-sm\">\n                            {{ transaction.created_at|date:\"M d\" }}\n                        </span>\n                        <a href=\"{% url 'transaction-detail' transaction.pk %}\" \n                           class=\"text-blue-500\">View</a>\n                    </div>\n                </div>\n            {% endfor %}\n        </div>\n        \n        <!-- Pagination -->\n        {% if is_paginated %}\n            <div class=\"mt-4 flex justify-center gap-2\">\n                {% if page_obj.has_previous %}\n                    <a href=\"?page={{ page_obj.previous_page_number }}\">&laquo; Prev</a>\n                {% endif %}\n                <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>\n                {% if page_obj.has_next %}\n                    <a href=\"?page={{ page_obj.next_page_number }}\">Next &raquo;</a>\n                {% endif %}\n            </div>\n        {% endif %}\n    {% else %}\n        <div class=\"bg-white rounded-lg shadow p-8 text-center text-gray-500\">\n            <p>No transactions yet.</p>\n            <a href=\"{% url 'transaction-create' %}\" class=\"text-blue-500\">\n                Create your first transaction\n            </a>\n        </div>\n    {% endif %}\n</div>\n{% endblock %}\n\n\n<!-- templates/transactions/detail.html -->\n{% extends 'base.html' %}\n\n{% block title %}{{ transaction.description }} - Finance Tracker{% endblock %}\n\n{% block content %}\n<div class=\"max-w-2xl mx-auto bg-white rounded-lg shadow p-6\">\n    <h1 class=\"text-2xl font-bold mb-4\">{{ transaction.description }}</h1>\n    \n    <div class=\"space-y-3\">\n        <p><strong>Amount:</strong> \n            <span class=\"{% if transaction.amount < 0 %}text-red-500{% else %}text-green-500{% endif %}\">\n                ${{ transaction.amount|floatformat:2 }}\n            </span>\n        </p>\n        <p><strong>Category:</strong> {{ transaction.category.name }}</p>\n        <p><strong>Type:</strong> {{ transaction.get_transaction_type_display }}</p>\n        <p><strong>Date:</strong> {{ transaction.created_at|date:\"F d, Y\" }}</p>\n    </div>\n    \n    <div class=\"mt-6 flex gap-4\">\n        <a href=\"{% url 'transaction-update' transaction.pk %}\" \n           class=\"bg-blue-500 text-white px-4 py-2 rounded\">Edit</a>\n        <a href=\"{% url 'transaction-delete' transaction.pk %}\" \n           class=\"bg-red-500 text-white px-4 py-2 rounded\">Delete</a>\n        <a href=\"{% url 'transaction-list' %}\" \n           class=\"text-gray-500\">Back to List</a>\n    </div>\n</div>\n{% endblock %}\n\n\nprint(\"=== Template Inheritance ===\")\n\nprint(\"\\nBase Template (base.html):\")\nprint(\"  - Common HTML structure\")\nprint(\"  - {% block title %}{% endblock %}\")\nprint(\"  - {% block content %}{% endblock %}\")\nprint(\"  - {% block scripts %}{% endblock %}\")\n\nprint(\"\\nChild Template:\")\nprint(\"  {% extends 'base.html' %}\")\nprint(\"  {% block content %}...{% endblock %}\")\n\nprint(\"\\nInclude Parent Content:\")\nprint(\"  {{ block.super }}\")",
              "language": "html"
            },
            {
              "type": "EXAMPLE",
              "title": "Context and Template Tags",
              "content": "**Passing Data to Templates**\n\nContext is a dictionary of data passed to the template for rendering.\n\n**In Views:**\n```python\nreturn render(request, 'template.html', {\n    'transactions': transactions,\n    'user': request.user,\n    'total': total_amount,\n})\n```\n\n**In Templates:**\n```html\n<p>Hello, {{ user.username }}</p>\n<p>Total: ${{ total }}</p>\n```\n\n**Built-in Context Processors:**\nDjango automatically adds:\n- `request` - The current request\n- `user` - The logged-in user\n- `messages` - Flash messages\n- `csrf_token` - CSRF token\n\n**Custom Template Tags:**\nFor complex logic, create custom template tags rather than putting logic in templates.",
              "code": "<!-- templates/transactions/form.html -->\n{% extends 'base.html' %}\n{% load crispy_forms_tags %}  {# Load custom tags #}\n\n{% block title %}{{ title }} - Finance Tracker{% endblock %}\n\n{% block content %}\n<div class=\"max-w-lg mx-auto bg-white rounded-lg shadow p-6\">\n    <h1 class=\"text-2xl font-bold mb-6\">{{ title }}</h1>\n    \n    <form method=\"post\" novalidate>\n        {% csrf_token %}  {# Required for POST forms #}\n        \n        {# Loop through form fields #}\n        {% for field in form %}\n            <div class=\"mb-4\">\n                <label class=\"block text-gray-700 font-medium mb-2\">\n                    {{ field.label }}\n                    {% if field.field.required %}\n                        <span class=\"text-red-500\">*</span>\n                    {% endif %}\n                </label>\n                \n                {{ field }}\n                \n                {% if field.errors %}\n                    {% for error in field.errors %}\n                        <p class=\"text-red-500 text-sm mt-1\">{{ error }}</p>\n                    {% endfor %}\n                {% endif %}\n                \n                {% if field.help_text %}\n                    <p class=\"text-gray-500 text-sm mt-1\">{{ field.help_text }}</p>\n                {% endif %}\n            </div>\n        {% endfor %}\n        \n        {# Non-field errors #}\n        {% if form.non_field_errors %}\n            <div class=\"bg-red-100 text-red-700 p-3 rounded mb-4\">\n                {% for error in form.non_field_errors %}\n                    <p>{{ error }}</p>\n                {% endfor %}\n            </div>\n        {% endif %}\n        \n        <div class=\"flex gap-4\">\n            <button type=\"submit\" \n                    class=\"bg-blue-500 text-white px-6 py-2 rounded\">\n                {% if object %}Update{% else %}Create{% endif %}\n            </button>\n            <a href=\"{% url 'transaction-list' %}\" \n               class=\"text-gray-500 py-2\">Cancel</a>\n        </div>\n    </form>\n</div>\n{% endblock %}\n\n\n<!-- templates/partials/transaction_card.html - Reusable partial -->\n<div class=\"bg-white rounded-lg shadow p-4 mb-4\">\n    <div class=\"flex justify-between items-start\">\n        <div>\n            <h3 class=\"font-medium\">{{ transaction.description }}</h3>\n            <p class=\"text-sm text-gray-500\">\n                {{ transaction.category.name }} | \n                {{ transaction.created_at|date:\"M d, Y\" }}\n            </p>\n        </div>\n        <span class=\"text-lg font-bold\n            {% if transaction.transaction_type == 'income' %}\n                text-green-500\n            {% else %}\n                text-red-500\n            {% endif %}\">\n            {% if transaction.transaction_type == 'income' %}+{% else %}-{% endif %}\n            ${{ transaction.amount|floatformat:2 }}\n        </span>\n    </div>\n</div>\n\n\n<!-- Usage: Include the partial -->\n{% for transaction in transactions %}\n    {% include 'partials/transaction_card.html' with transaction=transaction %}\n{% endfor %}\n\n\n{# Custom filters and tags example #}\n\n{# In templatetags/finance_extras.py #}\n{#\nfrom django import template\n\nregister = template.Library()\n\n@register.filter\ndef currency(value):\n    return f\"${value:,.2f}\"\n\n@register.simple_tag\ndef transaction_badge(transaction_type):\n    colors = {'income': 'green', 'expense': 'red'}\n    return f'bg-{colors.get(transaction_type, \"gray\")}-500'\n#}\n\n{# Usage in template: #}\n{# {% load finance_extras %} #}\n{# {{ amount|currency }} #}\n{# <span class=\"{% transaction_badge type %}\">...</span> #}\n\n\nprint(\"=== Template Tags and Context ===\")\n\nprint(\"\\nCommon Tags:\")\nprint(\"  {% for x in list %}...{% endfor %}\")\nprint(\"  {% if condition %}...{% endif %}\")\nprint(\"  {% include 'partial.html' %}\")\nprint(\"  {% url 'view-name' arg %}\")\nprint(\"  {% csrf_token %}\")\n\nprint(\"\\nCommon Filters:\")\nprint(\"  {{ text|title }}\")\nprint(\"  {{ date|date:'M d, Y' }}\")\nprint(\"  {{ number|floatformat:2 }}\")\nprint(\"  {{ text|truncatewords:20 }}\")\nprint(\"  {{ list|length }}\")",
              "language": "html"
            },
            {
              "type": "KEY_POINT",
              "title": "Templates vs API Responses",
              "content": "**When to Use Templates:**\n\n- Server-rendered HTML pages\n- SEO-important content (crawlers see full HTML)\n- Progressive enhancement\n- Admin interfaces and dashboards\n- Simple interactive features\n\n**When to Use API Responses (JSON):**\n\n- Single-page applications (React, Vue, Angular)\n- Mobile app backends\n- Third-party integrations\n- Real-time updates (with WebSockets)\n- Microservices architecture\n\n**The Modern Approach:**\n\nMany Django projects use both:\n- Templates for public pages (SEO, fast initial load)\n- REST API for interactive features (dashboards, forms)\n\n**Django REST Framework** handles API responses, while Django templates handle server-rendered pages. They work together seamlessly in the same project."
            },
            {
              "type": "EXAMPLE",
              "title": "Finance Tracker: Complete View/Template Example",
              "content": "**Putting It All Together**\n\nThis example shows a complete dashboard view with:\n- Class-based view with custom context\n- Template inheritance\n- Dynamic data display\n- Integration with the Finance Tracker theme",
              "code": "# views.py - Dashboard with CBV\nfrom django.views.generic import TemplateView\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.db.models import Sum, Count\nfrom django.db.models.functions import TruncMonth\nfrom .models import Transaction, Category\n\n\nclass DashboardView(LoginRequiredMixin, TemplateView):\n    \"\"\"Finance Tracker Dashboard with summary statistics.\"\"\"\n    template_name = 'dashboard.html'\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        user = self.request.user\n        \n        # Get all user transactions\n        transactions = Transaction.objects.filter(user=user)\n        \n        # Calculate totals\n        totals = transactions.aggregate(\n            income=Sum('amount', filter=models.Q(transaction_type='income')),\n            expenses=Sum('amount', filter=models.Q(transaction_type='expense'))\n        )\n        \n        context['income'] = totals['income'] or 0\n        context['expenses'] = abs(totals['expenses'] or 0)\n        context['balance'] = context['income'] - context['expenses']\n        \n        # Recent transactions\n        context['recent_transactions'] = transactions.order_by(\n            '-created_at'\n        )[:5]\n        \n        # Spending by category\n        context['by_category'] = transactions.filter(\n            transaction_type='expense'\n        ).values('category__name').annotate(\n            total=Sum('amount')\n        ).order_by('-total')[:5]\n        \n        # Monthly trend (last 6 months)\n        context['monthly_data'] = transactions.annotate(\n            month=TruncMonth('created_at')\n        ).values('month').annotate(\n            income=Sum('amount', filter=models.Q(transaction_type='income')),\n            expenses=Sum('amount', filter=models.Q(transaction_type='expense'))\n        ).order_by('-month')[:6]\n        \n        return context\n\n\n# urls.py\nfrom django.urls import path\nfrom .views import DashboardView\n\nurlpatterns = [\n    path('dashboard/', DashboardView.as_view(), name='dashboard'),\n]\n\n\n# templates/dashboard.html\n\"\"\"\n{% extends 'base.html' %}\n\n{% block title %}Dashboard - Finance Tracker{% endblock %}\n\n{% block content %}\n<div class=\"max-w-6xl mx-auto\">\n    <h1 class=\"text-3xl font-bold mb-8\">Dashboard</h1>\n    \n    <!-- Summary Cards -->\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        <div class=\"bg-white rounded-lg shadow p-6\">\n            <h3 class=\"text-gray-500 text-sm\">Total Income</h3>\n            <p class=\"text-2xl font-bold text-green-500\">\n                ${{ income|floatformat:2 }}\n            </p>\n        </div>\n        <div class=\"bg-white rounded-lg shadow p-6\">\n            <h3 class=\"text-gray-500 text-sm\">Total Expenses</h3>\n            <p class=\"text-2xl font-bold text-red-500\">\n                ${{ expenses|floatformat:2 }}\n            </p>\n        </div>\n        <div class=\"bg-white rounded-lg shadow p-6\">\n            <h3 class=\"text-gray-500 text-sm\">Balance</h3>\n            <p class=\"text-2xl font-bold \n                {% if balance >= 0 %}text-blue-500{% else %}text-red-500{% endif %}\">\n                ${{ balance|floatformat:2 }}\n            </p>\n        </div>\n    </div>\n    \n    <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n        <!-- Recent Transactions -->\n        <div class=\"bg-white rounded-lg shadow\">\n            <div class=\"p-4 border-b flex justify-between items-center\">\n                <h2 class=\"font-bold\">Recent Transactions</h2>\n                <a href=\"{% url 'transaction-list' %}\" class=\"text-blue-500 text-sm\">\n                    View All\n                </a>\n            </div>\n            <div class=\"divide-y\">\n                {% for tx in recent_transactions %}\n                    <div class=\"p-4 flex justify-between\">\n                        <div>\n                            <p class=\"font-medium\">{{ tx.description }}</p>\n                            <p class=\"text-sm text-gray-500\">\n                                {{ tx.created_at|date:\"M d\" }}\n                            </p>\n                        </div>\n                        <span class=\"font-bold\n                            {% if tx.transaction_type == 'income' %}\n                                text-green-500\n                            {% else %}\n                                text-red-500\n                            {% endif %}\">\n                            {% if tx.transaction_type == 'income' %}+{% else %}-{% endif %}\n                            ${{ tx.amount|floatformat:2 }}\n                        </span>\n                    </div>\n                {% empty %}\n                    <p class=\"p-4 text-gray-500\">No transactions yet</p>\n                {% endfor %}\n            </div>\n        </div>\n        \n        <!-- Spending by Category -->\n        <div class=\"bg-white rounded-lg shadow\">\n            <div class=\"p-4 border-b\">\n                <h2 class=\"font-bold\">Top Spending Categories</h2>\n            </div>\n            <div class=\"p-4\">\n                {% for cat in by_category %}\n                    <div class=\"mb-3\">\n                        <div class=\"flex justify-between mb-1\">\n                            <span>{{ cat.category__name }}</span>\n                            <span class=\"text-red-500\">\n                                ${{ cat.total|floatformat:2 }}\n                            </span>\n                        </div>\n                        <div class=\"bg-gray-200 rounded-full h-2\">\n                            <div class=\"bg-red-500 rounded-full h-2\" \n                                 style=\"width: {{ cat.total|divisibleby:expenses|default:0|multiply:100 }}%\">\n                            </div>\n                        </div>\n                    </div>\n                {% empty %}\n                    <p class=\"text-gray-500\">No expense data</p>\n                {% endfor %}\n            </div>\n        </div>\n    </div>\n</div>\n{% endblock %}\n\"\"\"\n\nprint(\"=== Finance Tracker Dashboard ===\")\n\nprint(\"\\nDashboardView provides:\")\nprint(\"  - income: Total income\")\nprint(\"  - expenses: Total expenses\")\nprint(\"  - balance: Net balance\")\nprint(\"  - recent_transactions: Last 5 transactions\")\nprint(\"  - by_category: Top spending categories\")\nprint(\"  - monthly_data: Monthly trends\")\n\nprint(\"\\nTemplate Features:\")\nprint(\"  - Grid layout with summary cards\")\nprint(\"  - Conditional styling (green/red)\")\nprint(\"  - Date formatting\")\nprint(\"  - Empty state handling\")",
              "language": "python"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-django-views-challenge",
              "title": "Build a Category Management View",
              "description": "Create class-based views for managing expense categories in the Finance Tracker. Implement list, create, update, and delete views with proper templates.",
              "instructions": "Build category management views:\n\n1. Create CategoryListView that:\n   - Shows all categories for the current user\n   - Displays category name and transaction count\n   - Links to create/edit/delete\n\n2. Create CategoryCreateView that:\n   - Has fields for name and description\n   - Sets the user automatically\n   - Redirects to list on success\n\n3. Create a template (category_list.html) that:\n   - Extends base.html\n   - Lists categories with edit/delete links\n   - Shows 'No categories' if empty\n\n4. Set up URL patterns for all views",
              "starterCode": "from django.views.generic import ListView, CreateView, UpdateView, DeleteView\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.urls import reverse_lazy\nfrom django.db.models import Count\n\n# Assume Category model exists:\n# class Category(models.Model):\n#     name = models.CharField(max_length=50)\n#     description = models.TextField(blank=True)\n#     user = models.ForeignKey(User, on_delete=models.CASCADE)\n\n# TODO: Create CategoryListView\nclass CategoryListView(LoginRequiredMixin, ListView):\n    pass\n\n# TODO: Create CategoryCreateView\nclass CategoryCreateView(LoginRequiredMixin, CreateView):\n    pass\n\n# TODO: Create CategoryUpdateView\nclass CategoryUpdateView(LoginRequiredMixin, UpdateView):\n    pass\n\n# TODO: Create CategoryDeleteView\nclass CategoryDeleteView(LoginRequiredMixin, DeleteView):\n    pass\n\n# TODO: URL patterns\n# urlpatterns = [\n#     ...\n# ]",
              "solution": "from django.views.generic import ListView, CreateView, UpdateView, DeleteView\nfrom django.contrib.auth.mixins import LoginRequiredMixin\nfrom django.urls import reverse_lazy, path\nfrom django.db.models import Count\nfrom .models import Category\n\n\nclass CategoryListView(LoginRequiredMixin, ListView):\n    \"\"\"Display all categories for the current user.\"\"\"\n    model = Category\n    template_name = 'categories/list.html'\n    context_object_name = 'categories'\n    \n    def get_queryset(self):\n        \"\"\"Get user's categories with transaction count.\"\"\"\n        return Category.objects.filter(\n            user=self.request.user\n        ).annotate(\n            transaction_count=Count('transaction')\n        ).order_by('name')\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['title'] = 'Categories'\n        return context\n\n\nclass CategoryCreateView(LoginRequiredMixin, CreateView):\n    \"\"\"Create a new category.\"\"\"\n    model = Category\n    fields = ['name', 'description']\n    template_name = 'categories/form.html'\n    success_url = reverse_lazy('category-list')\n    \n    def form_valid(self, form):\n        \"\"\"Set the user before saving.\"\"\"\n        form.instance.user = self.request.user\n        return super().form_valid(form)\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['title'] = 'New Category'\n        return context\n\n\nclass CategoryUpdateView(LoginRequiredMixin, UpdateView):\n    \"\"\"Update an existing category.\"\"\"\n    model = Category\n    fields = ['name', 'description']\n    template_name = 'categories/form.html'\n    success_url = reverse_lazy('category-list')\n    \n    def get_queryset(self):\n        \"\"\"Only allow editing user's own categories.\"\"\"\n        return Category.objects.filter(user=self.request.user)\n    \n    def get_context_data(self, **kwargs):\n        context = super().get_context_data(**kwargs)\n        context['title'] = f'Edit {self.object.name}'\n        return context\n\n\nclass CategoryDeleteView(LoginRequiredMixin, DeleteView):\n    \"\"\"Delete a category with confirmation.\"\"\"\n    model = Category\n    template_name = 'categories/confirm_delete.html'\n    success_url = reverse_lazy('category-list')\n    \n    def get_queryset(self):\n        \"\"\"Only allow deleting user's own categories.\"\"\"\n        return Category.objects.filter(user=self.request.user)\n\n\n# URL patterns\nurlpatterns = [\n    path('categories/', \n         CategoryListView.as_view(), \n         name='category-list'),\n    path('categories/new/', \n         CategoryCreateView.as_view(), \n         name='category-create'),\n    path('categories/<int:pk>/edit/', \n         CategoryUpdateView.as_view(), \n         name='category-update'),\n    path('categories/<int:pk>/delete/', \n         CategoryDeleteView.as_view(), \n         name='category-delete'),\n]\n\n\n# Template: categories/list.html\ntemplate = '''\n{% extends 'base.html' %}\n\n{% block title %}{{ title }} - Finance Tracker{% endblock %}\n\n{% block content %}\n<div class=\"max-w-4xl mx-auto\">\n    <div class=\"flex justify-between items-center mb-6\">\n        <h1 class=\"text-2xl font-bold\">{{ title }}</h1>\n        <a href=\"{% url 'category-create' %}\" \n           class=\"bg-blue-500 text-white px-4 py-2 rounded\">\n            + New Category\n        </a>\n    </div>\n    \n    {% if categories %}\n        <div class=\"bg-white rounded-lg shadow\">\n            {% for category in categories %}\n                <div class=\"p-4 border-b flex justify-between items-center\">\n                    <div>\n                        <span class=\"font-medium\">{{ category.name }}</span>\n                        <span class=\"text-gray-500 text-sm ml-2\">\n                            {{ category.transaction_count }} transactions\n                        </span>\n                        {% if category.description %}\n                            <p class=\"text-sm text-gray-600 mt-1\">\n                                {{ category.description|truncatewords:15 }}\n                            </p>\n                        {% endif %}\n                    </div>\n                    <div class=\"flex gap-2\">\n                        <a href=\"{% url 'category-update' category.pk %}\" \n                           class=\"text-blue-500\">Edit</a>\n                        <a href=\"{% url 'category-delete' category.pk %}\" \n                           class=\"text-red-500\">Delete</a>\n                    </div>\n                </div>\n            {% endfor %}\n        </div>\n    {% else %}\n        <div class=\"bg-white rounded-lg shadow p-8 text-center text-gray-500\">\n            <p>No categories yet.</p>\n            <a href=\"{% url 'category-create' %}\" class=\"text-blue-500\">\n                Create your first category\n            </a>\n        </div>\n    {% endif %}\n</div>\n{% endblock %}\n'''\n\nprint(template)\n\nprint(\"\\n=== Category Management Views ===\")\nprint(\"\\nViews Created:\")\nprint(\"  CategoryListView   - List with transaction counts\")\nprint(\"  CategoryCreateView - Create with auto user\")\nprint(\"  CategoryUpdateView - Edit user's categories\")\nprint(\"  CategoryDeleteView - Delete with confirmation\")\n\nprint(\"\\nURL Patterns:\")\nprint(\"  /categories/           - List\")\nprint(\"  /categories/new/       - Create\")\nprint(\"  /categories/<pk>/edit/ - Update\")\nprint(\"  /categories/<pk>/delete/ - Delete\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use LoginRequiredMixin as the first parent class. Set model, template_name, and context_object_name for ListView."
                },
                {
                  "level": 2,
                  "text": "Override get_queryset() to filter by user. Use annotate(transaction_count=Count('transaction')) to include counts."
                },
                {
                  "level": 3,
                  "text": "In CreateView, override form_valid() to set form.instance.user = self.request.user before calling super()."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not filtering queryset by user in Update/Delete views",
                  "consequence": "Users can modify or delete other users' categories",
                  "correction": "Override get_queryset() to filter by self.request.user"
                },
                {
                  "mistake": "Using reverse() instead of reverse_lazy() for success_url",
                  "consequence": "ImproperlyConfigured error at class definition time",
                  "correction": "Use reverse_lazy('view-name') for class attributes"
                },
                {
                  "mistake": "Forgetting to set user in CreateView.form_valid()",
                  "consequence": "IntegrityError: user_id cannot be null",
                  "correction": "Set form.instance.user = self.request.user before super().form_valid()"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-drf",
          "title": "Django REST Framework Basics",
          "moduleId": "module-14",
          "order": 16,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Django REST Framework?",
              "content": "**Django REST Framework (DRF) - Build APIs Fast**\n\nDjango REST Framework is a powerful toolkit for building Web APIs on top of Django.\n\n**Key Components:**\n\n**1. Serializers - Like Pydantic for Django**\nConvert Django models to JSON and validate incoming data:\n```python\nclass BookSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Book\n        fields = ['id', 'title', 'author']\n```\n\n**2. ViewSets - CRUD in One Class**\nHandle all standard operations (list, create, retrieve, update, delete):\n```python\nclass BookViewSet(viewsets.ModelViewSet):\n    queryset = Book.objects.all()\n    serializer_class = BookSerializer\n```\n\n**3. Routers - Auto-Generate URLs**\nNo manual URL patterns needed:\n```python\nrouter = DefaultRouter()\nrouter.register('books', BookViewSet)\n# Creates: /books/, /books/{id}/, etc.\n```\n\n**4. Browsable API**\nBuilt-in web interface for testing your API - no Postman needed!\n\n**Why DRF over FastAPI?**\n\n| Feature | DRF | FastAPI |\n|---------|-----|----------|\n| Ecosystem | Mature, huge plugin library | Growing rapidly |\n| ORM | Django ORM built-in | Bring your own (SQLAlchemy) |\n| Admin | Django Admin included | Build your own |\n| Async | Limited | Native async |\n| Best for | Full-featured web apps | Microservices, high-performance APIs |"
            },
            {
              "type": "EXAMPLE",
              "title": "Setting Up DRF",
              "content": "**Installing and Configuring Django REST Framework**\n\n**1. Install the Package:**\n```bash\nuv add djangorestframework\n# or: pip install djangorestframework\n```\n\n**2. Add to INSTALLED_APPS:**\nDRF must be registered in your Django settings.\n\n**3. Configure Default Settings:**\n- `DEFAULT_PERMISSION_CLASSES` - Who can access your API\n- `DEFAULT_AUTHENTICATION_CLASSES` - How users authenticate\n- `DEFAULT_PAGINATION_CLASS` - How to paginate results\n\n**Common Permission Classes:**\n- `AllowAny` - No authentication required\n- `IsAuthenticated` - Must be logged in\n- `IsAuthenticatedOrReadOnly` - Read for anyone, write needs auth\n- `IsAdminUser` - Only Django admin users\n\n**Common Authentication Classes:**\n- `SessionAuthentication` - Use Django sessions\n- `TokenAuthentication` - API tokens\n- `BasicAuthentication` - HTTP Basic Auth",
              "code": "# Install\n# uv add djangorestframework\n\n# settings.py\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'rest_framework',  # Add this\n    'tracker',          # Your app\n]\n\nREST_FRAMEWORK = {\n    'DEFAULT_PERMISSION_CLASSES': [\n        'rest_framework.permissions.IsAuthenticated',\n    ],\n    'DEFAULT_AUTHENTICATION_CLASSES': [\n        'rest_framework.authentication.SessionAuthentication',\n        'rest_framework.authentication.TokenAuthentication',\n    ],\n    'DEFAULT_PAGINATION_CLASS': 'rest_framework.pagination.PageNumberPagination',\n    'PAGE_SIZE': 20,\n}\n\n\nprint(\"=== Django REST Framework Setup ===\")\n\nprint(\"\\n1. Installation:\")\nprint(\"   uv add djangorestframework\")\nprint(\"   # or: pip install djangorestframework\")\n\nprint(\"\\n2. Add to INSTALLED_APPS:\")\nprint(\"   'rest_framework',\")\n\nprint(\"\\n3. Common Settings:\")\nprint(\"   - DEFAULT_PERMISSION_CLASSES: Who can access\")\nprint(\"   - DEFAULT_AUTHENTICATION_CLASSES: How to authenticate\")\nprint(\"   - DEFAULT_PAGINATION_CLASS: How to paginate\")\n\nprint(\"\\n4. Permission Options:\")\nprint(\"   - AllowAny: Public access\")\nprint(\"   - IsAuthenticated: Login required\")\nprint(\"   - IsAuthenticatedOrReadOnly: Read public, write protected\")\nprint(\"   - IsAdminUser: Admin only\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Serializers",
              "content": "**Serializers - Data Transformation Layer**\n\nSerializers convert complex data (Django models) to Python primitives that can be rendered to JSON.\n\n**ModelSerializer - Quick Setup:**\n```python\nclass CategorySerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Category\n        fields = ['id', 'name', 'description']\n```\n\n**Key Concepts:**\n\n**1. fields - Which Fields to Include**\n- Use `fields = '__all__'` for all fields\n- Use `fields = ['id', 'name']` for specific fields\n- Use `exclude = ['password']` to exclude fields\n\n**2. read_only_fields - Non-Editable Fields**\n```python\nread_only_fields = ['created_at', 'id']\n```\n\n**3. Custom Fields - Computed or Nested Data**\n```python\ncategory_name = serializers.CharField(\n    source='category.name', \n    read_only=True\n)\n```\n\n**4. Nested Serializers**\n```python\ncategory = CategorySerializer(read_only=True)\n```\n\n**Validation:**\nSerializers validate data automatically based on model constraints. Add custom validation with:\n```python\ndef validate_amount(self, value):\n    if value <= 0:\n        raise serializers.ValidationError(\"Must be positive\")\n    return value\n```",
              "code": "# tracker/serializers.py\nfrom rest_framework import serializers\nfrom .models import Transaction, Category\n\nclass CategorySerializer(serializers.ModelSerializer):\n    \"\"\"Serializer for Category model.\"\"\"\n    \n    class Meta:\n        model = Category\n        fields = ['id', 'name', 'description']\n\n\nclass TransactionSerializer(serializers.ModelSerializer):\n    \"\"\"Serializer for Transaction model with nested category name.\"\"\"\n    \n    # Read-only field from related model\n    category_name = serializers.CharField(\n        source='category.name', \n        read_only=True\n    )\n    \n    class Meta:\n        model = Transaction\n        fields = [\n            'id', \n            'amount', \n            'category',        # Foreign key (ID)\n            'category_name',   # Computed field\n            'transaction_type', \n            'description', \n            'created_at'\n        ]\n        read_only_fields = ['created_at']\n    \n    def validate_amount(self, value):\n        \"\"\"Ensure amount is positive.\"\"\"\n        if value <= 0:\n            raise serializers.ValidationError(\n                \"Amount must be greater than zero.\"\n            )\n        return value\n\n\nprint(\"=== DRF Serializers ===\")\n\nprint(\"\\nCategorySerializer:\")\nprint(\"  - Simple ModelSerializer\")\nprint(\"  - Exposes: id, name, description\")\n\nprint(\"\\nTransactionSerializer:\")\nprint(\"  - category_name: Computed from related model\")\nprint(\"  - read_only_fields: created_at (auto-set)\")\nprint(\"  - validate_amount: Custom validation\")\n\nprint(\"\\nSerialization Examples:\")\nprint(\"  # Model to JSON\")\nprint(\"  serializer = TransactionSerializer(transaction)\")\nprint(\"  serializer.data  # {'id': 1, 'amount': '50.00', ...}\")\n\nprint(\"\\n  # JSON to Model\")\nprint(\"  serializer = TransactionSerializer(data=request.data)\")\nprint(\"  serializer.is_valid(raise_exception=True)\")\nprint(\"  serializer.save()  # Creates/updates model\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "ViewSets and Routers",
              "content": "**ViewSets - All CRUD Operations in One Class**\n\n`ModelViewSet` provides complete CRUD operations:\n- `list()` - GET /transactions/\n- `create()` - POST /transactions/\n- `retrieve()` - GET /transactions/{id}/\n- `update()` - PUT /transactions/{id}/\n- `partial_update()` - PATCH /transactions/{id}/\n- `destroy()` - DELETE /transactions/{id}/\n\n**Key Methods to Override:**\n\n**get_queryset()** - Filter what users can see:\n```python\ndef get_queryset(self):\n    return Transaction.objects.filter(user=self.request.user)\n```\n\n**perform_create()** - Add extra data on create:\n```python\ndef perform_create(self, serializer):\n    serializer.save(user=self.request.user)\n```\n\n**Routers - Auto-Generate URLs:**\n```python\nrouter = DefaultRouter()\nrouter.register('transactions', TransactionViewSet)\nurlpatterns = router.urls\n```\n\nThis creates:\n- `GET/POST /transactions/`\n- `GET/PUT/PATCH/DELETE /transactions/{id}/`\n\n**DefaultRouter Bonus:**\nAdds an API root view at `/` listing all endpoints.",
              "code": "# tracker/views.py\nfrom rest_framework import viewsets, status\nfrom rest_framework.decorators import action\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.response import Response\nfrom .models import Transaction, Category\nfrom .serializers import TransactionSerializer, CategorySerializer\n\n\nclass CategoryViewSet(viewsets.ModelViewSet):\n    \"\"\"API endpoint for categories.\"\"\"\n    queryset = Category.objects.all()\n    serializer_class = CategorySerializer\n    permission_classes = [IsAuthenticated]\n\n\nclass TransactionViewSet(viewsets.ModelViewSet):\n    \"\"\"API endpoint for user transactions.\"\"\"\n    serializer_class = TransactionSerializer\n    permission_classes = [IsAuthenticated]\n    \n    def get_queryset(self):\n        \"\"\"Return only current user's transactions.\"\"\"\n        return Transaction.objects.filter(\n            user=self.request.user\n        ).select_related('category')\n    \n    def perform_create(self, serializer):\n        \"\"\"Set user when creating transaction.\"\"\"\n        serializer.save(user=self.request.user)\n    \n    @action(detail=False, methods=['get'])\n    def summary(self, request):\n        \"\"\"Custom action: GET /transactions/summary/\"\"\"\n        from django.db.models import Sum\n        \n        qs = self.get_queryset()\n        income = qs.filter(\n            transaction_type='income'\n        ).aggregate(total=Sum('amount'))['total'] or 0\n        expenses = qs.filter(\n            transaction_type='expense'\n        ).aggregate(total=Sum('amount'))['total'] or 0\n        \n        return Response({\n            'income': income,\n            'expenses': expenses,\n            'balance': income - expenses\n        })\n\n\n# tracker/urls.py\nfrom rest_framework.routers import DefaultRouter\nfrom .views import TransactionViewSet, CategoryViewSet\n\nrouter = DefaultRouter()\nrouter.register('transactions', TransactionViewSet, basename='transaction')\nrouter.register('categories', CategoryViewSet, basename='category')\n\nurlpatterns = router.urls\n\n\nprint(\"=== DRF ViewSets and Routers ===\")\n\nprint(\"\\nGenerated Endpoints:\")\nprint(\"  GET    /transactions/         - List all\")\nprint(\"  POST   /transactions/         - Create new\")\nprint(\"  GET    /transactions/{id}/    - Get one\")\nprint(\"  PUT    /transactions/{id}/    - Full update\")\nprint(\"  PATCH  /transactions/{id}/    - Partial update\")\nprint(\"  DELETE /transactions/{id}/    - Delete\")\nprint(\"  GET    /transactions/summary/ - Custom action\")\n\nprint(\"\\nKey ViewSet Methods:\")\nprint(\"  get_queryset() - Filter accessible objects\")\nprint(\"  perform_create() - Add data before save\")\nprint(\"  @action() - Add custom endpoints\")\n\nprint(\"\\nRouter Setup:\")\nprint(\"  router = DefaultRouter()\")\nprint(\"  router.register('transactions', TransactionViewSet)\")\nprint(\"  urlpatterns = router.urls\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "**Django REST Framework Essentials:**\n\n**Setup:**\n- Install with `uv add djangorestframework`\n- Add `'rest_framework'` to `INSTALLED_APPS`\n- Configure `REST_FRAMEWORK` settings for auth, permissions, pagination\n\n**Serializers:**\n- `ModelSerializer` auto-generates fields from Django models\n- Use `fields` to specify which fields to expose\n- Add `read_only_fields` for non-editable fields\n- Use `source='related.field'` for computed fields\n- Override `validate_fieldname()` for custom validation\n\n**ViewSets:**\n- `ModelViewSet` provides complete CRUD with minimal code\n- Override `get_queryset()` to filter by user or permissions\n- Override `perform_create()` to inject data (like current user)\n- Use `@action` decorator for custom endpoints\n\n**Routers:**\n- `DefaultRouter` auto-generates RESTful URL patterns\n- `router.register('endpoint', ViewSet)` creates all standard routes\n- No manual URL configuration needed\n\n**Browsable API:**\n- Visit any endpoint in browser for interactive documentation\n- Test POST/PUT/DELETE directly from the browser\n- Built-in, no configuration needed"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-drf-challenge",
              "title": "Build a Task API with DRF",
              "description": "Create a REST API for a task management app using Django REST Framework. Implement serializers and viewsets for Task and Project models.",
              "instructions": "Build a Task API with DRF:\n1. Create a TaskSerializer with fields: id, title, completed, project (FK), project_name (computed), created_at\n2. Create a TaskViewSet that:\n   - Only shows the current user's tasks\n   - Sets the user automatically on create\n   - Has a custom action to mark a task as complete\n3. Register the viewset with a router",
              "starterCode": "from rest_framework import serializers, viewsets\nfrom rest_framework.decorators import action\nfrom rest_framework.response import Response\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.routers import DefaultRouter\n\n# Assume these models exist:\n# class Project(models.Model):\n#     name = models.CharField(max_length=100)\n#     user = models.ForeignKey(User, on_delete=models.CASCADE)\n#\n# class Task(models.Model):\n#     title = models.CharField(max_length=200)\n#     completed = models.BooleanField(default=False)\n#     project = models.ForeignKey(Project, on_delete=models.CASCADE)\n#     user = models.ForeignKey(User, on_delete=models.CASCADE)\n#     created_at = models.DateTimeField(auto_now_add=True)\n\n# TODO: Create TaskSerializer\nclass TaskSerializer(serializers.ModelSerializer):\n    pass\n\n# TODO: Create TaskViewSet\nclass TaskViewSet(viewsets.ModelViewSet):\n    pass\n\n# TODO: Setup router\n# router = ...",
              "solution": "from rest_framework import serializers, viewsets, status\nfrom rest_framework.decorators import action\nfrom rest_framework.response import Response\nfrom rest_framework.permissions import IsAuthenticated\nfrom rest_framework.routers import DefaultRouter\n\n# TaskSerializer - handles data transformation\nclass TaskSerializer(serializers.ModelSerializer):\n    \"\"\"Serializer for Task model.\"\"\"\n    project_name = serializers.CharField(\n        source='project.name',\n        read_only=True\n    )\n    \n    class Meta:\n        model = Task\n        fields = [\n            'id',\n            'title',\n            'completed',\n            'project',\n            'project_name',\n            'created_at'\n        ]\n        read_only_fields = ['created_at']\n\n\n# TaskViewSet - handles CRUD operations\nclass TaskViewSet(viewsets.ModelViewSet):\n    \"\"\"API endpoint for tasks.\"\"\"\n    serializer_class = TaskSerializer\n    permission_classes = [IsAuthenticated]\n    \n    def get_queryset(self):\n        \"\"\"Return only current user's tasks.\"\"\"\n        return Task.objects.filter(\n            user=self.request.user\n        ).select_related('project')\n    \n    def perform_create(self, serializer):\n        \"\"\"Set user when creating task.\"\"\"\n        serializer.save(user=self.request.user)\n    \n    @action(detail=True, methods=['post'])\n    def complete(self, request, pk=None):\n        \"\"\"Mark a task as complete: POST /tasks/{id}/complete/\"\"\"\n        task = self.get_object()\n        task.completed = True\n        task.save()\n        serializer = self.get_serializer(task)\n        return Response(serializer.data)\n    \n    @action(detail=False, methods=['get'])\n    def pending(self, request):\n        \"\"\"Get all pending tasks: GET /tasks/pending/\"\"\"\n        pending_tasks = self.get_queryset().filter(completed=False)\n        serializer = self.get_serializer(pending_tasks, many=True)\n        return Response(serializer.data)\n\n\n# Router setup\nrouter = DefaultRouter()\nrouter.register('tasks', TaskViewSet, basename='task')\nurlpatterns = router.urls\n\n\nprint(\"=== Task API with DRF ===\")\n\nprint(\"\\nEndpoints Created:\")\nprint(\"  GET    /tasks/              - List user's tasks\")\nprint(\"  POST   /tasks/              - Create task\")\nprint(\"  GET    /tasks/{id}/         - Get task\")\nprint(\"  PUT    /tasks/{id}/         - Update task\")\nprint(\"  DELETE /tasks/{id}/         - Delete task\")\nprint(\"  POST   /tasks/{id}/complete/- Mark complete\")\nprint(\"  GET    /tasks/pending/      - List pending\")\n\nprint(\"\\nSerializer Features:\")\nprint(\"  - project_name computed from related model\")\nprint(\"  - created_at is read-only\")\n\nprint(\"\\nViewSet Features:\")\nprint(\"  - Filtered by current user\")\nprint(\"  - Auto-sets user on create\")\nprint(\"  - Custom complete action\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use serializers.CharField(source='project.name', read_only=True) to create a computed field from a related model."
                },
                {
                  "level": 2,
                  "text": "Override get_queryset() to filter: return Task.objects.filter(user=self.request.user)"
                },
                {
                  "level": 3,
                  "text": "For the complete action, use @action(detail=True, methods=['post']) - detail=True means it operates on a single object (requires pk)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to set basename in router.register()",
                  "consequence": "Error when viewset doesn't have a queryset attribute",
                  "correction": "router.register('tasks', TaskViewSet, basename='task')"
                },
                {
                  "mistake": "Using detail=False for actions that operate on single objects",
                  "consequence": "Action available at /tasks/complete/ instead of /tasks/{id}/complete/",
                  "correction": "Use detail=True for actions that need a specific object"
                },
                {
                  "mistake": "Not using select_related() in get_queryset()",
                  "consequence": "N+1 query problem when accessing project.name",
                  "correction": "Add .select_related('project') to eager-load the relationship"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-django-async",
          "title": "Django Async Views (5.2+)",
          "moduleId": "module-14",
          "order": 17,
          "estimatedMinutes": 45,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Django's Async Evolution",
              "content": "**Django's Journey to Async**\n\nDjango has progressively added async support across multiple versions:\n\n**Django 3.0 (2019)** - ASGI Support\n- Django could run under ASGI servers (uvicorn, daphne)\n- No async views yet, just the foundation\n\n**Django 3.1 (2020)** - Async Views & Middleware\n- First async view support\n- Async middleware possible\n- sync_to_async and async_to_sync utilities\n\n**Django 4.1 (2022)** - Async ORM Foundations\n- Async-compatible QuerySet interface\n- Still executed synchronously under the hood\n\n**Django 4.2 (2023)** - More Async ORM\n- aget_or_create, aupdate_or_create\n- Better async support in many areas\n\n**Django 5.0-5.2 (2024-2025)** - Full Async ORM\n- True async database queries with aall(), afirst(), acount()\n- Async authentication: aauthenticate(), alogin(), alogout()\n- Async context processors\n- Async signals (partial)\n\n**Why Async Matters:**\n\n```python\n# Sync: Waits for each external call\ndef sync_view(request):\n    data1 = fetch_api_1()  # Blocks 100ms\n    data2 = fetch_api_2()  # Blocks 100ms\n    return JsonResponse(...)  # Total: 200ms\n\n# Async: Concurrent external calls\nasync def async_view(request):\n    data1, data2 = await asyncio.gather(\n        fetch_api_1(),  # Runs concurrently\n        fetch_api_2()   # Runs concurrently\n    )\n    return JsonResponse(...)  # Total: ~100ms\n```\n\n**When to Use Async Views:**\n- Multiple external API calls\n- WebSocket connections\n- Long-polling endpoints\n- I/O-heavy operations (file uploads, external services)"
            },
            {
              "type": "EXAMPLE",
              "title": "Basic Async View Syntax",
              "content": "**Writing Your First Async View**\n\nAsync views in Django look just like regular views, but use `async def` and can `await` async operations.\n\n**Key Points:**\n\n1. **Use `async def`** - The view function must be async\n2. **Use `await`** - For any async operations inside\n3. **Return normal responses** - JsonResponse, HttpResponse work the same\n4. **URL routing unchanged** - No special URL configuration needed\n\n**Running Async Django:**\n\nYou need an ASGI server instead of WSGI:\n```bash\n# Development\nuvicorn myproject.asgi:application --reload\n\n# Production\nuvicorn myproject.asgi:application --workers 4\n```\n\n**ASGI vs WSGI:**\n- WSGI (gunicorn): Sync only, one request per worker\n- ASGI (uvicorn): Async support, many requests per worker\n\n**Mixed Sync/Async is Fine:**\nDjango handles sync views under ASGI automatically - you don't need to convert everything at once.",
              "code": "# views.py\nimport asyncio\nfrom django.http import JsonResponse\n\n# Basic async view\nasync def health_check(request):\n    \"\"\"Simple async endpoint - no await needed.\"\"\"\n    return JsonResponse({\n        \"status\": \"healthy\",\n        \"async\": True\n    })\n\n\n# Async view with await\nasync def fetch_data(request):\n    \"\"\"Async view that awaits an operation.\"\"\"\n    # Simulate async I/O (API call, file read, etc.)\n    await asyncio.sleep(0.1)\n    \n    return JsonResponse({\n        \"message\": \"Data fetched asynchronously\"\n    })\n\n\n# Concurrent operations\nasync def dashboard_data(request):\n    \"\"\"Fetch multiple data sources concurrently.\"\"\"\n    \n    async def get_user_stats():\n        await asyncio.sleep(0.05)  # Simulated API call\n        return {\"users\": 1000, \"active\": 250}\n    \n    async def get_transaction_stats():\n        await asyncio.sleep(0.05)  # Simulated API call\n        return {\"total\": 5000, \"today\": 42}\n    \n    # Run both concurrently\n    user_stats, tx_stats = await asyncio.gather(\n        get_user_stats(),\n        get_transaction_stats()\n    )\n    \n    return JsonResponse({\n        \"users\": user_stats,\n        \"transactions\": tx_stats\n    })\n\n\nprint(\"=== Django Async Views ===\")\n\nprint(\"\\nBasic Async View:\")\nprint(\"  async def my_view(request):\")\nprint(\"      return JsonResponse({...})\")\n\nprint(\"\\nWith Await:\")\nprint(\"  async def my_view(request):\")\nprint(\"      data = await async_operation()\")\nprint(\"      return JsonResponse(data)\")\n\nprint(\"\\nConcurrent Calls:\")\nprint(\"  results = await asyncio.gather(\")\nprint(\"      api_call_1(),\")\nprint(\"      api_call_2()\")\nprint(\"  )\")\n\nprint(\"\\nRunning ASGI:\")\nprint(\"  uvicorn myproject.asgi:application --reload\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "When to Use Async Views",
              "content": "**Use Async Views When:**\n\n1. **Multiple External API Calls**\n   - Fetching from multiple microservices\n   - Aggregating data from third-party APIs\n   - asyncio.gather() runs them concurrently\n\n2. **WebSockets / Long-Polling**\n   - Chat applications\n   - Real-time notifications\n   - Live updates\n\n3. **Streaming Responses**\n   - Large file downloads\n   - Server-sent events\n   - Progressive rendering\n\n4. **High-Concurrency I/O**\n   - Many simultaneous external requests\n   - File upload/download handling\n\n**Stick with Sync Views When:**\n\n1. **CPU-Bound Work**\n   - Async doesn't help CPU-heavy operations\n   - Image processing, calculations run the same speed\n\n2. **Simple CRUD**\n   - Single database query + response\n   - Async overhead not worth it\n\n3. **Legacy Code Integration**\n   - Many sync-only libraries\n   - Easier to keep sync views\n\n4. **Team Familiarity**\n   - Async has a learning curve\n   - Sync code is easier to debug"
            },
            {
              "type": "EXAMPLE",
              "title": "Django 5.2 Async ORM Methods",
              "content": "**New Async ORM Methods in Django 5.2**\n\nDjango 5.2 introduces truly async database operations. These methods perform the actual database query asynchronously.\n\n**Async QuerySet Methods:**\n\n| Sync | Async | Returns |\n|------|-------|--------|\n| `.all()` + iterate | `.aall()` | Async generator |\n| `.get()` | `.aget()` | Single object |\n| `.first()` | `.afirst()` | First object or None |\n| `.last()` | `.alast()` | Last object or None |\n| `.count()` | `.acount()` | Integer |\n| `.exists()` | `.aexists()` | Boolean |\n| `.create()` | `.acreate()` | Created object |\n| `.update()` | `.aupdate()` | Rows affected |\n| `.delete()` | `.adelete()` | Tuple (count, details) |\n| `.get_or_create()` | `.aget_or_create()` | (obj, created) |\n| `.update_or_create()` | `.aupdate_or_create()` | (obj, created) |\n\n**Important:** Filter chains are still sync - only the terminal methods are async:\n```python\n# Filtering is sync (builds query)\nqueryset = Transaction.objects.filter(user=user)\n\n# Terminal method is async (executes query)\ntransactions = await queryset.aall()\n```\n\n**Database Backend Support:**\n- PostgreSQL: Full async support via asyncpg/psycopg3\n- SQLite: Runs in thread pool (aiosqlite)\n- MySQL: Limited async support",
              "code": "# models.py\nfrom django.db import models\nfrom django.contrib.auth.models import User\n\nclass Transaction(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    amount = models.DecimalField(max_digits=10, decimal_places=2)\n    description = models.CharField(max_length=200)\n    category = models.CharField(max_length=50)\n    created_at = models.DateTimeField(auto_now_add=True)\n    \n    def to_dict(self):\n        return {\n            \"id\": self.id,\n            \"amount\": str(self.amount),\n            \"description\": self.description,\n            \"category\": self.category,\n        }\n\n\n# views.py - Django 5.2 Async ORM\nfrom django.http import JsonResponse\n\nasync def get_transactions(request):\n    \"\"\"Fetch user's transactions using async ORM.\"\"\"\n    # aall() returns an async iterable\n    transactions = []\n    async for tx in Transaction.objects.filter(\n        user=request.user\n    ).order_by('-created_at')[:50]:\n        transactions.append(tx.to_dict())\n    \n    return JsonResponse({\"transactions\": transactions})\n\n\nasync def get_transaction_stats(request):\n    \"\"\"Get transaction statistics using async methods.\"\"\"\n    user_txs = Transaction.objects.filter(user=request.user)\n    \n    # Async count and existence check\n    total_count = await user_txs.acount()\n    has_transactions = await user_txs.aexists()\n    \n    # Async first/last\n    latest = await user_txs.order_by('-created_at').afirst()\n    oldest = await user_txs.order_by('created_at').afirst()\n    \n    return JsonResponse({\n        \"total\": total_count,\n        \"has_transactions\": has_transactions,\n        \"latest\": latest.to_dict() if latest else None,\n        \"oldest\": oldest.to_dict() if oldest else None,\n    })\n\n\nasync def create_transaction(request):\n    \"\"\"Create transaction using async ORM.\"\"\"\n    import json\n    data = json.loads(request.body)\n    \n    # Async create\n    tx = await Transaction.objects.acreate(\n        user=request.user,\n        amount=data[\"amount\"],\n        description=data[\"description\"],\n        category=data[\"category\"]\n    )\n    \n    return JsonResponse(tx.to_dict(), status=201)\n\n\nprint(\"=== Django 5.2 Async ORM ===\")\n\nprint(\"\\nAsync QuerySet Methods:\")\nprint(\"  aall()    - Async iteration\")\nprint(\"  aget()    - Single object\")\nprint(\"  afirst()  - First or None\")\nprint(\"  acount()  - Count rows\")\nprint(\"  aexists() - Check existence\")\nprint(\"  acreate() - Create object\")\n\nprint(\"\\nUsage Pattern:\")\nprint(\"  # Build query (sync)\")\nprint(\"  qs = Model.objects.filter(user=user)\")\nprint(\"  # Execute query (async)\")\nprint(\"  results = await qs.aall()\")",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Async ORM Gotcha: Iteration",
              "content": "**Do NOT use list() or iteration directly on async querysets!**\n\n**Wrong - This will raise SynchronousOnlyOperation:**\n```python\nasync def bad_view(request):\n    # This tries to iterate synchronously!\n    transactions = list(Transaction.objects.all())  # ERROR!\n```\n\n**Right - Use aall() for async iteration:**\n```python\nasync def good_view(request):\n    # Option 1: Async for loop\n    async for tx in Transaction.objects.all():\n        process(tx)\n    \n    # Option 2: Collect into list\n    transactions = []\n    async for tx in Transaction.objects.all():\n        transactions.append(tx)\n    \n    # Option 3: List comprehension (Django 5.2+)\n    transactions = [tx async for tx in Transaction.objects.all()]\n```\n\n**Why This Happens:**\nAsync views run in an async context where sync database access is blocked by default to prevent accidental blocking."
            },
            {
              "type": "EXAMPLE",
              "title": "Using sync_to_async",
              "content": "**Bridging Sync and Async Code**\n\nNot all code is async-ready. Use `sync_to_async` to safely call synchronous code from async views.\n\n**When to Use sync_to_async:**\n\n1. **Legacy ORM code** - Existing sync functions\n2. **Third-party libraries** - Sync-only packages\n3. **Complex queries** - Easier to write sync, wrap for async\n\n**How It Works:**\nWraps the sync function to run in a thread pool, preventing it from blocking the event loop.\n\n**thread_sensitive Parameter:**\n- `True` (default): Runs in same thread (safe for Django ORM)\n- `False`: Runs in any thread pool thread (faster for non-Django code)\n\n**Performance Note:**\nThread pool overhead exists - don't wrap tiny operations. Batch related sync operations into one wrapped function when possible.",
              "code": "from asgiref.sync import sync_to_async\nfrom django.http import JsonResponse\nfrom django.db.models import Sum, Avg\n\n# Wrap existing sync functions\n@sync_to_async\ndef get_user_summary(user):\n    \"\"\"Complex sync query - easier to write, wrap for async.\"\"\"\n    from .models import Transaction\n    \n    transactions = Transaction.objects.filter(user=user)\n    \n    return {\n        \"count\": transactions.count(),\n        \"total_income\": transactions.filter(\n            amount__gt=0\n        ).aggregate(total=Sum('amount'))['total'] or 0,\n        \"total_expenses\": transactions.filter(\n            amount__lt=0\n        ).aggregate(total=Sum('amount'))['total'] or 0,\n        \"average\": transactions.aggregate(\n            avg=Avg('amount')\n        )['avg'] or 0,\n    }\n\n\nasync def user_summary_view(request):\n    \"\"\"Async view using sync helper.\"\"\"\n    summary = await get_user_summary(request.user)\n    return JsonResponse(summary)\n\n\n# Inline wrapping for one-off sync calls\nasync def mixed_operations(request):\n    \"\"\"Mix async ORM with wrapped sync code.\"\"\"\n    from .models import Transaction\n    \n    # Native async ORM\n    latest = await Transaction.objects.filter(\n        user=request.user\n    ).order_by('-created_at').afirst()\n    \n    # Wrap sync operation inline\n    @sync_to_async\n    def complex_calculation():\n        # Sync code that's hard to convert\n        return calculate_monthly_trends(request.user)\n    \n    trends = await complex_calculation()\n    \n    return JsonResponse({\n        \"latest\": latest.to_dict() if latest else None,\n        \"trends\": trends\n    })\n\n\n# Working with sync libraries\n@sync_to_async(thread_sensitive=False)\ndef call_sync_api_client(endpoint):\n    \"\"\"Wrap a sync HTTP client.\"\"\"\n    import requests  # Sync library\n    response = requests.get(endpoint)\n    return response.json()\n\n\nasync def fetch_external_data(request):\n    \"\"\"Use sync library in async view.\"\"\"\n    import asyncio\n    \n    # Run multiple sync API calls concurrently\n    results = await asyncio.gather(\n        call_sync_api_client(\"https://api.example.com/data1\"),\n        call_sync_api_client(\"https://api.example.com/data2\"),\n    )\n    \n    return JsonResponse({\"data\": results})\n\n\nprint(\"=== sync_to_async ===\")\n\nprint(\"\\nDecorator Style:\")\nprint(\"  @sync_to_async\")\nprint(\"  def sync_function():\")\nprint(\"      return sync_operation()\")\n\nprint(\"\\nInline Style:\")\nprint(\"  wrapped = sync_to_async(sync_func)\")\nprint(\"  result = await wrapped()\")\n\nprint(\"\\nthread_sensitive:\")\nprint(\"  True (default) - Same thread, safe for Django ORM\")\nprint(\"  False - Any thread, faster for non-Django code\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Async Authentication (Django 5.2)",
              "content": "**Async Auth Functions in Django 5.2**\n\nDjango 5.2 provides async versions of authentication functions:\n\n| Sync | Async |\n|------|-------|\n| `authenticate()` | `aauthenticate()` |\n| `login()` | `alogin()` |\n| `logout()` | `alogout()` |\n| `get_user()` | `aget_user()` |\n\n**Async Decorators:**\n- Use `@login_required` with async views - it handles both\n- For async-specific, use `@sync_to_async` wrapper\n\n**Request User in Async Views:**\n```python\nasync def my_view(request):\n    # request.user works but may block\n    # For fully async, use:\n    user = await aget_user(request)\n```",
              "code": "from django.http import JsonResponse\nfrom django.contrib.auth import (\n    aauthenticate, \n    alogin, \n    alogout,\n)\nfrom django.views.decorators.http import require_http_methods\nimport json\n\n\n@require_http_methods([\"POST\"])\nasync def async_login_view(request):\n    \"\"\"Async login endpoint.\"\"\"\n    data = json.loads(request.body)\n    \n    # Async authentication\n    user = await aauthenticate(\n        request,\n        username=data.get(\"username\"),\n        password=data.get(\"password\")\n    )\n    \n    if user is not None:\n        # Async login\n        await alogin(request, user)\n        return JsonResponse({\n            \"status\": \"success\",\n            \"user\": user.username\n        })\n    \n    return JsonResponse(\n        {\"error\": \"Invalid credentials\"},\n        status=401\n    )\n\n\n@require_http_methods([\"POST\"])\nasync def async_logout_view(request):\n    \"\"\"Async logout endpoint.\"\"\"\n    await alogout(request)\n    return JsonResponse({\"status\": \"logged_out\"})\n\n\n# Using with login_required decorator\nfrom django.contrib.auth.decorators import login_required\n\n@login_required\nasync def protected_async_view(request):\n    \"\"\"Protected async view - login_required works with async.\"\"\"\n    return JsonResponse({\n        \"message\": f\"Hello, {request.user.username}!\",\n        \"authenticated\": True\n    })\n\n\nprint(\"=== Django 5.2 Async Authentication ===\")\n\nprint(\"\\nAsync Auth Functions:\")\nprint(\"  await aauthenticate(request, username, password)\")\nprint(\"  await alogin(request, user)\")\nprint(\"  await alogout(request)\")\n\nprint(\"\\nDecorators Work with Async:\")\nprint(\"  @login_required\")\nprint(\"  async def my_view(request):\")\nprint(\"      ...\")\n\nprint(\"\\nMigration Tip:\")\nprint(\"  Replace authenticate() with aauthenticate()\")\nprint(\"  Replace login() with alogin()\")\nprint(\"  Add 'await' before calls\")",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Async Middleware",
              "content": "**Writing Async Middleware**\n\nDjango supports async middleware that can process requests without blocking.\n\n**Two Types of Middleware:**\n\n1. **Sync middleware** - Traditional, uses `__call__`\n2. **Async middleware** - Uses `__acall__` for async processing\n\n**Django Detects Automatically:**\n- If your middleware has `__acall__`, it's treated as async\n- If only `__call__`, it runs in thread pool for async views\n\n**Best Practice:**\nImplement both `__call__` and `__acall__` for compatibility with mixed sync/async views.",
              "code": "import time\nimport asyncio\nfrom django.http import JsonResponse\n\n\nclass AsyncTimingMiddleware:\n    \"\"\"\n    Middleware that times request processing.\n    Works with both sync and async views.\n    \"\"\"\n    \n    def __init__(self, get_response):\n        self.get_response = get_response\n        # Check if get_response is async\n        self.async_mode = asyncio.iscoroutinefunction(get_response)\n    \n    def __call__(self, request):\n        \"\"\"Sync request handling.\"\"\"\n        start = time.perf_counter()\n        response = self.get_response(request)\n        duration = time.perf_counter() - start\n        response['X-Request-Duration'] = f\"{duration:.4f}s\"\n        return response\n    \n    async def __acall__(self, request):\n        \"\"\"Async request handling.\"\"\"\n        start = time.perf_counter()\n        response = await self.get_response(request)\n        duration = time.perf_counter() - start\n        response['X-Request-Duration'] = f\"{duration:.4f}s\"\n        return response\n\n\nclass AsyncRateLimitMiddleware:\n    \"\"\"\n    Simple async rate limiting middleware.\n    Demonstrates async middleware with await.\n    \"\"\"\n    \n    def __init__(self, get_response):\n        self.get_response = get_response\n        self.request_counts = {}  # Simple in-memory store\n    \n    async def __acall__(self, request):\n        \"\"\"Check rate limit asynchronously.\"\"\"\n        # Get client IP\n        ip = request.META.get('REMOTE_ADDR')\n        \n        # Simple rate check (use Redis in production)\n        current_count = self.request_counts.get(ip, 0)\n        \n        if current_count >= 100:  # 100 requests limit\n            return JsonResponse(\n                {\"error\": \"Rate limit exceeded\"},\n                status=429\n            )\n        \n        self.request_counts[ip] = current_count + 1\n        \n        # Continue to view\n        response = await self.get_response(request)\n        return response\n    \n    def __call__(self, request):\n        \"\"\"Sync fallback.\"\"\"\n        # For sync views, run without async rate limiting\n        return self.get_response(request)\n\n\n# settings.py\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'myapp.middleware.AsyncTimingMiddleware',  # Add async middleware\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    # ... other middleware\n]\n\n\nprint(\"=== Async Middleware ===\")\n\nprint(\"\\nMiddleware Structure:\")\nprint(\"  class AsyncMiddleware:\")\nprint(\"      def __init__(self, get_response):\")\nprint(\"          self.get_response = get_response\")\nprint(\"\")\nprint(\"      def __call__(self, request):  # Sync\")\nprint(\"          return self.get_response(request)\")\nprint(\"\")\nprint(\"      async def __acall__(self, request):  # Async\")\nprint(\"          return await self.get_response(request)\")\n\nprint(\"\\nDjango Auto-Detection:\")\nprint(\"  - Has __acall__? -> Async middleware\")\nprint(\"  - Only __call__? -> Sync (runs in thread pool)\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Performance Considerations",
              "content": "**Async Django Performance Guide**\n\n**When Async Helps:**\n\n1. **I/O-Bound Operations**\n   - External API calls: 10x+ improvement with concurrent requests\n   - Database queries: Moderate improvement (depends on backend)\n   - File operations: Improvement with multiple files\n\n2. **High Concurrency**\n   - Many simultaneous connections\n   - WebSockets and long-polling\n   - Real-time features\n\n**When Async Doesn't Help:**\n\n1. **CPU-Bound Work**\n   - Async runs on one thread\n   - CPU work blocks the event loop\n   - Use multiprocessing for CPU tasks\n\n2. **Simple CRUD**\n   - Single query + response\n   - Async overhead exceeds benefit\n\n**Performance Tips:**\n\n1. **Batch sync_to_async calls**\n   ```python\n   # Bad: Many small wrapped calls\n   for item in items:\n       await sync_to_async(process)(item)\n   \n   # Good: One wrapped call for batch\n   @sync_to_async\n   def process_all(items):\n       return [process(item) for item in items]\n   ```\n\n2. **Use select_related/prefetch_related**\n   ```python\n   # Avoid N+1 queries in async loops\n   async for tx in Transaction.objects.select_related('user'):\n       print(tx.user.username)  # No extra query\n   ```\n\n3. **Connection Pooling**\n   - Use async-compatible database drivers\n   - Configure pool size for your workload\n   - PostgreSQL: asyncpg or psycopg3\n\n4. **Don't Mix Blocking Code**\n   - Never use `time.sleep()` in async views\n   - Use `asyncio.sleep()` instead\n   - Wrap all blocking I/O with sync_to_async"
            },
            {
              "type": "EXAMPLE",
              "title": "Finance Tracker: Async Dashboard",
              "content": "**Real-World Example: Async Dashboard for Finance Tracker**\n\nThis example shows how to build an async dashboard that fetches multiple data sources concurrently.\n\n**The Scenario:**\nA finance dashboard needs to display:\n- User's recent transactions\n- Spending by category\n- Account balance\n- External exchange rates (API call)\n\n**Sync Approach:** ~400ms (100ms each, sequential)\n**Async Approach:** ~100ms (all concurrent)\n\n**Architecture:**\n1. Async view coordinates data fetching\n2. Each data source has its own async helper\n3. asyncio.gather() runs all concurrently\n4. Results combined into single response",
              "code": "import asyncio\nfrom django.http import JsonResponse\nfrom django.contrib.auth.decorators import login_required\nfrom asgiref.sync import sync_to_async\nfrom django.db.models import Sum\nfrom decimal import Decimal\n\n\n# Async helper functions\nasync def get_recent_transactions(user, limit=10):\n    \"\"\"Fetch recent transactions asynchronously.\"\"\"\n    from .models import Transaction\n    \n    transactions = []\n    async for tx in Transaction.objects.filter(\n        user=user\n    ).order_by('-created_at')[:limit]:\n        transactions.append(tx.to_dict())\n    \n    return transactions\n\n\nasync def get_spending_by_category(user):\n    \"\"\"Get spending breakdown by category.\"\"\"\n    from .models import Transaction\n    \n    # Complex aggregation - wrap in sync_to_async\n    @sync_to_async\n    def aggregate_spending():\n        return list(\n            Transaction.objects.filter(\n                user=user,\n                amount__lt=0  # Expenses are negative\n            ).values('category').annotate(\n                total=Sum('amount')\n            ).order_by('total')[:5]\n        )\n    \n    return await aggregate_spending()\n\n\nasync def get_account_balance(user):\n    \"\"\"Calculate current account balance.\"\"\"\n    from .models import Transaction\n    \n    @sync_to_async\n    def calculate_balance():\n        result = Transaction.objects.filter(\n            user=user\n        ).aggregate(balance=Sum('amount'))\n        return result['balance'] or Decimal('0')\n    \n    return await calculate_balance()\n\n\nasync def get_exchange_rates():\n    \"\"\"Fetch exchange rates from external API.\"\"\"\n    # In production: use aiohttp or httpx\n    # Simulating async API call\n    await asyncio.sleep(0.05)\n    return {\n        \"USD\": 1.0,\n        \"EUR\": 0.85,\n        \"GBP\": 0.73,\n    }\n\n\n@login_required\nasync def async_dashboard(request):\n    \"\"\"\n    Async dashboard that fetches all data concurrently.\n    \n    Performance comparison:\n    - Sync: ~400ms (100ms * 4 operations)\n    - Async: ~100ms (all run concurrently)\n    \"\"\"\n    user = request.user\n    \n    # Fetch all data concurrently\n    transactions, categories, balance, rates = await asyncio.gather(\n        get_recent_transactions(user),\n        get_spending_by_category(user),\n        get_account_balance(user),\n        get_exchange_rates(),\n    )\n    \n    return JsonResponse({\n        \"transactions\": transactions,\n        \"spending_by_category\": categories,\n        \"balance\": str(balance),\n        \"exchange_rates\": rates,\n    })\n\n\n# URL configuration (unchanged from sync views)\n# urls.py\nfrom django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('dashboard/', views.async_dashboard, name='dashboard'),\n]\n\n\nprint(\"=== Finance Tracker Async Dashboard ===\")\n\nprint(\"\\nData Sources (concurrent):\")\nprint(\"  1. Recent transactions (async ORM)\")\nprint(\"  2. Spending by category (sync_to_async)\")\nprint(\"  3. Account balance (sync_to_async)\")\nprint(\"  4. Exchange rates (external API)\")\n\nprint(\"\\nPerformance:\")\nprint(\"  Sync:  ~400ms (sequential)\")\nprint(\"  Async: ~100ms (concurrent)\")\n\nprint(\"\\nPattern:\")\nprint(\"  results = await asyncio.gather(\")\nprint(\"      fetch_data_1(),\")\nprint(\"      fetch_data_2(),\")\nprint(\"      fetch_data_3(),\")\nprint(\"  )\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "**Django Async Views - Summary**\n\n**Getting Started:**\n1. Use `async def` for async views\n2. Run with ASGI server: `uvicorn project.asgi:application`\n3. Mix sync and async views freely - Django handles it\n\n**Django 5.2 Async ORM:**\n- `aall()`, `afirst()`, `alast()` - Async iteration\n- `acount()`, `aexists()` - Async aggregation\n- `acreate()`, `aupdate()`, `adelete()` - Async mutations\n- `aget_or_create()`, `aupdate_or_create()` - Async get-or-create\n\n**sync_to_async:**\n- Wrap sync functions: `@sync_to_async`\n- Use for legacy code, complex queries, sync libraries\n- `thread_sensitive=True` for Django ORM (default)\n\n**Async Authentication (5.2):**\n- `aauthenticate()`, `alogin()`, `alogout()`\n- Standard decorators work with async views\n\n**Performance Guidelines:**\n- Use async for I/O-bound work (APIs, multiple queries)\n- Keep sync for CPU-bound work and simple CRUD\n- Use `asyncio.gather()` for concurrent operations\n- Batch sync_to_async calls when possible\n\n**Common Pitfalls:**\n- Don't use `list()` on querysets in async views\n- Don't use `time.sleep()` - use `asyncio.sleep()`\n- Don't forget to `await` async calls\n- Remember filtering is sync, terminal methods are async"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-django-async-challenge",
              "title": "Convert Sync View to Async",
              "description": "Convert a synchronous Django view to an async view using Django 5.2 async ORM methods. The view fetches user transactions and calculates statistics.",
              "instructions": "Convert this sync view to async:\n\n1. Change the function to async def\n2. Replace .filter().order_by()[:10] iteration with async iteration\n3. Replace .count() with .acount()\n4. Replace the aggregate query with sync_to_async wrapper\n5. Ensure all database operations are properly awaited\n\nThe view should return the same data structure but execute asynchronously.",
              "starterCode": "from django.http import JsonResponse\nfrom django.db.models import Sum\nfrom .models import Transaction  # Assume this model exists\n\n# SYNC VERSION - Convert this to async\ndef transaction_summary(request):\n    \"\"\"Get user's transaction summary - SYNC version.\"\"\"\n    user = request.user\n    \n    # Get recent transactions\n    recent = []\n    for tx in Transaction.objects.filter(\n        user=user\n    ).order_by('-created_at')[:10]:\n        recent.append({\n            'id': tx.id,\n            'amount': str(tx.amount),\n            'description': tx.description,\n        })\n    \n    # Get count\n    total_count = Transaction.objects.filter(user=user).count()\n    \n    # Get total amount (aggregate)\n    total = Transaction.objects.filter(\n        user=user\n    ).aggregate(total=Sum('amount'))['total'] or 0\n    \n    return JsonResponse({\n        'recent': recent,\n        'total_count': total_count,\n        'total_amount': str(total),\n    })\n\n\n# TODO: Create async version below\n# async def transaction_summary_async(request):\n#     ...",
              "solution": "from django.http import JsonResponse\nfrom django.db.models import Sum\nfrom asgiref.sync import sync_to_async\nfrom .models import Transaction\n\n\n# ASYNC VERSION\nasync def transaction_summary_async(request):\n    \"\"\"Get user's transaction summary - ASYNC version.\"\"\"\n    user = request.user\n    \n    # Get recent transactions using async iteration\n    recent = []\n    async for tx in Transaction.objects.filter(\n        user=user\n    ).order_by('-created_at')[:10]:\n        recent.append({\n            'id': tx.id,\n            'amount': str(tx.amount),\n            'description': tx.description,\n        })\n    \n    # Get count using async method\n    total_count = await Transaction.objects.filter(\n        user=user\n    ).acount()\n    \n    # Wrap aggregate in sync_to_async\n    @sync_to_async\n    def get_total_amount():\n        result = Transaction.objects.filter(\n            user=user\n        ).aggregate(total=Sum('amount'))\n        return result['total'] or 0\n    \n    total = await get_total_amount()\n    \n    return JsonResponse({\n        'recent': recent,\n        'total_count': total_count,\n        'total_amount': str(total),\n    })\n\n\n# Test output\nprint(\"=== Async Transaction Summary ===\")\n\nprint(\"\\nChanges Made:\")\nprint(\"  1. def -> async def\")\nprint(\"  2. for loop -> async for loop\")\nprint(\"  3. .count() -> await .acount()\")\nprint(\"  4. .aggregate() -> @sync_to_async wrapper\")\n\nprint(\"\\nAsync ORM Methods Used:\")\nprint(\"  - async for tx in queryset (async iteration)\")\nprint(\"  - await queryset.acount()\")\nprint(\"  - await sync_to_async(aggregate_func)()\")\n\nprint(\"\\nKey Points:\")\nprint(\"  - Filter chains remain sync (just build query)\")\nprint(\"  - Terminal methods (iteration, count) are async\")\nprint(\"  - Complex aggregates need sync_to_async\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start by changing 'def' to 'async def' for the function definition."
                },
                {
                  "level": 2,
                  "text": "For iteration over querysets, use 'async for tx in queryset:' instead of a regular for loop."
                },
                {
                  "level": 3,
                  "text": "Replace .count() with .acount() and add 'await' before it."
                },
                {
                  "level": 4,
                  "text": "For aggregate(), create a helper function and decorate it with @sync_to_async, then await the call."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using list() to convert queryset to list in async view",
                  "consequence": "Raises SynchronousOnlyOperation error",
                  "correction": "Use 'async for' loop or list comprehension with 'async for'"
                },
                {
                  "mistake": "Forgetting to await async ORM methods",
                  "consequence": "Returns coroutine object instead of actual data",
                  "correction": "Always use 'await' before acount(), afirst(), etc."
                },
                {
                  "mistake": "Using aggregate() directly without sync_to_async",
                  "consequence": "Raises SynchronousOnlyOperation in async context",
                  "correction": "Wrap aggregate queries with @sync_to_async decorator"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-03b",
          "title": "Object-Relational Mapping with SQLAlchemy",
          "moduleId": "module-14",
          "order": 18,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Why ORMs?",
              "content": "**ORM = Object-Relational Mapper**\n\n**The Problem with Raw SQL:**\n```python\n# Raw SQL is error-prone and tedious\ncursor.execute(\n    'INSERT INTO users (name, email) VALUES (?, ?)',\n    (name, email)\n)\n```\n\n**With an ORM:**\n```python\n# Work with Python objects instead!\nuser = User(name='Alice', email='alice@test.com')\ndb.session.add(user)\ndb.session.commit()\n```\n\n**Think of ORM like a translator:**\n- You speak Python\n- Database speaks SQL\n- ORM translates between them\n\n**Benefits:**\n- Write Python, not SQL strings\n- Type safety and autocompletion\n- Database-agnostic (switch from SQLite to PostgreSQL easily)\n- Prevents SQL injection automatically\n- Relationships handled elegantly\n\n**Popular Python ORMs:**\n- **SQLAlchemy** - Most powerful, industry standard\n- **SQLModel** - SQLAlchemy + Pydantic (great for FastAPI)\n- **Django ORM** - Built into Django\n- **Tortoise ORM** - Async-first\n\n**We'll use SQLAlchemy** - it's the most widely used and powers many production applications."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: SQLAlchemy Basics",
              "content": "**SQLAlchemy setup:**\n\n```python\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker, declarative_base\n\n# Create engine (database connection)\nengine = create_engine('sqlite:///app.db')\n\n# Create base class for models\nBase = declarative_base()\n\n# Create session factory\nSession = sessionmaker(bind=engine)\n```\n\n**Define a model:**\n```python\nfrom sqlalchemy import Column, Integer, String\n\nclass User(Base):\n    __tablename__ = 'users'\n    \n    id = Column(Integer, primary_key=True)\n    name = Column(String(100), nullable=False)\n    email = Column(String(100), unique=True)\n```\n\n**CRUD Operations:**\n```python\n# Create\nuser = User(name='Alice', email='alice@test.com')\nsession.add(user)\nsession.commit()\n\n# Read\nuser = session.query(User).filter_by(email='alice@test.com').first()\n\n# Update\nuser.name = 'Alice Smith'\nsession.commit()\n\n# Delete\nsession.delete(user)\nsession.commit()\n```",
              "code": "from sqlalchemy import create_engine, Column, Integer, String, ForeignKey, DateTime\nfrom sqlalchemy.orm import sessionmaker, declarative_base, relationship\nfrom datetime import datetime\n\nprint(\"=== SQLAlchemy Setup ===\")\n\n# Create in-memory SQLite database\nengine = create_engine('sqlite:///:memory:', echo=False)\n\n# Base class for all models\nBase = declarative_base()\n\n# Session factory\nSession = sessionmaker(bind=engine)\n\nprint(\"\\n=== Defining Models ===\")\n\nclass User(Base):\n    \"\"\"User model with SQLAlchemy\"\"\"\n    __tablename__ = 'users'\n    \n    # Columns\n    id = Column(Integer, primary_key=True)\n    name = Column(String(100), nullable=False)\n    email = Column(String(100), unique=True, nullable=False)\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship to posts\n    posts = relationship('Post', back_populates='author')\n    \n    def __repr__(self):\n        return f\"<User(id={self.id}, name='{self.name}')>\"\n\nclass Post(Base):\n    \"\"\"Blog post model\"\"\"\n    __tablename__ = 'posts'\n    \n    id = Column(Integer, primary_key=True)\n    title = Column(String(200), nullable=False)\n    content = Column(String(1000))\n    author_id = Column(Integer, ForeignKey('users.id'))\n    created_at = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship to user\n    author = relationship('User', back_populates='posts')\n    \n    def __repr__(self):\n        return f\"<Post(id={self.id}, title='{self.title}')>\"\n\n# Create all tables\nBase.metadata.create_all(engine)\nprint(\"Tables created: users, posts\")\n\nprint(\"\\n=== CRUD Operations ===\")\n\n# Create a session\nsession = Session()\n\n# CREATE - Add users\nprint(\"\\n1. CREATE - Adding users...\")\nalice = User(name='Alice', email='alice@example.com')\nbob = User(name='Bob', email='bob@example.com')\n\nsession.add(alice)\nsession.add(bob)\nsession.commit()\n\nprint(f\"  Created: {alice}\")\nprint(f\"  Created: {bob}\")\n\n# CREATE - Add posts\npost1 = Post(title='Hello World', content='My first post!', author=alice)\npost2 = Post(title='SQLAlchemy Tips', content='ORMs are great!', author=alice)\npost3 = Post(title='Python Tutorial', content='Learn Python', author=bob)\n\nsession.add_all([post1, post2, post3])\nsession.commit()\n\nprint(f\"  Created: {post1}\")\nprint(f\"  Created: {post2}\")\nprint(f\"  Created: {post3}\")\n\n# READ - Query users\nprint(\"\\n2. READ - Querying...\")\n\n# Get all users\nall_users = session.query(User).all()\nprint(f\"  All users: {all_users}\")\n\n# Filter by email\nuser = session.query(User).filter_by(email='alice@example.com').first()\nprint(f\"  Found by email: {user}\")\n\n# Filter with conditions\nusers_with_a = session.query(User).filter(User.name.like('A%')).all()\nprint(f\"  Names starting with A: {users_with_a}\")\n\n# Access relationships\nprint(f\"  Alice's posts: {user.posts}\")\n\n# UPDATE\nprint(\"\\n3. UPDATE - Modifying...\")\nalice.name = 'Alice Smith'\nsession.commit()\nprint(f\"  Updated: {alice}\")\n\n# DELETE\nprint(\"\\n4. DELETE - Removing...\")\nsession.delete(post3)\nsession.commit()\nprint(\"  Deleted Bob's post\")\n\n# Verify deletion\nremaining_posts = session.query(Post).all()\nprint(f\"  Remaining posts: {remaining_posts}\")\n\nprint(\"\\n=== Advanced Queries ===\")\n\n# Join query\nprint(\"\\nPosts with author names:\")\nfor post in session.query(Post).join(User).all():\n    print(f\"  '{post.title}' by {post.author.name}\")\n\n# Count\npost_count = session.query(Post).count()\nprint(f\"\\nTotal posts: {post_count}\")\n\n# Order by\nprint(\"\\nPosts ordered by title:\")\nfor post in session.query(Post).order_by(Post.title).all():\n    print(f\"  {post.title}\")\n\nsession.close()\n\nprint(\"\\n=== SQLAlchemy with FastAPI ===\")\n\nfastapi_example = '''\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker, Session\n\n# Database setup\nengine = create_engine('sqlite:///app.db')\nSessionLocal = sessionmaker(bind=engine)\n\n# Dependency to get database session\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\napp = FastAPI()\n\n@app.get('/users')\ndef get_users(db: Session = Depends(get_db)):\n    users = db.query(User).all()\n    return [{'id': u.id, 'name': u.name} for u in users]\n\n@app.post('/users', status_code=201)\ndef create_user(name: str, email: str, db: Session = Depends(get_db)):\n    user = User(name=name, email=email)\n    db.add(user)\n    db.commit()\n    db.refresh(user)\n    return {'id': user.id}\n'''\n\nprint(fastapi_example)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**Model Definition:**\n```python\nfrom sqlalchemy import Column, Integer, String\nfrom sqlalchemy.orm import declarative_base\n\nBase = declarative_base()\n\nclass User(Base):\n    __tablename__ = 'users'  # Table name\n    \n    id = Column(Integer, primary_key=True)  # Auto-increment\n    name = Column(String(100), nullable=False)  # Required\n    email = Column(String(100), unique=True)  # Unique constraint\n```\n\n**Column Types:**\n- `Integer` - Whole numbers\n- `String(length)` - Text with max length\n- `Text` - Long text\n- `Boolean` - True/False\n- `DateTime` - Date and time\n- `Float` - Decimal numbers\n\n**Query Patterns:**\n```python\n# Get all\nUser.query.all()\nsession.query(User).all()\n\n# Get by ID\nUser.query.get(1)\n\n# Filter\nUser.query.filter_by(name='Alice').first()\nUser.query.filter(User.email.like('%@gmail.com')).all()\n\n# Order\nUser.query.order_by(User.name.desc()).all()\n\n# Limit\nUser.query.limit(10).all()\n\n# Count\nUser.query.count()\n```\n\n**Relationships:**\n```python\n# One-to-Many\nclass User(Base):\n    posts = relationship('Post', back_populates='author')\n\nclass Post(Base):\n    author_id = Column(Integer, ForeignKey('users.id'))\n    author = relationship('User', back_populates='posts')\n\n# Usage\nuser.posts  # Get all posts by user\npost.author  # Get author of post\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **ORM maps Python classes to database tables** - Work with objects, not SQL strings\n- **SQLAlchemy is the industry standard** - Powers Flask, FastAPI, and many production apps\n- **Define models with Column types** - Integer, String, Boolean, DateTime, etc.\n- **CRUD is intuitive** - add(), query(), commit(), delete()\n- **Relationships link tables** - Use ForeignKey and relationship()\n- **Queries are chainable** - filter().order_by().limit().all()\n- **Sessions manage transactions** - commit() saves, rollback() reverts\n- **Migrations track schema changes** - Use Alembic for production"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-03b-challenge",
              "title": "Interactive Exercise",
              "description": "Create a SQLAlchemy model for a bookstore:\n1. Define a Book model with: id, title, author, price, in_stock (boolean)\n2. Define an Order model with: id, book_id (foreign key), quantity, order_date\n3. Create relationships between Book and Order\n4. Write queries to: find all books in stock, get orders for a specific book",
              "instructions": "Create a SQLAlchemy model for a bookstore with Book and Order models.",
              "starterCode": "from sqlalchemy import create_engine, Column, Integer, String, Float, Boolean, ForeignKey, DateTime\nfrom sqlalchemy.orm import sessionmaker, declarative_base, relationship\nfrom datetime import datetime\n\nBase = declarative_base()\n\n# TODO: Define Book model\nclass Book(Base):\n    __tablename__ = 'books'\n    # Add columns: id, title, author, price, in_stock\n    pass\n\n# TODO: Define Order model\nclass Order(Base):\n    __tablename__ = 'orders'\n    # Add columns: id, book_id (FK), quantity, order_date\n    pass\n\n# Test your models\nengine = create_engine('sqlite:///:memory:')\nBase.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\n\n# Add test data and queries here",
              "solution": "from sqlalchemy import create_engine, Column, Integer, String, Float, Boolean, ForeignKey, DateTime\nfrom sqlalchemy.orm import sessionmaker, declarative_base, relationship\nfrom datetime import datetime\n\nBase = declarative_base()\n\nclass Book(Base):\n    \"\"\"Book model for a bookstore.\"\"\"\n    __tablename__ = 'books'\n    \n    id = Column(Integer, primary_key=True)\n    title = Column(String(200), nullable=False)\n    author = Column(String(100), nullable=False)\n    price = Column(Float, nullable=False)\n    in_stock = Column(Boolean, default=True)\n    \n    # Relationship to orders\n    orders = relationship('Order', back_populates='book')\n    \n    def __repr__(self):\n        return f\"<Book('{self.title}' by {self.author})>\"\n\nclass Order(Base):\n    \"\"\"Order model for book purchases.\"\"\"\n    __tablename__ = 'orders'\n    \n    id = Column(Integer, primary_key=True)\n    book_id = Column(Integer, ForeignKey('books.id'), nullable=False)\n    quantity = Column(Integer, nullable=False, default=1)\n    order_date = Column(DateTime, default=datetime.utcnow)\n    \n    # Relationship to book\n    book = relationship('Book', back_populates='orders')\n    \n    def __repr__(self):\n        return f\"<Order({self.quantity}x {self.book.title})>\"\n\n# Setup database\nengine = create_engine('sqlite:///:memory:')\nBase.metadata.create_all(engine)\nSession = sessionmaker(bind=engine)\nsession = Session()\n\n# Add test books\nbooks = [\n    Book(title='Python Crash Course', author='Eric Matthes', price=29.99, in_stock=True),\n    Book(title='Clean Code', author='Robert Martin', price=34.99, in_stock=True),\n    Book(title='Design Patterns', author='Gang of Four', price=49.99, in_stock=False),\n]\nsession.add_all(books)\nsession.commit()\n\n# Add test orders\norder1 = Order(book=books[0], quantity=2)\norder2 = Order(book=books[0], quantity=1)\norder3 = Order(book=books[1], quantity=3)\nsession.add_all([order1, order2, order3])\nsession.commit()\n\n# Query 1: Find all books in stock\nprint('Books in stock:')\nfor book in session.query(Book).filter_by(in_stock=True).all():\n    print(f'  {book.title} - ${book.price}')\n\n# Query 2: Get orders for Python Crash Course\nprint('\\nOrders for Python Crash Course:')\npython_book = session.query(Book).filter_by(title='Python Crash Course').first()\nfor order in python_book.orders:\n    print(f'  {order.quantity} copies on {order.order_date.strftime(\"%Y-%m-%d\")}')\n\nsession.close()",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Column(Integer, primary_key=True) for id. Use ForeignKey('books.id') for book_id. Use relationship() for bidirectional access."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to commit after add",
                  "consequence": "Changes not saved to database",
                  "correction": "Always call session.commit() after modifications"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-14-lesson-04",
          "title": "Authentication and API Security",
          "moduleId": "module-14",
          "order": 11,
          "estimatedMinutes": 45,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Securing Your API",
              "content": "**API Security = Protecting your data and endpoints**\n\n**Think of it like a building:**\n- **No Security:** Anyone can walk in and do anything\n- **API Key:** Guests need a key card to enter\n- **JWT Token:** Temporary access badge with permissions\n- **Password Hashing:** Storing passwords safely (not plain text)\n\n**Authentication Methods:**\n\n**1. API Keys** üîë\n- Simple key in header\n- Good for: Server-to-server communication\n- Example: `X-API-Key: secret-key-123`\n\n**2. JWT (JSON Web Tokens)** üé´\n- Encoded token with user info\n- Good for: User authentication\n- Expires after time limit\n- Contains: user ID, permissions, expiration\n\n**3. Basic Auth** üîí\n- Username:password in header\n- Simple but less secure\n- Should use HTTPS\n\n**Security Best Practices:**\n\n1. **Never store plain passwords** - Always hash\n2. **Use HTTPS** - Encrypt data in transit\n3. **Validate all input** - Prevent injection attacks\n4. **Rate limiting** - Prevent abuse\n5. **CORS** - Control which domains can access API\n6. **Token expiration** - Tokens should expire\n7. **Least privilege** - Give minimum permissions needed"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: API Key Authentication with FastAPI",
              "content": "**Security implementation patterns with FastAPI:**\n\n**1. API Key Authentication with Depends:**\n```python\nfrom fastapi.security import APIKeyHeader\n\napi_key_header = APIKeyHeader(name='X-API-Key')\n\nasync def verify_api_key(api_key: str = Depends(api_key_header)):\n    if api_key not in API_KEYS:\n        raise HTTPException(status_code=401)\n    return API_KEYS[api_key]\n```\n\n**2. Password Hashing:**\n```python\n# NEVER store plain passwords!\nhashed = hash_password(password)  # Store this\nif verify_password(stored, provided):\n    # Password correct\n```\n\n**3. Rate Limiting:**\n- Track requests per time window\n- Return 429 when limit exceeded\n- Use slowapi package for production\n\n**4. CORS with FastAPI:**\n```python\nfrom fastapi.middleware.cors import CORSMiddleware\napp.add_middleware(CORSMiddleware, allow_origins=['*'])\n```\n\n**5. Input Validation with Pydantic:**\n- Automatic validation with type hints\n- EmailStr for email validation\n- Field() for constraints",
              "code": "from fastapi import FastAPI, Depends, HTTPException, Header, Request\nfrom fastapi.security import APIKeyHeader\nfrom fastapi.middleware.cors import CORSMiddleware\nfrom pydantic import BaseModel, EmailStr, Field\nimport secrets\nimport hashlib\nimport os\nfrom datetime import datetime, timedelta\nfrom collections import defaultdict\nimport time\n\napp = FastAPI()\n\n# CORS configuration\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=['*'],  # Configure for production\n    allow_methods=['*'],\n    allow_headers=['*'],\n)\n\n# Simulated API keys database\nAPI_KEYS = {\n    'dev-key-123': {'name': 'Development', 'permissions': ['read', 'write']},\n    'readonly-456': {'name': 'ReadOnly', 'permissions': ['read']}\n}\n\nprint(\"=== API Key Authentication ===\")\n\n# FastAPI's built-in API key header security\napi_key_header = APIKeyHeader(name='X-API-Key', auto_error=False)\n\nasync def verify_api_key(api_key: str = Depends(api_key_header)):\n    \"\"\"Dependency to verify API key\"\"\"\n    if not api_key:\n        raise HTTPException(status_code=401, detail='API key required')\n    if api_key not in API_KEYS:\n        raise HTTPException(status_code=401, detail='Invalid API key')\n    return API_KEYS[api_key]\n\ndef require_permission(permission: str):\n    \"\"\"Factory for permission-checking dependency\"\"\"\n    async def check_permission(api_key_info: dict = Depends(verify_api_key)):\n        if permission not in api_key_info['permissions']:\n            raise HTTPException(\n                status_code=403,\n                detail=f'Permission denied: {permission} required'\n            )\n        return api_key_info\n    return check_permission\n\n@app.get('/api/public')\ndef public():\n    \"\"\"Public endpoint - no auth required\"\"\"\n    return {'message': 'This is public'}\n\n@app.get('/api/protected')\ndef protected(api_key_info: dict = Depends(verify_api_key)):\n    \"\"\"Protected endpoint - requires API key\"\"\"\n    return {\n        'message': 'You have access!',\n        'key_name': api_key_info['name']\n    }\n\n@app.get('/api/admin')\ndef admin(api_key_info: dict = Depends(require_permission('write'))):\n    \"\"\"Admin endpoint - requires write permission\"\"\"\n    return {\n        'message': 'Admin access granted',\n        'permissions': api_key_info['permissions']\n    }\n\nprint(\"\\n=== Password Hashing ===\")\n\ndef hash_password(password: str) -> bytes:\n    \"\"\"Hash password with salt\"\"\"\n    salt = os.urandom(32)\n    pwdhash = hashlib.pbkdf2_hmac(\n        'sha256',\n        password.encode('utf-8'),\n        salt,\n        100000\n    )\n    return salt + pwdhash\n\ndef verify_password(stored_password: bytes, provided_password: str) -> bool:\n    \"\"\"Verify password against hash\"\"\"\n    salt = stored_password[:32]\n    stored_hash = stored_password[32:]\n    pwdhash = hashlib.pbkdf2_hmac(\n        'sha256',\n        provided_password.encode('utf-8'),\n        salt,\n        100000\n    )\n    return pwdhash == stored_hash\n\n# Demo password hashing\noriginal_password = \"MySecurePassword123!\"\nprint(f\"Original password: {original_password}\")\n\nhashed = hash_password(original_password)\nprint(f\"Hashed password length: {len(hashed)} bytes\")\n\nif verify_password(hashed, original_password):\n    print(\"Correct password verified\")\n\nif not verify_password(hashed, \"WrongPassword\"):\n    print(\"Wrong password rejected\")\n\nprint(\"\\n=== Rate Limiting ===\")\n\nclass RateLimiter:\n    \"\"\"Simple rate limiter\"\"\"\n    \n    def __init__(self, max_requests: int = 10, window: int = 60):\n        self.max_requests = max_requests\n        self.window = window\n        self.requests = defaultdict(list)\n    \n    def is_allowed(self, key: str) -> bool:\n        \"\"\"Check if request is allowed\"\"\"\n        now = time.time()\n        self.requests[key] = [\n            req_time for req_time in self.requests[key]\n            if now - req_time < self.window\n        ]\n        if len(self.requests[key]) >= self.max_requests:\n            return False\n        self.requests[key].append(now)\n        return True\n\nrate_limiter = RateLimiter(max_requests=5, window=60)\n\nasync def check_rate_limit(request: Request):\n    \"\"\"Dependency for rate limiting\"\"\"\n    client_ip = request.client.host if request.client else 'unknown'\n    if not rate_limiter.is_allowed(client_ip):\n        raise HTTPException(\n            status_code=429,\n            detail='Rate limit exceeded',\n            headers={'Retry-After': '60'}\n        )\n    return True\n\n@app.get('/api/limited')\ndef limited(_: bool = Depends(check_rate_limit)):\n    \"\"\"Rate limited endpoint\"\"\"\n    return {'message': 'Request successful'}\n\nprint(\"\\n=== Input Validation with Pydantic ===\")\n\nclass UserCreate(BaseModel):\n    \"\"\"User creation with automatic validation\"\"\"\n    email: EmailStr  # Automatically validates email format\n    name: str = Field(..., min_length=1, max_length=100)\n    \n    class Config:\n        str_strip_whitespace = True  # Auto-strip whitespace\n\n@app.post('/api/users', status_code=201)\ndef create_user(\n    user: UserCreate,\n    api_key_info: dict = Depends(verify_api_key)\n):\n    \"\"\"Create user - Pydantic validates automatically\"\"\"\n    return {\n        'message': 'User created',\n        'user': {'name': user.name, 'email': user.email}\n    }\n\nif __name__ == '__main__':\n    print(\"\\n=== FastAPI Security Features ===\")\n    print(\"\\nFeatures implemented:\")\n    print(\"  API key authentication with Depends()\")\n    print(\"  Permission-based access control\")\n    print(\"  Password hashing (PBKDF2)\")\n    print(\"  Rate limiting as dependency\")\n    print(\"  CORS middleware\")\n    print(\"  Input validation with Pydantic\")\n    print(\"\\nRun with: uvicorn main:app --reload\")\n    print(\"API docs at: http://localhost:8000/docs\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown",
              "content": "**FastAPI API Key Authentication Pattern:**\n\n```python\nfrom fastapi.security import APIKeyHeader\n\napi_key_header = APIKeyHeader(name='X-API-Key')\n\nasync def verify_api_key(api_key: str = Depends(api_key_header)):\n    if api_key not in VALID_KEYS:\n        raise HTTPException(status_code=401)\n    return VALID_KEYS[api_key]\n\n@app.get('/protected')\ndef protected(key_info = Depends(verify_api_key)):\n    return {'data': 'secret'}\n```\n\n**Password Hashing:**\n\n```python\nimport hashlib\nimport os\n\n# Hash password with salt\nsalt = os.urandom(32)\nhashed = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)\nstored = salt + hashed  # Store this\n\n# Verify password\nsalt = stored[:32]\nstored_hash = stored[32:]\ntest_hash = hashlib.pbkdf2_hmac('sha256', provided.encode(), salt, 100000)\nif test_hash == stored_hash:\n    # Password correct\n```\n\n**Rate Limiting as Dependency:**\n\n```python\nasync def check_rate_limit(request: Request):\n    client_ip = request.client.host\n    if not rate_limiter.is_allowed(client_ip):\n        raise HTTPException(status_code=429)\n    return True\n\n@app.get('/limited')\ndef limited(_: bool = Depends(check_rate_limit)):\n    return {'message': 'OK'}\n```\n\n**CORS with FastAPI Middleware:**\n\n```python\nfrom fastapi.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=['https://yourdomain.com'],\n    allow_methods=['*'],\n    allow_headers=['*'],\n)\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: FastAPI OAuth2 with JWT",
              "content": "**JWT Authentication Flow with FastAPI:**\n\n**1. Login (OAuth2 Password Flow):**\n```\nUser ‚Üí POST /token (form: username, password)\nAPI ‚Üí Verify credentials\nAPI ‚Üí Create JWT token\nAPI ‚Üí Return access_token\n```\n\n**2. Authenticated Request:**\n```\nUser ‚Üí GET /api/protected\nHeader: Authorization: Bearer <token>\nAPI ‚Üí OAuth2PasswordBearer extracts token\nAPI ‚Üí Verify signature and expiration\nAPI ‚Üí Process request\n```\n\n**3. Token Structure:**\n```json\n{\n  \"sub\": \"alice@example.com\",\n  \"role\": \"admin\",\n  \"exp\": 1234567890\n}\n```\n\n**FastAPI Security Benefits:**\n- Built-in OAuth2 support\n- Automatic Swagger UI auth button\n- Dependency injection for auth\n- Type-safe with Pydantic\n- Auto-generated API docs\n\n**Best Practices:**\n- Use OAuth2PasswordBearer for token extraction\n- python-jose for JWT encoding/decoding\n- passlib for password hashing",
              "code": "from fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\nfrom pydantic import BaseModel, EmailStr\nfrom jose import JWTError, jwt\nfrom datetime import datetime, timedelta\nimport hashlib\nimport os\nfrom typing import Optional\n\napp = FastAPI()\n\n# Configuration\nSECRET_KEY = 'your-secret-key-change-this-in-production'\nALGORITHM = 'HS256'\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\n# OAuth2 scheme - tells FastAPI where to find the token\noauth2_scheme = OAuth2PasswordBearer(tokenUrl='token')\n\n# Simulated user database\nUSERS = {\n    'alice@example.com': {\n        'id': 1,\n        'name': 'Alice',\n        'email': 'alice@example.com',\n        'password_hash': None,\n        'role': 'admin'\n    },\n    'bob@example.com': {\n        'id': 2,\n        'name': 'Bob',\n        'email': 'bob@example.com',\n        'password_hash': None,\n        'role': 'user'\n    }\n}\n\nprint(\"=== FastAPI OAuth2 + JWT Authentication ===\")\n\n# Pydantic models\nclass Token(BaseModel):\n    access_token: str\n    token_type: str\n\nclass TokenData(BaseModel):\n    email: Optional[str] = None\n    role: Optional[str] = None\n\nclass User(BaseModel):\n    id: int\n    name: str\n    email: EmailStr\n    role: str\n\ndef hash_password(password: str) -> bytes:\n    \"\"\"Hash password with salt\"\"\"\n    salt = b'demo-salt-change-in-production'\n    return hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)\n\ndef verify_password(stored_hash: bytes, password: str) -> bool:\n    \"\"\"Verify password against hash\"\"\"\n    return stored_hash == hash_password(password)\n\n# Set passwords\nUSERS['alice@example.com']['password_hash'] = hash_password('password123')\nUSERS['bob@example.com']['password_hash'] = hash_password('password456')\n\ndef create_access_token(data: dict, expires_delta: Optional[timedelta] = None):\n    \"\"\"Create JWT access token\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + (expires_delta or timedelta(minutes=15))\n    to_encode.update({'exp': expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -> User:\n    \"\"\"Dependency to get current user from token\"\"\"\n    credentials_exception = HTTPException(\n        status_code=status.HTTP_401_UNAUTHORIZED,\n        detail='Could not validate credentials',\n        headers={'WWW-Authenticate': 'Bearer'},\n    )\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        email: str = payload.get('sub')\n        if email is None:\n            raise credentials_exception\n    except JWTError:\n        raise credentials_exception\n    \n    user = USERS.get(email)\n    if user is None:\n        raise credentials_exception\n    \n    return User(\n        id=user['id'],\n        name=user['name'],\n        email=user['email'],\n        role=user['role']\n    )\n\ndef require_role(required_role: str):\n    \"\"\"Factory for role-checking dependency\"\"\"\n    async def role_checker(current_user: User = Depends(get_current_user)):\n        if current_user.role != required_role:\n            raise HTTPException(\n                status_code=status.HTTP_403_FORBIDDEN,\n                detail=f'{required_role} role required'\n            )\n        return current_user\n    return role_checker\n\n@app.post('/token', response_model=Token)\nasync def login(form_data: OAuth2PasswordRequestForm = Depends()):\n    \"\"\"OAuth2 login endpoint - returns JWT token\"\"\"\n    user = USERS.get(form_data.username)\n    if not user:\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail='Incorrect email or password',\n            headers={'WWW-Authenticate': 'Bearer'},\n        )\n    \n    if not verify_password(user['password_hash'], form_data.password):\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail='Incorrect email or password',\n            headers={'WWW-Authenticate': 'Bearer'},\n        )\n    \n    access_token = create_access_token(\n        data={'sub': user['email'], 'role': user['role']},\n        expires_delta=timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    )\n    \n    return {'access_token': access_token, 'token_type': 'bearer'}\n\n@app.get('/api/me', response_model=User)\nasync def get_me(current_user: User = Depends(get_current_user)):\n    \"\"\"Get current user info from token\"\"\"\n    return current_user\n\n@app.get('/api/admin/users')\nasync def admin_get_users(current_user: User = Depends(require_role('admin'))):\n    \"\"\"Admin only endpoint\"\"\"\n    return {\n        'users': [\n            {'id': u['id'], 'name': u['name'], 'role': u['role']}\n            for u in USERS.values()\n        ]\n    }\n\n@app.get('/api/protected')\nasync def protected_route(current_user: User = Depends(get_current_user)):\n    \"\"\"Any authenticated user can access\"\"\"\n    return {\n        'message': f'Hello {current_user.name}!',\n        'your_role': current_user.role\n    }\n\nif __name__ == '__main__':\n    print(\"\\n=== FastAPI OAuth2 + JWT API ===\")\n    print(\"\\nEndpoints:\")\n    print(\"  POST /token          - Login (OAuth2 form)\")\n    print(\"  GET  /api/me         - Get current user\")\n    print(\"  GET  /api/protected  - Protected route\")\n    print(\"  GET  /api/admin/users - Admin only\")\n    print(\"\\nRun with: uvicorn main:app --reload\")\n    print(\"\\nSwagger UI: http://localhost:8000/docs\")\n    print(\"  Click 'Authorize' button to login!\")\n    print(\"\\nTest credentials:\")\n    print(\"  alice@example.com / password123 (admin)\")\n    print(\"  bob@example.com / password456 (user)\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Never store plain passwords** - Always hash with salt (use passlib in production)\n- **Use OAuth2PasswordBearer** - FastAPI's built-in security for token extraction\n- **python-jose for JWT** - `pip install python-jose[cryptography]` for token encoding/decoding\n- **Dependency injection for auth** - Use Depends(get_current_user) for protected routes\n- **Role-based access** - Create dependency factories like require_role('admin')\n- **Pydantic for validation** - EmailStr, Field() constraints handle input validation\n- **Rate limiting as dependency** - Implement as async dependency function\n- **CORSMiddleware** - FastAPI's built-in CORS handling\n- **HTTPS in production** - Encrypt data in transit\n- **Swagger UI auth** - FastAPI automatically adds Authorize button for OAuth2"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-13-lesson-04-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a secure FastAPI user registration and login system:\n- POST /api/register - Create user with hashed password (use Pydantic for validation)\n- POST /token - OAuth2 login endpoint, return JWT token\n- GET /api/profile - Get user profile (requires OAuth2 token)\n- Use Pydantic EmailStr for email validation\n- Use Field() for password strength (min 8 chars)\n- Use OAuth2PasswordBearer for token extraction",
              "instructions": "Create a secure FastAPI user registration and login system:\n- POST /api/register - Create user with hashed password\n- POST /token - OAuth2 login endpoint, return JWT token\n- GET /api/profile - Get user profile (requires OAuth2 token)\n- Use Pydantic for validation\n- Use FastAPI's OAuth2PasswordBearer",
              "starterCode": "from fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\nfrom pydantic import BaseModel, EmailStr, Field\nfrom jose import jwt\nimport hashlib\nimport os\nfrom datetime import datetime, timedelta\nfrom typing import Optional\n\napp = FastAPI()\nSECRET_KEY = 'change-this-secret-key'\nALGORITHM = 'HS256'\n\n# OAuth2 scheme\noauth2_scheme = OAuth2PasswordBearer(tokenUrl='token')\n\nusers = {}  # In-memory user storage\n\n# TODO: Create Pydantic models for UserCreate and User\n\n# TODO: Implement password hashing\ndef hash_password(password: str) -> bytes:\n    pass\n\n# TODO: Implement password verification\ndef verify_password(stored_hash: bytes, password: str) -> bool:\n    pass\n\n# TODO: Implement JWT token creation\ndef create_access_token(data: dict) -> str:\n    pass\n\n# TODO: Implement get_current_user dependency\n\n# TODO: Implement POST /api/register endpoint\n\n# TODO: Implement POST /token endpoint (OAuth2)\n\n# TODO: Implement GET /api/profile endpoint\n\n# Run with: uvicorn main:app --reload",
              "solution": "from fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\nfrom pydantic import BaseModel, EmailStr, Field\nfrom jose import JWTError, jwt\nimport hashlib\nimport os\nfrom datetime import datetime, timedelta\nfrom typing import Optional\n\napp = FastAPI()\nSECRET_KEY = 'change-this-secret-key'\nALGORITHM = 'HS256'\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\noauth2_scheme = OAuth2PasswordBearer(tokenUrl='token')\n\nusers = {}  # email -> user_data\n\n# Pydantic models\nclass UserCreate(BaseModel):\n    email: EmailStr\n    password: str = Field(..., min_length=8)\n\nclass User(BaseModel):\n    id: int\n    email: EmailStr\n\nclass Token(BaseModel):\n    access_token: str\n    token_type: str\n\ndef hash_password(password: str) -> bytes:\n    \"\"\"Hash password with salt.\"\"\"\n    salt = os.urandom(32)\n    pwdhash = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)\n    return salt + pwdhash\n\ndef verify_password(stored_hash: bytes, password: str) -> bool:\n    \"\"\"Verify password against stored hash.\"\"\"\n    salt = stored_hash[:32]\n    stored_pw = stored_hash[32:]\n    test_hash = hashlib.pbkdf2_hmac('sha256', password.encode(), salt, 100000)\n    return test_hash == stored_pw\n\ndef create_access_token(data: dict) -> str:\n    \"\"\"Create JWT access token.\"\"\"\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode.update({'exp': expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -> User:\n    \"\"\"Dependency to get current user from token.\"\"\"\n    credentials_exception = HTTPException(\n        status_code=status.HTTP_401_UNAUTHORIZED,\n        detail='Could not validate credentials',\n        headers={'WWW-Authenticate': 'Bearer'},\n    )\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        email: str = payload.get('sub')\n        if email is None:\n            raise credentials_exception\n    except JWTError:\n        raise credentials_exception\n    \n    user = users.get(email)\n    if user is None:\n        raise credentials_exception\n    return User(id=user['id'], email=user['email'])\n\n@app.post('/api/register', response_model=User, status_code=201)\nasync def register(user_data: UserCreate):\n    \"\"\"Register new user with validated email and password.\"\"\"\n    email = user_data.email.lower()\n    if email in users:\n        raise HTTPException(status_code=400, detail='User already exists')\n    \n    users[email] = {\n        'id': len(users) + 1,\n        'email': email,\n        'password_hash': hash_password(user_data.password)\n    }\n    return User(id=users[email]['id'], email=email)\n\n@app.post('/token', response_model=Token)\nasync def login(form_data: OAuth2PasswordRequestForm = Depends()):\n    \"\"\"OAuth2 login - returns JWT token.\"\"\"\n    user = users.get(form_data.username.lower())\n    if not user or not verify_password(user['password_hash'], form_data.password):\n        raise HTTPException(\n            status_code=status.HTTP_401_UNAUTHORIZED,\n            detail='Incorrect email or password',\n            headers={'WWW-Authenticate': 'Bearer'},\n        )\n    \n    access_token = create_access_token(data={'sub': user['email']})\n    return {'access_token': access_token, 'token_type': 'bearer'}\n\n@app.get('/api/profile', response_model=User)\nasync def get_profile(current_user: User = Depends(get_current_user)):\n    \"\"\"Get current user profile (requires token).\"\"\"\n    return current_user\n\nif __name__ == '__main__':\n    print('FastAPI OAuth2 Authentication')\n    print('Run with: uvicorn main:app --reload')\n    print('Swagger UI: http://localhost:8000/docs')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use OAuth2PasswordBearer(tokenUrl='token') for token extraction. Use OAuth2PasswordRequestForm for login form data. Use Depends(get_current_user) for protected routes."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to use Depends() for OAuth2PasswordRequestForm",
                  "consequence": "Form data not parsed correctly",
                  "correction": "Use form_data: OAuth2PasswordRequestForm = Depends()"
                },
                {
                  "mistake": "Not raising HTTPException for auth errors",
                  "consequence": "Wrong status codes returned",
                  "correction": "Use raise HTTPException(status_code=401, ...)"
                },
                {
                  "mistake": "Missing WWW-Authenticate header in 401 responses",
                  "consequence": "Not OAuth2 compliant",
                  "correction": "Add headers={'WWW-Authenticate': 'Bearer'}"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-05",
          "title": "API Testing and Documentation",
          "moduleId": "module-14",
          "order": 12,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Test Your APIs?",
              "content": "**API testing ensures your endpoints work correctly before users find bugs.**\n\nThink of it like quality control in a factory - you test products before shipping them to customers. API testing catches issues early when they're cheaper to fix.\n\n**Types of API tests:**\n\n1. **Unit Tests** - Test individual functions in isolation\n   - Fast (milliseconds)\n   - Test business logic\n   - Mock external dependencies\n\n2. **Integration Tests** - Test API endpoints end-to-end\n   - Test HTTP requests/responses\n   - Verify status codes and JSON\n   - Test with real database (test DB)\n\n3. **Contract Tests** - Verify API matches documentation\n   - Schema validation\n   - Response structure checks\n\n**Why pytest for Flask testing?**\n- Simple, readable syntax\n- Powerful fixtures for setup/teardown\n- Great Flask integration with pytest-flask\n- Excellent assertion messages\n- Used by 70%+ of Python developers\n\n**What to test in APIs:**\n- Correct status codes (200, 201, 400, 404, 500)\n- Response JSON structure\n- Authentication/authorization\n- Input validation\n- Error handling\n- Edge cases (empty lists, invalid IDs)"
            },
            {
              "type": "EXAMPLE",
              "title": "Testing Flask APIs with pytest",
              "content": "**Expected Output:**\n```\n============================= test session starts ==============================\ncollected 6 items\n\ntest_api.py ......                                                       [100%]\n\n============================== 6 passed in 0.15s ===============================\n```",
              "code": "# Install: pip install pytest pytest-flask\n\nimport pytest\nfrom flask import Flask, jsonify, request\n\n# ========== Sample API to Test ==========\napp = Flask(__name__)\n\n# In-memory data store\ntasks = [\n    {'id': 1, 'title': 'Learn Python', 'completed': False},\n    {'id': 2, 'title': 'Build API', 'completed': True}\n]\n\n@app.route('/api/tasks', methods=['GET'])\ndef get_tasks():\n    return jsonify({'tasks': tasks})\n\n@app.route('/api/tasks/<int:task_id>', methods=['GET'])\ndef get_task(task_id):\n    task = next((t for t in tasks if t['id'] == task_id), None)\n    if task:\n        return jsonify(task)\n    return jsonify({'error': 'Task not found'}), 404\n\n@app.route('/api/tasks', methods=['POST'])\ndef create_task():\n    data = request.get_json()\n    if not data or 'title' not in data:\n        return jsonify({'error': 'Title is required'}), 400\n    \n    new_task = {\n        'id': max([t['id'] for t in tasks]) + 1,\n        'title': data['title'],\n        'completed': False\n    }\n    tasks.append(new_task)\n    return jsonify(new_task), 201\n\n# ========== Test Configuration ==========\n# tests/conftest.py\n\n@pytest.fixture\ndef client():\n    \"\"\"Create test client for the Flask app.\"\"\"\n    app.config['TESTING'] = True\n    with app.test_client() as client:\n        yield client\n\n# ========== API Tests ==========\n# tests/test_api.py\n\ndef test_get_all_tasks(client):\n    \"\"\"Test GET /api/tasks returns all tasks.\"\"\"\n    response = client.get('/api/tasks')\n    \n    assert response.status_code == 200\n    data = response.get_json()\n    assert 'tasks' in data\n    assert len(data['tasks']) >= 2\n\ndef test_get_single_task(client):\n    \"\"\"Test GET /api/tasks/<id> returns specific task.\"\"\"\n    response = client.get('/api/tasks/1')\n    \n    assert response.status_code == 200\n    data = response.get_json()\n    assert data['id'] == 1\n    assert 'title' in data\n\ndef test_get_nonexistent_task(client):\n    \"\"\"Test GET /api/tasks/<id> returns 404 for missing task.\"\"\"\n    response = client.get('/api/tasks/999')\n    \n    assert response.status_code == 404\n    data = response.get_json()\n    assert 'error' in data\n\ndef test_create_task(client):\n    \"\"\"Test POST /api/tasks creates new task.\"\"\"\n    response = client.post(\n        '/api/tasks',\n        json={'title': 'New Task'}\n    )\n    \n    assert response.status_code == 201\n    data = response.get_json()\n    assert data['title'] == 'New Task'\n    assert data['completed'] == False\n    assert 'id' in data\n\ndef test_create_task_without_title(client):\n    \"\"\"Test POST /api/tasks returns 400 without title.\"\"\"\n    response = client.post(\n        '/api/tasks',\n        json={}\n    )\n    \n    assert response.status_code == 400\n    assert 'error' in response.get_json()\n\ndef test_create_task_empty_body(client):\n    \"\"\"Test POST /api/tasks handles empty request.\"\"\"\n    response = client.post(\n        '/api/tasks',\n        content_type='application/json'\n    )\n    \n    assert response.status_code == 400\n\n# Run tests: pytest test_api.py -v\nprint(\"API tests defined! Run with: pytest -v\")",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "API Documentation with OpenAPI/Swagger",
              "content": "**Good documentation is essential for any API.**\n\nImagine using an API with no documentation - you'd have to guess endpoints, parameters, and response formats. That's why the OpenAPI Specification (formerly Swagger) became the industry standard.\n\n**OpenAPI/Swagger provides:**\n\n1. **Machine-readable specification** (YAML/JSON)\n   - Defines all endpoints, parameters, responses\n   - Can generate client SDKs automatically\n   - Enables automated testing\n\n2. **Interactive documentation (Swagger UI)**\n   - Try endpoints directly in browser\n   - See request/response examples\n   - No code needed to test\n\n3. **Validation**\n   - Ensures API matches documentation\n   - Validates request/response schemas\n\n**Popular Flask documentation tools:**\n\n- **Flasgger** - Easy Swagger UI integration\n  - Extracts docs from docstrings\n  - Built-in Swagger UI at /apidocs\n  - OpenAPI 3.0 support\n\n- **flask-smorest** - OpenAPI generation\n  - Auto-generates OpenAPI spec\n  - Integrates with marshmallow schemas\n\n- **Connexion** - Spec-first development\n  - Define API in YAML first\n  - Auto-generates routes from spec\n\n**Documentation best practices:**\n- Document every endpoint\n- Include request/response examples\n- Explain error codes\n- Keep docs in sync with code\n- Version your API"
            },
            {
              "type": "EXAMPLE",
              "title": "Adding Swagger Documentation with Flasgger",
              "content": "**Expected Output:**\nSwagger UI available at: http://localhost:5000/apidocs\n\nThe interactive documentation lets users try your API directly from the browser!",
              "code": "# Install: pip install flasgger\n\nfrom flask import Flask, jsonify, request\nfrom flasgger import Swagger, swag_from\n\napp = Flask(__name__)\n\n# Configure Swagger\napp.config['SWAGGER'] = {\n    'title': 'Task API',\n    'uiversion': 3,\n    'description': 'A simple Task Management API',\n    'version': '1.0.0'\n}\nswagger = Swagger(app)\n\ntasks = [\n    {'id': 1, 'title': 'Learn Python', 'completed': False}\n]\n\n@app.route('/api/tasks', methods=['GET'])\ndef get_tasks():\n    \"\"\"\n    Get all tasks\n    ---\n    tags:\n      - Tasks\n    responses:\n      200:\n        description: List of all tasks\n        schema:\n          type: object\n          properties:\n            tasks:\n              type: array\n              items:\n                type: object\n                properties:\n                  id:\n                    type: integer\n                    example: 1\n                  title:\n                    type: string\n                    example: Learn Python\n                  completed:\n                    type: boolean\n                    example: false\n    \"\"\"\n    return jsonify({'tasks': tasks})\n\n@app.route('/api/tasks/<int:task_id>', methods=['GET'])\ndef get_task(task_id):\n    \"\"\"\n    Get a specific task by ID\n    ---\n    tags:\n      - Tasks\n    parameters:\n      - name: task_id\n        in: path\n        type: integer\n        required: true\n        description: The task ID\n    responses:\n      200:\n        description: Task details\n        schema:\n          type: object\n          properties:\n            id:\n              type: integer\n            title:\n              type: string\n            completed:\n              type: boolean\n      404:\n        description: Task not found\n        schema:\n          type: object\n          properties:\n            error:\n              type: string\n              example: Task not found\n    \"\"\"\n    task = next((t for t in tasks if t['id'] == task_id), None)\n    if task:\n        return jsonify(task)\n    return jsonify({'error': 'Task not found'}), 404\n\n@app.route('/api/tasks', methods=['POST'])\ndef create_task():\n    \"\"\"\n    Create a new task\n    ---\n    tags:\n      - Tasks\n    parameters:\n      - name: body\n        in: body\n        required: true\n        schema:\n          type: object\n          required:\n            - title\n          properties:\n            title:\n              type: string\n              example: Complete API project\n    responses:\n      201:\n        description: Task created successfully\n      400:\n        description: Invalid request (missing title)\n    \"\"\"\n    data = request.get_json()\n    if not data or 'title' not in data:\n        return jsonify({'error': 'Title is required'}), 400\n    \n    new_task = {\n        'id': max([t['id'] for t in tasks], default=0) + 1,\n        'title': data['title'],\n        'completed': False\n    }\n    tasks.append(new_task)\n    return jsonify(new_task), 201\n\nif __name__ == '__main__':\n    print(\"Swagger UI: http://localhost:5000/apidocs\")\n    app.run(debug=True)",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Test your APIs** before deployment - catch bugs early with pytest\n- **Use pytest fixtures** to create reusable test setup (test client, database)\n- **Test all scenarios**: success cases, error cases, edge cases, validation\n- **Check status codes** (200, 201, 400, 404) and response structure\n- **Document with OpenAPI/Swagger** - industry standard for API docs\n- **Flasgger** adds Swagger UI to Flask with minimal setup\n- **Interactive docs** let users try your API without writing code\n- **Keep documentation in sync** - outdated docs are worse than no docs\n- **Run tests in CI/CD** - automated testing on every commit prevents regressions"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-11-challenge-1",
              "title": "Interactive Exercise: Write API Tests",
              "description": "Write pytest tests for a User API with the following endpoints:\n- GET /api/users - Returns list of users\n- GET /api/users/<id> - Returns single user or 404\n- POST /api/users - Creates user (requires name and email)\n- DELETE /api/users/<id> - Deletes user\n\nWrite tests for: success cases, 404 errors, and validation errors.",
              "instructions": "Write pytest tests for a User API with the following endpoints:\n- GET /api/users - Returns list of users\n- GET /api/users/<id> - Returns single user or 404\n- POST /api/users - Creates user (requires name and email)\n- DELETE /api/users/<id> - Deletes user\n\nWrite tests for: success cases, 404 errors, and validation errors.",
              "starterCode": "import pytest\nfrom flask import Flask, jsonify, request\n\napp = Flask(__name__)\nusers = [{'id': 1, 'name': 'Alice', 'email': 'alice@example.com'}]\n\n# API endpoints (already implemented)\n@app.route('/api/users', methods=['GET'])\ndef get_users():\n    return jsonify({'users': users})\n\n@app.route('/api/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = next((u for u in users if u['id'] == user_id), None)\n    if user:\n        return jsonify(user)\n    return jsonify({'error': 'User not found'}), 404\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    data = request.get_json()\n    if not data or 'name' not in data or 'email' not in data:\n        return jsonify({'error': 'Name and email required'}), 400\n    new_user = {\n        'id': max([u['id'] for u in users], default=0) + 1,\n        'name': data['name'],\n        'email': data['email']\n    }\n    users.append(new_user)\n    return jsonify(new_user), 201\n\n# TODO: Write the test fixture\n@pytest.fixture\ndef client():\n    pass\n\n# TODO: Write test for GET /api/users\ndef test_get_all_users(client):\n    pass\n\n# TODO: Write test for GET /api/users/<id> success\ndef test_get_user_success(client):\n    pass\n\n# TODO: Write test for GET /api/users/<id> not found\ndef test_get_user_not_found(client):\n    pass\n\n# TODO: Write test for POST /api/users success\ndef test_create_user_success(client):\n    pass\n\n# TODO: Write test for POST /api/users validation error\ndef test_create_user_missing_fields(client):\n    pass",
              "solution": "import pytest\nfrom flask import Flask, jsonify, request\n\napp = Flask(__name__)\n\n# Store users in a list (will be reset for each test)\nusers = [{'id': 1, 'name': 'Alice', 'email': 'alice@example.com'}]\n\n# API endpoints (already implemented)\n@app.route('/api/users', methods=['GET'])\ndef get_users():\n    return jsonify({'users': users})\n\n@app.route('/api/users/<int:user_id>', methods=['GET'])\ndef get_user(user_id):\n    user = next((u for u in users if u['id'] == user_id), None)\n    if user:\n        return jsonify(user)\n    return jsonify({'error': 'User not found'}), 404\n\n@app.route('/api/users', methods=['POST'])\ndef create_user():\n    data = request.get_json()\n    if not data or 'name' not in data or 'email' not in data:\n        return jsonify({'error': 'Name and email required'}), 400\n    new_user = {\n        'id': max([u['id'] for u in users], default=0) + 1,\n        'name': data['name'],\n        'email': data['email']\n    }\n    users.append(new_user)\n    return jsonify(new_user), 201\n\n@app.route('/api/users/<int:user_id>', methods=['DELETE'])\ndef delete_user(user_id):\n    global users\n    user = next((u for u in users if u['id'] == user_id), None)\n    if not user:\n        return jsonify({'error': 'User not found'}), 404\n    users = [u for u in users if u['id'] != user_id]\n    return jsonify({'message': 'User deleted'}), 200\n\n# Test fixture - creates a test client for making requests\n@pytest.fixture\ndef client():\n    \"\"\"Create test client and reset user data before each test.\"\"\"\n    # Set testing mode for better error messages\n    app.config['TESTING'] = True\n    \n    # Reset users to initial state before each test\n    global users\n    users.clear()\n    users.append({'id': 1, 'name': 'Alice', 'email': 'alice@example.com'})\n    \n    # Create and yield the test client\n    with app.test_client() as test_client:\n        yield test_client\n\n# Test: GET /api/users returns all users\ndef test_get_all_users(client):\n    \"\"\"Test that GET /api/users returns list of all users.\"\"\"\n    # Make GET request to the users endpoint\n    response = client.get('/api/users')\n    \n    # Check status code is 200 OK\n    assert response.status_code == 200\n    \n    # Parse JSON response\n    data = response.get_json()\n    \n    # Verify response structure\n    assert 'users' in data\n    assert isinstance(data['users'], list)\n    assert len(data['users']) >= 1\n    \n    # Check first user has expected fields\n    assert data['users'][0]['name'] == 'Alice'\n    assert data['users'][0]['email'] == 'alice@example.com'\n\n# Test: GET /api/users/<id> returns specific user\ndef test_get_user_success(client):\n    \"\"\"Test that GET /api/users/<id> returns user when found.\"\"\"\n    # Request user with ID 1\n    response = client.get('/api/users/1')\n    \n    # Check status code is 200 OK\n    assert response.status_code == 200\n    \n    # Parse and verify response\n    data = response.get_json()\n    assert data['id'] == 1\n    assert data['name'] == 'Alice'\n    assert data['email'] == 'alice@example.com'\n\n# Test: GET /api/users/<id> returns 404 for missing user\ndef test_get_user_not_found(client):\n    \"\"\"Test that GET /api/users/<id> returns 404 when user doesn't exist.\"\"\"\n    # Request non-existent user\n    response = client.get('/api/users/999')\n    \n    # Check status code is 404 Not Found\n    assert response.status_code == 404\n    \n    # Check error message is returned\n    data = response.get_json()\n    assert 'error' in data\n    assert data['error'] == 'User not found'\n\n# Test: POST /api/users creates new user\ndef test_create_user_success(client):\n    \"\"\"Test that POST /api/users creates a new user.\"\"\"\n    # Create new user data\n    new_user_data = {\n        'name': 'Bob',\n        'email': 'bob@example.com'\n    }\n    \n    # Make POST request with JSON data\n    response = client.post(\n        '/api/users',\n        json=new_user_data\n    )\n    \n    # Check status code is 201 Created\n    assert response.status_code == 201\n    \n    # Verify response contains created user\n    data = response.get_json()\n    assert data['name'] == 'Bob'\n    assert data['email'] == 'bob@example.com'\n    assert 'id' in data\n    assert data['id'] == 2  # Should be second user\n\n# Test: POST /api/users returns 400 for missing fields\ndef test_create_user_missing_fields(client):\n    \"\"\"Test that POST /api/users returns 400 when required fields missing.\"\"\"\n    # Test with missing email\n    response = client.post(\n        '/api/users',\n        json={'name': 'Bob'}  # Missing email\n    )\n    \n    assert response.status_code == 400\n    data = response.get_json()\n    assert 'error' in data\n    \n    # Test with missing name\n    response = client.post(\n        '/api/users',\n        json={'email': 'bob@example.com'}  # Missing name\n    )\n    \n    assert response.status_code == 400\n    \n    # Test with empty body\n    response = client.post(\n        '/api/users',\n        json={}\n    )\n    \n    assert response.status_code == 400\n\n# Bonus: Test DELETE endpoint\ndef test_delete_user_success(client):\n    \"\"\"Test that DELETE /api/users/<id> removes a user.\"\"\"\n    response = client.delete('/api/users/1')\n    \n    assert response.status_code == 200\n    data = response.get_json()\n    assert data['message'] == 'User deleted'\n    \n    # Verify user is actually deleted\n    response = client.get('/api/users/1')\n    assert response.status_code == 404\n\ndef test_delete_user_not_found(client):\n    \"\"\"Test that DELETE /api/users/<id> returns 404 for non-existent user.\"\"\"\n    response = client.delete('/api/users/999')\n    \n    assert response.status_code == 404\n    data = response.get_json()\n    assert 'error' in data\n\n# Run with: pytest -v\nprint('Run tests with: pytest -v')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use app.test_client() in the fixture. Check response.status_code and response.get_json() in assertions."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not using app.config['TESTING'] = True",
                  "consequence": "Tests may behave differently than expected",
                  "correction": "Set TESTING config to True in fixture"
                },
                {
                  "mistake": "Forgetting to use json= for POST data",
                  "consequence": "Request body not sent correctly",
                  "correction": "Use client.post('/path', json={'key': 'value'})"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-13-lesson-06",
          "title": "Mini-Project: Complete Blog API with Authentication",
          "moduleId": "module-14",
          "order": 13,
          "estimatedMinutes": 30,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Building a Complete Blog API",
              "content": "**Congratulations! You're ready to build a real-world API project.**\n\nThis mini-project combines everything you've learned about FastAPI and Pydantic into a complete blog system with user authentication.\n\n**What we're building:**\n\nA RESTful Blog API with:\n- **User registration and login** (JWT authentication)\n- **Blog post CRUD** (Create, Read, Update, Delete)\n- **Comments system**\n- **Protected routes** (only authors can edit their posts)\n- **Input validation** with Pydantic models\n\n**Project structure:**\n```\nblog_api/\n    main.py             # FastAPI application\n    models.py           # Pydantic models\n    auth.py             # OAuth2 + JWT logic\n    routers/\n        users.py        # User endpoints\n        posts.py        # Post endpoints\n        comments.py     # Comment endpoints\n    tests/\n        test_auth.py    # Auth tests\n        test_posts.py   # Post tests\n```\n\n**API Endpoints:**\n\n| Method | Endpoint | Description | Auth |\n|--------|----------|-------------|------|\n| POST | /api/auth/register | Register new user | No |\n| POST | /api/auth/login | Login, get token | No |\n| GET | /api/posts | List all posts | No |\n| GET | /api/posts/{id} | Get single post | No |\n| POST | /api/posts | Create post | Yes |\n| PUT | /api/posts/{id} | Update post | Yes |\n| DELETE | /api/posts/{id} | Delete post | Yes |\n| POST | /api/posts/{id}/comments | Add comment | Yes |\n\n**Technologies used:**\n- FastAPI (web framework)\n- python-jose + OAuth2 (authentication)\n- Pydantic (data validation)\n- In-memory storage (can upgrade to SQLite/PostgreSQL)\n- pytest + httpx (testing)"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Blog API Implementation",
              "content": "**This is a complete, working Blog API with FastAPI!**\n\nTest it with curl or Postman:\n```bash\n# Register\ncurl -X POST http://localhost:8000/api/auth/register \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"alice\", \"email\": \"alice@example.com\", \"password\": \"secret123\"}'\n\n# Login (save the token)\ncurl -X POST http://localhost:8000/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\": \"alice\", \"password\": \"secret123\"}'\n\n# Create post (use token from login)\ncurl -X POST http://localhost:8000/api/posts \\\n  -H \"Content-Type: application/json\" \\\n  -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  -d '{\"title\": \"My First Post\", \"content\": \"Hello World!\"}'\n```\n\n**Interactive API docs at:** http://localhost:8000/docs",
              "code": "# Complete Blog API with FastAPI + OAuth2 Authentication\n# Install: pip install fastapi uvicorn python-jose passlib\n\nfrom fastapi import FastAPI, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm\nfrom pydantic import BaseModel, EmailStr, Field\nfrom jose import jwt\nfrom passlib.context import CryptContext\nfrom datetime import datetime, timedelta\nfrom typing import Optional, List\n\napp = FastAPI(title=\"Blog API\", version=\"1.0.0\")\n\n# ========== Security Config ==========\nSECRET_KEY = \"your-secret-key-change-in-production\"\nALGORITHM = \"HS256\"\nACCESS_TOKEN_EXPIRE_MINUTES = 30\n\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"api/auth/login\")\n\n# ========== Pydantic Models ==========\nclass UserCreate(BaseModel):\n    username: str = Field(min_length=3, max_length=50)\n    email: EmailStr\n    password: str = Field(min_length=6)\n\nclass UserResponse(BaseModel):\n    username: str\n    email: str\n\nclass PostCreate(BaseModel):\n    title: str = Field(min_length=5, max_length=200)\n    content: str = Field(min_length=1)\n\nclass PostResponse(BaseModel):\n    id: int\n    title: str\n    content: str\n    author: str\n    created_at: str\n    comment_count: int = 0\n\nclass CommentCreate(BaseModel):\n    content: str = Field(min_length=1)\n\nclass Token(BaseModel):\n    access_token: str\n    token_type: str\n\n# ========== In-Memory Database ==========\nusers_db = {}  # username -> user data\nposts_db = []  # list of posts\ncomments_db = []  # list of comments\n\n# ========== Auth Helpers ==========\ndef hash_password(password: str) -> str:\n    return pwd_context.hash(password)\n\ndef verify_password(plain: str, hashed: str) -> bool:\n    return pwd_context.verify(plain, hashed)\n\ndef create_access_token(data: dict) -> str:\n    to_encode = data.copy()\n    expire = datetime.utcnow() + timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUTES)\n    to_encode.update({\"exp\": expire})\n    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)\n\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -> str:\n    credentials_exception = HTTPException(\n        status_code=status.HTTP_401_UNAUTHORIZED,\n        detail=\"Invalid authentication credentials\",\n        headers={\"WWW-Authenticate\": \"Bearer\"},\n    )\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        username: str = payload.get(\"sub\")\n        if username is None:\n            raise credentials_exception\n    except jwt.JWTError:\n        raise credentials_exception\n    if username not in users_db:\n        raise credentials_exception\n    return username\n\n# ========== Auth Endpoints ==========\n@app.post(\"/api/auth/register\", response_model=dict, status_code=201)\nasync def register(user: UserCreate):\n    if user.username in users_db:\n        raise HTTPException(status_code=400, detail=\"Username already exists\")\n    \n    users_db[user.username] = {\n        \"username\": user.username,\n        \"email\": user.email,\n        \"password_hash\": hash_password(user.password),\n        \"created_at\": datetime.now().isoformat()\n    }\n    return {\"message\": \"User registered\", \"user\": UserResponse(username=user.username, email=user.email).model_dump()}\n\n@app.post(\"/api/auth/login\", response_model=Token)\nasync def login(form_data: OAuth2PasswordRequestForm = Depends()):\n    user = users_db.get(form_data.username)\n    if not user or not verify_password(form_data.password, user[\"password_hash\"]):\n        raise HTTPException(status_code=401, detail=\"Invalid credentials\")\n    \n    access_token = create_access_token(data={\"sub\": form_data.username})\n    return {\"access_token\": access_token, \"token_type\": \"bearer\"}\n\n# ========== Post Endpoints ==========\n@app.get(\"/api/posts\", response_model=List[PostResponse])\nasync def get_posts():\n    return [\n        PostResponse(\n            id=i,\n            title=p[\"title\"],\n            content=p[\"content\"][:100] + \"...\" if len(p[\"content\"]) > 100 else p[\"content\"],\n            author=p[\"author\"],\n            created_at=p[\"created_at\"],\n            comment_count=len([c for c in comments_db if c[\"post_id\"] == i])\n        )\n        for i, p in enumerate(posts_db) if not p.get(\"deleted\")\n    ]\n\n@app.get(\"/api/posts/{post_id}\", response_model=dict)\nasync def get_post(post_id: int):\n    if post_id >= len(posts_db) or posts_db[post_id].get(\"deleted\"):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    post = posts_db[post_id]\n    post_comments = [c for c in comments_db if c[\"post_id\"] == post_id]\n    return {**post, \"id\": post_id, \"comments\": post_comments}\n\n@app.post(\"/api/posts\", response_model=dict, status_code=201)\nasync def create_post(post: PostCreate, current_user: str = Depends(get_current_user)):\n    new_post = {\n        \"title\": post.title,\n        \"content\": post.content,\n        \"author\": current_user,\n        \"created_at\": datetime.now().isoformat()\n    }\n    posts_db.append(new_post)\n    return {\"message\": \"Post created\", \"post\": {**new_post, \"id\": len(posts_db) - 1}}\n\n@app.put(\"/api/posts/{post_id}\", response_model=dict)\nasync def update_post(post_id: int, post: PostCreate, current_user: str = Depends(get_current_user)):\n    if post_id >= len(posts_db):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    existing_post = posts_db[post_id]\n    if existing_post[\"author\"] != current_user:\n        raise HTTPException(status_code=403, detail=\"Not authorized\")\n    \n    existing_post[\"title\"] = post.title\n    existing_post[\"content\"] = post.content\n    existing_post[\"updated_at\"] = datetime.now().isoformat()\n    return {\"message\": \"Post updated\", \"post\": {**existing_post, \"id\": post_id}}\n\n@app.delete(\"/api/posts/{post_id}\", response_model=dict)\nasync def delete_post(post_id: int, current_user: str = Depends(get_current_user)):\n    if post_id >= len(posts_db):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    post = posts_db[post_id]\n    if post[\"author\"] != current_user:\n        raise HTTPException(status_code=403, detail=\"Not authorized\")\n    \n    post[\"deleted\"] = True\n    return {\"message\": \"Post deleted\"}\n\n# ========== Comment Endpoints ==========\n@app.post(\"/api/posts/{post_id}/comments\", response_model=dict, status_code=201)\nasync def add_comment(post_id: int, comment: CommentCreate, current_user: str = Depends(get_current_user)):\n    if post_id >= len(posts_db) or posts_db[post_id].get(\"deleted\"):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    new_comment = {\n        \"post_id\": post_id,\n        \"content\": comment.content,\n        \"author\": current_user,\n        \"created_at\": datetime.now().isoformat()\n    }\n    comments_db.append(new_comment)\n    return {\"message\": \"Comment added\", \"comment\": new_comment}\n\nif __name__ == \"__main__\":\n    import uvicorn\n    print(\"Blog API running at http://localhost:8000\")\n    print(\"Interactive docs at http://localhost:8000/docs\")\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Understanding the Authentication Flow",
              "content": "**How OAuth2 + JWT token authentication works in FastAPI:**\n\n**1. Registration Flow:**\n```\nClient                          Server\n  |                               |\n  |-- POST /register ------------>|\n  |   {username, email, pass}     |\n  |                               |-- Validate with Pydantic\n  |                               |-- Hash password (bcrypt)\n  |                               |-- Store user\n  |<------------ 201 Created -----|   \n  |   {message: 'registered'}     |\n```\n\n**2. Login Flow (OAuth2PasswordRequestForm):**\n```\nClient                          Server\n  |                               |\n  |-- POST /login --------------->|\n  |   (form data: username, pwd)  |\n  |                               |-- Verify credentials\n  |                               |-- Create JWT token\n  |<------------ 200 OK ---------|   \n  |   {access_token, token_type}  |\n```\n\n**3. Authenticated Request (Depends):**\n```\nClient                          Server\n  |                               |\n  |-- POST /posts --------------->|\n  |   Header: Bearer <jwt>        |\n  |   {title, content}            |\n  |                               |-- Depends(get_current_user)\n  |                               |-- Decode JWT, get user\n  |                               |-- Create post\n  |<------------ 201 Created -----|   \n  |   {post: {...}}               |\n```\n\n**FastAPI security features:**\n- **Pydantic validation** - Automatic input validation\n- **OAuth2PasswordBearer** - Standard OAuth2 flow\n- **Depends()** - Dependency injection for auth\n- **HTTPException** - Proper error responses\n- **Auto-generated docs** - /docs shows auth requirements\n\n**Authorization levels:**\n- **Public**: Anyone can access (GET /api/posts)\n- **Authenticated**: Requires Depends(get_current_user)\n- **Owner only**: Check current_user == resource.author"
            },
            {
              "type": "EXAMPLE",
              "title": "Testing the Blog API",
              "content": "**Test your API thoroughly before deployment!**\n\nThese tests verify:\n- User registration and login\n- Token authentication\n- Post creation with auth\n- Authorization (can't edit others' posts)",
              "code": "# tests/test_blog_api.py\n# Install: pip install pytest httpx pytest-asyncio\nimport pytest\nfrom httpx import AsyncClient, ASGITransport\nfrom main import app, users_db, posts_db, comments_db\n\n@pytest.fixture(autouse=True)\ndef reset_data():\n    \"\"\"Reset database before each test.\"\"\"\n    users_db.clear()\n    posts_db.clear()\n    comments_db.clear()\n    yield\n\n@pytest.fixture\nasync def client():\n    \"\"\"Create async test client.\"\"\"\n    async with AsyncClient(transport=ASGITransport(app=app), base_url=\"http://test\") as ac:\n        yield ac\n\n@pytest.fixture\nasync def auth_headers(client):\n    \"\"\"Create user and return auth headers.\"\"\"\n    # Register user\n    await client.post(\"/api/auth/register\", json={\n        \"username\": \"testuser\",\n        \"email\": \"test@example.com\",\n        \"password\": \"password123\"\n    })\n    \n    # Login (OAuth2 uses form data)\n    response = await client.post(\"/api/auth/login\", data={\n        \"username\": \"testuser\",\n        \"password\": \"password123\"\n    })\n    token = response.json()[\"access_token\"]\n    return {\"Authorization\": f\"Bearer {token}\"}\n\n# ========== Auth Tests ==========\n@pytest.mark.asyncio\nasync def test_register_success(client):\n    \"\"\"Test successful user registration.\"\"\"\n    response = await client.post(\"/api/auth/register\", json={\n        \"username\": \"alice\",\n        \"email\": \"alice@example.com\",\n        \"password\": \"secret123\"\n    })\n    \n    assert response.status_code == 201\n    assert response.json()[\"user\"][\"username\"] == \"alice\"\n\n@pytest.mark.asyncio\nasync def test_register_duplicate(client):\n    \"\"\"Test duplicate registration fails.\"\"\"\n    await client.post(\"/api/auth/register\", json={\n        \"username\": \"alice\", \"email\": \"a@b.com\", \"password\": \"secret123\"\n    })\n    response = await client.post(\"/api/auth/register\", json={\n        \"username\": \"alice\", \"email\": \"c@d.com\", \"password\": \"secret123\"\n    })\n    \n    assert response.status_code == 400\n\n@pytest.mark.asyncio\nasync def test_login_success(client):\n    \"\"\"Test login returns token.\"\"\"\n    await client.post(\"/api/auth/register\", json={\n        \"username\": \"alice\", \"email\": \"a@b.com\", \"password\": \"secret123\"\n    })\n    response = await client.post(\"/api/auth/login\", data={\n        \"username\": \"alice\", \"password\": \"secret123\"\n    })\n    \n    assert response.status_code == 200\n    assert \"access_token\" in response.json()\n\n# ========== Post Tests ==========\n@pytest.mark.asyncio\nasync def test_create_post_authenticated(client, auth_headers):\n    \"\"\"Test creating post with valid token.\"\"\"\n    response = await client.post(\n        \"/api/posts\",\n        json={\"title\": \"Test Post Title\", \"content\": \"Content here\"},\n        headers=auth_headers\n    )\n    \n    assert response.status_code == 201\n    assert response.json()[\"post\"][\"title\"] == \"Test Post Title\"\n\n@pytest.mark.asyncio\nasync def test_create_post_unauthenticated(client):\n    \"\"\"Test creating post without token fails.\"\"\"\n    response = await client.post(\n        \"/api/posts\",\n        json={\"title\": \"Test Post\", \"content\": \"Content\"}\n    )\n    \n    assert response.status_code == 401\n\n@pytest.mark.asyncio\nasync def test_update_own_post(client, auth_headers):\n    \"\"\"Test updating own post.\"\"\"\n    await client.post(\n        \"/api/posts\",\n        json={\"title\": \"Original Title\", \"content\": \"Original\"},\n        headers=auth_headers\n    )\n    response = await client.put(\n        \"/api/posts/0\",\n        json={\"title\": \"Updated Title\", \"content\": \"Updated\"},\n        headers=auth_headers\n    )\n    \n    assert response.status_code == 200\n    assert response.json()[\"post\"][\"title\"] == \"Updated Title\"\n\n# Run: pytest tests/test_blog_api.py -v --asyncio-mode=auto",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **FastAPI combines many concepts**: routes, Pydantic validation, OAuth2 auth, error handling\n- **Depends()** injects authentication into routes cleanly\n- **Pydantic models** validate input automatically with clear errors\n- **OAuth2PasswordBearer** implements standard authentication flow\n- **HTTPException** returns proper error responses (400, 401, 403, 404)\n- **Test with httpx** + pytest-asyncio for async endpoints\n- **Authorization** ensures users can only modify their own data\n- **Auto-generated docs** at /docs show all endpoints and auth requirements\n- **In production**: use bcrypt (passlib), PostgreSQL, HTTPS, and environment variables\n- **You've built a real API!** This is the foundation for web and mobile apps"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-12-challenge-1",
              "title": "Extend the Blog API",
              "description": "Extend the FastAPI Blog API with these features:\n\n1. Add a 'likes' system:\n   - POST /api/posts/{id}/like - Like a post (authenticated)\n   - Each user can only like a post once\n   - GET /api/posts/{id} should include like_count\n\n2. Add user profiles:\n   - GET /api/users/{username} - Get user's public profile\n   - Include: username, bio, post_count, joined date\n\n3. Add search:\n   - GET /api/posts?search=keyword - Filter posts by title/content",
              "instructions": "Extend the FastAPI Blog API with these features:\n\n1. Add a 'likes' system:\n   - POST /api/posts/{id}/like - Like a post (authenticated)\n   - Each user can only like a post once\n   - GET /api/posts/{id} should include like_count\n\n2. Add user profiles:\n   - GET /api/users/{username} - Get user's public profile\n   - Include: username, bio, post_count, joined date\n\n3. Add search:\n   - GET /api/posts?search=keyword - Filter posts by title/content",
              "starterCode": "# Start with the FastAPI Blog API from the lesson\n# Add your new features below\n\nfrom fastapi import FastAPI, Depends, HTTPException, Query\nfrom pydantic import BaseModel\nfrom typing import Optional, List\nfrom datetime import datetime\n\napp = FastAPI()\n\n# Data stores (from the lesson)\nusers_db = {}\nposts_db = []\ncomments_db = []\nlikes_db = []  # TODO: Store likes here\n\n# TODO: Add Pydantic models for responses\nclass UserProfile(BaseModel):\n    username: str\n    bio: str\n    post_count: int\n    joined: str\n\n# TODO: Add helper function to check if user already liked a post\ndef has_liked(username: str, post_id: int) -> bool:\n    pass\n\n# TODO: Add POST /api/posts/{id}/like endpoint\n@app.post(\"/api/posts/{post_id}/like\")\nasync def like_post(post_id: int, current_user: str = Depends(get_current_user)):\n    pass\n\n# TODO: Add GET /api/users/{username} endpoint\n@app.get(\"/api/users/{username}\", response_model=UserProfile)\nasync def get_user_profile(username: str):\n    pass\n\n# TODO: Modify GET /api/posts to support ?search= parameter\n@app.get(\"/api/posts\")\nasync def get_posts(search: Optional[str] = Query(None)):\n    # Filter posts if search parameter provided\n    pass\n\n# Run with: uvicorn main:app --reload",
              "solution": "from fastapi import FastAPI, Depends, HTTPException, Query\nfrom fastapi.security import OAuth2PasswordBearer\nfrom pydantic import BaseModel\nfrom jose import jwt\nfrom passlib.context import CryptContext\nfrom datetime import datetime, timedelta\nfrom typing import Optional, List\n\napp = FastAPI(title=\"Extended Blog API\")\n\n# Security config\nSECRET_KEY = \"your-secret-key\"\nALGORITHM = \"HS256\"\npwd_context = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")\noauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"api/auth/login\")\n\n# Pydantic models\nclass UserProfile(BaseModel):\n    username: str\n    bio: str\n    post_count: int\n    joined: str\n\nclass PostResponse(BaseModel):\n    id: int\n    title: str\n    content: str\n    author: str\n    created_at: str\n    like_count: int\n    comment_count: int\n\n# Data stores\nusers_db = {}\nposts_db = []\ncomments_db = []\nlikes_db = []\n\n# Auth helpers\nasync def get_current_user(token: str = Depends(oauth2_scheme)) -> str:\n    try:\n        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])\n        return payload.get(\"sub\")\n    except:\n        raise HTTPException(status_code=401, detail=\"Invalid token\")\n\ndef has_liked(username: str, post_id: int) -> bool:\n    return any(l[\"username\"] == username and l[\"post_id\"] == post_id for l in likes_db)\n\ndef get_like_count(post_id: int) -> int:\n    return sum(1 for l in likes_db if l[\"post_id\"] == post_id)\n\n# Feature 1: Likes System\n@app.post(\"/api/posts/{post_id}/like\", status_code=201)\nasync def like_post(post_id: int, current_user: str = Depends(get_current_user)):\n    if post_id >= len(posts_db) or posts_db[post_id].get(\"deleted\"):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    if has_liked(current_user, post_id):\n        raise HTTPException(status_code=400, detail=\"Already liked\")\n    \n    likes_db.append({\"username\": current_user, \"post_id\": post_id, \"created_at\": datetime.now().isoformat()})\n    return {\"message\": \"Post liked\", \"like_count\": get_like_count(post_id)}\n\n# Feature 2: User Profiles\n@app.get(\"/api/users/{username}\", response_model=UserProfile)\nasync def get_user_profile(username: str):\n    if username not in users_db:\n        raise HTTPException(status_code=404, detail=\"User not found\")\n    \n    user = users_db[username]\n    post_count = sum(1 for p in posts_db if p[\"author\"] == username and not p.get(\"deleted\"))\n    \n    return UserProfile(\n        username=user[\"username\"],\n        bio=user.get(\"bio\", \"\"),\n        post_count=post_count,\n        joined=user[\"created_at\"]\n    )\n\n# Feature 3: Search Posts\n@app.get(\"/api/posts\", response_model=List[PostResponse])\nasync def get_posts(search: Optional[str] = Query(None)):\n    result = []\n    search_lower = search.lower().strip() if search else None\n    \n    for i, post in enumerate(posts_db):\n        if post.get(\"deleted\"):\n            continue\n        \n        if search_lower:\n            if search_lower not in post[\"title\"].lower() and search_lower not in post[\"content\"].lower():\n                continue\n        \n        result.append(PostResponse(\n            id=i,\n            title=post[\"title\"],\n            content=post[\"content\"][:100] + \"...\" if len(post[\"content\"]) > 100 else post[\"content\"],\n            author=post[\"author\"],\n            created_at=post[\"created_at\"],\n            like_count=get_like_count(i),\n            comment_count=sum(1 for c in comments_db if c[\"post_id\"] == i)\n        ))\n    \n    return result\n\n# Get single post with like_count\n@app.get(\"/api/posts/{post_id}\")\nasync def get_post(post_id: int):\n    if post_id >= len(posts_db) or posts_db[post_id].get(\"deleted\"):\n        raise HTTPException(status_code=404, detail=\"Post not found\")\n    \n    post = posts_db[post_id]\n    post_comments = [c for c in comments_db if c[\"post_id\"] == post_id]\n    \n    return {\n        **post,\n        \"id\": post_id,\n        \"like_count\": get_like_count(post_id),\n        \"comments\": post_comments\n    }\n\nif __name__ == \"__main__\":\n    import uvicorn\n    print(\"Extended Blog API - http://localhost:8000/docs\")\n    uvicorn.run(app, host=\"0.0.0.0\", port=8000)",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Depends(get_current_user) for auth. Use Query(None) for optional search parameter. Use HTTPException for errors. Store likes as {'post_id': id, 'username': user}."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Allowing users to like the same post multiple times",
                  "consequence": "Inflated like counts",
                  "correction": "Check if user already liked before adding new like"
                },
                {
                  "mistake": "Not handling case-insensitive search",
                  "consequence": "Users may not find posts with different capitalization",
                  "correction": "Use .lower() on both search term and post content"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-07",
          "title": "Data Validation with Pydantic",
          "moduleId": "module-14",
          "order": 2,
          "estimatedMinutes": 35,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Data Validation Matters",
              "content": "**The Problem: Garbage In, Garbage Out**\n\nAPIs receive data from users, and users make mistakes:\n- Wrong data types (string instead of number)\n- Missing required fields\n- Invalid formats (bad email, wrong date)\n- Malicious input (SQL injection, XSS)\n\n**Pydantic solves this:**\n- Automatic type validation\n- Clear error messages\n- Data conversion (str to int)\n- Default values\n- Complex nested structures\n\n**Pydantic v2 (2023+):**\n- 5-50x faster than v1\n- Better error messages\n- Stricter validation\n- New syntax features"
            },
            {
              "type": "EXAMPLE",
              "title": "Pydantic BaseModel Basics",
              "content": "Pydantic models define data structures with automatic type validation. Use Field() for constraints like min/max values, and EmailStr for email validation. Invalid data raises ValidationError with detailed error messages.",
              "code": "from pydantic import BaseModel, Field, EmailStr, ValidationError\nfrom datetime import datetime\nfrom typing import Optional\n\nclass User(BaseModel):\n    name: str\n    email: EmailStr\n    age: int = Field(ge=0, le=150)  # 0-150\n    is_active: bool = True\n    created_at: datetime = Field(default_factory=datetime.now)\n    bio: Optional[str] = None\n\n# Valid data - works!\nuser = User(name=\"Alice\", email=\"alice@example.com\", age=25)\nprint(user.model_dump())  # Convert to dict\n\n# Invalid data - raises ValidationError\ntry:\n    bad_user = User(name=\"Bob\", email=\"not-an-email\", age=-5)\nexcept ValidationError as e:\n    print(e.errors())  # Detailed error info",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Field Validators and Constraints",
              "content": "**Built-in constraints:**\n```python\nfrom pydantic import Field\n\nclass Product(BaseModel):\n    name: str = Field(min_length=1, max_length=100)\n    price: float = Field(gt=0)  # greater than 0\n    quantity: int = Field(ge=0)  # >= 0\n    sku: str = Field(pattern=r'^[A-Z]{3}-\\d{4}$')  # regex\n```\n\n**Custom validators:**\n```python\nfrom pydantic import field_validator\n\nclass User(BaseModel):\n    username: str\n    \n    @field_validator('username')\n    @classmethod\n    def username_alphanumeric(cls, v):\n        if not v.isalnum():\n            raise ValueError('must be alphanumeric')\n        return v.lower()  # normalize\n```\n\n**Pydantic v2 syntax:**\n- `model_dump()` replaces `.dict()`\n- `model_validate()` replaces `.parse_obj()`\n- `@field_validator` replaces `@validator`"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-07-challenge",
              "title": "Create a Product Model",
              "description": "Create a Pydantic model for product data with validation.",
              "instructions": "Create a Product model with: name (1-100 chars), price (> 0), category (from enum), and optional description.",
              "starterCode": "from pydantic import BaseModel, Field\nfrom enum import Enum\nfrom typing import Optional\n\nclass Category(Enum):\n    ELECTRONICS = \"electronics\"\n    CLOTHING = \"clothing\"\n    FOOD = \"food\"\n\n# TODO: Create Product model\n# - name: str, 1-100 characters\n# - price: float, must be > 0\n# - category: Category enum\n# - description: Optional[str], max 500 chars\n\n# Test your model\ntry:\n    product = Product(\n        name=\"Laptop\",\n        price=999.99,\n        category=Category.ELECTRONICS\n    )\n    print(f\"Valid product: {product.name}\")\nexcept Exception as e:\n    print(f\"Error: {e}\")",
              "solution": "from pydantic import BaseModel, Field, ValidationError\nfrom enum import Enum\nfrom typing import Optional\n\nclass Category(Enum):\n    ELECTRONICS = \"electronics\"\n    CLOTHING = \"clothing\"\n    FOOD = \"food\"\n\nclass Product(BaseModel):\n    name: str = Field(min_length=1, max_length=100)\n    price: float = Field(gt=0)\n    category: Category\n    description: Optional[str] = Field(default=None, max_length=500)\n\n# Test valid product\nproduct = Product(\n    name=\"Laptop\",\n    price=999.99,\n    category=Category.ELECTRONICS,\n    description=\"Powerful laptop\"\n)\nprint(f\"Valid: {product.model_dump()}\")\n\n# Test invalid product\ntry:\n    bad = Product(name=\"\", price=-10, category=\"invalid\")\nexcept ValidationError as e:\n    print(f\"Validation errors: {len(e.errors())} issues found\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Valid product creates successfully",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Field(min_length=1, max_length=100) for string constraints and Field(gt=0) for positive numbers"
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-08",
          "title": "Modern APIs with FastAPI",
          "moduleId": "module-14",
          "order": 3,
          "estimatedMinutes": 40,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why FastAPI is the Modern Choice",
              "content": "**FastAPI: The Modern Standard for Python APIs**\n\nFastAPI has become the go-to framework for building production APIs in Python. It combines the best ideas from modern web development into one powerful, easy-to-use package.\n\n**Key Benefits:**\n\n1. **Automatic Documentation** - Interactive API docs generated from your code\n   - Swagger UI at `/docs`\n   - ReDoc at `/redoc`\n   - OpenAPI JSON for client generation\n\n2. **Built-in Validation** - Pydantic models validate all input automatically\n   - No manual type checking\n   - Clear error messages\n   - IDE autocompletion\n\n3. **High Performance** - One of the fastest Python frameworks\n   - Async/await support built-in\n   - On par with Node.js and Go\n\n4. **Developer Experience** - Modern Python features\n   - Type hints catch errors early\n   - Excellent IDE support\n   - Less boilerplate code\n\n5. **Production Ready** - Used by Microsoft, Netflix, Uber\n   - Robust error handling\n   - Easy testing\n   - Great for microservices\n\n**What You'll Learn:**\n- Creating API endpoints with decorators\n- Request/response models with Pydantic\n- Path and query parameters\n- Dependency injection\n- Authentication patterns"
            },
            {
              "type": "EXAMPLE",
              "title": "FastAPI Hello World",
              "content": "FastAPI uses decorators like @app.get() and @app.post() to define routes. Type hints in parameters enable automatic validation, and Pydantic models handle request body parsing. Auto-generated docs are available at /docs.",
              "code": "from fastapi import FastAPI\nfrom pydantic import BaseModel\n\napp = FastAPI()\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n@app.get(\"/\")\ndef read_root():\n    return {\"message\": \"Hello World\"}\n\n@app.get(\"/items/{item_id}\")\ndef read_item(item_id: int, q: str = None):\n    return {\"item_id\": item_id, \"query\": q}\n\n@app.post(\"/items/\")\ndef create_item(item: Item):\n    return {\"name\": item.name, \"price\": item.price}\n\n# Run with: uvicorn main:app --reload\n# Docs at: http://localhost:8000/docs",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Auto-Generated Documentation",
              "content": "**FastAPI auto-generates:**\n\n1. **Swagger UI** at `/docs`\n   - Interactive API explorer\n   - Try endpoints directly\n   - See request/response schemas\n\n2. **ReDoc** at `/redoc`\n   - Beautiful documentation\n   - Good for sharing\n\n3. **OpenAPI JSON** at `/openapi.json`\n   - Machine-readable spec\n   - Import into Postman\n   - Generate client code\n\n**Everything comes from your code:**\n- Type hints ‚Üí Parameter types\n- Pydantic models ‚Üí Request/response schemas\n- Docstrings ‚Üí Descriptions\n- Function names ‚Üí Operation IDs"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-08-challenge",
              "title": "Create a Simple FastAPI App",
              "description": "Build a basic FastAPI application with CRUD operations.",
              "instructions": "Create a FastAPI app with endpoints to list, create, and get items by ID.",
              "starterCode": "from fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel\nfrom typing import List\n\napp = FastAPI(title=\"My First API\")\n\n# In-memory storage\nitems = {}\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\n# TODO: Add these endpoints:\n# GET / - return {\"status\": \"ok\"}\n# GET /items - return list of all items\n# GET /items/{item_id} - return single item or 404\n# POST /items - create new item, return it with id\n\nprint(\"FastAPI app created!\")\nprint(\"Run with: uvicorn main:app --reload\")\nprint(\"Docs at: http://localhost:8000/docs\")",
              "solution": "from fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel\nfrom typing import List, Dict\n\napp = FastAPI(title=\"My First API\")\n\n# In-memory storage\nitems: Dict[int, dict] = {}\nnext_id = 1\n\nclass Item(BaseModel):\n    name: str\n    price: float\n\nclass ItemResponse(BaseModel):\n    id: int\n    name: str\n    price: float\n\n@app.get(\"/\")\ndef root():\n    return {\"status\": \"ok\"}\n\n@app.get(\"/items\", response_model=List[ItemResponse])\ndef list_items():\n    return [ItemResponse(id=id, **item) for id, item in items.items()]\n\n@app.get(\"/items/{item_id}\", response_model=ItemResponse)\ndef get_item(item_id: int):\n    if item_id not in items:\n        raise HTTPException(status_code=404, detail=\"Item not found\")\n    return ItemResponse(id=item_id, **items[item_id])\n\n@app.post(\"/items\", response_model=ItemResponse, status_code=201)\ndef create_item(item: Item):\n    global next_id\n    items[next_id] = item.model_dump()\n    response = ItemResponse(id=next_id, **items[next_id])\n    next_id += 1\n    return response\n\nprint(\"FastAPI app created!\")\nprint(\"Endpoints: GET /, GET /items, GET /items/{id}, POST /items\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "App structure is correct",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use @app.get() and @app.post() decorators. Raise HTTPException(status_code=404) for not found."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-09",
          "title": "FastAPI Routes and Models",
          "moduleId": "module-14",
          "order": 4,
          "estimatedMinutes": 35,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Path and Query Parameters",
              "content": "**Path parameters** - part of the URL:\n```python\n@app.get(\"/users/{user_id}\")\ndef get_user(user_id: int):  # Automatically validated as int\n    return {\"user_id\": user_id}\n```\n\n**Query parameters** - after the ?:\n```python\n@app.get(\"/items/\")\ndef list_items(\n    skip: int = 0,\n    limit: int = 10,\n    search: str = None\n):\n    # /items/?skip=10&limit=5&search=laptop\n    return {\"skip\": skip, \"limit\": limit, \"search\": search}\n```\n\n**Combining both:**\n```python\n@app.get(\"/users/{user_id}/items/\")\ndef get_user_items(\n    user_id: int,  # Path param\n    skip: int = 0,  # Query param\n    limit: int = 10  # Query param\n):\n    pass\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Request and Response Models",
              "content": "Separate models for input (Create) and output (Response) provide clean API contracts. The response_model parameter filters output to only include specified fields - preventing accidental data leaks like exposing passwords.",
              "code": "from pydantic import BaseModel\nfrom typing import Optional\n\n# Request model (what client sends)\nclass UserCreate(BaseModel):\n    email: str\n    password: str\n    name: Optional[str] = None\n\n# Response model (what we return)\nclass UserResponse(BaseModel):\n    id: int\n    email: str\n    name: Optional[str]\n    # Note: no password!\n\n@app.post(\"/users/\", response_model=UserResponse)\ndef create_user(user: UserCreate):\n    # user is validated UserCreate\n    # Return is validated against UserResponse\n    db_user = create_user_in_db(user)\n    return db_user  # Password filtered out!",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Nested Models and Lists",
              "content": "**Nested Pydantic models:**\n```python\nclass Address(BaseModel):\n    street: str\n    city: str\n    country: str = \"USA\"\n\nclass User(BaseModel):\n    name: str\n    addresses: List[Address]  # List of nested models\n\n# Request body:\n{\n    \"name\": \"Alice\",\n    \"addresses\": [\n        {\"street\": \"123 Main\", \"city\": \"Boston\"},\n        {\"street\": \"456 Oak\", \"city\": \"NYC\"}\n    ]\n}\n```\n\n**Response with list:**\n```python\nfrom typing import List\n\n@app.get(\"/users/\", response_model=List[UserResponse])\ndef list_users():\n    return get_all_users()  # Returns list\n```"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-09-challenge",
              "title": "Build a Blog API",
              "description": "Create models and endpoints for a blog with posts and comments.",
              "instructions": "Create Pydantic models for Post and Comment, with endpoints to create posts and add comments to posts.",
              "starterCode": "from fastapi import FastAPI\nfrom pydantic import BaseModel\nfrom typing import List, Optional\nfrom datetime import datetime\n\napp = FastAPI()\n\n# TODO: Create models:\n# - PostCreate: title, content\n# - PostResponse: id, title, content, created_at, comments\n# - CommentCreate: text, author\n# - CommentResponse: id, text, author, created_at\n\n# TODO: Create endpoints:\n# POST /posts - create post\n# GET /posts/{post_id} - get post with comments\n# POST /posts/{post_id}/comments - add comment\n\nposts = {}\nnext_id = 1\n\nprint(\"Blog API structure created\")",
              "solution": "from fastapi import FastAPI, HTTPException\nfrom pydantic import BaseModel, Field\nfrom typing import List, Optional\nfrom datetime import datetime\n\napp = FastAPI(title=\"Blog API\")\n\n# Models\nclass CommentCreate(BaseModel):\n    text: str = Field(min_length=1)\n    author: str\n\nclass CommentResponse(BaseModel):\n    id: int\n    text: str\n    author: str\n    created_at: datetime\n\nclass PostCreate(BaseModel):\n    title: str = Field(min_length=1, max_length=200)\n    content: str\n\nclass PostResponse(BaseModel):\n    id: int\n    title: str\n    content: str\n    created_at: datetime\n    comments: List[CommentResponse] = []\n\n# Storage\nposts = {}\nnext_post_id = 1\nnext_comment_id = 1\n\n@app.post(\"/posts\", response_model=PostResponse, status_code=201)\ndef create_post(post: PostCreate):\n    global next_post_id\n    new_post = {\n        \"id\": next_post_id,\n        \"title\": post.title,\n        \"content\": post.content,\n        \"created_at\": datetime.now(),\n        \"comments\": []\n    }\n    posts[next_post_id] = new_post\n    next_post_id += 1\n    return new_post\n\n@app.get(\"/posts/{post_id}\", response_model=PostResponse)\ndef get_post(post_id: int):\n    if post_id not in posts:\n        raise HTTPException(404, \"Post not found\")\n    return posts[post_id]\n\n@app.post(\"/posts/{post_id}/comments\", response_model=CommentResponse)\ndef add_comment(post_id: int, comment: CommentCreate):\n    global next_comment_id\n    if post_id not in posts:\n        raise HTTPException(404, \"Post not found\")\n    new_comment = {\n        \"id\": next_comment_id,\n        \"text\": comment.text,\n        \"author\": comment.author,\n        \"created_at\": datetime.now()\n    }\n    posts[post_id][\"comments\"].append(new_comment)\n    next_comment_id += 1\n    return new_comment\n\nprint(\"Blog API ready!\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Models and endpoints defined",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create separate models for Create (input) and Response (output). Include datetime for timestamps."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-10",
          "title": "FastAPI Advanced Patterns",
          "moduleId": "module-14",
          "order": 5,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Dependency Injection",
              "content": "**What is Dependency Injection?**\n\nInstead of creating dependencies inside functions, you *inject* them:\n\n```python\nfrom fastapi import Depends\n\n# Dependency function\ndef get_db():\n    db = DatabaseSession()\n    try:\n        yield db  # Provide to endpoint\n    finally:\n        db.close()  # Cleanup after\n\n# Use the dependency\n@app.get(\"/users/\")\ndef get_users(db: Session = Depends(get_db)):\n    return db.query(User).all()\n```\n\n**Benefits:**\n- Reusable logic (auth, db, logging)\n- Automatic cleanup\n- Easy testing (swap dependencies)\n- Clear separation of concerns"
            },
            {
              "type": "EXAMPLE",
              "title": "Authentication Dependency",
              "content": "Dependencies with Depends() inject shared logic like authentication. The verify_token function extracts and validates JWT tokens from headers, and can be reused across multiple endpoints. Invalid tokens raise HTTPException(401).",
              "code": "from fastapi import Depends, HTTPException, Header\n\nasync def verify_token(authorization: str = Header(...)):\n    \"\"\"Verify JWT token from Authorization header\"\"\"\n    if not authorization.startswith(\"Bearer \"):\n        raise HTTPException(401, \"Invalid auth header\")\n    \n    token = authorization.split(\" \")[1]\n    try:\n        payload = jwt.decode(token, SECRET_KEY)\n        return payload[\"user_id\"]\n    except jwt.JWTError:\n        raise HTTPException(401, \"Invalid token\")\n\n@app.get(\"/me/\")\ndef get_current_user(user_id: int = Depends(verify_token)):\n    # Only runs if token is valid!\n    return {\"user_id\": user_id}\n\n@app.get(\"/admin/\")\ndef admin_only(\n    user_id: int = Depends(verify_token),\n    is_admin: bool = Depends(check_admin)\n):\n    # Multiple dependencies!\n    return {\"admin\": True}",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Background Tasks and Middleware",
              "content": "**Background tasks** - run after response:\n```python\nfrom fastapi import BackgroundTasks\n\ndef send_email(email: str, message: str):\n    # Slow operation\n    time.sleep(5)\n    print(f\"Sent to {email}\")\n\n@app.post(\"/signup/\")\ndef signup(email: str, background: BackgroundTasks):\n    create_user(email)\n    background.add_task(send_email, email, \"Welcome!\")\n    return {\"status\": \"created\"}  # Returns immediately\n```\n\n**Middleware** - runs on every request:\n```python\nfrom fastapi.middleware.cors import CORSMiddleware\n\napp.add_middleware(\n    CORSMiddleware,\n    allow_origins=[\"http://localhost:3000\"],\n    allow_methods=[\"*\"],\n    allow_headers=[\"*\"]\n)\n\n@app.middleware(\"http\")\nasync def log_requests(request, call_next):\n    start = time.time()\n    response = await call_next(request)\n    duration = time.time() - start\n    print(f\"{request.method} {request.url} - {duration:.2f}s\")\n    return response\n```"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-10-challenge",
              "title": "Create Auth Dependency",
              "description": "Build a dependency that validates API keys.",
              "instructions": "Create a dependency function that checks for a valid API key in the X-API-Key header.",
              "starterCode": "from fastapi import FastAPI, Depends, HTTPException, Header\n\napp = FastAPI()\n\n# Valid API keys (in real app, store in database)\nVALID_API_KEYS = {\"key123\", \"key456\"}\n\n# TODO: Create dependency function\ndef verify_api_key(x_api_key: str = Header(...)):\n    # Check if key is valid\n    # Raise HTTPException(403) if invalid\n    # Return the key if valid\n    pass\n\n@app.get(\"/public/\")\ndef public_endpoint():\n    return {\"message\": \"Anyone can see this\"}\n\n# TODO: Add protected endpoint that uses verify_api_key\n@app.get(\"/protected/\")\ndef protected_endpoint():\n    pass\n\nprint(\"API Key auth demo\")",
              "solution": "from fastapi import FastAPI, Depends, HTTPException, Header\n\napp = FastAPI()\n\nVALID_API_KEYS = {\"key123\", \"key456\"}\n\ndef verify_api_key(x_api_key: str = Header(...)):\n    \"\"\"Dependency to verify API key\"\"\"\n    if x_api_key not in VALID_API_KEYS:\n        raise HTTPException(\n            status_code=403,\n            detail=\"Invalid API key\"\n        )\n    return x_api_key\n\n@app.get(\"/public/\")\ndef public_endpoint():\n    return {\"message\": \"Anyone can see this\"}\n\n@app.get(\"/protected/\")\ndef protected_endpoint(api_key: str = Depends(verify_api_key)):\n    return {\n        \"message\": \"Secret data!\",\n        \"authenticated_with\": api_key[:4] + \"...\"\n    }\n\n@app.get(\"/admin/\")\ndef admin_endpoint(api_key: str = Depends(verify_api_key)):\n    # Can reuse the same dependency\n    return {\"message\": \"Admin area\", \"key\": api_key}\n\nprint(\"API Key auth ready!\")\nprint(\"Test: curl -H 'X-API-Key: key123' localhost:8000/protected/\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Dependency validates API keys",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Header(...) to require the header. Check if key is in VALID_API_KEYS set."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-14-lesson-11",
          "title": "Mini-Project: FastAPI CRUD API",
          "moduleId": "module-14",
          "order": 6,
          "estimatedMinutes": 50,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Building a Complete API",
              "content": "**Project: Task Management API**\n\nWe'll build the same API as the Flask project, but with FastAPI:\n\n**Features:**\n- Create, read, update, delete tasks\n- Filter by status (pending/completed)\n- Pagination\n- Input validation\n- Auto-generated docs\n\n**Structure:**\n```\napp/\n‚îú‚îÄ‚îÄ main.py          # FastAPI app\n‚îú‚îÄ‚îÄ models.py        # Pydantic models\n‚îú‚îÄ‚îÄ database.py      # DB connection\n‚îî‚îÄ‚îÄ routers/\n    ‚îî‚îÄ‚îÄ tasks.py     # Task endpoints\n```\n\n**Comparison with Flask:**\n| Flask | FastAPI |\n|-------|----------|\n| `@app.route('/tasks', methods=['GET'])` | `@app.get('/tasks')` |\n| `request.get_json()` | `def create(task: TaskCreate)` |\n| Manual validation | Automatic via Pydantic |\n| No built-in docs | Swagger at /docs |"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Task API",
              "content": "A full CRUD API with FastAPI including all endpoints, models, and proper error handling.",
              "code": "from fastapi import FastAPI, HTTPException, Query\nfrom pydantic import BaseModel, Field\nfrom typing import List, Optional\nfrom datetime import datetime\nfrom enum import Enum\n\napp = FastAPI(\n    title=\"Task Management API\",\n    description=\"A complete CRUD API built with FastAPI\",\n    version=\"1.0.0\"\n)\n\n# Enums\nclass TaskStatus(str, Enum):\n    PENDING = \"pending\"\n    IN_PROGRESS = \"in_progress\"\n    COMPLETED = \"completed\"\n\n# Models\nclass TaskCreate(BaseModel):\n    title: str = Field(min_length=1, max_length=200)\n    description: Optional[str] = Field(default=None, max_length=1000)\n    status: TaskStatus = TaskStatus.PENDING\n\nclass TaskUpdate(BaseModel):\n    title: Optional[str] = Field(default=None, min_length=1, max_length=200)\n    description: Optional[str] = None\n    status: Optional[TaskStatus] = None\n\nclass TaskResponse(BaseModel):\n    id: int\n    title: str\n    description: Optional[str]\n    status: TaskStatus\n    created_at: datetime\n    updated_at: datetime\n\n# In-memory database\ntasks_db = {}\nnext_id = 1\n\n# Endpoints\n@app.get(\"/tasks\", response_model=List[TaskResponse])\ndef list_tasks(\n    status: Optional[TaskStatus] = None,\n    skip: int = Query(default=0, ge=0),\n    limit: int = Query(default=10, ge=1, le=100)\n):\n    \"\"\"List all tasks with optional filtering and pagination.\"\"\"\n    result = list(tasks_db.values())\n    \n    if status:\n        result = [t for t in result if t[\"status\"] == status]\n    \n    return result[skip:skip + limit]\n\n@app.get(\"/tasks/{task_id}\", response_model=TaskResponse)\ndef get_task(task_id: int):\n    \"\"\"Get a single task by ID.\"\"\"\n    if task_id not in tasks_db:\n        raise HTTPException(status_code=404, detail=\"Task not found\")\n    return tasks_db[task_id]\n\n@app.post(\"/tasks\", response_model=TaskResponse, status_code=201)\ndef create_task(task: TaskCreate):\n    \"\"\"Create a new task.\"\"\"\n    global next_id\n    now = datetime.now()\n    new_task = {\n        \"id\": next_id,\n        \"title\": task.title,\n        \"description\": task.description,\n        \"status\": task.status,\n        \"created_at\": now,\n        \"updated_at\": now\n    }\n    tasks_db[next_id] = new_task\n    next_id += 1\n    return new_task\n\n@app.put(\"/tasks/{task_id}\", response_model=TaskResponse)\ndef update_task(task_id: int, task: TaskUpdate):\n    \"\"\"Update an existing task.\"\"\"\n    if task_id not in tasks_db:\n        raise HTTPException(status_code=404, detail=\"Task not found\")\n    \n    existing = tasks_db[task_id]\n    update_data = task.model_dump(exclude_unset=True)\n    \n    for field, value in update_data.items():\n        existing[field] = value\n    \n    existing[\"updated_at\"] = datetime.now()\n    return existing\n\n@app.delete(\"/tasks/{task_id}\", status_code=204)\ndef delete_task(task_id: int):\n    \"\"\"Delete a task.\"\"\"\n    if task_id not in tasks_db:\n        raise HTTPException(status_code=404, detail=\"Task not found\")\n    del tasks_db[task_id]\n\n@app.get(\"/tasks/stats/summary\")\ndef get_stats():\n    \"\"\"Get task statistics.\"\"\"\n    all_tasks = list(tasks_db.values())\n    return {\n        \"total\": len(all_tasks),\n        \"pending\": len([t for t in all_tasks if t[\"status\"] == TaskStatus.PENDING]),\n        \"in_progress\": len([t for t in all_tasks if t[\"status\"] == TaskStatus.IN_PROGRESS]),\n        \"completed\": len([t for t in all_tasks if t[\"status\"] == TaskStatus.COMPLETED])\n    }\n\nprint(\"Task Management API\")\nprint(\"Run: uvicorn main:app --reload\")\nprint(\"Docs: http://localhost:8000/docs\")",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "FastAPI vs Flask Summary",
              "content": "**What we gained with FastAPI:**\n\n1. **Automatic validation** - No manual checking\n2. **Type safety** - IDE catches errors\n3. **Auto documentation** - /docs always current\n4. **Cleaner code** - Less boilerplate\n5. **Better performance** - Async support\n\n**When to migrate:**\n- New project ‚Üí Use FastAPI\n- Existing Flask ‚Üí Keep if working\n- Need async ‚Üí FastAPI\n- Need auto-docs ‚Üí FastAPI\n\n**Learning path:**\n1. Flask basics (done!)\n2. FastAPI basics (this lesson)\n3. SQLAlchemy + FastAPI\n4. Authentication patterns\n5. Testing with pytest"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-11-challenge",
              "title": "Add Search to Task API",
              "description": "Extend the Task API with search functionality.",
              "instructions": "Add a search endpoint that finds tasks by title or description containing a search term.",
              "starterCode": "from fastapi import FastAPI, Query\nfrom pydantic import BaseModel\nfrom typing import List, Optional\n\napp = FastAPI()\n\n# Sample data\ntasks = [\n    {\"id\": 1, \"title\": \"Learn Python\", \"description\": \"Complete the basics\"},\n    {\"id\": 2, \"title\": \"Build API\", \"description\": \"Create REST endpoints\"},\n    {\"id\": 3, \"title\": \"Write tests\", \"description\": \"Add pytest tests\"},\n]\n\nclass TaskResponse(BaseModel):\n    id: int\n    title: str\n    description: Optional[str]\n\n# TODO: Add search endpoint\n# GET /tasks/search?q=python\n# Should search in both title and description (case-insensitive)\n# Return matching tasks\n\n@app.get(\"/tasks/search\", response_model=List[TaskResponse])\ndef search_tasks(q: str = Query(min_length=1)):\n    # Your code here\n    pass\n\nprint(\"Search endpoint added!\")",
              "solution": "from fastapi import FastAPI, Query\nfrom pydantic import BaseModel\nfrom typing import List, Optional\n\napp = FastAPI()\n\ntasks = [\n    {\"id\": 1, \"title\": \"Learn Python\", \"description\": \"Complete the basics\"},\n    {\"id\": 2, \"title\": \"Build API\", \"description\": \"Create REST endpoints\"},\n    {\"id\": 3, \"title\": \"Write tests\", \"description\": \"Add pytest tests\"},\n    {\"id\": 4, \"title\": \"Deploy app\", \"description\": \"Push to production\"},\n]\n\nclass TaskResponse(BaseModel):\n    id: int\n    title: str\n    description: Optional[str]\n\n@app.get(\"/tasks/search\", response_model=List[TaskResponse])\ndef search_tasks(\n    q: str = Query(min_length=1, description=\"Search term\"),\n    limit: int = Query(default=10, ge=1, le=50)\n):\n    \"\"\"Search tasks by title or description.\"\"\"\n    query = q.lower()\n    results = []\n    \n    for task in tasks:\n        title_match = query in task[\"title\"].lower()\n        desc_match = task[\"description\"] and query in task[\"description\"].lower()\n        \n        if title_match or desc_match:\n            results.append(task)\n    \n    return results[:limit]\n\n# Test the search\nprint(\"Search API ready!\")\nprint(\"Example: /tasks/search?q=python\")\nprint(\"Example: /tasks/search?q=test&limit=5\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Search finds matching tasks",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use .lower() for case-insensitive matching. Check if query is in title or description."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-15",
      "title": "Sharing Your Work",
      "description": "Project planning and deployment",
      "difficulty": "advanced",
      "estimatedHours": 8,
      "lessons": [
        {
          "id": "module-15-lesson-01",
          "title": "Project Planning and Architecture",
          "moduleId": "module-15",
          "order": 1,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Building a House vs Building Code",
              "content": "**Project architecture = Blueprint for your code**\n\n**Think of building a house:**\n\n**Without planning:**\n- Start building walls randomly\n- Forget about plumbing\n- Add rooms wherever\n- Result: Unusable mess\n\n**With planning:**\n- Draw blueprints first\n- Plan room layout\n- Consider utilities (water, electricity)\n- Result: Livable, maintainable home\n\n**Software is the same!**\n\n**Good project planning includes:**\n\n1. **Requirements** üìã\n   - What should the project do?\n   - Who will use it?\n   - What problems does it solve?\n\n2. **Architecture** üèóÔ∏è\n   - How will components interact?\n   - What's the folder structure?\n   - What technologies to use?\n\n3. **Design patterns** üé®\n   - Common solutions to common problems\n   - MVC, Repository, Factory, etc.\n   - Proven approaches\n\n4. **Data flow** üîÑ\n   - How does data move through the system?\n   - Where is data stored?\n   - What transforms the data?\n\n**Key principle:**\n\"Hours of planning save weeks of coding\""
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Project Structure",
              "content": "**Project structure breakdown:**\n\n**1. Root level:**\n- `README.md`: First thing people see\n- `requirements.txt`: All dependencies\n- `setup.py`: For pip installation\n- `.gitignore`: Exclude temp files, secrets\n\n**2. Source code (`src/`):**\n- `models/`: Data structures\n- `services/`: Business logic\n- `repositories/`: Database access\n- `api/`: HTTP endpoints\n- `utils/`: Helper functions\n\n**3. Tests (`tests/`):**\n- Mirror src/ structure\n- One test file per source file\n- Use pytest conventions\n\n**4. Documentation (`docs/`):**\n- Architecture decisions\n- API documentation\n- User guides\n\n**Layered architecture:**\n```\nAPI ‚Üí Services ‚Üí Repositories ‚Üí Database\n```\nEach layer only talks to layer below it.",
              "code": "# Standard Python project structure\n\"\"\"\nmy_project/\n‚îÇ\n‚îú‚îÄ‚îÄ README.md              # Project overview and setup instructions\n‚îú‚îÄ‚îÄ requirements.txt       # Dependencies\n‚îú‚îÄ‚îÄ setup.py              # Package installation config\n‚îú‚îÄ‚îÄ .gitignore            # Files to ignore in version control\n‚îú‚îÄ‚îÄ .env.example          # Environment variables template\n‚îÇ\n‚îú‚îÄ‚îÄ docs/                 # Documentation\n‚îÇ   ‚îú‚îÄ‚îÄ architecture.md\n‚îÇ   ‚îú‚îÄ‚îÄ api.md\n‚îÇ   ‚îî‚îÄ‚îÄ user_guide.md\n‚îÇ\n‚îú‚îÄ‚îÄ tests/                # Test files\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ test_models.py\n‚îÇ   ‚îú‚îÄ‚îÄ test_services.py\n‚îÇ   ‚îî‚îÄ‚îÄ test_utils.py\n‚îÇ\n‚îú‚îÄ‚îÄ src/                  # Source code\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îú‚îÄ‚îÄ models/           # Data models\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îú‚îÄ‚îÄ services/         # Business logic\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_service.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îú‚îÄ‚îÄ repositories/     # Data access\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_repo.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ post_repo.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îú‚îÄ‚îÄ api/              # API endpoints\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middleware.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îú‚îÄ‚îÄ utils/            # Utility functions\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.py\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.py\n‚îÇ   ‚îÇ\n‚îÇ   ‚îî‚îÄ‚îÄ config.py         # Configuration\n‚îÇ\n‚îî‚îÄ‚îÄ scripts/              # Utility scripts\n    ‚îú‚îÄ‚îÄ setup_db.py\n    ‚îî‚îÄ‚îÄ seed_data.py\n\"\"\"\n\nprint(\"=== Example: Planning a Blog Application ===\")\n\n# Step 1: Define requirements\nrequirements = {\n    \"project_name\": \"Simple Blog\",\n    \"features\": [\n        \"User registration and authentication\",\n        \"Create, read, update, delete posts\",\n        \"Comment on posts\",\n        \"Search functionality\",\n        \"User profiles\"\n    ],\n    \"tech_stack\": {\n        \"backend\": \"Flask\",\n        \"database\": \"SQLite/PostgreSQL\",\n        \"authentication\": \"JWT\",\n        \"testing\": \"pytest\"\n    },\n    \"constraints\": [\n        \"Must be RESTful API\",\n        \"Must handle 100 concurrent users\",\n        \"Response time < 200ms\"\n    ]\n}\n\nprint(\"\\nüìã Project Requirements:\")\nprint(f\"Project: {requirements['project_name']}\")\nprint(f\"\\nFeatures:\")\nfor feature in requirements['features']:\n    print(f\"  - {feature}\")\n\nprint(f\"\\nTech Stack:\")\nfor key, value in requirements['tech_stack'].items():\n    print(f\"  {key}: {value}\")\n\n# Step 2: Design data models\nprint(\"\\n=== Data Models ===\")\n\nclass DesignDoc:\n    \"\"\"Documentation for data model design\"\"\"\n    \n    USER_MODEL = \"\"\"\n    User:\n      - id: int (primary key)\n      - username: str (unique, required)\n      - email: str (unique, required)\n      - password_hash: str (required)\n      - created_at: datetime\n      - updated_at: datetime\n      \n      Relationships:\n        - posts: one-to-many\n        - comments: one-to-many\n    \"\"\"\n    \n    POST_MODEL = \"\"\"\n    Post:\n      - id: int (primary key)\n      - title: str (required, max 200)\n      - content: text (required)\n      - author_id: int (foreign key -> User)\n      - created_at: datetime\n      - updated_at: datetime\n      \n      Relationships:\n        - author: many-to-one (User)\n        - comments: one-to-many\n    \"\"\"\n    \n    COMMENT_MODEL = \"\"\"\n    Comment:\n      - id: int (primary key)\n      - content: text (required)\n      - author_id: int (foreign key -> User)\n      - post_id: int (foreign key -> Post)\n      - created_at: datetime\n      \n      Relationships:\n        - author: many-to-one (User)\n        - post: many-to-one (Post)\n    \"\"\"\n\nprint(\"User Model:\")\nprint(DesignDoc.USER_MODEL)\n\nprint(\"\\nPost Model:\")\nprint(DesignDoc.POST_MODEL)\n\n# Step 3: Define API endpoints\nprint(\"\\n=== API Endpoints Design ===\")\n\napi_design = {\n    \"authentication\": [\n        {\"method\": \"POST\", \"path\": \"/api/auth/register\", \"description\": \"Register new user\"},\n        {\"method\": \"POST\", \"path\": \"/api/auth/login\", \"description\": \"Login user\"},\n        {\"method\": \"POST\", \"path\": \"/api/auth/logout\", \"description\": \"Logout user\"}\n    ],\n    \"posts\": [\n        {\"method\": \"GET\", \"path\": \"/api/posts\", \"description\": \"List all posts\"},\n        {\"method\": \"GET\", \"path\": \"/api/posts/{id}\", \"description\": \"Get single post\"},\n        {\"method\": \"POST\", \"path\": \"/api/posts\", \"description\": \"Create new post\"},\n        {\"method\": \"PUT\", \"path\": \"/api/posts/{id}\", \"description\": \"Update post\"},\n        {\"method\": \"DELETE\", \"path\": \"/api/posts/{id}\", \"description\": \"Delete post\"}\n    ],\n    \"comments\": [\n        {\"method\": \"GET\", \"path\": \"/api/posts/{id}/comments\", \"description\": \"Get post comments\"},\n        {\"method\": \"POST\", \"path\": \"/api/posts/{id}/comments\", \"description\": \"Add comment\"},\n        {\"method\": \"DELETE\", \"path\": \"/api/comments/{id}\", \"description\": \"Delete comment\"}\n    ]\n}\n\nfor category, endpoints in api_design.items():\n    print(f\"\\n{category.upper()}:\")\n    for endpoint in endpoints:\n        print(f\"  {endpoint['method']:6} {endpoint['path']:30} - {endpoint['description']}\")\n\n# Step 4: Architecture diagram (as text)\nprint(\"\\n=== System Architecture ===\")\n\narchitecture = \"\"\"\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Client    ‚îÇ  (Browser, Mobile App)\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n       ‚îÇ HTTP/HTTPS\n       ‚Üì\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ         API Layer               ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ\n‚îÇ  ‚îÇ  Routes & Middleware     ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Authentication        ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Validation            ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Error handling        ‚îÇ  ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n              ‚Üì\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ      Business Logic Layer       ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ\n‚îÇ  ‚îÇ  Services                ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Auth Service          ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Post Service          ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Comment Service       ‚îÇ  ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n              ‚Üì\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ      Data Access Layer          ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ\n‚îÇ  ‚îÇ  Repositories            ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - User Repo             ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Post Repo             ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - Comment Repo          ‚îÇ  ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n              ‚Üì\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ         Database                ‚îÇ\n‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ\n‚îÇ  ‚îÇ  SQLite / PostgreSQL     ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - users table           ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - posts table           ‚îÇ  ‚îÇ\n‚îÇ  ‚îÇ  - comments table        ‚îÇ  ‚îÇ\n‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\"\"\"\n\nprint(architecture)\n\nprint(\"\\n=== Design Principles ===\")\n\nprinciples = [\n    \"Separation of Concerns: Each layer has one responsibility\",\n    \"DRY (Don't Repeat Yourself): Reuse code through functions/classes\",\n    \"SOLID Principles: Single responsibility, Open/closed, etc.\",\n    \"Loose Coupling: Components don't depend tightly on each other\",\n    \"High Cohesion: Related functionality grouped together\",\n    \"Fail Fast: Validate early, catch errors quickly\",\n    \"Security First: Never trust user input, validate everything\"\n]\n\nfor i, principle in enumerate(principles, 1):\n    print(f\"{i}. {principle}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Syntax Breakdown: Configuration Management",
              "content": "**Managing configuration:**\n\n**1. Environment variables (.env file):**\n```bash\n# .env (NEVER commit this!)\nDATABASE_URL=postgresql://user:pass@localhost/db\nSECRET_KEY=your-secret-key-here\nDEBUG=True\n```\n\n**2. Config file (config.py):**\n```python\nimport os\nfrom dotenv import load_dotenv\n\nload_dotenv()  # Load .env file\n\nclass Config:\n    SECRET_KEY = os.getenv('SECRET_KEY')\n    DATABASE_URL = os.getenv('DATABASE_URL')\n    DEBUG = os.getenv('DEBUG', 'False') == 'True'\n    \nclass DevelopmentConfig(Config):\n    DEBUG = True\n    DATABASE_URL = 'sqlite:///dev.db'\n    \nclass ProductionConfig(Config):\n    DEBUG = False\n    # Production database from environment\n    \nconfig = {\n    'development': DevelopmentConfig,\n    'production': ProductionConfig,\n    'default': DevelopmentConfig\n}\n```\n\n**3. requirements.txt:**\n```\nFlask==3.0.0\nSQLAlchemy==2.0.0\npython-dotenv==1.0.0\npytest==7.4.0\n```\n\n**Install dependencies:**\n```bash\npip install -r requirements.txt\n```\n\n**4. .gitignore:**\n```\n# Environment\n.env\nvenv/\n__pycache__/\n\n# Database\n*.db\n*.sqlite\n\n# IDE\n.vscode/\n.idea/\n\n# OS\n.DS_Store\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Implementing Layered Architecture",
              "content": "**Layered architecture explained:**\n\n**1. Models (Data structures):**\n- Plain data classes\n- No business logic\n- Just hold data\n\n**2. Repositories (Data access):**\n- CRUD operations only\n- Talks to database\n- No validation or business rules\n\n**3. Services (Business logic):**\n- Validation\n- Business rules\n- Uses repositories\n- Coordinates multiple operations\n\n**4. API/Controllers (HTTP layer):**\n- Handle requests/responses\n- Call services\n- No business logic\n\n**Benefits:**\n- Testable: Mock each layer\n- Maintainable: Change one layer without affecting others\n- Reusable: Services used by API, CLI, tests, etc.\n- Clear responsibilities",
              "code": "# Example: Implementing a simple blog with layered architecture\n\nfrom typing import List, Optional, Dict\nfrom dataclasses import dataclass\nfrom datetime import datetime\n\nprint(\"=== Layer 1: Data Models ===\")\n\n@dataclass\nclass User:\n    \"\"\"User data model\"\"\"\n    id: int\n    username: str\n    email: str\n    created_at: datetime\n\n@dataclass\nclass Post:\n    \"\"\"Post data model\"\"\"\n    id: int\n    title: str\n    content: str\n    author_id: int\n    created_at: datetime\n    \nprint(\"‚úì Models defined\")\n\nprint(\"\\n=== Layer 2: Repository Layer (Data Access) ===\")\n\nclass UserRepository:\n    \"\"\"Handles all database operations for users\"\"\"\n    \n    def __init__(self):\n        # In real app, this would be database connection\n        self._users: Dict[int, User] = {}\n        self._next_id = 1\n    \n    def create(self, username: str, email: str) -> User:\n        \"\"\"Create new user\"\"\"\n        user = User(\n            id=self._next_id,\n            username=username,\n            email=email,\n            created_at=datetime.now()\n        )\n        self._users[user.id] = user\n        self._next_id += 1\n        return user\n    \n    def find_by_id(self, user_id: int) -> Optional[User]:\n        \"\"\"Find user by ID\"\"\"\n        return self._users.get(user_id)\n    \n    def find_by_username(self, username: str) -> Optional[User]:\n        \"\"\"Find user by username\"\"\"\n        for user in self._users.values():\n            if user.username == username:\n                return user\n        return None\n    \n    def list_all(self) -> List[User]:\n        \"\"\"List all users\"\"\"\n        return list(self._users.values())\n\nclass PostRepository:\n    \"\"\"Handles all database operations for posts\"\"\"\n    \n    def __init__(self):\n        self._posts: Dict[int, Post] = {}\n        self._next_id = 1\n    \n    def create(self, title: str, content: str, author_id: int) -> Post:\n        \"\"\"Create new post\"\"\"\n        post = Post(\n            id=self._next_id,\n            title=title,\n            content=content,\n            author_id=author_id,\n            created_at=datetime.now()\n        )\n        self._posts[post.id] = post\n        self._next_id += 1\n        return post\n    \n    def find_by_id(self, post_id: int) -> Optional[Post]:\n        \"\"\"Find post by ID\"\"\"\n        return self._posts.get(post_id)\n    \n    def find_by_author(self, author_id: int) -> List[Post]:\n        \"\"\"Find all posts by author\"\"\"\n        return [\n            post for post in self._posts.values()\n            if post.author_id == author_id\n        ]\n    \n    def list_all(self) -> List[Post]:\n        \"\"\"List all posts\"\"\"\n        return list(self._posts.values())\n    \n    def delete(self, post_id: int) -> bool:\n        \"\"\"Delete post\"\"\"\n        if post_id in self._posts:\n            del self._posts[post_id]\n            return True\n        return False\n\nprint(\"‚úì Repositories defined\")\n\nprint(\"\\n=== Layer 3: Service Layer (Business Logic) ===\")\n\nclass UserService:\n    \"\"\"Business logic for user operations\"\"\"\n    \n    def __init__(self, user_repo: UserRepository):\n        self.user_repo = user_repo\n    \n    def register_user(self, username: str, email: str) -> Dict:\n        \"\"\"Register new user with validation\"\"\"\n        # Validation\n        if len(username) < 3:\n            return {\"error\": \"Username must be at least 3 characters\"}\n        \n        if '@' not in email:\n            return {\"error\": \"Invalid email format\"}\n        \n        # Check if username exists\n        if self.user_repo.find_by_username(username):\n            return {\"error\": \"Username already taken\"}\n        \n        # Create user\n        user = self.user_repo.create(username, email)\n        \n        return {\n            \"success\": True,\n            \"user\": {\n                \"id\": user.id,\n                \"username\": user.username,\n                \"email\": user.email\n            }\n        }\n    \n    def get_user_profile(self, user_id: int) -> Optional[Dict]:\n        \"\"\"Get user profile\"\"\"\n        user = self.user_repo.find_by_id(user_id)\n        if not user:\n            return None\n        \n        return {\n            \"id\": user.id,\n            \"username\": user.username,\n            \"email\": user.email,\n            \"member_since\": user.created_at.strftime(\"%Y-%m-%d\")\n        }\n\nclass PostService:\n    \"\"\"Business logic for post operations\"\"\"\n    \n    def __init__(self, post_repo: PostRepository, user_repo: UserRepository):\n        self.post_repo = post_repo\n        self.user_repo = user_repo\n    \n    def create_post(self, title: str, content: str, author_id: int) -> Dict:\n        \"\"\"Create new post with validation\"\"\"\n        # Validation\n        if len(title) < 5:\n            return {\"error\": \"Title must be at least 5 characters\"}\n        \n        if len(content) < 10:\n            return {\"error\": \"Content must be at least 10 characters\"}\n        \n        # Verify author exists\n        if not self.user_repo.find_by_id(author_id):\n            return {\"error\": \"Author not found\"}\n        \n        # Create post\n        post = self.post_repo.create(title, content, author_id)\n        \n        return {\n            \"success\": True,\n            \"post\": {\n                \"id\": post.id,\n                \"title\": post.title,\n                \"content\": post.content,\n                \"author_id\": post.author_id\n            }\n        }\n    \n    def get_post_with_author(self, post_id: int) -> Optional[Dict]:\n        \"\"\"Get post with author information\"\"\"\n        post = self.post_repo.find_by_id(post_id)\n        if not post:\n            return None\n        \n        author = self.user_repo.find_by_id(post.author_id)\n        \n        return {\n            \"id\": post.id,\n            \"title\": post.title,\n            \"content\": post.content,\n            \"author\": {\n                \"id\": author.id,\n                \"username\": author.username\n            } if author else None,\n            \"created_at\": post.created_at.strftime(\"%Y-%m-%d %H:%M\")\n        }\n    \n    def get_user_posts(self, user_id: int) -> List[Dict]:\n        \"\"\"Get all posts by a user\"\"\"\n        posts = self.post_repo.find_by_author(user_id)\n        return [\n            {\n                \"id\": post.id,\n                \"title\": post.title,\n                \"content\": post.content[:100] + \"...\"\n            }\n            for post in posts\n        ]\n\nprint(\"‚úì Services defined\")\n\nprint(\"\\n=== Testing the Architecture ===\")\n\n# Initialize layers\nuser_repo = UserRepository()\npost_repo = PostRepository()\n\nuser_service = UserService(user_repo)\npost_service = PostService(post_repo, user_repo)\n\n# Test user registration\nprint(\"\\n1. Registering users...\")\nresult1 = user_service.register_user(\"alice\", \"alice@example.com\")\nprint(f\"   Alice: {result1}\")\n\nresult2 = user_service.register_user(\"bob\", \"bob@example.com\")\nprint(f\"   Bob: {result2}\")\n\n# Test validation\nresult3 = user_service.register_user(\"ab\", \"invalid\")\nprint(f\"   Invalid: {result3}\")\n\n# Test duplicate username\nresult4 = user_service.register_user(\"alice\", \"alice2@example.com\")\nprint(f\"   Duplicate: {result4}\")\n\n# Create posts\nprint(\"\\n2. Creating posts...\")\npost1 = post_service.create_post(\n    \"My First Post\",\n    \"This is the content of my first blog post. Hello world!\",\n    1  # Alice's ID\n)\nprint(f\"   Post 1: {post1}\")\n\npost2 = post_service.create_post(\n    \"Python Tips\",\n    \"Here are some great Python tips for beginners and experts alike.\",\n    1  # Alice's ID\n)\nprint(f\"   Post 2: {post2}\")\n\npost3 = post_service.create_post(\n    \"Hello from Bob\",\n    \"Bob's first post on this awesome platform!\",\n    2  # Bob's ID\n)\nprint(f\"   Post 3: {post3}\")\n\n# Get post with author\nprint(\"\\n3. Fetching post with author info...\")\npost_detail = post_service.get_post_with_author(1)\nprint(f\"   Post: {post_detail['title']}\")\nprint(f\"   Author: {post_detail['author']['username']}\")\nprint(f\"   Created: {post_detail['created_at']}\")\n\n# Get user's posts\nprint(\"\\n4. Getting Alice's posts...\")\nalice_posts = post_service.get_user_posts(1)\nprint(f\"   Alice has {len(alice_posts)} posts:\")\nfor post in alice_posts:\n    print(f\"     - {post['title']}\")\n\n# Get user profile\nprint(\"\\n5. Getting user profile...\")\nprofile = user_service.get_user_profile(1)\nprint(f\"   Username: {profile['username']}\")\nprint(f\"   Email: {profile['email']}\")\nprint(f\"   Member since: {profile['member_since']}\")\n\nprint(\"\\n=== Architecture Benefits ===\")\nbenefits = [\n    \"‚úì Each layer has single responsibility\",\n    \"‚úì Business logic separated from data access\",\n    \"‚úì Easy to test each layer independently\",\n    \"‚úì Can swap repositories (e.g., in-memory -> database)\",\n    \"‚úì Validation centralized in services\",\n    \"‚úì Clear data flow: API ‚Üí Service ‚Üí Repository ‚Üí Database\"\n]\n\nfor benefit in benefits:\n    print(benefit)",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Plan before coding** - Hours of planning save weeks of debugging\n- **Layered architecture** - Models ‚Üí Repositories ‚Üí Services ‚Üí API\n- **Separation of concerns** - Each layer has one responsibility\n- **Repository pattern** - Isolate data access from business logic\n- **Service layer** - Centralize validation and business rules\n- **Configuration management** - Use .env files, never commit secrets\n- **Project structure** - Organize code logically (src/, tests/, docs/)\n- **Design principles** - DRY, SOLID, loose coupling, high cohesion"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-01-challenge-4",
              "title": "Interactive Exercise",
              "description": "Design a simple Task Management System:\n1. Define the data models (Task, User)\n2. Plan the API endpoints\n3. Create a basic repository and service layer\n4. Implement create and list operations",
              "instructions": "Design a simple Task Management System:\n1. Define the data models (Task, User)\n2. Plan the API endpoints\n3. Create a basic repository and service layer\n4. Implement create and list operations",
              "starterCode": "from typing import List, Optional, Dict\nfrom dataclasses import dataclass\nfrom datetime import datetime\n\n# TODO: Define Task model\n# Fields: id, title, description, completed, user_id, created_at\n\n# TODO: Define TaskRepository\n# Methods: create, find_by_id, find_by_user, list_all, update_status\n\n# TODO: Define TaskService  \n# Methods: create_task, get_user_tasks, mark_completed\n# Include validation (title min 3 chars, description min 5 chars)\n\n# Test your implementation\nrepo = TaskRepository()\nservice = TaskService(repo)\n\n# Create tasks\nresult = service.create_task(\n    title=\"Learn Python\",\n    description=\"Complete Module 14\",\n    user_id=1\n)\nprint(result)\n\n# List tasks\ntasks = service.get_user_tasks(1)\nfor task in tasks:\n    print(f\"- {task['title']}\")",
              "solution": "from typing import List, Optional, Dict\nfrom dataclasses import dataclass\nfrom datetime import datetime\n\n\n# Layer 1: Data Model\n@dataclass\nclass Task:\n    \"\"\"Task data model representing a single task.\n    \n    Attributes:\n        id: Unique identifier for the task\n        title: Brief title describing the task\n        description: Detailed description of the task\n        completed: Whether the task has been completed\n        user_id: ID of the user who owns this task\n        created_at: Timestamp when task was created\n    \"\"\"\n    id: int\n    title: str\n    description: str\n    completed: bool\n    user_id: int\n    created_at: datetime\n\n\n# Layer 2: Repository (Data Access Layer)\nclass TaskRepository:\n    \"\"\"Handles all database operations for tasks.\n    \n    This class provides CRUD operations for Task objects,\n    abstracting away the storage mechanism.\n    \"\"\"\n    \n    def __init__(self):\n        # In-memory storage (would be database in production)\n        self._tasks: Dict[int, Task] = {}\n        self._next_id = 1\n    \n    def create(self, title: str, description: str, user_id: int) -> Task:\n        \"\"\"Create a new task and store it.\"\"\"\n        task = Task(\n            id=self._next_id,\n            title=title,\n            description=description,\n            completed=False,\n            user_id=user_id,\n            created_at=datetime.now()\n        )\n        self._tasks[task.id] = task\n        self._next_id += 1\n        return task\n    \n    def find_by_id(self, task_id: int) -> Optional[Task]:\n        \"\"\"Find a task by its unique ID.\"\"\"\n        return self._tasks.get(task_id)\n    \n    def find_by_user(self, user_id: int) -> List[Task]:\n        \"\"\"Find all tasks belonging to a specific user.\"\"\"\n        return [\n            task for task in self._tasks.values()\n            if task.user_id == user_id\n        ]\n    \n    def list_all(self) -> List[Task]:\n        \"\"\"List all tasks in the repository.\"\"\"\n        return list(self._tasks.values())\n    \n    def update_status(self, task_id: int, completed: bool) -> Optional[Task]:\n        \"\"\"Update the completion status of a task.\"\"\"\n        task = self._tasks.get(task_id)\n        if task:\n            task.completed = completed\n            return task\n        return None\n    \n    def delete(self, task_id: int) -> bool:\n        \"\"\"Delete a task by ID. Returns True if deleted.\"\"\"\n        if task_id in self._tasks:\n            del self._tasks[task_id]\n            return True\n        return False\n\n\n# Layer 3: Service (Business Logic Layer)\nclass TaskService:\n    \"\"\"Business logic for task operations.\n    \n    This class contains validation rules and business logic,\n    using the repository for data persistence.\n    \"\"\"\n    \n    def __init__(self, task_repo: TaskRepository):\n        self.task_repo = task_repo\n    \n    def create_task(self, title: str, description: str, user_id: int) -> Dict:\n        \"\"\"Create a new task with validation.\n        \n        Args:\n            title: Task title (min 3 characters)\n            description: Task description (min 5 characters)\n            user_id: ID of the task owner\n        \n        Returns:\n            Dict with success status and task details or error message\n        \"\"\"\n        # Validate title length\n        if len(title) < 3:\n            return {'error': 'Title must be at least 3 characters'}\n        \n        # Validate description length\n        if len(description) < 5:\n            return {'error': 'Description must be at least 5 characters'}\n        \n        # Validate user_id is positive\n        if user_id <= 0:\n            return {'error': 'Invalid user ID'}\n        \n        # Create the task\n        task = self.task_repo.create(title, description, user_id)\n        \n        return {\n            'success': True,\n            'task': {\n                'id': task.id,\n                'title': task.title,\n                'description': task.description,\n                'completed': task.completed,\n                'created_at': task.created_at.isoformat()\n            }\n        }\n    \n    def get_user_tasks(self, user_id: int) -> List[Dict]:\n        \"\"\"Get all tasks for a specific user.\"\"\"\n        tasks = self.task_repo.find_by_user(user_id)\n        return [\n            {\n                'id': task.id,\n                'title': task.title,\n                'description': task.description,\n                'completed': task.completed,\n                'created_at': task.created_at.isoformat()\n            }\n            for task in tasks\n        ]\n    \n    def mark_completed(self, task_id: int, user_id: int) -> Dict:\n        \"\"\"Mark a task as completed.\n        \n        Args:\n            task_id: ID of the task to complete\n            user_id: ID of the user (for authorization)\n        \n        Returns:\n            Dict with success status or error message\n        \"\"\"\n        task = self.task_repo.find_by_id(task_id)\n        \n        if not task:\n            return {'error': 'Task not found'}\n        \n        # Check authorization\n        if task.user_id != user_id:\n            return {'error': 'Not authorized to modify this task'}\n        \n        updated_task = self.task_repo.update_status(task_id, True)\n        \n        return {\n            'success': True,\n            'message': f\"Task '{updated_task.title}' marked as completed\"\n        }\n    \n    def get_task_stats(self, user_id: int) -> Dict:\n        \"\"\"Get task statistics for a user.\"\"\"\n        tasks = self.task_repo.find_by_user(user_id)\n        completed = sum(1 for t in tasks if t.completed)\n        pending = len(tasks) - completed\n        \n        return {\n            'total': len(tasks),\n            'completed': completed,\n            'pending': pending,\n            'completion_rate': round(completed / len(tasks) * 100, 1) if tasks else 0\n        }\n\n\n# Test the implementation\nprint('=== Task Management System ===')\n\n# Initialize layers\nrepo = TaskRepository()\nservice = TaskService(repo)\n\n# Create tasks\nprint('\\n1. Creating tasks...')\nresult = service.create_task(\n    title='Learn Python',\n    description='Complete Module 14',\n    user_id=1\n)\nprint(f\"   Task 1: {result}\")\n\nresult = service.create_task(\n    title='Build API',\n    description='Create REST API with Flask',\n    user_id=1\n)\nprint(f\"   Task 2: {result}\")\n\nresult = service.create_task(\n    title='Write Tests',\n    description='Add pytest tests for all endpoints',\n    user_id=1\n)\nprint(f\"   Task 3: {result}\")\n\n# Test validation\nprint('\\n2. Testing validation...')\nresult = service.create_task('Hi', 'Short', 1)  # Title too short\nprint(f\"   Invalid title: {result}\")\n\n# List tasks\nprint('\\n3. User tasks:')\ntasks = service.get_user_tasks(1)\nfor task in tasks:\n    status = 'Done' if task['completed'] else 'Pending'\n    print(f\"   - [{status}] {task['title']}\")\n\n# Mark task as completed\nprint('\\n4. Completing a task...')\nresult = service.mark_completed(1, 1)\nprint(f\"   {result}\")\n\n# Get statistics\nprint('\\n5. Task statistics:')\nstats = service.get_task_stats(1)\nprint(f\"   Total: {stats['total']}, Completed: {stats['completed']}, Pending: {stats['pending']}\")\nprint(f\"   Completion rate: {stats['completion_rate']}%\")",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use @dataclass for models. Repository handles storage (dict). Service handles validation and business logic."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-15-lesson-02",
          "title": "Version Control with Git",
          "moduleId": "module-15",
          "order": 2,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Time Machine for Code",
              "content": "**Git = Save points for your code**\n\n**Think of a video game:**\n- Save your progress before boss fight\n- Try different strategies\n- Go back if you fail\n- Keep multiple save files\n\n**Git does this for code!**\n\n**Key concepts:**\n\n1. **Repository (repo)** üìÅ\n   - Project folder with Git tracking\n   - Contains all history\n   - Local (your computer) + Remote (GitHub)\n\n2. **Commit** üíæ\n   - Save point in history\n   - Snapshot of all files\n   - Has message describing changes\n   - Permanent record\n\n3. **Branch** üå≥\n   - Parallel version of code\n   - Experiment without breaking main code\n   - Merge back when ready\n   - main/master = production code\n\n4. **Merge** üîÄ\n   - Combine branches\n   - Integrate features\n   - May have conflicts to resolve\n\n5. **Pull Request (PR)** ü§ù\n   - Request to merge your changes\n   - Code review\n   - Discussion before merging\n   - Quality control\n\n**Basic workflow:**\n```\n1. Clone repo (copy to your computer)\n2. Create branch (new feature)\n3. Make changes\n4. Commit changes (save point)\n5. Push to GitHub (backup)\n6. Create Pull Request\n7. Review + Merge\n```\n\n**Why use Git:**\n- Track every change ever made\n- Collaborate without overwriting others\n- Experiment safely\n- Revert mistakes\n- Required for professional development"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Git Basics",
              "content": "**Git workflow stages:**\n\n```\nWorking Directory  ‚Üí  Staging Area  ‚Üí  Repository\n   (changes)          (git add)         (git commit)\n```\n\n**Branch strategy:**\n```\nmain          ‚óã‚îÄ‚îÄ‚óã‚îÄ‚îÄ‚óã‚îÄ‚îÄ‚óã‚îÄ‚îÄ‚óã\n               \\      /\nfeature         ‚óã‚îÄ‚îÄ‚óã‚îÄ‚îÄ‚óã\n```\n\n**Commit message format:**\n```\nShort summary (50 chars max)\n\nLonger description if needed.\nExplain WHY, not what.\n```\n\n**Good commit messages:**\n- \"Add user authentication with JWT\"\n- \"Fix null pointer error in login\"\n- \"Refactor database queries for performance\"\n\n**Bad commit messages:**\n- \"Fix bug\"\n- \"Update\"\n- \"WIP\"\n- \"asdfghjkl\"",
              "code": "# Git commands demonstration (as comments)\n# Run these in your terminal, not Python\n\nprint(\"=== Git Setup (One-time) ===\")\n\"\"\"\n# Configure your identity\ngit config --global user.name \"Your Name\"\ngit config --global user.email \"your.email@example.com\"\n\n# Check configuration\ngit config --list\n\"\"\"\n\nprint(\"\\n=== Creating a Repository ===\")\n\"\"\"\n# Method 1: Start new project\nmkdir my-project\ncd my-project\ngit init\n# Creates .git folder (hidden)\n\n# Method 2: Clone existing\ngit clone https://github.com/username/repo.git\ncd repo\n\"\"\"\n\nprint(\"\\n=== Basic Workflow ===\")\n\"\"\"\n# 1. Check status\ngit status\n# Shows: modified files, staged files, branch\n\n# 2. Stage files (prepare for commit)\ngit add file.py          # Specific file\ngit add .                # All files\ngit add *.py             # All Python files\n\n# 3. Commit changes\ngit commit -m \"Add user authentication\"\n# -m = message describing what changed\n\n# 4. View history\ngit log\ngit log --oneline        # Condensed view\ngit log --graph          # Visual branch graph\n\n# 5. Push to remote (GitHub)\ngit push origin main\n# origin = remote name (default)\n# main = branch name\n\"\"\"\n\nprint(\"\\n=== Working with Branches ===\")\n\"\"\"\n# Create new branch\ngit branch feature/login        # Create\ngit checkout feature/login      # Switch to it\n# Or combined:\ngit checkout -b feature/login   # Create + switch\n\n# List branches\ngit branch                      # Local branches\ngit branch -a                   # All (including remote)\n\n# Switch branches\ngit checkout main\ngit checkout feature/login\n\n# Delete branch\ngit branch -d feature/login     # Safe delete (merged only)\ngit branch -D feature/login     # Force delete\n\"\"\"\n\nprint(\"\\n=== Merging Branches ===\")\n\"\"\"\n# Merge feature into main\ngit checkout main               # Switch to main\ngit merge feature/login         # Merge feature in\n\n# If conflicts occur:\n# 1. Git marks conflicts in files:\n#    <<<<<<< HEAD\n#    code from main\n#    =======\n#    code from feature\n#    >>>>>>> feature/login\n#\n# 2. Manually resolve (edit file)\n# 3. Stage resolved files\n#    git add conflicted-file.py\n# 4. Commit the merge\n#    git commit -m \"Merge feature/login\"\n\"\"\"\n\nprint(\"\\n=== Undoing Changes ===\")\n\"\"\"\n# Discard changes in working directory\ngit checkout -- file.py         # Restore from last commit\n\n# Unstage files (undo git add)\ngit reset HEAD file.py\n\n# Undo last commit (keep changes)\ngit reset --soft HEAD~1\n\n# Undo last commit (discard changes)\ngit reset --hard HEAD~1\n# WARNING: Can't recover discarded changes!\n\n# Create new commit that undoes a previous commit\ngit revert <commit-hash>\n# Safer than reset, keeps history\n\"\"\"\n\nprint(\"\\n=== Remote Operations ===\")\n\"\"\"\n# View remotes\ngit remote -v\n\n# Add remote\ngit remote add origin https://github.com/username/repo.git\n\n# Fetch changes (download, don't merge)\ngit fetch origin\n\n# Pull changes (fetch + merge)\ngit pull origin main\n# Equivalent to:\n#   git fetch origin\n#   git merge origin/main\n\n# Push branch to remote\ngit push -u origin feature/login\n# -u sets upstream tracking\n# After this, just: git push\n\"\"\"\n\nprint(\"\\n=== .gitignore File ===\")\n\"\"\"\n# Create .gitignore in project root\n# Lists files/folders Git should ignore\n\nExample .gitignore:\n```\n# Environment\n.env\nvenv/\n__pycache__/\n*.pyc\n\n# IDE\n.vscode/\n.idea/\n*.swp\n\n# Database\n*.db\n*.sqlite\n\n# OS\n.DS_Store\nThumbs.db\n\n# Logs\n*.log\n```\n\"\"\"\n\nprint(\"\\n=== Common Git Scenarios ===\")\n\n# Scenario demonstrations\nscenarios = [\n    {\n        \"title\": \"Start new feature\",\n        \"commands\": [\n            \"git checkout main\",\n            \"git pull origin main\",\n            \"git checkout -b feature/new-api\",\n            \"# Make changes...\",\n            \"git add .\",\n            \"git commit -m 'Add new API endpoint'\",\n            \"git push -u origin feature/new-api\"\n        ]\n    },\n    {\n        \"title\": \"Fix a bug\",\n        \"commands\": [\n            \"git checkout main\",\n            \"git checkout -b bugfix/login-error\",\n            \"# Fix the bug...\",\n            \"git add file.py\",\n            \"git commit -m 'Fix login validation error'\",\n            \"git push -u origin bugfix/login-error\"\n        ]\n    },\n    {\n        \"title\": \"Update from main\",\n        \"commands\": [\n            \"git checkout feature/my-branch\",\n            \"git fetch origin\",\n            \"git merge origin/main\",\n            \"# Resolve any conflicts...\",\n            \"git push\"\n        ]\n    }\n]\n\nfor scenario in scenarios:\n    print(f\"\\n{scenario['title']}:\")\n    for cmd in scenario['commands']:\n        if cmd.startswith('#'):\n            print(f\"  {cmd}\")\n        else:\n            print(f\"  $ {cmd}\")\n\nprint(\"\\n=== Git Best Practices ===\")\n\nbest_practices = [\n    \"‚úì Commit often, push daily\",\n    \"‚úì Write clear commit messages\",\n    \"‚úì One feature = one branch\",\n    \"‚úì Pull before you push\",\n    \"‚úì Never commit secrets (.env, passwords)\",\n    \"‚úì Keep commits focused (one logical change)\",\n    \"‚úì Review changes before committing (git diff)\",\n    \"‚úì Use branches for experiments\",\n    \"‚úì Delete merged branches\",\n    \"‚úì Don't rewrite public history (main branch)\"\n]\n\nfor practice in best_practices:\n    print(practice)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "GitHub Workflow",
              "content": "**GitHub = Remote Git hosting + collaboration tools**\n\n**Key features:**\n\n**1. Pull Requests (PRs)**\n- Propose changes\n- Code review\n- Discussion\n- CI/CD checks\n\n**2. Issues**\n- Bug reports\n- Feature requests\n- Task tracking\n- Discussion\n\n**3. Forking**\n- Copy someone's repo\n- Make your changes\n- Contribute back via PR\n\n**Standard workflow:**\n\n```\n1. Fork repo (your copy on GitHub)\n2. Clone fork to your computer\n3. Create feature branch\n4. Make changes + commit\n5. Push to your fork\n6. Open Pull Request\n7. Address review comments\n8. PR gets merged\n9. Delete branch\n```\n\n**Pull Request description template:**\n```markdown\n## What\nBrief description of changes\n\n## Why  \nWhy this change is needed\n\n## How\nHow it was implemented\n\n## Testing\nHow to test these changes\n\n## Screenshots\n(if UI changes)\n```\n\n**Code review etiquette:**\n- Be respectful and constructive\n- Ask questions, don't demand\n- Praise good code\n- Suggest, don't command\n- Focus on code, not person"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Python Git Automation",
              "content": "**Python + Git integration:**\n\n**Using subprocess:**\n```python\nimport subprocess\n\nresult = subprocess.run(\n    ['git', 'status'],\n    capture_output=True,\n    text=True\n)\nprint(result.stdout)\n```\n\n**Git hooks:**\n- Scripts that run on Git events\n- Located in `.git/hooks/`\n- Can prevent commits/pushes\n\n**Common hooks:**\n- `pre-commit`: Before commit\n- `commit-msg`: Validate commit message\n- `pre-push`: Before push\n- `post-commit`: After commit\n\n**Use cases:**\n- Run tests before commit\n- Check code style\n- Prevent committing secrets\n- Generate documentation\n- Notify team members",
              "code": "import subprocess\nimport os\nfrom pathlib import Path\nfrom typing import List, Optional\n\nprint(\"=== Git Automation with Python ===\")\n\nclass GitHelper:\n    \"\"\"Helper class for Git operations via Python\"\"\"\n    \n    def __init__(self, repo_path: str = \".\"):\n        self.repo_path = Path(repo_path)\n    \n    def run_command(self, command: List[str]) -> tuple:\n        \"\"\"Run git command and return output\"\"\"\n        try:\n            result = subprocess.run(\n                command,\n                cwd=self.repo_path,\n                capture_output=True,\n                text=True,\n                check=True\n            )\n            return True, result.stdout.strip()\n        except subprocess.CalledProcessError as e:\n            return False, e.stderr.strip()\n    \n    def get_status(self) -> str:\n        \"\"\"Get git status\"\"\"\n        success, output = self.run_command([\"git\", \"status\", \"--short\"])\n        return output if success else \"Error getting status\"\n    \n    def get_current_branch(self) -> str:\n        \"\"\"Get current branch name\"\"\"\n        success, output = self.run_command([\"git\", \"branch\", \"--show-current\"])\n        return output if success else \"unknown\"\n    \n    def get_last_commit(self) -> str:\n        \"\"\"Get last commit message\"\"\"\n        success, output = self.run_command(\n            [\"git\", \"log\", \"-1\", \"--pretty=format:%h - %s\"]\n        )\n        return output if success else \"No commits\"\n    \n    def list_branches(self) -> List[str]:\n        \"\"\"List all local branches\"\"\"\n        success, output = self.run_command([\"git\", \"branch\"])\n        if not success:\n            return []\n        \n        branches = [\n            line.strip().replace(\"* \", \"\")\n            for line in output.split(\"\\n\")\n            if line.strip()\n        ]\n        return branches\n    \n    def create_branch(self, branch_name: str) -> bool:\n        \"\"\"Create new branch\"\"\"\n        success, _ = self.run_command([\"git\", \"checkout\", \"-b\", branch_name])\n        return success\n    \n    def switch_branch(self, branch_name: str) -> bool:\n        \"\"\"Switch to existing branch\"\"\"\n        success, _ = self.run_command([\"git\", \"checkout\", branch_name])\n        return success\n    \n    def add_files(self, files: str = \".\") -> bool:\n        \"\"\"Stage files for commit\"\"\"\n        success, _ = self.run_command([\"git\", \"add\", files])\n        return success\n    \n    def commit(self, message: str) -> bool:\n        \"\"\"Commit staged changes\"\"\"\n        success, _ = self.run_command([\"git\", \"commit\", \"-m\", message])\n        return success\n    \n    def push(self, remote: str = \"origin\", branch: Optional[str] = None) -> bool:\n        \"\"\"Push to remote\"\"\"\n        if branch is None:\n            branch = self.get_current_branch()\n        \n        success, _ = self.run_command([\"git\", \"push\", remote, branch])\n        return success\n    \n    def pull(self, remote: str = \"origin\", branch: Optional[str] = None) -> bool:\n        \"\"\"Pull from remote\"\"\"\n        if branch is None:\n            branch = self.get_current_branch()\n        \n        success, _ = self.run_command([\"git\", \"pull\", remote, branch])\n        return success\n    \n    def get_modified_files(self) -> List[str]:\n        \"\"\"Get list of modified files\"\"\"\n        success, output = self.run_command([\"git\", \"diff\", \"--name-only\"])\n        if not success or not output:\n            return []\n        \n        return output.split(\"\\n\")\n    \n    def get_commit_count(self) -> int:\n        \"\"\"Get total commit count\"\"\"\n        success, output = self.run_command([\"git\", \"rev-list\", \"--count\", \"HEAD\"])\n        if success and output.isdigit():\n            return int(output)\n        return 0\n\nprint(\"\\n=== Using Git Helper ===\")\n\n# Note: This would work in a real Git repository\n# For demonstration, we'll show the usage pattern\n\nprint(\"\\nExample usage:\")\nprint(\"\"\"\ngit = GitHelper()\n\n# Check status\nstatus = git.get_status()\nprint(f\"Status: {status}\")\n\n# Get current branch\nbranch = git.get_current_branch()\nprint(f\"Current branch: {branch}\")\n\n# Create and switch to feature branch\nif git.create_branch('feature/new-feature'):\n    print(\"Branch created successfully\")\n\n# Make some changes to files...\n\n# Stage and commit\nif git.add_files('.'):\n    if git.commit('Add new feature'):\n        print(\"Changes committed\")\n\n# Push to remote\nif git.push():\n    print(\"Pushed to remote\")\n\n# List all branches\nbranches = git.list_branches()\nprint(f\"Branches: {branches}\")\n\n# Get commit count\ncount = git.get_commit_count()\nprint(f\"Total commits: {count}\")\n\"\"\")\n\nprint(\"\\n=== Pre-commit Hook Example ===\")\n\n# Example pre-commit hook script\npre_commit_hook = '''\n#!/usr/bin/env python3\n\"\"\"Pre-commit hook: Run checks before allowing commit\"\"\"\n\nimport subprocess\nimport sys\n\ndef run_tests():\n    \"\"\"Run test suite\"\"\"\n    result = subprocess.run(['pytest', 'tests/'], capture_output=True)\n    return result.returncode == 0\n\ndef check_code_style():\n    \"\"\"Check Python code style with flake8\"\"\"\n    result = subprocess.run(['flake8', '.'], capture_output=True)\n    return result.returncode == 0\n\ndef check_no_debug_prints():\n    \"\"\"Ensure no print() statements in production code\"\"\"\n    result = subprocess.run(\n        ['git', 'diff', '--cached', '--name-only'],\n        capture_output=True,\n        text=True\n    )\n    \n    for file in result.stdout.split():\n        if file.endswith('.py') and 'test' not in file:\n            with open(file) as f:\n                if 'print(' in f.read():\n                    print(f\"‚ùå Debug print() found in {file}\")\n                    return False\n    return True\n\nif __name__ == '__main__':\n    print(\"Running pre-commit checks...\")\n    \n    checks = [\n        (\"Tests\", run_tests),\n        (\"Code style\", check_code_style),\n        (\"No debug prints\", check_no_debug_prints)\n    ]\n    \n    for name, check_func in checks:\n        print(f\"Checking {name}...\", end=\" \")\n        if check_func():\n            print(\"‚úì\")\n        else:\n            print(\"‚úó\")\n            print(f\"\\n‚ùå {name} check failed. Commit aborted.\")\n            sys.exit(1)\n    \n    print(\"\\n‚úì All checks passed. Committing...\")\n    sys.exit(0)\n'''\n\nprint(\"Pre-commit hook script:\")\nprint(pre_commit_hook)\n\nprint(\"\\n=== Git Statistics Script ===\")\n\nstat_script = '''\nimport subprocess\nfrom collections import Counter\n\ndef get_git_stats():\n    \"\"\"Generate repository statistics\"\"\"\n    \n    # Total commits\n    result = subprocess.run(\n        ['git', 'rev-list', '--count', 'HEAD'],\n        capture_output=True,\n        text=True\n    )\n    total_commits = result.stdout.strip()\n    \n    # Contributors\n    result = subprocess.run(\n        ['git', 'shortlog', '-sn', '--all'],\n        capture_output=True,\n        text=True\n    )\n    contributors = result.stdout.strip().split('\\\\n')\n    \n    # Lines of code\n    result = subprocess.run(\n        ['git', 'ls-files'],\n        capture_output=True,\n        text=True\n    )\n    files = result.stdout.strip().split('\\\\n')\n    \n    print(f\"Total commits: {total_commits}\")\n    print(f\"Total files: {len(files)}\")\n    print(f\"\\\\nTop contributors:\")\n    for contributor in contributors[:5]:\n        print(f\"  {contributor}\")\n\nget_git_stats()\n'''\n\nprint(\"Git statistics script:\")\nprint(stat_script)",
              "language": "python"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Git tracks all changes** - Every commit is a save point in history\n- **Branches = safe experimentation** - Work on features without breaking main\n- **Commit often, push daily** - Small, focused commits are better\n- **Write clear commit messages** - Future you will thank you\n- **Pull before push** - Always sync with remote first\n- **Never commit secrets** - Use .gitignore for .env, passwords, keys\n- **GitHub = collaboration platform** - Pull requests enable code review\n- **Python + Git** - Automate Git operations with subprocess module"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-02-challenge-4",
              "title": "Interactive Exercise",
              "description": "Create a Python script that:\n1. Checks if you're in a Git repository\n2. Shows current branch and status\n3. Lists uncommitted changes\n4. Prompts to create a commit with validation\n5. Handles errors gracefully",
              "instructions": "Create a Python script that:\n1. Checks if you're in a Git repository\n2. Shows current branch and status\n3. Lists uncommitted changes\n4. Prompts to create a commit with validation\n5. Handles errors gracefully",
              "starterCode": "import subprocess\nfrom typing import Optional\n\nclass GitCommitHelper:\n    def is_git_repo(self) -> bool:\n        # TODO: Check if current directory is Git repo\n        # Hint: Run 'git rev-parse --is-inside-work-tree'\n        pass\n    \n    def get_status(self) -> str:\n        # TODO: Get git status\n        pass\n    \n    def get_branch(self) -> str:\n        # TODO: Get current branch name\n        pass\n    \n    def has_changes(self) -> bool:\n        # TODO: Check if there are uncommitted changes\n        pass\n    \n    def commit_changes(self, message: str) -> bool:\n        # TODO: Stage all changes and commit\n        # Validate message is not empty\n        pass\n\n# Test the helper\nhelper = GitCommitHelper()\nif helper.is_git_repo():\n    print(f\"Branch: {helper.get_branch()}\")\n    if helper.has_changes():\n        message = input(\"Commit message: \")\n        helper.commit_changes(message)",
              "solution": "import subprocess\nfrom typing import Optional, Tuple\n\n\nclass GitCommitHelper:\n    \"\"\"Helper class for common Git operations using Python subprocess.\n    \n    This class provides a simple interface for checking Git status,\n    viewing changes, and creating commits programmatically.\n    \"\"\"\n    \n    def _run_command(self, command: list) -> Tuple[bool, str]:\n        \"\"\"Run a git command and return success status and output.\n        \n        Args:\n            command: List of command parts (e.g., ['git', 'status'])\n        \n        Returns:\n            Tuple of (success: bool, output: str)\n        \"\"\"\n        try:\n            result = subprocess.run(\n                command,\n                capture_output=True,\n                text=True,\n                check=True\n            )\n            return True, result.stdout.strip()\n        except subprocess.CalledProcessError as e:\n            return False, e.stderr.strip()\n        except FileNotFoundError:\n            return False, 'Git is not installed or not in PATH'\n    \n    def is_git_repo(self) -> bool:\n        \"\"\"Check if current directory is inside a Git repository.\n        \n        Returns:\n            True if in a git repo, False otherwise\n        \"\"\"\n        success, output = self._run_command(\n            ['git', 'rev-parse', '--is-inside-work-tree']\n        )\n        return success and output == 'true'\n    \n    def get_status(self) -> str:\n        \"\"\"Get the current git status in short format.\n        \n        Returns:\n            Status output showing modified, added, deleted files\n        \"\"\"\n        success, output = self._run_command(['git', 'status', '--short'])\n        if success:\n            return output if output else 'Working tree clean'\n        return f'Error: {output}'\n    \n    def get_branch(self) -> str:\n        \"\"\"Get the name of the current branch.\n        \n        Returns:\n            Current branch name or 'unknown' on error\n        \"\"\"\n        success, output = self._run_command(\n            ['git', 'branch', '--show-current']\n        )\n        return output if success else 'unknown'\n    \n    def has_changes(self) -> bool:\n        \"\"\"Check if there are any uncommitted changes.\n        \n        This checks both staged and unstaged changes.\n        \n        Returns:\n            True if there are changes to commit, False otherwise\n        \"\"\"\n        # Check for any changes (staged or unstaged)\n        success, output = self._run_command(['git', 'status', '--porcelain'])\n        return success and len(output) > 0\n    \n    def get_modified_files(self) -> list:\n        \"\"\"Get a list of modified files.\n        \n        Returns:\n            List of filenames that have been modified\n        \"\"\"\n        success, output = self._run_command(['git', 'diff', '--name-only'])\n        if success and output:\n            return output.split('\\n')\n        return []\n    \n    def get_staged_files(self) -> list:\n        \"\"\"Get a list of staged files.\n        \n        Returns:\n            List of filenames that are staged for commit\n        \"\"\"\n        success, output = self._run_command(\n            ['git', 'diff', '--cached', '--name-only']\n        )\n        if success and output:\n            return output.split('\\n')\n        return []\n    \n    def stage_all(self) -> bool:\n        \"\"\"Stage all changes for commit.\n        \n        Returns:\n            True if staging succeeded, False otherwise\n        \"\"\"\n        success, _ = self._run_command(['git', 'add', '-A'])\n        return success\n    \n    def commit_changes(self, message: str) -> bool:\n        \"\"\"Stage all changes and create a commit.\n        \n        Args:\n            message: Commit message (must not be empty)\n        \n        Returns:\n            True if commit succeeded, False otherwise\n        \"\"\"\n        # Validate commit message\n        if not message or not message.strip():\n            print('Error: Commit message cannot be empty')\n            return False\n        \n        # Stage all changes\n        if not self.stage_all():\n            print('Error: Failed to stage changes')\n            return False\n        \n        # Create commit\n        success, output = self._run_command(\n            ['git', 'commit', '-m', message.strip()]\n        )\n        \n        if success:\n            print(f'Committed successfully: {message}')\n            return True\n        else:\n            print(f'Error creating commit: {output}')\n            return False\n    \n    def get_last_commit(self) -> str:\n        \"\"\"Get the last commit message.\n        \n        Returns:\n            Short hash and message of the last commit\n        \"\"\"\n        success, output = self._run_command(\n            ['git', 'log', '-1', '--pretty=format:%h - %s']\n        )\n        return output if success else 'No commits yet'\n    \n    def show_summary(self) -> None:\n        \"\"\"Display a summary of the current Git state.\"\"\"\n        print('=== Git Repository Summary ===')\n        print(f'\\nBranch: {self.get_branch()}')\n        print(f'Last commit: {self.get_last_commit()}')\n        print(f'\\nStatus:\\n{self.get_status()}')\n        \n        modified = self.get_modified_files()\n        staged = self.get_staged_files()\n        \n        if modified:\n            print(f'\\nModified files ({len(modified)}):') \n            for f in modified:\n                print(f'  M {f}')\n        \n        if staged:\n            print(f'\\nStaged files ({len(staged)}):') \n            for f in staged:\n                print(f'  S {f}')\n\n\n# Test the helper\nprint('Git Commit Helper Demo')\nprint('=' * 40)\n\nhelper = GitCommitHelper()\n\nif helper.is_git_repo():\n    print('Inside a Git repository')\n    helper.show_summary()\n    \n    if helper.has_changes():\n        print('\\nYou have uncommitted changes!')\n        # In a real script, we'd prompt for input:\n        # message = input('Commit message: ')\n        # if message:\n        #     helper.commit_changes(message)\n    else:\n        print('\\nNo changes to commit.')\nelse:\n    print('Not inside a Git repository.')\n    print('Run \"git init\" to create one.')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use subprocess.run() to execute git commands. Check return code for success/failure. Capture output with capture_output=True."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-15-lesson-03",
          "title": "Testing Best Practices",
          "moduleId": "module-15",
          "order": 3,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Testing is Insurance",
              "content": "**Tests = Proof your code works**\n\n**Think of testing like:**\n- Car safety tests before sale\n- Taste-testing food before serving\n- Checking parachute before jumping\n\n**Why test:**\n\n1. **Catch bugs early** üêõ\n   - Before users find them\n   - Cheaper to fix\n   - Build confidence\n\n2. **Prevent regressions** ‚Ü©Ô∏è\n   - New code doesn't break old features\n   - Safe to refactor\n   - Automated checks\n\n3. **Document behavior** üìñ\n   - Tests show how code should work\n   - Examples of usage\n   - Living documentation\n\n4. **Design improvement** üé®\n   - Hard to test = bad design\n   - Forces modular code\n   - Clear interfaces\n\n**Types of tests:**\n\n**1. Unit Tests** üî¨\n- Test single function/class\n- Fast (milliseconds)\n- Isolated (no database, network)\n- Most common\n\n**2. Integration Tests** üîó\n- Test components together\n- Database, API calls\n- Slower\n- Realistic scenarios\n\n**3. End-to-End (E2E) Tests** üé¨\n- Test entire application\n- User perspective\n- Slowest\n- Most realistic\n\n**Test pyramid:**\n```\n      /\\  \n     /E2E\\      ‚Üê Few (expensive, slow)\n    /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\\n   /Integr\\     ‚Üê Some (moderate speed)\n  /‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\\n /Unit Tests\\   ‚Üê Many (cheap, fast)\n/‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\\\n```\n\n**Write tests that:**\n‚úì Are fast\n‚úì Are independent\n‚úì Are repeatable\n‚úì Validate one thing\n‚úì Have clear names"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Unit Testing with pytest",
              "content": "**pytest features:**\n\n**1. Simple assertions:**\n```python\nassert result == expected\nassert value > 0\nassert item in list\n```\n\n**2. Testing exceptions:**\n```python\nwith pytest.raises(ValueError):\n    function_that_fails()\n```\n\n**3. Fixtures (setup/teardown):**\n```python\n@pytest.fixture\ndef database():\n    db = create_db()\n    yield db  # Test runs here\n    db.close()\n```\n\n**4. Parametrized tests:**\n```python\n@pytest.mark.parametrize(\"input,expected\", [\n    (1, 2),\n    (2, 4),\n])\ndef test_double(input, expected):\n    assert double(input) == expected\n```\n\n**Test naming:**\n- Prefix with `test_`\n- Descriptive names\n- One test = one concept",
              "code": "# Example functions to test\n\ndef add(a, b):\n    \"\"\"Add two numbers\"\"\"\n    return a + b\n\ndef divide(a, b):\n    \"\"\"Divide two numbers\"\"\"\n    if b == 0:\n        raise ValueError(\"Cannot divide by zero\")\n    return a / b\n\ndef is_palindrome(text):\n    \"\"\"Check if text is a palindrome\"\"\"\n    cleaned = ''.join(c.lower() for c in text if c.isalnum())\n    return cleaned == cleaned[::-1]\n\nclass Calculator:\n    \"\"\"Simple calculator class\"\"\"\n    \n    def __init__(self):\n        self.history = []\n    \n    def add(self, a, b):\n        result = a + b\n        self.history.append(f\"{a} + {b} = {result}\")\n        return result\n    \n    def get_history(self):\n        return self.history.copy()\n\nprint(\"=== Writing Tests with pytest ===\")\n\n# Test file: test_calculator.py\ntest_code = '''\nimport pytest\nfrom calculator import add, divide, is_palindrome, Calculator\n\n# Basic unit tests\ndef test_add_positive_numbers():\n    \"\"\"Test adding positive numbers\"\"\"\n    assert add(2, 3) == 5\n    assert add(10, 20) == 30\n\ndef test_add_negative_numbers():\n    \"\"\"Test adding negative numbers\"\"\"\n    assert add(-1, -1) == -2\n    assert add(-5, 5) == 0\n\ndef test_divide_normal():\n    \"\"\"Test normal division\"\"\"\n    assert divide(10, 2) == 5\n    assert divide(9, 3) == 3\n\ndef test_divide_by_zero():\n    \"\"\"Test division by zero raises error\"\"\"\n    with pytest.raises(ValueError, match=\"Cannot divide by zero\"):\n        divide(10, 0)\n\ndef test_is_palindrome_simple():\n    \"\"\"Test simple palindromes\"\"\"\n    assert is_palindrome(\"racecar\") == True\n    assert is_palindrome(\"hello\") == False\n\ndef test_is_palindrome_case_insensitive():\n    \"\"\"Test case insensitivity\"\"\"\n    assert is_palindrome(\"RaceCar\") == True\n    assert is_palindrome(\"A man a plan a canal Panama\") == True\n\n# Test with fixtures\n@pytest.fixture\ndef calculator():\n    \"\"\"Fixture providing a fresh Calculator instance\"\"\"\n    return Calculator()\n\ndef test_calculator_add(calculator):\n    \"\"\"Test calculator add method\"\"\"\n    result = calculator.add(5, 3)\n    assert result == 8\n\ndef test_calculator_history(calculator):\n    \"\"\"Test calculator maintains history\"\"\"\n    calculator.add(5, 3)\n    calculator.add(10, 2)\n    history = calculator.get_history()\n    assert len(history) == 2\n    assert \"5 + 3 = 8\" in history\n\n# Parametrized tests (test multiple inputs)\n@pytest.mark.parametrize(\"a,b,expected\", [\n    (2, 3, 5),\n    (10, 20, 30),\n    (-1, 1, 0),\n    (0, 0, 0),\n    (100, 200, 300)\n])\ndef test_add_parametrized(a, b, expected):\n    \"\"\"Test add with multiple parameter sets\"\"\"\n    assert add(a, b) == expected\n\n# Test error messages\ndef test_divide_error_message():\n    \"\"\"Test error message is helpful\"\"\"\n    try:\n        divide(10, 0)\n        assert False, \"Should have raised ValueError\"\n    except ValueError as e:\n        assert \"Cannot divide by zero\" in str(e)\n'''\n\nprint(\"Test file example:\")\nprint(test_code)\n\nprint(\"\\n=== Running Tests ===\")\nprint(\"\"\"\nCommand: pytest test_calculator.py\n\nOutput:\n========================= test session starts =========================\ncollected 10 items\n\ntest_calculator.py ..........                                   [100%]\n\n========================= 10 passed in 0.03s =========================\n\nOptions:\n  pytest -v                    # Verbose output\n  pytest -k \"palindrome\"       # Run tests matching name\n  pytest --cov                 # Show code coverage\n  pytest -x                    # Stop on first failure\n  pytest --pdb                 # Drop into debugger on failure\n\"\"\")\n\nprint(\"\\n=== Test Organization ===\")\n\nproject_structure = \"\"\"\nmy_project/\n‚îú‚îÄ‚îÄ src/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ calculator.py\n‚îÇ   ‚îú‚îÄ‚îÄ models.py\n‚îÇ   ‚îî‚îÄ‚îÄ services.py\n‚îÇ\n‚îú‚îÄ‚îÄ tests/\n‚îÇ   ‚îú‚îÄ‚îÄ __init__.py\n‚îÇ   ‚îú‚îÄ‚îÄ conftest.py          # Shared fixtures\n‚îÇ   ‚îú‚îÄ‚îÄ test_calculator.py   # Test calculator module\n‚îÇ   ‚îú‚îÄ‚îÄ test_models.py       # Test models\n‚îÇ   ‚îî‚îÄ‚îÄ test_services.py     # Test services\n‚îÇ\n‚îú‚îÄ‚îÄ pytest.ini               # pytest configuration\n‚îî‚îÄ‚îÄ requirements-test.txt    # Test dependencies\n\"\"\"\n\nprint(project_structure)",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Mocking External Dependencies",
              "content": "**Mocking = Fake external dependencies for testing**\n\n**Why mock?**\n- APIs cost money or have rate limits\n- Databases are slow to set up\n- External services may be unreliable\n- Need to test error scenarios\n\n**Python mocking tools:**\n```python\nfrom unittest.mock import Mock, patch, MagicMock\n\n# Create a mock object\nmock_api = Mock()\nmock_api.get_user.return_value = {'id': 1, 'name': 'Test'}\n\n# Patch a module function\n@patch('mymodule.requests.get')\ndef test_api(mock_get):\n    mock_get.return_value.json.return_value = {'data': 'test'}\n    # Now requests.get is mocked!\n```\n\n**Common patterns:**\n- `Mock()` - Create fake object\n- `patch()` - Replace real with fake\n- `return_value` - Set what mock returns\n- `side_effect` - Raise exception or cycle values",
              "code": "from unittest.mock import Mock, patch, MagicMock\nimport pytest\n\nprint(\"=== Mocking External APIs ===\")\n\n# Real function that calls external API\ndef get_weather(city):\n    \"\"\"Get weather from external API (simulated)\"\"\"\n    import requests\n    response = requests.get(f'https://api.weather.com/{city}')\n    return response.json()\n\n# Test WITHOUT mocking (bad - makes real API call)\n# def test_weather_bad():\n#     result = get_weather('London')  # Slow, unreliable, costs money!\n#     assert 'temperature' in result\n\n# Test WITH mocking (good - no real API call)\n@patch('__main__.get_weather')\ndef test_weather_mocked(mock_get_weather):\n    # Configure mock return value\n    mock_get_weather.return_value = {\n        'city': 'London',\n        'temperature': 20,\n        'conditions': 'sunny'\n    }\n    \n    result = get_weather('London')\n    \n    assert result['temperature'] == 20\n    assert result['city'] == 'London'\n    mock_get_weather.assert_called_once_with('London')\n    print(\"‚úì API test passed without real API call!\")\n\n# Run the test\ntest_weather_mocked()\n\nprint(\"\\n=== Mocking Database Calls ===\")\n\nclass UserRepository:\n    \"\"\"Repository that talks to database\"\"\"\n    \n    def __init__(self, db_connection):\n        self.db = db_connection\n    \n    def get_user(self, user_id):\n        return self.db.query(f'SELECT * FROM users WHERE id = {user_id}')\n    \n    def save_user(self, user):\n        return self.db.execute('INSERT INTO users ...')\n\ndef test_user_repository():\n    # Create mock database\n    mock_db = Mock()\n    mock_db.query.return_value = {'id': 1, 'name': 'Alice', 'email': 'alice@test.com'}\n    \n    # Inject mock into repository\n    repo = UserRepository(mock_db)\n    \n    # Test get_user\n    user = repo.get_user(1)\n    \n    assert user['name'] == 'Alice'\n    mock_db.query.assert_called_once()\n    print(\"‚úì Database test passed without real database!\")\n\ntest_user_repository()\n\nprint(\"\\n=== Testing Error Scenarios ===\")\n\ndef test_api_error_handling():\n    mock_api = Mock()\n    \n    # Simulate API error\n    mock_api.get_data.side_effect = ConnectionError(\"API unavailable\")\n    \n    # Test that our code handles errors properly\n    try:\n        mock_api.get_data()\n        assert False, \"Should have raised error\"\n    except ConnectionError as e:\n        assert \"unavailable\" in str(e)\n        print(\"‚úì Error handling test passed!\")\n\ntest_api_error_handling()\n\nprint(\"\\n=== Using patch() Decorator ===\")\n\n# Module we want to test\nclass EmailService:\n    def send_email(self, to, subject, body):\n        # This would normally send a real email\n        pass\n\nclass NotificationService:\n    def __init__(self, email_service):\n        self.email = email_service\n    \n    def notify_user(self, user_email, message):\n        self.email.send_email(user_email, 'Notification', message)\n        return True\n\ndef test_notification_sends_email():\n    # Create mock email service\n    mock_email = Mock(spec=EmailService)\n    \n    # Create notification service with mock\n    notifier = NotificationService(mock_email)\n    \n    # Test notification\n    result = notifier.notify_user('user@test.com', 'Hello!')\n    \n    # Verify email was \"sent\"\n    assert result == True\n    mock_email.send_email.assert_called_once_with(\n        'user@test.com',\n        'Notification',\n        'Hello!'\n    )\n    print(\"‚úì Email notification test passed without sending real email!\")\n\ntest_notification_sends_email()\n\nprint(\"\\n=== Mock return_value vs side_effect ===\")\n\nmock = Mock()\n\n# return_value - always returns same thing\nmock.get_data.return_value = {'status': 'ok'}\nprint(f\"return_value: {mock.get_data()}\")\nprint(f\"return_value: {mock.get_data()}\")\n\n# side_effect with list - returns different values each call\nmock.get_next.side_effect = [1, 2, 3]\nprint(f\"side_effect list: {mock.get_next()}\")\nprint(f\"side_effect list: {mock.get_next()}\")\nprint(f\"side_effect list: {mock.get_next()}\")\n\n# side_effect with exception\nmock.fail.side_effect = ValueError(\"Something went wrong\")\ntry:\n    mock.fail()\nexcept ValueError as e:\n    print(f\"side_effect exception: {e}\")\n\nprint(\"\\n=== pytest-mock (Simpler Syntax) ===\")\n\nprint(\"\"\"\n# Install: pip install pytest-mock\n\ndef test_with_mocker(mocker):\n    # mocker fixture provided by pytest-mock\n    mock_api = mocker.patch('mymodule.external_api')\n    mock_api.return_value = {'data': 'test'}\n    \n    result = my_function()\n    \n    assert result == expected\n    mock_api.assert_called_once()\n\"\"\")\n\nprint(\"\\n=== Key Mocking Patterns ===\")\nprint(\"\"\"\n1. MOCK RETURN VALUES:\n   mock.method.return_value = 'result'\n\n2. MOCK EXCEPTIONS:\n   mock.method.side_effect = ValueError('error')\n\n3. VERIFY CALLS:\n   mock.method.assert_called_once()\n   mock.method.assert_called_with(arg1, arg2)\n   mock.method.assert_not_called()\n\n4. PATCH MODULES:\n   @patch('module.function')\n   def test(mock_func):\n       mock_func.return_value = 'fake'\n\n5. SPEC FOR TYPE SAFETY:\n   mock = Mock(spec=RealClass)  # Only allows real methods\n\"\"\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Test-Driven Development (TDD)",
              "content": "**TDD = Write tests before code**\n\n**The cycle:**\n\n```\n1. üî¥ Red: Write failing test\n   ‚Üì\n2. üü¢ Green: Write minimal code to pass\n   ‚Üì\n3. üîµ Refactor: Improve code quality\n   ‚Üì\n   Repeat\n```\n\n**Example workflow:**\n\n**Step 1: Red (failing test)**\n```python\ndef test_validate_email():\n    assert validate_email(\"user@example.com\") == True\n    assert validate_email(\"invalid\") == False\n# Test fails - function doesn't exist\n```\n\n**Step 2: Green (make it pass)**\n```python\ndef validate_email(email):\n    return '@' in email\n# Test passes (barely)\n```\n\n**Step 3: Refactor (improve)**\n```python\nimport re\n\ndef validate_email(email):\n    pattern = r'^[\\w\\.-]+@[\\w\\.-]+\\.\\w+$'\n    return bool(re.match(pattern, email))\n# Better implementation, tests still pass\n```\n\n**TDD benefits:**\n- Forces you to think about requirements\n- Every line of code is tested\n- No over-engineering\n- Confidence to refactor\n- Design emerges naturally"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Tests are insurance** - Catch bugs before users do\n- **Unit tests are fastest** - Test small pieces in isolation\n- **pytest makes testing easy** - Simple syntax, powerful features\n- **Mock external dependencies** - Use `unittest.mock` to fake APIs, databases, emails\n- **TDD = Red, Green, Refactor** - Write test, make it pass, improve\n- **One test, one concept** - Keep tests focused and clear\n- **Fixtures for setup** - Reusable test dependencies\n- **Parametrize for multiple inputs** - Test many cases efficiently\n- **Good tests = good design** - Hard to test = bad design"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-03-challenge-4",
              "title": "Interactive Exercise",
              "description": "Practice TDD by creating a Password Validator:\n1. Write tests for password requirements:\n   - Min 8 characters\n   - At least one uppercase letter\n   - At least one number\n   - At least one special character\n2. Implement the validator to pass all tests\n3. Use pytest parametrize for multiple test cases",
              "instructions": "Practice TDD by creating a Password Validator:\n1. Write tests for password requirements:\n   - Min 8 characters\n   - At least one uppercase letter\n   - At least one number\n   - At least one special character\n2. Implement the validator to pass all tests\n3. Use pytest parametrize for multiple test cases",
              "starterCode": "import pytest\nimport re\n\n# TODO: Write tests first!\ndef test_password_length():\n    # TODO: Test minimum length\n    pass\n\ndef test_password_uppercase():\n    # TODO: Test uppercase requirement\n    pass\n\n# TODO: Implement after tests\nclass PasswordValidator:\n    def __init__(self, min_length=8):\n        pass\n    \n    def validate(self, password):\n        # TODO: Return True if valid, False otherwise\n        pass\n    \n    def get_errors(self, password):\n        # TODO: Return list of error messages\n        pass",
              "solution": "import pytest\nimport re\nfrom typing import List\n\n\n# ============================================\n# STEP 1: Write tests first (TDD Red Phase)\n# ============================================\n\nclass PasswordValidator:\n    \"\"\"Validates passwords against security requirements.\n    \n    Requirements:\n    - Minimum length (default 8 characters)\n    - At least one uppercase letter\n    - At least one number\n    - At least one special character\n    \"\"\"\n    \n    # Define special characters for validation\n    SPECIAL_CHARS = '!@#$%^&*()_+-=[]{}|;:,.<>?'\n    \n    def __init__(self, min_length: int = 8):\n        \"\"\"Initialize validator with minimum length requirement.\n        \n        Args:\n            min_length: Minimum password length (default 8)\n        \"\"\"\n        self.min_length = min_length\n    \n    def validate(self, password: str) -> bool:\n        \"\"\"Check if password meets all requirements.\n        \n        Args:\n            password: The password to validate\n        \n        Returns:\n            True if password meets all requirements, False otherwise\n        \"\"\"\n        # Get list of errors - if empty, password is valid\n        errors = self.get_errors(password)\n        return len(errors) == 0\n    \n    def get_errors(self, password: str) -> List[str]:\n        \"\"\"Get list of validation errors for a password.\n        \n        Args:\n            password: The password to validate\n        \n        Returns:\n            List of error messages (empty if valid)\n        \"\"\"\n        errors = []\n        \n        # Check minimum length\n        if len(password) < self.min_length:\n            errors.append(\n                f'Password must be at least {self.min_length} characters'\n            )\n        \n        # Check for uppercase letter\n        if not any(c.isupper() for c in password):\n            errors.append('Password must contain at least one uppercase letter')\n        \n        # Check for number\n        if not any(c.isdigit() for c in password):\n            errors.append('Password must contain at least one number')\n        \n        # Check for special character\n        if not any(c in self.SPECIAL_CHARS for c in password):\n            errors.append('Password must contain at least one special character')\n        \n        return errors\n    \n    def get_strength(self, password: str) -> str:\n        \"\"\"Evaluate password strength.\n        \n        Args:\n            password: The password to evaluate\n        \n        Returns:\n            Strength rating: 'weak', 'medium', 'strong', or 'invalid'\n        \"\"\"\n        if not self.validate(password):\n            return 'invalid'\n        \n        score = 0\n        \n        # Length bonuses\n        if len(password) >= 12:\n            score += 2\n        elif len(password) >= 10:\n            score += 1\n        \n        # Character variety bonuses\n        if sum(1 for c in password if c.isupper()) >= 2:\n            score += 1\n        if sum(1 for c in password if c.isdigit()) >= 2:\n            score += 1\n        if sum(1 for c in password if c in self.SPECIAL_CHARS) >= 2:\n            score += 1\n        \n        # Determine strength\n        if score >= 4:\n            return 'strong'\n        elif score >= 2:\n            return 'medium'\n        else:\n            return 'weak'\n\n\n# ============================================\n# STEP 2: Comprehensive Tests\n# ============================================\n\n# Test fixture - provides a validator instance\n@pytest.fixture\ndef validator():\n    \"\"\"Create a PasswordValidator instance for testing.\"\"\"\n    return PasswordValidator(min_length=8)\n\n\n# Test: Password minimum length\ndef test_password_length(validator):\n    \"\"\"Test that passwords must meet minimum length.\"\"\"\n    # Too short - should fail\n    assert validator.validate('Aa1!') == False\n    assert validator.validate('Aa1!abc') == False  # 7 chars\n    \n    # Exactly 8 chars - should pass (if other requirements met)\n    assert validator.validate('Aa1!abcd') == True\n    \n    # Longer - should pass\n    assert validator.validate('Aa1!abcdef') == True\n\n\n# Test: Uppercase letter requirement\ndef test_password_uppercase(validator):\n    \"\"\"Test that passwords must contain uppercase letter.\"\"\"\n    # No uppercase - should fail\n    assert validator.validate('aa1!abcd') == False\n    \n    # With uppercase - should pass\n    assert validator.validate('Aa1!abcd') == True\n    \n    # Multiple uppercase - should pass\n    assert validator.validate('AA1!abcd') == True\n\n\n# Test: Number requirement\ndef test_password_number(validator):\n    \"\"\"Test that passwords must contain a number.\"\"\"\n    # No number - should fail\n    assert validator.validate('Aaa!abcd') == False\n    \n    # With number - should pass\n    assert validator.validate('Aa1!abcd') == True\n    \n    # Multiple numbers - should pass\n    assert validator.validate('Aa12!bcd') == True\n\n\n# Test: Special character requirement\ndef test_password_special_char(validator):\n    \"\"\"Test that passwords must contain special character.\"\"\"\n    # No special char - should fail\n    assert validator.validate('Aa1aabcd') == False\n    \n    # With special char - should pass\n    assert validator.validate('Aa1!abcd') == True\n    \n    # Different special chars - all should pass\n    for char in '@#$%^&*':\n        assert validator.validate(f'Aa1{char}abcd') == True\n\n\n# Test: Error messages\ndef test_get_errors_returns_all_issues(validator):\n    \"\"\"Test that get_errors returns all validation issues.\"\"\"\n    # Empty password - should have all errors\n    errors = validator.get_errors('')\n    assert len(errors) == 4\n    assert any('length' in e.lower() for e in errors)\n    assert any('uppercase' in e.lower() for e in errors)\n    assert any('number' in e.lower() for e in errors)\n    assert any('special' in e.lower() for e in errors)\n    \n    # Valid password - should have no errors\n    errors = validator.get_errors('Aa1!abcd')\n    assert errors == []\n\n\n# Test: Custom minimum length\ndef test_custom_min_length():\n    \"\"\"Test validator with custom minimum length.\"\"\"\n    validator = PasswordValidator(min_length=12)\n    \n    # 8 chars now too short\n    assert validator.validate('Aa1!abcd') == False\n    \n    # 12 chars - should pass\n    assert validator.validate('Aa1!abcdefgh') == True\n\n\n# Test: Parametrized tests for multiple valid passwords\n@pytest.mark.parametrize('password', [\n    'Aa1!abcd',\n    'Password123!',\n    'MyP@ssw0rd',\n    'Secure#Pass1',\n    'Test1234$$$',\n])\ndef test_valid_passwords(validator, password):\n    \"\"\"Test that various valid passwords pass validation.\"\"\"\n    assert validator.validate(password) == True\n\n\n# Test: Parametrized tests for invalid passwords\n@pytest.mark.parametrize('password,reason', [\n    ('short1!', 'too short'),\n    ('alllowercase1!', 'no uppercase'),\n    ('ALLUPPERCASE1!', 'has uppercase but valid actually'),\n    ('NoNumbers!!', 'no numbers'),\n    ('NoSpecial123', 'no special chars'),\n])\ndef test_invalid_passwords(validator, password, reason):\n    \"\"\"Test that invalid passwords fail validation.\"\"\"\n    # Note: 'ALLUPPERCASE1!' is actually valid, so we skip that case\n    if password != 'ALLUPPERCASE1!':\n        assert validator.validate(password) == False\n\n\n# Test: Password strength\ndef test_password_strength(validator):\n    \"\"\"Test password strength evaluation.\"\"\"\n    # Invalid password\n    assert validator.get_strength('weak') == 'invalid'\n    \n    # Weak but valid\n    assert validator.get_strength('Aa1!abcd') in ['weak', 'medium']\n    \n    # Strong password (long, multiple special chars, etc.)\n    assert validator.get_strength('MyStr0ng!P@ssword123') == 'strong'\n\n\n# ============================================\n# Demo the validator\n# ============================================\n\nif __name__ == '__main__':\n    print('Password Validator Demo')\n    print('=' * 40)\n    \n    validator = PasswordValidator()\n    \n    test_passwords = [\n        'weak',\n        'Password',\n        'password123',\n        'Password123',\n        'Password123!',\n        'MyStr0ng!P@ssword',\n    ]\n    \n    for pwd in test_passwords:\n        is_valid = validator.validate(pwd)\n        errors = validator.get_errors(pwd)\n        strength = validator.get_strength(pwd)\n        \n        print(f\"\\nPassword: '{pwd}'\")\n        print(f\"  Valid: {is_valid}\")\n        print(f\"  Strength: {strength}\")\n        if errors:\n            print(f\"  Errors:\")\n            for error in errors:\n                print(f\"    - {error}\")\n    \n    print('\\n' + '=' * 40)\n    print('Run tests with: pytest -v')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start with simple tests. Use regex for character checks. Return helpful error messages."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-15-lesson-04",
          "title": "Documentation and Code Quality",
          "moduleId": "module-15",
          "order": 4,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Code is Read More Than Written",
              "content": "**Documentation = Instructions for humans**\n\n**Think of it like:**\n- Recipe for cooking\n- User manual for appliances\n- Assembly instructions for furniture\n\n**Why documentation matters:**\n\n1. **Future you** üîÆ\n   - You'll forget why you wrote code\n   - 6 months = forever\n   - Save yourself debugging time\n\n2. **Other developers** üë•\n   - Team members need to understand\n   - Open source contributors\n   - Code reviews\n\n3. **Users** üë§\n   - How to install\n   - How to use\n   - Troubleshooting\n\n**Types of documentation:**\n\n**1. Code comments** üí¨\n```python\n# Explain WHY, not WHAT\n# Good: Cache result to avoid expensive API call\n# Bad: This stores the result\n```\n\n**2. Docstrings** üìù\n```python\ndef calculate_total(items, tax_rate):\n    \"\"\"Calculate total price including tax.\n    \n    Args:\n        items: List of item prices\n        tax_rate: Tax rate as decimal (0.1 = 10%)\n    \n    Returns:\n        Total price with tax applied\n    \"\"\"\n```\n\n**3. README.md** üìÑ\n- What the project does\n- How to install\n- How to use\n- Examples\n- Contributing guide\n\n**4. API documentation** üîó\n- Endpoint descriptions\n- Request/response examples\n- Authentication details\n\n**Code quality = Readable, maintainable code**\n\n**PEP 8 (Python Style Guide):**\n- 4 spaces for indentation\n- Max 79 characters per line\n- 2 blank lines between functions\n- snake_case for variables\n- PascalCase for classes\n\n**Tools:**\n- **Black** - Auto-formatter\n- **flake8** - Style checker\n- **pylint** - Code analyzer\n- **mypy** - Type checker"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Writing Good Documentation",
              "content": "**Documentation best practices:**\n\n**Docstring format (Google style):**\n```python\ndef function(arg1, arg2):\n    \"\"\"Short description.\n    \n    Longer description if needed.\n    \n    Args:\n        arg1: Description of arg1\n        arg2: Description of arg2\n    \n    Returns:\n        Description of return value\n    \n    Raises:\n        ValueError: When this error occurs\n    \"\"\"\n```\n\n**Type hints:**\n```python\nfrom typing import List, Optional\n\ndef greet(name: str, times: int = 1) -> str:\n    return (\"Hello \" + name + \"! \") * times\n```\n\n**Comments:**\n- Explain WHY, not WHAT\n- Complex logic needs explanation\n- TODO/FIXME for future work\n\n**README sections:**\n1. What it does\n2. Installation\n3. Quick start\n4. Examples\n5. Configuration\n6. Contributing\n7. License",
              "code": "print(\"=== Example 1: Poor vs Good Documentation ===\")\n\n# BAD: No documentation\ndef calc(x, y, z):\n    return (x + y) * z\n\n# GOOD: Clear documentation\ndef calculate_total_with_tax(subtotal, tax_rate, quantity):\n    \"\"\"Calculate final price including tax for multiple items.\n    \n    Args:\n        subtotal (float): Price of single item before tax\n        tax_rate (float): Tax rate as decimal (e.g., 0.08 for 8%)\n        quantity (int): Number of items to purchase\n    \n    Returns:\n        float: Total price including tax\n    \n    Example:\n        >>> calculate_total_with_tax(10.00, 0.08, 3)\n        32.4\n    \"\"\"\n    return (subtotal + subtotal * tax_rate) * quantity\n\nprint(\"\\nBAD function:\")\nprint(f\"calc(10, 0.08, 3) = {calc(10, 0.08, 3)}\")\nprint(\"What does this do? ü§î\")\n\nprint(\"\\nGOOD function:\")\nprint(f\"calculate_total_with_tax(10.00, 0.08, 3) = {calculate_total_with_tax(10.00, 0.08, 3)}\")\nprint(\"Clear what this calculates! ‚úì\")\n\nprint(\"\\n=== Example 2: Comprehensive Docstrings ===\")\n\nfrom typing import List, Optional\n\nclass User:\n    \"\"\"Represents a user in the system.\n    \n    Attributes:\n        username (str): Unique username for login\n        email (str): User's email address\n        is_active (bool): Whether account is active\n    \"\"\"\n    \n    def __init__(self, username: str, email: str):\n        \"\"\"Initialize a new user.\n        \n        Args:\n            username: Unique identifier for the user\n            email: Contact email address\n        \n        Raises:\n            ValueError: If username or email is empty\n        \"\"\"\n        if not username or not email:\n            raise ValueError(\"Username and email are required\")\n        \n        self.username = username\n        self.email = email\n        self.is_active = True\n    \n    def deactivate(self) -> None:\n        \"\"\"Deactivate the user account.\n        \n        This prevents the user from logging in but preserves\n        their data for potential reactivation.\n        \"\"\"\n        self.is_active = False\n    \n    def send_notification(self, message: str) -> bool:\n        \"\"\"Send notification email to user.\n        \n        Args:\n            message: The notification message to send\n        \n        Returns:\n            True if notification sent successfully, False otherwise\n        \n        Note:\n            This simulates sending an email. In production,\n            integrate with actual email service.\n        \"\"\"\n        print(f\"[Email to {self.email}] {message}\")\n        return True\n\nprint(\"User class with comprehensive docstrings\")\nuser = User(\"alice\", \"alice@example.com\")\nprint(f\"Created user: {user.username}\")\nuser.send_notification(\"Welcome to the platform!\")\n\nprint(\"\\n=== Example 3: README.md Template ===\")\n\nreadme_template = '''\n# Project Name\n\nOne-line description of what this project does.\n\n## Features\n\n- Feature 1: Brief description\n- Feature 2: Brief description\n- Feature 3: Brief description\n\n## Installation\n\n```bash\n# Clone the repository\ngit clone https://github.com/username/project.git\ncd project\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # Windows: venv\\\\Scripts\\\\activate\n\n# Install dependencies\npip install -r requirements.txt\n```\n\n## Quick Start\n\n```python\nfrom project import MainClass\n\n# Basic usage example\nobj = MainClass()\nresult = obj.do_something()\nprint(result)\n```\n\n## Usage\n\n### Example 1: Basic Usage\n\n```python\n# Code example\n```\n\n### Example 2: Advanced Usage\n\n```python\n# More complex example\n```\n\n## Configuration\n\nCreate a `.env` file:\n\n```\nDATABASE_URL=postgresql://user:pass@localhost/db\nSECRET_KEY=your-secret-key\nDEBUG=False\n```\n\n## Running Tests\n\n```bash\npytest tests/\n```\n\n## Contributing\n\n1. Fork the repository\n2. Create a feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit your changes (`git commit -m 'Add amazing feature'`)\n4. Push to branch (`git push origin feature/amazing-feature`)\n5. Open a Pull Request\n\n## License\n\nMIT License - see LICENSE file for details\n\n## Contact\n\nYour Name - your.email@example.com\n\nProject Link: https://github.com/username/project\n'''\n\nprint(readme_template)\n\nprint(\"\\n=== Example 4: Code Quality Tools ===\")\n\nprint(\"\\n1. Black (Auto-formatter)\")\nprint(\"\"\"\n# Install\npip install black\n\n# Format all Python files\nblack .\n\n# Check without modifying\nblack --check .\n\n# Configuration: pyproject.toml\n[tool.black]\nline-length = 88\ntarget-version = ['py38']\n\"\"\")\n\nprint(\"\\n2. flake8 (Style checker)\")\nprint(\"\"\"\n# Install\npip install flake8\n\n# Check all files\nflake8 .\n\n# Configuration: .flake8\n[flake8]\nmax-line-length = 88\nexclude = .git,__pycache__,venv\nignore = E203, W503\n\"\"\")\n\nprint(\"\\n3. mypy (Type checker)\")\nprint(\"\"\"\n# Install\npip install mypy\n\n# Check types\nmypy src/\n\n# Configuration: mypy.ini\n[mypy]\npython_version = 3.8\nwarn_return_any = True\nwarn_unused_configs = True\n\"\"\")\n\nprint(\"\\n=== Example 5: Type Hints ===\")\n\ndef process_users(users: List[dict], active_only: bool = True) -> List[str]:\n    \"\"\"Extract usernames from user dictionaries.\n    \n    Args:\n        users: List of user dictionaries with 'username' and 'is_active' keys\n        active_only: If True, only return active users\n    \n    Returns:\n        List of usernames\n    \"\"\"\n    result = []\n    for user in users:\n        if not active_only or user.get('is_active', True):\n            result.append(user['username'])\n    return result\n\n# Better with type hints\nfrom typing import TypedDict\n\nclass UserDict(TypedDict):\n    username: str\n    email: str\n    is_active: bool\n\ndef process_users_typed(users: List[UserDict], active_only: bool = True) -> List[str]:\n    \"\"\"Extract usernames from user dictionaries (type-safe).\"\"\"\n    result = []\n    for user in users:\n        if not active_only or user['is_active']:\n            result.append(user['username'])\n    return result\n\nprint(\"\\nType hints make code more maintainable:\")\ntest_users: List[UserDict] = [\n    {'username': 'alice', 'email': 'alice@example.com', 'is_active': True},\n    {'username': 'bob', 'email': 'bob@example.com', 'is_active': False},\n]\n\nactive_users = process_users_typed(test_users, active_only=True)\nprint(f\"Active users: {active_users}\")",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Code Review Checklist",
              "content": "**Code review = Quality gate before merging**\n\n**What to look for:**\n\n**1. Functionality** ‚úÖ\n- Does it work as intended?\n- Are edge cases handled?\n- Are errors handled properly?\n\n**2. Tests** üß™\n- Are there tests?\n- Do tests cover edge cases?\n- Do all tests pass?\n\n**3. Code Quality** üíé\n- Is code readable?\n- Are names descriptive?\n- Is logic clear?\n- DRY (Don't Repeat Yourself)?\n\n**4. Documentation** üìö\n- Are functions documented?\n- Is README updated?\n- Are comments helpful?\n\n**5. Security** üîí\n- No hardcoded secrets?\n- Input validation?\n- SQL injection prevention?\n\n**6. Performance** ‚ö°\n- Efficient algorithms?\n- No unnecessary loops?\n- Database queries optimized?\n\n**Review comments:**\n\n**Good:**\n- \"Consider using a dict here for O(1) lookup\"\n- \"Great job handling this edge case!\"\n- \"Could we add a test for the error case?\"\n\n**Bad:**\n- \"This is wrong\"\n- \"Why did you do it this way?\"\n- \"Fix this\""
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Code is read more than written** - Prioritize readability\n- **Docstrings document functions** - Args, Returns, Raises, Examples\n- **Type hints improve safety** - Catch errors before runtime\n- **README is your first impression** - Clear installation and usage\n- **PEP 8 is the Python style guide** - Consistent formatting matters\n- **Black auto-formats code** - Never debate formatting again\n- **Comments explain WHY** - Code shows WHAT, comments show WHY\n- **Code review is quality control** - Catch issues before production"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-14-lesson-04-challenge-3",
              "title": "Interactive Exercise",
              "description": "Improve this poorly documented code:\n1. Add comprehensive docstrings\n2. Add type hints\n3. Improve variable names\n4. Add comments where needed\n5. Follow PEP 8 style",
              "instructions": "Improve this poorly documented code:\n1. Add comprehensive docstrings\n2. Add type hints\n3. Improve variable names\n4. Add comments where needed\n5. Follow PEP 8 style",
              "starterCode": "def p(l):\n    r=[]\n    for i in l:\n        if i%2==0:\n            r.append(i*2)\n    return r\n\nclass C:\n    def __init__(self,n,a):\n        self.n=n\n        self.a=a\n    def g(self):\n        return self.n if self.a else None",
              "solution": "from typing import List, Optional\n\n\ndef double_even_numbers(numbers: List[int]) -> List[int]:\n    \"\"\"Double all even numbers in a list.\n    \n    Takes a list of integers and returns a new list containing\n    only the even numbers, each multiplied by 2.\n    \n    Args:\n        numbers: A list of integers to process\n    \n    Returns:\n        A new list with even numbers doubled\n    \n    Example:\n        >>> double_even_numbers([1, 2, 3, 4, 5, 6])\n        [4, 8, 12]\n        >>> double_even_numbers([1, 3, 5])\n        []\n    \"\"\"\n    doubled_evens = []\n    \n    for number in numbers:\n        # Check if number is even (divisible by 2)\n        if number % 2 == 0:\n            doubled_evens.append(number * 2)\n    \n    return doubled_evens\n\n\nclass ConditionalValue:\n    \"\"\"A container that holds a value with an active/inactive state.\n    \n    This class stores a value that can only be retrieved when the\n    instance is in an active state. If inactive, retrieval returns None.\n    \n    Attributes:\n        name: The stored value/name\n        is_active: Whether the value can be retrieved\n    \n    Example:\n        >>> item = ConditionalValue('Alice', True)\n        >>> item.get_value()\n        'Alice'\n        >>> inactive_item = ConditionalValue('Bob', False)\n        >>> inactive_item.get_value() is None\n        True\n    \"\"\"\n    \n    def __init__(self, name: str, is_active: bool) -> None:\n        \"\"\"Initialize a ConditionalValue instance.\n        \n        Args:\n            name: The value to store\n            is_active: Whether the value should be accessible\n        \"\"\"\n        self.name = name\n        self.is_active = is_active\n    \n    def get_value(self) -> Optional[str]:\n        \"\"\"Retrieve the stored value if active.\n        \n        Returns:\n            The stored name if active, None otherwise\n        \"\"\"\n        if self.is_active:\n            return self.name\n        return None\n    \n    def activate(self) -> None:\n        \"\"\"Set the instance to active state.\"\"\"\n        self.is_active = True\n    \n    def deactivate(self) -> None:\n        \"\"\"Set the instance to inactive state.\"\"\"\n        self.is_active = False\n    \n    def __repr__(self) -> str:\n        \"\"\"Return a string representation of the instance.\"\"\"\n        status = 'active' if self.is_active else 'inactive'\n        return f\"ConditionalValue(name='{self.name}', status={status})\"\n\n\n# Demonstration of the improved code\nif __name__ == '__main__':\n    print('Improved Code Demonstration')\n    print('=' * 40)\n    \n    # Test double_even_numbers\n    print('\\n1. double_even_numbers function:')\n    test_numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n    result = double_even_numbers(test_numbers)\n    print(f'   Input:  {test_numbers}')\n    print(f'   Output: {result}')\n    \n    # Test ConditionalValue\n    print('\\n2. ConditionalValue class:')\n    \n    active_item = ConditionalValue('Alice', is_active=True)\n    print(f'   {active_item}')\n    print(f'   get_value(): {active_item.get_value()}')\n    \n    inactive_item = ConditionalValue('Bob', is_active=False)\n    print(f'   {inactive_item}')\n    print(f'   get_value(): {inactive_item.get_value()}')\n    \n    # Demonstrate state change\n    print('\\n3. Changing state:')\n    inactive_item.activate()\n    print(f'   After activate(): {inactive_item.get_value()}')",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code runs without errors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use descriptive names. Add docstrings. Format with proper spacing. Add type hints."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon after if/for/while",
                  "consequence": "SyntaxError",
                  "correction": "Add : at the end of the line"
                },
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "Assignment instead of comparison",
                  "correction": "Use == for equality checks"
                },
                {
                  "mistake": "Incorrect indentation",
                  "consequence": "IndentationError",
                  "correction": "Use consistent 4-space indentation"
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "module-15-lesson-05",
          "title": "Dockerfile for Python",
          "moduleId": "module-15",
          "order": 5,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Docker for Python Development",
              "content": "**Docker = Consistent environments everywhere**\n\nDocker solves the \"works on my machine\" problem by packaging your application with all its dependencies into a container.\n\n**Benefits for Python projects:**\n\n1. **Consistent environments**\n   - Same Python version everywhere\n   - Same dependencies, same versions\n   - No more \"it works on my laptop\"\n\n2. **Easy deployment**\n   - Build once, run anywhere\n   - Cloud platforms support Docker natively\n   - No installation steps on servers\n\n3. **Isolation**\n   - Each project in its own container\n   - No conflicting dependencies\n   - Clean separation of concerns\n\n4. **Reproducibility**\n   - Dockerfile is version-controlled\n   - Anyone can rebuild the exact same image\n   - Great for CI/CD pipelines\n\n**Key Docker concepts:**\n\n| Concept | Description |\n|---------|-------------|\n| **Image** | Blueprint/recipe for a container |\n| **Container** | Running instance of an image |\n| **Dockerfile** | Instructions to build an image |\n| **Registry** | Storage for images (Docker Hub, ghcr.io) |\n| **Layer** | Cached build step in an image |\n\n**For our Personal Finance Tracker:**\n- FastAPI app + dependencies in one container\n- Same behavior in dev, staging, and production\n- Easy to share with teammates"
            },
            {
              "type": "THEORY",
              "title": "Choosing the Right Base Image",
              "content": "**Base images determine your container's foundation**\n\nPython offers several official base images:\n\n**1. `python:3.13` (full)**\n- Based on Debian\n- ~900MB image size\n- Includes build tools, compilers\n- Good for development, debugging\n\n**2. `python:3.13-slim` (recommended)**\n- Based on Debian minimal\n- ~150MB image size\n- Just Python and essentials\n- Best balance of size and compatibility\n\n**3. `python:3.13-alpine`**\n- Based on Alpine Linux\n- ~50MB image size\n- Uses musl instead of glibc\n- Some packages may not work or compile slower\n\n**Our recommendation: `python:3.13-slim`**\n\n```dockerfile\n# Good default choice\nFROM python:3.13-slim\n\n# Avoid unless you know what you're doing\n# FROM python:3.13-alpine\n```\n\n**Why not Alpine for Python?**\n- Many wheels are built for glibc, not musl\n- Packages with C extensions compile from source (slow)\n- Debugging is harder (different tooling)\n- Size savings often lost to compiled dependencies\n\n**Slim is the sweet spot:**\n- Small enough for production\n- Compatible with all pip packages\n- Familiar Debian-based tools"
            },
            {
              "type": "EXAMPLE",
              "title": "Multi-Stage Dockerfile with uv",
              "content": "**Multi-stage builds = smaller production images**\n\nWe use two stages:\n1. **Builder stage**: Install dependencies with uv\n2. **Runtime stage**: Copy only what's needed to run\n\nThis separates build tools from the final image, reducing size and attack surface.",
              "code": "# Dockerfile for Personal Finance Tracker\n# Multi-stage build for smaller, more secure images\n\n# ====================\n# Stage 1: Builder\n# ====================\nFROM python:3.13-slim AS builder\n\n# Install uv - fast Python package manager\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv\n\n# Set working directory\nWORKDIR /app\n\n# Copy dependency files first (better layer caching)\nCOPY pyproject.toml uv.lock ./\n\n# Install dependencies to a virtual environment\n# --frozen: use exact versions from uv.lock\n# --no-dev: skip development dependencies\nRUN uv sync --frozen --no-dev\n\n# ====================\n# Stage 2: Runtime\n# ====================\nFROM python:3.13-slim\n\n# Set working directory\nWORKDIR /app\n\n# Copy the virtual environment from builder stage\nCOPY --from=builder /app/.venv /app/.venv\n\n# Copy application source code\nCOPY src/ ./src/\n\n# Add .venv/bin to PATH so we can run Python packages directly\nENV PATH=\"/app/.venv/bin:$PATH\"\n\n# Create non-root user for security\nRUN useradd --create-home --shell /bin/bash appuser \\\n    && chown -R appuser:appuser /app\n\n# Switch to non-root user\nUSER appuser\n\n# Document the port the app uses\nEXPOSE 8000\n\n# Health check for container orchestration\nHEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 \\\n    CMD python -c \"import urllib.request; urllib.request.urlopen('http://localhost:8000/health')\"\n\n# Run the FastAPI application\nCMD [\"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]",
              "language": "dockerfile"
            },
            {
              "type": "THEORY",
              "title": "Understanding Each Dockerfile Instruction",
              "content": "**Let's break down the key instructions:**\n\n**`FROM python:3.13-slim AS builder`**\n- Sets the base image\n- `AS builder` names this stage for reference\n\n**`COPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv`**\n- Copies uv binary directly from its official image\n- No need to install pip or download scripts\n- Fastest way to get uv in Docker\n\n**`COPY pyproject.toml uv.lock ./`**\n- Copies dependency files first\n- Docker caches this layer\n- Dependencies only reinstall when these files change\n\n**`RUN uv sync --frozen --no-dev`**\n- `--frozen`: Uses exact versions from uv.lock\n- `--no-dev`: Skips pytest, black, etc.\n- Creates `.venv` directory with all packages\n\n**`COPY --from=builder /app/.venv /app/.venv`**\n- Copies virtual environment from builder stage\n- Only the installed packages, not build tools\n- Dramatically reduces final image size\n\n**`ENV PATH=\"/app/.venv/bin:$PATH\"`**\n- Adds venv to PATH\n- Python and all installed packages are now available\n- Equivalent to \"activating\" the venv\n\n**`USER appuser`**\n- Runs container as non-root user\n- Security best practice\n- Limits damage if container is compromised\n\n**`HEALTHCHECK`**\n- Tells Docker how to check if app is healthy\n- Used by orchestration tools (Kubernetes, Docker Compose)\n- Enables automatic restarts on failure"
            },
            {
              "type": "EXAMPLE",
              "title": "Building and Running the Docker Image",
              "content": "**Common Docker commands for your project:**",
              "code": "# Build the Docker image\n# -t tags the image with a name:version\n# . is the build context (current directory)\ndocker build -t finance-tracker:latest .\n\n# List all images\ndocker images\n\n# Run the container\n# -p maps host port 8000 to container port 8000\n# -d runs in detached mode (background)\ndocker run -p 8000:8000 -d finance-tracker:latest\n\n# List running containers\ndocker ps\n\n# View container logs\ndocker logs <container_id>\n\n# Stop the container\ndocker stop <container_id>\n\n# Remove the container\ndocker rm <container_id>\n\n# Remove the image\ndocker rmi finance-tracker:latest\n\n# Build with no cache (full rebuild)\ndocker build --no-cache -t finance-tracker:latest .\n\n# Check image size\ndocker images finance-tracker\n# Expected output:\n# REPOSITORY        TAG       IMAGE ID       CREATED        SIZE\n# finance-tracker   latest    abc123def     1 minute ago   180MB",
              "language": "bash"
            },
            {
              "type": "WARNING",
              "title": "Common Dockerfile Mistakes",
              "content": "### Watch out for these common issues:\n\n**1. Installing pip packages without caching**\n```dockerfile\n# WRONG - Downloads packages every build\nRUN pip install -r requirements.txt\n\n# CORRECT - Cache dependencies layer\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\nCOPY . .\n```\n\n**2. Running as root**\n```dockerfile\n# WRONG - Security risk!\nCMD [\"uvicorn\", \"main:app\"]\n\n# CORRECT - Use non-root user\nUSER appuser\nCMD [\"uvicorn\", \"main:app\"]\n```\n\n**3. Copying unnecessary files**\n```dockerfile\n# WRONG - Includes .git, __pycache__, .env\nCOPY . .\n\n# CORRECT - Use .dockerignore\n# .dockerignore:\n# .git\n# __pycache__\n# .env\n# *.pyc\n# .venv\n```\n\n**4. Using `latest` tag in production**\n```dockerfile\n# WRONG - Not reproducible\nFROM python:latest\n\n# CORRECT - Pin specific version\nFROM python:3.13-slim\n```\n\n**5. Not using multi-stage builds**\n```dockerfile\n# WRONG - Image contains build tools\nFROM python:3.13\nRUN pip install uv\nRUN uv sync\n\n# CORRECT - Separate build and runtime\nFROM python:3.13-slim AS builder\n# ... build steps ...\n\nFROM python:3.13-slim\nCOPY --from=builder /app/.venv /app/.venv\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "The .dockerignore File",
              "content": "**Just like .gitignore, but for Docker builds**\n\nPrevents copying unnecessary files into your image, making builds faster and images smaller.",
              "code": "# .dockerignore\n\n# Git\n.git\n.gitignore\n\n# Python bytecode\n__pycache__\n*.pyc\n*.pyo\n*.pyd\n.Python\n\n# Virtual environments (we build fresh in Docker)\n.venv\nvenv\nenv\n\n# Environment files with secrets\n.env\n.env.*\n!.env.example\n\n# IDE settings\n.vscode\n.idea\n*.swp\n*.swo\n\n# Test and coverage\n.pytest_cache\n.coverage\nhtmlcov\n.tox\n\n# Documentation\ndocs\n*.md\n!README.md\n\n# Docker files (prevent recursive issues)\nDockerfile*\ndocker-compose*.yml\n\n# CI/CD\n.github\n.gitlab-ci.yml\n\n# OS files\n.DS_Store\nThumbs.db",
              "language": "text"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Use `python:3.13-slim`** - Best balance of size and compatibility\n- **Multi-stage builds** reduce image size by separating build tools from runtime\n- **uv in Docker** - Copy binary from `ghcr.io/astral-sh/uv:latest`\n- **Layer caching** - Copy dependency files before source code\n- **Run as non-root** - Create and switch to a non-privileged user\n- **Use .dockerignore** - Exclude .git, .venv, .env from builds\n- **Pin versions** - Use specific Python versions, not `latest`\n- **Add HEALTHCHECK** - Enables container orchestration features"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-05-challenge-1",
              "title": "Create a Dockerfile for Your Project",
              "description": "Create a multi-stage Dockerfile for a FastAPI application that:\n1. Uses python:3.13-slim as the base\n2. Installs uv from the official image\n3. Uses a builder stage and a runtime stage\n4. Runs as a non-root user\n5. Exposes port 8000\n\nFill in the missing parts of the Dockerfile.",
              "instructions": "Complete the Dockerfile with proper multi-stage build, uv installation, and security best practices.",
              "starterCode": "# Stage 1: Builder\nFROM ____:____-slim AS builder\n\n# Install uv\nCOPY --from=ghcr.io/astral-sh/uv:latest ____ /usr/local/bin/uv\n\nWORKDIR /app\n\n# Copy dependency files\nCOPY pyproject.toml uv.lock ./\n\n# Install production dependencies\nRUN uv sync ____ ____\n\n# Stage 2: Runtime\nFROM python:3.13-slim\n\nWORKDIR /app\n\n# Copy virtual environment from builder\nCOPY ____=builder /app/.venv /app/.venv\n\n# Copy source code\nCOPY src/ ./src/\n\n# Set PATH to use venv\nENV PATH=\"____:$PATH\"\n\n# Create and switch to non-root user\nRUN useradd -m appuser && chown -R appuser:appuser /app\nUSER ____\n\n# Expose port and run\nEXPOSE ____\nCMD [\"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]",
              "solution": "# Stage 1: Builder\nFROM python:3.13-slim AS builder\n\n# Install uv\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv\n\nWORKDIR /app\n\n# Copy dependency files\nCOPY pyproject.toml uv.lock ./\n\n# Install production dependencies\nRUN uv sync --frozen --no-dev\n\n# Stage 2: Runtime\nFROM python:3.13-slim\n\nWORKDIR /app\n\n# Copy virtual environment from builder\nCOPY --from=builder /app/.venv /app/.venv\n\n# Copy source code\nCOPY src/ ./src/\n\n# Set PATH to use venv\nENV PATH=\"/app/.venv/bin:$PATH\"\n\n# Create and switch to non-root user\nRUN useradd -m appuser && chown -R appuser:appuser /app\nUSER appuser\n\n# Expose port and run\nEXPOSE 8000\nCMD [\"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]",
              "language": "dockerfile",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Uses python:3.13-slim base image",
                  "expectedOutput": "python:3.13-slim",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Uses multi-stage build with --from=builder",
                  "expectedOutput": "--from=builder",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Runs as non-root user",
                  "expectedOutput": "USER appuser",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "The uv binary is at `/uv` in the source image and should go to `/usr/local/bin/uv`"
                },
                {
                  "level": 2,
                  "text": "Use `--frozen --no-dev` flags with uv sync for production builds"
                },
                {
                  "level": 3,
                  "text": "The venv bin path is `/app/.venv/bin`"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting --from=builder when copying from the first stage",
                  "consequence": "Docker will look for files in the current stage instead of the builder stage",
                  "correction": "Use COPY --from=builder /app/.venv /app/.venv"
                },
                {
                  "mistake": "Not adding .venv/bin to PATH",
                  "consequence": "Python packages won't be accessible",
                  "correction": "Add ENV PATH=\"/app/.venv/bin:$PATH\""
                },
                {
                  "mistake": "Running as root user",
                  "consequence": "Security vulnerability if container is compromised",
                  "correction": "Create a non-root user and switch with USER appuser"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-15-lesson-06",
          "title": "Docker Compose for Development",
          "moduleId": "module-15",
          "order": 6,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Docker Compose for Development",
              "content": "**Docker Compose = Multi-container orchestration made simple**\n\nWhile a single Dockerfile runs one container, real applications often need multiple services:\n\n**Our Personal Finance Tracker needs:**\n- FastAPI application (port 8000)\n- PostgreSQL database (port 5432)\n- Maybe Redis for caching\n- Maybe a background worker\n\n**Docker Compose solves:**\n\n1. **Multi-container management**\n   - Define all services in one file\n   - Start/stop everything together\n   - Containers can talk to each other\n\n2. **Development workflows**\n   - Mount source code for hot reload\n   - Override production settings\n   - Easy database access\n\n3. **Environment parity**\n   - Same PostgreSQL version as production\n   - Same environment variables\n   - No \"but it works with SQLite locally\"\n\n4. **One command to rule them all**\n   ```bash\n   docker compose up\n   ```\n   - Starts all services\n   - Creates networks\n   - Sets up volumes\n   - Shows combined logs\n\n**Compose vs Kubernetes:**\n| Docker Compose | Kubernetes |\n|----------------|------------|\n| Local development | Production at scale |\n| Single machine | Multiple machines |\n| Simple YAML | Complex manifests |\n| `docker compose up` | `kubectl apply` |\n\nUse Compose for development, Kubernetes for production (if needed)."
            },
            {
              "type": "EXAMPLE",
              "title": "Docker Compose for Personal Finance Tracker",
              "content": "**Complete docker-compose.yml with PostgreSQL**\n\nThis configuration sets up:\n- Your FastAPI app with hot reload\n- PostgreSQL 16 with persistent data\n- Automatic service dependencies",
              "code": "# docker-compose.yml\n# Development environment for Personal Finance Tracker\n\nservices:\n  # ==================\n  # FastAPI Application\n  # ==================\n  app:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - \"8000:8000\"\n    environment:\n      # Database connection string\n      - DATABASE_URL=postgresql+asyncpg://financeuser:financepass@db:5432/financedb\n      # Development settings\n      - DEBUG=true\n      - LOG_LEVEL=DEBUG\n    depends_on:\n      db:\n        condition: service_healthy\n    volumes:\n      # Mount source code for hot reload\n      - ./src:/app/src\n    # Override CMD for development with reload\n    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload\n    networks:\n      - finance-network\n\n  # ==================\n  # PostgreSQL Database\n  # ==================\n  db:\n    image: postgres:16\n    environment:\n      POSTGRES_USER: financeuser\n      POSTGRES_PASSWORD: financepass\n      POSTGRES_DB: financedb\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U financeuser -d financedb\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    volumes:\n      # Persist database data\n      - postgres_data:/var/lib/postgresql/data\n      # Optional: Run init scripts\n      - ./scripts/init-db.sql:/docker-entrypoint-initdb.d/init.sql\n    ports:\n      # Expose for local tools (DBeaver, pgAdmin)\n      - \"5432:5432\"\n    networks:\n      - finance-network\n\n# Named volumes persist data between container restarts\nvolumes:\n  postgres_data:\n\n# Custom network for service communication\nnetworks:\n  finance-network:\n    driver: bridge",
              "language": "yaml"
            },
            {
              "type": "THEORY",
              "title": "Understanding docker-compose.yml Structure",
              "content": "**Key sections explained:**\n\n**`services:`**\nDefines each container in your application.\n\n**`build:`**\n```yaml\nbuild:\n  context: .         # Directory containing Dockerfile\n  dockerfile: Dockerfile  # Which Dockerfile to use\n```\n\n**`ports:`**\n```yaml\nports:\n  - \"8000:8000\"     # host:container\n```\nMaps container port to your machine.\n\n**`environment:`**\n```yaml\nenvironment:\n  - DATABASE_URL=postgresql://...\n  - DEBUG=true\n```\nSets environment variables inside the container.\n\n**`depends_on:`**\n```yaml\ndepends_on:\n  db:\n    condition: service_healthy\n```\n- Waits for `db` service to be healthy before starting\n- `service_healthy` requires a healthcheck\n- Prevents \"connection refused\" errors\n\n**`volumes:`**\n```yaml\nvolumes:\n  - ./src:/app/src   # Bind mount: host path : container path\n  - postgres_data:/var/lib/postgresql/data  # Named volume\n```\n- **Bind mounts**: Sync local files into container (hot reload)\n- **Named volumes**: Persist data between restarts\n\n**`healthcheck:`**\n```yaml\nhealthcheck:\n  test: [\"CMD-SHELL\", \"pg_isready -U user -d db\"]\n  interval: 5s    # Check every 5 seconds\n  timeout: 5s     # Fail if no response in 5s\n  retries: 5      # Mark unhealthy after 5 failures\n```\nDocker checks if the service is ready."
            },
            {
              "type": "EXAMPLE",
              "title": "Essential Docker Compose Commands",
              "content": "**Commands you'll use daily:**",
              "code": "# Start all services in foreground (see logs)\ndocker compose up\n\n# Start in background (detached)\ndocker compose up -d\n\n# Start and rebuild images\ndocker compose up --build\n\n# Stop all services\ndocker compose down\n\n# Stop and remove volumes (WARNING: deletes database data!)\ndocker compose down -v\n\n# View logs for all services\ndocker compose logs\n\n# Follow logs in real-time\ndocker compose logs -f\n\n# View logs for specific service\ndocker compose logs app\ndocker compose logs db\n\n# List running services\ndocker compose ps\n\n# Execute command in running container\ndocker compose exec app bash\ndocker compose exec db psql -U financeuser -d financedb\n\n# Run a one-off command (starts new container)\ndocker compose run app pytest\ndocker compose run app uv add requests\n\n# Restart a specific service\ndocker compose restart app\n\n# Scale a service (run multiple instances)\ndocker compose up -d --scale app=3\n\n# Pull latest images\ndocker compose pull\n\n# View service configuration\ndocker compose config",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Connecting to the Database from Your App",
              "content": "**Updating your FastAPI app to use the Compose database:**",
              "code": "# src/config.py\nimport os\nfrom pydantic_settings import BaseSettings\n\n\nclass Settings(BaseSettings):\n    \"\"\"Application settings loaded from environment variables.\"\"\"\n    \n    # Database URL from docker-compose environment\n    database_url: str = \"sqlite+aiosqlite:///./dev.db\"\n    \n    # App settings\n    debug: bool = False\n    log_level: str = \"INFO\"\n    \n    class Config:\n        env_file = \".env\"  # Load from .env file if present\n\n\nsettings = Settings()\n\n\n# src/database.py\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\nfrom src.config import settings\n\n# Create async engine from DATABASE_URL\nengine = create_async_engine(\n    settings.database_url,\n    echo=settings.debug,  # Log SQL queries in debug mode\n)\n\n# Session factory\nAsyncSessionLocal = sessionmaker(\n    engine,\n    class_=AsyncSession,\n    expire_on_commit=False\n)\n\n\nasync def get_db():\n    \"\"\"Dependency for FastAPI routes.\"\"\"\n    async with AsyncSessionLocal() as session:\n        try:\n            yield session\n        finally:\n            await session.close()\n\n\n# src/main.py\nfrom fastapi import FastAPI, Depends\nfrom sqlalchemy.ext.asyncio import AsyncSession\nfrom sqlalchemy import text\n\nfrom src.database import get_db\nfrom src.config import settings\n\napp = FastAPI(\n    title=\"Personal Finance Tracker\",\n    debug=settings.debug\n)\n\n\n@app.get(\"/health\")\nasync def health_check(db: AsyncSession = Depends(get_db)):\n    \"\"\"Health check endpoint - verifies database connection.\"\"\"\n    try:\n        await db.execute(text(\"SELECT 1\"))\n        return {\"status\": \"healthy\", \"database\": \"connected\"}\n    except Exception as e:\n        return {\"status\": \"unhealthy\", \"database\": str(e)}",
              "language": "python"
            },
            {
              "type": "EXAMPLE",
              "title": "Development vs Production Compose Files",
              "content": "**Override files for different environments:**\n\nDocker Compose automatically merges `docker-compose.yml` with `docker-compose.override.yml` for development.",
              "code": "# docker-compose.yml (base configuration)\nservices:\n  app:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgresql+asyncpg://user:pass@db:5432/finance\n    depends_on:\n      db:\n        condition: service_healthy\n\n  db:\n    image: postgres:16\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: finance\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U user -d finance\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:\n\n---\n# docker-compose.override.yml (development overrides - auto-loaded)\nservices:\n  app:\n    volumes:\n      - ./src:/app/src  # Hot reload\n    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload\n    environment:\n      - DEBUG=true\n      - LOG_LEVEL=DEBUG\n\n  db:\n    ports:\n      - \"5432:5432\"  # Expose for local DB tools\n\n---\n# docker-compose.prod.yml (production configuration)\n# Use with: docker compose -f docker-compose.yml -f docker-compose.prod.yml up\nservices:\n  app:\n    # No volume mounts in production\n    # No --reload in production\n    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --workers 4\n    environment:\n      - DEBUG=false\n      - LOG_LEVEL=WARNING\n    deploy:\n      resources:\n        limits:\n          memory: 512M\n        reservations:\n          memory: 256M\n\n  db:\n    # Don't expose database port in production\n    ports: []",
              "language": "yaml"
            },
            {
              "type": "WARNING",
              "title": "Common Docker Compose Mistakes",
              "content": "### Avoid these common pitfalls:\n\n**1. Hardcoding secrets in docker-compose.yml**\n```yaml\n# WRONG - Secrets in version control!\nenvironment:\n  - POSTGRES_PASSWORD=mysecretpassword\n\n# CORRECT - Use .env file (add to .gitignore)\nenvironment:\n  - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}\n```\n\n**2. Not waiting for database to be ready**\n```yaml\n# WRONG - App starts before DB is ready\ndepends_on:\n  - db  # Only waits for container to start, not be ready\n\n# CORRECT - Wait for healthcheck\ndepends_on:\n  db:\n    condition: service_healthy\n```\n\n**3. Using bind mounts for database data**\n```yaml\n# WRONG - Permission issues on some systems\nvolumes:\n  - ./data:/var/lib/postgresql/data\n\n# CORRECT - Use named volumes\nvolumes:\n  - postgres_data:/var/lib/postgresql/data\n```\n\n**4. Forgetting to persist volumes**\n```bash\n# WRONG - Deletes all data!\ndocker compose down -v\n\n# CORRECT - Keep volumes\ndocker compose down\n```\n\n**5. Not using networks for isolation**\n```yaml\n# WRONG - All services on default network\nservices:\n  app:\n    ...\n  db:\n    ports:\n      - \"5432:5432\"  # DB exposed to world!\n\n# CORRECT - Internal network, no exposed ports\nservices:\n  db:\n    networks:\n      - internal\n    # No ports exposed\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Docker Compose** orchestrates multiple containers with one command\n- **`docker compose up`** starts everything, **`docker compose down`** stops it\n- **Service dependencies** use `depends_on` with `condition: service_healthy`\n- **Volume mounts** (`./src:/app/src`) enable hot reload in development\n- **Named volumes** (`postgres_data:`) persist database data between restarts\n- **Override files** separate development and production configurations\n- **Environment variables** should come from `.env` files, not hardcoded\n- **Services communicate** using service names as hostnames (`db:5432`)"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-06-challenge-1",
              "title": "Create a Docker Compose Configuration",
              "description": "Create a docker-compose.yml file that sets up:\n1. A FastAPI app service that builds from Dockerfile\n2. A PostgreSQL 16 database with healthcheck\n3. Proper service dependencies\n4. Volume mount for hot reload\n5. Named volume for database persistence\n\nFill in the missing parts.",
              "instructions": "Complete the docker-compose.yml with proper service configuration, healthcheck, dependencies, and volumes.",
              "starterCode": "# docker-compose.yml\nservices:\n  app:\n    build: .\n    ports:\n      - \"____:8000\"\n    environment:\n      - DATABASE_URL=postgresql+asyncpg://user:pass@____:5432/mydb\n    depends_on:\n      db:\n        condition: ____\n    volumes:\n      - ____:/app/src\n    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload\n\n  db:\n    image: postgres:____\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: mydb\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U ____ -d ____\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - ____:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:",
              "solution": "# docker-compose.yml\nservices:\n  app:\n    build: .\n    ports:\n      - \"8000:8000\"\n    environment:\n      - DATABASE_URL=postgresql+asyncpg://user:pass@db:5432/mydb\n    depends_on:\n      db:\n        condition: service_healthy\n    volumes:\n      - ./src:/app/src\n    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload\n\n  db:\n    image: postgres:16\n    environment:\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: pass\n      POSTGRES_DB: mydb\n    healthcheck:\n      test: [\"CMD-SHELL\", \"pg_isready -U user -d mydb\"]\n      interval: 5s\n      timeout: 5s\n      retries: 5\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\nvolumes:\n  postgres_data:",
              "language": "yaml",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "App connects to db service",
                  "expectedOutput": "@db:5432",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Uses service_healthy condition",
                  "expectedOutput": "service_healthy",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Uses named volume for postgres data",
                  "expectedOutput": "postgres_data:/var/lib/postgresql/data",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "The database hostname in Docker Compose is the service name: `db`"
                },
                {
                  "level": 2,
                  "text": "Use `service_healthy` as the condition to wait for the healthcheck"
                },
                {
                  "level": 3,
                  "text": "Mount `./src` to `/app/src` for hot reload"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using localhost instead of service name for database host",
                  "consequence": "App cannot connect to database",
                  "correction": "Use the service name 'db' as the hostname"
                },
                {
                  "mistake": "Forgetting the condition in depends_on",
                  "consequence": "App starts before database is ready",
                  "correction": "Use depends_on with condition: service_healthy"
                },
                {
                  "mistake": "Using bind mount for database data",
                  "consequence": "Permission issues and data corruption",
                  "correction": "Use named volumes for database persistence"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-15-lesson-07",
          "title": "Deployment and Final Capstone Project",
          "moduleId": "module-15",
          "order": 7,
          "estimatedMinutes": 45,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "The Concept: Shipping Your Code",
              "content": "**Deployment = Making your app available to users**\n\n**Think of it like:**\n- Opening a restaurant (not just cooking at home)\n- Publishing a book (not just writing it)\n- Launching a rocket (not just building it)\n\n**Development vs Production:**\n\n**Development** üíª\n- On your computer\n- Debug mode enabled\n- Small test database\n- You're the only user\n- Frequent changes\n\n**Production** üöÄ\n- On a server\n- Debug mode OFF\n- Real database\n- Many users\n- Stable, tested code\n\n**Deployment platforms:**\n\n**1. Platform-as-a-Service (PaaS)** ‚òÅÔ∏è\n- Railway (recommended - easy Heroku alternative)\n- Render (great free tier)\n- Fly.io (edge deployment)\n- PythonAnywhere (Python-specific)\n\nNote: Heroku discontinued free tier in 2022. Railway and Render offer similar experiences with free tiers.\n\n**Pros:**\n- Easy to use\n- Auto-scaling\n- Managed services\n\n**Cons:**\n- More expensive\n- Less control\n\n**2. Infrastructure-as-a-Service (IaaS)** üè¢\n- AWS EC2\n- DigitalOcean\n- Linode\n\n**Pros:**\n- Full control\n- Cheaper at scale\n\n**Cons:**\n- More setup\n- You manage servers\n\n**3. Serverless** ‚ö°\n- AWS Lambda\n- Vercel\n- Netlify Functions\n\n**Pros:**\n- No servers to manage\n- Pay per use\n\n**Cons:**\n- Cold starts\n- Vendor lock-in\n\n**Deployment checklist:**\n\n```\n1. ‚úÖ Environment variables (.env)\n2. ‚úÖ Production database\n3. ‚úÖ Debug mode = False\n4. ‚úÖ Secret key changed\n5. ‚úÖ Dependencies listed (requirements.txt)\n6. ‚úÖ HTTPS enabled\n7. ‚úÖ Error logging\n8. ‚úÖ Backups configured\n9. ‚úÖ Tests passing\n10. ‚úÖ Performance tested\n```\n\n**CI/CD (Continuous Integration/Deployment):**\n- Automated testing\n- Automated deployment\n- Every push triggers tests\n- Passing tests auto-deploy\n\n**Example workflow:**\n```\nDeveloper ‚Üí Git Push ‚Üí Tests Run ‚Üí Deploy to Server\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example: Preparing for Deployment",
              "content": "**Production deployment steps:**\n\n**1. Configuration:**\n- Separate dev/prod configs\n- Environment variables for secrets\n- Debug mode OFF in production\n\n**2. Dependencies:**\n- pyproject.toml for modern projects (uv)\n- requirements.txt for compatibility\n- Pin versions (fastapi==0.109.0)\n\n**3. Server:**\n- Use uvicorn for FastAPI (production-ready ASGI server)\n- Multiple workers for concurrency\n- Proper error handling\n\n**4. Monitoring:**\n- Logging to files\n- Error tracking (Sentry)\n- Health check endpoints\n\n**5. Security:**\n- HTTPS only\n- Secure cookies\n- Input validation\n- Regular updates",
              "code": "import os\nfrom pathlib import Path\n\nprint(\"=== Deployment Preparation ===\")\n\nprint(\"\\n1. Environment Configuration\")\n\nconfig_example = '''\n# config.py - Production-ready configuration for FastAPI\n\nimport os\nfrom pydantic_settings import BaseSettings\nfrom functools import lru_cache\n\nclass Settings(BaseSettings):\n    \"\"\"Application settings using Pydantic for validation\"\"\"\n    \n    # App settings\n    app_name: str = \"My API\"\n    debug: bool = False\n    \n    # Database\n    database_url: str = \"sqlite:///./dev.db\"\n    \n    # Security\n    secret_key: str = \"dev-key-change-in-production\"\n    access_token_expire_minutes: int = 30\n    \n    # Environment\n    environment: str = \"development\"\n    \n    class Config:\n        env_file = \".env\"\n\n@lru_cache()\ndef get_settings() -> Settings:\n    \"\"\"Cached settings instance\"\"\"\n    return Settings()\n'''\n\nprint(config_example)\n\nprint(\"\\n2. Project Configuration (pyproject.toml)\")\n\npyproject_example = '''\n# pyproject.toml - Modern Python project configuration\n[project]\nname = \"my-api\"\nversion = \"1.0.0\"\ndescription = \"Production FastAPI application\"\nrequires-python = \">=3.11\"\n\ndependencies = [\n    \"fastapi>=0.109.0\",\n    \"uvicorn[standard]>=0.27.0\",\n    \"sqlalchemy>=2.0.0\",\n    \"pydantic-settings>=2.0.0\",\n    \"python-jose[cryptography]>=3.3.0\",\n    \"passlib[bcrypt]>=1.7.4\",\n    \"asyncpg>=0.29.0\",  # PostgreSQL async driver\n]\n\n[project.optional-dependencies]\ndev = [\n    \"pytest>=7.4.0\",\n    \"httpx>=0.26.0\",\n    \"black>=24.0.0\",\n    \"ruff>=0.1.0\",\n    \"mypy>=1.8.0\",\n]\n\n[tool.uv]\ndev-dependencies = [\n    \"pytest>=7.4.0\",\n    \"httpx>=0.26.0\",\n]\n'''\n\nprint(pyproject_example)\n\nprint(\"\\n3. Procfile (works on Railway, Render)\")\n\nprocfile_example = '''\n# Procfile (works on Railway, Render, Fly.io)\nweb: uvicorn app.main:app --host 0.0.0.0 --port $PORT\n\n# With multiple workers for production\nweb: uvicorn app.main:app --host 0.0.0.0 --port $PORT --workers 4\n'''\n\nprint(procfile_example)\n\nprint(\"\\n4. Production-Ready FastAPI App\")\n\napp_example = '''\n# app/main.py - Production-ready FastAPI app\n\nimport os\nimport logging\nfrom contextlib import asynccontextmanager\nfrom fastapi import FastAPI, HTTPException, Request\nfrom fastapi.responses import JSONResponse\nfrom config import get_settings\n\n# Configure logging\nlogging.basicConfig(\n    level=logging.INFO,\n    format=\"%(asctime)s - %(name)s - %(levelname)s - %(message)s\"\n)\nlogger = logging.getLogger(__name__)\n\nsettings = get_settings()\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    \"\"\"Startup and shutdown events\"\"\"\n    # Startup: connect to database, etc.\n    logger.info(\"Starting up...\")\n    yield\n    # Shutdown: cleanup resources\n    logger.info(\"Shutting down...\")\n\napp = FastAPI(\n    title=settings.app_name,\n    debug=settings.debug,\n    lifespan=lifespan\n)\n\n# Global exception handler\n@app.exception_handler(Exception)\nasync def global_exception_handler(request: Request, exc: Exception):\n    logger.error(f\"Unhandled error: {exc}\")\n    return JSONResponse(\n        status_code=500,\n        content={\"error\": \"Internal server error\"}\n    )\n\n# Health check endpoint\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n\n# Main routes\n@app.get(\"/\")\nasync def index():\n    return {\"message\": \"Welcome to the API\"}\n'''\n\nprint(app_example)\n\nprint(\"\\n5. Docker Deployment (Optional)\")\n\ndockerfile_example = '''\n# Dockerfile\nFROM python:3.11-slim\n\n# Set working directory\nWORKDIR /app\n\n# Install uv for fast package management\nRUN pip install uv\n\n# Copy project files\nCOPY pyproject.toml .\nCOPY uv.lock .\n\n# Install dependencies\nRUN uv sync --frozen --no-dev\n\n# Copy application\nCOPY . .\n\n# Expose port\nEXPOSE 8000\n\n# Run application\nCMD [\"uv\", \"run\", \"uvicorn\", \"app.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n'''\n\nprint(dockerfile_example)\n\nprint(\"\\n=== Deployment Workflows ===\")\n\nprint(\"\\n1. Deploying to Railway (recommended):\")\nrailway_steps = '''\n# Deploying to Railway (recommended)\n# 1. Install Railway CLI\nnpm install -g @railway/cli\n\n# 2. Login\nrailway login\n\n# 3. Initialize project\nrailway init\n\n# 4. Add PostgreSQL database\nrailway add postgres\n\n# 5. Deploy\nrailway up\n\n# 6. Open in browser\nrailway open\n'''\n\nprint(railway_steps)\n\nprint(\"\\n2. Deploying to Render:\")\nrender_steps = '''\n# Deploying to Render\n# 1. Push code to GitHub\n# 2. Go to render.com and connect repo\n# 3. Select \"Web Service\"\n# 4. Set build command: pip install uv && uv sync\n# 5. Set start command: uvicorn app.main:app --host 0.0.0.0 --port $PORT\n# 6. Deploy automatically on push\n'''\n\nprint(render_steps)\n\nprint(\"\\n3. Deploying to Fly.io:\")\nflyio_steps = '''\n# Deploying to Fly.io\n# 1. Install Fly CLI\ncurl -L https://fly.io/install.sh | sh\n\n# 2. Login\nfly auth login\n\n# 3. Launch app (creates fly.toml)\nfly launch\n\n# 4. Add PostgreSQL database\nfly postgres create\nfly postgres attach <db-name>\n\n# 5. Deploy\nfly deploy\n\n# 6. Open in browser\nfly open\n'''\n\nprint(flyio_steps)\n\nprint(\"\\n4. Using GitHub Actions (CI/CD):\")\ngithub_actions = '''\n# .github/workflows/deploy.yml\n\nname: Deploy to Production\n\non:\n  push:\n    branches: [ main ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v4\n    \n    - name: Install uv\n      uses: astral-sh/setup-uv@v4\n    \n    - name: Set up Python\n      run: uv python install 3.11\n    \n    - name: Install dependencies\n      run: uv sync --all-extras\n    \n    - name: Run tests\n      run: uv run pytest\n    \n    - name: Check code style\n      run: uv run ruff check .\n    \n  deploy:\n    needs: test\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - name: Deploy to Railway\n        uses: bervProject/railway-deploy@main\n        with:\n          railway_token: ${{ secrets.RAILWAY_TOKEN }}\n'''\n\nprint(github_actions)",
              "language": "python"
            },
            {
              "type": "ANALOGY",
              "title": "Final Capstone Project",
              "content": "**Capstone = Bring it all together**\n\n**Project: Task Management API with Authentication**\n\n**Features to implement:**\n\n**1. User Management** üë§\n- Registration (POST /api/auth/register)\n- Login (POST /api/auth/login)\n- Logout (POST /api/auth/logout)\n- Password hashing with bcrypt\n- JWT tokens for authentication\n\n**2. Task CRUD** ‚úÖ\n- Create task (POST /api/tasks)\n- List tasks (GET /api/tasks)\n- Get task (GET /api/tasks/{id})\n- Update task (PUT /api/tasks/{id})\n- Delete task (DELETE /api/tasks/{id})\n- Filter by status, priority\n\n**3. Categories** üè∑Ô∏è\n- Create category (POST /api/categories)\n- Assign tasks to categories\n- List tasks by category\n\n**4. Security** üîí\n- Authentication required for all endpoints\n- Users can only access their own tasks\n- Input validation\n- Rate limiting\n\n**5. Testing** üß™\n- Unit tests for all functions\n- Integration tests for API endpoints\n- 80%+ code coverage\n\n**6. Documentation** üìö\n- README with setup instructions\n- API documentation\n- Docstrings for all functions\n- Environment setup guide\n\n**7. Deployment** üöÄ\n- Deploy to Railway, Render, or Fly.io\n- Production database (PostgreSQL)\n- Environment variables configured\n- HTTPS enabled\n\n**Tech stack:**\n- FastAPI (web framework)\n- SQLAlchemy 2.0 + asyncio (database ORM)\n- PostgreSQL (database - SQLite for development)\n- python-jose (JWT authentication)\n- pytest + httpx (testing)\n- Railway or Render (deployment)\n- uv (package management)\n\n**Evaluation criteria:**\n- ‚úÖ All features working\n- ‚úÖ Tests passing\n- ‚úÖ Code quality (PEP 8, docstrings)\n- ‚úÖ Git history (clear commits)\n- ‚úÖ Documentation complete\n- ‚úÖ Successfully deployed\n- ‚úÖ Security best practices\n- ‚úÖ Using uv for package management\n- ‚úÖ pyproject.toml for project configuration"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Deployment = shipping code to users** - Production is different from development\n- **Environment variables for secrets** - Never commit passwords or API keys\n- **Use production servers** - uvicorn with workers, not development mode\n- **CI/CD automates deployment** - Tests run automatically, deploy if passing\n- **Monitor your application** - Logging and error tracking are essential\n- **Security matters** - HTTPS, secure cookies, input validation\n- **Capstone demonstrates skills** - Full-stack project shows what you've learned\n- **Keep learning** - Technology evolves, stay curious and keep building"
            }
          ],
          "challenges": []
        },
        {
          "id": "module-15-lesson-08",
          "title": "Deploying to Render",
          "moduleId": "module-15",
          "order": 8,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Render?",
              "content": "**Render = Modern PaaS with excellent free tier**\n\nRender is a modern Platform-as-a-Service (PaaS) that makes deployment simple while offering powerful features:\n\n**Why choose Render?**\n\n1. **Generous free tier**\n   - Free web services (with some limits)\n   - Free PostgreSQL database (90 days)\n   - Free Redis cache\n   - Great for learning and side projects\n\n2. **Simple deployment**\n   - Connect GitHub/GitLab\n   - Automatic deployments on push\n   - Zero-downtime deploys\n\n3. **Infrastructure as Code**\n   - `render.yaml` blueprint defines everything\n   - Version-controlled infrastructure\n   - Reproducible environments\n\n4. **Native Docker support**\n   - Use your Dockerfile\n   - Or let Render detect your app\n   - No Docker knowledge required\n\n**Render vs other platforms:**\n\n| Feature | Render | Railway | Fly.io |\n|---------|--------|---------|--------|\n| Free tier | Yes | Limited | Yes |\n| PostgreSQL | Free 90 days | Add-on | Fly Postgres |\n| Auto-deploy | Yes | Yes | Optional |\n| Docker support | Yes | Yes | Yes |\n| Blueprint file | render.yaml | railway.toml | fly.toml |\n\n**For our Personal Finance Tracker:**\n- Web service running FastAPI\n- PostgreSQL database for data\n- Automatic SSL/HTTPS\n- Environment variables for secrets"
            },
            {
              "type": "EXAMPLE",
              "title": "Creating the render.yaml Blueprint",
              "content": "**render.yaml = Your deployment blueprint**\n\nThis file tells Render exactly how to deploy your application. Place it in your repository root.",
              "code": "# render.yaml - Render Blueprint for Personal Finance Tracker\n# Place this file in your repository root\n\nservices:\n  # Web service (FastAPI application)\n  - type: web\n    name: finance-api\n    runtime: docker\n    dockerfilePath: ./Dockerfile\n    \n    # Health check endpoint\n    healthCheckPath: /health\n    \n    # Environment variables\n    envVars:\n      # Database connection (auto-populated from database)\n      - key: DATABASE_URL\n        fromDatabase:\n          name: finance-db\n          property: connectionString\n      \n      # Auto-generate a secure secret key\n      - key: SECRET_KEY\n        generateValue: true\n      \n      # Environment setting\n      - key: ENVIRONMENT\n        value: production\n      \n      # Disable debug mode\n      - key: DEBUG\n        value: \"false\"\n    \n    # Auto-deploy when main branch updates\n    autoDeploy: true\n    \n    # Branch to deploy from\n    branch: main\n\n# PostgreSQL database\ndatabases:\n  - name: finance-db\n    plan: free  # Free tier for 90 days\n    databaseName: finance_tracker\n    user: finance_user",
              "language": "yaml"
            },
            {
              "type": "THEORY",
              "title": "Understanding render.yaml Structure",
              "content": "**Let's break down each section:**\n\n**Services section:**\n```yaml\nservices:\n  - type: web       # Web service (receives HTTP traffic)\n    name: finance-api  # Service name in dashboard\n    runtime: docker    # Use Dockerfile for builds\n```\n\n**Supported types:**\n- `web` - HTTP services (FastAPI, Flask, Django)\n- `worker` - Background workers (Celery, RQ)\n- `cron` - Scheduled jobs\n- `static` - Static websites\n\n**Environment variables:**\n```yaml\nenvVars:\n  # Reference database connection\n  - key: DATABASE_URL\n    fromDatabase:\n      name: finance-db\n      property: connectionString\n  \n  # Auto-generate secure value\n  - key: SECRET_KEY\n    generateValue: true\n  \n  # Static value\n  - key: DEBUG\n    value: \"false\"\n```\n\n**Database section:**\n```yaml\ndatabases:\n  - name: finance-db\n    plan: free       # free, basic, standard, etc.\n    databaseName: finance_tracker\n    user: finance_user\n```\n\n**Important:** The `fromDatabase` reference automatically creates the DATABASE_URL when the database is provisioned."
            },
            {
              "type": "EXAMPLE",
              "title": "Deploying to Render",
              "content": "**Step-by-step deployment process:**",
              "code": "# Step 1: Ensure you have these files in your repo\n# - Dockerfile (from previous lesson)\n# - render.yaml (blueprint)\n# - pyproject.toml / uv.lock\n# - src/ directory with your FastAPI app\n\n# Step 2: Push to GitHub\ngit add .\ngit commit -m \"Add Render deployment configuration\"\ngit push origin main\n\n# Step 3: Connect Render to GitHub\n# 1. Go to https://render.com\n# 2. Sign up / Log in\n# 3. Click \"New +\" > \"Blueprint\"\n# 4. Connect your GitHub repository\n# 5. Render detects render.yaml automatically\n\n# Step 4: Deploy via Render Dashboard\n# 1. Click \"Apply\" to create services from blueprint\n# 2. Wait for build and deploy (5-10 minutes first time)\n# 3. Your app is live at https://finance-api.onrender.com\n\n# Step 5: Verify deployment\ncurl https://finance-api.onrender.com/health\n# Expected: {\"status\": \"healthy\"}\n\n# Useful Render CLI commands (optional)\n# Install: npm install -g @render-cli/cli\nrender login\nrender services list\nrender logs --service finance-api --tail",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Alternative: Native Python Runtime",
              "content": "**If you prefer not to use Docker, Render can detect Python automatically:**",
              "code": "# render.yaml - Using Native Python Runtime\n# Render detects Python from requirements.txt or pyproject.toml\n\nservices:\n  - type: web\n    name: finance-api\n    runtime: python\n    \n    # Build command (install dependencies)\n    buildCommand: |\n      pip install uv\n      uv sync --frozen --no-dev\n    \n    # Start command\n    startCommand: uvicorn src.main:app --host 0.0.0.0 --port $PORT\n    \n    # Health check\n    healthCheckPath: /health\n    \n    envVars:\n      - key: DATABASE_URL\n        fromDatabase:\n          name: finance-db\n          property: connectionString\n      - key: SECRET_KEY\n        generateValue: true\n      - key: PYTHON_VERSION\n        value: \"3.13.0\"\n\ndatabases:\n  - name: finance-db\n    plan: free",
              "language": "yaml"
            },
            {
              "type": "WARNING",
              "title": "Common Render Deployment Issues",
              "content": "### Watch out for these common problems:\n\n**1. Free tier cold starts**\n```\n# Free services spin down after 15 minutes of inactivity\n# First request after spin-down takes 30-60 seconds\n\n# Solution: Use a health check service like UptimeRobot\n# or upgrade to paid tier for always-on\n```\n\n**2. DATABASE_URL format mismatch**\n```python\n# WRONG - Render uses postgresql://, SQLAlchemy 2.0 needs postgresql+asyncpg://\nDATABASE_URL = os.environ[\"DATABASE_URL\"]\n\n# CORRECT - Convert the URL for async SQLAlchemy\ndb_url = os.environ[\"DATABASE_URL\"]\nif db_url.startswith(\"postgres://\"):\n    db_url = db_url.replace(\"postgres://\", \"postgresql+asyncpg://\", 1)\n```\n\n**3. Missing health check endpoint**\n```python\n# WRONG - No health check, Render can't verify app is running\n# App may show as \"unhealthy\" in dashboard\n\n# CORRECT - Add health check endpoint\n@app.get(\"/health\")\nasync def health_check():\n    return {\"status\": \"healthy\"}\n```\n\n**4. Not setting PORT correctly**\n```python\n# WRONG - Hardcoded port\nuvicorn.run(app, port=8000)\n\n# CORRECT - Use PORT environment variable\nimport os\nport = int(os.environ.get(\"PORT\", 8000))\nuvicorn.run(app, host=\"0.0.0.0\", port=port)\n```\n\n**5. Free database expiration**\n```\n# Free PostgreSQL expires after 90 days\n# Set a reminder to either:\n# - Export your data before expiration\n# - Upgrade to a paid plan\n# - Create a new free database and migrate\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **render.yaml** defines your entire infrastructure as code\n- **Free tier** is great for learning but has cold starts and time limits\n- **`fromDatabase`** automatically links services to databases\n- **`generateValue: true`** creates secure random values for secrets\n- **Health checks** are essential for Render to know your app is running\n- **Auto-deploy** triggers on every push to your connected branch\n- Convert **DATABASE_URL** format for async SQLAlchemy compatibility"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-08-challenge-1",
              "title": "Create a Render Blueprint",
              "description": "Create a render.yaml file for a Flask application that:\n1. Uses Docker runtime\n2. Connects to a PostgreSQL database named 'myapp-db'\n3. Generates a SECRET_KEY automatically\n4. Has a health check at /api/health\n5. Auto-deploys from the main branch",
              "instructions": "Complete the render.yaml blueprint with proper service and database configuration.",
              "starterCode": "# render.yaml for Flask Application\n\nservices:\n  - type: ____\n    name: myapp-api\n    runtime: ____\n    dockerfilePath: ./Dockerfile\n    healthCheckPath: ____\n    \n    envVars:\n      - key: DATABASE_URL\n        fromDatabase:\n          name: ____\n          property: connectionString\n      \n      - key: SECRET_KEY\n        ____: true\n    \n    autoDeploy: ____\n    branch: ____\n\ndatabases:\n  - name: ____\n    plan: free",
              "solution": "# render.yaml for Flask Application\n\nservices:\n  - type: web\n    name: myapp-api\n    runtime: docker\n    dockerfilePath: ./Dockerfile\n    healthCheckPath: /api/health\n    \n    envVars:\n      - key: DATABASE_URL\n        fromDatabase:\n          name: myapp-db\n          property: connectionString\n      \n      - key: SECRET_KEY\n        generateValue: true\n    \n    autoDeploy: true\n    branch: main\n\ndatabases:\n  - name: myapp-db\n    plan: free",
              "language": "yaml",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Has web service type",
                  "expectedOutput": "type: web",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Uses docker runtime",
                  "expectedOutput": "runtime: docker",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Database name matches in both sections",
                  "expectedOutput": "myapp-db",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Web services use type: web and runtime: docker for Dockerfile-based builds"
                },
                {
                  "level": 2,
                  "text": "The database name in fromDatabase must match the name in the databases section"
                },
                {
                  "level": 3,
                  "text": "Use generateValue: true for SECRET_KEY to auto-generate a secure value"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Mismatched database names between fromDatabase and databases section",
                  "consequence": "Render can't link the service to the database",
                  "correction": "Ensure the name in fromDatabase.name matches databases[].name exactly"
                },
                {
                  "mistake": "Forgetting healthCheckPath",
                  "consequence": "Render can't verify if your app is running correctly",
                  "correction": "Add healthCheckPath with your health check endpoint"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-15-lesson-09",
          "title": "Deploying to Railway",
          "moduleId": "module-15",
          "order": 9,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Railway?",
              "content": "**Railway = Developer-focused PaaS with predictable pricing**\n\nRailway is designed for developers who want simplicity without sacrificing power:\n\n**Why choose Railway?**\n\n1. **Developer experience**\n   - Instant deploys from GitHub\n   - Excellent CLI tool\n   - Real-time logs and metrics\n   - One-click database provisioning\n\n2. **Predictable pricing**\n   - Pay only for resources used\n   - $5 free trial credit monthly (hobby)\n   - No surprise bills\n   - Usage-based, not tier-based\n\n3. **Built-in services**\n   - PostgreSQL, MySQL, Redis, MongoDB\n   - One-click provisioning\n   - Automatic backups\n   - Private networking\n\n4. **Flexible configuration**\n   - Auto-detect or Dockerfile\n   - railway.toml for customization\n   - Environment groups\n   - Preview environments\n\n**Railway workflow:**\n```\nCode Push ‚Üí Auto Build ‚Üí Deploy ‚Üí Monitor\n    ‚Üì\nPull Request ‚Üí Preview Environment\n```\n\n**For our Personal Finance Tracker:**\n- FastAPI app deployed via Railway CLI or GitHub\n- PostgreSQL plugin for database\n- Environment variables in Railway dashboard\n- Automatic HTTPS and custom domains"
            },
            {
              "type": "EXAMPLE",
              "title": "Railway CLI Setup and Deployment",
              "content": "**The Railway CLI is the fastest way to deploy:**",
              "code": "# Step 1: Install Railway CLI\n# On macOS/Linux:\ncurl -fsSL https://railway.app/install.sh | sh\n\n# On Windows (PowerShell):\niwr https://railway.app/install.ps1 -useb | iex\n\n# Or via npm (cross-platform):\nnpm install -g @railway/cli\n\n# Step 2: Login to Railway\nrailway login\n# Opens browser for authentication\n\n# Step 3: Initialize project (from your app directory)\ncd finance-tracker\nrailway init\n# Creates new Railway project or links to existing\n\n# Step 4: Add PostgreSQL database\nrailway add --database postgresql\n# Provisions database and sets DATABASE_URL automatically\n\n# Step 5: Set environment variables\nrailway variables set SECRET_KEY=\"your-secret-key-here\"\nrailway variables set ENVIRONMENT=\"production\"\nrailway variables set DEBUG=\"false\"\n\n# Step 6: Deploy\nrailway up\n# Builds and deploys your application\n\n# Step 7: Open in browser\nrailway open\n\n# Useful commands:\nrailway logs          # View logs\nrailway status        # Check deployment status\nrailway run <cmd>     # Run command in Railway environment\nrailway connect postgresql  # Connect to database\nrailway domain        # Get or set custom domain",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Railway Configuration File",
              "content": "**railway.toml = Fine-tune your deployment**\n\nWhile Railway auto-detects most settings, railway.toml gives you control:",
              "code": "# railway.toml - Railway Configuration\n# Place in repository root\n\n[build]\n# Use Dockerfile for builds\nbuilder = \"dockerfile\"\ndockerfilePath = \"./Dockerfile\"\n\n# Or use Nixpacks (Railway's buildpack system)\n# builder = \"nixpacks\"\n\n[deploy]\n# Number of instances (default: 1)\nreplicas = 1\n\n# Health check configuration\nhealthcheckPath = \"/health\"\nhealthcheckTimeout = 300\n\n# Restart policy\nrestartPolicyType = \"on_failure\"\nrestartPolicyMaxRetries = 3\n\n# Start command (overrides Dockerfile CMD)\n# startCommand = \"uvicorn src.main:app --host 0.0.0.0 --port $PORT\"\n\n[deploy.resources]\n# Memory limit (optional, for resource control)\n# memory = \"512MB\"\n# cpu = \"0.5\"",
              "language": "toml"
            },
            {
              "type": "EXAMPLE",
              "title": "GitHub Integration Setup",
              "content": "**Deploy automatically on every push:**",
              "code": "# Step 1: Go to railway.app and create new project\n# Click \"New Project\" > \"Deploy from GitHub repo\"\n\n# Step 2: Select your repository\n# Railway will auto-detect Python/Docker and configure build\n\n# Step 3: Add PostgreSQL\n# In project dashboard: \"New\" > \"Database\" > \"PostgreSQL\"\n# DATABASE_URL is automatically added to your service\n\n# Step 4: Add environment variables\n# Go to your service > \"Variables\" tab\n# Add:\n#   SECRET_KEY = <generate a secure key>\n#   ENVIRONMENT = production\n#   DEBUG = false\n\n# Step 5: Configure domain\n# Service > \"Settings\" > \"Generate Domain\"\n# Your app is at: https://your-app.up.railway.app\n\n# Optional: railway.json for project settings\n{\n  \"$schema\": \"https://railway.app/railway.schema.json\",\n  \"build\": {\n    \"builder\": \"DOCKERFILE\",\n    \"dockerfilePath\": \"Dockerfile\"\n  },\n  \"deploy\": {\n    \"restartPolicyType\": \"ON_FAILURE\",\n    \"restartPolicyMaxRetries\": 3\n  }\n}",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Connecting to Railway PostgreSQL",
              "content": "**Access your database for debugging and migrations:**",
              "code": "# Connect to PostgreSQL via CLI\nrailway connect postgresql\n# Opens psql session connected to your database\n\n# Run database migrations\nrailway run alembic upgrade head\n\n# Run any command in Railway environment\nrailway run python -c \"from src.database import engine; print(engine.url)\"\n\n# Get connection details\nrailway variables\n# Shows all environment variables including DATABASE_URL\n\n# Example DATABASE_URL format:\n# postgresql://user:password@host.railway.internal:5432/railway\n\n# For async SQLAlchemy, convert the URL in your config:\nimport os\n\ndef get_database_url() -> str:\n    \"\"\"Get database URL, converting for async if needed.\"\"\"\n    url = os.environ.get(\"DATABASE_URL\", \"\")\n    \n    # Railway uses postgresql://, convert for asyncpg\n    if url.startswith(\"postgresql://\"):\n        url = url.replace(\"postgresql://\", \"postgresql+asyncpg://\", 1)\n    \n    return url",
              "language": "bash"
            },
            {
              "type": "WARNING",
              "title": "Common Railway Deployment Issues",
              "content": "### Watch out for these common problems:\n\n**1. PORT environment variable**\n```python\n# WRONG - Hardcoded port\nuvicorn.run(app, port=8000)\n\n# CORRECT - Railway sets PORT dynamically\nimport os\nport = int(os.environ.get(\"PORT\", 8000))\nuvicorn.run(app, host=\"0.0.0.0\", port=port)\n```\n\n**2. Missing Procfile or start command**\n```\n# Railway needs to know how to start your app\n# Option 1: Procfile\nweb: uvicorn src.main:app --host 0.0.0.0 --port $PORT\n\n# Option 2: railway.toml\n[deploy]\nstartCommand = \"uvicorn src.main:app --host 0.0.0.0 --port $PORT\"\n\n# Option 3: Dockerfile CMD (recommended)\nCMD [\"uvicorn\", \"src.main:app\", \"--host\", \"0.0.0.0\", \"--port\", \"8000\"]\n```\n\n**3. Build failures with uv**\n```dockerfile\n# If Railway doesn't have uv, install it in Dockerfile\nFROM python:3.13-slim\nRUN pip install uv\n# ... rest of Dockerfile\n```\n\n**4. Database connection refused**\n```python\n# WRONG - Using localhost\nDATABASE_URL = \"postgresql://localhost/mydb\"\n\n# CORRECT - Use Railway's DATABASE_URL\nDATABASE_URL = os.environ[\"DATABASE_URL\"]\n# Railway provides the full connection string\n```\n\n**5. Running out of free credits**\n```\n# Railway hobby plan: $5 free credit/month\n# Monitor usage in dashboard > Usage tab\n# Tips to reduce usage:\n# - Use smaller memory limits\n# - Stop unused services\n# - Delete old deployments\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Railway CLI** (`railway up`) is the fastest deployment method\n- **`railway add --database postgresql`** provisions database instantly\n- **railway.toml** customizes build and deploy settings\n- **PORT environment variable** is set by Railway - don't hardcode ports\n- **`railway run`** executes commands in the Railway environment\n- **Automatic HTTPS** and custom domains included\n- **Usage-based pricing** is predictable but monitor your credits"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-09-challenge-1",
              "title": "Create a Railway Configuration",
              "description": "Create a railway.toml file that:\n1. Uses Dockerfile for builds\n2. Sets health check to /api/health with 300 second timeout\n3. Uses on_failure restart policy with max 5 retries\n4. Configures 2 replicas for high availability",
              "instructions": "Complete the railway.toml configuration file.",
              "starterCode": "# railway.toml\n\n[build]\nbuilder = \"____\"\ndockerfilePath = \"./Dockerfile\"\n\n[deploy]\nreplicas = ____\n\nhealthcheckPath = \"____\"\nhealthcheckTimeout = ____\n\nrestartPolicyType = \"____\"\nrestartPolicyMaxRetries = ____",
              "solution": "# railway.toml\n\n[build]\nbuilder = \"dockerfile\"\ndockerfilePath = \"./Dockerfile\"\n\n[deploy]\nreplicas = 2\n\nhealthcheckPath = \"/api/health\"\nhealthcheckTimeout = 300\n\nrestartPolicyType = \"on_failure\"\nrestartPolicyMaxRetries = 5",
              "language": "toml",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Uses dockerfile builder",
                  "expectedOutput": "dockerfile",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Health check path is /api/health",
                  "expectedOutput": "/api/health",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Uses on_failure restart policy",
                  "expectedOutput": "on_failure",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Builder should be 'dockerfile' (lowercase) when using a Dockerfile"
                },
                {
                  "level": 2,
                  "text": "restartPolicyType uses underscores: 'on_failure', not 'on-failure'"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using 'docker' instead of 'dockerfile' for builder",
                  "consequence": "Railway won't recognize the build configuration",
                  "correction": "Use builder = \"dockerfile\" for Dockerfile-based builds"
                },
                {
                  "mistake": "Using dashes in restartPolicyType (on-failure)",
                  "consequence": "Invalid configuration format",
                  "correction": "Use underscores: on_failure"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-15-lesson-10",
          "title": "Deploying to Fly.io",
          "moduleId": "module-15",
          "order": 10,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Fly.io?",
              "content": "**Fly.io = Global edge deployment with low latency**\n\nFly.io runs your apps on lightweight VMs (Firecracker) in data centers worldwide:\n\n**Why choose Fly.io?**\n\n1. **Global edge network**\n   - 30+ regions worldwide\n   - Deploy close to your users\n   - Low latency everywhere\n   - Automatic request routing\n\n2. **VM-based (not containers)**\n   - Full Linux VMs (Firecracker)\n   - More control than containers\n   - Persistent storage options\n   - SSH into running machines\n\n3. **Excellent free tier**\n   - 3 shared VMs free\n   - 1GB persistent storage\n   - 160GB outbound bandwidth\n   - Generous for hobby projects\n\n4. **Fly Postgres**\n   - Managed PostgreSQL\n   - Automatic failover\n   - Read replicas\n   - Point-in-time recovery\n\n**Fly.io architecture:**\n```\nUser Request ‚Üí Anycast IP ‚Üí Nearest Region ‚Üí Your App\n                              ‚Üì\n                         Auto-scaled VMs\n```\n\n**When to choose Fly.io:**\n- Users in multiple geographic regions\n- Need low latency (gaming, real-time apps)\n- Want full VM control\n- Need persistent storage\n\n**For our Personal Finance Tracker:**\n- FastAPI running on Fly Machines\n- Fly Postgres for database\n- Multi-region for global users\n- Automatic HTTPS with certificates"
            },
            {
              "type": "EXAMPLE",
              "title": "Installing and Configuring flyctl",
              "content": "**flyctl is the Fly.io command-line interface:**",
              "code": "# Step 1: Install flyctl\n\n# On macOS:\nbrew install flyctl\n# Or:\ncurl -L https://fly.io/install.sh | sh\n\n# On Linux:\ncurl -L https://fly.io/install.sh | sh\n\n# On Windows (PowerShell):\niwr https://fly.io/install.ps1 -useb | iex\n\n# Step 2: Sign up / Login\nfly auth signup    # Create new account\n# or\nfly auth login     # Login to existing account\n\n# Step 3: Launch your app (from project directory)\ncd finance-tracker\nfly launch\n\n# fly launch will:\n# 1. Detect your app type (Python/Docker)\n# 2. Generate fly.toml configuration\n# 3. Ask about region, resources, databases\n# 4. Optionally deploy immediately\n\n# Step 4: Create PostgreSQL database\nfly postgres create --name finance-db\n# Choose region and size when prompted\n\n# Step 5: Attach database to your app\nfly postgres attach finance-db\n# Adds DATABASE_URL to your app secrets\n\n# Step 6: Deploy\nfly deploy\n\n# Step 7: Open in browser\nfly open",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "The fly.toml Configuration File",
              "content": "**fly.toml = Your Fly.io deployment configuration**\n\nGenerated by `fly launch`, customize for your needs:",
              "code": "# fly.toml - Fly.io Configuration\n# Generated by 'fly launch' and customized for FastAPI\n\napp = \"finance-tracker\"\nprimary_region = \"ord\"  # Chicago - change based on your users\n\n# Build configuration\n[build]\n  dockerfile = \"Dockerfile\"\n\n# HTTP service configuration\n[http_service]\n  internal_port = 8000\n  force_https = true\n  auto_stop_machines = true\n  auto_start_machines = true\n  min_machines_running = 0\n  \n  [http_service.concurrency]\n    type = \"connections\"\n    hard_limit = 100\n    soft_limit = 80\n\n# Health check configuration\n[[http_service.checks]]\n  interval = \"30s\"\n  timeout = \"5s\"\n  grace_period = \"10s\"\n  method = \"GET\"\n  path = \"/health\"\n\n# Process configuration\n[processes]\n  app = \"uvicorn src.main:app --host 0.0.0.0 --port 8000\"\n\n# VM configuration\n[[vm]]\n  size = \"shared-cpu-1x\"\n  memory = \"256mb\"\n\n# Environment variables (non-secrets)\n[env]\n  ENVIRONMENT = \"production\"\n  DEBUG = \"false\"",
              "language": "toml"
            },
            {
              "type": "EXAMPLE",
              "title": "Managing Secrets and Environment Variables",
              "content": "**Secrets are encrypted and available to your app:**",
              "code": "# Set secrets (encrypted, not shown in fly.toml)\nfly secrets set SECRET_KEY=\"your-super-secret-key-here\"\nfly secrets set API_KEY=\"external-api-key\"\n\n# Set multiple secrets at once\nfly secrets set SECRET_KEY=\"key1\" JWT_SECRET=\"key2\" API_TOKEN=\"token\"\n\n# List all secrets (names only, not values)\nfly secrets list\n\n# Remove a secret\nfly secrets unset API_KEY\n\n# Import from .env file\ncat .env.production | fly secrets import\n\n# Secrets are available in your app as environment variables:\nimport os\n\nsecret_key = os.environ[\"SECRET_KEY\"]\ndatabase_url = os.environ[\"DATABASE_URL\"]  # Set by fly postgres attach\n\n# View deployed app's environment\nfly ssh console -C \"env | grep -E '(SECRET|DATABASE)'\"",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Fly Postgres Setup and Management",
              "content": "**Fly Postgres = Managed PostgreSQL on Fly.io:**",
              "code": "# Create a Postgres cluster\nfly postgres create --name finance-db\n# Interactive prompts for:\n# - Region (pick one close to your app)\n# - Configuration (Development, Production)\n# - Size (1GB free tier available)\n\n# Attach to your app (adds DATABASE_URL secret)\nfly postgres attach finance-db --app finance-tracker\n\n# Connect to database directly\nfly postgres connect -a finance-db\n# Opens psql session\n\n# Run migrations\nfly ssh console -C \"alembic upgrade head\"\n\n# Or use proxy for local tools\nfly proxy 5432 -a finance-db\n# In another terminal:\npsql postgres://postgres:password@localhost:5432/finance_db\n\n# Check database status\nfly status -a finance-db\n\n# Scale Postgres (add read replicas)\nfly postgres scale -a finance-db --count 2\n\n# View connection string format\n# postgres://user:password@finance-db.internal:5432/finance_db\n\n# For async SQLAlchemy, convert in your config:\ndef get_database_url() -> str:\n    url = os.environ.get(\"DATABASE_URL\", \"\")\n    if url.startswith(\"postgres://\"):\n        url = url.replace(\"postgres://\", \"postgresql+asyncpg://\", 1)\n    return url",
              "language": "bash"
            },
            {
              "type": "EXAMPLE",
              "title": "Scaling and Multi-Region Deployment",
              "content": "**Deploy globally for low latency worldwide:**",
              "code": "# Add regions (deploy to multiple locations)\nfly regions add lhr sin syd\n# lhr = London, sin = Singapore, syd = Sydney\n\n# List current regions\nfly regions list\n\n# Scale machines per region\nfly scale count 2 --region ord\nfly scale count 1 --region lhr\nfly scale count 1 --region sin\n\n# Scale memory/CPU\nfly scale memory 512  # 512MB RAM\nfly scale vm shared-cpu-2x  # More CPU\n\n# View machine status\nfly status\nfly machines list\n\n# Auto-scaling configuration in fly.toml\n[http_service]\n  auto_stop_machines = true   # Stop when idle\n  auto_start_machines = true  # Start on request\n  min_machines_running = 1    # Always keep 1 running\n  max_machines_running = 5    # Scale up to 5\n\n# Useful monitoring commands\nfly logs                # Live log streaming\nfly logs --app finance-db  # Database logs\nfly dashboard           # Open web dashboard\nfly ssh console         # SSH into running machine",
              "language": "bash"
            },
            {
              "type": "WARNING",
              "title": "Common Fly.io Deployment Issues",
              "content": "### Watch out for these common problems:\n\n**1. Health check failures**\n```toml\n# WRONG - Health check times out during startup\n[[http_service.checks]]\n  grace_period = \"5s\"  # Too short for Python startup\n\n# CORRECT - Give app time to start\n[[http_service.checks]]\n  grace_period = \"30s\"  # Longer grace period\n  interval = \"30s\"\n  timeout = \"10s\"\n```\n\n**2. Port mismatch**\n```toml\n# fly.toml says internal_port = 8000\n[http_service]\n  internal_port = 8000\n\n# But Dockerfile uses 8080 - MISMATCH!\n# Ensure your app listens on the same port\n```\n\n**3. Database connection string format**\n```python\n# Fly uses postgres://, asyncpg needs postgresql+asyncpg://\nurl = os.environ[\"DATABASE_URL\"]\nif url.startswith(\"postgres://\"):\n    url = url.replace(\"postgres://\", \"postgresql+asyncpg://\", 1)\n```\n\n**4. Machines stopping unexpectedly**\n```toml\n# Free tier machines stop when idle\n# Keep at least one running:\n[http_service]\n  min_machines_running = 1\n  auto_stop_machines = false  # Or disable auto-stop\n```\n\n**5. Running out of free tier**\n```\n# Free tier limits:\n# - 3 shared-cpu-1x VMs\n# - 256MB memory each\n# - 1GB persistent storage\n\n# Check usage:\nfly billing\n\n# Reduce costs:\nfly scale memory 256  # Minimum memory\nfly scale count 1     # Single instance\n```\n\n**6. Secrets not available during build**\n```dockerfile\n# WRONG - Trying to use SECRET_KEY during build\nRUN python setup.py --secret=$SECRET_KEY\n\n# CORRECT - Secrets are only available at runtime\n# Use build args for build-time values:\n# fly deploy --build-arg MY_ARG=value\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Fly.io uses VMs** (Firecracker), not containers - more control and persistence\n- **`fly launch`** creates app and generates fly.toml configuration\n- **`fly postgres create/attach`** provisions and connects databases\n- **`fly secrets set`** manages encrypted environment variables\n- **Multi-region deployment** reduces latency for global users\n- **Auto-stop/auto-start** manages costs for low-traffic apps\n- **fly.toml** controls build, deploy, scaling, and health checks\n- **Grace period** in health checks - give Python apps time to start"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-10-challenge-1",
              "title": "Create a Fly.io Configuration",
              "description": "Create a fly.toml file for a FastAPI application that:\n1. Uses 'ord' (Chicago) as the primary region\n2. Builds from Dockerfile\n3. Runs on internal port 8000 with HTTPS forced\n4. Has a health check at /health with 30s grace period\n5. Uses shared-cpu-1x with 512mb memory\n6. Keeps at least 1 machine running",
              "instructions": "Complete the fly.toml configuration with proper HTTP service and VM settings.",
              "starterCode": "# fly.toml\n\napp = \"my-fastapi-app\"\nprimary_region = \"____\"\n\n[build]\n  dockerfile = \"____\"\n\n[http_service]\n  internal_port = ____\n  force_https = ____\n  auto_stop_machines = true\n  auto_start_machines = true\n  min_machines_running = ____\n\n[[http_service.checks]]\n  method = \"GET\"\n  path = \"____\"\n  grace_period = \"____\"\n  interval = \"30s\"\n  timeout = \"5s\"\n\n[[vm]]\n  size = \"____\"\n  memory = \"____\"",
              "solution": "# fly.toml\n\napp = \"my-fastapi-app\"\nprimary_region = \"ord\"\n\n[build]\n  dockerfile = \"Dockerfile\"\n\n[http_service]\n  internal_port = 8000\n  force_https = true\n  auto_stop_machines = true\n  auto_start_machines = true\n  min_machines_running = 1\n\n[[http_service.checks]]\n  method = \"GET\"\n  path = \"/health\"\n  grace_period = \"30s\"\n  interval = \"30s\"\n  timeout = \"5s\"\n\n[[vm]]\n  size = \"shared-cpu-1x\"\n  memory = \"512mb\"",
              "language": "toml",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Primary region is ord",
                  "expectedOutput": "ord",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Internal port is 8000",
                  "expectedOutput": "8000",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Health check path is /health",
                  "expectedOutput": "/health",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Min machines running is 1",
                  "expectedOutput": "1",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Primary region codes are lowercase airport codes: ord = Chicago, lhr = London"
                },
                {
                  "level": 2,
                  "text": "Memory is specified with unit: 256mb, 512mb, 1gb"
                },
                {
                  "level": 3,
                  "text": "Grace period needs time unit suffix: 30s for 30 seconds"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting time units in grace_period (30 instead of 30s)",
                  "consequence": "Invalid configuration that won't deploy",
                  "correction": "Always include time units: 30s, 1m, etc."
                },
                {
                  "mistake": "Setting min_machines_running = 0 on free tier",
                  "consequence": "Cold starts on every request when machines stop",
                  "correction": "Set min_machines_running = 1 for faster response times"
                },
                {
                  "mistake": "Mismatched internal_port with Dockerfile EXPOSE",
                  "consequence": "Health checks fail, app unreachable",
                  "correction": "Ensure fly.toml internal_port matches your app's listening port"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-15-lesson-11",
          "title": "Modern CI Pipeline with GitHub Actions",
          "moduleId": "module-15",
          "order": 11,
          "estimatedMinutes": 40,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is CI/CD?",
              "content": "**CI/CD = Continuous Integration / Continuous Deployment**\n\nAutomation that runs every time you push code:\n\n**Continuous Integration (CI):**\n- Automatically run tests on every push\n- Lint and format check your code\n- Type check with static analysis\n- Catch bugs before they reach production\n- Build confidence in every change\n\n**Continuous Deployment (CD):**\n- Automatically deploy passing builds\n- Staging environment for testing\n- Production deployment after approval\n- Rollback capabilities\n\n**Why CI/CD matters:**\n\n1. **Catch bugs early**\n   - Tests run on every push\n   - Failing tests block merges\n   - Problems found before users see them\n\n2. **Consistent quality**\n   - Same checks every time\n   - No \"it works on my machine\"\n   - Enforced code standards\n\n3. **Faster feedback**\n   - Know within minutes if code is broken\n   - Fix issues while context is fresh\n   - Ship with confidence\n\n4. **Team collaboration**\n   - Everyone's changes tested together\n   - Integration problems caught early\n   - Shared quality standards\n\n**For our Personal Finance Tracker:**\n- Run pytest on every push\n- Lint with ruff\n- Type check with mypy\n- Test against PostgreSQL\n- Deploy to Fly.io on main branch"
            },
            {
              "type": "THEORY",
              "title": "GitHub Actions Basics",
              "content": "**GitHub Actions = CI/CD built into GitHub**\n\n**Key concepts:**\n\n1. **Workflow** (`.github/workflows/*.yml`)\n   - Automated process definition\n   - Triggered by events\n   - Contains one or more jobs\n\n2. **Trigger** (`on:`)\n   - When the workflow runs\n   - push, pull_request, schedule, manual\n   - Can filter by branch, path, etc.\n\n3. **Job** (`jobs:`)\n   - Group of steps that run together\n   - Runs on a virtual machine (runner)\n   - Jobs can run in parallel or sequence\n\n4. **Step** (`steps:`)\n   - Individual task within a job\n   - Run commands or use actions\n   - Share data via outputs\n\n5. **Action** (`uses:`)\n   - Reusable workflow component\n   - Published on GitHub Marketplace\n   - Example: `actions/checkout@v4`\n\n**Workflow structure:**\n```yaml\nname: Workflow Name\non: [push, pull_request]\n\njobs:\n  job-name:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - run: echo \"Hello\"\n```\n\n**Common triggers:**\n```yaml\non:\n  push:\n    branches: [main, develop]\n  pull_request:\n    branches: [main]\n  schedule:\n    - cron: '0 0 * * *'  # Daily at midnight\n  workflow_dispatch:  # Manual trigger\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete CI Workflow for Python with uv",
              "content": "**A production-ready CI pipeline for our Finance Tracker:**\n\nThis workflow:\n1. Triggers on push to main and all PRs\n2. Sets up PostgreSQL as a service container\n3. Installs Python and dependencies with uv\n4. Runs linting, formatting, and type checks\n5. Executes tests with coverage\n6. Has a deploy job that only runs on main",
              "code": "# .github/workflows/ci.yml\nname: CI\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    services:\n      postgres:\n        image: postgres:16\n        env:\n          POSTGRES_USER: test\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: test\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 5432:5432\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install uv\n        uses: astral-sh/setup-uv@v4\n        with:\n          version: \"latest\"\n\n      - name: Set up Python\n        run: uv python install 3.13\n\n      - name: Install dependencies\n        run: uv sync --all-extras --dev\n\n      - name: Lint with ruff\n        run: uv run ruff check .\n\n      - name: Format check with ruff\n        run: uv run ruff format --check .\n\n      - name: Type check with mypy\n        run: uv run mypy src/\n\n      - name: Run tests\n        run: uv run pytest --cov=src tests/\n        env:\n          DATABASE_URL: postgresql+asyncpg://test:test@localhost:5432/test\n\n  deploy:\n    needs: test\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n    \n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Deploy to production\n        run: echo \"Deploy step goes here\"\n        # In production, use:\n        # - uses: superfly/flyctl-actions/setup-flyctl@master\n        # - run: flyctl deploy --remote-only",
              "language": "yaml"
            },
            {
              "type": "EXAMPLE",
              "title": "Understanding Each Section",
              "content": "**Let's break down the workflow step by step:**",
              "code": "# ============================================\n# WORKFLOW NAME AND TRIGGERS\n# ============================================\nname: CI  # Displayed in GitHub Actions UI\n\non:\n  push:\n    branches: [main]  # Run on pushes to main\n  pull_request:\n    branches: [main]  # Run on PRs targeting main\n\n# ============================================\n# SERVICE CONTAINERS\n# ============================================\n# PostgreSQL runs alongside your tests\nservices:\n  postgres:\n    image: postgres:16              # Docker image to use\n    env:\n      POSTGRES_USER: test           # Database credentials\n      POSTGRES_PASSWORD: test\n      POSTGRES_DB: test\n    options: >-                     # Health check settings\n      --health-cmd pg_isready       # Command to check if ready\n      --health-interval 10s         # Check every 10 seconds\n      --health-timeout 5s           # Timeout for each check\n      --health-retries 5            # Retry 5 times before failing\n    ports:\n      - 5432:5432                   # Map container port to host\n\n# ============================================\n# UV AND PYTHON SETUP\n# ============================================\n- name: Install uv\n  uses: astral-sh/setup-uv@v4      # Official uv action\n  with:\n    version: \"latest\"              # Always use latest uv\n\n- name: Set up Python\n  run: uv python install 3.13      # Install Python via uv\n\n- name: Install dependencies\n  run: uv sync --all-extras --dev  # Install all deps from pyproject.toml\n\n# ============================================\n# CODE QUALITY CHECKS\n# ============================================\n- name: Lint with ruff\n  run: uv run ruff check .         # Check for code issues\n\n- name: Format check with ruff\n  run: uv run ruff format --check . # Verify formatting\n\n- name: Type check with mypy\n  run: uv run mypy src/            # Static type analysis\n\n# ============================================\n# TESTING WITH DATABASE\n# ============================================\n- name: Run tests\n  run: uv run pytest --cov=src tests/\n  env:\n    # Connect to the service container\n    DATABASE_URL: postgresql+asyncpg://test:test@localhost:5432/test\n\n# ============================================\n# CONDITIONAL DEPLOYMENT\n# ============================================\ndeploy:\n  needs: test                      # Wait for test job to pass\n  if: github.ref == 'refs/heads/main'  # Only on main branch\n  # ... deployment steps",
              "language": "yaml"
            },
            {
              "type": "KEY_POINT",
              "title": "Service Containers",
              "content": "**Service containers run alongside your job:**\n\nGitHub Actions can spin up Docker containers that your tests can connect to:\n\n**PostgreSQL:**\n```yaml\nservices:\n  postgres:\n    image: postgres:16\n    env:\n      POSTGRES_USER: test\n      POSTGRES_PASSWORD: test\n      POSTGRES_DB: test\n    ports:\n      - 5432:5432\n```\n\n**Redis:**\n```yaml\nservices:\n  redis:\n    image: redis:7\n    ports:\n      - 6379:6379\n```\n\n**Health checks ensure the service is ready:**\n```yaml\noptions: >-\n  --health-cmd pg_isready\n  --health-interval 10s\n  --health-timeout 5s\n  --health-retries 5\n```\n\n**Connection from your code:**\n- Use `localhost` and the mapped port\n- Pass as environment variable\n- Service is destroyed after job completes"
            },
            {
              "type": "EXAMPLE",
              "title": "Secrets and Environment Variables",
              "content": "**Keep sensitive data secure in GitHub Actions:**",
              "code": "# ============================================\n# USING GITHUB SECRETS\n# ============================================\n# First, add secrets in GitHub:\n# Repository Settings > Secrets and variables > Actions\n\n# In your workflow:\nsteps:\n  - name: Deploy to Fly.io\n    run: flyctl deploy --remote-only\n    env:\n      FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\n\n  - name: Configure AWS\n    run: aws configure set aws_access_key_id $AWS_KEY\n    env:\n      AWS_KEY: ${{ secrets.AWS_ACCESS_KEY_ID }}\n      AWS_SECRET: ${{ secrets.AWS_SECRET_ACCESS_KEY }}\n\n# ============================================\n# BUILT-IN VARIABLES\n# ============================================\nsteps:\n  - name: Show context\n    run: |\n      echo \"Repository: ${{ github.repository }}\"\n      echo \"Branch: ${{ github.ref_name }}\"\n      echo \"SHA: ${{ github.sha }}\"\n      echo \"Actor: ${{ github.actor }}\"\n      echo \"Event: ${{ github.event_name }}\"\n      echo \"Run ID: ${{ github.run_id }}\"\n\n# ============================================\n# ENVIRONMENT FILES\n# ============================================\n# Create a .env file for tests\nsteps:\n  - name: Create test environment\n    run: |\n      cat > .env.test << EOF\n      DATABASE_URL=postgresql+asyncpg://test:test@localhost:5432/test\n      SECRET_KEY=test-secret-key\n      DEBUG=true\n      EOF\n\n# ============================================\n# CONDITIONAL SECRETS (for PRs from forks)\n# ============================================\n# Secrets are NOT available to PRs from forks (security)\nsteps:\n  - name: Deploy (only if secrets available)\n    if: github.event_name != 'pull_request' || github.event.pull_request.head.repo.full_name == github.repository\n    run: flyctl deploy\n    env:\n      FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}",
              "language": "yaml"
            },
            {
              "type": "EXAMPLE",
              "title": "Caching Dependencies for Speed",
              "content": "**Speed up workflows by caching dependencies:**\n\nuv has built-in caching support with the setup action:",
              "code": "# ============================================\n# UV CACHING (RECOMMENDED)\n# ============================================\n# The astral-sh/setup-uv action handles caching automatically!\nsteps:\n  - uses: actions/checkout@v4\n  \n  - name: Install uv\n    uses: astral-sh/setup-uv@v4\n    with:\n      version: \"latest\"\n      enable-cache: true  # Enable uv cache (default: true)\n\n  - name: Install dependencies\n    run: uv sync --all-extras --dev\n    # Second run is much faster due to cache!\n\n# ============================================\n# MANUAL CACHING (for other tools)\n# ============================================\nsteps:\n  - uses: actions/checkout@v4\n  \n  - name: Cache pip packages\n    uses: actions/cache@v4\n    with:\n      path: ~/.cache/pip\n      key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements*.txt') }}\n      restore-keys: |\n        ${{ runner.os }}-pip-\n\n  - name: Cache mypy\n    uses: actions/cache@v4\n    with:\n      path: .mypy_cache\n      key: ${{ runner.os }}-mypy-${{ hashFiles('src/**/*.py') }}\n\n# ============================================\n# CACHE BEHAVIOR\n# ============================================\n# Cache key: Unique identifier for the cache\n# - Changes when dependencies change (hashFiles)\n# - Different per OS\n# - Restored from closest matching key\n\n# restore-keys: Fallback keys if exact match not found\n# - Uses prefix matching\n# - Allows partial cache restoration\n\n# ============================================\n# CHECKING CACHE EFFECTIVENESS\n# ============================================\n# In workflow logs, look for:\n# - \"Cache hit\" = Cache was restored\n# - \"Cache miss\" = No cache found, will save new one\n# - \"Cache restored from key\" = Partial match used\n\n# Typical speedup:\n# - First run: 60-90 seconds (install all deps)\n# - Cached run: 5-10 seconds (deps already installed)",
              "language": "yaml"
            },
            {
              "type": "EXAMPLE",
              "title": "Matrix Builds for Multiple Python Versions",
              "content": "**Test against multiple Python versions simultaneously:**",
              "code": "# ============================================\n# MATRIX STRATEGY\n# ============================================\nname: CI\n\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    strategy:\n      fail-fast: false  # Don't cancel other jobs if one fails\n      matrix:\n        python-version: [\"3.11\", \"3.12\", \"3.13\"]\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install uv\n        uses: astral-sh/setup-uv@v4\n        with:\n          version: \"latest\"\n\n      - name: Set up Python ${{ matrix.python-version }}\n        run: uv python install ${{ matrix.python-version }}\n\n      - name: Install dependencies\n        run: uv sync --all-extras --dev\n\n      - name: Run tests\n        run: uv run pytest\n\n# ============================================\n# MULTI-DIMENSIONAL MATRIX\n# ============================================\njobs:\n  test:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, windows-latest, macos-latest]\n        python-version: [\"3.11\", \"3.12\", \"3.13\"]\n        exclude:\n          - os: windows-latest\n            python-version: \"3.11\"  # Skip Python 3.11 on Windows\n        include:\n          - os: ubuntu-latest\n            python-version: \"3.13\"\n            experimental: true  # Add custom variable\n\n    steps:\n      - uses: actions/checkout@v4\n      \n      - name: Install uv\n        uses: astral-sh/setup-uv@v4\n      \n      - name: Set up Python\n        run: uv python install ${{ matrix.python-version }}\n      \n      - name: Run tests\n        run: uv run pytest\n        continue-on-error: ${{ matrix.experimental || false }}\n\n# This creates 9 jobs (3 OS x 3 Python versions)\n# minus 1 exclusion = 8 parallel test runs!",
              "language": "yaml"
            },
            {
              "type": "WARNING",
              "title": "Common CI/CD Pitfalls",
              "content": "### Watch out for these issues:\n\n**1. Secrets in PRs from forks**\n```yaml\n# WRONG - Secrets exposed to fork PRs\n- name: Deploy\n  run: flyctl deploy\n  env:\n    FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\n\n# CORRECT - Only deploy on push to main\n- name: Deploy\n  if: github.event_name == 'push' && github.ref == 'refs/heads/main'\n  run: flyctl deploy\n  env:\n    FLY_API_TOKEN: ${{ secrets.FLY_API_TOKEN }}\n```\n\n**2. Missing service health checks**\n```yaml\n# WRONG - Tests might start before DB is ready\nservices:\n  postgres:\n    image: postgres:16\n\n# CORRECT - Wait for PostgreSQL to be ready\nservices:\n  postgres:\n    image: postgres:16\n    options: >-\n      --health-cmd pg_isready\n      --health-interval 10s\n      --health-timeout 5s\n      --health-retries 5\n```\n\n**3. Hardcoded Python version**\n```yaml\n# WRONG - Breaks when Python updates\nrun: uv python install 3.12\n\n# BETTER - Use matrix for multiple versions\nmatrix:\n  python-version: [\"3.11\", \"3.12\", \"3.13\"]\n```\n\n**4. Not caching dependencies**\n```yaml\n# SLOW - Downloads everything every time\n- run: uv sync --all-extras --dev\n\n# FAST - Enable caching\n- uses: astral-sh/setup-uv@v4\n  with:\n    enable-cache: true\n```\n\n**5. Deploying on every push**\n```yaml\n# DANGEROUS - Deploys untested PR code\ndeploy:\n  runs-on: ubuntu-latest\n  steps:\n    - run: flyctl deploy\n\n# SAFE - Only deploy after tests pass on main\ndeploy:\n  needs: test\n  if: github.ref == 'refs/heads/main'\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **CI runs automatically** on every push and pull request\n- **Workflows live in** `.github/workflows/` as YAML files\n- **Service containers** provide databases for testing (PostgreSQL, Redis)\n- **`uv sync`** installs all dependencies from pyproject.toml\n- **Ruff** handles both linting and formatting in one fast tool\n- **Mypy** catches type errors before runtime\n- **Secrets** are encrypted and never exposed in logs\n- **Caching** speeds up workflows dramatically (60s to 5s)\n- **Matrix builds** test against multiple Python versions in parallel\n- **`needs:`** creates job dependencies (deploy after test passes)\n- **`if:`** conditions control when jobs or steps run"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-15-lesson-11-challenge-1",
              "title": "Create a CI Workflow",
              "description": "Create a GitHub Actions workflow that:\n1. Triggers on push to main and all pull requests\n2. Uses Python 3.13 with uv\n3. Runs ruff check and ruff format --check\n4. Runs pytest with coverage\n5. Includes a PostgreSQL service container",
              "instructions": "Complete the CI workflow YAML file with proper triggers, Python setup, linting, and testing steps.",
              "starterCode": "# .github/workflows/ci.yml\nname: CI\n\non:\n  ____:\n    branches: [main]\n  ____:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    services:\n      postgres:\n        image: postgres:16\n        env:\n          POSTGRES_USER: test\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: test\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 5432:5432\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install uv\n        uses: ____\n        with:\n          version: \"latest\"\n\n      - name: Set up Python\n        run: uv python install ____\n\n      - name: Install dependencies\n        run: ____\n\n      - name: Lint with ruff\n        run: ____\n\n      - name: Format check\n        run: ____\n\n      - name: Run tests\n        run: ____\n        env:\n          DATABASE_URL: postgresql+asyncpg://test:test@localhost:5432/test",
              "solution": "# .github/workflows/ci.yml\nname: CI\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n\n    services:\n      postgres:\n        image: postgres:16\n        env:\n          POSTGRES_USER: test\n          POSTGRES_PASSWORD: test\n          POSTGRES_DB: test\n        options: >-\n          --health-cmd pg_isready\n          --health-interval 10s\n          --health-timeout 5s\n          --health-retries 5\n        ports:\n          - 5432:5432\n\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install uv\n        uses: astral-sh/setup-uv@v4\n        with:\n          version: \"latest\"\n\n      - name: Set up Python\n        run: uv python install 3.13\n\n      - name: Install dependencies\n        run: uv sync --all-extras --dev\n\n      - name: Lint with ruff\n        run: uv run ruff check .\n\n      - name: Format check\n        run: uv run ruff format --check .\n\n      - name: Run tests\n        run: uv run pytest --cov=src tests/\n        env:\n          DATABASE_URL: postgresql+asyncpg://test:test@localhost:5432/test",
              "language": "yaml",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Uses push and pull_request triggers",
                  "expectedOutput": "push pull_request",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Uses astral-sh/setup-uv@v4 action",
                  "expectedOutput": "astral-sh/setup-uv@v4",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Installs Python 3.13",
                  "expectedOutput": "3.13",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Runs ruff check and format",
                  "expectedOutput": "ruff check ruff format",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "The trigger events are 'push' and 'pull_request' - these go under the 'on:' key"
                },
                {
                  "level": 2,
                  "text": "The uv setup action is 'astral-sh/setup-uv@v4' - this is the official action from Astral"
                },
                {
                  "level": 3,
                  "text": "Use 'uv sync --all-extras --dev' to install all dependencies including dev deps"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'uv run' prefix for commands",
                  "consequence": "Commands fail because tools aren't in PATH",
                  "correction": "Always use 'uv run ruff check .' not just 'ruff check .'"
                },
                {
                  "mistake": "Using postgres:// instead of postgresql+asyncpg://",
                  "consequence": "SQLAlchemy asyncpg driver fails to connect",
                  "correction": "Use postgresql+asyncpg:// for async database connections"
                },
                {
                  "mistake": "Missing health check options for PostgreSQL",
                  "consequence": "Tests may start before database is ready",
                  "correction": "Always include --health-cmd pg_isready in service options"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-16",
      "title": "Professional CLI Tools with Typer",
      "description": "Build beautiful, type-safe command-line applications with Typer, Rich, and modern Python patterns",
      "difficulty": "intermediate",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-16-lesson-01",
          "title": "Introduction to Typer - Type-Safe CLIs",
          "moduleId": "module-16",
          "order": 1,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "**Typer** is the modern way to build command-line interfaces (CLIs) in Python. Created by the same developer as FastAPI, it uses Python type hints to create beautiful, self-documenting CLIs with minimal code.\n\n**Why Typer over argparse?**\n- **Type hints = auto-validation** - No more manual type checking\n- **Auto-generated help** - Your docstrings become `--help` text\n- **Shell completion** - Tab completion for free\n- **Less boilerplate** - A Typer CLI is often 70% less code than argparse\n\n**Installation:**\n```bash\nuv add typer[all]  # Includes Rich for pretty output\n# or: pip install typer[all]\n```\n\n**Key insight:** If you know type hints, you already know 80% of Typer. Your function signatures *are* your CLI definitions."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n$ python greet.py --help\nUsage: greet.py [OPTIONS] NAME\n\n  Greet someone by name.\n\nArguments:\n  NAME  The name to greet  [required]\n\nOptions:\n  --formal / --no-formal  Use formal greeting  [default: no-formal]\n  --help                  Show this message and exit.\n\n$ python greet.py World\nHello, World!\n\n$ python greet.py --formal Alice\nGood day, Alice. It's a pleasure to meet you.\n```",
              "code": "import typer\n\ndef main(name: str, formal: bool = False):\n    \"\"\"Greet someone by name.\"\"\"\n    if formal:\n        print(f\"Good day, {name}. It's a pleasure to meet you.\")\n    else:\n        print(f\"Hello, {name}!\")\n\nif __name__ == \"__main__\":\n    typer.run(main)\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "Let's examine the magic:\n\n- **`name: str`** - A required positional argument. Typer knows it's required because there's no default value.\n- **`formal: bool = False`** - An optional flag (`--formal`). The `= False` default makes it optional.\n- **`typer.run(main)`** - Converts your function into a CLI application.\n- **The docstring** - Becomes the command description in `--help`.\n\n**Type hint to CLI mapping:**\n| Python Type | CLI Type |\n|-------------|----------|\n| `str` | Text argument |\n| `int` | Integer (validated) |\n| `float` | Decimal number |\n| `bool` | Flag (`--name/--no-name`) |\n| `Path` | File/directory path |\n| `Optional[str]` | Optional argument |"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Call typer.run()**\n```python\n# WRONG - Function is defined but never runs\nimport typer\n\ndef main(name: str):\n    print(f\"Hello, {name}\")\n\n# Missing typer.run(main)!\n\n# CORRECT - Function is registered as CLI\nimport typer\n\ndef main(name: str):\n    print(f\"Hello, {name}\")\n\nif __name__ == \"__main__\":\n    typer.run(main)\n```\n\n**2. Using Wrong Type Hints for Optional Arguments**\n```python\n# WRONG - Optional without default makes it required\ndef main(name: str, count: int):\n    pass  # count is required!\n\n# CORRECT - Default value makes it optional\ndef main(name: str, count: int = 1):\n    pass  # count is optional with default 1\n```\n\n**3. Confusing Positional Args and Options**\n```python\n# WRONG - Expecting --name flag but getting positional\ndef main(name: str):  # This is POSITIONAL, not --name\n    pass\n\n# CORRECT - Use Annotated for explicit control\nfrom typing import Annotated\nimport typer\n\ndef main(name: Annotated[str, typer.Option()]):\n    pass  # Now it's --name flag\n```\n\n**4. Missing Type Hints Entirely**\n```python\n# WRONG - No type hint means Typer can't validate\ndef main(count):  # What type is count?\n    print(count * 2)\n\n# CORRECT - Type hint enables validation\ndef main(count: int):\n    print(count * 2)  # Typer validates it's an integer\n```\n\n**5. Not Installing typer[all] for Rich Features**\n```python\n# WRONG - Missing Rich integration\n# pip install typer  # Basic install only\n\n# CORRECT - Full install with Rich\n# uv add typer[all]  # or: pip install typer[all]\n# Now you get colored output and better error messages\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Typer uses type hints** to define CLI arguments and options\n- **Required arguments** have no default value\n- **Optional flags** have a default value (e.g., `= False`)\n- **Docstrings** become help text automatically\n- **`typer.run(func)`** is the simplest way to create a CLI\n- Install with `uv add typer[all]` for Rich integration"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-16-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a CLI that calculates the area of a rectangle.\n\n**Requirements:**\n- Accept `width` and `height` as required arguments (floats)\n- Add an optional `--unit` flag (default: 'sq units')\n- Print the result with the unit\n\n**Example usage:**\n```\n$ python area.py 5 3\nArea: 15.0 sq units\n\n$ python area.py 10 20 --unit \"square meters\"\nArea: 200.0 square meters\n```",
              "instructions": "Create a CLI that calculates the area of a rectangle with width, height, and optional unit.",
              "starterCode": "import typer\n\ndef main(width: ____, height: ____, unit: str = ____):\n    \"\"\"Calculate the area of a rectangle.\"\"\"\n    area = ____\n    print(f\"Area: {area} {unit}\")\n\nif __name__ == \"__main__\":\n    typer.run(main)\n",
              "solution": "import typer\n\ndef main(width: float, height: float, unit: str = \"sq units\"):\n    \"\"\"Calculate the area of a rectangle.\"\"\"\n    area = width * height\n    print(f\"Area: {area} {unit}\")\n\nif __name__ == \"__main__\":\n    typer.run(main)\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Calculates area correctly",
                  "expectedOutput": "15.0",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `float` for width and height types. The default for unit should be a string in quotes."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using int instead of float for dimensions",
                  "consequence": "Won't accept decimal values like 2.5",
                  "correction": "Use float for width and height"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-16-lesson-02",
          "title": "Typer Applications and Subcommands",
          "moduleId": "module-16",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "Real-world CLIs have multiple commands. Think of `git`: you run `git commit`, `git push`, `git log` - these are **subcommands** under the main `git` command.\n\nTyper makes this easy with `typer.Typer()` - an application object that groups commands together.\n\n**When to use subcommands:**\n- Your tool does multiple distinct things\n- You want organized, discoverable commands\n- You're building something like: `myapp users add`, `myapp users list`, `myapp config set`"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n$ python tasks.py --help\nUsage: tasks.py [OPTIONS] COMMAND [ARGS]...\n\n  Task Manager CLI - manage your todo items.\n\nCommands:\n  add     Add a new task.\n  done    Mark a task as complete.\n  list    List all tasks.\n\n$ python tasks.py add \"Buy groceries\"\nAdded task: Buy groceries\n\n$ python tasks.py list\n1. [ ] Buy groceries\n\n$ python tasks.py done 1\nCompleted: Buy groceries\n```",
              "code": "import typer\nfrom typing import Optional\n\napp = typer.Typer(help=\"Task Manager CLI - manage your todo items.\")\n\n# In-memory task storage (use a file or DB in real apps)\ntasks: list[dict] = []\n\n@app.command()\ndef add(task: str):\n    \"\"\"Add a new task.\"\"\"\n    tasks.append({\"text\": task, \"done\": False})\n    print(f\"Added task: {task}\")\n\n@app.command()\ndef list():\n    \"\"\"List all tasks.\"\"\"\n    if not tasks:\n        print(\"No tasks yet!\")\n        return\n    for i, task in enumerate(tasks, 1):\n        status = \"x\" if task[\"done\"] else \" \"\n        print(f\"{i}. [{status}] {task['text']}\")\n\n@app.command()\ndef done(task_id: int):\n    \"\"\"Mark a task as complete.\"\"\"\n    if 1 <= task_id <= len(tasks):\n        tasks[task_id - 1][\"done\"] = True\n        print(f\"Completed: {tasks[task_id - 1]['text']}\")\n    else:\n        print(f\"Task {task_id} not found\")\n        raise typer.Exit(code=1)\n\nif __name__ == \"__main__\":\n    app()\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "**Key patterns:**\n\n- **`app = typer.Typer()`** - Creates an application object\n- **`@app.command()`** - Registers a function as a subcommand\n- **`app()`** - Runs the application (replaces `typer.run()`)\n- **`typer.Exit(code=1)`** - Exit with error code\n\n**Command naming:**\n- By default, function name = command name\n- Use `@app.command(name=\"custom-name\")` to override\n\n**Help customization:**\n- `typer.Typer(help=\"Main help\")` - Application description\n- Function docstrings - Command descriptions\n- `typer.Argument(help=\"...\")` - Argument descriptions"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Calling typer.run() Instead of app()**\n```python\n# WRONG - typer.run() is for single-function CLIs\napp = typer.Typer()\n\n@app.command()\ndef hello():\n    print(\"Hello\")\n\nif __name__ == \"__main__\":\n    typer.run(hello)  # Wrong!\n\n# CORRECT - Use app() for Typer applications\nif __name__ == \"__main__\":\n    app()  # Correct!\n```\n\n**2. Forgetting the @app.command() Decorator**\n```python\n# WRONG - Function not registered as command\napp = typer.Typer()\n\ndef greet(name: str):  # Missing decorator!\n    print(f\"Hello {name}\")\n\n# CORRECT - Decorator registers the command\n@app.command()\ndef greet(name: str):\n    print(f\"Hello {name}\")\n```\n\n**3. Using Reserved Names Like 'list' Without Renaming**\n```python\n# WRONG - Shadows built-in list\n@app.command()\ndef list():  # Shadows Python's list!\n    pass\n\n# CORRECT - Rename the function or command\n@app.command(name=\"list\")\ndef list_items():  # Different function name\n    pass\n```\n\n**4. Not Using typer.Exit() for Error Codes**\n```python\n# WRONG - Just returning doesn't set exit code\n@app.command()\ndef check(item: str):\n    if not valid(item):\n        print(\"Error!\")\n        return  # Exit code is still 0!\n\n# CORRECT - Use typer.Exit for proper exit codes\n@app.command()\ndef check(item: str):\n    if not valid(item):\n        print(\"Error!\")\n        raise typer.Exit(code=1)  # Exit code is 1\n```\n\n**5. Creating App Inside if __name__ Block**\n```python\n# WRONG - App created too late for decorators\nif __name__ == \"__main__\":\n    app = typer.Typer()  # Too late!\n    app()\n\n# CORRECT - App created at module level\napp = typer.Typer()\n\n@app.command()\ndef hello():\n    print(\"Hello\")\n\nif __name__ == \"__main__\":\n    app()\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`typer.Typer()`** creates a multi-command application\n- **`@app.command()`** decorates functions to become subcommands\n- Call **`app()`** instead of `typer.run()` for applications\n- **`typer.Exit(code=1)`** exits with an error code\n- Function docstrings become command help text"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-16-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a note-taking CLI with `add`, `show`, and `clear` commands.\n\n**Requirements:**\n- `add <text>` - Add a note\n- `show` - Display all notes numbered\n- `clear` - Remove all notes\n\n**Example:**\n```\n$ python notes.py add \"Remember to call mom\"\nNote added!\n$ python notes.py show\n1. Remember to call mom\n$ python notes.py clear\nAll notes cleared!\n```",
              "instructions": "Build a notes CLI with add, show, and clear subcommands.",
              "starterCode": "import typer\n\napp = typer.Typer(help=\"Simple notes CLI\")\nnotes: list[str] = []\n\n@app.command()\ndef add(text: ____):\n    \"\"\"Add a new note.\"\"\"\n    notes.append(____)\n    print(\"Note added!\")\n\n@app.command()\ndef show():\n    \"\"\"Show all notes.\"\"\"\n    for i, note in enumerate(notes, 1):\n        print(f\"{i}. {____}\")\n\n@app.command()\ndef clear():\n    \"\"\"Clear all notes.\"\"\"\n    notes.____\n    print(\"All notes cleared!\")\n\nif __name__ == \"__main__\":\n    app()\n",
              "solution": "import typer\n\napp = typer.Typer(help=\"Simple notes CLI\")\nnotes: list[str] = []\n\n@app.command()\ndef add(text: str):\n    \"\"\"Add a new note.\"\"\"\n    notes.append(text)\n    print(\"Note added!\")\n\n@app.command()\ndef show():\n    \"\"\"Show all notes.\"\"\"\n    for i, note in enumerate(notes, 1):\n        print(f\"{i}. {note}\")\n\n@app.command()\ndef clear():\n    \"\"\"Clear all notes.\"\"\"\n    notes.clear()\n    print(\"All notes cleared!\")\n\nif __name__ == \"__main__\":\n    app()\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "App has three commands",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** The `add` function needs `text: str`. Use `notes.clear()` to empty the list."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using notes = [] to clear instead of notes.clear()",
                  "consequence": "Creates a new local variable instead of clearing the global list",
                  "correction": "Use notes.clear() to modify the existing list"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-16-lesson-03",
          "title": "Rich Output and Progress Bars",
          "moduleId": "module-16",
          "order": 3,
          "estimatedMinutes": 25,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding the Concept",
              "content": "**Rich** is a Python library for beautiful terminal output. When you install `typer[all]`, Rich is included.\n\nRich gives you:\n- **Colored text** - Make important info stand out\n- **Tables** - Display data cleanly\n- **Progress bars** - Show operation progress\n- **Panels and trees** - Organize complex output\n- **Syntax highlighting** - Pretty-print code and JSON\n\nTyper integrates Rich seamlessly with `typer.echo()` and progress utilities."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\n$ python demo.py\n[green]Success![/green] Operation completed\n[red]Error:[/red] Something went wrong\n\nProcessing: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 100/100\nDone processing 100 items!\n```",
              "code": "import typer\nfrom rich import print as rprint\nfrom rich.progress import track\nimport time\n\napp = typer.Typer()\n\n@app.command()\ndef demo():\n    \"\"\"Demonstrate Rich output features.\"\"\"\n    # Colored output with Rich markup\n    rprint(\"[green]Success![/green] Operation completed\")\n    rprint(\"[red]Error:[/red] Something went wrong\")\n    rprint()\n    \n    # Progress bar for long operations\n    items = range(100)\n    for item in track(items, description=\"Processing\"):\n        time.sleep(0.02)  # Simulate work\n    \n    rprint(f\"Done processing {len(items)} items!\")\n\n@app.command()\ndef status(healthy: bool = True):\n    \"\"\"Show status with colors.\"\"\"\n    if healthy:\n        rprint(\"[bold green]HEALTHY[/bold green] - All systems operational\")\n    else:\n        rprint(\"[bold red]UNHEALTHY[/bold red] - Check logs for errors\")\n\nif __name__ == \"__main__\":\n    app()\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "**Rich markup syntax:**\n```python\nrprint(\"[green]Green text[/green]\")\nrprint(\"[bold red]Bold red[/bold red]\")\nrprint(\"[blue on white]Blue on white background[/blue on white]\")\n```\n\n**Common colors:** green, red, yellow, blue, cyan, magenta, white\n\n**Progress bar:**\n```python\nfrom rich.progress import track\n\nfor item in track(items, description=\"Working...\"):\n    process(item)  # Automatically shows progress\n```\n\n**Tables:**\n```python\nfrom rich.table import Table\n\ntable = Table(title=\"Users\")\ntable.add_column(\"Name\")\ntable.add_column(\"Email\")\ntable.add_row(\"Alice\", \"alice@example.com\")\nrprint(table)\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using print() Instead of rprint() for Rich Markup**\n```python\n# WRONG - Regular print doesn't interpret Rich markup\nprint(\"[green]Success[/green]\")  # Outputs literal text!\n\n# CORRECT - Use Rich's print function\nfrom rich import print as rprint\nrprint(\"[green]Success[/green]\")  # Shows green text\n```\n\n**2. Forgetting to Close Rich Markup Tags**\n```python\n# WRONG - Unclosed tag causes formatting issues\nrprint(\"[bold]Important message\")  # Missing [/bold]!\n\n# CORRECT - Always close your tags\nrprint(\"[bold]Important message[/bold]\")\n```\n\n**3. Using track() on Non-Iterable or Empty Collections**\n```python\n# WRONG - track() on None causes error\nitems = None\nfor item in track(items):  # TypeError!\n    pass\n\n# CORRECT - Ensure iterable exists\nitems = get_items() or []\nfor item in track(items, description=\"Processing\"):\n    pass\n```\n\n**4. Mixing Rich and Regular Print in Progress Loops**\n```python\n# WRONG - print() interferes with progress bar display\nfor item in track(items):\n    print(f\"Processing {item}\")  # Breaks progress bar!\n\n# CORRECT - Use Rich console or print after loop\nfrom rich.console import Console\nconsole = Console()\nfor item in track(items):\n    console.log(f\"Processing {item}\")  # Works with progress\n```\n\n**5. Nesting Rich Markup Incorrectly**\n```python\n# WRONG - Incorrect nesting order\nrprint(\"[bold][green]Text[/bold][/green]\")  # Wrong order!\n\n# CORRECT - Close in reverse order (LIFO)\nrprint(\"[bold][green]Text[/green][/bold]\")\n# Or use combined style\nrprint(\"[bold green]Text[/bold green]\")\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`rich.print`** supports markup like `[green]text[/green]`\n- **`track(iterable)`** adds a progress bar to any loop\n- **`rich.table.Table`** creates formatted tables\n- Install with `typer[all]` to include Rich\n- Use Rich to make CLI output professional and readable"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-16-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a CLI that displays a colored status report.\n\n**Requirements:**\n- Show system name in bold\n- Show 'OK' in green or 'FAIL' in red based on status\n- Use a progress bar to simulate checking 5 systems",
              "instructions": "Create a status checker with Rich colors and progress.",
              "starterCode": "import typer\nfrom rich import print as rprint\nfrom rich.progress import track\nimport time\n\napp = typer.Typer()\n\n@app.command()\ndef check():\n    \"\"\"Check system status.\"\"\"\n    systems = [\"Database\", \"Cache\", \"API\", \"Auth\", \"Storage\"]\n    \n    for system in track(systems, description=\"Checking systems\"):\n        time.sleep(0.5)  # Simulate check\n        # Print each system with OK in green\n        rprint(f\"[bold]{system}[/bold]: [____]OK[/____]\")\n\nif __name__ == \"__main__\":\n    app()\n",
              "solution": "import typer\nfrom rich import print as rprint\nfrom rich.progress import track\nimport time\n\napp = typer.Typer()\n\n@app.command()\ndef check():\n    \"\"\"Check system status.\"\"\"\n    systems = [\"Database\", \"Cache\", \"API\", \"Auth\", \"Storage\"]\n    \n    for system in track(systems, description=\"Checking systems\"):\n        time.sleep(0.5)  # Simulate check\n        rprint(f\"[bold]{system}[/bold]: [green]OK[/green]\")\n\nif __name__ == \"__main__\":\n    app()\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Uses Rich progress and colors",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Color tags use the format `[color]text[/color]`. For green, use `[green]OK[/green]`."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "module-16-lesson-04",
          "title": "Mini-Project: Task Manager CLI",
          "moduleId": "module-16",
          "order": 4,
          "estimatedMinutes": 45,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Project Overview",
              "content": "Let's build a complete task manager CLI that combines everything we've learned:\n\n**Features:**\n- Add, list, complete, and delete tasks\n- Persistent storage with JSON file\n- Priority levels (low, medium, high)\n- Beautiful Rich table output\n- Shell completion support\n\n**Project structure:**\n```\ntasks/\n  __init__.py\n  cli.py       # Typer commands\n  storage.py   # JSON file handling\n  models.py    # Task dataclass\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Complete Implementation",
              "content": "**Usage:**\n```\n$ tasks add \"Write docs\" --priority high\nAdded: Write docs [HIGH]\n\n$ tasks list\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ ID ‚îÇ Task        ‚îÇ Priority ‚îÇ Status     ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ 1  ‚îÇ Write docs  ‚îÇ HIGH     ‚îÇ pending    ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n\n$ tasks done 1\nCompleted: Write docs\n```",
              "code": "# cli.py - Main Typer application\nimport typer\nfrom enum import Enum\nfrom pathlib import Path\nfrom rich import print as rprint\nfrom rich.table import Table\nimport json\nfrom datetime import datetime\n\napp = typer.Typer(help=\"Task Manager - organize your work.\")\nTASKS_FILE = Path.home() / \".tasks.json\"\n\nclass Priority(str, Enum):\n    low = \"low\"\n    medium = \"medium\"\n    high = \"high\"\n\ndef load_tasks() -> list[dict]:\n    if TASKS_FILE.exists():\n        return json.loads(TASKS_FILE.read_text())\n    return []\n\ndef save_tasks(tasks: list[dict]):\n    TASKS_FILE.write_text(json.dumps(tasks, indent=2))\n\n@app.command()\ndef add(task: str, priority: Priority = Priority.medium):\n    \"\"\"Add a new task.\"\"\"\n    tasks = load_tasks()\n    new_task = {\n        \"id\": len(tasks) + 1,\n        \"text\": task,\n        \"priority\": priority.value,\n        \"done\": False,\n        \"created\": datetime.now().isoformat()\n    }\n    tasks.append(new_task)\n    save_tasks(tasks)\n    color = {\"high\": \"red\", \"medium\": \"yellow\", \"low\": \"green\"}[priority.value]\n    rprint(f\"Added: {task} [{color}]{priority.value.upper()}[/{color}]\")\n\n@app.command(name=\"list\")\ndef list_tasks():\n    \"\"\"List all tasks.\"\"\"\n    tasks = load_tasks()\n    if not tasks:\n        rprint(\"[dim]No tasks yet. Add one with: tasks add 'Your task'[/dim]\")\n        return\n    \n    table = Table(title=\"Tasks\")\n    table.add_column(\"ID\", style=\"cyan\")\n    table.add_column(\"Task\")\n    table.add_column(\"Priority\")\n    table.add_column(\"Status\")\n    \n    for t in tasks:\n        priority_color = {\"high\": \"red\", \"medium\": \"yellow\", \"low\": \"green\"}\n        status = \"[green]done[/green]\" if t[\"done\"] else \"pending\"\n        table.add_row(\n            str(t[\"id\"]),\n            t[\"text\"],\n            f\"[{priority_color[t['priority']]}]{t['priority'].upper()}[/{priority_color[t['priority']]}]\",\n            status\n        )\n    rprint(table)\n\n@app.command()\ndef done(task_id: int):\n    \"\"\"Mark a task as complete.\"\"\"\n    tasks = load_tasks()\n    for t in tasks:\n        if t[\"id\"] == task_id:\n            t[\"done\"] = True\n            save_tasks(tasks)\n            rprint(f\"[green]Completed:[/green] {t['text']}\")\n            return\n    rprint(f\"[red]Task {task_id} not found[/red]\")\n    raise typer.Exit(code=1)\n\nif __name__ == \"__main__\":\n    app()\n",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Not Handling Missing JSON File**\n```python\n# WRONG - Crashes if file doesn't exist\ndef load_tasks():\n    return json.loads(TASKS_FILE.read_text())  # FileNotFoundError!\n\n# CORRECT - Check if file exists first\ndef load_tasks():\n    if TASKS_FILE.exists():\n        return json.loads(TASKS_FILE.read_text())\n    return []\n```\n\n**2. ID Conflicts After Deletion**\n```python\n# WRONG - Using list index as ID causes gaps\nnew_task = {\"id\": len(tasks) + 1, ...}  # After deletion, IDs repeat!\n\n# CORRECT - Find max ID or use UUID\ndef next_id(tasks):\n    if not tasks:\n        return 1\n    return max(t[\"id\"] for t in tasks) + 1\n```\n\n**3. Forgetting to Save After Modifications**\n```python\n# WRONG - Changes lost when program exits\n@app.command()\ndef done(task_id: int):\n    tasks = load_tasks()\n    tasks[task_id - 1][\"done\"] = True\n    # Forgot save_tasks(tasks)!\n\n# CORRECT - Always save after modifying\n@app.command()\ndef done(task_id: int):\n    tasks = load_tasks()\n    tasks[task_id - 1][\"done\"] = True\n    save_tasks(tasks)  # Persist changes\n```\n\n**4. Not Inheriting from str in Enum**\n```python\n# WRONG - Typer can't serialize this properly\nclass Priority(Enum):\n    low = \"low\"\n    high = \"high\"\n\n# CORRECT - Inherit from str for CLI compatibility\nclass Priority(str, Enum):\n    low = \"low\"\n    high = \"high\"\n```\n\n**5. Hardcoding File Paths**\n```python\n# WRONG - Doesn't work across users/systems\nTASKS_FILE = \"/Users/alice/.tasks.json\"\n\n# CORRECT - Use Path.home() for user directory\nfrom pathlib import Path\nTASKS_FILE = Path.home() / \".tasks.json\"\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Patterns Used",
              "content": "- **`Enum` for choices** - `Priority(str, Enum)` gives autocomplete for `--priority`\n- **`Path.home()`** - Store data in user's home directory\n- **JSON persistence** - Simple file-based storage\n- **Rich Table** - Professional output formatting\n- **Exit codes** - `typer.Exit(code=1)` for errors"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-16-lesson-04-challenge-1",
              "title": "Extend the Task Manager",
              "description": "Add a `delete` command that removes a task by ID.\n\n**Requirements:**\n- Accept task_id as argument\n- Remove the task from the list\n- Print confirmation or error\n- Save the updated list",
              "instructions": "Implement the delete command for the task manager.",
              "starterCode": "@app.command()\ndef delete(task_id: ____):\n    \"\"\"Delete a task by ID.\"\"\"\n    tasks = load_tasks()\n    for i, t in enumerate(tasks):\n        if t[\"id\"] == task_id:\n            removed = tasks.____(i)\n            save_tasks(tasks)\n            rprint(f\"[red]Deleted:[/red] {removed['text']}\")\n            return\n    rprint(f\"[red]Task {task_id} not found[/red]\")\n    raise typer.Exit(code=1)\n",
              "solution": "@app.command()\ndef delete(task_id: int):\n    \"\"\"Delete a task by ID.\"\"\"\n    tasks = load_tasks()\n    for i, t in enumerate(tasks):\n        if t[\"id\"] == task_id:\n            removed = tasks.pop(i)\n            save_tasks(tasks)\n            rprint(f\"[red]Deleted:[/red] {removed['text']}\")\n            return\n    rprint(f\"[red]Task {task_id} not found[/red]\")\n    raise typer.Exit(code=1)\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Delete command removes task",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `tasks.pop(i)` to remove and return the item at index i."
                }
              ],
              "commonMistakes": [],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-17",
      "title": "Exception Groups & Structured Concurrency",
      "description": "Master Python 3.11+ exception handling with ExceptionGroup, except*, and asyncio.TaskGroup for robust concurrent programming",
      "difficulty": "advanced",
      "estimatedHours": 3,
      "lessons": [
        {
          "id": "module-17-lesson-01",
          "title": "Introduction to Exception Groups (Python 3.11+)",
          "moduleId": "module-17",
          "order": 1,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "The Problem: Multiple Failures",
              "content": "Traditional `try/except` handles **one error at a time**. But what happens when multiple things fail simultaneously?\n\n**Real-world scenarios:**\n- You're validating 5 form fields, and 3 have errors\n- You're calling 10 APIs in parallel, and 4 fail\n- You're processing a batch of files, and some are corrupt\n\n**The old way:** Only the first error gets caught. Others are lost or require complex workarounds.\n\n**Python 3.11+ solution:** `ExceptionGroup` - a container that holds multiple exceptions at once.\n\n```python\n# Python 3.11+ requirement\nimport sys\nassert sys.version_info >= (3, 11), \"Requires Python 3.11+\"\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nCaught exception group: Multiple validation errors (3 sub-exceptions)\n  - Invalid email format\n  - Password too short\n  - Username contains invalid characters\n```",
              "code": "# Creating and raising an ExceptionGroup\n\nclass ValidationError(Exception):\n    pass\n\ndef validate_user(email: str, password: str, username: str):\n    errors = []\n    \n    if \"@\" not in email:\n        errors.append(ValidationError(\"Invalid email format\"))\n    \n    if len(password) < 8:\n        errors.append(ValidationError(\"Password too short\"))\n    \n    if not username.isalnum():\n        errors.append(ValidationError(\"Username contains invalid characters\"))\n    \n    if errors:\n        raise ExceptionGroup(\"Multiple validation errors\", errors)\n    \n    return {\"email\": email, \"password\": password, \"username\": username}\n\n# Usage\ntry:\n    validate_user(\"bademail\", \"short\", \"user@name\")\nexcept ExceptionGroup as eg:\n    print(f\"Caught exception group: {eg.message} ({len(eg.exceptions)} sub-exceptions)\")\n    for exc in eg.exceptions:\n        print(f\"  - {exc}\")\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "**Creating an ExceptionGroup:**\n```python\nExceptionGroup(message: str, exceptions: list[Exception])\n```\n\n**Accessing sub-exceptions:**\n```python\neg.message      # The group's message\neg.exceptions   # Tuple of contained exceptions\nlen(eg.exceptions)  # Count of exceptions\n```\n\n**BaseExceptionGroup vs ExceptionGroup:**\n- `ExceptionGroup` - for regular exceptions (ValueError, TypeError, etc.)\n- `BaseExceptionGroup` - for base exceptions (KeyboardInterrupt, SystemExit)\n\n**Nesting:** ExceptionGroups can contain other ExceptionGroups - useful for complex hierarchies."
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Creating ExceptionGroup with Empty List**\n```python\n# WRONG - Empty exception list raises ValueError\nerrors = []\nraise ExceptionGroup(\"Errors\", errors)  # ValueError!\n\n# CORRECT - Only raise if there are errors\nif errors:\n    raise ExceptionGroup(\"Errors\", errors)\n```\n\n**2. Using ExceptionGroup on Python < 3.11**\n```python\n# WRONG - ExceptionGroup doesn't exist before 3.11\nraise ExceptionGroup(\"Errors\", [e1, e2])  # NameError!\n\n# CORRECT - Check version or use exceptiongroup backport\nimport sys\nif sys.version_info < (3, 11):\n    from exceptiongroup import ExceptionGroup  # pip install exceptiongroup\n```\n\n**3. Catching ExceptionGroup with Regular except**\n```python\n# WRONG - Regular except catches the group, not individual errors\ntry:\n    raise ExceptionGroup(\"Errors\", [ValueError(\"a\"), TypeError(\"b\")])\nexcept ValueError:  # This won't catch the ValueError inside!\n    pass\n\n# CORRECT - Use except* for ExceptionGroups\ntry:\n    raise ExceptionGroup(\"Errors\", [ValueError(\"a\"), TypeError(\"b\")])\nexcept* ValueError as eg:  # Catches ValueErrors inside the group\n    print(eg.exceptions)\n```\n\n**4. Confusing .exceptions with a List**\n```python\n# WRONG - .exceptions is a tuple, not a list\neg.exceptions.append(new_error)  # AttributeError!\n\n# CORRECT - .exceptions is immutable tuple\nfor exc in eg.exceptions:  # Iterate directly\n    handle(exc)\n```\n\n**5. Raising Single Exception Instead of Group for Validation**\n```python\n# WRONG - Only first error reported, rest are lost\nfor field in fields:\n    if not valid(field):\n        raise ValueError(f\"{field} invalid\")  # Stops here!\n\n# CORRECT - Collect all errors, raise as group\nerrors = [ValueError(f\"{f} invalid\") for f in fields if not valid(f)]\nif errors:\n    raise ExceptionGroup(\"Validation failed\", errors)\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`ExceptionGroup`** bundles multiple exceptions together (Python 3.11+)\n- Created with `ExceptionGroup(message, [exceptions])`\n- Access contained exceptions via `.exceptions` attribute\n- Use when multiple independent operations can fail\n- Particularly useful for validation, batch processing, concurrent operations"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-17-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a function that validates a config dictionary and raises an ExceptionGroup if there are errors.\n\n**Requirements:**\n- Check that 'host' exists and is a string\n- Check that 'port' exists and is an integer between 1-65535\n- Collect all errors and raise them as an ExceptionGroup",
              "instructions": "Validate config and raise ExceptionGroup for all errors.",
              "starterCode": "def validate_config(config: dict):\n    errors = []\n    \n    if \"host\" not in config:\n        errors.append(ValueError(\"Missing 'host'\"))\n    elif not isinstance(config[\"host\"], str):\n        errors.append(TypeError(\"'host' must be a string\"))\n    \n    if \"port\" not in config:\n        errors.append(____)\n    elif not isinstance(config[\"port\"], int):\n        errors.append(____)\n    elif not (1 <= config[\"port\"] <= 65535):\n        errors.append(____)\n    \n    if errors:\n        raise ____(\"Config validation failed\", errors)\n    \n    return config\n",
              "solution": "def validate_config(config: dict):\n    errors = []\n    \n    if \"host\" not in config:\n        errors.append(ValueError(\"Missing 'host'\"))\n    elif not isinstance(config[\"host\"], str):\n        errors.append(TypeError(\"'host' must be a string\"))\n    \n    if \"port\" not in config:\n        errors.append(ValueError(\"Missing 'port'\"))\n    elif not isinstance(config[\"port\"], int):\n        errors.append(TypeError(\"'port' must be an integer\"))\n    elif not (1 <= config[\"port\"] <= 65535):\n        errors.append(ValueError(\"'port' must be between 1 and 65535\"))\n    \n    if errors:\n        raise ExceptionGroup(\"Config validation failed\", errors)\n    \n    return config\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Raises ExceptionGroup for invalid config",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use ValueError for missing/invalid values, TypeError for wrong types. Raise ExceptionGroup at the end."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Raising errors immediately instead of collecting them",
                  "consequence": "Only the first error is reported",
                  "correction": "Append all errors to a list, then raise ExceptionGroup at the end"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-17-lesson-02",
          "title": "The except* Syntax - Selective Handling",
          "moduleId": "module-17",
          "order": 2,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Understanding except*",
              "content": "The `except*` syntax (note the asterisk!) is designed specifically for handling ExceptionGroups.\n\n**Key difference from `except`:**\n- `except ValueError` - catches a single ValueError\n- `except* ValueError` - catches all ValueErrors **inside an ExceptionGroup**\n\n**How it works:**\n1. Python examines each exception in the group\n2. Matches are extracted and handled\n3. Non-matches are re-raised in a new ExceptionGroup\n4. Multiple `except*` blocks can each handle different types\n\n**Important:** `except*` and regular `except` cannot be mixed in the same try block."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nHandling ValueError: Invalid email\nHandling ValueError: Invalid phone\nHandling TypeError: Expected string, got int\nUnhandled errors remain: 1 sub-exceptions\n```",
              "code": "# Using except* to handle different exception types\n\ndef process_data():\n    raise ExceptionGroup(\"Multiple errors\", [\n        ValueError(\"Invalid email\"),\n        ValueError(\"Invalid phone\"),\n        TypeError(\"Expected string, got int\"),\n        KeyError(\"Missing 'name' field\")\n    ])\n\ntry:\n    process_data()\nexcept* ValueError as eg:\n    # Handles ALL ValueErrors in the group\n    for exc in eg.exceptions:\n        print(f\"Handling ValueError: {exc}\")\nexcept* TypeError as eg:\n    # Handles ALL TypeErrors in the group\n    for exc in eg.exceptions:\n        print(f\"Handling TypeError: {exc}\")\nexcept* KeyError as eg:\n    # KeyError is not handled here, so it propagates\n    print(f\"Unhandled errors remain: {len(eg.exceptions)} sub-exceptions\")\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "**The `except*` rules:**\n\n```python\ntry:\n    risky_operation()\nexcept* ValueError as eg:      # eg is ALWAYS an ExceptionGroup\n    for exc in eg.exceptions:   # Even if only one ValueError was caught\n        handle(exc)\nexcept* (TypeError, KeyError):  # Catch multiple types\n    pass\n```\n\n**Key behaviors:**\n1. `eg` is always an ExceptionGroup, never a single exception\n2. Multiple `except*` blocks can match the same ExceptionGroup\n3. Unhandled exceptions are automatically re-raised\n4. You can use `raise` to re-raise within `except*`\n\n**What you CAN'T do:**\n```python\ntry:\n    ...\nexcept* ValueError:  # except* here...\n    ...\nexcept KeyError:     # ...cannot mix with regular except\n    ...                # SyntaxError!\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Mixing except* with Regular except**\n```python\n# WRONG - SyntaxError when mixing except* and except\ntry:\n    risky_operation()\nexcept* ValueError:  # except* block\n    pass\nexcept KeyError:     # Regular except - SyntaxError!\n    pass\n\n# CORRECT - Use only except* for ExceptionGroups\ntry:\n    risky_operation()\nexcept* ValueError:\n    pass\nexcept* KeyError:  # All except* blocks\n    pass\n```\n\n**2. Expecting a Single Exception Instead of ExceptionGroup**\n```python\n# WRONG - eg is ExceptionGroup, not single exception\nexcept* ValueError as eg:\n    print(str(eg))  # Prints ExceptionGroup, not the ValueError!\n\n# CORRECT - Iterate over eg.exceptions\nexcept* ValueError as eg:\n    for exc in eg.exceptions:\n        print(str(exc))  # Prints each ValueError\n```\n\n**3. Forgetting That Unhandled Exceptions Re-raise**\n```python\n# WRONG - Assuming all exceptions are handled\ntry:\n    raise ExceptionGroup(\"E\", [ValueError(\"a\"), KeyError(\"b\")])\nexcept* ValueError:\n    pass  # KeyError still raises!\n\n# CORRECT - Handle all expected types or catch remaining\ntry:\n    raise ExceptionGroup(\"E\", [ValueError(\"a\"), KeyError(\"b\")])\nexcept* ValueError:\n    pass\nexcept* KeyError:\n    pass  # Now both are handled\n```\n\n**4. Using except* for Non-ExceptionGroup Errors**\n```python\n# WRONG - except* doesn't catch regular exceptions\ntry:\n    raise ValueError(\"oops\")  # Regular exception\nexcept* ValueError:  # Won't catch it!\n    pass\n\n# CORRECT - Use regular except for regular exceptions\ntry:\n    raise ValueError(\"oops\")\nexcept ValueError:  # Regular except\n    pass\n```\n\n**5. Trying to Suppress with Pass (Remaining Errors Propagate)**\n```python\n# WRONG - Thinking pass suppresses all\ntry:\n    raise ExceptionGroup(\"E\", [ValueError(), TypeError()])\nexcept* ValueError:\n    pass  # TypeError still raises after this!\n\n# CORRECT - To suppress all, catch Exception\ntry:\n    raise ExceptionGroup(\"E\", [ValueError(), TypeError()])\nexcept* Exception:  # Catches all exception types\n    pass\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`except*`** handles exceptions inside ExceptionGroups\n- The caught value is always an ExceptionGroup (even for one match)\n- Multiple `except*` blocks can handle different types from the same group\n- Unhandled exceptions are automatically re-raised\n- Cannot mix `except*` with regular `except` in the same try block"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-17-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Handle an ExceptionGroup that contains both ConnectionError and TimeoutError exceptions differently.\n\n**Requirements:**\n- Print 'Retrying...' for each ConnectionError\n- Print 'Timeout!' for each TimeoutError",
              "instructions": "Use except* to handle ConnectionError and TimeoutError separately.",
              "starterCode": "def network_calls():\n    raise ExceptionGroup(\"Network failures\", [\n        ConnectionError(\"Server 1 unreachable\"),\n        TimeoutError(\"Server 2 timed out\"),\n        ConnectionError(\"Server 3 unreachable\"),\n    ])\n\ntry:\n    network_calls()\nexcept* ConnectionError as eg:\n    for exc in eg.exceptions:\n        print(f\"Retrying... ({exc})\")\nexcept* ____ as eg:\n    for exc in eg.exceptions:\n        print(f\"Timeout! ({exc})\")\n",
              "solution": "def network_calls():\n    raise ExceptionGroup(\"Network failures\", [\n        ConnectionError(\"Server 1 unreachable\"),\n        TimeoutError(\"Server 2 timed out\"),\n        ConnectionError(\"Server 3 unreachable\"),\n    ])\n\ntry:\n    network_calls()\nexcept* ConnectionError as eg:\n    for exc in eg.exceptions:\n        print(f\"Retrying... ({exc})\")\nexcept* TimeoutError as eg:\n    for exc in eg.exceptions:\n        print(f\"Timeout! ({exc})\")\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Handles both exception types",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `except* TimeoutError` to catch timeout exceptions."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-17-lesson-03",
          "title": "Structured Concurrency with asyncio.TaskGroup",
          "moduleId": "module-17",
          "order": 3,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "What is Structured Concurrency?",
              "content": "**Structured concurrency** is a design pattern where concurrent tasks have clear lifetimes tied to a scope.\n\n**The old way (asyncio.gather):**\n```python\nresults = await asyncio.gather(task1(), task2(), task3())\n# Problem: If task2 fails, what happens to task1 and task3?\n# Answer: They might keep running in the background!\n```\n\n**The new way (asyncio.TaskGroup - Python 3.11+):**\n```python\nasync with asyncio.TaskGroup() as tg:\n    tg.create_task(task1())\n    tg.create_task(task2())\n    tg.create_task(task3())\n# When the block exits, ALL tasks are guaranteed to be done\n# If any fail, all others are cancelled and errors are grouped\n```\n\n**Benefits:**\n- No orphaned background tasks\n- All errors collected in an ExceptionGroup\n- Clean cancellation on failure"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output (all succeed):**\n```\nFetched: https://api.example.com/users\nFetched: https://api.example.com/posts\nFetched: https://api.example.com/comments\nAll fetches completed!\n```\n\n**Expected Output (one fails):**\n```\nFetched: https://api.example.com/users\nFetched: https://api.example.com/posts\nSome fetches failed:\n  - Connection error for https://api.example.com/bad\n```",
              "code": "import asyncio\n\nasync def fetch_url(url: str) -> str:\n    await asyncio.sleep(0.1)  # Simulate network delay\n    if \"bad\" in url:\n        raise ConnectionError(f\"Connection error for {url}\")\n    print(f\"Fetched: {url}\")\n    return f\"Data from {url}\"\n\nasync def fetch_all(urls: list[str]):\n    try:\n        async with asyncio.TaskGroup() as tg:\n            tasks = [tg.create_task(fetch_url(url)) for url in urls]\n        \n        # Only reached if ALL tasks succeed\n        print(\"All fetches completed!\")\n        return [t.result() for t in tasks]\n    \n    except* ConnectionError as eg:\n        print(\"Some fetches failed:\")\n        for exc in eg.exceptions:\n            print(f\"  - {exc}\")\n        return None\n\n# Run with all good URLs\nasyncio.run(fetch_all([\n    \"https://api.example.com/users\",\n    \"https://api.example.com/posts\",\n    \"https://api.example.com/comments\"\n]))\n\n# Run with one bad URL\nasyncio.run(fetch_all([\n    \"https://api.example.com/users\",\n    \"https://api.example.com/posts\",\n    \"https://api.example.com/bad\"  # This will fail\n]))\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "TaskGroup vs gather",
              "content": "| Feature | asyncio.gather | asyncio.TaskGroup |\n|---------|----------------|-------------------|\n| Error handling | First error raised | All errors in ExceptionGroup |\n| Cancellation | Manual | Automatic on failure |\n| Task cleanup | Background tasks may linger | All tasks guaranteed done |\n| Syntax | `await gather(...)` | `async with TaskGroup()` |\n| Python version | 3.4+ | 3.11+ |\n\n**When to use TaskGroup:**\n- Multiple concurrent operations that should succeed or fail together\n- When you need all errors, not just the first\n- When clean cancellation is important\n\n**When to use gather:**\n- Legacy code (pre-3.11)\n- When you need `return_exceptions=True` behavior"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using Regular try/except Instead of except***\n```python\n# WRONG - Regular except catches ExceptionGroup, not individual errors\nasync with asyncio.TaskGroup() as tg:\n    tg.create_task(risky_task())\nexcept ConnectionError:  # Won't catch ConnectionError inside group!\n    pass\n\n# CORRECT - Use except* for TaskGroup errors\ntry:\n    async with asyncio.TaskGroup() as tg:\n        tg.create_task(risky_task())\nexcept* ConnectionError as eg:  # Catches ConnectionErrors from tasks\n    for exc in eg.exceptions:\n        print(exc)\n```\n\n**2. Accessing Task Results Before Context Exit**\n```python\n# WRONG - Tasks not complete yet\nasync with asyncio.TaskGroup() as tg:\n    task = tg.create_task(fetch_data())\n    result = task.result()  # InvalidStateError - not done yet!\n\n# CORRECT - Access results after context block\nasync with asyncio.TaskGroup() as tg:\n    task = tg.create_task(fetch_data())\n# Now task is complete\nresult = task.result()\n```\n\n**3. Forgetting async with (Using Regular with)**\n```python\n# WRONG - TaskGroup needs async with\nwith asyncio.TaskGroup() as tg:  # TypeError!\n    tg.create_task(my_coro())\n\n# CORRECT - Use async with\nasync with asyncio.TaskGroup() as tg:\n    tg.create_task(my_coro())\n```\n\n**4. Creating Tasks Outside the Context Manager**\n```python\n# WRONG - Cannot add tasks after context starts\nasync with asyncio.TaskGroup() as tg:\n    pass\ntg.create_task(fetch())  # RuntimeError: TaskGroup closed!\n\n# CORRECT - Create tasks inside the context\nasync with asyncio.TaskGroup() as tg:\n    tg.create_task(fetch())  # Create while context is open\n```\n\n**5. Not Handling CancelledError in Tasks**\n```python\n# WRONG - Task ignores cancellation, causes issues\nasync def bad_task():\n    try:\n        await long_operation()\n    except asyncio.CancelledError:\n        pass  # Swallowing cancellation!\n\n# CORRECT - Re-raise CancelledError or clean up properly\nasync def good_task():\n    try:\n        await long_operation()\n    except asyncio.CancelledError:\n        await cleanup()\n        raise  # Re-raise after cleanup\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`asyncio.TaskGroup`** provides structured concurrency (Python 3.11+)\n- Use as context manager: `async with asyncio.TaskGroup() as tg:`\n- Create tasks with `tg.create_task(coroutine)`\n- All tasks complete or cancel together\n- Errors are collected in an ExceptionGroup\n- Use `except*` to handle errors from failed tasks"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-17-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Convert this gather-based code to use TaskGroup.\n\n**Original:**\n```python\nresults = await asyncio.gather(\n    process_item(1),\n    process_item(2),\n    process_item(3)\n)\n```",
              "instructions": "Rewrite using asyncio.TaskGroup.",
              "starterCode": "import asyncio\n\nasync def process_item(item_id: int) -> str:\n    await asyncio.sleep(0.1)\n    return f\"Processed {item_id}\"\n\nasync def process_all():\n    async with asyncio.____() as tg:\n        t1 = tg.____(process_item(1))\n        t2 = tg.____(process_item(2))\n        t3 = tg.____(process_item(3))\n    \n    return [t1.result(), t2.result(), t3.result()]\n\nprint(asyncio.run(process_all()))\n",
              "solution": "import asyncio\n\nasync def process_item(item_id: int) -> str:\n    await asyncio.sleep(0.1)\n    return f\"Processed {item_id}\"\n\nasync def process_all():\n    async with asyncio.TaskGroup() as tg:\n        t1 = tg.create_task(process_item(1))\n        t2 = tg.create_task(process_item(2))\n        t3 = tg.create_task(process_item(3))\n    \n    return [t1.result(), t2.result(), t3.result()]\n\nprint(asyncio.run(process_all()))\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Uses TaskGroup correctly",
                  "expectedOutput": "Processed",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `asyncio.TaskGroup()` and `tg.create_task(coroutine)`."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-17-lesson-04",
          "title": "Partial Failure Handling Patterns",
          "moduleId": "module-17",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Real-World Partial Failures",
              "content": "In production systems, partial success is often acceptable:\n\n**Examples:**\n- Sending notifications to 1000 users - 5 fail, 995 succeed\n- Uploading 50 files - 2 timeout, 48 succeed\n- Validating 20 fields - 3 have errors, 17 are valid\n\n**The pattern:**\n1. Attempt all operations\n2. Collect successes and failures separately\n3. Report both to the caller\n4. Let the caller decide what to do\n\nThis is where ExceptionGroups truly shine."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**Expected Output:**\n```\nSuccessfully sent to: ['user1@email.com', 'user3@email.com']\nFailed to send to 2 recipients:\n  - user2@email.com: Mailbox full\n  - user4@email.com: Invalid address\n```",
              "code": "import asyncio\nfrom dataclasses import dataclass\n\n@dataclass\nclass EmailResult:\n    email: str\n    success: bool\n    error: Exception | None = None\n\nclass EmailError(Exception):\n    def __init__(self, email: str, reason: str):\n        self.email = email\n        super().__init__(f\"{email}: {reason}\")\n\nasync def send_email(email: str) -> EmailResult:\n    await asyncio.sleep(0.1)\n    # Simulate some failures\n    if \"2\" in email:\n        raise EmailError(email, \"Mailbox full\")\n    if \"4\" in email:\n        raise EmailError(email, \"Invalid address\")\n    return EmailResult(email=email, success=True)\n\nasync def send_bulk_emails_safe(emails: list[str]):\n    \"\"\"Send emails with partial failure handling.\"\"\"\n    successes = []\n    failures = []\n    \n    async def safe_send(email: str):\n        try:\n            await send_email(email)\n            return (\"success\", email)\n        except EmailError as e:\n            return (\"failure\", e)\n    \n    async with asyncio.TaskGroup() as tg:\n        tasks = [tg.create_task(safe_send(email)) for email in emails]\n    \n    for task in tasks:\n        status, result = task.result()\n        if status == \"success\":\n            successes.append(result)\n        else:\n            failures.append(result)\n    \n    print(f\"Successfully sent to: {successes}\")\n    if failures:\n        print(f\"Failed to send to {len(failures)} recipients:\")\n        for err in failures:\n            print(f\"  - {err}\")\n    \n    return successes, failures\n\nasyncio.run(send_bulk_emails_safe([\n    \"user1@email.com\",\n    \"user2@email.com\",\n    \"user3@email.com\",\n    \"user4@email.com\"\n]))\n",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Not Wrapping Individual Operations**\n```python\n# WRONG - One failure cancels all tasks\nasync with asyncio.TaskGroup() as tg:\n    for email in emails:\n        tg.create_task(send_email(email))  # One failure stops everything!\n\n# CORRECT - Wrap each operation to catch failures\nasync def safe_send(email):\n    try:\n        return (\"success\", await send_email(email))\n    except EmailError as e:\n        return (\"failure\", e)\n\nasync with asyncio.TaskGroup() as tg:\n    tasks = [tg.create_task(safe_send(email)) for email in emails]\n```\n\n**2. Forgetting to Distinguish Success from Failure in Results**\n```python\n# WRONG - Can't tell successes from failures\nasync def safe_send(email):\n    try:\n        return await send_email(email)\n    except EmailError as e:\n        return e  # Both return same type of result!\n\n# CORRECT - Use tuples or dataclasses for clarity\nasync def safe_send(email):\n    try:\n        return (\"success\", await send_email(email))\n    except EmailError as e:\n        return (\"failure\", e)\n```\n\n**3. Catching Too Broad an Exception in Wrapper**\n```python\n# WRONG - Catches everything including bugs\nasync def safe_send(email):\n    try:\n        return (\"success\", await send_email(email))\n    except Exception:  # Hides programming errors!\n        return (\"failure\", \"unknown error\")\n\n# CORRECT - Catch only expected exceptions\nasync def safe_send(email):\n    try:\n        return (\"success\", await send_email(email))\n    except (EmailError, TimeoutError) as e:  # Specific exceptions\n        return (\"failure\", e)\n```\n\n**4. Losing Error Context in Failure Results**\n```python\n# WRONG - Error details lost\nexcept EmailError:\n    return (\"failure\", email)  # Which error? Why did it fail?\n\n# CORRECT - Preserve error information\nexcept EmailError as e:\n    return (\"failure\", {\"email\": email, \"error\": str(e), \"type\": type(e).__name__})\n```\n\n**5. Not Returning Consistent Types**\n```python\n# WRONG - Success returns string, failure returns exception\nasync def safe_send(email):\n    try:\n        result = await send_email(email)\n        return result  # str\n    except EmailError as e:\n        return e  # Exception - different type!\n\n# CORRECT - Consistent return structure\nasync def safe_send(email):\n    try:\n        return (\"success\", await send_email(email))\n    except EmailError as e:\n        return (\"failure\", e)  # Both are tuples\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Wrap individual operations** to catch failures without stopping the group\n- Return `(status, result)` tuples to distinguish success/failure\n- **Collect both successes and failures** separately\n- Let the **caller decide** how to handle partial success\n- Use dataclasses for structured error information"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-17-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Implement a file processor that handles partial failures.\n\n**Requirements:**\n- Process a list of filenames\n- Some files may 'fail' (contain 'bad' in the name)\n- Return lists of successful and failed filenames",
              "instructions": "Create a partial failure handler for file processing.",
              "starterCode": "import asyncio\n\nasync def process_file(filename: str) -> str:\n    if \"bad\" in filename:\n        raise ValueError(f\"Cannot process {filename}\")\n    return f\"Processed {filename}\"\n\nasync def process_files(filenames: list[str]):\n    successes = []\n    failures = []\n    \n    async def safe_process(filename):\n        try:\n            result = await process_file(filename)\n            return (\"success\", result)\n        except ValueError as e:\n            return (\"failure\", str(e))\n    \n    async with asyncio.TaskGroup() as tg:\n        tasks = [tg.____(safe_process(f)) for f in filenames]\n    \n    for task in tasks:\n        status, result = task.____\n        if status == \"success\":\n            successes.append(result)\n        else:\n            failures.append(result)\n    \n    return successes, failures\n",
              "solution": "import asyncio\n\nasync def process_file(filename: str) -> str:\n    if \"bad\" in filename:\n        raise ValueError(f\"Cannot process {filename}\")\n    return f\"Processed {filename}\"\n\nasync def process_files(filenames: list[str]):\n    successes = []\n    failures = []\n    \n    async def safe_process(filename):\n        try:\n            result = await process_file(filename)\n            return (\"success\", result)\n        except ValueError as e:\n            return (\"failure\", str(e))\n    \n    async with asyncio.TaskGroup() as tg:\n        tasks = [tg.create_task(safe_process(f)) for f in filenames]\n    \n    for task in tasks:\n        status, result = task.result()\n        if status == \"success\":\n            successes.append(result)\n        else:\n            failures.append(result)\n    \n    return successes, failures\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Handles partial failures",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `tg.create_task()` and `task.result()` to get the tuple."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-18",
      "title": "Advanced pytest & Test Architecture",
      "description": "Master pytest fixtures, conftest patterns, mocking, and async testing for professional test suites",
      "difficulty": "advanced",
      "estimatedHours": 4,
      "lessons": [
        {
          "id": "module-18-lesson-01",
          "title": "Fixtures Deep Dive",
          "moduleId": "module-18",
          "order": 1,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Beyond Basic Fixtures",
              "content": "You've used simple fixtures before. Now let's master advanced patterns:\n\n**Fixture Scopes:**\n- `function` (default) - New fixture for each test\n- `class` - Shared within a test class\n- `module` - Shared within a test file\n- `package` - Shared within a package\n- `session` - Shared across all tests\n\n**Why scope matters:**\n- Database connections - `session` scope (expensive to create)\n- Test data - `function` scope (isolated between tests)\n- Temp directories - `module` scope (shared within file)\n\n**Rule of thumb:** Use the narrowest scope that still performs well."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "The conftest.py file is a special pytest file that shares fixtures across multiple test files in the same directory.",
              "code": "# conftest.py - Fixtures available to all tests in directory\nimport pytest\nfrom pathlib import Path\nimport tempfile\n\n@pytest.fixture(scope=\"session\")\ndef database_connection():\n    \"\"\"Expensive setup - reused across all tests.\"\"\"\n    print(\"\\nConnecting to database...\")\n    conn = {\"host\": \"localhost\", \"connected\": True}  # Simulated\n    yield conn\n    print(\"\\nClosing database connection...\")\n    conn[\"connected\"] = False\n\n@pytest.fixture(scope=\"function\")\ndef temp_file(tmp_path):\n    \"\"\"Fresh temp file for each test.\"\"\"\n    file_path = tmp_path / \"test_data.txt\"\n    file_path.write_text(\"initial content\")\n    return file_path\n\n@pytest.fixture\ndef user_factory():\n    \"\"\"Factory fixture - returns a function to create users.\"\"\"\n    created_users = []\n    \n    def _create_user(name: str, role: str = \"user\"):\n        user = {\"name\": name, \"role\": role, \"id\": len(created_users) + 1}\n        created_users.append(user)\n        return user\n    \n    yield _create_user\n    \n    # Cleanup: delete created users\n    print(f\"\\nCleaning up {len(created_users)} test users\")\n\n# test_example.py\ndef test_database_query(database_connection):\n    assert database_connection[\"connected\"] is True\n\ndef test_file_operations(temp_file):\n    assert temp_file.read_text() == \"initial content\"\n    temp_file.write_text(\"modified\")\n    assert temp_file.read_text() == \"modified\"\n\ndef test_multiple_users(user_factory):\n    admin = user_factory(\"Alice\", role=\"admin\")\n    user = user_factory(\"Bob\")\n    assert admin[\"role\"] == \"admin\"\n    assert user[\"id\"] == 2\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Fixture Patterns",
              "content": "**1. Factory Fixtures** - When you need to create multiple instances:\n```python\n@pytest.fixture\ndef make_order():\n    def _make_order(product, quantity=1):\n        return Order(product=product, quantity=quantity)\n    return _make_order\n```\n\n**2. Parameterized Fixtures** - Run tests with different setups:\n```python\n@pytest.fixture(params=[\"sqlite\", \"postgres\", \"mysql\"])\ndef database(request):\n    return connect_to(request.param)\n```\n\n**3. Fixture Dependencies** - Fixtures can use other fixtures:\n```python\n@pytest.fixture\ndef authenticated_client(client, test_user):\n    client.login(test_user)\n    return client\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Using return Instead of yield for Teardown**\n```python\n# WRONG - Teardown code never runs\n@pytest.fixture\ndef database():\n    conn = connect()\n    return conn  # Teardown below is unreachable!\n    conn.close()  # Never executed!\n\n# CORRECT - Use yield for setup/teardown\n@pytest.fixture\ndef database():\n    conn = connect()\n    yield conn  # Test runs here\n    conn.close()  # Runs after test\n```\n\n**2. Wrong Scope for Shared State**\n```python\n# WRONG - Session scope modifies shared state\n@pytest.fixture(scope=\"session\")\ndef users_list():\n    return []  # Same list shared across ALL tests!\n\n# CORRECT - Use function scope for mutable state\n@pytest.fixture(scope=\"function\")  # or just @pytest.fixture\ndef users_list():\n    return []  # Fresh list for each test\n```\n\n**3. Forgetting to Request the Fixture**\n```python\n# WRONG - Fixture never runs, test uses wrong db\n@pytest.fixture\ndef database():\n    return create_test_db()\n\ndef test_query():  # Missing database parameter!\n    result = query(real_db)  # Uses production DB!\n\n# CORRECT - Request fixture as parameter\ndef test_query(database):  # Fixture is injected\n    result = query(database)\n```\n\n**4. Circular Fixture Dependencies**\n```python\n# WRONG - Circular dependency causes error\n@pytest.fixture\ndef fixture_a(fixture_b):\n    return setup_a(fixture_b)\n\n@pytest.fixture\ndef fixture_b(fixture_a):  # Error: circular!\n    return setup_b(fixture_a)\n\n# CORRECT - Break the cycle with intermediate fixture\n@pytest.fixture\ndef shared_setup():\n    return common_config()\n\n@pytest.fixture\ndef fixture_a(shared_setup):\n    return setup_a(shared_setup)\n```\n\n**5. Factory Fixture Returning Function Instead of Yielding**\n```python\n# WRONG - No cleanup possible\n@pytest.fixture\ndef make_user():\n    users = []\n    def _make(name):\n        u = User(name)\n        users.append(u)\n        return u\n    return _make  # Can't clean up users!\n\n# CORRECT - Yield enables cleanup\n@pytest.fixture\ndef make_user():\n    users = []\n    def _make(name):\n        u = User(name)\n        users.append(u)\n        return u\n    yield _make\n    for u in users:  # Cleanup runs\n        u.delete()\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **Scope controls lifetime**: function < class < module < package < session\n- **Factory fixtures** return functions to create test data\n- **Fixtures can depend on fixtures** for complex setups\n- **`conftest.py`** makes fixtures available to all tests in a directory\n- **Use `yield`** for setup/teardown in a single fixture"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-18-lesson-01-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a fixture factory for creating test products.\n\n**Requirements:**\n- Create a `product_factory` fixture\n- The factory function should accept name and price\n- Track created products for cleanup",
              "instructions": "Implement a factory fixture for products.",
              "starterCode": "import pytest\n\n@pytest.fixture\ndef product_factory():\n    created = []\n    \n    def _create_product(name: str, price: float = 9.99):\n        product = {\"name\": name, \"price\": price, \"id\": len(created) + 1}\n        created.____(product)\n        return product\n    \n    ____ _create_product\n    \n    print(f\"Cleaning up {len(created)} products\")\n\ndef test_create_products(product_factory):\n    p1 = product_factory(\"Widget\")\n    p2 = product_factory(\"Gadget\", price=19.99)\n    assert p1[\"id\"] == 1\n    assert p2[\"price\"] == 19.99\n",
              "solution": "import pytest\n\n@pytest.fixture\ndef product_factory():\n    created = []\n    \n    def _create_product(name: str, price: float = 9.99):\n        product = {\"name\": name, \"price\": price, \"id\": len(created) + 1}\n        created.append(product)\n        return product\n    \n    yield _create_product\n    \n    print(f\"Cleaning up {len(created)} products\")\n\ndef test_create_products(product_factory):\n    p1 = product_factory(\"Widget\")\n    p2 = product_factory(\"Gadget\", price=19.99)\n    assert p1[\"id\"] == 1\n    assert p2[\"price\"] == 19.99\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Factory creates products correctly",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `created.append(product)` and `yield _create_product` to return the factory."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-18-lesson-02",
          "title": "Mocking and Patching",
          "moduleId": "module-18",
          "order": 2,
          "estimatedMinutes": 35,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "Why Mock?",
              "content": "**Mocking** replaces real objects with fake ones during tests.\n\n**When to mock:**\n- External APIs (don't hit real servers in tests)\n- Databases (faster, no side effects)\n- Time/random (make tests deterministic)\n- Expensive operations (fast tests)\n\n**When NOT to mock:**\n- Your own code (test the real thing)\n- Simple data structures (just use them)\n- When integration tests are more valuable\n\n**Python's mocking tools:**\n- `unittest.mock` (standard library)\n- `pytest-mock` (pytest plugin, cleaner API)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example shows how to mock external API calls so tests don't depend on network or live services.",
              "code": "# weather.py\nimport httpx\n\ndef get_weather(city: str) -> dict:\n    response = httpx.get(f\"https://api.weather.com/{city}\")\n    response.raise_for_status()\n    return response.json()\n\ndef weather_message(city: str) -> str:\n    data = get_weather(city)\n    return f\"It's {data['temp']}F in {city}\"\n\n# test_weather.py\nimport pytest\nfrom unittest.mock import patch, MagicMock\n\ndef test_weather_message_with_patch():\n    # Mock the get_weather function\n    with patch(\"weather.get_weather\") as mock_get_weather:\n        mock_get_weather.return_value = {\"temp\": 72, \"conditions\": \"sunny\"}\n        \n        result = weather_message(\"Seattle\")\n        \n        assert result == \"It's 72F in Seattle\"\n        mock_get_weather.assert_called_once_with(\"Seattle\")\n\ndef test_weather_api_error():\n    with patch(\"weather.get_weather\") as mock_get_weather:\n        mock_get_weather.side_effect = httpx.HTTPError(\"API down\")\n        \n        with pytest.raises(httpx.HTTPError):\n            weather_message(\"Seattle\")\n\n# Using pytest-mock (cleaner)\ndef test_weather_with_mocker(mocker):\n    mock_weather = mocker.patch(\"weather.get_weather\")\n    mock_weather.return_value = {\"temp\": 65}\n    \n    result = weather_message(\"Portland\")\n    \n    assert \"65\" in result\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Mocking Patterns",
              "content": "**1. Return values:**\n```python\nmock.return_value = {\"data\": \"fake\"}\n```\n\n**2. Side effects (exceptions, sequences):**\n```python\nmock.side_effect = ValueError(\"oops\")\nmock.side_effect = [1, 2, 3]  # Returns 1, then 2, then 3\n```\n\n**3. Checking calls:**\n```python\nmock.assert_called_once()\nmock.assert_called_with(\"arg1\", key=\"value\")\nassert mock.call_count == 3\n```\n\n**4. MagicMock for complex objects:**\n```python\nmock_db = MagicMock()\nmock_db.query.return_value.filter.return_value.all.return_value = [user1, user2]\n```\n\n**5. Patching where it's used, not where it's defined:**\n```python\n# If weather.py imports httpx.get, patch \"weather.httpx.get\"\npatch(\"weather.httpx.get\")  # Correct\npatch(\"httpx.get\")          # Wrong - patches the module, not the import\n```"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Patching Where It's Defined, Not Where It's Used**\n```python\n# WRONG - Patches the original module\nwith patch(\"requests.get\"):  # Patches requests module\n    from myapp import fetch_data\n    fetch_data()  # Still uses real requests!\n\n# CORRECT - Patch where it's imported\nwith patch(\"myapp.requests.get\"):  # Patches myapp's import\n    from myapp import fetch_data\n    fetch_data()  # Uses mock\n```\n\n**2. Forgetting return_value for Method Chains**\n```python\n# WRONG - Mock returns Mock, not expected value\nmock_db = MagicMock()\nmock_db.query.filter.all = [user1]  # Wrong!\n\n# CORRECT - Chain return_value for each call\nmock_db = MagicMock()\nmock_db.query.return_value.filter.return_value.all.return_value = [user1]\n```\n\n**3. Using assert_called() Without Parentheses**\n```python\n# WRONG - This is a property access, not assertion!\nmock.assert_called_once  # Always truthy, never fails!\n\n# CORRECT - Call the assertion method\nmock.assert_called_once()  # Actually checks\n```\n\n**4. Mock Scope Not Matching Test**\n```python\n# WRONG - Mock only active during setup\ndef test_something():\n    with patch(\"module.func\") as mock:\n        mock.return_value = 42\n    # Mock is gone here!\n    result = call_func()  # Uses real function!\n\n# CORRECT - Keep mock active during test\ndef test_something():\n    with patch(\"module.func\") as mock:\n        mock.return_value = 42\n        result = call_func()  # Uses mock\n        assert result == 42\n```\n\n**5. Over-Mocking Your Own Code**\n```python\n# WRONG - Mocking the code you're testing\ndef test_calculate():\n    with patch(\"myapp.calculate\") as mock:  # Testing the mock!\n        mock.return_value = 42\n        assert myapp.calculate(1, 2) == 42  # Meaningless!\n\n# CORRECT - Mock dependencies, not the code under test\ndef test_calculate():\n    with patch(\"myapp.external_api\") as mock_api:\n        mock_api.return_value = {\"factor\": 2}\n        assert myapp.calculate(1, 2) == 6  # Tests real logic\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`patch()`** temporarily replaces objects during tests\n- **`return_value`** sets what the mock returns\n- **`side_effect`** raises exceptions or returns sequences\n- **Patch where it's used**, not where it's defined\n- **`pytest-mock`** provides a cleaner `mocker` fixture\n- Don't over-mock - test real behavior when possible"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-18-lesson-02-challenge-1",
              "title": "Practice Exercise",
              "description": "Mock a database query in a test.\n\n**Requirements:**\n- Mock the `db.get_user()` function\n- Make it return a fake user\n- Verify the mock was called correctly",
              "instructions": "Write a test that mocks a database call.",
              "starterCode": "from unittest.mock import patch\n\ndef get_user_greeting(user_id: int) -> str:\n    from db import get_user\n    user = get_user(user_id)\n    return f\"Hello, {user['name']}!\"\n\ndef test_user_greeting():\n    with patch(\"____\") as mock_get_user:\n        mock_get_user.return_value = {\"id\": 1, \"name\": \"Alice\"}\n        \n        result = get_user_greeting(1)\n        \n        assert result == \"Hello, Alice!\"\n        mock_get_user.____\n",
              "solution": "from unittest.mock import patch\n\ndef get_user_greeting(user_id: int) -> str:\n    from db import get_user\n    user = get_user(user_id)\n    return f\"Hello, {user['name']}!\"\n\ndef test_user_greeting():\n    with patch(\"db.get_user\") as mock_get_user:\n        mock_get_user.return_value = {\"id\": 1, \"name\": \"Alice\"}\n        \n        result = get_user_greeting(1)\n        \n        assert result == \"Hello, Alice!\"\n        mock_get_user.assert_called_once_with(1)\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Mocks database correctly",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Patch `db.get_user` and use `assert_called_once_with(1)` to verify."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-18-lesson-03",
          "title": "Testing Async Code with pytest-asyncio",
          "moduleId": "module-18",
          "order": 3,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "The Challenge of Async Testing",
              "content": "Async functions return coroutines, not values. You can't just call them:\n\n```python\nasync def fetch_data():\n    return \"data\"\n\n# This doesn't work:\ndef test_fetch():\n    result = fetch_data()  # Returns coroutine object, not \"data\"!\n    assert result == \"data\"  # Fails!\n```\n\n**Solution:** `pytest-asyncio` - a plugin that lets you write async tests naturally.\n\n**Installation:**\n```bash\nuv add pytest-asyncio\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**pytest.ini or pyproject.toml configuration:**\n```toml\n[tool.pytest.ini_options]\nasyncio_mode = \"auto\"\n```",
              "code": "# test_async.py\nimport pytest\nimport asyncio\n\n# The function we're testing\nasync def fetch_user(user_id: int) -> dict:\n    await asyncio.sleep(0.1)  # Simulate network call\n    return {\"id\": user_id, \"name\": f\"User {user_id}\"}\n\n# Basic async test - just add async!\n@pytest.mark.asyncio\nasync def test_fetch_user():\n    user = await fetch_user(42)\n    assert user[\"id\"] == 42\n    assert user[\"name\"] == \"User 42\"\n\n# Async fixture\n@pytest.fixture\nasync def sample_user():\n    return await fetch_user(1)\n\n@pytest.mark.asyncio\nasync def test_with_async_fixture(sample_user):\n    assert sample_user[\"name\"] == \"User 1\"\n\n# Testing exceptions\n@pytest.mark.asyncio\nasync def test_async_error():\n    async def failing_operation():\n        await asyncio.sleep(0.01)\n        raise ValueError(\"Something went wrong\")\n    \n    with pytest.raises(ValueError, match=\"went wrong\"):\n        await failing_operation()\n\n# Testing concurrent operations\n@pytest.mark.asyncio\nasync def test_concurrent_fetches():\n    users = await asyncio.gather(\n        fetch_user(1),\n        fetch_user(2),\n        fetch_user(3)\n    )\n    assert len(users) == 3\n    assert users[0][\"id\"] == 1\n",
              "language": "python"
            },
            {
              "type": "THEORY",
              "title": "Async Testing Patterns",
              "content": "**1. Mark tests as async:**\n```python\n@pytest.mark.asyncio\nasync def test_something():\n    result = await async_function()\n```\n\n**2. Async fixtures:**\n```python\n@pytest.fixture\nasync def db_connection():\n    conn = await connect_to_db()\n    yield conn\n    await conn.close()\n```\n\n**3. Testing timeouts:**\n```python\n@pytest.mark.asyncio\nasync def test_timeout():\n    with pytest.raises(asyncio.TimeoutError):\n        await asyncio.wait_for(slow_operation(), timeout=0.1)\n```\n\n**4. Auto mode (recommended):**\nSet `asyncio_mode = \"auto\"` in config to skip `@pytest.mark.asyncio` decorators."
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Forgetting to Await in Async Tests**\n```python\n# WRONG - Test passes but doesn't actually run!\n@pytest.mark.asyncio\nasync def test_fetch():\n    result = fetch_data()  # Missing await!\n    assert result == \"data\"  # Comparing coroutine to string!\n\n# CORRECT - Await the coroutine\n@pytest.mark.asyncio\nasync def test_fetch():\n    result = await fetch_data()  # Await returns actual value\n    assert result == \"data\"\n```\n\n**2. Missing @pytest.mark.asyncio Decorator**\n```python\n# WRONG - Test never runs async\nasync def test_async_operation():  # Missing decorator!\n    result = await fetch_data()  # RuntimeWarning: never awaited\n\n# CORRECT - Add the marker\n@pytest.mark.asyncio\nasync def test_async_operation():\n    result = await fetch_data()\n```\n\n**3. Not Installing pytest-asyncio**\n```python\n# WRONG - Marker not recognized\n@pytest.mark.asyncio  # PytestUnknownMarkWarning!\nasync def test_something():\n    pass\n\n# CORRECT - Install the plugin first\n# uv add pytest-asyncio\n# Then add to pyproject.toml:\n# [tool.pytest.ini_options]\n# asyncio_mode = \"auto\"\n```\n\n**4. Mixing Sync and Async Fixtures Incorrectly**\n```python\n# WRONG - Async fixture in sync test\n@pytest.fixture\nasync def async_data():\n    return await fetch()\n\ndef test_sync(async_data):  # Gets coroutine, not data!\n    assert async_data == \"expected\"\n\n# CORRECT - Use async test with async fixture\n@pytest.mark.asyncio\nasync def test_async(async_data):  # Both async\n    assert async_data == \"expected\"\n```\n\n**5. Not Cleaning Up Async Resources**\n```python\n# WRONG - Connection left open\n@pytest.fixture\nasync def db():\n    conn = await connect()\n    return conn  # No cleanup!\n\n# CORRECT - Use yield for cleanup\n@pytest.fixture\nasync def db():\n    conn = await connect()\n    yield conn\n    await conn.close()  # Cleanup after test\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`pytest-asyncio`** enables testing async code\n- Use **`@pytest.mark.asyncio`** decorator on async tests\n- Set **`asyncio_mode = \"auto\"`** to make all async tests work automatically\n- **Async fixtures** work just like regular fixtures\n- Test **concurrent operations** with `asyncio.gather()`\n- Test **timeouts** with `asyncio.wait_for()`"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-18-lesson-03-challenge-1",
              "title": "Practice Exercise",
              "description": "Write an async test for a function that fetches multiple URLs concurrently.",
              "instructions": "Test concurrent async operations.",
              "starterCode": "import pytest\nimport asyncio\n\nasync def fetch_url(url: str) -> str:\n    await asyncio.sleep(0.05)\n    return f\"Content from {url}\"\n\n@pytest.mark.____\nasync def test_concurrent_fetch():\n    urls = [\"http://a.com\", \"http://b.com\", \"http://c.com\"]\n    results = await asyncio.____(\n        fetch_url(urls[0]),\n        fetch_url(urls[1]),\n        fetch_url(urls[2])\n    )\n    assert len(results) == 3\n    assert \"a.com\" in results[0]\n",
              "solution": "import pytest\nimport asyncio\n\nasync def fetch_url(url: str) -> str:\n    await asyncio.sleep(0.05)\n    return f\"Content from {url}\"\n\n@pytest.mark.asyncio\nasync def test_concurrent_fetch():\n    urls = [\"http://a.com\", \"http://b.com\", \"http://c.com\"]\n    results = await asyncio.gather(\n        fetch_url(urls[0]),\n        fetch_url(urls[1]),\n        fetch_url(urls[2])\n    )\n    assert len(results) == 3\n    assert \"a.com\" in results[0]\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Tests async code correctly",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `@pytest.mark.asyncio` and `asyncio.gather()` for concurrent operations."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "module-18-lesson-04",
          "title": "conftest.py Patterns and Test Organization",
          "moduleId": "module-18",
          "order": 4,
          "estimatedMinutes": 30,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "THEORY",
              "title": "The Power of conftest.py",
              "content": "`conftest.py` is pytest's configuration file that lives alongside your tests.\n\n**What can go in conftest.py:**\n- Fixtures (shared across all tests in directory)\n- Hooks (customize pytest behavior)\n- Plugins (local pytest extensions)\n- pytest_configure (setup/teardown)\n\n**Hierarchy:** conftest.py files cascade - fixtures in a parent directory are available to all subdirectories.\n\n```\ntests/\n  conftest.py           # Global fixtures\n  unit/\n    conftest.py         # Unit-specific fixtures\n    test_models.py\n  integration/\n    conftest.py         # Integration-specific fixtures  \n    test_api.py\n```"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "**A well-organized conftest.py:**",
              "code": "# tests/conftest.py\nimport pytest\nfrom pathlib import Path\nimport json\n\n# === Configuration ===\ndef pytest_configure(config):\n    \"\"\"Called at pytest startup.\"\"\"\n    config.addinivalue_line(\n        \"markers\", \"slow: marks tests as slow (deselect with '-m \\\"not slow\\\"')\"\n    )\n\n# === Shared Fixtures ===\n@pytest.fixture(scope=\"session\")\ndef test_data_dir():\n    \"\"\"Path to test data directory.\"\"\"\n    return Path(__file__).parent / \"data\"\n\n@pytest.fixture(scope=\"session\")\ndef sample_config(test_data_dir):\n    \"\"\"Load sample configuration.\"\"\"\n    config_file = test_data_dir / \"config.json\"\n    return json.loads(config_file.read_text())\n\n# === Factory Fixtures ===\n@pytest.fixture\ndef make_user():\n    \"\"\"Factory for creating test users.\"\"\"\n    _created = []\n    \n    def _make_user(name: str, role: str = \"user\"):\n        user = {\"name\": name, \"role\": role}\n        _created.append(user)\n        return user\n    \n    yield _make_user\n    # Cleanup after test\n    _created.clear()\n\n# === Autouse Fixtures ===\n@pytest.fixture(autouse=True)\ndef reset_environment(monkeypatch):\n    \"\"\"Reset environment for each test.\"\"\"\n    monkeypatch.setenv(\"TESTING\", \"true\")\n    monkeypatch.setenv(\"DEBUG\", \"false\")\n\n# === Parameterized Fixtures ===\n@pytest.fixture(params=[\"sqlite\", \"postgres\"])\ndef database_type(request):\n    \"\"\"Run tests with different databases.\"\"\"\n    return request.param\n\n# === Skip Markers ===\ndef pytest_collection_modifyitems(config, items):\n    \"\"\"Add skip markers based on conditions.\"\"\"\n    import sys\n    if sys.platform == \"win32\":\n        skip_unix = pytest.mark.skip(reason=\"Unix only\")\n        for item in items:\n            if \"unix_only\" in item.keywords:\n                item.add_marker(skip_unix)\n",
              "language": "python"
            },
            {
              "type": "WARNING",
              "title": "Common Pitfalls",
              "content": "### Watch Out For These Common Mistakes:\n\n**1. Putting conftest.py in Wrong Location**\n```python\n# WRONG - conftest.py in project root, not tests/\nproject/\n  conftest.py  # Fixtures not found by tests!\n  src/\n  tests/\n    test_app.py\n\n# CORRECT - conftest.py alongside tests\nproject/\n  src/\n  tests/\n    conftest.py  # Available to all tests in tests/\n    test_app.py\n```\n\n**2. autouse=True with Side Effects**\n```python\n# WRONG - autouse fixture modifies global state\n@pytest.fixture(autouse=True)\ndef setup_db():\n    db.create_tables()  # Runs for EVERY test!\n    # Even tests that don't need a database\n\n# CORRECT - Only autouse for lightweight, universal setup\n@pytest.fixture(autouse=True)\ndef reset_env(monkeypatch):\n    monkeypatch.setenv(\"TESTING\", \"true\")  # Cheap, always needed\n```\n\n**3. Fixture Name Shadowing**\n```python\n# WRONG - Child conftest shadows parent fixture\n# tests/conftest.py\n@pytest.fixture\ndef db():\n    return production_db()  # Shared database\n\n# tests/unit/conftest.py\n@pytest.fixture\ndef db():  # Shadows parent! Tests get this one only\n    return mock_db()\n\n# CORRECT - Use different names or explicit scope\n@pytest.fixture\ndef mock_db():  # Different name, no shadowing\n    return MockDB()\n```\n\n**4. Heavy Setup in Session-Scoped Fixtures Without Cleanup**\n```python\n# WRONG - Resources leak across test runs\n@pytest.fixture(scope=\"session\")\ndef test_database():\n    db = create_database(\"test_db\")\n    populate_test_data(db)\n    return db  # Never cleaned up!\n\n# CORRECT - Use yield for cleanup\n@pytest.fixture(scope=\"session\")\ndef test_database():\n    db = create_database(\"test_db\")\n    populate_test_data(db)\n    yield db\n    db.drop()  # Cleanup after session\n```\n\n**5. Importing Test Modules in conftest.py**\n```python\n# WRONG - Circular imports\n# conftest.py\nfrom tests.test_app import helper_function  # Circular!\n\n@pytest.fixture\ndef setup():\n    return helper_function()\n\n# CORRECT - Keep conftest.py self-contained\n# conftest.py\ndef helper_function():  # Define locally\n    return \"setup\"\n\n@pytest.fixture\ndef setup():\n    return helper_function()\n```"
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "- **`conftest.py`** automatically provides fixtures to tests in its directory\n- **Hierarchy matters** - fixtures cascade from parent to child directories\n- **`autouse=True`** runs a fixture for every test automatically\n- **`pytest_configure`** sets up pytest at startup\n- **`pytest_collection_modifyitems`** can skip or modify tests dynamically\n- Keep conftest.py organized: config, fixtures, hooks"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "module-18-lesson-04-challenge-1",
              "title": "Practice Exercise",
              "description": "Create a conftest.py with a parameterized fixture that runs tests with different environments.",
              "instructions": "Create fixtures for testing in 'dev' and 'prod' environments.",
              "starterCode": "# conftest.py\nimport pytest\n\n@pytest.fixture(params=[\"dev\", \"prod\"])\ndef environment(request):\n    \"\"\"Run tests with different environments.\"\"\"\n    env = request.____\n    return {\"name\": env, \"debug\": env == \"dev\"}\n\n# test_env.py\ndef test_environment_config(environment):\n    if environment[\"name\"] == \"dev\":\n        assert environment[\"debug\"] is True\n    else:\n        assert environment[\"____\"] is False\n",
              "solution": "# conftest.py\nimport pytest\n\n@pytest.fixture(params=[\"dev\", \"prod\"])\ndef environment(request):\n    \"\"\"Run tests with different environments.\"\"\"\n    env = request.param\n    return {\"name\": env, \"debug\": env == \"dev\"}\n\n# test_env.py\ndef test_environment_config(environment):\n    if environment[\"name\"] == \"dev\":\n        assert environment[\"debug\"] is True\n    else:\n        assert environment[\"debug\"] is False\n",
              "language": "python",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Parameterized fixture works",
                  "expectedOutput": "",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "**Hint:** Use `request.param` to get the current parameter value."
                }
              ],
              "commonMistakes": [],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    }
  ]
}