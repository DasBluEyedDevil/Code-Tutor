{
  "type": "FREE_CODING",
  "id": "6.4-challenge",
  "title": "Practice Challenge",
  "description": "Debug this code - it has scope issues:\n\nfunction calculateTotal() {\n  let price = 100;\n  let tax = 0.08;\n  \n  if (price > 50) {\n    let discount = 10;\n  }\n  \n  let total = price - discount + (price * tax);\n  return total;\n}\n\nFix it so discount is accessible. Then calculate the total correctly.",
  "instructions": "Debug this code - it has scope issues:\n\nfunction calculateTotal() {\n  let price = 100;\n  let tax = 0.08;\n  \n  if (price > 50) {\n    let discount = 10;\n  }\n  \n  let total = price - discount + (price * tax);\n  return total;\n}\n\nFix it so discount is accessible. Then calculate the total correctly.",
  "language": "javascript",
  "testCases": [
    {
      "id": "test-1",
      "description": "Calculates total correctly",
      "expectedOutput": "98",
      "isVisible": true
    }
  ],
  "hints": [
    {
      "level": 1,
      "text": "Declare discount outside the if block, or move the calculation inside"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Declaring variables inside blocks with let",
      "consequence": "let discount inside if {} is not accessible outside.",
      "correction": "Declare discount before the if block: let discount = 0;"
    },
    {
      "mistake": "Using var to 'fix' scope issues",
      "consequence": "var creates function scope but leads to other bugs.",
      "correction": "Use let declared at the correct level, never var."
    },
    {
      "mistake": "Forgetting to initialize with a default value",
      "consequence": "discount is undefined if the if condition is false.",
      "correction": "Initialize: let discount = 0; then update in if block."
    }
  ],
  "difficulty": "beginner"
}