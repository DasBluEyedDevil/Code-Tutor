{
  "type": "FREE_CODING",
  "id": "11.4-challenge",
  "title": "Practice Challenge",
  "description": "Simulate a migration system:\n\n1. Create a `migrations` array to store migration records\n2. Create a function `createMigration(name, sql)` that:\n   - Generates a timestamp\n   - Creates migration object\n   - Adds to migrations array\n   - Returns the migration\n3. Create a function `applyMigrations()` that:\n   - Loops through all migrations\n   - Simulates executing SQL\n   - Tracks which are applied\n4. Simulate creating 3 migrations:\n   - 'init' (create users table)\n   - 'add_posts' (create posts table)\n   - 'add_timestamps' (add createdAt fields)\n5. Display migration history\n\nYou're simulating what Prisma does!",
  "instructions": "Simulate a migration system:\n\n1. Create a `migrations` array to store migration records\n2. Create a function `createMigration(name, sql)` that:\n   - Generates a timestamp\n   - Creates migration object\n   - Adds to migrations array\n   - Returns the migration\n3. Create a function `applyMigrations()` that:\n   - Loops through all migrations\n   - Simulates executing SQL\n   - Tracks which are applied\n4. Simulate creating 3 migrations:\n   - 'init' (create users table)\n   - 'add_posts' (create posts table)\n   - 'add_timestamps' (add createdAt fields)\n5. Display migration history\n\nYou're simulating what Prisma does!",
  "language": "javascript",
  "testCases": [
    {
      "id": "test-1",
      "description": "Creates migration with timestamp",
      "expectedOutput": "1",
      "isVisible": true
    },
    {
      "id": "test-2",
      "description": "Tracks applied migrations",
      "expectedOutput": "true",
      "isVisible": true
    }
  ],
  "hints": [
    {
      "level": 1,
      "text": "Use timestamps for unique IDs, Set to track applied migrations, loops to apply each one"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Common migration mistakes:",
      "consequence": "This can lead to errors or unexpected behavior.",
      "correction": "Common migration mistakes:"
    },
    {
      "mistake": "**Forgetting to run migrations**:",
      "consequence": "This can lead to errors or unexpected behavior.",
      "correction": "**Forgetting to run migrations**:\n   ```bash\n   # Changed schema.prisma but database not updated!\n   \n   # Must run:\n   npx prisma migrate dev\n   ```"
    },
    {
      "mistake": "**Using db push in production**:",
      "consequence": "This can lead to errors or unexpected behavior.",
      "correction": "**Using db push in production**:\n   ```bash\n   # NEVER do this in production:\n   npx prisma db push  # No migration history!\n   \n   # Use migrate deploy instead:\n   npx prisma migrate deploy\n   ```"
    }
  ],
  "difficulty": "beginner"
}