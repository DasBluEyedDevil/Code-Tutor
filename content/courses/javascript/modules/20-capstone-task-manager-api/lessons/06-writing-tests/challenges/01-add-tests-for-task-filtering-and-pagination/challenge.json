{
  "type": "FREE_CODING",
  "id": "20.6-challenge",
  "title": "Add Tests for Task Filtering and Pagination",
  "description": "Write unit and integration tests for task listing with filtering and pagination.",
  "instructions": "Create tests for the task listing endpoint that verify: 1) Filtering by status works correctly, 2) Filtering by categoryId works, 3) Pagination with page and limit parameters works, 4) Invalid filters are rejected with proper errors. Write both unit tests for the filtering logic and integration tests for the API endpoint.",
  "language": "typescript",
  "testCases": [
    {
      "id": "test-1",
      "description": "Filter by status returns correct tasks",
      "expectedOutput": "status filter works",
      "isVisible": true
    },
    {
      "id": "test-2",
      "description": "Filter by category returns correct tasks",
      "expectedOutput": "category filter works",
      "isVisible": true
    },
    {
      "id": "test-3",
      "description": "Pagination limits results",
      "expectedOutput": "pagination works",
      "isVisible": true
    },
    {
      "id": "test-4",
      "description": "Invalid filters are rejected",
      "expectedOutput": "validation works",
      "isVisible": true
    }
  ],
  "hints": [
    {
      "level": 1,
      "text": "Use query parameters for filtering: ?status=pending&categoryId=123"
    },
    {
      "level": 2,
      "text": "Validate filter values against allowed enum values"
    },
    {
      "level": 3,
      "text": "Calculate pagination metadata: total count, current page, total pages"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Not validating filter parameters",
      "consequence": "Invalid filters are accepted, returning confusing results",
      "correction": "Use Zod to validate query parameters: z.enum(['pending', 'in_progress', 'completed'])"
    },
    {
      "mistake": "Including other users' tasks in results",
      "consequence": "Data leakage and access control violation",
      "correction": "Always filter by userId from the JWT token"
    },
    {
      "mistake": "Not handling pagination edge cases",
      "consequence": "Page 0, negative limits, or pages beyond data",
      "correction": "Validate: page >= 1, limit >= 1 && limit <= 100, handle empty results"
    }
  ],
  "difficulty": "intermediate"
}