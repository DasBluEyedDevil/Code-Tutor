{
  "id": "csharp",
  "language": "csharp",
  "title": "C# Programming",
  "description": "Master C# and .NET development from fundamentals to advanced concepts, including object-oriented programming, LINQ, async/await, and modern C# features.",
  "difficulty": "advanced",
  "estimatedHours": 29,
  "prerequisites": [],
  "modules": [
    {
      "id": "module-01",
      "title": "Getting Started with C#",
      "description": "Introduction to programming, C#, and .NET. Learn basic syntax, output, comments, and your first programs.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-01-01",
          "title": "What is Programming?",
          "moduleId": "module-01",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're teaching a robot to make a sandwich. You can't just say \"make me lunch\" – the robot needs EXACT steps: pick up bread, put on peanut butter, put on jelly, combine slices. That's programming! You're giving a computer step-by-step instructions in a language it understands.\n\nC# (pronounced \"See-Sharp\") is one of those languages. It's like English, but much more precise and rule-based. When you write C# code, you're telling the computer exactly what to do, one instruction at a time."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// YOUR FIRST C# PROGRAM!\n// This is a comment - the computer ignores it\n// Comments help humans understand the code\n\nConsole.WriteLine(\"Hello, World!\");\n\n// Let's break this down:\n// Console = The black window where text appears\n// WriteLine = Write a line of text\n// \"Hello, World!\" = The text to display\n// ; = End of instruction (like a period in English)\n\n// More examples:\nConsole.WriteLine(\"Welcome to C#!\");\nConsole.WriteLine(\"Programming is fun!\");\nConsole.WriteLine(\"I am learning C#!\");\n\n// Each instruction runs in order:\nConsole.WriteLine(\"First\");   // Runs 1st\nConsole.WriteLine(\"Second\");  // Runs 2nd\nConsole.WriteLine(\"Third\");   // Runs 3rd\n\n// Output:\n// First\n// Second\n// Third",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`//`**: Two slashes create a 'comment' – notes for humans that the computer ignores. Use these to explain your code!\n\n**`Console.WriteLine`**: This is like saying \"Computer, speak!\" It tells the computer to display text on the screen.\n\n**`(\"Hello, World!\")`**: The text inside quotes is the MESSAGE you want to display. It must be in quotes so C# knows it's text, not code.\n\n**`;`**: The semicolon is like a period at the end of a sentence. It tells C#: \"This instruction is complete!\""
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-01-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Write your first program!\n\n1. Display \"Hello, World!\" (the traditional first program)\n2. Display your name\n3. Display your favorite hobby\n4. Display a message about what you want to learn\n\nUse Console.WriteLine() for each line.\nDon't forget the semicolons!\nAdd comments explaining what each line does.",
              "starterCode": "// My First C# Program\n// This program displays information about me\n\nConsole.WriteLine(\"Hello, World!\");\n\n// TODO: Display your name here\n\n// TODO: Display your hobby\n\n// TODO: Display what you want to learn",
              "solution": "// My First C# Program\n// This program displays information about me\n\nConsole.WriteLine(\"Hello, World!\");\n\n// Display my name\nConsole.WriteLine(\"My name is Alex\");\n\n// Display my hobby\nConsole.WriteLine(\"I love playing guitar\");\n\n// Display my learning goal\nConsole.WriteLine(\"I want to learn C# to build games!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Hello\"",
                  "expectedOutput": "Hello",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"World\"",
                  "expectedOutput": "World",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Console.WriteLine() with text in quotes. End each line with semicolon. Add // comments to explain!"
                },
                {
                  "level": 2,
                  "text": "Forgetting semicolons: Every statement needs a semicolon at the end! Without it, you get an error. Console.WriteLine(\"Hi\"); ✓ Console.WriteLine(\"Hi\") ✗"
                },
                {
                  "level": 3,
                  "text": "Missing quotes: Text must be in quotes! Console.WriteLine(Hello) ✗ Console.WriteLine(\"Hello\") ✓"
                },
                {
                  "level": 4,
                  "text": "Case sensitivity: C# cares about CAPITAL vs lowercase! Console.WriteLine ✓ console.writeline ✗ Always match exactly!"
                },
                {
                  "level": 5,
                  "text": "Spelling: WriteLine not Writeline! Computer doesn't autocorrect spelling errors."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting semicolons",
                  "consequence": "Every statement needs a semicolon at the end! Without it, you get an error. Console.WriteLine(\"Hi\"); ✓ Console.WriteLine(\"Hi\") ✗",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Missing quotes",
                  "consequence": "Text must be in quotes! Console.WriteLine(Hello) ✗ Console.WriteLine(\"Hello\") ✓",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Case sensitivity",
                  "consequence": "C# cares about CAPITAL vs lowercase! Console.WriteLine ✓ console.writeline ✗ Always match exactly!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Spelling",
                  "consequence": "WriteLine not Writeline! Computer doesn't autocorrect spelling errors.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-01-02",
          "title": "What is .NET and the CLR?",
          "moduleId": "module-01",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Think of C# as a recipe written in English, but your computer only speaks binary (0s and 1s). How does the computer understand your C# code?\n\nThat's where .NET comes in! .NET is like a translation service:\n\n1. You write C# code (human-readable)\n2. The .NET compiler translates it into an intermediate language\n3. The CLR (Common Language Runtime) – the \"engine\" – runs that code on your computer\n\nThe CLR is like the engine in a car. You don't see it working, but without it, your code won't run. It handles memory, security, and making sure your program doesn't crash the whole computer!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// When you run this code, the CLR is working behind the scenes!\nConsole.WriteLine(\"The CLR is running my code!\");\nConsole.WriteLine(\"It manages memory and keeps things safe.\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Console.WriteLine(\"...\");`**: Each line with Console.WriteLine is a separate instruction. The CLR executes them one at a time, top to bottom.\n\n**`Multiple lines`**: You can have as many instructions as you want! The computer will execute them in order, like reading a recipe step by step."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-01-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Write a program that displays THREE lines of text:\n1. Your name\n2. Your favorite programming language (hint: it should be C#!)\n3. One thing you want to build with code",
              "starterCode": "// Display your name\nConsole.WriteLine(\"Your name here\");\n\n// Display your favorite language\n\n// Display what you want to build",
              "solution": "// Display your name\nConsole.WriteLine(\"Alex\");\n\n// Display your favorite language\nConsole.WriteLine(\"My favorite language is C#\");\n\n// Display what you want to build\nConsole.WriteLine(\"I want to build a video game!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain at least 3 lines",
                  "expectedOutput": "Console.WriteLine",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Program should display text output",
                  "expectedOutput": "WriteLine",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Code should use proper C# syntax",
                  "expectedOutput": ";",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "You'll need THREE Console.WriteLine statements – one for each line! Copy the pattern from the first line."
                },
                {
                  "level": 2,
                  "text": "Forgetting to add Console.WriteLine for each line – you need three separate statements!"
                },
                {
                  "level": 3,
                  "text": "Forgetting the semicolon at the end of EACH line"
                },
                {
                  "level": 4,
                  "text": "Not putting quotes around the text – every piece of text needs quotes!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to add Console.WriteLine for each line – you need three separate statements!",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Forgetting the semicolon at the end of EACH line",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Not putting quotes around the text – every piece of text needs quotes!",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-01-03",
          "title": "Displaying Multiple Lines",
          "moduleId": "module-01",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned that Console.WriteLine displays text. But what if you want to display LOTS of information? You have two options:\n\n1. Use multiple Console.WriteLine statements (you've been doing this!)\n2. Use special characters like \\n (newline) to create line breaks inside one statement\n\nThink of \\n as pressing the 'Enter' key on your keyboard. It tells the computer: \"Start a new line here!\""
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Method 1: Multiple WriteLine statements\nConsole.WriteLine(\"First line\");\nConsole.WriteLine(\"Second line\");\n\n// Method 2: Using \\n for newlines\nConsole.WriteLine(\"First line\\nSecond line\\nThird line\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`\\n`**: The backslash-n creates a newline (line break). It's called an 'escape sequence' – special characters that do something instead of displaying.\n\n**`Multiple WriteLine vs. \\n`**: Both methods work! Multiple WriteLine is clearer for beginners. Using \\n is more compact but harder to read at first.\n\n## Common Escape Sequences\n\n| Sequence | Meaning |\n|----------|--------|\n| `\\n` | Newline (line break) |\n| `\\t` | Tab (horizontal indent) |\n| `\\r` | Carriage return |\n| `\\\\` | Literal backslash |\n| `\\\"` | Literal double quote |\n| `\\'` | Literal single quote |\n| `\\0` | Null character |\n| `\\e` | Escape character (C# 13+) |\n\n**C# 13 Feature**: The `\\e` escape sequence is new in C# 13! It represents the escape character (Unicode 0x1B), commonly used for ANSI terminal colors:\n\n```csharp\n// C# 13: \\e escape sequence for terminal colors\nConsole.WriteLine(\"\\e[32mGreen text\\e[0m\");\nConsole.WriteLine(\"\\e[1;31mBold red\\e[0m\");\n```\n\nNote: ANSI colors may not work in all terminals."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-01-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a mini-biography using Console.WriteLine! Display:\n• A title line: 'About Me'\n• Your name\n• Your age\n• Your favorite hobby\n\nTry using \\n to create blank lines between sections for better readability!",
              "starterCode": "// Your mini-biography\nConsole.WriteLine(\"About Me\");\n// Add more lines here!",
              "solution": "// Your mini-biography\nConsole.WriteLine(\"About Me\\n\");\nConsole.WriteLine(\"Name: Alex\");\nConsole.WriteLine(\"Age: 25\");\nConsole.WriteLine(\"Favorite Hobby: Coding!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"About Me\"",
                  "expectedOutput": "About Me",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember: \\n creates a blank line. Try Console.WriteLine(\"About Me\\n\"); to add space after the title!"
                },
                {
                  "level": 2,
                  "text": "Writing /n instead of \\n – it must be a BACKSLASH (\\), not a forward slash (/)!"
                },
                {
                  "level": 3,
                  "text": "Forgetting quotes around text with \\n – the entire string needs quotes: \"Line1\\nLine2\""
                },
                {
                  "level": 4,
                  "text": "Not seeing the newline work – make sure you're using Console.WriteLine, not Console.Write"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Writing /n instead of \\n – it must be a BACKSLASH (\\), not a forward slash (/)!",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Forgetting quotes around text with \\n – the entire string needs quotes",
                  "consequence": "\"Line1\\nLine2\"",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not seeing the newline work – make sure you're using Console.WriteLine, not Console.Write",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-01-04",
          "title": "Comments: Notes for Humans",
          "moduleId": "module-01",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're leaving notes in a cookbook: \"This recipe is spicy!\" or \"Mom's favorite!\". These notes help YOU, but they don't change the recipe itself.\n\nComments in C# work the same way! They're notes for humans (including your future self) that the computer completely ignores. There are two types:\n\n1. Single-line comments: // Everything after these slashes is ignored\n2. Multi-line comments: /* Everything between these is ignored */\n\nGood programmers use comments to explain WHY they wrote code, not just WHAT the code does. Future you will thank present you!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// This is a single-line comment\nConsole.WriteLine(\"This runs!\"); // Comments can go at the end of a line too!\n\n/* This is a multi-line comment.\n   You can write as much as you want.\n   The computer will ignore ALL of this! */\n\nConsole.WriteLine(\"This also runs!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`// Single-line comment`**: Everything after // on that line is ignored. Quick notes go here!\n\n**`/* Multi-line comment */`**: Everything between /* and */ is ignored, even across multiple lines. Good for long explanations.\n\n**`Why use comments?`**: Comments explain your thinking: \"This loop finds the highest score\" is better than just reading the code!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-01-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Write a program that displays a simple ASCII art (like a smiley face), but ADD COMMENTS explaining each line!\n\nFor example:\n// Top of the face\nConsole.WriteLine(\"  ^   ^  \");\n// The mouth\nConsole.WriteLine(\"   ---   \");",
              "starterCode": "// Create your ASCII art here!\n// Remember to add comments explaining each part!\n\nConsole.WriteLine(\"Add your art here\");",
              "solution": "// Top of the face - the eyes\nConsole.WriteLine(\"  ^   ^  \");\n\n// The nose (simple dot)\nConsole.WriteLine(\"    .    \");\n\n// The mouth (happy smile)\nConsole.WriteLine(\"   ---   \");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Code should include comments",
                  "expectedOutput": "//",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should display ASCII art using Console.WriteLine",
                  "expectedOutput": "Console.WriteLine",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Code should have multiple output statements",
                  "expectedOutput": "WriteLine",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use Console.WriteLine for each line of your art, and add // comments above each line to explain it!"
                },
                {
                  "level": 2,
                  "text": "Forgetting that comments are for HUMANS, not the computer – they don't do anything to your code!"
                },
                {
                  "level": 3,
                  "text": "Using /* to start a comment but forgetting */ to close it – everything after becomes a comment!"
                },
                {
                  "level": 4,
                  "text": "Writing comments that just repeat the code: // Display text is not helpful. // Display welcome message to user is better!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting that comments are for HUMANS, not the computer – they don't do anything to your code!",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Using /* to start a comment but forgetting */ to close it – everything after becomes a comment!",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Writing comments that just repeat the code",
                  "consequence": "// Display text is not helpful. // Display welcome message to user is better!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-01-05",
          "title": "Combining Text (String Concatenation)",
          "moduleId": "module-01",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Sometimes you want to combine pieces of text, like combining 'Hello' and 'World' into 'Hello World'. This is called STRING CONCATENATION (fancy word for 'gluing text together').\n\nIn C#, you can combine text using the + operator:\n\n\"Hello\" + \" \" + \"World\" becomes \"Hello World\"\n\nYou can also mix text and numbers! C# automatically converts numbers to text when you use +.\n\nThink of + as glue – it sticks pieces of text together into one long piece!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Combining text with +\nConsole.WriteLine(\"Hello\" + \" \" + \"World\");\n\n// Mixing text and numbers\nConsole.WriteLine(\"I have \" + 5 + \" apples\");\n\n// You can even do math inside!\nConsole.WriteLine(\"The answer is: \" + (2 + 2));",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`\"Text1\" + \"Text2\"`**: The + operator glues text together. Make sure there's a space between words, or they'll stick together like 'HelloWorld'!\n\n**`\"Text\" + number`**: When you add text and a number, C# converts the number to text first. \"I am \" + 25 becomes \"I am 25\".\n\n**`(2 + 2) in text`**: Parentheses matter! \"Result: \" + 2 + 2 gives \"Result: 22\" (text gluing), but \"Result: \" + (2 + 2) gives \"Result: 4\" (math first)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-01-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a personalized greeting card! Use string concatenation (+) to combine:\n\n1. A greeting: 'Hello' + [a name]\n2. A message: 'You have completed' + [a number] + 'lessons!'\n3. An encouragement: 'Keep going, you are doing' + [an adjective] + '!'\n\nMake it your own!",
              "starterCode": "// Create your greeting card using + to combine text!\n\nConsole.WriteLine(\"Hello \" + \"Student\");\n// Add two more lines with concatenation!",
              "solution": "// Create your greeting card using + to combine text!\n\nConsole.WriteLine(\"Hello \" + \"Alex\" + \"!\");\nConsole.WriteLine(\"You have completed \" + 5 + \" lessons!\");\nConsole.WriteLine(\"Keep going, you are doing \" + \"amazing\" + \"!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Hello\"",
                  "expectedOutput": "Hello",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember to add spaces! \"Hello\"+\"World\" becomes \"HelloWorld\". Use \"Hello \"+\" World\" for proper spacing!"
                },
                {
                  "level": 2,
                  "text": "Forgetting spaces between words: \"Hello\"+\"World\" becomes \"HelloWorld\" instead of \"Hello World\"!"
                },
                {
                  "level": 3,
                  "text": "Mixing up (2+2) vs 2+2 in text: Without parentheses, C# glues text instead of doing math first!"
                },
                {
                  "level": 4,
                  "text": "Forgetting quotes around text: Console.WriteLine(Hello + World); won't work – they need quotes!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting spaces between words",
                  "consequence": "\"Hello\"+\"World\" becomes \"HelloWorld\" instead of \"Hello World\"!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Mixing up (2+2) vs 2+2 in text",
                  "consequence": "Without parentheses, C# glues text instead of doing math first!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting quotes around text",
                  "consequence": "Console.WriteLine(Hello + World); won't work – they need quotes!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-02",
      "title": "Variables and Data Types",
      "description": "Master variables, data types (int, string, bool, double), type conversion, and working with numbers and text.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-02-01",
          "title": "What is a Variable? (The Labeled Box)",
          "moduleId": "module-02",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you have empty boxes in a warehouse, and you need to store things in them. Each box gets a LABEL (like 'Books' or 'Toys') so you know what's inside.\n\nVariables are exactly like labeled boxes! They're containers that store information in your program:\n\n• The LABEL is the variable name (like 'playerScore' or 'userName')\n• The CONTENTS are the value stored inside (like 100 or 'Alex')\n• You can look inside the box anytime by using its label\n• You can replace what's inside by putting new stuff in!\n\nIn C#, before you can use a box, you must tell the computer: \"I need a box for storing text\" or \"I need a box for storing numbers.\" This is called DECLARING a variable."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Create a variable (declare it)\nstring playerName;\n\n// Put something in the box (assign a value)\nplayerName = \"Alex\";\n\n// Look at what's in the box (use it)\nConsole.WriteLine(\"Player name: \" + playerName);\n\n// Put something new in the box (reassign)\nplayerName = \"Jordan\";\nConsole.WriteLine(\"New player: \" + playerName);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`string playerName;`**: 'string' means this box holds TEXT. 'playerName' is the label on the box. The semicolon ends the statement.\n\n**`playerName = \"Alex\";`**: The = sign means 'put this value INTO the box'. We're storing the text 'Alex' in our playerName box.\n\n**`Console.WriteLine(playerName);`**: No quotes around playerName! That tells C# to look INSIDE the box and get the value, not just display the word 'playerName'."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a program that:\n1. Declares a variable called 'favoriteGame'\n2. Stores YOUR favorite game in it\n3. Displays a message like: 'My favorite game is [your game]'\n4. Changes the variable to a different game\n5. Displays the new game",
              "starterCode": "// Declare your variable\nstring favoriteGame;\n\n// Store your favorite game\n\n// Display it\n\n// Change it to a different game\n\n// Display the new one",
              "solution": "// Declare your variable\nstring favoriteGame;\n\n// Store your favorite game\nfavoriteGame = \"Minecraft\";\n\n// Display it\nConsole.WriteLine(\"My favorite game is \" + favoriteGame);\n\n// Change it to a different game\nfavoriteGame = \"Fortnite\";\n\n// Display the new one\nConsole.WriteLine(\"My new favorite is \" + favoriteGame);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"favorite\"",
                  "expectedOutput": "favorite",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember: string variableName; creates the box. variableName = \"value\"; puts something in it. Use the variable name WITHOUT quotes in Console.WriteLine!"
                },
                {
                  "level": 2,
                  "text": "Putting quotes around the variable name when using it: Console.WriteLine(\"favoriteGame\") displays the word 'favoriteGame', not the value!"
                },
                {
                  "level": 3,
                  "text": "Forgetting to declare the variable first: You must write 'string favoriteGame;' before you can use it!"
                },
                {
                  "level": 4,
                  "text": "Misspelling the variable name: 'favoriteGame' and 'favoritegame' are different! C# is case-sensitive!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Putting quotes around the variable name when using it",
                  "consequence": "Console.WriteLine(\"favoriteGame\") displays the word 'favoriteGame', not the value!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to declare the variable first",
                  "consequence": "You must write 'string favoriteGame;' before you can use it!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Misspelling the variable name",
                  "consequence": "'favoriteGame' and 'favoritegame' are different! C# is case-sensitive!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-02-02",
          "title": "Number Variables (int and double)",
          "moduleId": "module-02",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned about 'string' variables (boxes for text). Now let's learn about boxes for NUMBERS!\n\nIn C#, there are different types of number boxes:\n\n• int (integer): A box for WHOLE NUMBERS only (like 5, 100, -42). No decimals allowed!\n• double: A box for DECIMAL NUMBERS (like 3.14, 99.99, -0.5). Can also hold whole numbers, but takes more space.\n\nWhy have different boxes? Efficiency! If you only need whole numbers (like counting players in a game), use 'int'. If you need decimals (like storing money or measurements), use 'double'.\n\nThink of it like this: You wouldn't use a giant shipping container to store a pencil! Use the right box for the job."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Integer (whole numbers only)\nint playerScore = 1500;\nint lives = 3;\n\n// Double (decimal numbers)\ndouble price = 19.99;\ndouble temperature = -5.5;\n\n// Display them\nConsole.WriteLine(\"Score: \" + playerScore);\nConsole.WriteLine(\"Price: $\" + price);\n\n// You can do math with them!\nint totalScore = playerScore + 500;\nConsole.WriteLine(\"New score: \" + totalScore);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`int playerScore = 1500;`**: This creates an integer box AND puts 1500 in it immediately. This is called 'declaration with initialization' – doing both steps at once!\n\n**`double price = 19.99;`**: Decimals use a PERIOD (.), not a comma! In C#, 19.99 is correct, 19,99 is wrong.\n\n**`int totalScore = playerScore + 500;`**: You can do math with variables! This takes the value from playerScore, adds 500, and stores the result in totalScore."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple shopping cart calculator:\n1. Create an 'int' variable for quantity (number of items)\n2. Create a 'double' variable for price per item\n3. Calculate the total cost (quantity × price) and store it in a new 'double' variable\n4. Display all three values with labels",
              "starterCode": "// Declare your variables\nint quantity = 5;\n\n// Declare price per item\n\n// Calculate total (quantity * price)\n\n// Display all values",
              "solution": "// Declare your variables\nint quantity = 5;\n\n// Declare price per item\ndouble pricePerItem = 9.99;\n\n// Calculate total (quantity * price)\ndouble totalCost = quantity * pricePerItem;\n\n// Display all values\nConsole.WriteLine(\"Quantity: \" + quantity);\nConsole.WriteLine(\"Price per item: $\" + pricePerItem);\nConsole.WriteLine(\"Total cost: $\" + totalCost);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Quantity\"",
                  "expectedOutput": "Quantity",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Price\"",
                  "expectedOutput": "Price",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Total\"",
                  "expectedOutput": "Total",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use the * operator for multiplication! quantity * pricePerItem will calculate the total. Store it in a double variable since it might have decimals."
                },
                {
                  "level": 2,
                  "text": "Using a comma for decimals: double price = 19,99; is WRONG! Use a period: 19.99"
                },
                {
                  "level": 3,
                  "text": "Trying to store decimals in an int: int price = 19.99; will cause an error! Use double for decimals."
                },
                {
                  "level": 4,
                  "text": "Forgetting quotes in Console.WriteLine labels: Console.WriteLine(Total: + total) is wrong. Use \"Total: \" with quotes!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using a comma for decimals",
                  "consequence": "double price = 19,99; is WRONG! Use a period: 19.99",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Trying to store decimals in an int",
                  "consequence": "int price = 19.99; will cause an error! Use double for decimals.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting quotes in Console.WriteLine labels",
                  "consequence": "Console.WriteLine(Total: + total) is wrong. Use \"Total: \" with quotes!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-02-03",
          "title": "Boolean Variables (true or false)",
          "moduleId": "module-02",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Sometimes you need to store a YES or NO answer. Is the player alive? Is the door locked? Is the game over?\n\nThat's where BOOLEAN variables come in! A boolean (named after mathematician George Boole) can only hold two values:\n\n• true (yes, on, correct)\n• false (no, off, incorrect)\n\nThink of a boolean like a light switch – it's either ON or OFF, nothing in between!\n\nIn C#, we use the 'bool' type for these. Booleans are INCREDIBLY powerful for making decisions in programs (you'll see this soon when we learn 'if statements')."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Boolean variables\nbool isPlayerAlive = true;\nbool hasKey = false;\nbool isRaining = true;\n\n// Display them\nConsole.WriteLine(\"Player alive: \" + isPlayerAlive);\nConsole.WriteLine(\"Has key: \" + hasKey);\n\n// You can change them!\nisPlayerAlive = false;\nConsole.WriteLine(\"Player alive now: \" + isPlayerAlive);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`bool isPlayerAlive = true;`**: 'bool' is the type for true/false values. Notice: NO QUOTES around true! true and false are special keywords in C#.\n\n**`true and false`**: These are NOT strings! Don't write \"true\" – just write true. They're built-in values that C# understands.\n\n**`Variable naming`**: Boolean variables often start with 'is', 'has', or 'can' (like isReady, hasPermission, canJump) because they answer yes/no questions."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a character status display! Make variables for:\n1. isHungry (boolean) - set to true\n2. isTired (boolean) - set to false\n3. energy (int) - set to 75\n4. name (string) - set to any name\n\nDisplay all of them in a formatted status report!",
              "starterCode": "// Create your character status variables\nbool isHungry = true;\n\n// Add the other variables here\n\n// Display status report",
              "solution": "// Create your character status variables\nbool isHungry = true;\nbool isTired = false;\nint energy = 75;\nstring name = \"Hero\";\n\n// Display status report\nConsole.WriteLine(\"=== Character Status ===\");\nConsole.WriteLine(\"Name: \" + name);\nConsole.WriteLine(\"Energy: \" + energy);\nConsole.WriteLine(\"Hungry: \" + isHungry);\nConsole.WriteLine(\"Tired: \" + isTired);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Status\"",
                  "expectedOutput": "Status",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"true\"",
                  "expectedOutput": "true",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"false\"",
                  "expectedOutput": "false",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember: true and false have NO QUOTES! Write bool isHungry = true; not bool isHungry = \"true\";"
                },
                {
                  "level": 2,
                  "text": "Putting quotes around true/false: bool isReady = \"true\"; is WRONG! Use bool isReady = true; (no quotes!)"
                },
                {
                  "level": 3,
                  "text": "Capitalizing true/false: C# is case-sensitive! Use true, not True or TRUE."
                },
                {
                  "level": 4,
                  "text": "Trying to assign other values: bool can ONLY hold true or false, nothing else!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Putting quotes around true/false",
                  "consequence": "bool isReady = \"true\"; is WRONG! Use bool isReady = true; (no quotes!)",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Capitalizing true/false",
                  "consequence": "C# is case-sensitive! Use true, not True or TRUE.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Trying to assign other values",
                  "consequence": "bool can ONLY hold true or false, nothing else!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-02-04",
          "title": "Basic Math Operations",
          "moduleId": "module-02",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "C# is like a super-powered calculator! You can do math with variables using familiar operators:\n\n• + (addition): 5 + 3 = 8\n• - (subtraction): 10 - 4 = 6\n• * (multiplication): 6 * 7 = 42 (we use * because × isn't on keyboards!)\n• / (division): 20 / 4 = 5\n• % (modulus - remainder): 10 % 3 = 1 (10 divided by 3 is 3 remainder 1)\n\nThe modulus (%) might seem weird, but it's super useful! Want to know if a number is even? If number % 2 equals 0, it's even!\n\nC# follows the same order of operations you learned in school: PEMDAS (Parentheses, Exponents, Multiplication/Division, Addition/Subtraction)."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Basic math operations\nint a = 10;\nint b = 3;\n\nint sum = a + b;        // 13\nint difference = a - b; // 7\nint product = a * b;    // 30\nint quotient = a / b;   // 3 (integer division!)\nint remainder = a % b;  // 1 (10 ÷ 3 = 3 remainder 1)\n\nConsole.WriteLine(\"Sum: \" + sum);\nConsole.WriteLine(\"Remainder: \" + remainder);\n\n// Order of operations matters!\nint result1 = 5 + 3 * 2;     // 11 (multiplication first)\nint result2 = (5 + 3) * 2;   // 16 (parentheses first)\nConsole.WriteLine(result1 + \" vs \" + result2);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`int quotient = a / b;`**: WATCH OUT! When dividing two integers, C# gives you an INTEGER result. 10/3 = 3 (not 3.333...). The decimal part is thrown away!\n\n**`int remainder = a % b;`**: The % operator gives you the REMAINDER after division. 10 % 3 = 1 because 10 ÷ 3 = 3 with 1 left over.\n\n**`Parentheses`**: Use ( ) to control order! 5 + 3 * 2 = 11, but (5 + 3) * 2 = 16. Parentheses are calculated first!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a program that calculates the area and perimeter of a rectangle!\n\n1. Create 'int' variables for length (8) and width (5)\n2. Calculate area (length × width)\n3. Calculate perimeter (2 × length + 2 × width)\n4. Display both results with labels\n\nBonus: Try using parentheses to make your perimeter calculation clearer!",
              "starterCode": "// Rectangle dimensions\nint length = 8;\nint width = 5;\n\n// Calculate area\n\n// Calculate perimeter\n\n// Display results",
              "solution": "// Rectangle dimensions\nint length = 8;\nint width = 5;\n\n// Calculate area (length times width)\nint area = length * width;\n\n// Calculate perimeter (2 times length plus 2 times width)\nint perimeter = 2 * length + 2 * width;\n// Or with parentheses: int perimeter = 2 * (length + width);\n\n// Display results\nConsole.WriteLine(\"Area: \" + area);\nConsole.WriteLine(\"Perimeter: \" + perimeter);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Area\"",
                  "expectedOutput": "Area",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Perimeter\"",
                  "expectedOutput": "Perimeter",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Area = length × width. Perimeter = 2×length + 2×width (or 2×(length+width) with parentheses!). Use the * operator for multiplication!"
                },
                {
                  "level": 2,
                  "text": "Using 'x' or '×' for multiplication: In C#, you MUST use the asterisk (*). 5 * 3, not 5 x 3!"
                },
                {
                  "level": 3,
                  "text": "Integer division surprise: 7 / 2 gives you 3, not 3.5! The decimal part disappears with int division."
                },
                {
                  "level": 4,
                  "text": "Forgetting order of operations: 2 * length + 2 * width works, but 2 * (length + width) is clearer!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using 'x' or '×' for multiplication",
                  "consequence": "In C#, you MUST use the asterisk (*). 5 * 3, not 5 x 3!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Integer division surprise",
                  "consequence": "7 / 2 gives you 3, not 3.5! The decimal part disappears with int division.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting order of operations",
                  "consequence": "2 * length + 2 * width works, but 2 * (length + width) is clearer!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-02-05",
          "title": "Compound Assignment (Shortcuts!)",
          "moduleId": "module-02",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're playing a game and you gain 10 points. You'd write:\n\nscore = score + 10;\n\nThis takes your current score, adds 10, and stores the new value back in score. But C# has a SHORTCUT:\n\nscore += 10;\n\nThe += operator means 'add this to the variable'. It's shorter and clearer!\n\nC# has shortcuts for all math operations:\n• += (add and assign): score += 5 → score = score + 5\n• -= (subtract and assign): lives -= 1 → lives = lives - 1\n• *= (multiply and assign): damage *= 2 → damage = damage * 2\n• /= (divide and assign): speed /= 2 → speed = speed / 2\n\nThere are also special shortcuts for adding/subtracting 1:\n• ++ (increment by 1): score++ → score = score + 1\n• -- (decrement by 1): lives-- → lives = lives - 1\n\nReal programmers use these shortcuts ALL THE TIME!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Start with a score\nint score = 100;\nConsole.WriteLine(\"Starting score: \" + score);\n\n// Add 50 points (the long way)\nscore = score + 50;\nConsole.WriteLine(\"After earning 50: \" + score);\n\n// Add 25 points (the shortcut way!)\nscore += 25;\nConsole.WriteLine(\"After earning 25 more: \" + score);\n\n// Multiply score by 2 (bonus!)\nscore *= 2;\nConsole.WriteLine(\"After 2x bonus: \" + score);\n\n// Lives example\nint lives = 3;\nlives--;  // Lost a life!\nConsole.WriteLine(\"Lives remaining: \" + lives);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`score += 50;`**: This is shorthand for 'score = score + 50'. It takes the current value, adds 50, and stores the result back.\n\n**`score *= 2;`**: This DOUBLES the score! It's the same as 'score = score * 2'. Great for bonus multipliers in games!\n\n**`lives--;`**: The -- operator subtracts 1. lives-- is the same as lives = lives - 1 or lives -= 1. Super common in game programming!\n\n**`When to use shortcuts?`**: Shortcuts are clearer when modifying a variable based on its current value. score += 10 clearly means 'gain 10 points'!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a game level-up simulator!\n\n1. Start with: level = 1, experience = 0, coins = 100\n2. Gain 50 experience (use +=)\n3. Level up by 1 (use ++)\n4. Double your coins (use *=)\n5. Spend 25 coins (use -=)\n6. Display level, experience, and coins after each change!",
              "starterCode": "// Starting stats\nint level = 1;\nint experience = 0;\nint coins = 100;\n\nConsole.WriteLine(\"Starting - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);\n\n// Gain 50 experience\n\n// Level up\n\n// Double coins\n\n// Spend 25 coins\n\n// Display final stats",
              "solution": "// Starting stats\nint level = 1;\nint experience = 0;\nint coins = 100;\n\nConsole.WriteLine(\"Starting - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);\n\n// Gain 50 experience\nexperience += 50;\nConsole.WriteLine(\"Gained XP! - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);\n\n// Level up\nlevel++;\nConsole.WriteLine(\"Level up! - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);\n\n// Double coins\ncoins *= 2;\nConsole.WriteLine(\"Coins doubled! - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);\n\n// Spend 25 coins\ncoins -= 25;\nConsole.WriteLine(\"Spent coins - Level: \" + level + \", XP: \" + experience + \", Coins: \" + coins);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Level\"",
                  "expectedOutput": "Level",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"XP\"",
                  "expectedOutput": "XP",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Coins\"",
                  "expectedOutput": "Coins",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use +=, -=, *=, and ++ operators! experience += 50 adds to experience, level++ increases by 1, coins *= 2 doubles coins, coins -= 25 subtracts!"
                },
                {
                  "level": 2,
                  "text": "Forgetting that score++ changes the variable permanently! It's not temporary – score is now 1 higher."
                },
                {
                  "level": 3,
                  "text": "Trying to use ++ with non-numeric types: name++ doesn't make sense! You can only increment numbers."
                },
                {
                  "level": 4,
                  "text": "Confusing score += 5 with score = 5: The first ADDS 5, the second REPLACES with 5!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting that score++ changes the variable permanently! It's not temporary – score is now 1 higher.",
                  "consequence": "This is a common error that can cause problems.",
                  "correction": "Review the lesson content and examples carefully."
                },
                {
                  "mistake": "Trying to use ++ with non-numeric types",
                  "consequence": "name++ doesn't make sense! You can only increment numbers.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Confusing score += 5 with score = 5",
                  "consequence": "The first ADDS 5, the second REPLACES with 5!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-02-06",
          "title": "Nullable Reference Types",
          "moduleId": "module-02",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a hotel front desk. In the old days, when you asked for 'the guest in room 101', they might say 'nobody's there' and you'd get confused. Now they have a system: if a room MIGHT be empty, it has a special tag.\n\nThat's NULLABLE REFERENCE TYPES! In modern C#, variables tell you upfront whether they might be 'null' (empty/nothing).\n\n- string name = 'Alice';  // PROMISE: This will NEVER be null!\n- string? nickname = null;  // MIGHT be null - the ? warns you!\n\nWhy does this matter? NullReferenceException is the #1 bug in C# programs! With nullable types:\n- Compiler WARNS you when you might hit a null\n- You're FORCED to check for null before using potentially null values\n- Fewer runtime crashes, more reliable code!\n\nThink of it as a 'Handle With Care' sticker on fragile packages - you know to be extra careful."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Non-nullable - MUST have a value!\nstring firstName = \"Alice\";  // OK\nstring lastName = null;       // WARNING! Can't be null!\n\n// Nullable - CAN be null (use ? after type)\nstring? middleName = null;    // OK - ? means nullable\nstring? nickname = \"Ali\";     // Also OK - can have value\n\n// Compiler warns when you use nullable without checking\nstring? maybeName = GetNameFromDatabase();\nConsole.WriteLine(maybeName.Length);  // WARNING! might be null!\n\n// Safe ways to handle nullable:\n\n// 1. Null check with if\nif (maybeName != null)\n{\n    Console.WriteLine(maybeName.Length);  // Safe now!\n}\n\n// 2. Null-conditional operator ?.\nConsole.WriteLine(maybeName?.Length);  // Returns null if maybeName is null\n\n// 3. Null-coalescing operator ??\nstring displayName = maybeName ?? \"Unknown\";  // Use \"Unknown\" if null\n\n// 4. Null-forgiving operator ! (use carefully!)\nstring definitelyName = maybeName!;  // Trust me, it's not null!\n// WARNING: This can still crash if you're wrong!\n\n// Pattern matching (modern approach)\nif (maybeName is string actualName)\n{\n    Console.WriteLine($\"Name is: {actualName}\");\n}\nelse\n{\n    Console.WriteLine(\"No name provided\");\n}\n\n// Method returning nullable\nstring? FindUser(int id)\n{\n    if (id == 1) return \"Admin\";\n    return null;  // User not found\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`string name`**: Non-nullable reference type. Compiler expects this to NEVER be null. You'll get warnings if you try to assign null.\n\n**`string? name`**: Nullable reference type. The ? says 'this might be null'. Compiler will warn you to check before using it.\n\n**`name?.Length`**: Null-conditional operator. If name is null, returns null instead of crashing. Safe way to access members!\n\n**`name ?? \"default\"`**: Null-coalescing operator. If name is null, use the value after ??. Great for providing fallback values.\n\n**`name!`**: Null-forgiving operator. Tells compiler 'I know this looks nullable, but trust me, it's not null'. Use sparingly - it bypasses safety checks!\n\n**`#nullable enable`**: Put at top of file to enable nullable reference types. In .NET 6+, it's enabled by default in new projects."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-02-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a user profile system with nullable handling!\n\n1. Create a non-nullable string 'username' (required)\n2. Create a nullable string 'bio' (optional)\n3. Create a nullable string 'website' (optional)\n4. Display username (always safe)\n5. Display bio using ?? to show 'No bio provided' if null\n6. Display website using ?. and ?? to safely get Length or show 'No website'",
              "starterCode": "// Required field (non-nullable)\nstring username = \"CSharpDev2024\";\n\n// Optional fields (nullable)\nstring? bio = null;\nstring? website = \"https://example.com\";\n\n// Display username (always safe)\n\n// Display bio with fallback\n\n// Display website length safely",
              "solution": "// Required field (non-nullable)\nstring username = \"CSharpDev2024\";\n\n// Optional fields (nullable)\nstring? bio = null;\nstring? website = \"https://example.com\";\n\n// Display username (always safe)\nConsole.WriteLine(\"Username: \" + username);\n\n// Display bio with fallback\nstring displayBio = bio ?? \"No bio provided\";\nConsole.WriteLine(\"Bio: \" + displayBio);\n\n// Display website length safely\nint? websiteLength = website?.Length;\nConsole.WriteLine(\"Website length: \" + (websiteLength?.ToString() ?? \"No website\"));\n\n// Alternative: Check with if\nif (website != null)\n{\n    Console.WriteLine(\"Website: \" + website);\n}\nelse\n{\n    Console.WriteLine(\"No website configured\");\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain 'Username'",
                  "expectedOutput": "Username",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain 'Bio'",
                  "expectedOutput": "Bio",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain 'No bio provided' or similar",
                  "expectedOutput": "No bio",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use ?? to provide fallback values: bio ?? 'No bio'. Use ?. for safe member access: website?.Length."
                },
                {
                  "level": 2,
                  "text": "Remember: string is non-nullable (must have value), string? is nullable (can be null). The ? makes the difference!"
                },
                {
                  "level": 3,
                  "text": "You can chain operators: website?.Length ?? 0 - gets length if website exists, otherwise 0."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Ignoring nullable warnings",
                  "consequence": "Compiler warnings about possible null references help prevent NullReferenceException at runtime. Don't suppress them without good reason!",
                  "correction": "Always handle nullable values with ?., ??, if-checks, or pattern matching."
                },
                {
                  "mistake": "Overusing the ! operator",
                  "consequence": "The null-forgiving operator (!) bypasses safety checks. If you're wrong, you'll get a NullReferenceException anyway!",
                  "correction": "Only use ! when you KNOW for certain a value isn't null and the compiler just can't prove it."
                },
                {
                  "mistake": "Forgetting ? on nullable types",
                  "consequence": "Without ?, the compiler assumes the variable should never be null. You'll get warnings if you assign null to it.",
                  "correction": "Add ? to types that might legitimately be null: string? optionalName = null;"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-03",
      "title": "Control Flow",
      "description": "Learn decision-making with if/else statements, switch cases, logical operators, and conditional logic.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-03-01",
          "title": "The if Statement (Your First Fork)",
          "moduleId": "module-03",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're walking down a path and you reach a fork in the road. There's a sign that says: 'If it's raining, take the left path (you have an umbrella there). Otherwise, keep going straight.'\n\nThat's EXACTLY what an 'if statement' does in programming! It checks a condition (Is it raining?) and makes a decision:\n\n• If the condition is TRUE → Do this code\n• If the condition is FALSE → Skip that code\n\nIn C#, we use 'if' to make our programs smart. Instead of always doing the same thing, the program can DECIDE what to do based on the situation.\n\nThink of it like a bouncer at a club: 'If you're 21 or older, you can enter. If not, you can't.' The bouncer checks your age (the condition) and makes a decision!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Simple if statement\nint age = 25;\n\nif (age >= 21)\n{\n    Console.WriteLine(\"You can enter!\");\n}\n\nConsole.WriteLine(\"Program continues...\");\n\n// Another example with boolean\nbool hasKey = true;\n\nif (hasKey)\n{\n    Console.WriteLine(\"Door unlocked!\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`if (condition)`**: The 'if' keyword starts the decision. The condition in parentheses MUST evaluate to true or false (a boolean).\n\n**`{ }`**: Curly braces contain the code that runs ONLY if the condition is true. If false, everything in the braces is skipped!\n\n**`age >= 21`**: This is a comparison that produces true or false. >= means 'greater than or equal to'. If age is 21 or more, it's true!\n\n**`Code after if`**: Code outside the if block ALWAYS runs, whether the condition was true or false. The program continues normally."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-03-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple age verification system:\n\n1. Create an int variable called 'playerAge' and set it to any number\n2. Use an if statement to check if playerAge is >= 13\n3. If true, display: 'Welcome to the game!'\n4. After the if statement, always display: 'Thank you for visiting'\n\nTry changing playerAge to different values and see what happens!",
              "starterCode": "// Create your age variable\nint playerAge = 15;\n\n// Write your if statement here\n\n// This should always display\nConsole.WriteLine(\"Thank you for visiting\");",
              "solution": "// Create your age variable\nint playerAge = 15;\n\n// Write your if statement here\nif (playerAge >= 13)\n{\n    Console.WriteLine(\"Welcome to the game!\");\n}\n\n// This should always display\nConsole.WriteLine(\"Thank you for visiting\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Thank you for visiting\"",
                  "expectedOutput": "Thank you for visiting",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Remember: if (condition) { code to run if true }. The condition should be playerAge >= 13. Don't forget the curly braces!"
                },
                {
                  "level": 2,
                  "text": "Forgetting parentheses around the condition: if age >= 13 is WRONG! Must be if (age >= 13)"
                },
                {
                  "level": 3,
                  "text": "Forgetting curly braces: While you CAN skip them for one line, it's bad practice. Always use { }!"
                },
                {
                  "level": 4,
                  "text": "Using = instead of ==: if (age = 13) ASSIGNS 13 to age! Use == to COMPARE: if (age == 13)"
                },
                {
                  "level": 5,
                  "text": "Putting a semicolon after the if: if (age >= 13); is WRONG! No semicolon before the { }"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting parentheses around the condition",
                  "consequence": "if age >= 13 is WRONG! Must be if (age >= 13)",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting curly braces",
                  "consequence": "While you CAN skip them for one line, it's bad practice. Always use { }!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using = instead of ==",
                  "consequence": "if (age = 13) ASSIGNS 13 to age! Use == to COMPARE: if (age == 13)",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Putting a semicolon after the if",
                  "consequence": "if (age >= 13); is WRONG! No semicolon before the { }",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-03-02",
          "title": "else and else if (Multiple Paths)",
          "moduleId": "module-03",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned about 'if' - taking ONE path if a condition is true. But what if you want to do something DIFFERENT when the condition is false?\n\nThat's where 'else' comes in! Think of it like this:\n\n'If it's sunny, wear sunglasses. ELSE (otherwise), wear a hat.'\n\nYou're guaranteed to do ONE of these two things - either the first or the second, never both!\n\nBut what if you have MORE than two options? That's where 'else if' helps:\n\n'If it's sunny, wear sunglasses. ELSE IF it's raining, take an umbrella. ELSE (for anything else), wear a hat.'\n\nC# checks each condition in order, top to bottom, and executes the FIRST one that's true. Once it finds a match, it STOPS checking the rest!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "int temperature = 75;\n\n// if-else: Two paths\nif (temperature > 80)\n{\n    Console.WriteLine(\"It's hot! Stay hydrated.\");\n}\nelse\n{\n    Console.WriteLine(\"Nice weather!\");\n}\n\n// if-else if-else: Multiple paths\nint score = 85;\n\nif (score >= 90)\n{\n    Console.WriteLine(\"Grade: A\");\n}\nelse if (score >= 80)\n{\n    Console.WriteLine(\"Grade: B\");\n}\nelse if (score >= 70)\n{\n    Console.WriteLine(\"Grade: C\");\n}\nelse\n{\n    Console.WriteLine(\"Grade: F\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`else { }`**: The 'else' block runs ONLY if the 'if' condition was false. Think of it as the 'otherwise' path. It's optional!\n\n**`else if (condition) { }`**: 'else if' adds MORE conditions to check. It only runs if all previous conditions were false AND this condition is true.\n\n**`Order matters!`**: C# checks from top to bottom. Once a condition is true, it runs that block and SKIPS the rest. score=85 hits the 'B' grade and never checks 'C'!\n\n**`Final else`**: The final 'else' is the 'catch-all' - it runs if NONE of the conditions above were true. It's like the 'default' option."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-03-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple game difficulty selector!\n\n1. Create an int variable 'level' and set it to any number\n2. Use if-else if-else to display messages:\n   - If level == 1: 'Easy mode selected'\n   - Else if level == 2: 'Normal mode selected'\n   - Else if level == 3: 'Hard mode selected'\n   - Else: 'Invalid level! Defaulting to Normal.'\n\nTry changing the level value to test all paths!",
              "starterCode": "// Create level variable\nint level = 2;\n\n// Write your if-else if-else chain here",
              "solution": "// Create level variable\nint level = 2;\n\n// Write your if-else if-else chain here\nif (level == 1)\n{\n    Console.WriteLine(\"Easy mode selected\");\n}\nelse if (level == 2)\n{\n    Console.WriteLine(\"Normal mode selected\");\n}\nelse if (level == 3)\n{\n    Console.WriteLine(\"Hard mode selected\");\n}\nelse\n{\n    Console.WriteLine(\"Invalid level! Defaulting to Normal.\");\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"mode\"",
                  "expectedOutput": "mode",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use == to compare (not =). Chain them: if (...) { } else if (...) { } else if (...) { } else { }"
                },
                {
                  "level": 2,
                  "text": "Using = instead of == for comparison: level = 1 ASSIGNS 1, level == 1 COMPARES!"
                },
                {
                  "level": 3,
                  "text": "Forgetting that only ONE block runs: If score is 95, only the 'A' grade displays. The others are skipped!"
                },
                {
                  "level": 4,
                  "text": "Putting else if AFTER else: The final else must be LAST! else if after else causes an error."
                },
                {
                  "level": 5,
                  "text": "Wrong order of conditions: If you check score >= 70 BEFORE score >= 90, a score of 95 will hit 'C' first and stop!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using = instead of == for comparison",
                  "consequence": "level = 1 ASSIGNS 1, level == 1 COMPARES!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting that only ONE block runs",
                  "consequence": "If score is 95, only the 'A' grade displays. The others are skipped!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Putting else if AFTER else",
                  "consequence": "The final else must be LAST! else if after else causes an error.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong order of conditions",
                  "consequence": "If you check score >= 70 BEFORE score >= 90, a score of 95 will hit 'C' first and stop!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-03-03",
          "title": "Comparison & Logical Operators",
          "moduleId": "module-03",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've been using comparisons like >= and ==, but there's a whole toolkit available! These are called COMPARISON OPERATORS, and they let you ask questions about values:\n\n• == (equals): Is this EXACTLY the same?\n• != (not equals): Is this DIFFERENT?\n• > (greater than): Is this BIGGER?\n• < (less than): Is this SMALLER?\n• >= (greater or equal): Is this bigger OR the same?\n• <= (less or equal): Is this smaller OR the same?\n\nBut what if you need to check MULTIPLE conditions? Like: 'If it's Saturday AND I have money, I'll go to the movies.'\n\nThat's where LOGICAL OPERATORS come in:\n• && (AND): BOTH conditions must be true\n• || (OR): AT LEAST ONE condition must be true\n• ! (NOT): Flips true to false, false to true\n\nThink of && like a bouncer checking TWO IDs: 'You need to be 21 AND have a ticket.' You need BOTH!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Comparison operators\nint score = 85;\n\nif (score == 100) { Console.WriteLine(\"Perfect!\"); }\nif (score != 100) { Console.WriteLine(\"Not perfect, but good!\"); }\nif (score > 80) { Console.WriteLine(\"Above 80!\"); }\nif (score >= 85) { Console.WriteLine(\"85 or higher!\"); }\n\n// Logical operators - AND (&&)\nint age = 25;\nbool hasLicense = true;\n\nif (age >= 16 && hasLicense)\n{\n    Console.WriteLine(\"You can drive!\");\n}\n\n// Logical operators - OR (||)\nbool isWeekend = true;\nbool isHoliday = false;\n\nif (isWeekend || isHoliday)\n{\n    Console.WriteLine(\"No work today!\");\n}\n\n// NOT operator (!)\nbool isRaining = false;\n\nif (!isRaining)\n{\n    Console.WriteLine(\"Let's go outside!\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`==`**: Double equals checks EQUALITY. Don't confuse with = (assignment)! age == 18 checks if age is 18. age = 18 SETS age to 18!\n\n**`!=`**: Not equals checks INEQUALITY. score != 100 is true if score is anything OTHER than 100.\n\n**`&&`**: AND requires BOTH sides to be true. age >= 21 && hasID is only true if BOTH conditions are true. If either is false, the whole thing is false!\n\n**`||`**: OR requires AT LEAST ONE side to be true. isWeekend || isHoliday is true if EITHER (or both!) is true. Only false if BOTH are false.\n\n**`!`**: NOT flips the value. !isRaining means 'if it is NOT raining'. If isRaining is false, !isRaining is true!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-03-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a movie theater admission system!\n\nVariables:\n- int age (set to any number)\n- bool hasParent (set to true or false)\n- bool hasTicket (set to true or false)\n\nRules using if statements:\n1. If age >= 18 AND hasTicket: 'Welcome! Enjoy the movie.'\n2. Else if age < 18 AND hasParent AND hasTicket: 'Welcome with your parent!'\n3. Else if !hasTicket: 'Please purchase a ticket first.'\n4. Else: 'Sorry, you need a parent to attend.'\n\nTest with different combinations!",
              "starterCode": "// Set up variables\nint age = 16;\nbool hasParent = true;\nbool hasTicket = true;\n\n// Write your if-else chain with logical operators",
              "solution": "// Set up variables\nint age = 16;\nbool hasParent = true;\nbool hasTicket = true;\n\n// Write your if-else chain with logical operators\nif (age >= 18 && hasTicket)\n{\n    Console.WriteLine(\"Welcome! Enjoy the movie.\");\n}\nelse if (age < 18 && hasParent && hasTicket)\n{\n    Console.WriteLine(\"Welcome with your parent!\");\n}\nelse if (!hasTicket)\n{\n    Console.WriteLine(\"Please purchase a ticket first.\");\n}\nelse\n{\n    Console.WriteLine(\"Sorry, you need a parent to attend.\");\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should show correct message for minor with parent and ticket",
                  "expectedOutput": "Welcome with your parent!",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Code should use logical AND operator",
                  "expectedOutput": "&&",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Code should use the NOT operator for ticket check",
                  "expectedOutput": "!hasTicket",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use && to combine conditions: (age >= 18 && hasTicket). Use ! to check 'not': !hasTicket means 'does NOT have ticket'."
                },
                {
                  "level": 2,
                  "text": "Using & or | instead of && or ||: In C#, use DOUBLE symbols for logical operators! & and | are bitwise operators (advanced topic)."
                },
                {
                  "level": 3,
                  "text": "Confusing = with ==: if (age = 18) ASSIGNS 18! Use if (age == 18) to COMPARE!"
                },
                {
                  "level": 4,
                  "text": "Wrong operator precedence: age > 18 && hasTicket || isVIP is confusing! Use parentheses: (age > 18 && hasTicket) || isVIP"
                },
                {
                  "level": 5,
                  "text": "Forgetting ! means 'not': !hasTicket is true when hasTicket is FALSE. It reads as 'if does NOT have ticket'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using & or | instead of && or ||",
                  "consequence": "In C#, use DOUBLE symbols for logical operators! & and | are bitwise operators (advanced topic).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Confusing = with ==",
                  "consequence": "if (age = 18) ASSIGNS 18! Use if (age == 18) to COMPARE!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong operator precedence",
                  "consequence": "age > 18 && hasTicket || isVIP is confusing! Use parentheses: (age > 18 && hasTicket) || isVIP",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting ! means 'not'",
                  "consequence": "!hasTicket is true when hasTicket is FALSE. It reads as 'if does NOT have ticket'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-03-04",
          "title": "The switch Statement (The Traffic Director)",
          "moduleId": "module-03",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a traffic director at a busy intersection directing cars: 'If you're going to New York, take route 1. If you're going to Boston, take route 2. If you're going to DC, take route 3...'\n\nThat's what a SWITCH statement does! When you have ONE variable that could be many different values, and you want different code for each value, switch is cleaner than a long chain of if-else if.\n\nThink of switch like a restaurant menu:\n• You look at ONE thing (what you want to order)\n• You find it on the menu (case 1, case 2, case 3...)\n• You get that specific dish (the code for that case runs)\n• If what you want isn't on the menu (no matching case), you get the 'default' option\n\nSwitch is perfect when you're checking ONE variable against SPECIFIC values. If you need complex conditions (like age > 18 && hasTicket), stick with if-else!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Switch statement example\nint dayNumber = 3;\n\nswitch (dayNumber)\n{\n    case 1:\n        Console.WriteLine(\"Monday - Back to work!\");\n        break;\n    case 2:\n        Console.WriteLine(\"Tuesday - Still going...\");\n        break;\n    case 3:\n        Console.WriteLine(\"Wednesday - Midweek!\");\n        break;\n    case 4:\n        Console.WriteLine(\"Thursday - Almost there!\");\n        break;\n    case 5:\n        Console.WriteLine(\"Friday - Weekend incoming!\");\n        break;\n    case 6:\n    case 7:\n        Console.WriteLine(\"Weekend! Relax!\");\n        break;\n    default:\n        Console.WriteLine(\"Invalid day number!\");\n        break;\n}\n\n// String switch (C# can switch on strings too!)\nstring command = \"jump\";\n\nswitch (command)\n{\n    case \"jump\":\n        Console.WriteLine(\"Player jumps!\");\n        break;\n    case \"run\":\n        Console.WriteLine(\"Player runs!\");\n        break;\n    case \"attack\":\n        Console.WriteLine(\"Player attacks!\");\n        break;\n    default:\n        Console.WriteLine(\"Unknown command!\");\n        break;\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`switch (variable)`**: The variable in parentheses is what you're checking. C# will compare this against each 'case'.\n\n**`case value:`**: Each 'case' is a possible value. If variable equals this value, the code after the colon runs. The value must be a constant (like 1, 'text', etc.)!\n\n**`break;`**: CRITICAL! 'break' exits the switch. Without it, code 'falls through' to the next case (usually not what you want). Don't forget break!\n\n**`Multiple cases`**: case 6: case 7: with NO break between means 'if 6 OR 7, do this'. Both values execute the same code block.\n\n**`default:`**: The 'default' case runs if NONE of the other cases matched. Like the 'else' at the end of if-else chains. It's optional but recommended!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-03-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple calculator using switch!\n\n1. Create a string variable 'operation' (set to '+', '-', '*', or '/')\n2. Create int variables num1 = 10 and num2 = 5\n3. Use a switch statement on 'operation':\n   - case \"+\": Display num1 + num2\n   - case \"-\": Display num1 - num2\n   - case \"*\": Display num1 * num2\n   - case \"/\": Display num1 / num2\n   - default: Display 'Unknown operation'\n\nRemember to use break after each case!",
              "starterCode": "// Variables\nstring operation = \"+\";\nint num1 = 10;\nint num2 = 5;\n\n// Write your switch statement here",
              "solution": "// Variables\nstring operation = \"+\";\nint num1 = 10;\nint num2 = 5;\n\n// Write your switch statement here\nswitch (operation)\n{\n    case \"+\":\n        Console.WriteLine(num1 + num2);\n        break;\n    case \"-\":\n        Console.WriteLine(num1 - num2);\n        break;\n    case \"*\":\n        Console.WriteLine(num1 * num2);\n        break;\n    case \"/\":\n        Console.WriteLine(num1 / num2);\n        break;\n    default:\n        Console.WriteLine(\"Unknown operation\");\n        break;\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Addition should output 15 (10 + 5)",
                  "expectedOutput": "15",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Code should use switch statement",
                  "expectedOutput": "switch",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Code should have break statements",
                  "expectedOutput": "break",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Structure: switch (operation) { case \"+\": code here; break; case \"-\": code here; break; ... }. Don't forget break!"
                },
                {
                  "level": 2,
                  "text": "Forgetting break: Without break, code 'falls through' to the next case! Always end each case with break (unless you want fall-through)."
                },
                {
                  "level": 3,
                  "text": "Using variables in case: case myVariable: is WRONG! case values must be constants: case 1: or case \"text\":  "
                },
                {
                  "level": 4,
                  "text": "Forgetting quotes on strings: case jump: is wrong! String cases need quotes: case \"jump\":"
                },
                {
                  "level": 5,
                  "text": "Using conditions in case: You can't do case (x > 5): ! Switch only checks EQUALITY. Use if-else for conditions."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting break",
                  "consequence": "Without break, code 'falls through' to the next case! Always end each case with break (unless you want fall-through).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using variables in case",
                  "consequence": "case myVariable: is WRONG! case values must be constants: case 1: or case \"text\":",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting quotes on strings",
                  "consequence": "case jump: is wrong! String cases need quotes: case \"jump\":",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using conditions in case",
                  "consequence": "You can't do case (x > 5): ! Switch only checks EQUALITY. Use if-else for conditions.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-03-05",
          "title": "The Ternary Operator (Shortcut Decision)",
          "moduleId": "module-03",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Sometimes you need a simple if-else decision that just assigns a value. Writing a full if-else block feels like overkill:\n\n```\nstring message;\nif (score >= 50) {\n    message = \"Pass\";\n} else {\n    message = \"Fail\";\n}\n```\n\nC# has a SHORTCUT called the TERNARY OPERATOR (ternary means 'three parts'):\n\n```\nstring message = (score >= 50) ? \"Pass\" : \"Fail\";\n```\n\nOne line! It works like this:\n\n(condition) ? valueIfTrue : valueIfFalse\n\nThink of the ? as 'if this is true' and the : as 'otherwise'. It's like asking a yes/no question:\n\n'Is the score 50 or higher? If YES, assign \"Pass\". If NO, assign \"Fail\".'\n\nThe ternary operator is PERFECT for simple assignments but can get messy if overused. If your logic is complex, stick with regular if-else for readability!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Regular if-else (verbose)\nint age = 20;\nstring status;\n\nif (age >= 18)\n{\n    status = \"Adult\";\n}\nelse\n{\n    status = \"Minor\";\n}\nConsole.WriteLine(status);\n\n// Ternary operator (concise!)\nint age2 = 20;\nstring status2 = (age2 >= 18) ? \"Adult\" : \"Minor\";\nConsole.WriteLine(status2);\n\n// Inline usage\nint score = 85;\nConsole.WriteLine(\"Result: \" + (score >= 60 ? \"Pass\" : \"Fail\"));\n\n// Multiple ternaries (careful - can get confusing!)\nint grade = 85;\nstring letter = (grade >= 90) ? \"A\" : \n                (grade >= 80) ? \"B\" : \n                (grade >= 70) ? \"C\" : \"F\";\nConsole.WriteLine(\"Grade: \" + letter);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`(condition) ? valueIfTrue : valueIfFalse`**: The three parts: condition to check, value if true (after ?), value if false (after :). The whole expression RETURNS a value!\n\n**`Parentheses around condition`**: The parentheses around the condition are optional but make it clearer: (age >= 18) ? ... is more readable than age >= 18 ? ...\n\n**`Returns a value`**: The ternary operator PRODUCES a value, so you can assign it: string x = condition ? 'yes' : 'no'; or use it inline: Console.WriteLine(x > 5 ? 'big' : 'small');\n\n**`Nested ternaries`**: You CAN nest ternaries but it gets hard to read fast! grade >= 90 ? 'A' : grade >= 80 ? 'B' : 'C'. Use regular if-else when it's complex!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-03-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a game status checker using the ternary operator!\n\n1. Create these variables:\n   - int health = 75\n   - int energy = 30\n2. Use ternary operators to create:\n   - string healthStatus = (health > 50) ? 'Healthy' : 'Injured'\n   - string energyStatus = (energy > 50) ? 'Energized' : 'Tired'\n3. Display both statuses\n\nBonus: Try changing the values to see different results!",
              "starterCode": "// Variables\nint health = 75;\nint energy = 30;\n\n// Use ternary operators to create status strings\n\n// Display the statuses",
              "solution": "// Variables\nint health = 75;\nint energy = 30;\n\n// Use ternary operators to create status strings\nstring healthStatus = (health > 50) ? \"Healthy\" : \"Injured\";\nstring energyStatus = (energy > 50) ? \"Energized\" : \"Tired\";\n\n// Display the statuses\nConsole.WriteLine(\"Health: \" + healthStatus);\nConsole.WriteLine(\"Energy: \" + energyStatus);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Health\"",
                  "expectedOutput": "Health",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Energy\"",
                  "expectedOutput": "Energy",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Format: variable = (condition) ? \"value if true\" : \"value if false\"; Remember the ? and : symbols!"
                },
                {
                  "level": 2,
                  "text": "Forgetting the colon: The : is REQUIRED! condition ? trueValue is incomplete. Must have : falseValue at the end."
                },
                {
                  "level": 3,
                  "text": "Using curly braces: Don't write (age >= 18) ? { 'Adult' } - the values don't use braces, just the value itself!"
                },
                {
                  "level": 4,
                  "text": "Mixing types: (age >= 18) ? 'Adult' : 0 is WRONG! Both values must be the same type (both strings, both ints, etc.)."
                },
                {
                  "level": 5,
                  "text": "Overusing ternaries: Nested ternaries get VERY hard to read. If you have 3+ levels, use if-else instead for clarity!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon",
                  "consequence": "The : is REQUIRED! condition ? trueValue is incomplete. Must have : falseValue at the end.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using curly braces",
                  "consequence": "Don't write (age >= 18) ? { 'Adult' } - the values don't use braces, just the value itself!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Mixing types",
                  "consequence": "(age >= 18) ? 'Adult' : 0 is WRONG! Both values must be the same type (both strings, both ints, etc.).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Overusing ternaries",
                  "consequence": "Nested ternaries get VERY hard to read. If you have 3+ levels, use if-else instead for clarity!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-04",
      "title": "Loops and Iteration",
      "description": "Master for loops, while loops, do-while loops, nested loops, and the foreach statement.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-04-01",
          "title": "The for Loop (When You Know the Count)",
          "moduleId": "module-04",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you need to write 'I will not talk in class' 100 times on the blackboard. You wouldn't write it once and think 'okay, done!' - you'd repeat it exactly 100 times.\n\nThat's what a FOR LOOP does! It repeats code a SPECIFIC number of times. You tell it:\n1. Where to start (I'm starting at line 1)\n2. When to stop (Keep going until I reach line 100)\n3. How to count (Add 1 each time)\n\nThink of it like a countdown: '10, 9, 8, 7...' or a count-up: '1, 2, 3, 4...'. The for loop handles the counting FOR you!\n\nThe for loop is PERFECT when you know EXACTLY how many times to repeat. Need to process 50 items? Use a for loop counting from 0 to 49. Need to print numbers 1 to 10? For loop!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Basic for loop - count from 1 to 5\nfor (int i = 1; i <= 5; i++)\n{\n    Console.WriteLine(\"Number: \" + i);\n}\n\n// Countdown\nfor (int countdown = 10; countdown >= 1; countdown--)\n{\n    Console.WriteLine(countdown);\n}\nConsole.WriteLine(\"Blast off!\");\n\n// Count by 2s\nfor (int i = 0; i <= 10; i += 2)\n{\n    Console.WriteLine(\"Even number: \" + i);\n}\n\n// Real-world: print a multiplication table\nint number = 5;\nfor (int i = 1; i <= 10; i++)\n{\n    Console.WriteLine(number + \" x \" + i + \" = \" + (number * i));\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`for (initialization; condition; increment)`**: Three parts separated by semicolons: 1) Start point (int i = 0), 2) When to stop (i < 10), 3) How to change i each time (i++)\n\n**`int i = 1`**: INITIALIZATION: Creates a counter variable (usually called i, j, or k). This runs ONCE at the start. i typically starts at 0 or 1.\n\n**`i <= 5`**: CONDITION: Checked BEFORE each loop. If true, the loop runs. If false, the loop stops. Here: 'keep going while i is 5 or less'.\n\n**`i++`**: INCREMENT: Runs AFTER each loop iteration. i++ adds 1 to i. Could also be i--, i += 2, etc. This moves you closer to the end!\n\n**`Loop body { }`**: The code in braces runs each time. If the loop runs 5 times, this code executes 5 times with different values of i!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-04-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a program that displays a countdown for a rocket launch!\n\n1. Use a for loop to count down from 10 to 1\n2. Display each number\n3. After the loop ends, display 'Liftoff!'\n\nBonus: Try making it count from 20 to 1, or count by 2s!",
              "starterCode": "// Create a countdown from 10 to 1\n// Remember: for (start; condition; change)\n\n// After the loop, display \"Liftoff!\"",
              "solution": "// Create a countdown from 10 to 1\nfor (int i = 10; i >= 1; i--)\n{\n    Console.WriteLine(i);\n}\n\n// After the loop, display \"Liftoff!\"\nConsole.WriteLine(\"Liftoff!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Liftoff\"",
                  "expectedOutput": "Liftoff",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Start at 10: int i = 10. Keep going while i >= 1. Count down: i--. Structure: for (int i = 10; i >= 1; i--) { }"
                },
                {
                  "level": 2,
                  "text": "Using commas instead of semicolons: for (int i = 0, i < 10, i++) is WRONG! Use semicolons: for (int i = 0; i < 10; i++)"
                },
                {
                  "level": 3,
                  "text": "Infinite loops from wrong condition: for (int i = 0; i >= 0; i++) never ends because i is ALWAYS >= 0! Make sure your condition eventually becomes false."
                },
                {
                  "level": 4,
                  "text": "Off-by-one errors: for (int i = 0; i < 10; i++) runs 10 times (0-9). for (int i = 0; i <= 10; i++) runs 11 times (0-10)!"
                },
                {
                  "level": 5,
                  "text": "Forgetting the increment: for (int i = 0; i < 10; ) with no i++ creates an infinite loop! i never changes so i < 10 is always true."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using commas instead of semicolons",
                  "consequence": "for (int i = 0, i < 10, i++) is WRONG! Use semicolons: for (int i = 0; i < 10; i++)",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Infinite loops from wrong condition",
                  "consequence": "for (int i = 0; i >= 0; i++) never ends because i is ALWAYS >= 0! Make sure your condition eventually becomes false.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Off-by-one errors",
                  "consequence": "for (int i = 0; i < 10; i++) runs 10 times (0-9). for (int i = 0; i <= 10; i++) runs 11 times (0-10)!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting the increment",
                  "consequence": "for (int i = 0; i < 10; ) with no i++ creates an infinite loop! i never changes so i < 10 is always true.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-04-02",
          "title": "The while Loop (When You Don't Know)",
          "moduleId": "module-04",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're flipping a coin repeatedly until you get heads. How many flips will it take? You don't know! Could be 1, could be 10, could be 50.\n\nThat's when you use a WHILE loop! Unlike a for loop (which counts a specific number of times), a while loop says: 'WHILE this condition is true, keep repeating.'\n\nThink of it like checking your phone: 'While I have unread messages, keep reading them.' You don't know how many messages there are - you just keep going WHILE there are more!\n\nOr waiting in line: 'While the line is not empty, keep moving forward.' The line could be 3 people or 300 people - the while loop handles it!\n\nWhile loops are PERFECT when you don't know how many times to repeat, but you know the CONDITION to stop."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Simple while loop\nint count = 1;\n\nwhile (count <= 5)\n{\n    Console.WriteLine(\"Count is: \" + count);\n    count++;  // CRITICAL! Must change count or loop never ends!\n}\n\n// User input validation (keep asking until valid)\nbool validInput = false;\nint userAge = 0;\n\n// Simulating user input\nuserAge = 15; // Pretend user entered this\n\nwhile (!validInput)\n{\n    if (userAge >= 18)\n    {\n        Console.WriteLine(\"Valid age!\");\n        validInput = true;\n    }\n    else\n    {\n        Console.WriteLine(\"You must be 18 or older.\");\n        validInput = true; // For this example, we stop after one check\n    }\n}\n\n// Countdown with while\nint countdown = 5;\nwhile (countdown > 0)\n{\n    Console.WriteLine(countdown);\n    countdown--;\n}\nConsole.WriteLine(\"Done!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`while (condition)`**: The loop checks the condition BEFORE each iteration. If true, the loop body runs. If false, the loop stops and continues after the braces.\n\n**`Condition checked FIRST`**: Unlike do-while (coming soon!), while checks BEFORE running. If the condition starts as false, the loop body NEVER runs, not even once!\n\n**`Must change something!`**: CRITICAL: Something inside the loop MUST eventually make the condition false! Otherwise you get an INFINITE LOOP and your program hangs forever.\n\n**`while vs for`**: Use FOR when you know the count (repeat 10 times). Use WHILE when you're checking a condition (repeat until user enters valid input)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-04-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a password strength checker!\n\n1. Create an int variable 'passwordLength' starting at 3\n2. Use a while loop: while (passwordLength < 8)\n3. Inside the loop: display 'Password too short: [length] characters'\n4. Increment passwordLength by 1 each time\n5. After the loop: display 'Password is strong!'\n\nWatch it count up from 3 to 7, then stop!",
              "starterCode": "// Create password length variable\nint passwordLength = 3;\n\n// While loop to check password strength\n\n// After loop ends",
              "solution": "// Create password length variable\nint passwordLength = 3;\n\n// While loop to check password strength\nwhile (passwordLength < 8)\n{\n    Console.WriteLine(\"Password too short: \" + passwordLength + \" characters\");\n    passwordLength++;\n}\n\n// After loop ends\nConsole.WriteLine(\"Password is strong!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Password\"",
                  "expectedOutput": "Password",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Structure: while (condition) { code here; change something; }. Don't forget to increment passwordLength inside the loop!"
                },
                {
                  "level": 2,
                  "text": "Infinite loops: Forgetting to change the condition variable inside the loop! while (x < 10) without increasing x = infinite loop!"
                },
                {
                  "level": 3,
                  "text": "Semicolon after while: while (condition); is WRONG! No semicolon before the {. It's while (condition) { }"
                },
                {
                  "level": 4,
                  "text": "Not entering the loop: If the condition is false from the start, the loop body NEVER runs. while (5 < 3) { } - this code never executes!"
                },
                {
                  "level": 5,
                  "text": "Changing wrong variable: If your condition checks 'count', make sure you're changing COUNT inside the loop, not some other variable!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Infinite loops",
                  "consequence": "Forgetting to change the condition variable inside the loop! while (x < 10) without increasing x = infinite loop!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Semicolon after while",
                  "consequence": "while (condition); is WRONG! No semicolon before the {. It's while (condition) { }",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not entering the loop",
                  "consequence": "If the condition is false from the start, the loop body NEVER runs. while (5 < 3) { } - this code never executes!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Changing wrong variable",
                  "consequence": "If your condition checks 'count', make sure you're changing COUNT inside the loop, not some other variable!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-04-03",
          "title": "The do-while Loop (At Least Once)",
          "moduleId": "module-04",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a restaurant: 'Please tell me what you'd like to order.' They ask you at LEAST ONCE, even if you say 'I'm not hungry.' They don't check if you're hungry BEFORE asking - they ask FIRST, then check if you want more.\n\nThat's a DO-WHILE loop! It's like a while loop, but the condition is checked at the END, not the beginning. This guarantees the code runs AT LEAST ONCE!\n\nThink of it like trying a food sample at the grocery store:\n• Regular while: 'While you're hungry, take a sample' → If you're not hungry, you take ZERO samples\n• Do-while: 'Take a sample. Still hungry? Take another!' → You ALWAYS get at least one sample\n\nDo-while is perfect for menus, user input prompts, or anything where you need to do something at least once before checking a condition."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Regular while - might not run at all\nint x = 10;\nwhile (x < 5)  // False from the start\n{\n    Console.WriteLine(\"This never prints!\");\n}\n\n// Do-while - runs at least once!\nint y = 10;\ndo\n{\n    Console.WriteLine(\"This prints once, even though y is not < 5!\");\n} while (y < 5);  // Condition checked AFTER\n\n// Practical example: Menu system\nint choice;\ndo\n{\n    Console.WriteLine(\"\\n=== MENU ===\");\n    Console.WriteLine(\"1. Play Game\");\n    Console.WriteLine(\"2. Settings\");\n    Console.WriteLine(\"3. Quit\");\n    Console.WriteLine(\"Enter choice: \");\n    \n    // Simulating user input\n    choice = 1; // Pretend user chose 1\n    \n    if (choice == 1)\n    {\n        Console.WriteLine(\"Starting game...\");\n    }\n    else if (choice == 2)\n    {\n        Console.WriteLine(\"Opening settings...\");\n    }\n    \n    // Force exit for this example\n    choice = 3;\n    \n} while (choice != 3);\n\nConsole.WriteLine(\"Thanks for playing!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`do { } while (condition);`**: Structure: 'do' keyword, then { code }, then 'while (condition)' and SEMICOLON. The semicolon after while is REQUIRED for do-while!\n\n**`Runs at least once`**: The code block executes FIRST, THEN the condition is checked. Even if the condition is false, the code runs one time!\n\n**`Condition at the end`**: The while (condition); comes AFTER the closing brace. If condition is true, loop back to 'do'. If false, continue after the loop.\n\n**`Don't forget the semicolon!`**: while (condition); - the semicolon at the end is MANDATORY for do-while! Forgetting it causes a compiler error."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-04-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple dice rolling simulator!\n\n1. Create an int variable 'diceRoll' = 1\n2. Use a do-while loop:\n   - Display 'Rolling dice...'\n   - Display the current dice value\n   - Add 1 to diceRoll\n3. Continue while diceRoll is <= 6\n\nThe loop should run exactly 6 times, showing rolls 1 through 6!",
              "starterCode": "// Dice roller\nint diceRoll = 1;\n\n// Write your do-while loop here",
              "solution": "// Dice roller\nint diceRoll = 1;\n\n// Write your do-while loop here\ndo\n{\n    Console.WriteLine(\"Rolling dice...\");\n    Console.WriteLine(\"You rolled: \" + diceRoll);\n    diceRoll++;\n} while (diceRoll <= 6);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Rolling\"",
                  "expectedOutput": "Rolling",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Structure: do { code here; change variable; } while (condition); Don't forget the semicolon after while!"
                },
                {
                  "level": 2,
                  "text": "Forgetting the semicolon: } while (condition); - the semicolon after while is REQUIRED! Without it, compiler error!"
                },
                {
                  "level": 3,
                  "text": "Confusing do-while with while: do-while checks condition at END (runs at least once). while checks at START (might not run at all)."
                },
                {
                  "level": 4,
                  "text": "Wrong brace placement: It's do { } while, not do while { }. The 'while' comes AFTER the closing brace!"
                },
                {
                  "level": 5,
                  "text": "When to use do-while: Use it when you MUST run the code at least once. Menus, user prompts, 'try again?' scenarios are perfect!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the semicolon",
                  "consequence": "} while (condition); - the semicolon after while is REQUIRED! Without it, compiler error!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Confusing do-while with while",
                  "consequence": "do-while checks condition at END (runs at least once). while checks at START (might not run at all).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong brace placement",
                  "consequence": "It's do { } while, not do while { }. The 'while' comes AFTER the closing brace!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "When to use do-while",
                  "consequence": "Use it when you MUST run the code at least once. Menus, user prompts, 'try again?' scenarios are perfect!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-04-04",
          "title": "Loop Control (break and continue)",
          "moduleId": "module-04",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're reading through a book chapter by chapter:\n\n• BREAK: You find the answer you need on chapter 5. You say 'I'm done!' and CLOSE THE BOOK completely. You exit the loop!\n\n• CONTINUE: You're on chapter 3 and it's boring. You say 'Skip this chapter!' and jump to chapter 4. You stay in the loop, just skip THIS iteration!\n\nThese are CONTROL STATEMENTS that give you finer control over loops:\n\n**break** = Exit the loop IMMEDIATELY, no matter what. Jump to the code after the loop.\n\n**continue** = Skip the REST of this iteration and jump to the next one. The loop continues!\n\nThink of a security checkpoint:\n• break: 'Suspicious person found! Shut down the whole checkpoint!' (exit loop)\n• continue: 'This person is fine, next person please!' (skip to next iteration)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// BREAK example - exit loop early\nfor (int i = 1; i <= 10; i++)\n{\n    Console.WriteLine(\"Number: \" + i);\n    \n    if (i == 5)\n    {\n        Console.WriteLine(\"Found 5! Exiting loop.\");\n        break;  // Exit the entire loop\n    }\n}\nConsole.WriteLine(\"Loop ended.\");\n// Only prints 1, 2, 3, 4, 5, then exits!\n\n// CONTINUE example - skip current iteration\nfor (int i = 1; i <= 10; i++)\n{\n    if (i % 2 == 0)  // If even number\n    {\n        continue;  // Skip the rest, go to next iteration\n    }\n    \n    Console.WriteLine(\"Odd number: \" + i);\n}\n// Only prints odd numbers: 1, 3, 5, 7, 9\n\n// Real-world: Finding a player in a list\nstring[] players = {\"Alice\", \"Bob\", \"Charlie\", \"David\"};\nstring targetPlayer = \"Charlie\";\n\nfor (int i = 0; i < players.Length; i++)\n{\n    if (players[i] == targetPlayer)\n    {\n        Console.WriteLine(\"Found player: \" + players[i]);\n        break;  // Found them, stop searching!\n    }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`break;`**: Immediately exits the loop. Code jumps to the first line AFTER the loop. The loop is completely done, even if iterations remain!\n\n**`continue;`**: Skips the rest of the current iteration and jumps back to the loop's condition check. The loop keeps going, just skips THIS round!\n\n**`break in nested loops`**: break only exits the INNERMOST loop it's in! If you have loops inside loops, break only exits the current one, not all of them.\n\n**`When to use`**: break: When you find what you're looking for and don't need to continue. continue: When you want to skip specific items but keep processing others."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-04-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a number analyzer!\n\n1. Use a for loop from 1 to 20\n2. Use CONTINUE to skip all even numbers (if i % 2 == 0, continue)\n3. If you hit the number 15, use BREAK to exit the loop entirely\n4. Display all odd numbers before 15\n\nExpected output: 1, 3, 5, 7, 9, 11, 13, then stops!",
              "starterCode": "// Number analyzer\nfor (int i = 1; i <= 20; i++)\n{\n    // Skip even numbers\n    \n    // Break at 15\n    \n    // Display the number\n}",
              "solution": "// Number analyzer\nfor (int i = 1; i <= 20; i++)\n{\n    // Skip even numbers\n    if (i % 2 == 0)\n    {\n        continue;\n    }\n    \n    // Break at 15\n    if (i == 15)\n    {\n        break;\n    }\n    \n    // Display the number\n    Console.WriteLine(i);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should display odd numbers starting with 1",
                  "expectedOutput": "1",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should include 13 (last odd number before 15)",
                  "expectedOutput": "13",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Code should use continue to skip even numbers",
                  "expectedOutput": "continue",
                  "isVisible": false
                },
                {
                  "id": "test-4",
                  "description": "Code should use break to exit at 15",
                  "expectedOutput": "break",
                  "isVisible": false
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use if (i % 2 == 0) continue; to skip evens. Use if (i == 15) break; to exit at 15. Put the Console.WriteLine at the end!"
                },
                {
                  "level": 2,
                  "text": "Confusing break and continue: break EXITS the loop. continue SKIPS to next iteration. Very different behaviors!"
                },
                {
                  "level": 3,
                  "text": "Using outside loops: break and continue ONLY work inside loops! Using them outside a loop causes a compile error."
                },
                {
                  "level": 4,
                  "text": "Unreachable code after break: Code after break in the same block never runs! if (x) { break; Console.WriteLine('hi'); } - 'hi' is unreachable!"
                },
                {
                  "level": 5,
                  "text": "Continue logic errors: Putting continue before important code means that code gets skipped! Place your continue checks carefully."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Confusing break and continue",
                  "consequence": "break EXITS the loop. continue SKIPS to next iteration. Very different behaviors!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using outside loops",
                  "consequence": "break and continue ONLY work inside loops! Using them outside a loop causes a compile error.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Unreachable code after break",
                  "consequence": "Code after break in the same block never runs! if (x) { break; Console.WriteLine('hi'); } - 'hi' is unreachable!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Continue logic errors",
                  "consequence": "Putting continue before important code means that code gets skipped! Place your continue checks carefully.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-04-05",
          "title": "Nested Loops (Loops Within Loops)",
          "moduleId": "module-04",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're organizing a tournament where every team plays every other team:\n\n• Outer loop: Go through each team (Team A, Team B, Team C...)\n• Inner loop: For THIS team, play against every OTHER team\n\nTeam A plays Team B, Team C, Team D...\nTeam B plays Team A, Team C, Team D...\nAnd so on!\n\nThat's a NESTED LOOP - a loop INSIDE another loop!\n\nThink of it like checking every seat in a theater:\n• Outer loop: Go through each ROW (Row 1, Row 2, Row 3...)\n• Inner loop: For THIS row, check each SEAT (Seat A, B, C...)\n\nRow 1, Seat A → Row 1, Seat B → ... → Row 2, Seat A → Row 2, Seat B...\n\nNested loops are powerful for grids, patterns, tables, or any time you need to do something for EVERY COMBINATION of two things!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// BASIC NESTED LOOP - GRID\nfor (int row = 0; row < 3; row++)\n{\n    for (int col = 0; col < 4; col++)\n    {\n        Console.Write(\"* \");\n    }\n    Console.WriteLine();  // New line after each row\n}\n// Output:\n// * * * *\n// * * * *\n// * * * *\n\n// MULTIPLICATION TABLE\nfor (int i = 1; i <= 5; i++)\n{\n    for (int j = 1; j <= 5; j++)\n    {\n        int result = i * j;\n        Console.Write($\"{result,4}\");  // 4 spaces wide\n    }\n    Console.WriteLine();\n}\n// Output:\n//    1   2   3   4   5\n//    2   4   6   8  10\n//    3   6   9  12  15\n//    4   8  12  16  20\n//    5  10  15  20  25\n\n// TRIANGLE PATTERN\nfor (int row = 1; row <= 5; row++)\n{\n    for (int col = 1; col <= row; col++)\n    {\n        Console.Write(\"*\");\n    }\n    Console.WriteLine();\n}\n// Output:\n// *\n// **\n// ***\n// ****\n// *****\n\n// NUMBER PYRAMID\nfor (int i = 1; i <= 4; i++)\n{\n    for (int j = 1; j <= i; j++)\n    {\n        Console.Write(j);\n    }\n    Console.WriteLine();\n}\n// Output:\n// 1\n// 12\n// 123\n// 1234\n\n// COMPARING ALL PAIRS\nstring[] team1 = { \"Alice\", \"Bob\", \"Charlie\" };\nstring[] team2 = { \"Diana\", \"Eve\" };\n\nConsole.WriteLine(\"All possible matchups:\");\nforeach (string player1 in team1)\n{\n    foreach (string player2 in team2)\n    {\n        Console.WriteLine($\"{player1} vs {player2}\");\n    }\n}\n// Output:\n// Alice vs Diana\n// Alice vs Eve\n// Bob vs Diana\n// Bob vs Eve\n// Charlie vs Diana\n// Charlie vs Eve\n\n// PRACTICAL: Seating chart\nint rows = 4;\nint seatsPerRow = 5;\nint seatNumber = 1;\n\nfor (int r = 1; r <= rows; r++)\n{\n    Console.Write($\"Row {r}: \");\n    for (int s = 1; s <= seatsPerRow; s++)\n    {\n        Console.Write($\"[{seatNumber}] \");\n        seatNumber++;\n    }\n    Console.WriteLine();\n}\n\n// PRACTICAL: Times table quiz\nfor (int num = 2; num <= 5; num++)\n{\n    Console.WriteLine($\"\\n=== {num} Times Table ===\");\n    for (int mult = 1; mult <= 10; mult++)\n    {\n        int answer = num * mult;\n        Console.WriteLine($\"{num} × {mult} = {answer}\");\n    }\n}\n\n// PRACTICAL: Finding duplicates\nint[] numbers = { 1, 2, 3, 2, 4, 1, 5 };\n\nConsole.WriteLine(\"Checking for duplicates:\");\nfor (int i = 0; i < numbers.Length; i++)\n{\n    for (int j = i + 1; j < numbers.Length; j++)\n    {\n        if (numbers[i] == numbers[j])\n        {\n            Console.WriteLine($\"Duplicate found: {numbers[i]}\");\n        }\n    }\n}\n\n// NESTED LOOP WITH BREAK\nConsole.WriteLine(\"\\nSearching 2D array:\");\nint[,] grid = { { 1, 2, 3 }, { 4, 5, 6 }, { 7, 8, 9 } };\nint searchFor = 5;\nbool found = false;\n\nfor (int r = 0; r < 3; r++)\n{\n    for (int c = 0; c < 3; c++)\n    {\n        if (grid[r, c] == searchFor)\n        {\n            Console.WriteLine($\"Found {searchFor} at [{r},{c}]\");\n            found = true;\n            break;  // Breaks inner loop only!\n        }\n    }\n    if (found) break;  // Need this to break outer loop too!\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Outer and Inner loops`**: Outer loop runs first. For EACH outer iteration, inner loop runs COMPLETELY. If outer runs 3 times, inner 4 times → total 3×4=12 inner executions!\n\n**`Loop variables`**: Use different variable names! Outer: i, Inner: j. Or row/col, x/y. Can't reuse same name: for (int i...) { for (int i...) } ERROR!\n\n**`break in nested loops`**: break only exits CURRENT (innermost) loop! To exit both loops, need flag or labeled break (C# doesn't have goto in loops). Set bool flag before break.\n\n**`Performance warning`**: Nested loops multiply iterations! 100 outer × 100 inner = 10,000 total! 3 nested loops with 100 each = 1,000,000! Can be slow. Avoid deep nesting."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-04-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a calendar month printer!\n\n1. Ask user for:\n   - Month name\n   - Number of days in month (28-31)\n   - What day of week month starts (1=Monday, 7=Sunday)\n2. Print calendar header:\n   Mon Tue Wed Thu Fri Sat Sun\n3. Use nested loops (or single loop logic):\n   - Print spaces for starting day offset\n   - Print day numbers 1 to total days\n   - Start new line after every 7 days (weekly rows)\n4. Format nicely with 4-character width per day\n\nExample:\nMonth: March\nDays: 31\nStarts on: 3 (Wednesday)\n\n     March 2025\nMon Tue Wed Thu Fri Sat Sun\n              1   2   3   4\n  5   6   7   8   9  10  11\n 12  13  14  15  16  17  18\n 19  20  21  22  23  24  25\n 26  27  28  29  30  31",
              "starterCode": "// Calendar Printer\n\nConsole.WriteLine(\"Enter month name:\");\nstring month = Console.ReadLine();\n\nConsole.WriteLine(\"Enter number of days:\");\nint daysInMonth = int.Parse(Console.ReadLine());\n\nConsole.WriteLine(\"What day does month start? (1=Mon, 7=Sun):\");\nint startDay = int.Parse(Console.ReadLine());\n\n// Print header\nConsole.WriteLine($\"\\n     {month} 2025\");\nConsole.WriteLine(\"Mon Tue Wed Thu Fri Sat Sun\");\n\n// Print calendar grid\nint dayOfWeek = 1;\n\n// Print leading spaces\n\n// Print day numbers\n\n// New line after each week",
              "solution": "// Calendar Printer\n\nConsole.WriteLine(\"Enter month name:\");\nstring month = Console.ReadLine();\n\nConsole.WriteLine(\"Enter number of days:\");\nint daysInMonth = int.Parse(Console.ReadLine());\n\nConsole.WriteLine(\"What day does month start? (1=Mon, 7=Sun):\");\nint startDay = int.Parse(Console.ReadLine());\n\n// Print header\nConsole.WriteLine($\"\\n     {month} 2025\");\nConsole.WriteLine(\"Mon Tue Wed Thu Fri Sat Sun\");\n\n// Print leading spaces for offset\nfor (int i = 1; i < startDay; i++)\n{\n    Console.Write(\"    \");  // 4 spaces for empty day\n}\n\nint currentDayOfWeek = startDay;\n\n// Print each day of month\nfor (int day = 1; day <= daysInMonth; day++)\n{\n    Console.Write($\"{day,4}\");  // Right-aligned in 4 spaces\n    \n    // Check if end of week (Sunday = 7)\n    if (currentDayOfWeek == 7)\n    {\n        Console.WriteLine();  // New line for next week\n        currentDayOfWeek = 1;  // Reset to Monday\n    }\n    else\n    {\n        currentDayOfWeek++;\n    }\n}\n\nConsole.WriteLine();  // Final newline",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Mon\"",
                  "expectedOutput": "Mon",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Tue\"",
                  "expectedOutput": "Tue",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Wed\"",
                  "expectedOutput": "Wed",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"month\"",
                  "expectedOutput": "month",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Print startDay-1 spaces (4 chars each) before first day. Loop day from 1 to daysInMonth. Track currentDayOfWeek. When reaches 7, WriteLine() for new row. {day,4} right-aligns in 4 spaces."
                },
                {
                  "level": 2,
                  "text": "Infinite nested loops: Outer loop reset by inner! for (int i=0; i<3; i++) { for (int j=0; j<5; j++) { i=0; } } resets i, never ends! Don't modify outer variable in inner loop."
                },
                {
                  "level": 3,
                  "text": "Variable name collision: for (int i=0...) { for (int i=0...) } ERROR! Can't use same variable name. Use i, j, k or row/col or outer/inner."
                },
                {
                  "level": 4,
                  "text": "Break confusion: break only exits innermost loop! for (...) { for (...) { break; } } breaks inner only. Need flag: bool done=false; and if (done) break; in outer."
                },
                {
                  "level": 5,
                  "text": "Off-by-one in patterns: Triangle: for (i=1; i<=5; i++) { for (j=1; j<=i; j++) } gives increasing. for (j=1; j<=5-i; j++) gives decreasing. Easy to get backwards!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Infinite nested loops",
                  "consequence": "Outer loop reset by inner! for (int i=0; i<3; i++) { for (int j=0; j<5; j++) { i=0; } } resets i, never ends! Don't modify outer variable in inner loop.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Variable name collision",
                  "consequence": "for (int i=0...) { for (int i=0...) } ERROR! Can't use same variable name. Use i, j, k or row/col or outer/inner.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Break confusion",
                  "consequence": "break only exits innermost loop! for (...) { for (...) { break; } } breaks inner only. Need flag: bool done=false; and if (done) break; in outer.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Off-by-one in patterns",
                  "consequence": "Triangle: for (i=1; i<=5; i++) { for (j=1; j<=i; j++) } gives increasing. for (j=1; j<=5-i; j++) gives decreasing. Easy to get backwards!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-05",
      "title": "Collections",
      "description": "Work with arrays, Lists, Dictionaries, and other collection types for managing groups of data.",
      "difficulty": "beginner",
      "estimatedHours": 1,
      "lessons": [
        {
          "id": "lesson-05-01",
          "title": "Arrays (The Fixed-Size Shelf)",
          "moduleId": "module-05",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you buy a bookshelf with exactly 5 slots. You can put 5 books on it, no more, no less. Each slot has a number (0, 1, 2, 3, 4), and you can access any book directly: 'Give me the book in slot 3!'\n\nThat's an ARRAY! It's a collection of items:\n• Fixed size (decided when created - can't grow or shrink!)\n• All items must be the same type (all ints, all strings, etc.)\n• Accessed by index (position number, starting from 0!)\n\nWhy start at 0? Because programmers are weird! Seriously, it's a computer science convention. The FIRST item is at index 0, second at index 1, etc.\n\nArrays are FAST for accessing items (instant lookup!) but INFLEXIBLE (can't change size). Perfect for fixed data like days of the week, months, or game levels!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Creating arrays\nint[] scores = new int[5];  // Creates array with 5 empty slots\nscores[0] = 95;  // First item (index 0)\nscores[1] = 87;\nscores[2] = 92;\nscores[3] = 78;\nscores[4] = 88;  // Last item (index 4, not 5!)\n\n// Or initialize with values directly\nstring[] players = { \"Alice\", \"Bob\", \"Charlie\" };\n\n// Accessing array items\nConsole.WriteLine(\"First player: \" + players[0]);  // Alice\nConsole.WriteLine(\"Third player: \" + players[2]);  // Charlie\n\n// Array length\nConsole.WriteLine(\"Number of players: \" + players.Length);\n\n// Looping through an array\nfor (int i = 0; i < scores.Length; i++)\n{\n    Console.WriteLine(\"Score \" + i + \": \" + scores[i]);\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`int[] arrayName`**: Square brackets [] after the type means 'array of this type'. int[] means array of integers, string[] means array of strings.\n\n**`new int[5]`**: Creates an array with 5 slots. The number in brackets is the SIZE. Once created, this size can NEVER change!\n\n**`arrayName[index]`**: Access an item using square brackets and the index. Remember: indexes start at 0! An array of size 5 has indexes 0, 1, 2, 3, 4.\n\n**`.Length`**: The Length property tells you how many items the array holds. arrayName.Length is VERY useful in loops!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-05-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a weekly temperature tracker!\n\n1. Create a double array 'temperatures' with 7 slots (for 7 days)\n2. Fill it with values: 72.5, 75.0, 68.3, 71.2, 74.8, 70.1, 69.5\n3. Use a for loop to display each day's temperature: 'Day [index]: [temp]°F'\n4. Calculate and display the average temperature\n\nHint: To calculate average, add all temps and divide by array.Length!",
              "starterCode": "// Create temperature array\n\n// Fill with values\n\n// Display each temperature with a loop\n\n// Calculate average",
              "solution": "// Create temperature array\ndouble[] temperatures = new double[7];\n\n// Fill with values\ntemperatures[0] = 72.5;\ntemperatures[1] = 75.0;\ntemperatures[2] = 68.3;\ntemperatures[3] = 71.2;\ntemperatures[4] = 74.8;\ntemperatures[5] = 70.1;\ntemperatures[6] = 69.5;\n\n// Display each temperature with a loop\nfor (int i = 0; i < temperatures.Length; i++)\n{\n    Console.WriteLine(\"Day \" + i + \": \" + temperatures[i] + \"°F\");\n}\n\n// Calculate average\ndouble sum = 0;\nfor (int i = 0; i < temperatures.Length; i++)\n{\n    sum += temperatures[i];\n}\ndouble average = sum / temperatures.Length;\nConsole.WriteLine(\"Average: \" + average + \"°F\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Day\"",
                  "expectedOutput": "Day",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Average\"",
                  "expectedOutput": "Average",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create: double[] temps = new double[7]; Access: temps[0] = value; Loop: for (int i = 0; i < temps.Length; i++)"
                },
                {
                  "level": 2,
                  "text": "Index out of range: array[5] when the array has 5 items (indexes 0-4) = CRASH! Always remember: indexes go from 0 to Length-1!"
                },
                {
                  "level": 3,
                  "text": "Forgetting 'new' keyword: int[] arr = int[5]; is WRONG! Must be: int[] arr = new int[5];"
                },
                {
                  "level": 4,
                  "text": "Wrong loop condition: for (i = 0; i <= arr.Length; i++) goes ONE TOO FAR! Use i < arr.Length (less than, not less-or-equal)!"
                },
                {
                  "level": 5,
                  "text": "Trying to resize: You CAN'T change array size after creation! array.Length = 10; doesn't work. Create a new array if you need different size."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Index out of range",
                  "consequence": "array[5] when the array has 5 items (indexes 0-4) = CRASH! Always remember: indexes go from 0 to Length-1!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting 'new' keyword",
                  "consequence": "int[] arr = int[5]; is WRONG! Must be: int[] arr = new int[5];",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong loop condition",
                  "consequence": "for (i = 0; i <= arr.Length; i++) goes ONE TOO FAR! Use i < arr.Length (less than, not less-or-equal)!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Trying to resize",
                  "consequence": "You CAN'T change array size after creation! array.Length = 10; doesn't work. Create a new array if you need different size.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-05-02",
          "title": "List<T> (The Flexible Container)",
          "moduleId": "module-05",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Remember arrays? They're like a bookshelf with fixed slots - you can't add more books if it's full!\n\nA LIST is like a magical expanding shelf! You can:\n• Add items anytime (shelf grows automatically!)\n• Remove items (shelf shrinks!)\n• Insert items in the middle\n• Check if an item exists\n\nLists are DYNAMIC - they change size as needed. The <T> syntax (like List<int>) means 'List of what type?' Just like arrays, all items must be the same type, but unlike arrays, you can grow and shrink them!\n\nThink of a grocery list app: You add items ('milk'), remove items when bought, and the list grows/shrinks automatically. You wouldn't use a fixed array for that - you'd use a List!\n\nLists are THE most common collection in C#. When in doubt, use a List!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System.Collections.Generic;\n\n// Creating a list\nList<string> shoppingList = new List<string>();\n\n// Adding items\nshoppingList.Add(\"Milk\");\nshoppingList.Add(\"Bread\");\nshoppingList.Add(\"Eggs\");\n\nConsole.WriteLine(\"Items: \" + shoppingList.Count);  // 3\n\n// Accessing items (like arrays)\nConsole.WriteLine(\"First item: \" + shoppingList[0]);\n\n// Removing items\nshoppingList.Remove(\"Bread\");  // Removes \"Bread\"\nConsole.WriteLine(\"Items now: \" + shoppingList.Count);  // 2\n\n// Check if item exists\nif (shoppingList.Contains(\"Milk\"))\n{\n    Console.WriteLine(\"Don't forget milk!\");\n}\n\n// Looping through a list\nfor (int i = 0; i < shoppingList.Count; i++)\n{\n    Console.WriteLine(\"Item \" + i + \": \" + shoppingList[i]);\n}\n\n// Create list with initial values\nList<int> scores = new List<int> { 95, 87, 92, 78 };",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`List<string>`**: List<T> where T is the type. List<string> = list of strings, List<int> = list of integers. The angle brackets specify what type is stored!\n\n**`.Add(item)`**: Adds an item to the END of the list. The list automatically expands to fit! add() is THE most common list operation.\n\n**`.Remove(item)`**: Removes the FIRST occurrence of this item from the list. If the item isn't found, nothing happens (no error).\n\n**`.Count`**: Like array's .Length but for lists! Use .Count to get the number of items. NOTE: It's Count not Length!\n\n**`.Contains(item)`**: Returns true if the item exists in the list, false otherwise. Great for checking before adding or removing!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-05-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a player inventory system!\n\n1. Create a List<string> called 'inventory'\n2. Add these items: 'Sword', 'Shield', 'Potion'\n3. Display the count of items\n4. Check if inventory Contains 'Potion' - if yes, display 'Potion ready!'\n5. Remove 'Potion' (it was used!)\n6. Add 'Gold Coin'\n7. Use a foreach loop to display all remaining items\n\nRemember: using System.Collections.Generic; at the top!",
              "starterCode": "using System.Collections.Generic;\n\n// Create inventory\n\n// Add items\n\n// Display count\n\n// Check for potion\n\n// Remove potion\n\n// Add gold coin\n\n// Display all items",
              "solution": "using System.Collections.Generic;\n\n// Create inventory\nList<string> inventory = new List<string>();\n\n// Add items\ninventory.Add(\"Sword\");\ninventory.Add(\"Shield\");\ninventory.Add(\"Potion\");\n\n// Display count\nConsole.WriteLine(\"Items in inventory: \" + inventory.Count);\n\n// Check for potion\nif (inventory.Contains(\"Potion\"))\n{\n    Console.WriteLine(\"Potion ready!\");\n}\n\n// Remove potion\ninventory.Remove(\"Potion\");\n\n// Add gold coin\ninventory.Add(\"Gold Coin\");\n\n// Display all items\nfor (int i = 0; i < inventory.Count; i++)\n{\n    Console.WriteLine(\"Item: \" + inventory[i]);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"inventory\"",
                  "expectedOutput": "inventory",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Item\"",
                  "expectedOutput": "Item",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create: List<string> list = new List<string>(); Add: list.Add(\"item\"); Remove: list.Remove(\"item\"); Check: list.Contains(\"item\")"
                },
                {
                  "level": 2,
                  "text": "Forgetting using statement: List needs 'using System.Collections.Generic;' at the top! Without it, C# doesn't know what List is."
                },
                {
                  "level": 3,
                  "text": "Using .Length instead of .Count: Arrays use .Length, Lists use .Count! list.Length doesn't exist!"
                },
                {
                  "level": 4,
                  "text": "Forgetting <T>: Just 'List' is wrong! Must specify type: List<int>, List<string>, etc. The angle brackets are REQUIRED!"
                },
                {
                  "level": 5,
                  "text": "Index out of range on dynamic lists: If you remove items, the Count changes! Always loop with i < list.Count, not a hardcoded number."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting using statement",
                  "consequence": "List needs 'using System.Collections.Generic;' at the top! Without it, C# doesn't know what List is.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using .Length instead of .Count",
                  "consequence": "Arrays use .Length, Lists use .Count! list.Length doesn't exist!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting <T>",
                  "consequence": "Just 'List' is wrong! Must specify type: List<int>, List<string>, etc. The angle brackets are REQUIRED!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Index out of range on dynamic lists",
                  "consequence": "If you remove items, the Count changes! Always loop with i < list.Count, not a hardcoded number.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-05-03",
          "title": "Dictionary<TKey, TValue> (The Lookup Table)",
          "moduleId": "module-05",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a real dictionary: You look up a WORD (the key) and get its DEFINITION (the value). You don't flip through page by page - you jump straight to the word!\n\nA Dictionary<TKey, TValue> works the same way! It stores KEY-VALUE PAIRS:\n• The KEY is unique (like a word - only appears once)\n• The VALUE is what you get when you look up that key\n• Lookup is INSTANT - no matter how big the dictionary!\n\nExamples:\n• Phone book: Name (key) → Phone number (value)\n• Game: PlayerName (key) → Score (value)\n• Store: ProductID (key) → Price (value)\n\nWhy not use a List? Lists require you to search through items one by one. Dictionaries use the key for INSTANT lookup - like using an index in a book!\n\nPerfect for when you need to find things by a unique identifier!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System.Collections.Generic;\n\n// Creating a dictionary\nDictionary<string, int> playerScores = new Dictionary<string, int>();\n\n// Adding key-value pairs\nplayerScores.Add(\"Alice\", 1500);\nplayerScores.Add(\"Bob\", 1200);\nplayerScores.Add(\"Charlie\", 1800);\n\n// Or initialize with values\nDictionary<string, string> capitals = new Dictionary<string, string>\n{\n    { \"USA\", \"Washington DC\" },\n    { \"France\", \"Paris\" },\n    { \"Japan\", \"Tokyo\" }\n};\n\n// Accessing values by key\nConsole.WriteLine(\"Alice's score: \" + playerScores[\"Alice\"]);\nConsole.WriteLine(\"France's capital: \" + capitals[\"France\"]);\n\n// Checking if key exists\nif (playerScores.ContainsKey(\"Bob\"))\n{\n    Console.WriteLine(\"Bob's score: \" + playerScores[\"Bob\"]);\n}\n\n// Updating a value\nplayerScores[\"Alice\"] = 1600;  // Alice scored more!\n\n// Looping through dictionary\nforeach (var pair in playerScores)\n{\n    Console.WriteLine(pair.Key + \" has \" + pair.Value + \" points\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Dictionary<TKey, TValue>`**: Two types in angle brackets: TKey (key type) and TValue (value type). Dictionary<string, int> means string keys, int values.\n\n**`.Add(key, value)`**: Adds a key-value pair. The key MUST be unique! Trying to add the same key twice causes an error.\n\n**`dict[key]`**: Get or set a value by its key. dict['Alice'] gets Alice's value. dict['Alice'] = 100 sets it. If key doesn't exist, CRASH!\n\n**`.ContainsKey(key)`**: Check if a key exists BEFORE accessing it! Always check first to avoid crashes: if (dict.ContainsKey('x')) { use dict['x'] }\n\n**`foreach (var pair in dict)`**: Loop through key-value pairs. Each 'pair' has .Key and .Value properties. Order is NOT guaranteed!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-05-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple English-Spanish translator!\n\n1. Create Dictionary<string, string> called 'translator'\n2. Add translations: 'hello' → 'hola', 'goodbye' → 'adiós', 'friend' → 'amigo'\n3. Look up and display the translation for 'hello'\n4. Check if 'goodbye' exists, then display its translation\n5. Add a new translation: 'water' → 'agua'\n6. Use foreach to display all translations in format: 'English: Spanish'",
              "starterCode": "using System.Collections.Generic;\n\n// Create translator dictionary\n\n// Add translations\n\n// Look up 'hello'\n\n// Check and display 'goodbye'\n\n// Add 'water'\n\n// Display all translations",
              "solution": "using System.Collections.Generic;\n\n// Create translator dictionary\nDictionary<string, string> translator = new Dictionary<string, string>();\n\n// Add translations\ntranslator.Add(\"hello\", \"hola\");\ntranslator.Add(\"goodbye\", \"adiós\");\ntranslator.Add(\"friend\", \"amigo\");\n\n// Look up 'hello'\nConsole.WriteLine(\"hello: \" + translator[\"hello\"]);\n\n// Check and display 'goodbye'\nif (translator.ContainsKey(\"goodbye\"))\n{\n    Console.WriteLine(\"goodbye: \" + translator[\"goodbye\"]);\n}\n\n// Add 'water'\ntranslator.Add(\"water\", \"agua\");\n\n// Display all translations\nforeach (var pair in translator)\n{\n    Console.WriteLine(pair.Key + \": \" + pair.Value);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"hello\"",
                  "expectedOutput": "hello",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"hola\"",
                  "expectedOutput": "hola",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create: Dictionary<string, string> dict = new Dictionary<string, string>(); Add: dict.Add(key, value); Access: dict[key]; Check: ContainsKey(key)"
                },
                {
                  "level": 2,
                  "text": "Duplicate keys: Adding the same key twice throws an error! Use ContainsKey to check first, or use dict[key] = value which updates if exists."
                },
                {
                  "level": 3,
                  "text": "Accessing non-existent key: dict['xyz'] when 'xyz' doesn't exist = CRASH! Always use ContainsKey first!"
                },
                {
                  "level": 4,
                  "text": "Wrong foreach syntax: foreach (string x in dict) is wrong! Use foreach (var pair in dict) then access pair.Key and pair.Value."
                },
                {
                  "level": 5,
                  "text": "Forgetting two types: Dictionary<string> is WRONG! Need TWO types: Dictionary<TKey, TValue> like Dictionary<string, int>."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Duplicate keys",
                  "consequence": "Adding the same key twice throws an error! Use ContainsKey to check first, or use dict[key] = value which updates if exists.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Accessing non-existent key",
                  "consequence": "dict['xyz'] when 'xyz' doesn't exist = CRASH! Always use ContainsKey first!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong foreach syntax",
                  "consequence": "foreach (string x in dict) is wrong! Use foreach (var pair in dict) then access pair.Key and pair.Value.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting two types",
                  "consequence": "Dictionary<string> is WRONG! Need TWO types: Dictionary<TKey, TValue> like Dictionary<string, int>.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-05-04",
          "title": "Iterating Collections (foreach Loop)",
          "moduleId": "module-05",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned to CREATE collections (arrays, lists, dictionaries). Now learn to WORK with them efficiently!\n\nThe FOREACH loop is your best friend for collections:\n\n❌ OLD WAY (with for loop):\nfor (int i = 0; i < names.Length; i++)\n{\n    Console.WriteLine(names[i]);\n}\n\n✅ NEW WAY (with foreach):\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\nForeach is:\n✅ Simpler - no index variable needed\n✅ Safer - can't go out of bounds\n✅ Cleaner - less code to write\n✅ Works with ALL collections (arrays, lists, dictionaries)\n\nThink: foreach = \"for each item in this collection, do something\""
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\n\n// FOREACH WITH ARRAYS\nstring[] fruits = { \"Apple\", \"Banana\", \"Orange\", \"Grape\" };\n\nConsole.WriteLine(\"=== Fruits ===\");\nforeach (string fruit in fruits)\n{\n    Console.WriteLine($\"I like {fruit}!\");\n}\n\n// FOREACH WITH LISTS\nList<int> scores = new List<int> { 95, 87, 92, 78, 88 };\n\nConsole.WriteLine(\"\\n=== Scores ===\");\nforeach (int score in scores)\n{\n    Console.WriteLine($\"Score: {score}\");\n}\n\n// CALCULATING WITH FOREACH\nint total = 0;\nforeach (int score in scores)\n{\n    total += score;\n}\ndouble average = (double)total / scores.Count;\nConsole.WriteLine($\"\\nTotal: {total}, Average: {average:F2}\");\n\n// FINDING WITH FOREACH\nint searchFor = 92;\nbool found = false;\n\nforeach (int score in scores)\n{\n    if (score == searchFor)\n    {\n        Console.WriteLine($\"\\nFound {searchFor}!\");\n        found = true;\n        break;\n    }\n}\n\nif (!found)\n{\n    Console.WriteLine($\"\\n{searchFor} not found\");\n}\n\n// COUNTING WITH FOREACH\nint passingCount = 0;\nforeach (int score in scores)\n{\n    if (score >= 60)\n    {\n        passingCount++;\n    }\n}\nConsole.WriteLine($\"\\nPassing scores: {passingCount}\");\n\n// USEFUL COLLECTION METHODS\nList<string> shoppingCart = new List<string>();\n\n// .Add - add items\nshoppingCart.Add(\"Milk\");\nshoppingCart.Add(\"Bread\");\nshoppingCart.Add(\"Eggs\");\nConsole.WriteLine($\"\\nCart has {shoppingCart.Count} items\");\n\n// .Contains - check if item exists\nif (shoppingCart.Contains(\"Milk\"))\n{\n    Console.WriteLine(\"Milk is in the cart\");\n}\n\n// .Remove - remove item\nshoppingCart.Remove(\"Bread\");\nConsole.WriteLine($\"After removing bread: {shoppingCart.Count} items\");\n\n// .Clear - remove all\nshoppingCart.Clear();\nConsole.WriteLine($\"After clearing: {shoppingCart.Count} items\");\n\n// SORTING (Arrays)\nint[] numbers = { 5, 2, 8, 1, 9 };\nArray.Sort(numbers);  // Sorts in place: 1, 2, 5, 8, 9\n\nConsole.WriteLine(\"\\n=== Sorted Numbers ===\");\nforeach (int num in numbers)\n{\n    Console.Write(num + \" \");\n}\n\n// SORTING (Lists)\nList<string> names = new List<string> { \"Charlie\", \"Alice\", \"Bob\" };\nnames.Sort();  // Alphabetical\n\nConsole.WriteLine(\"\\n\\n=== Sorted Names ===\");\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\n// REVERSING\nnames.Reverse();  // Reverse order\nConsole.WriteLine(\"\\n=== Reversed ===\");\nforeach (string name in names)\n{\n    Console.WriteLine(name);\n}\n\n// PRACTICAL: Finding min/max manually\nint[] ages = { 25, 30, 18, 45, 22, 35 };\nint oldest = ages[0];\nint youngest = ages[0];\n\nforeach (int age in ages)\n{\n    if (age > oldest)\n        oldest = age;\n    if (age < youngest)\n        youngest = age;\n}\n\nConsole.WriteLine($\"\\nOldest: {oldest}, Youngest: {youngest}\");\n\n// FOREACH WITH DICTIONARIES\nDictionary<string, int> inventory = new Dictionary<string, int>\n{\n    { \"Apples\", 50 },\n    { \"Oranges\", 30 },\n    { \"Bananas\", 25 }\n};\n\nConsole.WriteLine(\"\\n=== Inventory ===\");\nforeach (KeyValuePair<string, int> item in inventory)\n{\n    Console.WriteLine($\"{item.Key}: {item.Value} units\");\n}\n\n// Can also use var\nforeach (var item in inventory)\n{\n    if (item.Value < 40)\n    {\n        Console.WriteLine($\"Low stock: {item.Key}\");\n    }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`foreach (type item in collection)`**: Iterates through each element. 'type' matches collection type (int for int[], string for string[]). 'item' is current element. 'collection' is what to iterate.\n\n**`.Count vs .Length`**: Lists use .Count property. Arrays use .Length property. Both tell you number of elements. No parentheses - they're properties not methods!\n\n**`.Add(item)`**: Adds item to end of List. list.Add(5) appends 5. Can't use with arrays - they're fixed size!\n\n**`.Contains(item)`**: Returns true if item exists in collection, false otherwise. Works with Lists, arrays (using Array methods), dictionaries. list.Contains(\"Bob\") checks if \"Bob\" is in list.\n\n**`Array.Sort() / list.Sort()`**: Sorts collection in place. Array.Sort(array) for arrays. list.Sort() for lists. Ascending order (smallest to largest, A to Z)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-05-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a grade book manager!\n\n1. Create a List<string> for student names\n2. Create a List<int> for their grades\n3. Add 5 students with their grades (use .Add)\n4. Display all students with their grades using foreach\n5. Calculate:\n   - Total of all grades\n   - Average grade\n   - Highest grade (find manually with foreach)\n   - Lowest grade (find manually with foreach)\n6. Count how many students passed (grade >= 60)\n7. Sort grades and display sorted list\n8. Check if a specific grade exists using .Contains\n\nExample output:\n=== GRADE BOOK ===\nAlice: 85\nBob: 72\nCharlie: 91\nDiana: 68\nEve: 95\n\nTotal: 411\nAverage: 82.2\nHighest: 95\nLowest: 68\nPassed: 5/5\n\nSorted grades: 68, 72, 85, 91, 95\nContains 90? False",
              "starterCode": "// Grade Book Manager\n\nusing System;\nusing System.Collections.Generic;\n\nList<string> names = new List<string>();\nList<int> grades = new List<int>();\n\n// Add 5 students\nnames.Add(\"Alice\");\ngrades.Add(85);\n// Add 4 more...\n\n// Display all students\nConsole.WriteLine(\"=== GRADE BOOK ===\");\nfor (int i = 0; i < names.Count; i++)\n{\n    Console.WriteLine($\"{names[i]}: {grades[i]}\");\n}\n\n// Calculate statistics using foreach\n\n// Sort and display",
              "solution": "// Grade Book Manager\n\nusing System;\nusing System.Collections.Generic;\n\nList<string> names = new List<string>();\nList<int> grades = new List<int>();\n\n// Add 5 students\nnames.Add(\"Alice\");\ngrades.Add(85);\nnames.Add(\"Bob\");\ngrades.Add(72);\nnames.Add(\"Charlie\");\ngrades.Add(91);\nnames.Add(\"Diana\");\ngrades.Add(68);\nnames.Add(\"Eve\");\ngrades.Add(95);\n\n// Display all students\nConsole.WriteLine(\"=== GRADE BOOK ===\");\nfor (int i = 0; i < names.Count; i++)\n{\n    Console.WriteLine($\"{names[i]}: {grades[i]}\");\n}\n\n// Calculate total and average\nint total = 0;\nforeach (int grade in grades)\n{\n    total += grade;\n}\ndouble average = (double)total / grades.Count;\n\n// Find highest and lowest\nint highest = grades[0];\nint lowest = grades[0];\nforeach (int grade in grades)\n{\n    if (grade > highest)\n        highest = grade;\n    if (grade < lowest)\n        lowest = grade;\n}\n\n// Count passing\nint passedCount = 0;\nforeach (int grade in grades)\n{\n    if (grade >= 60)\n        passedCount++;\n}\n\nConsole.WriteLine($\"\\nTotal: {total}\");\nConsole.WriteLine($\"Average: {average:F1}\");\nConsole.WriteLine($\"Highest: {highest}\");\nConsole.WriteLine($\"Lowest: {lowest}\");\nConsole.WriteLine($\"Passed: {passedCount}/{grades.Count}\");\n\n// Sort and display\nList<int> sortedGrades = new List<int>(grades);  // Copy first\nsortedGrades.Sort();\n\nConsole.Write(\"\\nSorted grades: \");\nforeach (int grade in sortedGrades)\n{\n    Console.Write(grade + \" \");\n}\n\n// Check contains\nConsole.WriteLine($\"\\n\\nContains 90? {grades.Contains(90)}\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"GRADE BOOK\"",
                  "expectedOutput": "GRADE BOOK",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Total\"",
                  "expectedOutput": "Total",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Average\"",
                  "expectedOutput": "Average",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Highest\"",
                  "expectedOutput": "Highest",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"Lowest\"",
                  "expectedOutput": "Lowest",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use foreach to iterate and calculate. Track highest/lowest with if statements. Use .Sort() to sort list. Use .Contains() to check if value exists. Cast to double for average: (double)total / count."
                },
                {
                  "level": 2,
                  "text": "Modifying during foreach: Can't add/remove items while foreaching! foreach (var x in list) { list.Remove(x); } crashes! Use regular for loop to modify."
                },
                {
                  "level": 3,
                  "text": "No index in foreach: foreach doesn't give you position. If you need index, use for loop: for (int i = 0; i < list.Count; i++)."
                },
                {
                  "level": 4,
                  "text": "Count vs Length: Lists use .Count (no parentheses!). Arrays use .Length (no parentheses!). Both are properties, not methods."
                },
                {
                  "level": 5,
                  "text": "Array.Sort vs list.Sort: Arrays need Array.Sort(array). Lists use array.Sort(). Different syntax for same operation!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Modifying during foreach",
                  "consequence": "Can't add/remove items while foreaching! foreach (var x in list) { list.Remove(x); } crashes! Use regular for loop to modify.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "No index in foreach",
                  "consequence": "foreach doesn't give you position. If you need index, use for loop: for (int i = 0; i < list.Count; i++).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Count vs Length",
                  "consequence": "Lists use .Count (no parentheses!). Arrays use .Length (no parentheses!). Both are properties, not methods.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Array.Sort vs list.Sort",
                  "consequence": "Arrays need Array.Sort(array). Lists use array.Sort(). Different syntax for same operation!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        },
        {
          "id": "lesson-05-05",
          "title": "Collection Expressions (C# 12)",
          "moduleId": "module-05",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "beginner",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Remember how creating collections used to be confusing? Arrays use { }, Lists need new List<T>(), and each has different syntax. It's like every store having different payment systems!\n\nC# 12 introduces COLLECTION EXPRESSIONS - one universal syntax for ALL collections! Think of it like a universal remote that works with any TV.\n\nBefore: Different syntax everywhere!\n- int[] arr = new int[] { 1, 2, 3 };\n- List<int> list = new List<int> { 1, 2, 3 };\n- Span<int> span = stackalloc int[] { 1, 2, 3 };\n\nAfter: One syntax to rule them all!\n- int[] arr = [1, 2, 3];\n- List<int> list = [1, 2, 3];\n- Span<int> span = [1, 2, 3];\n\nThe square brackets [ ] work for arrays, lists, spans, and more! Plus you get the SPREAD operator (..) to combine collections!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// OLD WAY - verbose and inconsistent\nint[] oldArray = new int[] { 1, 2, 3, 4, 5 };\nList<int> oldList = new List<int> { 1, 2, 3, 4, 5 };\n\n// NEW WAY - Collection Expressions (C# 12)!\nint[] numbers = [1, 2, 3, 4, 5];\nList<int> scores = [95, 87, 92, 78, 88];\nstring[] names = [\"Alice\", \"Bob\", \"Charlie\"];\n\n// Empty collections\nint[] empty = [];\nList<string> emptyList = [];\n\n// SPREAD OPERATOR - combine collections!\nint[] first = [1, 2, 3];\nint[] second = [4, 5, 6];\nint[] combined = [..first, ..second];  // [1, 2, 3, 4, 5, 6]\n\n// Mix values and spreads\nint[] withExtra = [0, ..first, 4, 5];  // [0, 1, 2, 3, 4, 5]\n\n// Works with method calls too!\nvoid PrintNumbers(int[] nums)\n{\n    foreach (var n in nums)\n        Console.WriteLine(n);\n}\n\nPrintNumbers([10, 20, 30]);  // Pass inline!\n\n// Great for building collections conditionally\nint bonus = 100;\nList<int> allScores = [..scores, bonus];  // Add bonus to end\nConsole.WriteLine(string.Join(\", \", allScores));\n\n// Works with Span<T> for high-performance code\nSpan<int> span = [1, 2, 3, 4, 5];\nReadOnlySpan<char> chars = ['H', 'e', 'l', 'l', 'o'];",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`[1, 2, 3]`**: Square brackets with comma-separated values create a collection. The target type (int[], List<int>, etc.) determines what's created!\n\n**`[]`**: Empty brackets create an empty collection. Much cleaner than new List<int>() or Array.Empty<int>()!\n\n**`[..existing, newValue]`**: The SPREAD operator '..' expands a collection inline. Perfect for combining collections or adding elements.\n\n**`Target-typed`**: C# looks at what you're assigning to and creates the right type. 'int[] x = [1,2,3]' creates array, 'List<int> x = [1,2,3]' creates List!\n\n**`Inline passing`**: You can pass collections directly to methods: DoSomething([1, 2, 3]) - no need to declare a variable first!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-05-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a playlist manager using collection expressions!\n\n1. Create a string[] 'rockSongs' with 3 rock songs using [ ]\n2. Create a string[] 'popSongs' with 3 pop songs using [ ]\n3. Create a combined 'allSongs' using spread operator to merge both\n4. Add 'Bonus Track' at the end of allSongs\n5. Create an empty List<string> 'favorites' using [ ]\n6. Display all songs using foreach",
              "starterCode": "// Create rock songs array\n\n// Create pop songs array\n\n// Combine all songs with spread and add bonus\n\n// Create empty favorites list\n\n// Display all songs",
              "solution": "// Create rock songs array\nstring[] rockSongs = [\"Bohemian Rhapsody\", \"Stairway to Heaven\", \"Back in Black\"];\n\n// Create pop songs array\nstring[] popSongs = [\"Billie Jean\", \"Like a Prayer\", \"Shake It Off\"];\n\n// Combine all songs with spread and add bonus\nstring[] allSongs = [..rockSongs, ..popSongs, \"Bonus Track\"];\n\n// Create empty favorites list\nList<string> favorites = [];\n\n// Display all songs\nConsole.WriteLine(\"All Songs:\");\nforeach (string song in allSongs)\n{\n    Console.WriteLine(\"  - \" + song);\n}\n\nConsole.WriteLine($\"Total: {allSongs.Length} songs\");\nConsole.WriteLine($\"Favorites: {favorites.Count} songs\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain 'All Songs'",
                  "expectedOutput": "All Songs",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain 'Bonus Track'",
                  "expectedOutput": "Bonus Track",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain 'Total'",
                  "expectedOutput": "Total",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use square brackets for collections: string[] songs = [\"Song1\", \"Song2\"]. Use .. for spreading: [..array1, ..array2]."
                },
                {
                  "level": 2,
                  "text": "Empty collections use []: List<string> empty = []. The type is determined by what you assign to!"
                },
                {
                  "level": 3,
                  "text": "You can mix spread and values: [..existing, \"New Item\"] adds to the end of the spread collection."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using { } instead of [ ]",
                  "consequence": "Collection expressions use SQUARE brackets [ ], not curly braces { }. This is a new syntax in C# 12!",
                  "correction": "int[] nums = [1, 2, 3]; NOT int[] nums = {1, 2, 3};"
                },
                {
                  "mistake": "Forgetting .. in spread operator",
                  "consequence": "To spread a collection, you need two dots: [..array]. Single dot or no dot treats it as a single element.",
                  "correction": "[..first, ..second] to combine collections"
                },
                {
                  "mistake": "Using spread without target type",
                  "consequence": "Collection expressions need a target type. 'var x = [1,2,3]' may not compile - use explicit type like 'int[] x = [1,2,3]'.",
                  "correction": "Always specify the collection type or use in context where type is clear."
                }
              ],
              "difficulty": "beginner"
            }
          ]
        }
      ]
    },
    {
      "id": "module-06",
      "title": "Methods and Functions",
      "description": "Create reusable code with methods, parameters, return values, method overloading, and scope.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-06-01",
          "title": "Why Object-Oriented Programming?",
          "moduleId": "module-06",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine building 100 houses. Would you redesign each house from scratch? NO! You'd create a BLUEPRINT and build all houses from that blueprint!\n\nThat's Object-Oriented Programming (OOP)! Instead of writing scattered variables and functions, you create BLUEPRINTS (called CLASSES) that define how things work. Then you build actual OBJECTS from those blueprints.\n\nWithout OOP:\nstring player1Name = 'Alice';\nint player1Score = 100;\nint player1Health = 80;\nstring player2Name = 'Bob';\nint player2Score = 150;\nint player2Health = 60;\n...(100 players = 300 variables!)\n\nWith OOP:\nCreate a Player blueprint once.\nPlayer alice = new Player('Alice', 100, 80);\nPlayer bob = new Player('Bob', 150, 60);\n\nOOP makes code ORGANIZED, REUSABLE, and SCALABLE. It's how professional software is built!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// WITHOUT OOP - messy!\nstring playerName = \"Alice\";\nint playerScore = 100;\nint playerHealth = 80;\n\nvoid DisplayPlayer()\n{\n    Console.WriteLine(playerName + \": \" + playerScore + \" points, \" + playerHealth + \" HP\");\n}\n\n// WITH OOP - clean and organized!\nclass Player\n{\n    public string Name;\n    public int Score;\n    public int Health;\n    \n    public void Display()\n    {\n        Console.WriteLine(Name + \": \" + Score + \" points, \" + Health + \" HP\");\n    }\n}\n\n// Creating objects from the class\nPlayer alice = new Player();\nalice.Name = \"Alice\";\nalice.Score = 100;\nalice.Health = 80;\nalice.Display();\n\nPlayer bob = new Player();\nbob.Name = \"Bob\";\nbob.Score = 150;\nbob.Health = 60;\nbob.Display();",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`class ClassName`**: Defines a blueprint. By convention, class names use PascalCase (first letter capitalized). This is the template!\n\n**`public string Name;`**: A FIELD - data stored in the class. 'public' means accessible from outside. Each object gets its OWN copy of this data!\n\n**`new Player()`**: Creates an OBJECT (instance) from the class blueprint. 'new' allocates memory and builds the object. This is called INSTANTIATION.\n\n**`object.Field`**: Dot notation accesses an object's data or methods. alice.Name gets Alice's name, bob.Name gets Bob's - they're separate!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create your first class!\n\n1. Create a class called 'Car' with public fields:\n   - string Brand\n   - string Model\n   - int Year\n2. Create two Car objects:\n   - One for a Toyota Camry from 2020\n   - One for a Honda Civic from 2019\n3. Display both cars in format: '[Brand] [Model] ([Year])'\n\nThis is your first step into OOP!",
              "starterCode": "// Create your Car class here\n\n// Create two Car objects and display them",
              "solution": "// Create your Car class here\nclass Car\n{\n    public string Brand;\n    public string Model;\n    public int Year;\n}\n\n// Create two Car objects and display them\nCar car1 = new Car();\ncar1.Brand = \"Toyota\";\ncar1.Model = \"Camry\";\ncar1.Year = 2020;\n\nCar car2 = new Car();\ncar2.Brand = \"Honda\";\ncar2.Model = \"Civic\";\ncar2.Year = 2019;\n\nConsole.WriteLine(car1.Brand + \" \" + car1.Model + \" (\" + car1.Year + \")\");\nConsole.WriteLine(car2.Brand + \" \" + car2.Model + \" (\" + car2.Year + \")\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Toyota\"",
                  "expectedOutput": "Toyota",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Honda\"",
                  "expectedOutput": "Honda",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Define class: class Car { public string Brand; ... }. Create object: Car c = new Car(); Set fields: c.Brand = 'Toyota';"
                },
                {
                  "level": 2,
                  "text": "Forgetting 'new' keyword: Car c = Car(); is WRONG! Must be: Car c = new Car(); to create an object."
                },
                {
                  "level": 3,
                  "text": "Class vs Object confusion: The class is the BLUEPRINT. Objects are INSTANCES built from the blueprint. You can have many objects from one class!"
                },
                {
                  "level": 4,
                  "text": "Forgetting 'public': If you don't write 'public', fields are private by default and can't be accessed outside the class!"
                },
                {
                  "level": 5,
                  "text": "Capitalization: Class names should be PascalCase (Player, Car, not player, car). This is convention, not a requirement, but follow it!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'new' keyword",
                  "consequence": "Car c = Car(); is WRONG! Must be: Car c = new Car(); to create an object.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Class vs Object confusion",
                  "consequence": "The class is the BLUEPRINT. Objects are INSTANCES built from the blueprint. You can have many objects from one class!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting 'public'",
                  "consequence": "If you don't write 'public', fields are private by default and can't be accessed outside the class!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Capitalization",
                  "consequence": "Class names should be PascalCase (Player, Car, not player, car). This is convention, not a requirement, but follow it!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-02",
          "title": "Constructors (The Setup Crew)",
          "moduleId": "module-06",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "When you build a house, there's a crew that sets everything up FIRST - they install the foundation, connect the water, turn on the electricity. Only THEN is the house ready to use!\n\nA CONSTRUCTOR is that setup crew for your objects! It's a special method that runs automatically when you create an object with 'new'. It initializes the object with starting values.\n\nWithout constructor (tedious):\nPlayer p = new Player();\np.Name = 'Alice';\np.Score = 0;\np.Health = 100;\n\nWith constructor (one line!):\nPlayer p = new Player('Alice', 0, 100);\n\nConstructors make object creation EASIER and SAFER - you can't forget to set important values!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Player\n{\n    public string Name;\n    public int Score;\n    public int Health;\n    \n    // Constructor - same name as class, no return type!\n    public Player(string name, int score, int health)\n    {\n        Name = name;\n        Score = score;\n        Health = health;\n        Console.WriteLine(\"Player created: \" + Name);\n    }\n    \n    public void Display()\n    {\n        Console.WriteLine(Name + \": \" + Score + \" points, \" + Health + \" HP\");\n    }\n}\n\n// Creating objects with constructor\nPlayer alice = new Player(\"Alice\", 100, 80);\nPlayer bob = new Player(\"Bob\", 150, 60);\n\nalice.Display();\nbob.Display();",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public Player(...)`**: Constructor has the SAME NAME as the class and NO RETURN TYPE (not even void!). This is how C# knows it's a constructor.\n\n**`Parameters`**: Constructors can take parameters to initialize the object. When you write 'new Player('Alice', 100)', you're calling the constructor with those values!\n\n**`Name = name;`**: Inside the constructor, set the class fields using the parameters. 'Name' (field) = 'name' (parameter). Common pattern!\n\n**`Auto-runs on 'new'`**: You don't 'call' the constructor explicitly. It runs automatically when you use 'new Player(...)'. It's the first code that executes!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Enhance your Car class with a constructor!\n\n1. Create a Car class with fields: Brand, Model, Year\n2. Add a constructor that takes all three values as parameters\n3. In the constructor, set the fields AND print 'Car created: [Brand] [Model]'\n4. Create two Car objects using the constructor in ONE line each\n5. Display both cars\n\nMuch cleaner than setting fields one by one!",
              "starterCode": "// Car class with constructor\nclass Car\n{\n    public string Brand;\n    public string Model;\n    public int Year;\n    \n    // Add constructor here\n}\n\n// Create cars using constructor\n\n// Display cars",
              "solution": "// Car class with constructor\nclass Car\n{\n    public string Brand;\n    public string Model;\n    public int Year;\n    \n    // Constructor\n    public Car(string brand, string model, int year)\n    {\n        Brand = brand;\n        Model = model;\n        Year = year;\n        Console.WriteLine(\"Car created: \" + Brand + \" \" + Model);\n    }\n}\n\n// Create cars using constructor\nCar car1 = new Car(\"Toyota\", \"Camry\", 2020);\nCar car2 = new Car(\"Honda\", \"Civic\", 2019);\n\n// Display cars\nConsole.WriteLine(car1.Brand + \" \" + car1.Model + \" (\" + car1.Year + \")\");\nConsole.WriteLine(car2.Brand + \" \" + car2.Model + \" (\" + car2.Year + \")\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Car created\"",
                  "expectedOutput": "Car created",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Toyota\"",
                  "expectedOutput": "Toyota",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Constructor: public ClassName(parameters) { set fields }. Same name as class, no return type! Call with: new ClassName(arguments);"
                },
                {
                  "level": 2,
                  "text": "Adding return type: public void Car(...) is WRONG! Constructors have NO return type, not even void! Just: public Car(...)"
                },
                {
                  "level": 3,
                  "text": "Wrong name: The constructor MUST have the exact same name as the class! public Player(...) for class Player."
                },
                {
                  "level": 4,
                  "text": "Forgetting 'new': You still need 'new' when using a constructor! Player p = Player('Alice') is wrong - must be new Player('Alice')."
                },
                {
                  "level": 5,
                  "text": "Parameter naming: Common to use lowercase parameter names (string name) and assign to PascalCase fields (Name = name). Don't confuse them!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Adding return type",
                  "consequence": "public void Car(...) is WRONG! Constructors have NO return type, not even void! Just: public Car(...)",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong name",
                  "consequence": "The constructor MUST have the exact same name as the class! public Player(...) for class Player.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting 'new'",
                  "consequence": "You still need 'new' when using a constructor! Player p = Player('Alice') is wrong - must be new Player('Alice').",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Parameter naming",
                  "consequence": "Common to use lowercase parameter names (string name) and assign to PascalCase fields (Name = name). Don't confuse them!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-03",
          "title": "Properties (Controlled Access to Data)",
          "moduleId": "module-06",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a bank vault. You can't just walk in and grab money - you need to go through a teller who validates your request, checks your balance, and controls access!\n\nPROPERTIES are like that teller. Instead of exposing fields directly (public string Name;), you use properties with get and set to control HOW data is accessed and modified.\n\nWhy? VALIDATION and SECURITY!\n• Check if age is valid (0-120) before storing\n• Make data read-only (get only, no set)\n• Calculate values on the fly (FullName = FirstName + LastName)\n\nProperties look like fields when you use them, but they're actually methods in disguise! This is called ENCAPSULATION - hiding implementation details and controlling access."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Person\n{\n    private int _age;  // Private field (backing field)\n\n    // Property with validation\n    public int Age\n    {\n        get { return _age; }\n        set\n        {\n            if (value >= 0 && value <= 120)\n                _age = value;\n            else\n                Console.WriteLine(\"Invalid age!\");\n        }\n    }\n\n    // Auto-implemented property (no backing field needed)\n    public string Name { get; set; }\n\n    // Read-only property (get only)\n    public string Status\n    {\n        get\n        {\n            return Age >= 18 ? \"Adult\" : \"Minor\";\n        }\n    }\n\n    // Shortened syntax (expression-bodied)\n    public string Category => Age >= 65 ? \"Senior\" : \"Regular\";\n}\n\n// Usage\nPerson person = new Person();\nperson.Name = \"Alice\";  // Looks like a field!\nperson.Age = 25;        // But validation happens\nperson.Age = 200;       // Invalid! Rejected\nConsole.WriteLine(person.Status);  // Calculated on the fly",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`get { return _age; }`**: The 'get' accessor returns the value. Called when you READ the property (Console.WriteLine(person.Age)).\n\n**`set { _age = value; }`**: The 'set' accessor assigns the value. 'value' is a special keyword containing what the user is trying to assign. Add validation here!\n\n**`public string Name { get; set; }`**: AUTO-IMPLEMENTED property. C# creates a hidden backing field for you. Use when you don't need validation.\n\n**`public string Status { get; }`**: READ-ONLY property (no set). Can't be changed from outside. Great for calculated values or data that shouldn't be modified.\n\n**`=> expression`**: Expression-bodied property (C# 6+). Shorthand for get-only properties. 'public int Double => value * 2;' is the same as 'get { return value * 2; }'"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a BankAccount class with controlled properties!\n\n1. Private field: decimal _balance (starts at 0)\n2. Property 'Balance' with:\n   - get: returns _balance\n   - set: only allows positive values, otherwise print error\n3. Auto-property: string AccountHolder { get; set; }\n4. Read-only property: bool IsOverdrawn (returns true if balance < 0)\n5. Create an account, try to set negative balance, display status",
              "starterCode": "class BankAccount\n{\n    private decimal _balance = 0;\n    \n    // Add Balance property with validation\n    \n    // Add AccountHolder auto-property\n    \n    // Add IsOverdrawn read-only property\n}\n\n// Create account and test\nBankAccount account = new BankAccount();\naccount.AccountHolder = \"Alice\";\n// Try setting balance to 100, then try -50\n// Display balance and IsOverdrawn status",
              "solution": "class BankAccount\n{\n    private decimal _balance = 0;\n    \n    public decimal Balance\n    {\n        get { return _balance; }\n        set\n        {\n            if (value >= 0)\n                _balance = value;\n            else\n                Console.WriteLine(\"Balance cannot be negative!\");\n        }\n    }\n    \n    public string AccountHolder { get; set; }\n    \n    public bool IsOverdrawn => _balance < 0;\n}\n\nBankAccount account = new BankAccount();\naccount.AccountHolder = \"Alice\";\naccount.Balance = 100;\nConsole.WriteLine(\"Balance: $\" + account.Balance);\n\naccount.Balance = -50;  // Rejected!\nConsole.WriteLine(\"Balance: $\" + account.Balance);\nConsole.WriteLine(\"Overdrawn: \" + account.IsOverdrawn);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Balance\"",
                  "expectedOutput": "Balance",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Alice\"",
                  "expectedOutput": "Alice",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Property structure: public Type PropertyName { get { return field; } set { if (valid) field = value; } }. Use => for read-only calculated properties."
                },
                {
                  "level": 2,
                  "text": "Forgetting private backing field: If you use get/set with logic, you need a private field like _age to store the actual value!"
                },
                {
                  "level": 3,
                  "text": "Naming confusion: Convention is _camelCase for private fields, PascalCase for properties. _age (field) and Age (property)."
                },
                {
                  "level": 4,
                  "text": "Auto-property when you need validation: { get; set; } doesn't let you add validation! Use full get/set syntax when you need to check values."
                },
                {
                  "level": 5,
                  "text": "Using 'this.value' in set: The parameter is just 'value', not 'this.value'. It's a special keyword in the set accessor."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting private backing field",
                  "consequence": "If you use get/set with logic, you need a private field like _age to store the actual value!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Naming confusion",
                  "consequence": "Convention is _camelCase for private fields, PascalCase for properties. _age (field) and Age (property).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Auto-property when you need validation",
                  "consequence": "{ get; set; } doesn't let you add validation! Use full get/set syntax when you need to check values.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using 'this.value' in set",
                  "consequence": "The parameter is just 'value', not 'this.value'. It's a special keyword in the set accessor.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-04",
          "title": "Methods (What Your Objects Can Do)",
          "moduleId": "module-06",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a TV remote. Each button makes the TV DO something: change channel, adjust volume, power on/off. You don't know HOW it works inside - you just press the button!\n\nMETHODS are like those buttons - they make objects DO things. Properties hold data (what the object IS), methods define behavior (what the object CAN DO).\n\nMethods can:\n• Take INPUT (parameters) - 'Add these two numbers'\n• Produce OUTPUT (return value) - 'Here's the result: 7'\n• Modify the object's state - 'Increase my score by 10'\n• Just perform actions (void) - 'Print this message'\n\nThink: A Calculator object has Add(), Subtract(), Multiply() methods. A Player object has TakeDamage(), Heal(), Attack() methods. Methods bring objects to LIFE!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Calculator\n{\n    // Method with parameters and return value\n    public int Add(int a, int b)\n    {\n        return a + b;\n    }\n    \n    // Method with no return (void)\n    public void DisplayResult(int result)\n    {\n        Console.WriteLine(\"Result: \" + result);\n    }\n    \n    // Method with multiple parameters\n    public double Average(double x, double y, double z)\n    {\n        return (x + y + z) / 3;\n    }\n}\n\nclass Player\n{\n    public string Name;\n    public int Health = 100;\n    public int Score = 0;\n    \n    // Method that modifies object state\n    public void TakeDamage(int damage)\n    {\n        Health -= damage;\n        Console.WriteLine(Name + \" took \" + damage + \" damage! Health: \" + Health);\n    }\n    \n    // Method with return value\n    public bool IsAlive()\n    {\n        return Health > 0;\n    }\n}\n\n// Usage\nCalculator calc = new Calculator();\nint sum = calc.Add(5, 3);\ncalc.DisplayResult(sum);\n\nPlayer player = new Player();\nplayer.Name = \"Hero\";\nplayer.TakeDamage(30);\nif (player.IsAlive())\n    Console.WriteLine(\"Still fighting!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public int Add(int a, int b)`**: Method signature: access modifier (public), return type (int), name (Add), parameters (int a, int b). This method takes two ints and returns an int.\n\n**`return a + b;`**: The 'return' keyword sends a value back to the caller. The type MUST match the method's return type (int here). return exits the method immediately!\n\n**`public void DisplayResult(int result)`**: 'void' means 'returns nothing'. Use void for methods that DO something but don't need to send a value back. No return statement needed (or use 'return;' to exit early).\n\n**`Method overloading`**: You can have multiple methods with the SAME NAME but DIFFERENT parameters: Add(int, int), Add(double, double), Add(int, int, int). C# picks the right one based on arguments!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a Game character class with action methods!\n\n1. Class 'Character' with fields: string Name, int Health = 100, int Mana = 50\n2. Method 'Attack' (returns int): returns random damage 10-20\n3. Method 'Heal' (void, takes int amount): adds amount to Health (max 100)\n4. Method 'CastSpell' (returns bool): if Mana >= 20, reduce Mana by 20 and return true, else return false\n5. Create a character and call all methods, display results",
              "starterCode": "class Character\n{\n    public string Name;\n    public int Health = 100;\n    public int Mana = 50;\n    \n    // Add Attack method (returns int damage 10-20)\n    // Hint: Use new Random().Next(10, 21) for random 10-20\n    \n    // Add Heal method (void, takes int amount)\n    \n    // Add CastSpell method (returns bool)\n}\n\n// Create character and test methods\nCharacter hero = new Character();\nhero.Name = \"Warrior\";\n// Call Attack, Heal(20), CastSpell\n// Display results",
              "solution": "class Character\n{\n    public string Name;\n    public int Health = 100;\n    public int Mana = 50;\n    \n    public int Attack()\n    {\n        int damage = new Random().Next(10, 21);\n        Console.WriteLine(Name + \" attacks for \" + damage + \" damage!\");\n        return damage;\n    }\n    \n    public void Heal(int amount)\n    {\n        Health += amount;\n        if (Health > 100) Health = 100;\n        Console.WriteLine(Name + \" healed for \" + amount + \". Health: \" + Health);\n    }\n    \n    public bool CastSpell()\n    {\n        if (Mana >= 20)\n        {\n            Mana -= 20;\n            Console.WriteLine(Name + \" casts spell! Mana: \" + Mana);\n            return true;\n        }\n        Console.WriteLine(\"Not enough mana!\");\n        return false;\n    }\n}\n\nCharacter hero = new Character();\nhero.Name = \"Warrior\";\nint dmg = hero.Attack();\nhero.Heal(20);\nbool cast = hero.CastSpell();\nConsole.WriteLine(\"Spell cast success: \" + cast);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"attacks\"",
                  "expectedOutput": "attacks",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"healed\"",
                  "expectedOutput": "healed",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"spell\"",
                  "expectedOutput": "spell",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Method structure: public ReturnType MethodName(parameters) { code; return value; }. Use void for no return. Methods can access and modify the object's fields!"
                },
                {
                  "level": 2,
                  "text": "Forgetting 'return': If method returns a value (not void), you MUST return something! 'public int Add(int a, int b) { a + b; }' is WRONG - needs 'return a + b;'"
                },
                {
                  "level": 3,
                  "text": "Calling methods without parentheses: player.Attack is WRONG! Must be player.Attack() - parentheses are REQUIRED even with no parameters!"
                },
                {
                  "level": 4,
                  "text": "Wrong return type: If method returns int, you can't return a string! The return value type MUST match the method signature."
                },
                {
                  "level": 5,
                  "text": "Not storing return values: int result = calc.Add(5, 3); stores the result. calc.Add(5, 3); without storing throws away the return value!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'return'",
                  "consequence": "If method returns a value (not void), you MUST return something! 'public int Add(int a, int b) { a + b; }' is WRONG - needs 'return a + b;'",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Calling methods without parentheses",
                  "consequence": "player.Attack is WRONG! Must be player.Attack() - parentheses are REQUIRED even with no parameters!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong return type",
                  "consequence": "If method returns int, you can't return a string! The return value type MUST match the method signature.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not storing return values",
                  "consequence": "int result = calc.Add(5, 3); stores the result. calc.Add(5, 3); without storing throws away the return value!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-05",
          "title": "The 'this' Keyword (Talking About Yourself)",
          "moduleId": "module-06",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "When you say 'my name', 'my score', 'my health', you're referring to YOUR OWN properties. In C#, objects use 'this' to refer to themselves!\n\nImagine a class introducing itself: 'Hi, MY name is Alice, and MY score is 100.' In code, that's: 'Hi, THIS.name is Alice, and THIS.score is 100.'\n\nWhen do you need 'this'?\n\n1. **Disambiguating**: When a parameter has the same name as a field\n   • Constructor: Player(string name) { this.name = name; }\n   • 'this.name' = field, 'name' = parameter\n\n2. **Passing yourself**: Registering with a manager\n   • GameManager.RegisterPlayer(this); // 'Register ME!'\n\n3. **Clarity**: Making it explicit which 'name' you mean\n\n'this' means 'the current instance' - the specific object this code is running inside."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Player\n{\n    private string name;\n    private int score;\n    \n    // Without 'this' - confusing!\n    public Player(string n, int s)\n    {\n        name = n;  // Works, but parameter names are weird\n        score = s;\n    }\n    \n    // With 'this' - much clearer!\n    public Player(string name, int score)\n    {\n        this.name = name;   // this.name = field, name = parameter\n        this.score = score;\n    }\n    \n    public void DisplayInfo()\n    {\n        // 'this' is optional here but makes it clear\n        Console.WriteLine(\"Name: \" + this.name);\n        Console.WriteLine(\"Score: \" + this.score);\n    }\n    \n    public Player Clone()\n    {\n        // Return a new player with same values\n        return new Player(this.name, this.score);\n    }\n    \n    public void CompareWith(Player other)\n    {\n        if (this.score > other.score)\n            Console.WriteLine(this.name + \" wins!\");\n        else\n            Console.WriteLine(other.name + \" wins!\");\n    }\n}\n\n// Usage\nPlayer p1 = new Player(\"Alice\", 100);\nPlayer p2 = new Player(\"Bob\", 150);\np1.CompareWith(p2);  // Inside CompareWith, 'this' refers to p1",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`this.fieldName`**: 'this' refers to the current instance - the object this code is running in. 'this.name' means 'my name field'.\n\n**`this.name = name;`**: Left side (this.name) = the field. Right side (name) = the parameter. Use 'this' to distinguish when names collide!\n\n**`method(this)`**: Passing 'this' as an argument passes THE CURRENT OBJECT to another method. Like saying 'here, take ME as a parameter'.\n\n**`When 'this' is optional`**: If no naming conflict, 'this' is optional: 'Console.WriteLine(name)' and 'Console.WriteLine(this.name)' are identical. But 'this' adds clarity!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create an Employee class that uses 'this' properly!\n\n1. Private fields: string name, decimal salary\n2. Constructor taking string name, decimal salary - use 'this' to assign\n3. Method 'GiveRaise(decimal amount)' - increases this.salary by amount\n4. Method 'CompareSalary(Employee other)' - returns true if this.salary > other.salary\n5. Method 'Display()' - prints this employee's info\n6. Create two employees, give one a raise, compare salaries",
              "starterCode": "class Employee\n{\n    private string name;\n    private decimal salary;\n    \n    // Constructor using 'this'\n    public Employee(string name, decimal salary)\n    {\n        // Use 'this' to assign fields\n    }\n    \n    // Add GiveRaise method\n    \n    // Add CompareSalary method\n    \n    // Add Display method\n}\n\n// Create employees and test\nEmployee emp1 = new Employee(\"Alice\", 50000);\nEmployee emp2 = new Employee(\"Bob\", 60000);\n// Give emp1 a raise, compare, display",
              "solution": "class Employee\n{\n    private string name;\n    private decimal salary;\n    \n    public Employee(string name, decimal salary)\n    {\n        this.name = name;\n        this.salary = salary;\n    }\n    \n    public void GiveRaise(decimal amount)\n    {\n        this.salary += amount;\n        Console.WriteLine(this.name + \" got a raise! New salary: $\" + this.salary);\n    }\n    \n    public bool CompareSalary(Employee other)\n    {\n        return this.salary > other.salary;\n    }\n    \n    public void Display()\n    {\n        Console.WriteLine(this.name + \": $\" + this.salary);\n    }\n}\n\nEmployee emp1 = new Employee(\"Alice\", 50000);\nEmployee emp2 = new Employee(\"Bob\", 60000);\nemp1.Display();\nemp2.Display();\nemp1.GiveRaise(15000);\nif (emp1.CompareSalary(emp2))\n    Console.WriteLine(\"Alice earns more!\");\nelse\n    Console.WriteLine(\"Bob earns more!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Alice\"",
                  "expectedOutput": "Alice",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Bob\"",
                  "expectedOutput": "Bob",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"salary\"",
                  "expectedOutput": "salary",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "In constructor: this.fieldName = parameterName; In methods: use this.fieldName to access the object's data. Compare 'this' with 'other' parameter."
                },
                {
                  "level": 2,
                  "text": "Forgetting 'this' in constructors: If parameter and field have same name, you MUST use this.field = parameter; Without 'this', you're assigning parameter to itself!"
                },
                {
                  "level": 3,
                  "text": "Using 'this' outside instance methods: You can't use 'this' in static methods! 'this' refers to the current instance, static methods don't belong to an instance."
                },
                {
                  "level": 4,
                  "text": "Overusing 'this': While clear, using this.field everywhere can be verbose. Use it when needed (disambiguation) or for clarity, but it's optional when no conflict."
                },
                {
                  "level": 5,
                  "text": "'this' in static context: 'public static void Method() { this.field = 5; }' is ERROR! Static methods are class-level, no 'this' instance exists!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'this' in constructors",
                  "consequence": "If parameter and field have same name, you MUST use this.field = parameter; Without 'this', you're assigning parameter to itself!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using 'this' outside instance methods",
                  "consequence": "You can't use 'this' in static methods! 'this' refers to the current instance, static methods don't belong to an instance.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Overusing 'this'",
                  "consequence": "While clear, using this.field everywhere can be verbose. Use it when needed (disambiguation) or for clarity, but it's optional when no conflict.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "'this' in static context",
                  "consequence": "'public static void Method() { this.field = 5; }' is ERROR! Static methods are class-level, no 'this' instance exists!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-06",
          "title": "Access Modifiers (public, private, protected)",
          "moduleId": "module-06",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Think of your house with different rooms:\n\n• **PUBLIC** = Living room: Anyone can enter, guests welcome\n• **PRIVATE** = Your bedroom: Only YOU can enter\n• **PROTECTED** = Family room: Only family members (and you) allowed\n\nAccess modifiers control WHO can access your class members (fields, properties, methods).\n\nWhy restrict access? SECURITY and ORGANIZATION!\n• Keep internal implementation private (users don't need to know HOW it works)\n• Expose only what's necessary through public methods\n• Prevent accidental modification of important data\n\nThis is **ENCAPSULATION** - one of OOP's core principles. Hide complexity, expose simplicity!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class BankAccount\n{\n    // PRIVATE: Only this class can access\n    private decimal balance;\n    private string accountNumber;\n    \n    // PUBLIC: Anyone can access\n    public string AccountHolder;\n    \n    // PUBLIC constructor\n    public BankAccount(string holder, decimal initialBalance)\n    {\n        AccountHolder = holder;\n        balance = initialBalance;  // Can access private field within class\n        accountNumber = GenerateAccountNumber();  // Calling private method\n    }\n    \n    // PUBLIC method - users can call this\n    public void Deposit(decimal amount)\n    {\n        if (amount > 0)\n            balance += amount;\n    }\n    \n    // PUBLIC method exposing private data safely\n    public decimal GetBalance()\n    {\n        return balance;  // OK to access private field within class\n    }\n    \n    // PRIVATE method - only internal use\n    private string GenerateAccountNumber()\n    {\n        return \"ACC\" + new Random().Next(1000, 9999);\n    }\n}\n\n// Usage\nBankAccount account = new BankAccount(\"Alice\", 1000);\naccount.Deposit(500);  // OK - public method\nConsole.WriteLine(account.GetBalance());  // OK - public method\n// account.balance = 999999;  // ERROR! balance is private\n// account.GenerateAccountNumber();  // ERROR! private method",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`private`**: Only accessible within the same class. Fields should almost ALWAYS be private! Access them through public properties or methods.\n\n**`public`**: Accessible from anywhere. Use for methods and properties that form your class's PUBLIC INTERFACE - what users interact with.\n\n**`protected`**: Accessible within the class AND derived classes (inheritance - next module!). Useful for base classes that child classes need to access.\n\n**`Default (no modifier)`**: In C#, if you don't specify, it defaults to PRIVATE for class members. Always specify explicitly for clarity!\n\n**`Encapsulation best practice`**: PRIVATE fields + PUBLIC properties/methods = encapsulation! Control how data is accessed and modified. Never expose fields directly!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a secure User class using access modifiers!\n\n1. PRIVATE fields: string password, int loginAttempts\n2. PUBLIC properties: string Username { get; set; }\n3. PUBLIC constructor: User(string username, string password)\n4. PUBLIC method Login(string pwd): checks if pwd matches password\n   - If match: reset loginAttempts to 0, return true\n   - If wrong: increment loginAttempts, return false\n5. PRIVATE method IsLockedOut(): returns true if loginAttempts >= 3\n6. Test with correct and incorrect passwords",
              "starterCode": "class User\n{\n    // Private fields\n    \n    // Public property\n    \n    // Public constructor\n    \n    // Public Login method\n    \n    // Private IsLockedOut method\n}\n\n// Create user and test login\nUser user = new User(\"alice\", \"secret123\");\n// Try wrong password twice, then correct password\n// Try accessing private fields (should error)",
              "solution": "class User\n{\n    private string password;\n    private int loginAttempts = 0;\n    \n    public string Username { get; set; }\n    \n    public User(string username, string password)\n    {\n        this.Username = username;\n        this.password = password;\n    }\n    \n    public bool Login(string pwd)\n    {\n        if (IsLockedOut())\n        {\n            Console.WriteLine(\"Account locked! Too many attempts.\");\n            return false;\n        }\n        \n        if (pwd == password)\n        {\n            loginAttempts = 0;\n            Console.WriteLine(\"Login successful!\");\n            return true;\n        }\n        else\n        {\n            loginAttempts++;\n            Console.WriteLine(\"Wrong password! Attempts: \" + loginAttempts);\n            return false;\n        }\n    }\n    \n    private bool IsLockedOut()\n    {\n        return loginAttempts >= 3;\n    }\n}\n\nUser user = new User(\"alice\", \"secret123\");\nuser.Login(\"wrong\");\nuser.Login(\"wrong2\");\nuser.Login(\"secret123\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Login\"",
                  "expectedOutput": "Login",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"password\"",
                  "expectedOutput": "password",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Make sensitive data (password, loginAttempts) private. Provide public methods to interact with them safely. Private methods are internal helpers."
                },
                {
                  "level": 2,
                  "text": "Making everything public: Don't expose internal data! Use private for fields, public for methods/properties only. 'public string password' is BAD - anyone can change it!"
                },
                {
                  "level": 3,
                  "text": "Accessing private from outside: You can't do 'account.balance = 1000' if balance is private! That's the point - use public methods instead."
                },
                {
                  "level": 4,
                  "text": "Forgetting to specify: If you don't write 'public' or 'private', C# defaults to PRIVATE. Always specify explicitly for clarity!"
                },
                {
                  "level": 5,
                  "text": "Using protected too early: You'll learn about protected with inheritance. For now, use private (internal) and public (external interface) only."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Making everything public",
                  "consequence": "Don't expose internal data! Use private for fields, public for methods/properties only. 'public string password' is BAD - anyone can change it!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Accessing private from outside",
                  "consequence": "You can't do 'account.balance = 1000' if balance is private! That's the point - use public methods instead.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to specify",
                  "consequence": "If you don't write 'public' or 'private', C# defaults to PRIVATE. Always specify explicitly for clarity!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using protected too early",
                  "consequence": "You'll learn about protected with inheritance. For now, use private (internal) and public (external interface) only.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-07",
          "title": "Static vs Instance Members",
          "moduleId": "module-06",
          "order": 7,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a school:\n\n• **INSTANCE (each student)**: Each student has their OWN name, grade, age. John's grade is different from Mary's grade.\n\n• **STATIC (shared by all)**: The school bell rings for EVERYONE. The school's name is the SAME for all students. These are SHARED, not personal.\n\nIn C#:\n• **Instance members**: Each object has its own copy. player1.score is different from player2.score.\n• **Static members**: Shared by ALL instances of the class. ONE copy for the whole class.\n\nWhen to use static?\n• Counters: How many Player objects exist? Player.Count (shared)\n• Utility methods: Math.Sqrt(), Console.WriteLine() - don't need a specific object!\n• Constants: Math.PI - same for everyone\n\nAccess static members through the CLASS NAME (Player.Count), not an object (player1.Count won't work)!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Player\n{\n    // STATIC - shared by all players\n    public static int TotalPlayers = 0;\n    public static int MaxScore = 0;\n    \n    // INSTANCE - each player has their own\n    public string Name;\n    public int Score;\n    \n    public Player(string name)\n    {\n        Name = name;\n        Score = 0;\n        TotalPlayers++;  // Increment shared counter\n    }\n    \n    // INSTANCE method - works with specific player\n    public void AddPoints(int points)\n    {\n        Score += points;\n        \n        // Update static MaxScore if this player beat it\n        if (Score > MaxScore)\n            MaxScore = Score;\n    }\n    \n    // STATIC method - doesn't need a specific player\n    public static void DisplayStats()\n    {\n        Console.WriteLine(\"Total Players: \" + TotalPlayers);\n        Console.WriteLine(\"Highest Score: \" + MaxScore);\n    }\n}\n\n// Usage\nPlayer p1 = new Player(\"Alice\");\nPlayer p2 = new Player(\"Bob\");\n\n// Access static through class name\nConsole.WriteLine(\"Players: \" + Player.TotalPlayers);  // 2\n\np1.AddPoints(100);\np2.AddPoints(150);\n\n// Static method called through class name\nPlayer.DisplayStats();  // Total: 2, Max: 150\n\n// Each instance has own Score\nConsole.WriteLine(p1.Score);  // 100\nConsole.WriteLine(p2.Score);  // 150",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public static int Count`**: STATIC field - ONE copy shared by all instances. Access via ClassName.FieldName, not objectName.FieldName!\n\n**`public string Name`**: INSTANCE field (no 'static') - EACH object has its own copy. Access via objectName.FieldName.\n\n**`public static void Method()`**: STATIC method - called through class name: ClassName.Method(). Can only access static members! Can't use 'this' or instance fields.\n\n**`Player.TotalPlayers vs p1.Score`**: Static members use CLASS NAME (Player.TotalPlayers). Instance members use OBJECT (p1.Score). This is how you know which is which!\n\n**`Math.PI, Console.WriteLine`**: These are static! Math.PI (static field), Console.WriteLine (static method). You don't create Math or Console objects - you use the class directly!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-07-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a Vehicle counter system!\n\n1. Class 'Vehicle' with:\n   - STATIC field: int TotalVehicles = 0\n   - STATIC field: int MaxSpeed = 0\n   - INSTANCE fields: string Model, int Speed\n2. Constructor that increments TotalVehicles\n3. INSTANCE method Accelerate(int amount): increases Speed, updates static MaxSpeed if beaten\n4. STATIC method ShowStats(): displays TotalVehicles and MaxSpeed\n5. Create 3 vehicles, accelerate them, call ShowStats\n\nDemonstrate the difference between static (shared) and instance (individual)!",
              "starterCode": "class Vehicle\n{\n    // Static members (shared)\n    \n    // Instance members (per object)\n    \n    // Constructor\n    \n    // Instance method Accelerate\n    \n    // Static method ShowStats\n}\n\n// Create vehicles and test\nVehicle car1 = new Vehicle();\nVehicle car2 = new Vehicle();\nVehicle car3 = new Vehicle();\n// Set models, accelerate, show stats",
              "solution": "class Vehicle\n{\n    public static int TotalVehicles = 0;\n    public static int MaxSpeed = 0;\n    \n    public string Model;\n    public int Speed;\n    \n    public Vehicle(string model)\n    {\n        Model = model;\n        Speed = 0;\n        TotalVehicles++;\n    }\n    \n    public void Accelerate(int amount)\n    {\n        Speed += amount;\n        Console.WriteLine(Model + \" accelerated to \" + Speed + \" mph\");\n        \n        if (Speed > MaxSpeed)\n            MaxSpeed = Speed;\n    }\n    \n    public static void ShowStats()\n    {\n        Console.WriteLine(\"=== Vehicle Stats ===\");\n        Console.WriteLine(\"Total Vehicles: \" + TotalVehicles);\n        Console.WriteLine(\"Max Speed Reached: \" + MaxSpeed + \" mph\");\n    }\n}\n\nVehicle car1 = new Vehicle(\"Tesla\");\nVehicle car2 = new Vehicle(\"BMW\");\nVehicle car3 = new Vehicle(\"Audi\");\n\ncar1.Accelerate(80);\ncar2.Accelerate(120);\ncar3.Accelerate(95);\n\nVehicle.ShowStats();",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Total\"",
                  "expectedOutput": "Total",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Max Speed\"",
                  "expectedOutput": "Max Speed",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Static: use 'static' keyword, access via ClassName. Instance: no 'static', access via objectName. Static methods can't use 'this' or instance members!"
                },
                {
                  "level": 2,
                  "text": "Accessing static through instance: 'p1.TotalPlayers' might work but is WRONG! Always use ClassName.StaticMember for clarity: Player.TotalPlayers."
                },
                {
                  "level": 3,
                  "text": "Using instance members in static methods: Static methods can't access instance fields! 'public static void Method() { Console.WriteLine(Name); }' is ERROR if Name is instance field."
                },
                {
                  "level": 4,
                  "text": "Forgetting 'static' keyword: If you want a shared member, you MUST use 'static'. 'public int TotalPlayers' without 'static' means EACH object has its own TotalPlayers (not shared)!"
                },
                {
                  "level": 5,
                  "text": "When to use static: Use static for shared data (counters, constants) or utility methods (Math.Sqrt). Use instance for object-specific data (each player's score)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Accessing static through instance",
                  "consequence": "'p1.TotalPlayers' might work but is WRONG! Always use ClassName.StaticMember for clarity: Player.TotalPlayers.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using instance members in static methods",
                  "consequence": "Static methods can't access instance fields! 'public static void Method() { Console.WriteLine(Name); }' is ERROR if Name is instance field.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting 'static' keyword",
                  "consequence": "If you want a shared member, you MUST use 'static'. 'public int TotalPlayers' without 'static' means EACH object has its own TotalPlayers (not shared)!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "When to use static",
                  "consequence": "Use static for shared data (counters, constants) or utility methods (Math.Sqrt). Use instance for object-specific data (each player's score).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-06-08",
          "title": "Flexible Parameters with params Collections (C# 13)",
          "moduleId": "module-06",
          "order": 8,
          "estimatedMinutes": 12,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a pizza shop that accepts orders differently: 'I want pepperoni, mushrooms, olives' (listing items), or 'Here's my written list' (handing a paper), or 'Use my usual order' (referencing saved preferences). C# 13's enhanced params keyword works the same way - it accepts items inline, as collection expressions, or from existing collections!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "C# 13 extends params to work with any collection type, not just arrays. This gives you flexible calling patterns.",
              "code": "// C# 13: params works with IEnumerable<T>, Span<T>, and more!\nvoid PrintAll(params IEnumerable<string> items)\n{\n    foreach (var item in items)\n        Console.WriteLine(item);\n}\n\n// Three ways to call the same method:\nPrintAll(\"apple\", \"banana\", \"cherry\");     // Inline items\nPrintAll([\"one\", \"two\", \"three\"]);         // Collection expression\n\nvar myList = new List<string> { \"red\", \"green\", \"blue\" };\nPrintAll(myList);                           // Existing collection\n\n// Works with Span<T> for performance!\nvoid ProcessFast(params ReadOnlySpan<int> numbers)\n{\n    var sum = 0;\n    foreach (var n in numbers)\n        sum += n;\n    Console.WriteLine($\"Sum: {sum}\");\n}\n\nProcessFast(1, 2, 3, 4, 5);  // No allocation!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "**Before C# 13** - params only worked with arrays:\n`void Method(params string[] items)`\n\n**C# 13 Enhancement** - params works with:\n- `params IEnumerable<T>` - Any enumerable\n- `params ReadOnlySpan<T>` - Stack-allocated, zero-copy\n- `params IReadOnlyList<T>` - Indexed access\n- `params IReadOnlyCollection<T>` - With count\n\n**Key Benefits:**\n1. **Flexibility**: Callers can pass inline items, collection expressions, or existing collections\n2. **Performance**: Span<T> avoids heap allocations\n3. **Interoperability**: Works with any collection type the caller already has"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-06-08-challenge-01",
              "title": "Build a Flexible Logger",
              "description": "Create a logging method that accepts messages in multiple ways using C# 13 params.",
              "instructions": "1. Create a method `LogMessages` that takes `params IEnumerable<string> messages`\n2. Print each message with a timestamp prefix\n3. Test with inline items, collection expression, and an existing list",
              "starterCode": "// TODO: Create LogMessages method with params IEnumerable<string>\n\n// Test all three calling patterns:\n// 1. Inline: LogMessages(\"Starting\", \"Processing\", \"Done\");\n// 2. Collection expression: LogMessages([\"Error\", \"Warning\"]);\n// 3. Existing list: var logs = new List<string> {...}; LogMessages(logs);",
              "solution": "void LogMessages(params IEnumerable<string> messages)\n{\n    foreach (var msg in messages)\n        Console.WriteLine($\"[{DateTime.Now:HH:mm:ss}] {msg}\");\n}\n\n// Test inline items\nLogMessages(\"Starting\", \"Processing\", \"Done\");\n\n// Test collection expression\nLogMessages([\"Error occurred\", \"Retrying...\"]);\n\n// Test existing collection\nvar logs = new List<string> { \"Init\", \"Load\", \"Complete\" };\nLogMessages(logs);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-params-inline",
                  "description": "Method accepts inline string arguments",
                  "expectedOutput": "Three timestamped log lines",
                  "isVisible": true
                },
                {
                  "id": "test-params-collection",
                  "description": "Method accepts collection expression",
                  "expectedOutput": "Two timestamped log lines",
                  "isVisible": true
                },
                {
                  "id": "test-params-list",
                  "description": "Method accepts existing List<string>",
                  "expectedOutput": "Three timestamped log lines",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "id": "hint-1",
                  "text": "Use `params IEnumerable<string>` not `params string[]`",
                  "order": 1
                },
                {
                  "id": "hint-2",
                  "text": "foreach works the same way on IEnumerable as on arrays",
                  "order": 2
                }
              ],
              "commonMistakes": [
                {
                  "id": "mistake-1",
                  "description": "Using params string[] instead of params IEnumerable<string>",
                  "solution": "C# 13 extends params to work with IEnumerable<T>. This allows callers to pass existing collections without conversion."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-07",
      "title": "Object-Oriented Programming Basics",
      "description": "Introduction to classes, objects, properties, constructors, and the fundamentals of OOP.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-07-01",
          "title": "Inheritance (Blueprints Based on Blueprints)",
          "moduleId": "module-07",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a car factory has a 'Vehicle' blueprint with wheels, engine, steering. Now they want to make a 'Car' - instead of starting from scratch, they say: 'Take the Vehicle blueprint and ADD doors, trunk, and seats!'\n\nThat's INHERITANCE! You create a new class BASED ON an existing one:\n• The original class = BASE CLASS (or parent, superclass)\n• The new class = DERIVED CLASS (or child, subclass)\n\nThe derived class INHERITS everything from the base class and can ADD NEW features or MODIFY existing ones.\n\nExample: Animal (base) → Dog (derived)\n• Animal has: Name, Age, Eat(), Sleep()\n• Dog inherits ALL of those AND adds: Breed, Bark()\n\nInheritance promotes CODE REUSE - don't repeat yourself! Write common features once in the base class, share with all derived classes."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// BASE CLASS\nclass Vehicle\n{\n    public string Brand;\n    public int Year;\n    \n    public void Start()\n    {\n        Console.WriteLine(Brand + \" vehicle starting...\");\n    }\n    \n    public void Stop()\n    {\n        Console.WriteLine(\"Vehicle stopping.\");\n    }\n}\n\n// DERIVED CLASS - inherits from Vehicle\nclass Car : Vehicle  // ':' means 'inherits from'\n{\n    public int Doors;  // NEW feature\n    public string Model;\n    \n    public void OpenTrunk()\n    {\n        Console.WriteLine(\"Trunk opened!\");\n    }\n}\n\nclass Motorcycle : Vehicle\n{\n    public bool HasSidecar;\n    \n    public void Wheelie()\n    {\n        Console.WriteLine(\"Doing a wheelie!\");\n    }\n}\n\n// Usage\nCar myCar = new Car();\nmyCar.Brand = \"Toyota\";  // Inherited from Vehicle!\nmyCar.Year = 2020;       // Inherited from Vehicle!\nmyCar.Doors = 4;         // Car's own property\nmyCar.Start();           // Inherited method\nmyCar.OpenTrunk();       // Car's own method\n\nMotorcycle bike = new Motorcycle();\nbike.Brand = \"Harley\";   // Also inherited from Vehicle\nbike.Start();            // Inherited\nbike.Wheelie();          // Motorcycle's own method",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`class Car : Vehicle`**: The colon ':' means 'inherits from'. Car is the DERIVED class, Vehicle is the BASE class. Car gets ALL of Vehicle's members automatically!\n\n**`Inherited members`**: Car automatically has Brand, Year, Start(), Stop() even though you didn't write them! They come from Vehicle. You can use them immediately on Car objects.\n\n**`Adding new members`**: Derived classes can ADD new fields, properties, and methods. Car adds Doors and OpenTrunk(). Base class (Vehicle) doesn't have these!\n\n**`Single inheritance`**: In C#, a class can only inherit from ONE base class! Can't do 'class Car : Vehicle, Machine'. But you can chain: Vehicle → Car → SportsCar."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create an animal hierarchy!\n\n1. BASE CLASS 'Animal':\n   - Properties: string Name, int Age\n   - Method Eat(): prints '[Name] is eating'\n   - Method Sleep(): prints '[Name] is sleeping'\n\n2. DERIVED CLASS 'Dog' inherits Animal:\n   - Add property: string Breed\n   - Add method Bark(): prints 'Woof!'\n\n3. DERIVED CLASS 'Cat' inherits Animal:\n   - Add property: string Color\n   - Add method Meow(): prints 'Meow!'\n\n4. Create a Dog and a Cat, set their properties, call all methods (inherited and own)",
              "starterCode": "// Base class Animal\nclass Animal\n{\n    // Add properties and methods\n}\n\n// Derived class Dog\nclass Dog : Animal\n{\n    // Add Dog-specific members\n}\n\n// Derived class Cat\nclass Cat : Animal\n{\n    // Add Cat-specific members\n}\n\n// Create animals and test\nDog dog = new Dog();\nCat cat = new Cat();",
              "solution": "class Animal\n{\n    public string Name;\n    public int Age;\n    \n    public void Eat()\n    {\n        Console.WriteLine(Name + \" is eating\");\n    }\n    \n    public void Sleep()\n    {\n        Console.WriteLine(Name + \" is sleeping\");\n    }\n}\n\nclass Dog : Animal\n{\n    public string Breed;\n    \n    public void Bark()\n    {\n        Console.WriteLine(\"Woof!\");\n    }\n}\n\nclass Cat : Animal\n{\n    public string Color;\n    \n    public void Meow()\n    {\n        Console.WriteLine(\"Meow!\");\n    }\n}\n\nDog dog = new Dog();\ndog.Name = \"Buddy\";\ndog.Age = 3;\ndog.Breed = \"Golden Retriever\";\ndog.Eat();    // Inherited!\ndog.Bark();   // Dog's own\n\nCat cat = new Cat();\ncat.Name = \"Whiskers\";\ncat.Age = 2;\ncat.Color = \"Orange\";\ncat.Eat();    // Inherited!\ncat.Meow();   // Cat's own",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"eating\"",
                  "expectedOutput": "eating",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Woof\"",
                  "expectedOutput": "Woof",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Meow\"",
                  "expectedOutput": "Meow",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use 'class Derived : Base' syntax. Derived class automatically gets all Base members. Add new members in the derived class body."
                },
                {
                  "level": 2,
                  "text": "Forgetting the colon: 'class Dog Animal' is WRONG! Must be 'class Dog : Animal' with the colon to inherit."
                },
                {
                  "level": 3,
                  "text": "Trying to inherit from multiple classes: C# doesn't support multiple inheritance! 'class Dog : Animal, Pet' is ERROR. Can only inherit from ONE class."
                },
                {
                  "level": 4,
                  "text": "Redefining inherited members: If Dog has 'public string Name;' and Animal already has it, Dog gets TWO Name fields (confusing!). Don't redefine - just use the inherited one!"
                },
                {
                  "level": 5,
                  "text": "Access modifiers: Derived class can't access PRIVATE members of base class! Use protected or public in base class if derived class needs access."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting the colon",
                  "consequence": "'class Dog Animal' is WRONG! Must be 'class Dog : Animal' with the colon to inherit.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Trying to inherit from multiple classes",
                  "consequence": "C# doesn't support multiple inheritance! 'class Dog : Animal, Pet' is ERROR. Can only inherit from ONE class.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Redefining inherited members",
                  "consequence": "If Dog has 'public string Name;' and Animal already has it, Dog gets TWO Name fields (confusing!). Don't redefine - just use the inherited one!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Access modifiers",
                  "consequence": "Derived class can't access PRIVATE members of base class! Use protected or public in base class if derived class needs access.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-02",
          "title": "Polymorphism (virtual & override)",
          "moduleId": "module-07",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine different types of phones all have a 'Ring' button, but each rings DIFFERENTLY! iPhone plays a melody, Android buzzes, old Nokia has the classic ringtone. Same button name, different behaviors!\n\nThat's POLYMORPHISM (meaning 'many forms')! A method in the base class can be OVERRIDDEN in derived classes to provide different implementations.\n\nIn the base class, mark methods as 'virtual' (can be overridden). In derived classes, use 'override' to provide new implementation.\n\nExample: Animal.MakeSound() is virtual. Dog overrides it to 'Woof!', Cat overrides it to 'Meow!'. Same method name, different sounds - that's polymorphism in action!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "class Animal\n{\n    public string Name;\n    \n    // VIRTUAL method - can be overridden\n    public virtual void MakeSound()\n    {\n        Console.WriteLine(\"Some generic animal sound\");\n    }\n    \n    public virtual void Move()\n    {\n        Console.WriteLine(Name + \" is moving\");\n    }\n}\n\nclass Dog : Animal\n{\n    // OVERRIDE the base method\n    public override void MakeSound()\n    {\n        Console.WriteLine(\"Woof! Woof!\");\n    }\n    \n    public override void Move()\n    {\n        Console.WriteLine(Name + \" is running on four legs\");\n    }\n}\n\nclass Bird : Animal\n{\n    public override void MakeSound()\n    {\n        Console.WriteLine(\"Tweet tweet!\");\n    }\n    \n    public override void Move()\n    {\n        Console.WriteLine(Name + \" is flying\");\n    }\n}\n\n// Polymorphism in action\nAnimal animal1 = new Dog();\nAnimal animal2 = new Bird();\n\nanimal1.MakeSound();  // Calls Dog's version: Woof!\nanimal2.MakeSound();  // Calls Bird's version: Tweet!\n\n// Even though both are declared as Animal, \n// they call their ACTUAL type's method!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public virtual void Method()`**: 'virtual' in base class means 'derived classes CAN override this'. Without virtual, derived classes can't override (they can hide with 'new', but that's different).\n\n**`public override void Method()`**: 'override' in derived class replaces the base class implementation. Signature (name, parameters, return type) MUST match exactly!\n\n**`Animal dog = new Dog();`**: You can store a derived type in a base type variable! This is polymorphism - the variable is Animal, but the object is Dog. Calls Dog's methods!\n\n**`base.Method()`**: In override method, use 'base.Method()' to call the BASE class version. Useful when you want to EXTEND, not REPLACE."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a shape hierarchy with polymorphic Area calculation!\n\n1. BASE CLASS 'Shape':\n   - virtual method CalculateArea() returns double, returns 0\n   - virtual method Display() prints shape info\n\n2. DERIVED 'Circle' : Shape\n   - Property: double Radius\n   - Override CalculateArea(): return Math.PI * Radius * Radius\n   - Override Display(): print 'Circle with radius [r]'\n\n3. DERIVED 'Rectangle' : Shape\n   - Properties: double Width, double Height\n   - Override CalculateArea(): return Width * Height\n   - Override Display(): print 'Rectangle [w]x[h]'\n\n4. Create array of Shape, store Circle and Rectangle, call methods polymorphically",
              "starterCode": "class Shape\n{\n    public virtual double CalculateArea()\n    {\n        return 0;\n    }\n    \n    public virtual void Display()\n    {\n        Console.WriteLine(\"Generic shape\");\n    }\n}\n\nclass Circle : Shape\n{\n    public double Radius;\n    // Override methods\n}\n\nclass Rectangle : Shape\n{\n    public double Width;\n    public double Height;\n    // Override methods\n}\n\n// Create shapes polymorphically",
              "solution": "class Shape\n{\n    public virtual double CalculateArea()\n    {\n        return 0;\n    }\n    \n    public virtual void Display()\n    {\n        Console.WriteLine(\"Generic shape\");\n    }\n}\n\nclass Circle : Shape\n{\n    public double Radius;\n    \n    public override double CalculateArea()\n    {\n        return Math.PI * Radius * Radius;\n    }\n    \n    public override void Display()\n    {\n        Console.WriteLine(\"Circle with radius \" + Radius);\n    }\n}\n\nclass Rectangle : Shape\n{\n    public double Width;\n    public double Height;\n    \n    public override double CalculateArea()\n    {\n        return Width * Height;\n    }\n    \n    public override void Display()\n    {\n        Console.WriteLine(\"Rectangle \" + Width + \"x\" + Height);\n    }\n}\n\nShape[] shapes = new Shape[2];\nshapes[0] = new Circle() { Radius = 5 };\nshapes[1] = new Rectangle() { Width = 4, Height = 6 };\n\nforeach (Shape shape in shapes)\n{\n    shape.Display();\n    Console.WriteLine(\"Area: \" + shape.CalculateArea());\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Circle\"",
                  "expectedOutput": "Circle",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Rectangle\"",
                  "expectedOutput": "Rectangle",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Area\"",
                  "expectedOutput": "Area",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Base class: mark methods 'virtual'. Derived: mark 'override' with same signature. Store derived objects in base type variable for polymorphism."
                },
                {
                  "level": 2,
                  "text": "Forgetting 'virtual' in base: If base method isn't 'virtual', you can't 'override' it! You get a compiler error: 'cannot override inherited member because it is not marked virtual'."
                },
                {
                  "level": 3,
                  "text": "Signature mismatch: Override MUST match exactly! 'public override int Method()' can't override 'public virtual void Method()'. Return type, name, parameters must be identical."
                },
                {
                  "level": 4,
                  "text": "Using 'new' instead of 'override': 'public new void Method()' HIDES the base method, doesn't override! This breaks polymorphism. Always use 'override' for polymorphic behavior."
                },
                {
                  "level": 5,
                  "text": "Not storing in base type: If you do 'Dog dog = new Dog()', polymorphism works but isn't as useful. Store in base type: 'Animal animal = new Dog()' to leverage polymorphism fully."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'virtual' in base",
                  "consequence": "If base method isn't 'virtual', you can't 'override' it! You get a compiler error: 'cannot override inherited member because it is not marked virtual'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Signature mismatch",
                  "consequence": "Override MUST match exactly! 'public override int Method()' can't override 'public virtual void Method()'. Return type, name, parameters must be identical.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using 'new' instead of 'override'",
                  "consequence": "'public new void Method()' HIDES the base method, doesn't override! This breaks polymorphism. Always use 'override' for polymorphic behavior.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not storing in base type",
                  "consequence": "If you do 'Dog dog = new Dog()', polymorphism works but isn't as useful. Store in base type: 'Animal animal = new Dog()' to leverage polymorphism fully.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-03",
          "title": "Abstract Classes (The Unfinished Blueprint)",
          "moduleId": "module-07",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine an architect creates a 'Building' blueprint but leaves some parts intentionally blank: 'Each building MUST have an entrance, but I'm not specifying what kind - you figure that out!'\n\nThat's an ABSTRACT CLASS! It's an INCOMPLETE blueprint that:\n• CAN'T be instantiated directly (can't create a 'Building' object)\n• MUST be inherited\n• Can have ABSTRACT methods (no implementation - derived classes MUST provide it)\n• Can also have regular (concrete) methods with full implementation\n\nWhen to use: When classes share common features, but some features don't make sense in the base class. 'Animal.MakeSound()' - what sound does a generic animal make? Doesn't make sense! Make it abstract - force Dog, Cat to implement it.\n\nAbstract = 'Template with mandatory blanks to fill in'."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// ABSTRACT CLASS - can't be instantiated\nabstract class Shape\n{\n    public string Color;  // Regular property\n    \n    // ABSTRACT method - no implementation!\n    public abstract double CalculateArea();\n    \n    // ABSTRACT method\n    public abstract double CalculatePerimeter();\n    \n    // Regular (concrete) method\n    public void Display()\n    {\n        Console.WriteLine(Color + \" shape with area: \" + CalculateArea());\n    }\n}\n\n// Derived class MUST implement abstract methods\nclass Circle : Shape\n{\n    public double Radius;\n    \n    // MUST override abstract methods\n    public override double CalculateArea()\n    {\n        return Math.PI * Radius * Radius;\n    }\n    \n    public override double CalculatePerimeter()\n    {\n        return 2 * Math.PI * Radius;\n    }\n}\n\nclass Rectangle : Shape\n{\n    public double Width, Height;\n    \n    public override double CalculateArea()\n    {\n        return Width * Height;\n    }\n    \n    public override double CalculatePerimeter()\n    {\n        return 2 * (Width + Height);\n    }\n}\n\n// Usage\n// Shape s = new Shape();  // ERROR! Can't instantiate abstract class\nShape circle = new Circle() { Radius = 5, Color = \"Red\" };\ncircle.Display();  // Inherited method works!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`abstract class ClassName`**: 'abstract' keyword makes class abstract. Can't do 'new ClassName()' - you MUST inherit and use derived classes.\n\n**`public abstract void Method();`**: Abstract method has NO BODY (no { }), just semicolon! Derived classes MUST override and provide implementation. Like a contract: 'you must implement this!'\n\n**`Concrete methods in abstract class`**: Abstract classes CAN have regular methods with implementation! Mix of abstract (must override) and concrete (inherited as-is) methods is common.\n\n**`Forcing implementation`**: If you inherit from abstract class, compiler FORCES you to override all abstract methods! Forget one = compile error. This ensures consistency."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create an abstract Employee system!\n\n1. ABSTRACT CLASS 'Employee':\n   - Properties: string Name, int ID\n   - ABSTRACT method CalculateSalary() returns decimal\n   - Regular method Display(): prints employee info and salary\n\n2. DERIVED 'HourlyEmployee':\n   - Properties: decimal HourlyRate, int HoursWorked\n   - Override CalculateSalary(): return HourlyRate * HoursWorked\n\n3. DERIVED 'SalariedEmployee':\n   - Property: decimal AnnualSalary\n   - Override CalculateSalary(): return AnnualSalary / 12 (monthly)\n\n4. Create both types, call Display()",
              "starterCode": "abstract class Employee\n{\n    public string Name;\n    public int ID;\n    \n    // Abstract method\n    \n    // Regular method\n    public void Display()\n    {\n        Console.WriteLine(Name + \" (ID: \" + ID + \")\");\n        Console.WriteLine(\"Salary: $\" + CalculateSalary());\n    }\n}\n\nclass HourlyEmployee : Employee\n{\n    // Properties and override\n}\n\nclass SalariedEmployee : Employee\n{\n    // Properties and override\n}",
              "solution": "abstract class Employee\n{\n    public string Name;\n    public int ID;\n    \n    public abstract decimal CalculateSalary();\n    \n    public void Display()\n    {\n        Console.WriteLine(Name + \" (ID: \" + ID + \")\");\n        Console.WriteLine(\"Salary: $\" + CalculateSalary());\n    }\n}\n\nclass HourlyEmployee : Employee\n{\n    public decimal HourlyRate;\n    public int HoursWorked;\n    \n    public override decimal CalculateSalary()\n    {\n        return HourlyRate * HoursWorked;\n    }\n}\n\nclass SalariedEmployee : Employee\n{\n    public decimal AnnualSalary;\n    \n    public override decimal CalculateSalary()\n    {\n        return AnnualSalary / 12;\n    }\n}\n\nHourlyEmployee emp1 = new HourlyEmployee();\nemp1.Name = \"John\";\nemp1.ID = 101;\nemp1.HourlyRate = 25;\nemp1.HoursWorked = 160;\nemp1.Display();\n\nSalariedEmployee emp2 = new SalariedEmployee();\nemp2.Name = \"Jane\";\nemp2.ID = 102;\nemp2.AnnualSalary = 60000;\nemp2.Display();",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Salary\"",
                  "expectedOutput": "Salary",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"ID\"",
                  "expectedOutput": "ID",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Abstract class: 'abstract class Name'. Abstract method: 'public abstract ReturnType Method();' (no body!). Derived MUST override abstract methods."
                },
                {
                  "level": 2,
                  "text": "Trying to instantiate abstract class: 'Employee e = new Employee();' is ERROR! Abstract classes can't be created directly - use derived classes."
                },
                {
                  "level": 3,
                  "text": "Forgetting to override abstract methods: If you inherit from abstract class, you MUST override all abstract methods! Compiler will complain if you don't."
                },
                {
                  "level": 4,
                  "text": "Adding body to abstract method: 'public abstract void Method() { }' is WRONG! Abstract methods don't have bodies - just the declaration with semicolon."
                },
                {
                  "level": 5,
                  "text": "When to use abstract vs interface: Use abstract class when you have SOME shared implementation. Use interface (next lesson) when you have NO implementation, just a contract."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Trying to instantiate abstract class",
                  "consequence": "'Employee e = new Employee();' is ERROR! Abstract classes can't be created directly - use derived classes.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to override abstract methods",
                  "consequence": "If you inherit from abstract class, you MUST override all abstract methods! Compiler will complain if you don't.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Adding body to abstract method",
                  "consequence": "'public abstract void Method() { }' is WRONG! Abstract methods don't have bodies - just the declaration with semicolon.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "When to use abstract vs interface",
                  "consequence": "Use abstract class when you have SOME shared implementation. Use interface (next lesson) when you have NO implementation, just a contract.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-04",
          "title": "Interfaces (The Contract)",
          "moduleId": "module-07",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a job posting: 'Looking for employee who can: Drive, Operate forklift, Read inventory systems.' This is a CONTRACT - if you want the job, you MUST have these skills!\n\nAn INTERFACE is a contract for classes. It says: 'If you implement me, you MUST provide these methods.' Unlike abstract classes:\n• NO implementation (just method signatures)\n• A class can implement MULTIPLE interfaces (but only inherit from ONE class!)\n• All members are public and abstract by default\n\nNaming: Interfaces start with 'I' by convention: IDrawable, IPlayable, IComparable.\n\nThink: IDrawable = 'anything that can be drawn'. Button, Image, Shape all implement IDrawable. They're completely different, but share the ability to be drawn!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// INTERFACE definition\ninterface IDrawable\n{\n    void Draw();  // No implementation!\n    void Erase();\n}\n\ninterface IResizable\n{\n    void Resize(int width, int height);\n}\n\n// Class implementing ONE interface\nclass Button : IDrawable\n{\n    public void Draw()\n    {\n        Console.WriteLine(\"Drawing button\");\n    }\n    \n    public void Erase()\n    {\n        Console.WriteLine(\"Erasing button\");\n    }\n}\n\n// Class implementing MULTIPLE interfaces\nclass Image : IDrawable, IResizable\n{\n    public void Draw()\n    {\n        Console.WriteLine(\"Drawing image\");\n    }\n    \n    public void Erase()\n    {\n        Console.WriteLine(\"Erasing image\");\n    }\n    \n    public void Resize(int width, int height)\n    {\n        Console.WriteLine(\"Resizing to \" + width + \"x\" + height);\n    }\n}\n\n// Polymorphism with interfaces\nIDrawable[] drawable = { new Button(), new Image() };\nforeach (IDrawable item in drawable)\n{\n    item.Draw();  // Each draws differently!\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`interface IInterfaceName`**: Interfaces use 'interface' keyword. By convention, names start with 'I'. Define WHAT, not HOW.\n\n**`void Method();`**: Interface methods have NO body, NO access modifiers (implicitly public). Just signatures ending with semicolon.\n\n**`class C : IDrawable, IResizable`**: Class can implement MULTIPLE interfaces! Separate with commas. Must implement ALL methods from ALL interfaces.\n\n**`Interface vs Abstract Class`**: Interface = pure contract (no implementation). Abstract = template with some implementation. Can implement many interfaces, inherit from one class."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a media player system with interfaces!\n\n1. INTERFACE 'IPlayable':\n   - void Play()\n   - void Pause()\n   - void Stop()\n\n2. INTERFACE 'IRecordable':\n   - void Record()\n   - void SaveRecording()\n\n3. CLASS 'VideoPlayer' implements IPlayable\n4. CLASS 'AudioRecorder' implements IPlayable AND IRecordable\n5. Create objects, call methods polymorphically",
              "starterCode": "interface IPlayable\n{\n    // Define methods\n}\n\ninterface IRecordable\n{\n    // Define methods\n}\n\nclass VideoPlayer : IPlayable\n{\n    // Implement IPlayable\n}\n\nclass AudioRecorder : IPlayable, IRecordable\n{\n    // Implement both interfaces\n}",
              "solution": "interface IPlayable\n{\n    void Play();\n    void Pause();\n    void Stop();\n}\n\ninterface IRecordable\n{\n    void Record();\n    void SaveRecording();\n}\n\nclass VideoPlayer : IPlayable\n{\n    public void Play()\n    {\n        Console.WriteLine(\"Playing video\");\n    }\n    \n    public void Pause()\n    {\n        Console.WriteLine(\"Video paused\");\n    }\n    \n    public void Stop()\n    {\n        Console.WriteLine(\"Video stopped\");\n    }\n}\n\nclass AudioRecorder : IPlayable, IRecordable\n{\n    public void Play()\n    {\n        Console.WriteLine(\"Playing audio\");\n    }\n    \n    public void Pause()\n    {\n        Console.WriteLine(\"Audio paused\");\n    }\n    \n    public void Stop()\n    {\n        Console.WriteLine(\"Audio stopped\");\n    }\n    \n    public void Record()\n    {\n        Console.WriteLine(\"Recording audio\");\n    }\n    \n    public void SaveRecording()\n    {\n        Console.WriteLine(\"Saving recording\");\n    }\n}\n\nIPlayable player = new VideoPlayer();\nplayer.Play();\n\nAudioRecorder recorder = new AudioRecorder();\nrecorder.Play();\nrecorder.Record();",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Playing\"",
                  "expectedOutput": "Playing",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Recording\"",
                  "expectedOutput": "Recording",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Interface: 'interface IName { void Method(); }'. Implement: 'class C : IName { public void Method() { } }'. Must implement ALL interface methods!"
                },
                {
                  "level": 2,
                  "text": "Adding implementation in interface: 'void Method() { code }' in interface is WRONG! Interfaces have NO implementation (except default interface methods in C# 8+, advanced topic)."
                },
                {
                  "level": 3,
                  "text": "Forgetting 'public' in implementation: When implementing interface methods in class, you MUST make them 'public'! Interface members are implicitly public."
                },
                {
                  "level": 4,
                  "text": "Not implementing all methods: If interface has 3 methods, class MUST implement all 3! Missing even one = compiler error."
                },
                {
                  "level": 5,
                  "text": "Using 'new' instead of 'implements': C# uses ':' for BOTH inheritance and interfaces. 'class C : IDrawable' implements the interface (colon, not 'implements' keyword)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Adding implementation in interface",
                  "consequence": "'void Method() { code }' in interface is WRONG! Interfaces have NO implementation (except default interface methods in C# 8+, advanced topic).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting 'public' in implementation",
                  "consequence": "When implementing interface methods in class, you MUST make them 'public'! Interface members are implicitly public.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not implementing all methods",
                  "consequence": "If interface has 3 methods, class MUST implement all 3! Missing even one = compiler error.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using 'new' instead of 'implements'",
                  "consequence": "C# uses ':' for BOTH inheritance and interfaces. 'class C : IDrawable' implements the interface (colon, not 'implements' keyword).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-05",
          "title": "When to Use Each OOP Feature",
          "moduleId": "module-07",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned many OOP tools! But WHEN do you use each one? Think of it like a toolbox:\n\n🔧 **INHERITANCE**: Use when there's an 'IS-A' relationship. Dog IS-A Animal, Car IS-A Vehicle. Share common features.\n\n🎨 **ABSTRACT CLASSES**: Use when you want to provide SOME implementation but force derived classes to complete it. Template pattern.\n\n📋 **INTERFACES**: Use when you want to define a CONTRACT without implementation. Multiple classes can implement same interface even if completely unrelated.\n\n🔄 **POLYMORPHISM**: Use when you want different classes to respond to the same method call differently. Shape.Draw() draws differently for Circle vs Rectangle.\n\nRule of thumb:\n• Inheritance: Share CODE (implementation)\n• Interfaces: Share CONTRACT (what must be done)\n• Abstract: Share BOTH (some code + force completion)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Example: Game character system\n\n// INTERFACE - contract for anything that can attack\ninterface IAttacker\n{\n    void Attack();\n    int GetDamage();\n}\n\n// ABSTRACT CLASS - template for all characters\nabstract class Character\n{\n    public string Name;\n    public int Health = 100;\n    \n    // Concrete method (shared by all)\n    public void TakeDamage(int damage)\n    {\n        Health -= damage;\n        Console.WriteLine(Name + \" took \" + damage + \" damage. Health: \" + Health);\n    }\n    \n    // Abstract method (each character moves differently)\n    public abstract void Move();\n}\n\n// DERIVED CLASS implementing abstract and interface\nclass Warrior : Character, IAttacker\n{\n    public int WeaponDamage = 20;\n    \n    public override void Move()\n    {\n        Console.WriteLine(Name + \" marches forward\");\n    }\n    \n    public void Attack()\n    {\n        Console.WriteLine(Name + \" swings sword!\");\n    }\n    \n    public int GetDamage()\n    {\n        return WeaponDamage;\n    }\n}\n\nclass Mage : Character, IAttacker\n{\n    public int SpellPower = 30;\n    \n    public override void Move()\n    {\n        Console.WriteLine(Name + \" teleports\");\n    }\n    \n    public void Attack()\n    {\n        Console.WriteLine(Name + \" casts fireball!\");\n    }\n    \n    public int GetDamage()\n    {\n        return SpellPower;\n    }\n}\n\n// Polymorphism in action\nCharacter[] party = { new Warrior { Name = \"Thor\" }, new Mage { Name = \"Gandalf\" } };\nforeach (Character c in party)\n{\n    c.Move();  // Each moves differently!\n}\n\nIAttacker[] attackers = { new Warrior(), new Mage() };\nforeach (IAttacker a in attackers)\n{\n    a.Attack();  // Each attacks differently!\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Decision Tree: Inheritance`**: Use inheritance when: 1) Classes have IS-A relationship, 2) Want to share implementation, 3) Have clear hierarchy. Avoid deep inheritance (3+ levels gets complex).\n\n**`Decision Tree: Abstract Class`**: Use abstract when: 1) Some methods don't make sense in base class, 2) Want to provide SOME shared code, 3) Force derived classes to implement certain methods.\n\n**`Decision Tree: Interface`**: Use interface when: 1) Define behavior contract, 2) No shared implementation needed, 3) Want multiple 'capabilities' (IDrawable, IResizable, ISaveable).\n\n**`Composition vs Inheritance`**: Sometimes COMPOSITION (has-a) is better than INHERITANCE (is-a)! Car HAS-A Engine (composition) is better than Car IS-A Engine (wrong!)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Design a zoo system using all OOP concepts!\n\n1. INTERFACE 'IFeedable': void Feed()\n2. ABSTRACT CLASS 'Animal': string Name, int Age, abstract void MakeSound()\n3. DERIVED 'Lion' : Animal, IFeedable: override MakeSound() to 'Roar!', implement Feed()\n4. DERIVED 'Penguin' : Animal, IFeedable: override MakeSound() to 'Squawk!', implement Feed()\n5. Create array of Animals, call MakeSound() polymorphically\n6. Create array of IFeedable, call Feed() on all\n\nDemonstrate: inheritance, abstraction, interfaces, polymorphism!",
              "starterCode": "interface IFeedable\n{\n    void Feed();\n}\n\nabstract class Animal\n{\n    public string Name;\n    public int Age;\n    \n    public abstract void MakeSound();\n}\n\n// Implement Lion and Penguin\n\n// Create arrays and demonstrate polymorphism",
              "solution": "interface IFeedable\n{\n    void Feed();\n}\n\nabstract class Animal\n{\n    public string Name;\n    public int Age;\n    \n    public abstract void MakeSound();\n    \n    public void DisplayInfo()\n    {\n        Console.WriteLine(Name + \", age \" + Age);\n    }\n}\n\nclass Lion : Animal, IFeedable\n{\n    public override void MakeSound()\n    {\n        Console.WriteLine(\"Roar!\");\n    }\n    \n    public void Feed()\n    {\n        Console.WriteLine(\"Feeding \" + Name + \" meat\");\n    }\n}\n\nclass Penguin : Animal, IFeedable\n{\n    public override void MakeSound()\n    {\n        Console.WriteLine(\"Squawk!\");\n    }\n    \n    public void Feed()\n    {\n        Console.WriteLine(\"Feeding \" + Name + \" fish\");\n    }\n}\n\nAnimal[] animals = { \n    new Lion { Name = \"Simba\", Age = 5 },\n    new Penguin { Name = \"Pingu\", Age = 2 }\n};\n\nforeach (Animal a in animals)\n{\n    a.DisplayInfo();\n    a.MakeSound();\n}\n\nIFeedable[] feedables = { new Lion(), new Penguin() };\nforeach (IFeedable f in feedables)\n{\n    f.Feed();\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Roar\"",
                  "expectedOutput": "Roar",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Squawk\"",
                  "expectedOutput": "Squawk",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Feeding\"",
                  "expectedOutput": "Feeding",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Combine concepts: abstract class for shared template, interface for behavior contract, override for polymorphism. Use base type arrays for polymorphic operations."
                },
                {
                  "level": 2,
                  "text": "Overusing inheritance: Don't create deep hierarchies (Animal → Mammal → Carnivore → Feline → Lion). Keep it simple! 2-3 levels max."
                },
                {
                  "level": 3,
                  "text": "Interface vs Abstract confusion: If NO shared implementation, use interface. If SOME shared code, use abstract class. Both? Use abstract class with interfaces!"
                },
                {
                  "level": 4,
                  "text": "Forgetting polymorphism benefit: The power is storing different types in same array (Animal[]) and calling methods. Each object responds differently!"
                },
                {
                  "level": 5,
                  "text": "Inheritance for code reuse only: Don't inherit just to reuse code! Use composition (has-a) or helper classes instead. Inherit when there's true IS-A relationship."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Overusing inheritance",
                  "consequence": "Don't create deep hierarchies (Animal → Mammal → Carnivore → Feline → Lion). Keep it simple! 2-3 levels max.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Interface vs Abstract confusion",
                  "consequence": "If NO shared implementation, use interface. If SOME shared code, use abstract class. Both? Use abstract class with interfaces!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting polymorphism benefit",
                  "consequence": "The power is storing different types in same array (Animal[]) and calling methods. Each object responds differently!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Inheritance for code reuse only",
                  "consequence": "Don't inherit just to reuse code! Use composition (has-a) or helper classes instead. Inherit when there's true IS-A relationship.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-06",
          "title": "Records (C# 9+)",
          "moduleId": "module-07",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're filling out a government form. Once you write your name, address, and birthdate, you don't want anyone changing it - it's your official record!\n\nThat's what RECORDS are in C# - special classes designed to hold DATA that shouldn't change. They're perfect for:\n\n- Data transfer objects (DTOs)\n- Configuration values\n- API responses\n- Anything that represents 'facts' rather than 'things that do stuff'\n\nRecords give you:\n- Immutability by default (data can't change after creation)\n- Value-based equality (two records with same data are 'equal')\n- Automatic ToString(), Equals(), and GetHashCode()\n- Compact one-line syntax!\n\nThink of a class as a person (can change clothes, mood, etc.) vs a record as a passport (fixed facts about a person)."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Traditional class - lots of boilerplate!\nclass PersonClass\n{\n    public string Name { get; set; }\n    public int Age { get; set; }\n    \n    public PersonClass(string name, int age)\n    {\n        Name = name;\n        Age = age;\n    }\n}\n\n// RECORD - one line does it all! (C# 9+)\npublic record Person(string Name, int Age);\n\n// Usage\nvar person1 = new Person(\"Alice\", 30);\nvar person2 = new Person(\"Alice\", 30);\n\n// Value-based equality - same data = equal!\nConsole.WriteLine(person1 == person2);  // True!\n\n// Automatic ToString()\nConsole.WriteLine(person1);  // Person { Name = Alice, Age = 30 }\n\n// With-expressions for copying with modifications\nvar olderPerson = person1 with { Age = 31 };\nConsole.WriteLine(olderPerson);  // Person { Name = Alice, Age = 31 }\n\n// Original unchanged (immutable)\nConsole.WriteLine(person1);  // Person { Name = Alice, Age = 30 }\n\n// More record examples\npublic record Point(int X, int Y);\npublic record Rectangle(Point TopLeft, Point BottomRight);\n\nvar point = new Point(10, 20);\nvar rect = new Rectangle(new Point(0, 0), new Point(100, 50));",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public record Person(string Name, int Age);`**: This ONE line creates: a class with Name and Age properties, a constructor that sets them, ToString(), Equals(), GetHashCode(), and deconstructor!\n\n**`person1 == person2`**: Unlike classes (which compare references), records compare VALUES. Two records with identical data are equal, even if they're different objects in memory.\n\n**`person1 with { Age = 31 }`**: The 'with' expression creates a COPY with some properties changed. Original stays unchanged! This is how you 'modify' immutable data.\n\n**`Positional parameters`**: The (string Name, int Age) are called positional parameters. They become init-only properties and constructor parameters automatically.\n\n**`record vs record class vs record struct`**: 'record' and 'record class' are the same (reference types). 'record struct' (C# 10+) creates a value type record."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a simple product catalog using records!\n\n1. Create a record 'Product' with: string Name, decimal Price, string Category\n2. Create 3 products: 'Laptop' ($999.99, 'Electronics'), 'Coffee' ($12.99, 'Food'), 'Book' ($24.99, 'Books')\n3. Display all products using their automatic ToString()\n4. Create a discounted version of Laptop with price $899.99 using 'with'\n5. Compare two identical products to show value equality",
              "starterCode": "// Define the Product record\n\n// Create products\n\n// Display products\n\n// Create discounted laptop using 'with'\n\n// Compare two identical products",
              "solution": "// Define the Product record\npublic record Product(string Name, decimal Price, string Category);\n\n// Create products\nvar laptop = new Product(\"Laptop\", 999.99m, \"Electronics\");\nvar coffee = new Product(\"Coffee\", 12.99m, \"Food\");\nvar book = new Product(\"Book\", 24.99m, \"Books\");\n\n// Display products\nConsole.WriteLine(laptop);\nConsole.WriteLine(coffee);\nConsole.WriteLine(book);\n\n// Create discounted laptop using 'with'\nvar discountedLaptop = laptop with { Price = 899.99m };\nConsole.WriteLine(\"Discounted: \" + discountedLaptop);\n\n// Compare two identical products\nvar anotherCoffee = new Product(\"Coffee\", 12.99m, \"Food\");\nConsole.WriteLine(\"Are they equal? \" + (coffee == anotherCoffee));  // True!",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain 'Laptop'",
                  "expectedOutput": "Laptop",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain 'Discounted'",
                  "expectedOutput": "Discounted",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain 'True'",
                  "expectedOutput": "True",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Use 'public record Product(string Name, decimal Price, string Category);' for the one-line definition. Use 'm' suffix for decimal literals (999.99m)."
                },
                {
                  "level": 2,
                  "text": "For 'with' expressions, syntax is: var newRecord = oldRecord with { Property = newValue };. Original remains unchanged!"
                },
                {
                  "level": 3,
                  "text": "Records use value equality by default. Two records with identical property values are equal (==), unlike regular classes."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Trying to modify record properties directly",
                  "consequence": "Record properties are init-only by default. Use 'with' expressions to create modified copies instead of trying to change properties.",
                  "correction": "Use: var updated = original with { Property = newValue };"
                },
                {
                  "mistake": "Forgetting decimal suffix 'm'",
                  "consequence": "Decimal literals need the 'm' suffix (999.99m). Without it, C# treats them as double and causes type mismatch errors.",
                  "correction": "Always use 'm' suffix for decimal values: 12.99m, 999.99m"
                },
                {
                  "mistake": "Expecting reference equality",
                  "consequence": "Records compare by VALUE, not reference. Two separate record objects with same data are equal (==).",
                  "correction": "Understand that records are designed for value semantics - same data means equal."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-07-07",
          "title": "Primary Constructors (C# 12)",
          "moduleId": "module-07",
          "order": 7,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine filling out a form for a new employee. The old way: create a blank form, THEN write name, THEN write department, THEN write salary. Tedious!\n\nThe new way: a smart form that asks for everything upfront and fills itself in!\n\nThat's PRIMARY CONSTRUCTORS in C# 12. Instead of:\n1. Declaring fields\n2. Writing a constructor\n3. Assigning each parameter to each field\n\nYou just put parameters right after the class name - and they're available throughout the class!\n\nBefore: 15 lines of boilerplate code\nAfter: 1 line with parameters in the class declaration\n\nThis is a HUGE productivity boost for classes that need initial data. Less typing, fewer bugs, cleaner code!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// OLD WAY - lots of boilerplate!\nclass PersonOld\n{\n    private readonly string _name;\n    private readonly int _age;\n    \n    public PersonOld(string name, int age)\n    {\n        _name = name;\n        _age = age;\n    }\n    \n    public void Introduce()\n    {\n        Console.WriteLine($\"Hi, I'm {_name}, {_age} years old.\");\n    }\n}\n\n// NEW WAY - Primary Constructor (C# 12)!\npublic class Person(string name, int age)\n{\n    // Parameters are available everywhere in the class!\n    public void Introduce()\n    {\n        Console.WriteLine($\"Hi, I'm {name}, {age} years old.\");\n    }\n    \n    public string GetName() => name;\n    public int GetAge() => age;\n}\n\n// Usage - same as before!\nvar person = new Person(\"Alice\", 30);\nperson.Introduce();  // Hi, I'm Alice, 30 years old.\n\n// Works with inheritance too!\npublic class Employee(string name, int age, string department) \n    : Person(name, age)  // Pass to base class\n{\n    public void ShowDepartment()\n    {\n        Console.WriteLine($\"{name} works in {department}\");\n    }\n}\n\nvar emp = new Employee(\"Bob\", 25, \"Engineering\");\nemp.Introduce();        // From Person\nemp.ShowDepartment();   // Bob works in Engineering",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`public class Person(string name, int age)`**: Parameters go right after the class name in parentheses. No need to declare fields or write constructor body!\n\n**`Parameters are captured`**: The parameters (name, age) are available in ALL instance members - methods, properties, initializers. They act like private fields.\n\n**`: Person(name, age)`**: In derived classes, pass primary constructor parameters to base class constructor using this syntax after the class declaration.\n\n**`No required fields`**: Parameters are captured but NOT automatically properties. If you need a public property, you still declare it: `public string Name { get; } = name;`\n\n**`Validation`**: You can still validate by using the parameters in field initializers: `private readonly string _name = name ?? throw new ArgumentNullException(nameof(name));`"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-07-07-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a vehicle tracking system using primary constructors!\n\n1. Create a class 'Vehicle' with primary constructor: (string make, string model, int year)\n2. Add a method GetInfo() that returns a formatted string like 'Year Make Model'\n3. Create a derived class 'Car' with primary constructor: (string make, string model, int year, int doors)\n4. Pass make, model, year to base class Vehicle\n5. Add a method Describe() that uses GetInfo() and adds door count\n6. Create instances and test both classes",
              "starterCode": "// Create Vehicle with primary constructor\n\n// Create Car that inherits from Vehicle\n\n// Test your classes",
              "solution": "// Create Vehicle with primary constructor\npublic class Vehicle(string make, string model, int year)\n{\n    public string GetInfo()\n    {\n        return $\"{year} {make} {model}\";\n    }\n}\n\n// Create Car that inherits from Vehicle\npublic class Car(string make, string model, int year, int doors)\n    : Vehicle(make, model, year)\n{\n    public void Describe()\n    {\n        Console.WriteLine($\"{GetInfo()} with {doors} doors\");\n    }\n}\n\n// Test your classes\nvar vehicle = new Vehicle(\"Honda\", \"Civic\", 2024);\nConsole.WriteLine(vehicle.GetInfo());\n\nvar car = new Car(\"Toyota\", \"Camry\", 2023, 4);\ncar.Describe();",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain a year",
                  "expectedOutput": "202",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain 'doors'",
                  "expectedOutput": "doors",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Primary constructor syntax: class ClassName(Type param1, Type param2). Parameters are available throughout the class."
                },
                {
                  "level": 2,
                  "text": "For inheritance, use: class Derived(params) : Base(baseParams). Pass the needed parameters to the base constructor."
                },
                {
                  "level": 3,
                  "text": "Use string interpolation ($\"...\") to format strings with the constructor parameters."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting to pass parameters to base class",
                  "consequence": "When inheriting, you must explicitly pass required parameters to the base class primary constructor using : Base(params) syntax.",
                  "correction": "class Car(string make, int year) : Vehicle(make, year)"
                },
                {
                  "mistake": "Thinking parameters are public properties",
                  "consequence": "Primary constructor parameters are captured privately. To expose them, create explicit properties.",
                  "correction": "Add: public string Make { get; } = make;"
                },
                {
                  "mistake": "Using primary constructors for mutable state",
                  "consequence": "Parameters are captured by value at construction. They work best for initialization data, not frequently changing state.",
                  "correction": "Use traditional fields/properties for mutable state."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-08",
      "title": "Advanced OOP Concepts",
      "description": "Explore inheritance, polymorphism, abstract classes, interfaces, and advanced object-oriented patterns.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-08-01",
          "title": "Exceptions & try/catch (Planning for Problems)",
          "moduleId": "module-08",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're driving a car. Most of the time everything works fine, but what if you get a flat tire? You need a PLAN: pull over safely, turn on hazards, call for help.\n\nThat's what EXCEPTIONS are in programming! They're unexpected problems that happen while your code runs:\n• User enters text instead of a number\n• File doesn't exist when you try to open it\n• Network connection drops\n• Division by zero\n\nWithout a plan, your program CRASHES! With try/catch, you handle the problem gracefully:\n• TRY: 'Try to do this risky thing'\n• CATCH: 'If something goes wrong, do this instead'\n\nThink: try/catch = 'Attempt the task, but have a backup plan if it fails.' Your program stays running instead of crashing!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// WITHOUT exception handling - program crashes!\nstring input = \"abc\";\nint number = int.Parse(input);  // CRASH! Can't convert \"abc\" to number\nConsole.WriteLine(\"This never runs\");\n\n// WITH exception handling - graceful recovery\ntry\n{\n    string input = \"abc\";\n    int number = int.Parse(input);  // This fails...\n    Console.WriteLine(\"Success: \" + number);  // Never reached\n}\ncatch (FormatException ex)\n{\n    Console.WriteLine(\"Error: That's not a valid number!\");\n    Console.WriteLine(\"Please enter digits only.\");\n}\nConsole.WriteLine(\"Program continues running!\");\n\n// Multiple catch blocks for different errors\ntry\n{\n    int[] numbers = { 1, 2, 3 };\n    Console.WriteLine(numbers[10]);  // Index out of range!\n}\ncatch (IndexOutOfRangeException ex)\n{\n    Console.WriteLine(\"Error: Array index too large!\");\n}\ncatch (Exception ex)  // Generic catch for any other error\n{\n    Console.WriteLine(\"Something went wrong: \" + ex.Message);\n}\n\n// Real-world example: Safe division\ntry\n{\n    int a = 10;\n    int b = 0;\n    int result = a / b;  // Division by zero!\n}\ncatch (DivideByZeroException ex)\n{\n    Console.WriteLine(\"Cannot divide by zero!\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`try { risky code }`**: The 'try' block contains code that MIGHT fail. If any line throws an exception, execution immediately jumps to the catch block.\n\n**`catch (ExceptionType ex) { handle }`**: 'catch' runs ONLY if an exception occurs in the try block. ExceptionType specifies what kind of error to catch. 'ex' is a variable holding error details.\n\n**`Multiple catch blocks`**: You can have multiple catch blocks for different exception types! They're checked in order. Put specific exceptions first, generic (Exception) last.\n\n**`ex.Message`**: The exception object 'ex' has properties: Message (error description), StackTrace (where error occurred). Useful for debugging!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-08-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a safe calculator that handles errors!\n\n1. Prompt user for two numbers (use int.Parse)\n2. Prompt for operation (+, -, *, /)\n3. Wrap risky code in try/catch:\n   - Catch FormatException (invalid number input)\n   - Catch DivideByZeroException (division by zero)\n   - Catch general Exception (anything else)\n4. Display appropriate error messages\n5. If successful, show the result",
              "starterCode": "try\n{\n    Console.WriteLine(\"Enter first number:\");\n    // Parse input\n    \n    Console.WriteLine(\"Enter second number:\");\n    // Parse input\n    \n    Console.WriteLine(\"Enter operation (+, -, *, /):\");\n    string op = Console.ReadLine();\n    \n    // Perform calculation\n    int result = 0;\n    \n    Console.WriteLine(\"Result: \" + result);\n}\ncatch (FormatException ex)\n{\n    // Handle invalid number\n}\ncatch (DivideByZeroException ex)\n{\n    // Handle division by zero\n}\ncatch (Exception ex)\n{\n    // Handle any other error\n}",
              "solution": "try\n{\n    Console.WriteLine(\"Enter first number:\");\n    int num1 = int.Parse(Console.ReadLine());\n    \n    Console.WriteLine(\"Enter second number:\");\n    int num2 = int.Parse(Console.ReadLine());\n    \n    Console.WriteLine(\"Enter operation (+, -, *, /):\");\n    string op = Console.ReadLine();\n    \n    int result = 0;\n    if (op == \"+\") result = num1 + num2;\n    else if (op == \"-\") result = num1 - num2;\n    else if (op == \"*\") result = num1 * num2;\n    else if (op == \"/\") result = num1 / num2;\n    \n    Console.WriteLine(\"Result: \" + result);\n}\ncatch (FormatException ex)\n{\n    Console.WriteLine(\"Error: Please enter valid numbers only!\");\n}\ncatch (DivideByZeroException ex)\n{\n    Console.WriteLine(\"Error: Cannot divide by zero!\");\n}\ncatch (Exception ex)\n{\n    Console.WriteLine(\"Unexpected error: \" + ex.Message);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Result\"",
                  "expectedOutput": "Result",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Error\"",
                  "expectedOutput": "Error",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Wrap ALL risky code in the try block. Use specific exception types in catch blocks. Order matters: specific exceptions before generic ones!"
                },
                {
                  "level": 2,
                  "text": "Catching Exception first: If you put 'catch (Exception ex)' FIRST, it catches EVERYTHING! Specific catches after it never run. Always put specific exceptions before generic Exception."
                },
                {
                  "level": 3,
                  "text": "Empty catch blocks: 'catch { }' swallows errors silently! Always log or display error messages. Silent failures are impossible to debug."
                },
                {
                  "level": 4,
                  "text": "Try without catch: 'try { code }' alone is ERROR! Must have at least one catch block (or finally, next lesson). Try/catch are partners."
                },
                {
                  "level": 5,
                  "text": "Catching wrong exception type: If you catch FormatException but the error is IndexOutOfRangeException, your catch won't run! Use general Exception catch as fallback."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Catching Exception first",
                  "consequence": "If you put 'catch (Exception ex)' FIRST, it catches EVERYTHING! Specific catches after it never run. Always put specific exceptions before generic Exception.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Empty catch blocks",
                  "consequence": "'catch { }' swallows errors silently! Always log or display error messages. Silent failures are impossible to debug.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Try without catch",
                  "consequence": "'try { code }' alone is ERROR! Must have at least one catch block (or finally, next lesson). Try/catch are partners.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Catching wrong exception type",
                  "consequence": "If you catch FormatException but the error is IndexOutOfRangeException, your catch won't run! Use general Exception catch as fallback.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-08-02",
          "title": "The finally Block & Custom Exceptions",
          "moduleId": "module-08",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine borrowing a book from the library. Whether you finish reading it OR give up halfway, you MUST return the book! That's a 'finally' action - it happens NO MATTER WHAT.\n\nThe FINALLY BLOCK runs whether the try succeeds OR an exception is caught:\n• Try succeeds → finally runs\n• Exception caught → finally runs\n• Exception NOT caught → finally runs (then exception propagates)\n\nUse finally for CLEANUP: close files, release resources, disconnect from databases.\n\nCUSTOM EXCEPTIONS: Sometimes built-in exceptions aren't specific enough. Create your own!\n• InvalidAgeException for age validation\n• InsufficientFundsException for banking\n• GameOverException for game logic\n\nThink: finally = 'Always do this, no matter what!' Custom exceptions = 'Create your own error types for your domain.'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// FINALLY block example\ntry\n{\n    Console.WriteLine(\"Opening file...\");\n    // Risky file operations\n    throw new Exception(\"File corrupted!\");\n    Console.WriteLine(\"This won't run\");\n}\ncatch (Exception ex)\n{\n    Console.WriteLine(\"Error: \" + ex.Message);\n}\nfinally\n{\n    Console.WriteLine(\"Closing file...\");  // ALWAYS runs!\n    // Cleanup code here\n}\n\n// CUSTOM EXCEPTION - create your own!\nclass InvalidAgeException : Exception\n{\n    public InvalidAgeException(string message) : base(message)\n    {\n    }\n}\n\nclass Person\n{\n    private int _age;\n    \n    public int Age\n    {\n        get { return _age; }\n        set\n        {\n            if (value < 0 || value > 120)\n            {\n                throw new InvalidAgeException(\"Age must be between 0 and 120!\");\n            }\n            _age = value;\n        }\n    }\n}\n\n// Using custom exception\ntry\n{\n    Person person = new Person();\n    person.Age = 150;  // Throws InvalidAgeException!\n}\ncatch (InvalidAgeException ex)\n{\n    Console.WriteLine(\"Custom error: \" + ex.Message);\n}\nfinally\n{\n    Console.WriteLine(\"Validation complete.\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`finally { cleanup code }`**: Finally block runs AFTER try and catch, ALWAYS! Use for cleanup: closing files, releasing resources. Runs even if exception is thrown.\n\n**`class CustomException : Exception`**: Create custom exception by inheriting from Exception class. Naming convention: end with 'Exception' (InvalidAgeException, not InvalidAge).\n\n**`: base(message)`**: Call base constructor with error message. This passes the message to the Exception class, so ex.Message works.\n\n**`throw new CustomException()`**: 'throw' keyword creates and throws an exception. Program immediately jumps to nearest catch block that handles this exception type."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-08-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a banking system with custom exception and finally!\n\n1. CUSTOM EXCEPTION 'InsufficientFundsException':\n   - Inherits from Exception\n   - Constructor accepts message\n\n2. CLASS 'BankAccount':\n   - Property: decimal Balance\n   - Method Withdraw(amount):\n     - If amount > Balance, throw InsufficientFundsException\n     - Otherwise, subtract amount\n\n3. In main code:\n   - Create account with balance $100\n   - Try to withdraw $150 (will throw exception)\n   - Catch InsufficientFundsException\n   - Finally: Display \"Transaction complete\"",
              "starterCode": "class InsufficientFundsException : Exception\n{\n    // Constructor\n}\n\nclass BankAccount\n{\n    public decimal Balance;\n    \n    public void Withdraw(decimal amount)\n    {\n        // Check balance, throw if insufficient\n        // Otherwise subtract\n    }\n}\n\n// Test the system\ntry\n{\n    BankAccount account = new BankAccount();\n    account.Balance = 100;\n    \n    Console.WriteLine(\"Balance: $\" + account.Balance);\n    account.Withdraw(150);  // Should throw exception\n    Console.WriteLine(\"Withdrawal successful!\");\n}\ncatch (InsufficientFundsException ex)\n{\n    // Handle error\n}\nfinally\n{\n    // Always runs\n}",
              "solution": "class InsufficientFundsException : Exception\n{\n    public InsufficientFundsException(string message) : base(message)\n    {\n    }\n}\n\nclass BankAccount\n{\n    public decimal Balance;\n    \n    public void Withdraw(decimal amount)\n    {\n        if (amount > Balance)\n        {\n            throw new InsufficientFundsException(\"Insufficient funds for withdrawal!\");\n        }\n        Balance -= amount;\n    }\n}\n\ntry\n{\n    BankAccount account = new BankAccount();\n    account.Balance = 100;\n    \n    Console.WriteLine(\"Balance: $\" + account.Balance);\n    account.Withdraw(150);\n    Console.WriteLine(\"Withdrawal successful!\");\n}\ncatch (InsufficientFundsException ex)\n{\n    Console.WriteLine(\"Error: \" + ex.Message);\n}\nfinally\n{\n    Console.WriteLine(\"Transaction complete.\");\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Balance\"",
                  "expectedOutput": "Balance",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Error\"",
                  "expectedOutput": "Error",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Transaction complete\"",
                  "expectedOutput": "Transaction complete",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Custom exception: 'class MyException : Exception'. Constructor: ': base(message)'. Throw: 'throw new MyException(\"message\")'. Finally always runs after try/catch!"
                },
                {
                  "level": 2,
                  "text": "Forgetting base constructor: 'class MyEx : Exception { }' without constructor works, but you can't pass custom messages! Always add constructor with ': base(message)'."
                },
                {
                  "level": 3,
                  "text": "Finally for logic: Finally is for CLEANUP, not business logic! Don't put critical app logic in finally - use it for closing files, releasing locks, etc."
                },
                {
                  "level": 4,
                  "text": "Return in finally: 'return' in finally block overrides return in try/catch! Avoid returning values from finally - it's confusing and error-prone."
                },
                {
                  "level": 5,
                  "text": "Not throwing custom exception: Creating 'new InvalidAgeException()' without 'throw' does nothing! Must use 'throw new InvalidAgeException()' to actually throw it."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting base constructor",
                  "consequence": "'class MyEx : Exception { }' without constructor works, but you can't pass custom messages! Always add constructor with ': base(message)'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Finally for logic",
                  "consequence": "Finally is for CLEANUP, not business logic! Don't put critical app logic in finally - use it for closing files, releasing locks, etc.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Return in finally",
                  "consequence": "'return' in finally block overrides return in try/catch! Avoid returning values from finally - it's confusing and error-prone.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not throwing custom exception",
                  "consequence": "Creating 'new InvalidAgeException()' without 'throw' does nothing! Must use 'throw new InvalidAgeException()' to actually throw it.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-08-03",
          "title": "Namespaces (Organizing Your Blueprints)",
          "moduleId": "module-08",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a huge library with 100,000 books all mixed together on one shelf! Finding 'The Great Gatsby' would be impossible. Instead, libraries organize books:\n• Fiction → Mystery → Author Name\n• Non-Fiction → Science → Biology\n\nThat's what NAMESPACES do for code! They're FOLDERS for organizing classes:\n• System.Collections.Generic → List, Dictionary\n• System.IO → File, Directory\n• YourApp.Models → Customer, Product\n• YourApp.Services → EmailService, PaymentService\n\nNamespaces prevent NAMING CONFLICTS: Microsoft can have 'Microsoft.UI.Button' and you can have 'MyApp.CustomControls.Button' - different namespaces, no conflict!\n\nThink: namespace = 'The organizational folder path for your code.' Without namespaces, large projects become chaos!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// DEFINING a namespace\nnamespace MyApp.Models\n{\n    class Customer\n    {\n        public string Name;\n        public string Email;\n    }\n    \n    class Product\n    {\n        public string Name;\n        public decimal Price;\n    }\n}\n\nnamespace MyApp.Services\n{\n    class EmailService\n    {\n        public void SendEmail(string to, string message)\n        {\n            Console.WriteLine(\"Sending email to: \" + to);\n        }\n    }\n}\n\n// USING namespaces\nusing System;\nusing System.Collections.Generic;\nusing MyApp.Models;  // Now we can use Customer, Product directly!\n\nnamespace MyApp\n{\n    class Program\n    {\n        static void Main()\n        {\n            // Without 'using MyApp.Models', we'd need:\n            // MyApp.Models.Customer c = new MyApp.Models.Customer();\n            \n            // With 'using MyApp.Models':\n            Customer customer = new Customer();\n            customer.Name = \"John\";\n            \n            List<Product> products = new List<Product>();\n            // List comes from System.Collections.Generic (using statement)\n        }\n    }\n}\n\n// NESTED namespaces\nnamespace Company.ProjectName.ModuleName\n{\n    class SomeClass { }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`namespace Name { }`**: Namespace wraps your classes. Use PascalCase. Dot notation for hierarchy: Company.Product.Feature (like folder paths!).\n\n**`using Namespace;`**: 'using' at top of file imports a namespace. Now you can use classes from that namespace without full path. Like 'import' in other languages.\n\n**`Fully qualified name`**: Full path to a class: 'System.Collections.Generic.List<int>'. Using statements let you skip the path: just 'List<int>'.\n\n**`Namespace organization`**: Convention: YourApp.Models (data classes), YourApp.Services (business logic), YourApp.Views (UI). Organize by feature or layer!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-08-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a multi-namespace project structure!\n\n1. NAMESPACE 'MyStore.Models':\n   - Class Product: string Name, decimal Price\n\n2. NAMESPACE 'MyStore.Services':\n   - Class ShoppingCart:\n     - List<Product> Items\n     - Method AddItem(Product p): adds to Items, prints confirmation\n     - Method GetTotal(): returns sum of all item prices\n\n3. NAMESPACE 'MyStore':\n   - Import both namespaces with 'using'\n   - Create products\n   - Create cart, add products\n   - Display total",
              "starterCode": "using System;\nusing System.Collections.Generic;\n// Add using statements for your namespaces\n\nnamespace MyStore.Models\n{\n    // Define Product class\n}\n\nnamespace MyStore.Services\n{\n    // Define ShoppingCart class\n    // Don't forget: you'll need 'using MyStore.Models;' here to use Product!\n}\n\nnamespace MyStore\n{\n    class Program\n    {\n        static void Main()\n        {\n            // Create products\n            // Create cart\n            // Add items\n            // Display total\n        }\n    }\n}",
              "solution": "using System;\nusing System.Collections.Generic;\nusing MyStore.Models;\nusing MyStore.Services;\n\nnamespace MyStore.Models\n{\n    class Product\n    {\n        public string Name;\n        public decimal Price;\n    }\n}\n\nnamespace MyStore.Services\n{\n    using MyStore.Models;\n    \n    class ShoppingCart\n    {\n        public List<Product> Items = new List<Product>();\n        \n        public void AddItem(Product p)\n        {\n            Items.Add(p);\n            Console.WriteLine(\"Added: \" + p.Name);\n        }\n        \n        public decimal GetTotal()\n        {\n            decimal total = 0;\n            foreach (Product item in Items)\n            {\n                total += item.Price;\n            }\n            return total;\n        }\n    }\n}\n\nnamespace MyStore\n{\n    class Program\n    {\n        static void Main()\n        {\n            Product p1 = new Product() { Name = \"Laptop\", Price = 999.99m };\n            Product p2 = new Product() { Name = \"Mouse\", Price = 29.99m };\n            \n            ShoppingCart cart = new ShoppingCart();\n            cart.AddItem(p1);\n            cart.AddItem(p2);\n            \n            Console.WriteLine(\"Total: $\" + cart.GetTotal());\n        }\n    }\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Added\"",
                  "expectedOutput": "Added",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Total\"",
                  "expectedOutput": "Total",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Define namespaces: 'namespace Name { class C { } }'. Import: 'using Name;' at top of file. Nested namespaces use dots: Company.Product.Feature."
                },
                {
                  "level": 2,
                  "text": "Circular using statements: If namespace A uses B, and B uses A, you can get confusing errors! Organize code so dependencies flow one direction (Models → Services → UI)."
                },
                {
                  "level": 3,
                  "text": "Forgetting using in nested namespaces: If MyStore.Services needs Product from MyStore.Models, you must add 'using MyStore.Models;' INSIDE the Services namespace block!"
                },
                {
                  "level": 4,
                  "text": "Namespace doesn't match folder: By convention, namespace should match folder structure! File at 'MyApp/Models/Customer.cs' should have 'namespace MyApp.Models'. Not required, but strong convention."
                },
                {
                  "level": 5,
                  "text": "Using vs namespace: 'using System;' IMPORTS a namespace (at top of file). 'namespace MyApp { }' DEFINES a namespace (wraps your code). Don't confuse them!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Circular using statements",
                  "consequence": "If namespace A uses B, and B uses A, you can get confusing errors! Organize code so dependencies flow one direction (Models → Services → UI).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting using in nested namespaces",
                  "consequence": "If MyStore.Services needs Product from MyStore.Models, you must add 'using MyStore.Models;' INSIDE the Services namespace block!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Namespace doesn't match folder",
                  "consequence": "By convention, namespace should match folder structure! File at 'MyApp/Models/Customer.cs' should have 'namespace MyApp.Models'. Not required, but strong convention.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using vs namespace",
                  "consequence": "'using System;' IMPORTS a namespace (at top of file). 'namespace MyApp { }' DEFINES a namespace (wraps your code). Don't confuse them!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-08-04",
          "title": "Using System Libraries (Built-In Tools)",
          "moduleId": "module-08",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine building a house. You COULD make your own hammer, saw, and nails from scratch... or you could buy them from a hardware store! Much faster!\n\nThat's what SYSTEM LIBRARIES are - pre-built tools that come with .NET:\n• System.Collections.Generic → List, Dictionary, Queue\n• System.IO → Reading/writing files\n• System.Linq → Querying data (next module!)\n• System.Text → String manipulation, StringBuilder\n• System.DateTime → Dates and times\n\nThese are BATTLE-TESTED, OPTIMIZED tools used by millions of developers. Don't reinvent the wheel!\n\nThink: System libraries = 'The free toolbox that comes with C#.' Learning what's available saves HUNDREDS of hours of coding!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Text;\n\n// COLLECTIONS (System.Collections.Generic)\nList<string> names = new List<string>();\nnames.Add(\"Alice\");\nnames.Add(\"Bob\");\n\nDictionary<string, int> ages = new Dictionary<string, int>();\nages[\"Alice\"] = 30;\nages[\"Bob\"] = 25;\n\n// FILE I/O (System.IO)\nstring path = \"test.txt\";\nFile.WriteAllText(path, \"Hello from C#!\");\nstring content = File.ReadAllText(path);\nConsole.WriteLine(content);\n\nif (File.Exists(path))\n{\n    Console.WriteLine(\"File exists!\");\n}\n\n// STRING MANIPULATION (System.Text)\nStringBuilder sb = new StringBuilder();\nsb.Append(\"Hello\");\nsb.Append(\" \");\nsb.Append(\"World\");\nstring result = sb.ToString();\nConsole.WriteLine(result);\n\n// DATE/TIME (System)\nDateTime now = DateTime.Now;\nConsole.WriteLine(\"Current time: \" + now);\n\nDateTime birthday = new DateTime(1990, 5, 15);\nTimeSpan age = now - birthday;\nConsole.WriteLine(\"Days old: \" + age.TotalDays);\n\n// MATH (System)\ndouble squareRoot = Math.Sqrt(16);\ndouble power = Math.Pow(2, 8);  // 2^8\nint max = Math.Max(10, 20);\nConsole.WriteLine(\"Max: \" + max);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`System.IO namespace`**: File operations: File.ReadAllText(), File.WriteAllText(), File.Exists(), Directory.CreateDirectory(). Essential for working with files!\n\n**`StringBuilder`**: From System.Text. Use when concatenating strings in loops! String concat creates new objects (slow). StringBuilder modifies in-place (fast).\n\n**`DateTime`**: From System. DateTime.Now (current), DateTime.Today (date only). Arithmetic: subtract dates to get TimeSpan. Format with .ToString(\"yyyy-MM-dd\").\n\n**`Math class`**: Static methods: Math.Sqrt(), Math.Pow(), Math.Round(), Math.Abs(), Math.Min(), Math.Max(). From System namespace."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-08-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a simple journal/diary application using System libraries!\n\n1. Create a 'journal.txt' file\n2. Use StringBuilder to build an entry:\n   - Current date/time (DateTime.Now)\n   - User's mood (ask user)\n   - User's journal entry (ask user)\n3. Append the entry to journal.txt\n4. Read and display all entries from the file\n5. Display how many days until New Year (use DateTime and TimeSpan)",
              "starterCode": "using System;\nusing System.IO;\nusing System.Text;\n\nstring filePath = \"journal.txt\";\n\n// Build journal entry with StringBuilder\nStringBuilder entry = new StringBuilder();\n\n// Add current date/time\n\n// Ask for mood and journal text\nConsole.WriteLine(\"How are you feeling?\");\nstring mood = Console.ReadLine();\n\nConsole.WriteLine(\"What's on your mind?\");\nstring thoughts = Console.ReadLine();\n\n// Build entry\n\n// Append to file\n\n// Read all entries\n\n// Calculate days until New Year",
              "solution": "using System;\nusing System.IO;\nusing System.Text;\n\nstring filePath = \"journal.txt\";\n\nStringBuilder entry = new StringBuilder();\nentry.AppendLine(\"=== Journal Entry ===\");\nentry.AppendLine(\"Date: \" + DateTime.Now.ToString(\"yyyy-MM-dd HH:mm\"));\n\nConsole.WriteLine(\"How are you feeling?\");\nstring mood = Console.ReadLine();\nentry.AppendLine(\"Mood: \" + mood);\n\nConsole.WriteLine(\"What's on your mind?\");\nstring thoughts = Console.ReadLine();\nentry.AppendLine(\"Entry: \" + thoughts);\nentry.AppendLine(\"\");\n\nFile.AppendAllText(filePath, entry.ToString());\nConsole.WriteLine(\"Journal entry saved!\");\n\nif (File.Exists(filePath))\n{\n    Console.WriteLine(\"\\nAll entries:\");\n    string allEntries = File.ReadAllText(filePath);\n    Console.WriteLine(allEntries);\n}\n\nDateTime newYear = new DateTime(DateTime.Now.Year + 1, 1, 1);\nTimeSpan timeUntil = newYear - DateTime.Now;\nConsole.WriteLine(\"Days until New Year: \" + (int)timeUntil.TotalDays);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Journal\"",
                  "expectedOutput": "Journal",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"saved\"",
                  "expectedOutput": "saved",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Days until\"",
                  "expectedOutput": "Days until",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "StringBuilder: 'new StringBuilder()', then '.Append()' or '.AppendLine()'. Files: 'File.AppendAllText(path, text)'. DateTime: 'DateTime.Now', subtract dates for TimeSpan."
                },
                {
                  "level": 2,
                  "text": "File path issues: On Windows, use @\"C:\\folder\\file.txt\" (verbatim string with @) or \"C:\\\\folder\\\\file.txt\" (escape backslashes). Or use Path.Combine() for cross-platform!"
                },
                {
                  "level": 3,
                  "text": "String concatenation in loops: DON'T use '+' in loops for strings! 'str += x' creates new string each time (slow!). Use StringBuilder for loops."
                },
                {
                  "level": 4,
                  "text": "DateTime vs DateTimeOffset: DateTime doesn't store timezone! For apps across timezones, use DateTimeOffset. For local-only apps, DateTime is fine."
                },
                {
                  "level": 5,
                  "text": "Not checking File.Exists(): Calling File.ReadAllText() on non-existent file throws exception! Always check 'if (File.Exists(path))' first, or use try/catch."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "File path issues",
                  "consequence": "On Windows, use @\"C:\\folder\\file.txt\" (verbatim string with @) or \"C:\\\\folder\\\\file.txt\" (escape backslashes). Or use Path.Combine() for cross-platform!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "String concatenation in loops",
                  "consequence": "DON'T use '+' in loops for strings! 'str += x' creates new string each time (slow!). Use StringBuilder for loops.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "DateTime vs DateTimeOffset",
                  "consequence": "DateTime doesn't store timezone! For apps across timezones, use DateTimeOffset. For local-only apps, DateTime is fine.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not checking File.Exists()",
                  "consequence": "Calling File.ReadAllText() on non-existent file throws exception! Always check 'if (File.Exists(path))' first, or use try/catch.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-08-05",
          "title": "NuGet (The App Store for Code)",
          "moduleId": "module-08",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you want to add GPS navigation to your phone. You don't build it from scratch - you download an app from the App Store!\n\nThat's what NUGET is - the 'app store' for C# code libraries (called PACKAGES):\n• Need to work with JSON? Use built-in System.Text.Json (or install Newtonsoft.Json)\n• Need to send emails? Install MailKit\n• Need to parse CSV files? Install CsvHelper\n• Need to connect to databases? Install Entity Framework Core\n\nThese packages are built by other developers and SHARED for free (mostly). They're:\n• TESTED by thousands of users\n• MAINTAINED with bug fixes\n• DOCUMENTED with examples\n• VERSIONED (you can upgrade/downgrade)\n\nThink: NuGet = 'Don't write everything yourself! Stand on the shoulders of giants.' Professional developers use dozens of NuGet packages!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// INSTALLING packages (via terminal or Visual Studio)\n// dotnet add package Humanizer\n// System.Text.Json is BUILT-IN - no install needed!\n\n// Once installed, use them like system libraries!\nusing System;\nusing System.Text.Json;  // Built-in JSON library (modern .NET)\nusing Humanizer;  // Makes things human-readable\n\n// JSON SERIALIZATION with System.Text.Json\nclass Person\n{\n    public string Name { get; set; }\n    public int Age { get; set; }\n    public string Email { get; set; }\n}\n\nPerson person = new Person \n{ \n    Name = \"Alice\", \n    Age = 30, \n    Email = \"alice@example.com\" \n};\n\n// Convert object to JSON string\nstring json = JsonSerializer.Serialize(person, new JsonSerializerOptions { WriteIndented = true });\nConsole.WriteLine(\"JSON:\\n\" + json);\n\n// Convert JSON string back to object\nstring jsonData = \"{\\\"Name\\\":\\\"Bob\\\",\\\"Age\\\":25}\";\nPerson restored = JsonSerializer.Deserialize<Person>(jsonData)!;\nConsole.WriteLine(\"Name: \" + restored.Name);\n\n// HUMANIZER library - makes numbers/dates readable\nDateTime past = DateTime.Now.AddDays(-5);\nConsole.WriteLine(past.Humanize());  // \"5 days ago\"\n\nConsole.WriteLine(\"NoOfDonuts\".Humanize());  // \"No of donuts\"\nConsole.WriteLine(\"1000\".ToWords());  // \"one thousand\"",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`dotnet add package PackageName`**: Command-line way to install NuGet packages. Run in project folder. Adds package to .csproj file automatically.\n\n**`JsonSerializer.Serialize()`**: From System.Text.Json (built-in). Converts C# objects to JSON strings. Use JsonSerializerOptions { WriteIndented = true } for readable output.\n\n**`JsonSerializer.Deserialize<T>()`**: Converts JSON string back to C# object. Specify type with <Person>. Returns null if JSON doesn't match structure - use ! operator when you know data is valid.\n\n**`Package versioning`**: Packages have versions: 13.0.3, 2.1.0. Install specific version: 'dotnet add package Name --version 2.1.0'. Update: 'dotnet add package Name'."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-08-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Work with JSON data using System.Text.Json!\n\n1. Create a 'Book' class:\n   - string Title\n   - string Author\n   - int Year\n   - decimal Price\n\n2. Create a List of 3 books\n\n3. Use JsonSerializer.Serialize() to convert list to JSON\n   - Use JsonSerializerOptions { WriteIndented = true } for readability\n   - Display the JSON\n\n4. Save JSON to a file (books.json)\n\n5. Read the file back and deserialize to List<Book>\n\n6. Display all book titles from the deserialized list\n\nNOTE: System.Text.Json is built into .NET - no NuGet install needed!",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Text.Json;\n\nclass Book\n{\n    // Define properties\n}\n\n// Create list of books\nList<Book> books = new List<Book>();\n\n// Add 3 books\n\n// Serialize to JSON\nstring json = JsonSerializer.Serialize(books, new JsonSerializerOptions { WriteIndented = true });\nConsole.WriteLine(\"JSON:\\n\" + json);\n\n// Save to file\n\n// Read from file and deserialize\n\n// Display book titles",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.IO;\nusing System.Text.Json;\n\nclass Book\n{\n    public string Title { get; set; }\n    public string Author { get; set; }\n    public int Year { get; set; }\n    public decimal Price { get; set; }\n}\n\nList<Book> books = new List<Book>();\nbooks.Add(new Book { Title = \"1984\", Author = \"Orwell\", Year = 1949, Price = 15.99m });\nbooks.Add(new Book { Title = \"To Kill a Mockingbird\", Author = \"Lee\", Year = 1960, Price = 12.99m });\nbooks.Add(new Book { Title = \"The Great Gatsby\", Author = \"Fitzgerald\", Year = 1925, Price = 10.99m });\n\nstring json = JsonSerializer.Serialize(books, new JsonSerializerOptions { WriteIndented = true });\nConsole.WriteLine(\"JSON:\\n\" + json);\n\nFile.WriteAllText(\"books.json\", json);\nConsole.WriteLine(\"\\nSaved to books.json\");\n\nstring fileContent = File.ReadAllText(\"books.json\");\nList<Book> loadedBooks = JsonSerializer.Deserialize<List<Book>>(fileContent)!;\n\nConsole.WriteLine(\"\\nLoaded books:\");\nforeach (Book book in loadedBooks)\n{\n    Console.WriteLine(\"- \" + book.Title + \" by \" + book.Author);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"JSON\"",
                  "expectedOutput": "JSON",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Saved\"",
                  "expectedOutput": "Saved",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Loaded books\"",
                  "expectedOutput": "Loaded books",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Serialize: 'JsonSerializer.Serialize(obj, new JsonSerializerOptions { WriteIndented = true })'. Deserialize: 'JsonSerializer.Deserialize<Type>(json)!'. Save/load JSON with File.WriteAllText and File.ReadAllText."
                },
                {
                  "level": 2,
                  "text": "System.Text.Json is built-in: Unlike third-party packages, System.Text.Json comes with .NET - no installation needed! Just add 'using System.Text.Json;' at the top."
                },
                {
                  "level": 3,
                  "text": "Property names must match JSON: JsonSerializer uses property names! If JSON has \\\"title\\\" but your class has \\\"Title\\\", use [JsonPropertyName(\\\"title\\\")] attribute or it won't map correctly."
                },
                {
                  "level": 4,
                  "text": "Null reference after deserialize: If JSON structure doesn't match class, Deserialize returns null or incomplete object! Use the ! operator when you know data is valid, or check for null."
                },
                {
                  "level": 5,
                  "text": "Versioning conflicts: Different packages might need different versions of same dependency! NuGet usually resolves this, but sometimes you get conflicts. Check package compatibility."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Missing using statement",
                  "consequence": "System.Text.Json is built into .NET - no installation needed! Just add 'using System.Text.Json;' at the top of your file.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Property names must match JSON",
                  "consequence": "JsonSerializer uses property names! If JSON has \\\"title\\\" but your class has \\\"Title\\\", use [JsonPropertyName(\\\"title\\\")] attribute or it won't map correctly.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Null reference after deserialize",
                  "consequence": "If JSON structure doesn't match class, Deserialize returns null or incomplete object! Use the ! operator when you know data is valid, or check for null.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Versioning conflicts",
                  "consequence": "Different packages might need different versions of same dependency! NuGet usually resolves this, but sometimes you get conflicts. Check package compatibility.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-09",
      "title": "LINQ and Query Expressions",
      "description": "Learn Language Integrated Query (LINQ) for querying collections, filtering, sorting, and data transformation.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-09-01",
          "title": "What is LINQ? (The Search Engine Analogy)",
          "moduleId": "module-09",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you have 1000 photos on your phone. You want to find:\n• All photos from 2023\n• Only photos of your dog\n• Photos sorted by date\n\nYou could write a FOR LOOP to check each photo manually... OR you could use the built-in search feature! Much easier!\n\nThat's what LINQ is - a 'search engine' for collections in C#:\n• LINQ = Language Integrated Query\n• Works on any collection: arrays, Lists, Dictionaries\n• Write SQL-like queries in C# code\n• Much cleaner than manual loops!\n\nTwo syntaxes:\n1. METHOD SYNTAX: list.Where(x => x > 5).OrderBy(x => x)\n2. QUERY SYNTAX: from x in list where x > 5 orderby x select x\n\nMost developers use METHOD syntax (we'll focus on that!).\n\nThink: LINQ = 'Asking your collection smart questions instead of manually digging through it.'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;  // MUST include System.Linq!\n\nList<int> numbers = new List<int> { 1, 5, 2, 8, 3, 9, 4, 7, 6 };\n\n// WITHOUT LINQ - manual loop\nList<int> evenNumbers = new List<int>();\nforeach (int num in numbers)\n{\n    if (num % 2 == 0)\n    {\n        evenNumbers.Add(num);\n    }\n}\nConsole.WriteLine(\"Even (without LINQ): \" + string.Join(\", \", evenNumbers));\n\n// WITH LINQ - one line!\nvar evenLinq = numbers.Where(n => n % 2 == 0);\nConsole.WriteLine(\"Even (with LINQ): \" + string.Join(\", \", evenLinq));\n\n// More LINQ examples\nvar greaterThanFive = numbers.Where(n => n > 5);\nvar sorted = numbers.OrderBy(n => n);\nvar firstThree = numbers.Take(3);\n\nConsole.WriteLine(\"Greater than 5: \" + string.Join(\", \", greaterThanFive));\nConsole.WriteLine(\"Sorted: \" + string.Join(\", \", sorted));\nConsole.WriteLine(\"First 3: \" + string.Join(\", \", firstThree));\n\n// QUERY SYNTAX (alternative)\nvar query = from n in numbers\n            where n > 5\n            orderby n descending\n            select n;\n\nConsole.WriteLine(\"Query syntax: \" + string.Join(\", \", query));",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`using System.Linq;`**: MUST include this namespace to use LINQ! Without it, methods like .Where(), .Select() won't be available.\n\n**`collection.Where(x => condition)`**: Where() filters items. 'x => condition' is a LAMBDA expression (more next lesson!). Returns items where condition is true.\n\n**`Lambda: x => x > 5`**: 'x' is the parameter (each item). '=>' means 'goes to'. 'x > 5' is the expression. Read as: 'each item x goes to x > 5'.\n\n**`LINQ is lazy`**: LINQ doesn't execute immediately! 'var result = list.Where(...)' just creates a QUERY. Execution happens when you iterate (foreach) or call .ToList()."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Practice basic LINQ queries!\n\n1. Create a List of integers: 10, 25, 5, 30, 15, 40, 20, 35\n\n2. Use LINQ to:\n   - Find all numbers greater than 20\n   - Find all numbers divisible by 5 (n % 5 == 0)\n   - Sort numbers in descending order\n   - Get the first 3 numbers (after sorting)\n\n3. Display each result with descriptive labels\n\nUSE .Where(), .OrderByDescending(), and .Take()!",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 10, 25, 5, 30, 15, 40, 20, 35 };\n\n// Find numbers > 20\nvar greaterThan20 = numbers.Where(n => /* condition */);\n\n// Find numbers divisible by 5\nvar divisibleByFive = numbers.Where(n => /* condition */);\n\n// Sort descending\nvar sorted = numbers.OrderByDescending(n => n);\n\n// First 3 from sorted\nvar topThree = sorted.Take(3);\n\n// Display results\nConsole.WriteLine(\"Greater than 20: \" + string.Join(\", \", greaterThan20));",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 10, 25, 5, 30, 15, 40, 20, 35 };\n\nvar greaterThan20 = numbers.Where(n => n > 20);\nConsole.WriteLine(\"Greater than 20: \" + string.Join(\", \", greaterThan20));\n\nvar divisibleByFive = numbers.Where(n => n % 5 == 0);\nConsole.WriteLine(\"Divisible by 5: \" + string.Join(\", \", divisibleByFive));\n\nvar sorted = numbers.OrderByDescending(n => n);\nConsole.WriteLine(\"Sorted descending: \" + string.Join(\", \", sorted));\n\nvar topThree = sorted.Take(3);\nConsole.WriteLine(\"Top 3: \" + string.Join(\", \", topThree));",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Greater than 20\"",
                  "expectedOutput": "Greater than 20",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Divisible by 5\"",
                  "expectedOutput": "Divisible by 5",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Top 3\"",
                  "expectedOutput": "Top 3",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Where: 'list.Where(x => condition)'. OrderByDescending: 'list.OrderByDescending(x => x)'. Take: 'list.Take(n)'. Don't forget 'using System.Linq;'!"
                },
                {
                  "level": 2,
                  "text": "Forgetting 'using System.Linq': Without this, you get 'Where does not exist' errors! LINQ methods are EXTENSION methods from System.Linq namespace."
                },
                {
                  "level": 3,
                  "text": "Expecting immediate execution: 'var result = list.Where(...)' doesn't run yet! It creates a query. Execution happens on iteration (.ToList(), foreach, etc.). This is called DEFERRED EXECUTION."
                },
                {
                  "level": 4,
                  "text": "Lambda syntax confusion: 'x => x > 5' is shorthand for a function! Read it as: 'for each x, return whether x > 5'. The '=>' is the lambda operator."
                },
                {
                  "level": 5,
                  "text": "Modifying original collection: LINQ doesn't modify the original! 'list.Where(...)' returns a NEW sequence. Original list is unchanged. Use .ToList() to get a new list."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'using System.Linq'",
                  "consequence": "Without this, you get 'Where does not exist' errors! LINQ methods are EXTENSION methods from System.Linq namespace.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Expecting immediate execution",
                  "consequence": "'var result = list.Where(...)' doesn't run yet! It creates a query. Execution happens on iteration (.ToList(), foreach, etc.). This is called DEFERRED EXECUTION.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Lambda syntax confusion",
                  "consequence": "'x => x > 5' is shorthand for a function! Read it as: 'for each x, return whether x > 5'. The '=>' is the lambda operator.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Modifying original collection",
                  "consequence": "LINQ doesn't modify the original! 'list.Where(...)' returns a NEW sequence. Original list is unchanged. Use .ToList() to get a new list.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-09-02",
          "title": "IEnumerable<T> (The Stream of Data)",
          "moduleId": "module-09",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a conveyor belt in a factory. Items move along one at a time. You don't need ALL items in memory - you process each one as it arrives!\n\nThat's IEnumerable<T> - it represents a SEQUENCE of items:\n• 'T' is the type: IEnumerable<int>, IEnumerable<string>\n• Items are accessed ONE AT A TIME (via foreach)\n• Doesn't load everything into memory at once\n• LINQ methods return IEnumerable<T>\n\nWhy use it?\n• MEMORY EFFICIENT: Query 1 million items without loading them all\n• LAZY EVALUATION: Computation happens only when needed\n• FLEXIBLE: Works with any collection type\n\nList<T> implements IEnumerable<T>, arrays implement it, LINQ results are IEnumerable<T>.\n\nThink: IEnumerable<T> = 'A promise of future items, delivered one at a time when you ask.'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n// IEnumerable<T> as return type\nIEnumerable<int> GetNumbers()\n{\n    Console.WriteLine(\"Generating numbers...\");\n    yield return 1;\n    yield return 2;\n    yield return 3;\n}\n\nIEnumerable<int> numbers = GetNumbers();\nConsole.WriteLine(\"Method called, but not executed yet!\");\n\nforeach (int num in numbers)  // NOW it executes!\n{\n    Console.WriteLine(\"Number: \" + num);\n}\n\n// LINQ returns IEnumerable<T>\nList<int> sourceList = new List<int> { 1, 2, 3, 4, 5 };\nIEnumerable<int> evenNumbers = sourceList.Where(n => n % 2 == 0);\n\nConsole.WriteLine(\"Query created, not executed!\");\n\nforeach (int num in evenNumbers)  // Executes here!\n{\n    Console.WriteLine(\"Even: \" + num);\n}\n\n// Convert to concrete collection with .ToList() or .ToArray()\nList<int> evenList = sourceList.Where(n => n % 2 == 0).ToList();\nint[] evenArray = sourceList.Where(n => n % 2 == 0).ToArray();\n\nConsole.WriteLine(\"Count: \" + evenList.Count);  // .Count on List (property)\nConsole.WriteLine(\"Count: \" + evenNumbers.Count());  // .Count() on IEnumerable (method)",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`IEnumerable<T>`**: Interface representing a sequence of items of type T. Any collection (List, array, etc.) can be treated as IEnumerable<T>.\n\n**`Deferred execution`**: LINQ queries return IEnumerable<T> but don't execute immediately! Execution happens when you iterate (foreach) or materialize (.ToList(), .Count(), etc.).\n\n**`.ToList() / .ToArray()`**: Converts IEnumerable<T> to concrete collection. Forces immediate execution. Use when you need to iterate multiple times or need Count/indexing.\n\n**`yield return`**: Advanced: Creates an IEnumerable<T> by returning items one at a time. Enables lazy evaluation. Each 'yield return' pauses execution until next item needed."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Work with IEnumerable<T> and understand deferred execution!\n\n1. Create a List of strings: \"apple\", \"banana\", \"apricot\", \"blueberry\", \"avocado\"\n\n2. Use LINQ to create an IEnumerable<string> of fruits starting with 'a'\n   - DON'T use .ToList() yet!\n   - Print \"Query created\"\n\n3. Add \"cherry\" to the original list AFTER creating the query\n\n4. Now iterate the query result with foreach\n   - What do you notice? Does it include \"cherry\"?\n\n5. Create a second query for fruits longer than 6 characters\n   - Convert this one to a List with .ToList()\n   - Display the count and items",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<string> fruits = new List<string> { \"apple\", \"banana\", \"apricot\", \"blueberry\", \"avocado\" };\n\n// Query 1: starts with 'a' (deferred)\nIEnumerable<string> startsWithA = fruits.Where(f => /* condition */);\nConsole.WriteLine(\"Query created\");\n\n// Add item AFTER query creation\nfruits.Add(\"cherry\");\n\n// Iterate query 1\nforeach (string fruit in startsWithA)\n{\n    Console.WriteLine(\"Starts with A: \" + fruit);\n}\n\n// Query 2: longer than 6 characters (materialized)\nList<string> longFruits = fruits.Where(f => /* condition */).ToList();\nConsole.WriteLine(\"Long fruits count: \" + longFruits.Count);",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<string> fruits = new List<string> { \"apple\", \"banana\", \"apricot\", \"blueberry\", \"avocado\" };\n\nIEnumerable<string> startsWithA = fruits.Where(f => f.StartsWith(\"a\"));\nConsole.WriteLine(\"Query created (deferred execution)\");\n\nfruits.Add(\"cherry\");\nConsole.WriteLine(\"Added 'cherry' to list\");\n\nConsole.WriteLine(\"\\nFruits starting with 'a':\");\nforeach (string fruit in startsWithA)\n{\n    Console.WriteLine(\"- \" + fruit);\n}\n\nList<string> longFruits = fruits.Where(f => f.Length > 6).ToList();\nConsole.WriteLine(\"\\nLong fruits (>6 chars): \" + longFruits.Count);\nforeach (string fruit in longFruits)\n{\n    Console.WriteLine(\"- \" + fruit);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Query created\"",
                  "expectedOutput": "Query created",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"cherry\"",
                  "expectedOutput": "cherry",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Long fruits\"",
                  "expectedOutput": "Long fruits",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "IEnumerable<T> queries execute when iterated! .Where() returns IEnumerable. .ToList() forces immediate execution. Use .StartsWith() for string prefix check."
                },
                {
                  "level": 2,
                  "text": "Iterating IEnumerable multiple times: Each iteration re-executes the query! If you need to iterate multiple times, use .ToList() once. Otherwise, expensive operations run repeatedly."
                },
                {
                  "level": 3,
                  "text": "Modifying collection during iteration: Don't change the source collection while iterating IEnumerable! You'll get 'Collection was modified' exception. Materialize with .ToList() first if you need to modify."
                },
                {
                  "level": 4,
                  "text": "Expecting snapshot behavior: IEnumerable is LIVE! If you create query, then modify source list, the query sees the changes when executed. For snapshot, use .ToList() immediately."
                },
                {
                  "level": 5,
                  "text": ".Count vs .Count(): IEnumerable<T> has .Count() METHOD (executes query!). List<T> has .Count PROPERTY (instant). Using .Count() on large IEnumerable can be slow!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Iterating IEnumerable multiple times",
                  "consequence": "Each iteration re-executes the query! If you need to iterate multiple times, use .ToList() once. Otherwise, expensive operations run repeatedly.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Modifying collection during iteration",
                  "consequence": "Don't change the source collection while iterating IEnumerable! You'll get 'Collection was modified' exception. Materialize with .ToList() first if you need to modify.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Expecting snapshot behavior",
                  "consequence": "IEnumerable is LIVE! If you create query, then modify source list, the query sees the changes when executed. For snapshot, use .ToList() immediately.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": ".Count vs .Count()",
                  "consequence": "IEnumerable<T> has .Count() METHOD (executes query!). List<T> has .Count PROPERTY (instant). Using .Count() on large IEnumerable can be slow!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-09-03",
          "title": "Filtering with .Where() (The Filter Funnel)",
          "moduleId": "module-09",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine gold miners using a sieve (filter) to separate gold from dirt. The filter lets ONLY gold through!\n\nThat's .Where() - it's a FILTER for collections:\n• Input: A collection of items\n• Process: Test each item with a condition\n• Output: Only items that pass the test\n\nThe condition is a LAMBDA EXPRESSION:\n• 'x => x > 5' means 'for each x, check if x > 5'\n• 'x' is the current item\n• '=>' means 'goes to' or 'such that'\n• Right side is the boolean condition\n\nMultiple conditions?\n• AND: .Where(x => x > 5 && x < 10)\n• OR: .Where(x => x == 1 || x == 100)\n• Method calls: .Where(x => x.StartsWith(\"A\"))\n\nThink: .Where() = 'Keep only the items that match my criteria, discard the rest.'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n\n// Simple filter\nvar evens = numbers.Where(n => n % 2 == 0);\nConsole.WriteLine(\"Evens: \" + string.Join(\", \", evens));\n\n// Multiple conditions with AND\nvar range = numbers.Where(n => n > 3 && n < 8);\nConsole.WriteLine(\"Between 3 and 8: \" + string.Join(\", \", range));\n\n// OR conditions\nvar extremes = numbers.Where(n => n <= 2 || n >= 9);\nConsole.WriteLine(\"Extremes: \" + string.Join(\", \", extremes));\n\n// Working with objects\nclass Person\n{\n    public string Name;\n    public int Age;\n    public string City;\n}\n\nList<Person> people = new List<Person>\n{\n    new Person { Name = \"Alice\", Age = 30, City = \"NYC\" },\n    new Person { Name = \"Bob\", Age = 25, City = \"LA\" },\n    new Person { Name = \"Charlie\", Age = 35, City = \"NYC\" },\n    new Person { Name = \"Diana\", Age = 28, City = \"Chicago\" }\n};\n\n// Filter by property\nvar inNYC = people.Where(p => p.City == \"NYC\");\nforeach (var person in inNYC)\n{\n    Console.WriteLine(person.Name + \" lives in NYC\");\n}\n\n// Complex filter: adults in NYC\nvar adultsInNYC = people.Where(p => p.Age >= 30 && p.City == \"NYC\");\nforeach (var person in adultsInNYC)\n{\n    Console.WriteLine(person.Name + \" is 30+ in NYC\");\n}\n\n// Method calls in filter\nvar startsWithC = people.Where(p => p.Name.StartsWith(\"C\"));\nforeach (var person in startsWithC)\n{\n    Console.WriteLine(\"Starts with C: \" + person.Name);\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`collection.Where(x => condition)`**: Where() tests each item. 'x' is each item (you choose the name!). Returns IEnumerable<T> with only items where condition is true.\n\n**`Lambda: x => expression`**: Lambda is anonymous function. 'x' is parameter. '=>' is lambda operator. Expression returns bool (true/false). Read: 'x such that expression'.\n\n**`Multiple conditions`**: Combine with && (AND), || (OR), ! (NOT). Example: 'x => x > 5 && x < 10' means 'between 5 and 10'.\n\n**`Object properties in lambdas`**: Access properties inside lambda: 'p => p.Age > 30'. Can call methods too: 'p => p.Name.Contains(\"a\")'."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a product filtering system!\n\n1. Create a 'Product' class:\n   - string Name\n   - decimal Price\n   - string Category\n   - int Stock\n\n2. Create a List with at least 6 products:\n   - Mix of Electronics, Clothing, Books\n   - Varying prices ($10 - $500)\n   - Different stock levels (0 - 100)\n\n3. Use .Where() to find:\n   - Products under $50\n   - Electronics with stock > 0\n   - Products that are either Books OR price > $200\n   - Out of stock items (stock == 0)\n\n4. Display results for each filter with descriptive labels",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    new Product { Name = \"Shirt\", Price = 25, Category = \"Clothing\", Stock = 50 },\n    // Add 4 more products\n};\n\n// Filter 1: Under $50\nvar affordable = products.Where(p => /* condition */);\n\n// Filter 2: Electronics in stock\nvar availableElectronics = products.Where(p => /* condition */);\n\n// Filter 3: Books OR expensive\nvar booksOrExpensive = products.Where(p => /* condition */);\n\n// Filter 4: Out of stock\nvar outOfStock = products.Where(p => /* condition */);",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    new Product { Name = \"Shirt\", Price = 25, Category = \"Clothing\", Stock = 50 },\n    new Product { Name = \"Novel\", Price = 15, Category = \"Books\", Stock = 0 },\n    new Product { Name = \"Headphones\", Price = 79, Category = \"Electronics\", Stock = 20 },\n    new Product { Name = \"Jeans\", Price = 45, Category = \"Clothing\", Stock = 30 },\n    new Product { Name = \"Tablet\", Price = 299, Category = \"Electronics\", Stock = 0 }\n};\n\nvar affordable = products.Where(p => p.Price < 50);\nConsole.WriteLine(\"Products under $50:\");\nforeach (var p in affordable)\n{\n    Console.WriteLine(\"- \" + p.Name + \": $\" + p.Price);\n}\n\nvar availableElectronics = products.Where(p => p.Category == \"Electronics\" && p.Stock > 0);\nConsole.WriteLine(\"\\nElectronics in stock:\");\nforeach (var p in availableElectronics)\n{\n    Console.WriteLine(\"- \" + p.Name + \" (\" + p.Stock + \" units)\");\n}\n\nvar booksOrExpensive = products.Where(p => p.Category == \"Books\" || p.Price > 200);\nConsole.WriteLine(\"\\nBooks OR price > $200:\");\nforeach (var p in booksOrExpensive)\n{\n    Console.WriteLine(\"- \" + p.Name);\n}\n\nvar outOfStock = products.Where(p => p.Stock == 0);\nConsole.WriteLine(\"\\nOut of stock:\");\nforeach (var p in outOfStock)\n{\n    Console.WriteLine(\"- \" + p.Name);\n}",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"under $50\"",
                  "expectedOutput": "under $50",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Electronics in stock\"",
                  "expectedOutput": "Electronics in stock",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Out of stock\"",
                  "expectedOutput": "Out of stock",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Where syntax: '.Where(item => condition)'. AND: '&&'. OR: '||'. Compare strings: 'p.Category == \"Books\"'. Property access: 'p.Price', 'p.Stock'."
                },
                {
                  "level": 2,
                  "text": "Using = instead of ==: Comparison is '==' (double equals)! Single '=' is assignment, won't work in lambda. 'x => x.Age = 30' is ERROR!"
                },
                {
                  "level": 3,
                  "text": "Forgetting parentheses with complex conditions: 'x => x > 5 && x < 10 || x == 100' can be ambiguous! Use parentheses: 'x => (x > 5 && x < 10) || x == 100'."
                },
                {
                  "level": 4,
                  "text": "Case sensitivity in string comparison: 'Category == \"electronics\"' won't match \"Electronics\"! Use .Equals(\"electronics\", StringComparison.OrdinalIgnoreCase) for case-insensitive."
                },
                {
                  "level": 5,
                  "text": "Null reference in lambda: If object property could be null, check first! 'x => x.Name.StartsWith(\"A\")' crashes if Name is null. Use: 'x => x.Name != null && x.Name.StartsWith(\"A\")'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using = instead of ==",
                  "consequence": "Comparison is '==' (double equals)! Single '=' is assignment, won't work in lambda. 'x => x.Age = 30' is ERROR!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting parentheses with complex conditions",
                  "consequence": "'x => x > 5 && x < 10 || x == 100' can be ambiguous! Use parentheses: 'x => (x > 5 && x < 10) || x == 100'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Case sensitivity in string comparison",
                  "consequence": "'Category == \"electronics\"' won't match \"Electronics\"! Use .Equals(\"electronics\", StringComparison.OrdinalIgnoreCase) for case-insensitive.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Null reference in lambda",
                  "consequence": "If object property could be null, check first! 'x => x.Name.StartsWith(\"A\")' crashes if Name is null. Use: 'x => x.Name != null && x.Name.StartsWith(\"A\")'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-09-04",
          "title": "Transforming with .Select() (The Transformation Machine)",
          "moduleId": "module-09",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a factory machine that takes raw materials and TRANSFORMS them:\n• Input: Raw wood → Output: Furniture\n• Input: Fruit → Output: Juice\n• Input: Cotton → Output: T-shirts\n\nThat's .Select() - it TRANSFORMS each item in a collection:\n• Input: List of numbers → Output: Each number squared\n• Input: List of people → Output: Just their names\n• Input: List of products → Output: Just their prices\n\n.Where() FILTERS (keeps some items), .Select() TRANSFORMS (changes each item)!\n\nYou can transform to:\n• Same type: numbers → numbers * 2\n• Different type: Person objects → string names\n• New anonymous objects: { Name = p.Name, IsAdult = p.Age >= 18 }\n\nThink: .Select() = 'Transform every item in the collection using this recipe.'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 1, 2, 3, 4, 5 };\n\n// Transform to same type\nvar squared = numbers.Select(n => n * n);\nConsole.WriteLine(\"Squared: \" + string.Join(\", \", squared));\n\nvar doubled = numbers.Select(n => n * 2);\nConsole.WriteLine(\"Doubled: \" + string.Join(\", \", doubled));\n\n// Transform with objects\nclass Person\n{\n    public string Name;\n    public int Age;\n    public string City;\n}\n\nList<Person> people = new List<Person>\n{\n    new Person { Name = \"Alice\", Age = 30, City = \"NYC\" },\n    new Person { Name = \"Bob\", Age = 25, City = \"LA\" },\n    new Person { Name = \"Charlie\", Age = 35, City = \"Chicago\" }\n};\n\n// Extract just names (object → string)\nvar names = people.Select(p => p.Name);\nConsole.WriteLine(\"Names: \" + string.Join(\", \", names));\n\n// Extract ages (object → int)\nvar ages = people.Select(p => p.Age);\nConsole.WriteLine(\"Ages: \" + string.Join(\", \", ages));\n\n// Transform to new anonymous object\nvar summaries = people.Select(p => new \n{ \n    Name = p.Name, \n    IsAdult = p.Age >= 18,\n    Location = p.City\n});\n\nforeach (var summary in summaries)\n{\n    Console.WriteLine(summary.Name + \" - Adult: \" + summary.IsAdult + \" - \" + summary.Location);\n}\n\n// Combine .Where() and .Select()\nvar adultNames = people\n    .Where(p => p.Age >= 30)\n    .Select(p => p.Name);\n\nConsole.WriteLine(\"Adults (30+): \" + string.Join(\", \", adultNames));",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`collection.Select(x => transformation)`**: Select() transforms each item. Returns IEnumerable with transformed items. EVERY item is transformed (unlike Where which filters).\n\n**`Same type transform`**: numbers.Select(n => n * 2) takes int, returns int. But creates NEW collection - original unchanged!\n\n**`Type change transform`**: people.Select(p => p.Name) takes Person, returns string. Output type changes! IEnumerable<Person> → IEnumerable<string>.\n\n**`Anonymous object: new { }`**: Create unnamed object on-the-fly: 'new { Prop1 = value, Prop2 = value }'. Great for reshaping data! Type inferred by compiler."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a product summary report using .Select()!\n\n1. Create a 'Product' class:\n   - string Name\n   - decimal Price\n   - string Category\n   - int Stock\n\n2. Create a List with 5+ products\n\n3. Use .Select() to create:\n   - List of just product names\n   - List of prices with 10% discount applied\n   - List of anonymous objects with:\n     - Name\n     - Category\n     - TotalValue (Price * Stock)\n     - InStock (Stock > 0)\n\n4. Use .Where().Select() to get names of products under $100\n\n5. Display all results",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    // Add 4 more products\n};\n\n// Extract names\nvar productNames = products.Select(p => /* transform */);\n\n// Calculate discounted prices\nvar discountedPrices = products.Select(p => /* transform */);\n\n// Create summary objects\nvar summaries = products.Select(p => new\n{\n    // Properties\n});\n\n// Names of affordable products\nvar affordableNames = products\n    .Where(p => /* filter */)\n    .Select(p => /* transform */);",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n    public int Stock;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\", Stock = 5 },\n    new Product { Name = \"Mouse\", Price = 25, Category = \"Electronics\", Stock = 50 },\n    new Product { Name = \"Keyboard\", Price = 75, Category = \"Electronics\", Stock = 30 },\n    new Product { Name = \"Monitor\", Price = 299, Category = \"Electronics\", Stock = 0 },\n    new Product { Name = \"Webcam\", Price = 89, Category = \"Electronics\", Stock = 15 }\n};\n\nvar productNames = products.Select(p => p.Name);\nConsole.WriteLine(\"Product names: \" + string.Join(\", \", productNames));\n\nvar discountedPrices = products.Select(p => p.Price * 0.9m);\nConsole.WriteLine(\"\\nDiscounted prices: $\" + string.Join(\", $\", discountedPrices));\n\nvar summaries = products.Select(p => new\n{\n    Name = p.Name,\n    Category = p.Category,\n    TotalValue = p.Price * p.Stock,\n    InStock = p.Stock > 0\n});\n\nConsole.WriteLine(\"\\nProduct summaries:\");\nforeach (var s in summaries)\n{\n    Console.WriteLine(s.Name + \" (\" + s.Category + \") - Value: $\" + s.TotalValue + \" - In stock: \" + s.InStock);\n}\n\nvar affordableNames = products\n    .Where(p => p.Price < 100)\n    .Select(p => p.Name);\n\nConsole.WriteLine(\"\\nAffordable products: \" + string.Join(\", \", affordableNames));",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Product names\"",
                  "expectedOutput": "Product names",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Discounted prices\"",
                  "expectedOutput": "Discounted prices",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Affordable products\"",
                  "expectedOutput": "Affordable products",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Select syntax: '.Select(item => newValue)'. Extract property: 'p => p.Name'. Calculate: 'p => p.Price * 0.9m'. Anonymous object: 'new { Prop = value }'."
                },
                {
                  "level": 2,
                  "text": "Confusing .Where() and .Select(): Where FILTERS (fewer items). Select TRANSFORMS (same number, but changed). Don't use Select for filtering!"
                },
                {
                  "level": 3,
                  "text": "Forgetting to capture result: '.Select()' doesn't modify original! 'list.Select(x => x * 2)' does nothing. Must assign: 'var result = list.Select(x => x * 2)'."
                },
                {
                  "level": 4,
                  "text": "Anonymous object outside method: Anonymous objects can't be returned from methods or stored in fields! Only use locally. For return values, create a proper class."
                },
                {
                  "level": 5,
                  "text": "Decimal precision: When doing math with prices, use 'm' suffix: '0.9m' not '0.9'. Otherwise you get double (less precise for money!)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Confusing .Where() and .Select()",
                  "consequence": "Where FILTERS (fewer items). Select TRANSFORMS (same number, but changed). Don't use Select for filtering!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to capture result",
                  "consequence": "'.Select()' doesn't modify original! 'list.Select(x => x * 2)' does nothing. Must assign: 'var result = list.Select(x => x * 2)'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Anonymous object outside method",
                  "consequence": "Anonymous objects can't be returned from methods or stored in fields! Only use locally. For return values, create a proper class.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Decimal precision",
                  "consequence": "When doing math with prices, use 'm' suffix: '0.9m' not '0.9'. Otherwise you get double (less precise for money!).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-09-05",
          "title": "Sorting & Aggregating (.OrderBy, .Sum, .Count)",
          "moduleId": "module-09",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine organizing your bookshelf:\n• SORTING: Arrange books alphabetically by title or author\n• COUNTING: How many books do you have?\n• SUMMING: What's the total value of all books?\n• FINDING: What's the most expensive book? The cheapest?\n\nLINQ has methods for all of these!\n\nSORTING:\n• .OrderBy(x => x) - Ascending (1, 2, 3...)\n• .OrderByDescending(x => x) - Descending (3, 2, 1...)\n• .ThenBy(x => x) - Secondary sort\n\nAGGREGATING (computing single value from collection):\n• .Count() - How many items?\n• .Sum(x => x) - Add them up\n• .Average(x => x) - Mean value\n• .Min(x => x) / .Max(x => x) - Smallest/largest\n\nThink: Sorting organizes. Aggregating calculates. Both are essential for data analysis!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nList<int> numbers = new List<int> { 5, 2, 8, 1, 9, 3, 7 };\n\n// SORTING\nvar ascending = numbers.OrderBy(n => n);\nConsole.WriteLine(\"Ascending: \" + string.Join(\", \", ascending));\n\nvar descending = numbers.OrderByDescending(n => n);\nConsole.WriteLine(\"Descending: \" + string.Join(\", \", descending));\n\n// AGGREGATING\nint count = numbers.Count();\nint sum = numbers.Sum();\ndouble average = numbers.Average();\nint min = numbers.Min();\nint max = numbers.Max();\n\nConsole.WriteLine(\"Count: \" + count);\nConsole.WriteLine(\"Sum: \" + sum);\nConsole.WriteLine(\"Average: \" + average);\nConsole.WriteLine(\"Min: \" + min + \", Max: \" + max);\n\n// WORKING WITH OBJECTS\nclass Product\n{\n    public string Name;\n    public decimal Price;\n    public string Category;\n}\n\nList<Product> products = new List<Product>\n{\n    new Product { Name = \"Laptop\", Price = 999, Category = \"Electronics\" },\n    new Product { Name = \"Mouse\", Price = 25, Category = \"Electronics\" },\n    new Product { Name = \"Desk\", Price = 299, Category = \"Furniture\" },\n    new Product { Name = \"Chair\", Price = 199, Category = \"Furniture\" }\n};\n\n// Sort by price\nvar byPrice = products.OrderBy(p => p.Price);\nforeach (var p in byPrice)\n{\n    Console.WriteLine(p.Name + \": $\" + p.Price);\n}\n\n// Sort by name, then by price (multi-level)\nvar sorted = products\n    .OrderBy(p => p.Category)\n    .ThenBy(p => p.Price);\n\nforeach (var p in sorted)\n{\n    Console.WriteLine(p.Category + \" - \" + p.Name + \": $\" + p.Price);\n}\n\n// Aggregate with selector\nint productCount = products.Count();\ndecimal totalValue = products.Sum(p => p.Price);\ndecimal avgPrice = products.Average(p => p.Price);\ndecimal cheapest = products.Min(p => p.Price);\ndecimal mostExpensive = products.Max(p => p.Price);\n\nConsole.WriteLine(\"Total products: \" + productCount);\nConsole.WriteLine(\"Total value: $\" + totalValue);\nConsole.WriteLine(\"Average price: $\" + avgPrice);\nConsole.WriteLine(\"Price range: $\" + cheapest + \" - $\" + mostExpensive);",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`.OrderBy(x => key)`**: Sorts ascending by key. For numbers: .OrderBy(n => n). For objects: .OrderBy(p => p.Price). Returns IEnumerable in sorted order.\n\n**`.ThenBy(x => secondKey)`**: Secondary sort after OrderBy. Example: .OrderBy(p => p.Category).ThenBy(p => p.Name) sorts by category first, then name within each category.\n\n**`.Count(), .Sum(), .Average()`**: Aggregation methods return single value. .Count() returns int. .Sum() adds values. .Average() calculates mean. These EXECUTE the query immediately!\n\n**`.Min() / .Max()`**: Find smallest/largest. Simple: .Min() on numbers. With selector: .Max(p => p.Price) finds most expensive. Returns single value, not collection."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a student grade analysis system!\n\n1. Create a 'Student' class:\n   - string Name\n   - int Grade (0-100)\n   - string Subject\n\n2. Create a List with 8+ students across 2-3 subjects\n\n3. Perform these operations:\n   - Sort students by grade (descending)\n   - Count how many students there are\n   - Calculate average grade\n   - Find highest and lowest grades\n   - Get sum of all grades\n   - Find students in \"Math\" subject, sorted by name\n   - Calculate average grade for \"Math\" students only\n\n4. Display all results with labels",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Student\n{\n    public string Name;\n    public int Grade;\n    public string Subject;\n}\n\nList<Student> students = new List<Student>\n{\n    new Student { Name = \"Alice\", Grade = 85, Subject = \"Math\" },\n    new Student { Name = \"Bob\", Grade = 92, Subject = \"Science\" },\n    // Add 6 more students\n};\n\n// Sort by grade descending\nvar byGrade = students.OrderByDescending(s => /* key */);\n\n// Aggregations\nint totalStudents = students.Count();\ndouble avgGrade = students.Average(s => /* selector */);\nint highest = students.Max(s => /* selector */);\nint lowest = students.Min(s => /* selector */);\nint totalGrades = students.Sum(s => /* selector */);\n\n// Math students sorted by name\nvar mathStudents = students\n    .Where(s => /* filter */)\n    .OrderBy(s => /* key */);\n\n// Math average\ndouble mathAvg = students\n    .Where(s => /* filter */)\n    .Average(s => /* selector */);",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Student\n{\n    public string Name;\n    public int Grade;\n    public string Subject;\n}\n\nList<Student> students = new List<Student>\n{\n    new Student { Name = \"Alice\", Grade = 85, Subject = \"Math\" },\n    new Student { Name = \"Bob\", Grade = 92, Subject = \"Science\" },\n    new Student { Name = \"Charlie\", Grade = 78, Subject = \"Math\" },\n    new Student { Name = \"Diana\", Grade = 95, Subject = \"Science\" },\n    new Student { Name = \"Eve\", Grade = 88, Subject = \"Math\" },\n    new Student { Name = \"Frank\", Grade = 72, Subject = \"English\" },\n    new Student { Name = \"Grace\", Grade = 90, Subject = \"English\" },\n    new Student { Name = \"Henry\", Grade = 83, Subject = \"Math\" }\n};\n\nvar byGrade = students.OrderByDescending(s => s.Grade);\nConsole.WriteLine(\"Students by grade (high to low):\");\nforeach (var s in byGrade)\n{\n    Console.WriteLine(s.Name + \": \" + s.Grade);\n}\n\nint totalStudents = students.Count();\ndouble avgGrade = students.Average(s => s.Grade);\nint highest = students.Max(s => s.Grade);\nint lowest = students.Min(s => s.Grade);\nint totalGrades = students.Sum(s => s.Grade);\n\nConsole.WriteLine(\"\\nStatistics:\");\nConsole.WriteLine(\"Total students: \" + totalStudents);\nConsole.WriteLine(\"Average grade: \" + avgGrade);\nConsole.WriteLine(\"Highest: \" + highest + \", Lowest: \" + lowest);\nConsole.WriteLine(\"Sum of all grades: \" + totalGrades);\n\nvar mathStudents = students\n    .Where(s => s.Subject == \"Math\")\n    .OrderBy(s => s.Name);\n\nConsole.WriteLine(\"\\nMath students (alphabetical):\");\nforeach (var s in mathStudents)\n{\n    Console.WriteLine(s.Name + \": \" + s.Grade);\n}\n\ndouble mathAvg = students\n    .Where(s => s.Subject == \"Math\")\n    .Average(s => s.Grade);\n\nConsole.WriteLine(\"\\nMath average: \" + mathAvg);",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Total students\"",
                  "expectedOutput": "Total students",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Average grade\"",
                  "expectedOutput": "Average grade",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Highest\"",
                  "expectedOutput": "Highest",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Math average\"",
                  "expectedOutput": "Math average",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "OrderBy: '.OrderBy(x => x.Property)'. Aggregates: '.Count()', '.Sum(x => x.Prop)', '.Average(x => x.Prop)', '.Min()/.Max()'. Chain with .Where() for filtered aggregates!"
                },
                {
                  "level": 2,
                  "text": "Forgetting selector in aggregate: '.Sum()' on objects doesn't work! Must specify what to sum: '.Sum(p => p.Price)'. Only works without selector on collections of numbers."
                },
                {
                  "level": 3,
                  "text": "OrderBy doesn't modify original: Like all LINQ, .OrderBy() returns NEW sequence! Original list is unchanged. Assign result: 'var sorted = list.OrderBy(...)'."
                },
                {
                  "level": 4,
                  "text": "Using .Count property vs .Count() method: IEnumerable has .Count() METHOD. List has .Count PROPERTY. Both work, but property is faster on List!"
                },
                {
                  "level": 5,
                  "text": "Average on empty collection: '.Average()' on empty collection throws exception! Check '.Any()' first, or use default: 'list.Any() ? list.Average() : 0'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting selector in aggregate",
                  "consequence": "'.Sum()' on objects doesn't work! Must specify what to sum: '.Sum(p => p.Price)'. Only works without selector on collections of numbers.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "OrderBy doesn't modify original",
                  "consequence": "Like all LINQ, .OrderBy() returns NEW sequence! Original list is unchanged. Assign result: 'var sorted = list.OrderBy(...)'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using .Count property vs .Count() method",
                  "consequence": "IEnumerable has .Count() METHOD. List has .Count PROPERTY. Both work, but property is faster on List!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Average on empty collection",
                  "consequence": "'.Average()' on empty collection throws exception! Check '.Any()' first, or use default: 'list.Any() ? list.Average() : 0'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-09-06",
          "title": "Advanced LINQ (GroupBy, SelectMany, Join)",
          "moduleId": "module-09",
          "order": 6,
          "estimatedMinutes": 20,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Think of organizing a music library:\n\nGROUPBY = Organizing by artist:\n• Take all songs → Group by artist → Get { Artist: [songs] }\n• Like creating folders: Beatles/, Bowie/, Queen/\n• Each group has a KEY (artist name) and VALUES (songs)\n\nSELECTMANY = Flattening nested playlists:\n• You have: [ [Song1, Song2], [Song3], [Song4, Song5] ]\n• SelectMany → [Song1, Song2, Song3, Song4, Song5]\n• Turns nested collections into ONE flat list!\n\nJOIN = Matching data from two sources:\n• Like a VLOOKUP in Excel\n• 'Match Orders with Customers on CustomerId'\n• Combines data where keys match\n\nThese are ESSENTIAL for real-world data manipulation!\n\nThink: 'GroupBy organizes, SelectMany flattens, Join connects!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n// Sample data\nvar products = new[]\n{\n    new { Id = 1, Name = \"Laptop\", Category = \"Electronics\", Price = 999m },\n    new { Id = 2, Name = \"Mouse\", Category = \"Electronics\", Price = 29m },\n    new { Id = 3, Name = \"Desk\", Category = \"Furniture\", Price = 299m },\n    new { Id = 4, Name = \"Chair\", Category = \"Furniture\", Price = 199m },\n    new { Id = 5, Name = \"Monitor\", Category = \"Electronics\", Price = 399m }\n};\n\n// ===== GROUPBY: Group products by category =====\nvar productsByCategory = products.GroupBy(p => p.Category);\n\nConsole.WriteLine(\"=== GroupBy: Products by Category ===\");\nforeach (var group in productsByCategory)\n{\n    Console.WriteLine($\"\\n{group.Key} ({group.Count()} items):\");\n    foreach (var product in group)\n    {\n        Console.WriteLine($\"  - {product.Name}: ${product.Price}\");\n    }\n}\n\n// GroupBy with aggregation\nvar categorySummary = products\n    .GroupBy(p => p.Category)\n    .Select(g => new\n    {\n        Category = g.Key,\n        Count = g.Count(),\n        TotalValue = g.Sum(p => p.Price),\n        AveragePrice = g.Average(p => p.Price)\n    });\n\nConsole.WriteLine(\"\\n=== GroupBy with Aggregation ===\");\nforeach (var summary in categorySummary)\n{\n    Console.WriteLine($\"{summary.Category}: {summary.Count} items, \" +\n        $\"Total: ${summary.TotalValue}, Avg: ${summary.AveragePrice:F2}\");\n}\n\n// ===== SELECTMANY: Flatten nested collections =====\nvar departments = new[]\n{\n    new { Name = \"IT\", Employees = new[] { \"Alice\", \"Bob\" } },\n    new { Name = \"HR\", Employees = new[] { \"Carol\" } },\n    new { Name = \"Sales\", Employees = new[] { \"Dave\", \"Eve\", \"Frank\" } }\n};\n\n// Without SelectMany: nested IEnumerable<string[]>\nvar nested = departments.Select(d => d.Employees);\n\n// With SelectMany: flat IEnumerable<string>\nvar allEmployees = departments.SelectMany(d => d.Employees);\nConsole.WriteLine(\"\\n=== SelectMany: All Employees ===\");\nConsole.WriteLine(string.Join(\", \", allEmployees));\n\n// SelectMany with projection\nvar employeeDetails = departments\n    .SelectMany(\n        d => d.Employees,\n        (dept, emp) => new { Department = dept.Name, Employee = emp }\n    );\n\nConsole.WriteLine(\"\\n=== SelectMany with Projection ===\");\nforeach (var e in employeeDetails)\n{\n    Console.WriteLine($\"{e.Employee} works in {e.Department}\");\n}\n\n// ===== JOIN: Combine two data sources =====\nvar orders = new[]\n{\n    new { OrderId = 1, ProductId = 1, Quantity = 2 },\n    new { OrderId = 2, ProductId = 3, Quantity = 1 },\n    new { OrderId = 3, ProductId = 2, Quantity = 5 }\n};\n\nvar orderDetails = orders.Join(\n    products,                      // Inner collection\n    order => order.ProductId,      // Outer key selector\n    product => product.Id,         // Inner key selector\n    (order, product) => new        // Result selector\n    {\n        order.OrderId,\n        product.Name,\n        order.Quantity,\n        Total = product.Price * order.Quantity\n    }\n);\n\nConsole.WriteLine(\"\\n=== Join: Order Details ===\");\nforeach (var detail in orderDetails)\n{\n    Console.WriteLine($\"Order {detail.OrderId}: {detail.Quantity}x {detail.Name} = ${detail.Total}\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`collection.GroupBy(x => x.Key)`**: Groups items by a key. Returns IEnumerable<IGrouping<TKey, TElement>>. Each group has .Key (the grouping value) and acts as IEnumerable of items.\n\n**`GroupBy + Select for aggregation`**: Common pattern: `.GroupBy(x => x.Category).Select(g => new { g.Key, Count = g.Count(), Sum = g.Sum(...) })`. Transforms groups into summary objects.\n\n**`collection.SelectMany(x => x.Items)`**: Flattens nested collections. If each element contains a collection, SelectMany extracts and concatenates them all.\n\n**`SelectMany with result selector`**: `.SelectMany(d => d.Items, (parent, item) => new { parent.Name, item })`. Second lambda combines parent object with each flattened item.\n\n**`outer.Join(inner, outerKey, innerKey, result)`**: Matches items where keys are equal. Like SQL INNER JOIN. Only items with matching keys appear in result.\n\n**`GroupJoin for LEFT JOIN behavior`**: Use `.GroupJoin()` when you need all outer items even without matches (like SQL LEFT JOIN)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Practice advanced LINQ operations!\n\n1. Create a list of students with properties: Name, Grade (A/B/C), Score\n   - At least 6 students across different grades\n\n2. Use GroupBy to:\n   - Group students by Grade\n   - For each group, print the grade and all student names\n\n3. Use GroupBy with aggregation to find:\n   - Average score per grade\n   - Print: 'Grade A: Average = 92.5' etc.\n\n4. Create a list of Courses with: CourseId, Name, StudentNames (string[])\n   Use SelectMany to get all unique student names across all courses.\n\nDemonstrate GroupBy, aggregation, and SelectMany!",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n// Student class\nclass Student\n{\n    public string Name { get; set; }\n    public string Grade { get; set; }\n    public int Score { get; set; }\n}\n\n// Create students\nvar students = new List<Student>\n{\n    new Student { Name = \"Alice\", Grade = \"A\", Score = 95 },\n    // Add more students...\n};\n\n// Group by grade and print\nvar byGrade = students.GroupBy(s => s.Grade);\nforeach (var group in byGrade)\n{\n    Console.WriteLine($\"Grade {group.Key}:\");\n    // Print each student in group\n}\n\n// Average score per grade\nvar gradeAverages = students\n    .GroupBy(s => s.Grade)\n    .Select(g => new { /* create summary */ });\n\n// Print averages\n\n// SelectMany example\nvar courses = new[]\n{\n    new { Name = \"Math\", StudentNames = new[] { \"Alice\", \"Bob\" } },\n    // Add more courses...\n};\n\nvar allStudentNames = courses.SelectMany(c => c.StudentNames);\nConsole.WriteLine(\"\\nAll students: \" + string.Join(\", \", allStudentNames.Distinct()));",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Student\n{\n    public string Name { get; set; }\n    public string Grade { get; set; }\n    public int Score { get; set; }\n}\n\nvar students = new List<Student>\n{\n    new Student { Name = \"Alice\", Grade = \"A\", Score = 95 },\n    new Student { Name = \"Bob\", Grade = \"B\", Score = 82 },\n    new Student { Name = \"Carol\", Grade = \"A\", Score = 91 },\n    new Student { Name = \"Dave\", Grade = \"C\", Score = 74 },\n    new Student { Name = \"Eve\", Grade = \"B\", Score = 88 },\n    new Student { Name = \"Frank\", Grade = \"A\", Score = 97 }\n};\n\nConsole.WriteLine(\"=== Students by Grade ===\");\nvar byGrade = students.GroupBy(s => s.Grade).OrderBy(g => g.Key);\nforeach (var group in byGrade)\n{\n    Console.WriteLine($\"\\nGrade {group.Key}:\");\n    foreach (var student in group)\n    {\n        Console.WriteLine($\"  {student.Name} ({student.Score})\");\n    }\n}\n\nConsole.WriteLine(\"\\n=== Average Score per Grade ===\");\nvar gradeAverages = students\n    .GroupBy(s => s.Grade)\n    .Select(g => new { Grade = g.Key, Average = g.Average(s => s.Score) })\n    .OrderBy(x => x.Grade);\n\nforeach (var avg in gradeAverages)\n{\n    Console.WriteLine($\"Grade {avg.Grade}: Average = {avg.Average:F1}\");\n}\n\nvar courses = new[]\n{\n    new { Name = \"Math\", StudentNames = new[] { \"Alice\", \"Bob\", \"Carol\" } },\n    new { Name = \"Science\", StudentNames = new[] { \"Bob\", \"Dave\", \"Eve\" } },\n    new { Name = \"English\", StudentNames = new[] { \"Alice\", \"Eve\", \"Frank\" } }\n};\n\nvar allStudentNames = courses.SelectMany(c => c.StudentNames).Distinct();\nConsole.WriteLine(\"\\n=== All Students (SelectMany) ===\");\nConsole.WriteLine(string.Join(\", \", allStudentNames));",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Grade\"",
                  "expectedOutput": "Grade",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Average\"",
                  "expectedOutput": "Average",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"SelectMany\" or list all students",
                  "expectedOutput": "Alice",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "GroupBy syntax: 'collection.GroupBy(x => x.Property)'. Each group has .Key (the property value) and contains all matching items."
                },
                {
                  "level": 2,
                  "text": "GroupBy with aggregation: '.GroupBy(x => x.Prop).Select(g => new { g.Key, Avg = g.Average(x => x.Value) })'. Use .Average(), .Sum(), .Count() on each group."
                },
                {
                  "level": 3,
                  "text": "SelectMany flattens: If you have List<Course> where each Course has string[] Students, 'courses.SelectMany(c => c.Students)' gives you one flat list of all student names."
                },
                {
                  "level": 4,
                  "text": "Distinct removes duplicates: 'collection.SelectMany(...).Distinct()' returns only unique values."
                },
                {
                  "level": 5,
                  "text": "Join requires 4 arguments: outer.Join(inner, outerKey, innerKey, resultSelector). Keys must match types exactly!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting IGrouping is enumerable",
                  "consequence": "GroupBy returns groups, not items! Each group IS an IEnumerable. Iterate with 'foreach (var item in group)' or use LINQ methods on the group itself.",
                  "correction": "Access items: 'foreach (var group in grouped) { foreach (var item in group) { ... } }'. Or aggregate: 'group.Sum(x => x.Value)'."
                },
                {
                  "mistake": "SelectMany vs Select confusion",
                  "consequence": "Select returns nested collections: IEnumerable<string[]>. SelectMany flattens: IEnumerable<string>. Use SelectMany when you want one flat list from nested data!",
                  "correction": "If you're getting IEnumerable<IEnumerable<T>> and want IEnumerable<T>, switch from Select to SelectMany."
                },
                {
                  "mistake": "Join key type mismatch",
                  "consequence": "Join keys must be the same type! Joining on 'order.ProductId (int)' and 'product.Id (string)' will return ZERO results with no error!",
                  "correction": "Ensure key types match exactly. Convert if needed: 'order => order.ProductId.ToString()' to match string keys."
                },
                {
                  "mistake": "Expecting LEFT JOIN behavior from Join",
                  "consequence": "LINQ .Join() is an INNER JOIN - only items with matching keys appear! Items without matches are silently excluded.",
                  "correction": "For LEFT JOIN behavior (keep all left items even without matches), use .GroupJoin() with .DefaultIfEmpty()."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-09-07",
          "title": "New in .NET 9: CountBy and AggregateBy",
          "moduleId": "module-09",
          "order": 7,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine sorting your groceries: 'How many items per category?' (CountBy) or 'What's the total cost per category?' (AggregateBy). Before .NET 9, you'd need GroupBy + Select + Count/Sum. Now it's one simple method call!\n\nCountBy = Quick counting by key:\n- 'How many products in each category?'\n- Returns KeyValuePair<TKey, int> for each group\n- Single method instead of GroupBy().Select(g => new { g.Key, g.Count() })\n\nAggregateBy = Accumulate values by key:\n- 'What's the total price per category?'\n- You provide: key selector, seed value, accumulator function\n- Returns KeyValuePair<TKey, TAccumulate> for each group\n\nBoth methods:\n- More efficient (single pass through data)\n- Cleaner code (one method vs. chain)\n- Type-safe (strong typing on key and result)\n\nThink: 'GroupBy patterns simplified into direct, purpose-built methods!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": ".NET 9 introduces CountBy and AggregateBy - two LINQ methods that replace common GroupBy patterns with cleaner, more efficient code.",
              "code": "using System;\nusing System.Linq;\n\nvar products = new[]\n{\n    new { Name = \"Apple\", Category = \"Fruit\", Price = 1.50m },\n    new { Name = \"Banana\", Category = \"Fruit\", Price = 0.75m },\n    new { Name = \"Carrot\", Category = \"Vegetable\", Price = 0.50m },\n    new { Name = \"Broccoli\", Category = \"Vegetable\", Price = 1.25m },\n    new { Name = \"Orange\", Category = \"Fruit\", Price = 1.00m }\n};\n\n// ===== COUNTBY: Count items by key =====\nConsole.WriteLine(\"=== CountBy ===\");\nvar countByCategory = products.CountBy(p => p.Category);\nforeach (var (category, count) in countByCategory)\n    Console.WriteLine($\"{category}: {count} items\");\n// Output: Fruit: 3 items, Vegetable: 2 items\n\n// ===== AGGREGATEBY: Sum/aggregate values by key =====\nConsole.WriteLine(\"\\n=== AggregateBy ===\");\nvar totalByCategory = products.AggregateBy(\n    keySelector: p => p.Category,\n    seed: 0m,\n    func: (total, product) => total + product.Price);\n\nforeach (var (category, total) in totalByCategory)\n    Console.WriteLine($\"{category}: ${total}\");\n// Output: Fruit: $3.25, Vegetable: $1.75\n\n// ===== COMPARE TO OLD WAY (verbose) =====\nConsole.WriteLine(\"\\n=== Old GroupBy Way (for comparison) ===\");\nvar oldWayCount = products\n    .GroupBy(p => p.Category)\n    .Select(g => new { Category = g.Key, Count = g.Count() });\n\nvar oldWaySum = products\n    .GroupBy(p => p.Category)\n    .Select(g => new { Category = g.Key, Total = g.Sum(p => p.Price) });\n\nforeach (var item in oldWaySum)\n    Console.WriteLine($\"{item.Category}: ${item.Total}\");\n\n// ===== MORE EXAMPLES =====\n// Count orders by status\nvar orders = new[] { \"Pending\", \"Shipped\", \"Pending\", \"Delivered\", \"Shipped\", \"Shipped\" };\nvar orderCounts = orders.CountBy(status => status);\nConsole.WriteLine(\"\\n=== Order Status Counts ===\");\nforeach (var (status, count) in orderCounts)\n    Console.WriteLine($\"{status}: {count}\");\n\n// AggregateBy with string concatenation\nvar employees = new[]\n{\n    new { Name = \"Alice\", Department = \"IT\" },\n    new { Name = \"Bob\", Department = \"HR\" },\n    new { Name = \"Carol\", Department = \"IT\" },\n    new { Name = \"Dave\", Department = \"IT\" }\n};\n\nvar namesByDept = employees.AggregateBy(\n    e => e.Department,\n    seed: \"\",\n    func: (names, emp) => names == \"\" ? emp.Name : names + \", \" + emp.Name);\n\nConsole.WriteLine(\"\\n=== Employees by Department ===\");\nforeach (var (dept, names) in namesByDept)\n    Console.WriteLine($\"{dept}: {names}\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**CountBy<TSource, TKey>**\n```csharp\nsource.CountBy(keySelector)\n```\n- Returns `IEnumerable<KeyValuePair<TKey, int>>`\n- Counts occurrences of each key\n- Equivalent to: `.GroupBy(key).Select(g => new { g.Key, Count = g.Count() })`\n\n**AggregateBy<TSource, TKey, TAccumulate>**\n```csharp\nsource.AggregateBy(keySelector, seed, func)\n```\n- `keySelector`: Groups items by this key\n- `seed`: Starting value for aggregation (e.g., 0 for sum, \"\" for strings)\n- `func`: Combines accumulator with each item `(acc, item) => newAcc`\n- Returns `IEnumerable<KeyValuePair<TKey, TAccumulate>>`\n\n**Why Use These?**\n1. **Cleaner code**: One method vs GroupBy+Select+Aggregate chain\n2. **More efficient**: Single pass through data\n3. **Type-safe**: Strong typing on key and accumulator\n4. **Intent clarity**: Method name describes exactly what you're doing\n\n**When to Use Which?**\n- Use `CountBy` when you just need counts per group\n- Use `AggregateBy` when you need to combine/accumulate values\n- Use `GroupBy` when you need the actual grouped items (not just aggregations)"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-09-07-challenge-01",
              "title": "Sales Analytics Dashboard",
              "description": "Use CountBy and AggregateBy to analyze sales data.",
              "instructions": "Given a list of sales records with Region and Amount:\n1. Use CountBy to find number of sales per region\n2. Use AggregateBy to find total sales amount per region\n3. Print both results with descriptive labels\n\nExpected output format:\n- Sales count per region: Region: X sales\n- Total sales per region: Region: $XXX",
              "starterCode": "using System;\nusing System.Linq;\n\nvar sales = new[]\n{\n    new { Region = \"North\", Amount = 500m },\n    new { Region = \"South\", Amount = 300m },\n    new { Region = \"North\", Amount = 200m },\n    new { Region = \"East\", Amount = 400m },\n    new { Region = \"South\", Amount = 600m }\n};\n\n// TODO: Count sales per region using CountBy\nConsole.WriteLine(\"Sales count per region:\");\n\n// TODO: Sum sales amount per region using AggregateBy\nConsole.WriteLine(\"\\nTotal sales per region:\");",
              "solution": "using System;\nusing System.Linq;\n\nvar sales = new[]\n{\n    new { Region = \"North\", Amount = 500m },\n    new { Region = \"South\", Amount = 300m },\n    new { Region = \"North\", Amount = 200m },\n    new { Region = \"East\", Amount = 400m },\n    new { Region = \"South\", Amount = 600m }\n};\n\n// Count sales per region\nvar countPerRegion = sales.CountBy(s => s.Region);\nConsole.WriteLine(\"Sales count per region:\");\nforeach (var (region, count) in countPerRegion)\n    Console.WriteLine($\"  {region}: {count} sales\");\n\n// Sum amount per region\nvar totalPerRegion = sales.AggregateBy(\n    s => s.Region,\n    0m,\n    (sum, sale) => sum + sale.Amount);\n\nConsole.WriteLine(\"\\nTotal sales per region:\");\nforeach (var (region, total) in totalPerRegion)\n    Console.WriteLine($\"  {region}: ${total}\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-countby",
                  "description": "CountBy returns correct counts per region",
                  "expectedOutput": "North: 2",
                  "isVisible": true
                },
                {
                  "id": "test-aggregateby",
                  "description": "AggregateBy returns correct totals per region",
                  "expectedOutput": "North: $700",
                  "isVisible": true
                },
                {
                  "id": "test-south-count",
                  "description": "South region has correct count",
                  "expectedOutput": "South: 2",
                  "isVisible": true
                },
                {
                  "id": "test-south-total",
                  "description": "South region has correct total",
                  "expectedOutput": "South: $900",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "CountBy syntax: 'collection.CountBy(item => item.KeyProperty)'. Returns KeyValuePair<TKey, int> that you can destructure: 'foreach (var (key, count) in results)'."
                },
                {
                  "level": 2,
                  "text": "AggregateBy needs three arguments: key selector (s => s.Region), seed value (0m for decimal sum), and accumulator function ((sum, item) => sum + item.Amount)."
                },
                {
                  "level": 3,
                  "text": "The seed value type determines the result type. Use 0m for decimal sums, 0 for int sums, \"\" for string concatenation."
                },
                {
                  "level": 4,
                  "text": "Both methods return IEnumerable<KeyValuePair<TKey, TValue>>. Use tuple deconstruction: 'foreach (var (region, value) in results)' for clean iteration."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using GroupBy + Count instead of CountBy",
                  "consequence": "CountBy is a single-method replacement that's more efficient and readable. Instead of .GroupBy(x => x.Key).Select(g => new { g.Key, g.Count() }), just use .CountBy(x => x.Key).",
                  "correction": "Replace the GroupBy chain with: sales.CountBy(s => s.Region)"
                },
                {
                  "mistake": "Forgetting the seed value in AggregateBy",
                  "consequence": "AggregateBy requires a seed value as the second argument. Without it, you'll get a compiler error.",
                  "correction": "Always provide a seed: sales.AggregateBy(key, 0m, (sum, item) => sum + item.Amount) where 0m is the seed for decimal sum."
                },
                {
                  "mistake": "Wrong seed type for aggregation",
                  "consequence": "The seed type determines the accumulator type. Using 0 (int) when summing decimals will cause type mismatch errors.",
                  "correction": "Match seed type to your values: 0m for decimal, 0 for int, 0.0 for double, \"\" for strings."
                },
                {
                  "mistake": "Trying to use CountBy/AggregateBy on .NET 8 or earlier",
                  "consequence": "These methods are new in .NET 9. Using them on earlier versions will result in 'method not found' errors.",
                  "correction": "Ensure your project targets .NET 9 or later in your .csproj file: <TargetFramework>net9.0</TargetFramework>"
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-10",
      "title": "Asynchronous Programming",
      "description": "Master async/await, Tasks, asynchronous operations, and building responsive applications.",
      "difficulty": "beginner",
      "estimatedHours": 1,
      "lessons": [
        {
          "id": "lesson-10-01",
          "title": "Synchronous vs. Asynchronous (Restaurant Buzzer Analogy)",
          "moduleId": "module-10",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine two ways to get food:\n\nSYNCHRONOUS (blocking):\n• You order at counter\n• You WAIT in line, doing NOTHING\n• Only after you get food can you sit down\n• Everyone behind you is BLOCKED!\n\nASYNCHRONOUS (non-blocking):\n• You order at counter\n• They give you a BUZZER\n• You sit down, chat, check your phone (do other things!)\n• Buzzer goes off when food is ready\n• You pick up food\n• Others can order while you wait!\n\nThat's the difference!\n\nSYNCHRONOUS code: Each line waits for the previous one to FINISH. Program is frozen during slow operations (file I/O, web requests, database queries).\n\nASYNCHRONOUS code: Start slow operation, do OTHER WORK while waiting, come back when it's done. App stays responsive!\n\nThink: Async = 'Don't wait around doing nothing. Start the task and come back when it's ready!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\n// SYNCHRONOUS VERSION - blocks the thread\nvoid DownloadFileSync()\n{\n    Console.WriteLine(\"  Starting sync download...\");\n    Thread.Sleep(3000);  // Blocks for 3 seconds!\n    Console.WriteLine(\"  Sync download complete!\");\n}\n\n// ASYNCHRONOUS VERSION - doesn't block\nasync Task DownloadFileAsync()\n{\n    Console.WriteLine(\"  Starting async download...\");\n    await Task.Delay(3000);  // Doesn't block!\n    Console.WriteLine(\"  Async download complete!\");\n}\n\n// DEMONSTRATION 1: Synchronous (blocking)\nConsole.WriteLine(\"=== SYNCHRONOUS (Blocking) ===\");\nConsole.WriteLine(\"Before download\");\nDownloadFileSync();  // Program FREEZES here for 3 seconds!\nConsole.WriteLine(\"After download (had to wait)\\n\");\n\n// Output:\n// Before download\n// Starting sync download...\n// (3 second freeze - can't do anything!)\n// Sync download complete!\n// After download (had to wait)\n\n// DEMONSTRATION 2: Asynchronous (non-blocking)\nConsole.WriteLine(\"=== ASYNCHRONOUS (Non-blocking) ===\");\nConsole.WriteLine(\"Before download\");\nTask downloadTask = DownloadFileAsync();  // Starts but doesn't wait!\nConsole.WriteLine(\"Doing other work immediately!\");\nConsole.WriteLine(\"Still working...\");\nawait downloadTask;  // Now wait for it to finish\nConsole.WriteLine(\"After download\\n\");\n\n// Output:\n// Before download\n// Starting async download...\n// Doing other work immediately!  ← Runs DURING download!\n// Still working...                ← Also DURING download!\n// (after 3 seconds)\n// Async download complete!\n// After download\n\n// REAL BENEFIT: Multiple async operations simultaneously\nConsole.WriteLine(\"=== MULTIPLE ASYNC OPERATIONS ===\");\nTask d1 = DownloadFileAsync();  // Start first\nTask d2 = DownloadFileAsync();  // Start second\nTask d3 = DownloadFileAsync();  // Start third\n\nConsole.WriteLine(\"All 3 downloads started!\");\nConsole.WriteLine(\"Doing other work while all 3 run...\");\n\nawait Task.WhenAll(d1, d2, d3);  // Wait for ALL to finish\nConsole.WriteLine(\"All downloads complete!\");\n// Total time: ~3 seconds (not 9!), because they ran SIMULTANEOUSLY!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Thread.Sleep() vs Task.Delay()`**: Thread.Sleep() BLOCKS the thread (synchronous). Task.Delay() is ASYNC - releases thread while waiting. Always prefer Task.Delay() in async code!\n\n**`async Task MethodName()`**: 'async' keyword marks method as asynchronous. Return type is usually 'Task' (void equivalent) or 'Task<T>' (returns T). Enables 'await' inside.\n\n**`await expression`**: 'await' says 'pause here until this Task completes, but release the thread for other work.' Can only use inside 'async' method.\n\n**`Task.WhenAll()`**: Runs multiple async operations simultaneously! Waits for ALL to complete. Much faster than running one-by-one."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-10-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Simulate a coffee shop with async operations!\n\n1. Create async method 'BrewCoffeeAsync(string type)':\n   - Print 'Brewing [type] coffee...'\n   - await Task.Delay(2000) to simulate brewing\n   - Print '[type] coffee ready!'\n   - Return Task\n\n2. Create async method 'ToastBreadAsync()':\n   - Print 'Toasting bread...'\n   - await Task.Delay(1000)\n   - Print 'Toast ready!'\n   - Return Task\n\n3. In Main (or top-level):\n   - Start brewing coffee (don't await yet!)\n   - Start toasting bread (don't await yet!)\n   - Print 'Doing other tasks...'\n   - await BOTH tasks\n   - Print 'Breakfast ready!'\n\nBoth should run SIMULTANEOUSLY!",
              "starterCode": "using System;\nusing System.Threading.Tasks;\n\nasync Task BrewCoffeeAsync(string type)\n{\n    // Print starting message\n    // await Task.Delay(2000)\n    // Print ready message\n}\n\nasync Task ToastBreadAsync()\n{\n    // Print starting message\n    // await Task.Delay(1000)\n    // Print ready message\n}\n\n// Main async code\nConsole.WriteLine(\"Starting breakfast...\");\n\n// Start both tasks\nTask coffeeTask = BrewCoffeeAsync(\"Espresso\");\nTask toastTask = ToastBreadAsync();\n\nConsole.WriteLine(\"Doing other tasks...\");\n\n// Wait for both\nawait Task.WhenAll(coffeeTask, toastTask);\n\nConsole.WriteLine(\"Breakfast ready!\");",
              "solution": "using System;\nusing System.Threading.Tasks;\n\nasync Task BrewCoffeeAsync(string type)\n{\n    Console.WriteLine(\"Brewing \" + type + \" coffee...\");\n    await Task.Delay(2000);\n    Console.WriteLine(type + \" coffee ready!\");\n}\n\nasync Task ToastBreadAsync()\n{\n    Console.WriteLine(\"Toasting bread...\");\n    await Task.Delay(1000);\n    Console.WriteLine(\"Toast ready!\");\n}\n\nConsole.WriteLine(\"Starting breakfast...\");\n\nTask coffeeTask = BrewCoffeeAsync(\"Espresso\");\nTask toastTask = ToastBreadAsync();\n\nConsole.WriteLine(\"Doing other tasks...\");\n\nawait Task.WhenAll(coffeeTask, toastTask);\n\nConsole.WriteLine(\"Breakfast ready!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Brewing\"",
                  "expectedOutput": "Brewing",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Toasting\"",
                  "expectedOutput": "Toasting",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Doing other tasks\"",
                  "expectedOutput": "Doing other tasks",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"ready\"",
                  "expectedOutput": "ready",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Async method: 'async Task MethodName()'. Inside: 'await Task.Delay(milliseconds)'. Start without await: 'Task t = MethodAsync()'. Wait for multiple: 'await Task.WhenAll(t1, t2)'."
                },
                {
                  "level": 2,
                  "text": "Forgetting 'await': If you call 'MethodAsync()' without 'await', it starts but you don't wait for it! The method continues immediately. Use 'await' when you need the result."
                },
                {
                  "level": 3,
                  "text": "Using Thread.Sleep() in async: NEVER use Thread.Sleep() in async methods! It blocks the thread. Always use 'await Task.Delay()' instead."
                },
                {
                  "level": 4,
                  "text": "Async void: Only use 'async void' for event handlers! For regular methods, use 'async Task'. 'async void' can't be awaited and swallows exceptions."
                },
                {
                  "level": 5,
                  "text": "Not understanding concurrency: Async doesn't mean parallel! In single-threaded context, it's about not blocking. Tasks run concurrently (interleaved), but might not be truly parallel."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting 'await'",
                  "consequence": "If you call 'MethodAsync()' without 'await', it starts but you don't wait for it! The method continues immediately. Use 'await' when you need the result.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using Thread.Sleep() in async",
                  "consequence": "NEVER use Thread.Sleep() in async methods! It blocks the thread. Always use 'await Task.Delay()' instead.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Async void",
                  "consequence": "Only use 'async void' for event handlers! For regular methods, use 'async Task'. 'async void' can't be awaited and swallows exceptions.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not understanding concurrency",
                  "consequence": "Async doesn't mean parallel! In single-threaded context, it's about not blocking. Tasks run concurrently (interleaved), but might not be truly parallel.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-10-02",
          "title": "The async & await Keywords (The Modern Way)",
          "moduleId": "module-10",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're a manager delegating tasks:\n\n'Hey team, START working on this report (don't block me!)'\n'I'll go do other things'\n'When the report is READY, I'll come back and review it'\n\nThat's async/await!\n\nASYNC keyword:\n• Marks a method as asynchronous\n• Enables 'await' keyword inside\n• Method can be 'paused' and 'resumed'\n• Returns Task or Task<T>\n\nAWAIT keyword:\n• 'Pause here until this completes'\n• Doesn't block the thread! (Thread is released for other work)\n• When done, execution continues from where it paused\n• Can only use inside 'async' methods\n\nThink of await like a bookmark: 'I'll pause here, do other things, and come back when this is ready.'\n\nRULE: If a method is async, you should await it! (Unless you intentionally want fire-and-forget)"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Net.Http;\nusing System.Threading.Tasks;\n\n// ASYNC method - returns Task\nasync Task DoWorkAsync()\n{\n    Console.WriteLine(\"Work started\");\n    await Task.Delay(1000);  // Pause for 1 second\n    Console.WriteLine(\"Work completed\");\n}\n\n// ASYNC method with return value - returns Task<string>\nasync Task<string> GetDataAsync()\n{\n    Console.WriteLine(\"Fetching data...\");\n    await Task.Delay(2000);\n    return \"Data retrieved!\";  // Returns string, but method returns Task<string>\n}\n\n// ASYNC method calling other async methods\nasync Task ProcessDataAsync()\n{\n    Console.WriteLine(\"Starting process...\");\n    \n    // Await other async methods\n    await DoWorkAsync();\n    \n    string data = await GetDataAsync();  // Get returned value\n    Console.WriteLine(\"Got: \" + data);\n    \n    Console.WriteLine(\"Process complete!\");\n}\n\n// Real-world example: HTTP request\nasync Task<string> DownloadWebPageAsync(string url)\n{\n    using HttpClient client = new HttpClient();  // Modern using declaration\n    Console.WriteLine(\"Downloading \" + url + \"...\");\n    string content = await client.GetStringAsync(url);  // Async HTTP call\n    Console.WriteLine(\"Download complete!\");\n    return content;  // client disposed at end of method scope\n}\n\n// Using the async methods\nawait ProcessDataAsync();\n\n// Multiple sequential awaits\nConsole.WriteLine(\"Step 1\");\nawait Task.Delay(500);\nConsole.WriteLine(\"Step 2\");\nawait Task.Delay(500);\nConsole.WriteLine(\"Step 3\");\n\n// Calling async method without await (fire-and-forget)\nTask backgroundTask = DoWorkAsync();  // Starts, doesn't wait\nConsole.WriteLine(\"This runs immediately!\");\nawait backgroundTask;  // Now wait for it",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`async Task MethodName()`**: 'async' modifier enables await. 'Task' is return type (like void for async). Method body can contain 'await' expressions.\n\n**`async Task<T> MethodName()`**: Async method that returns a value. Return type is Task<T> where T is the actual value type. Inside, you 'return T', not 'return Task<T>'!\n\n**`await expression`**: Waits for async operation without blocking thread. Expression must be 'awaitable' (Task, Task<T>, or custom awaitable). Execution pauses, then resumes when complete.\n\n**`Async all the way`**: If you call async method, you should await it. If your method awaits, it should be async. This propagates up the call stack - 'async all the way'!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-10-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build an async data processing pipeline!\n\n1. Create 'async Task<int> LoadDataAsync()':\n   - Print 'Loading data...'\n   - await Task.Delay(1000)\n   - Print 'Data loaded!'\n   - Return 42\n\n2. Create 'async Task<int> ProcessDataAsync(int input)':\n   - Print 'Processing data...'\n   - await Task.Delay(1500)\n   - Print 'Processing complete!'\n   - Return input * 2\n\n3. Create 'async Task<string> SaveResultAsync(int result)':\n   - Print 'Saving result...'\n   - await Task.Delay(800)\n   - Print 'Result saved!'\n   - Return 'Saved: ' + result\n\n4. Create 'async Task RunPipelineAsync()':\n   - Call all three methods in sequence (await each)\n   - Print final message from SaveResultAsync\n\n5. Call RunPipelineAsync() and await it",
              "starterCode": "using System;\nusing System.Threading.Tasks;\n\nasync Task<int> LoadDataAsync()\n{\n    // Implement\n}\n\nasync Task<int> ProcessDataAsync(int input)\n{\n    // Implement\n}\n\nasync Task<string> SaveResultAsync(int result)\n{\n    // Implement\n}\n\nasync Task RunPipelineAsync()\n{\n    // Load\n    int data = await LoadDataAsync();\n    \n    // Process\n    int processed = await ProcessDataAsync(data);\n    \n    // Save\n    string message = await SaveResultAsync(processed);\n    \n    Console.WriteLine(\"Pipeline result: \" + message);\n}\n\n// Run the pipeline\nawait RunPipelineAsync();",
              "solution": "using System;\nusing System.Threading.Tasks;\n\nasync Task<int> LoadDataAsync()\n{\n    Console.WriteLine(\"Loading data...\");\n    await Task.Delay(1000);\n    Console.WriteLine(\"Data loaded!\");\n    return 42;\n}\n\nasync Task<int> ProcessDataAsync(int input)\n{\n    Console.WriteLine(\"Processing data...\");\n    await Task.Delay(1500);\n    Console.WriteLine(\"Processing complete!\");\n    return input * 2;\n}\n\nasync Task<string> SaveResultAsync(int result)\n{\n    Console.WriteLine(\"Saving result...\");\n    await Task.Delay(800);\n    Console.WriteLine(\"Result saved!\");\n    return \"Saved: \" + result;\n}\n\nasync Task RunPipelineAsync()\n{\n    int data = await LoadDataAsync();\n    int processed = await ProcessDataAsync(data);\n    string message = await SaveResultAsync(processed);\n    Console.WriteLine(\"Pipeline result: \" + message);\n}\n\nawait RunPipelineAsync();\nConsole.WriteLine(\"All done!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Loading\"",
                  "expectedOutput": "Loading",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Processing\"",
                  "expectedOutput": "Processing",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Saving\"",
                  "expectedOutput": "Saving",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Pipeline result\"",
                  "expectedOutput": "Pipeline result",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Async method: 'async Task<T> MethodName()'. Return value: 'return T' (not Task<T>!). Call: 'T result = await MethodAsync()'. Chain: await each step in sequence."
                },
                {
                  "level": 2,
                  "text": "Returning Task<T> instead of T: In 'async Task<int> GetNumber()', return 'return 42;' NOT 'return Task.FromResult(42);'! The async keyword handles Task wrapping."
                },
                {
                  "level": 3,
                  "text": "Async void instead of async Task: Only use 'async void' for event handlers! Regular methods should be 'async Task'. 'async void' can't be awaited and exceptions are hard to catch."
                },
                {
                  "level": 4,
                  "text": "Not awaiting async methods: 'DoWorkAsync();' without await starts the method but doesn't wait! The calling method continues immediately. Always await unless you want fire-and-forget."
                },
                {
                  "level": 5,
                  "text": "Deadlocks with .Result or .Wait(): In UI/ASP.NET apps, using '.Result' or '.Wait()' on Task can cause DEADLOCK! Always use 'await'. Blocking on async code is dangerous."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Returning Task<T> instead of T",
                  "consequence": "In 'async Task<int> GetNumber()', return 'return 42;' NOT 'return Task.FromResult(42);'! The async keyword handles Task wrapping.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Async void instead of async Task",
                  "consequence": "Only use 'async void' for event handlers! Regular methods should be 'async Task'. 'async void' can't be awaited and exceptions are hard to catch.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not awaiting async methods",
                  "consequence": "'DoWorkAsync();' without await starts the method but doesn't wait! The calling method continues immediately. Always await unless you want fire-and-forget.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Deadlocks with .Result or .Wait()",
                  "consequence": "In UI/ASP.NET apps, using '.Result' or '.Wait()' on Task can cause DEADLOCK! Always use 'await'. Blocking on async code is dangerous.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-10-03",
          "title": "Task<T> (The Promise of a Future Result)",
          "moduleId": "module-10",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you order a package online:\n• You get a TRACKING NUMBER immediately\n• The package isn't here YET\n• The tracking number is a PROMISE: 'Your package WILL arrive'\n• You can check status, wait for it, or do other things\n• When it arrives, you can open it and get the contents\n\nThat's Task<T>!\n\nTask<T> represents:\n• An ONGOING operation (might not be done yet)\n• A PROMISE of a future result of type T\n• You can:\n  - Check if it's complete: task.IsCompleted\n  - Wait for it: await task\n  - Get the result: await task (returns T)\n  - Run multiple: Task.WhenAll(), Task.WhenAny()\n\nTask = async operation that returns nothing (void)\nTask<T> = async operation that returns T\n\nThink: Task<T> = 'I don't have the value NOW, but I WILL have it soon. Here's a promise!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Threading.Tasks;\nusing System.Collections.Generic;\n\n// Method returning Task<int> (promise of future int)\nasync Task<int> CalculateAsync(int x, int y)\n{\n    await Task.Delay(1000);  // Simulate work\n    return x + y;\n}\n\n// Using Task<T>\nTask<int> resultTask = CalculateAsync(5, 3);\nConsole.WriteLine(\"Calculation started...\");\n\nint result = await resultTask;  // Wait and get the int\nConsole.WriteLine(\"Result: \" + result);\n\n// TASK METHODS\n\n// Task.WhenAll - wait for ALL tasks\nTask<int> t1 = CalculateAsync(1, 2);\nTask<int> t2 = CalculateAsync(3, 4);\nTask<int> t3 = CalculateAsync(5, 6);\n\nint[] results = await Task.WhenAll(t1, t2, t3);\nConsole.WriteLine(\"All results: \" + string.Join(\", \", results));\n\n// Task.WhenAny - wait for FIRST to complete\nTask<int> fast = Task.Delay(500).ContinueWith(_ => 1);\nTask<int> slow = Task.Delay(2000).ContinueWith(_ => 2);\n\nTask<int> firstDone = await Task.WhenAny(fast, slow);\nint firstResult = await firstDone;\nConsole.WriteLine(\"First completed: \" + firstResult);\n\n// Task.Run - run CPU-bound work on background thread\nTask<int> cpuTask = Task.Run(() => \n{\n    int sum = 0;\n    for (int i = 0; i < 1000000; i++)\n    {\n        sum += i;\n    }\n    return sum;\n});\n\nint sum = await cpuTask;\nConsole.WriteLine(\"Sum: \" + sum);\n\n// Task status properties\nTask<string> task = GetDataAsync();\n\nConsole.WriteLine(\"IsCompleted: \" + task.IsCompleted);\nConsole.WriteLine(\"Status: \" + task.Status);\n\nstring data = await task;\nConsole.WriteLine(\"IsCompleted: \" + task.IsCompleted);  // Now true!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Task<T> vs Task`**: Task<T> returns a value of type T. Task returns nothing (like void). Both represent async operations. Use await to get T from Task<T>.\n\n**`await Task.WhenAll(t1, t2, t3)`**: Waits for ALL tasks to complete. Returns array of results if tasks are Task<T>. More efficient than awaiting each task sequentially!\n\n**`await Task.WhenAny(t1, t2)`**: Waits for FIRST task to complete. Returns the completed task (not the result!). Await the returned task to get result. Useful for timeouts.\n\n**`Task.Run(() => code)`**: Runs code on background thread (thread pool). Use for CPU-intensive work. Returns Task or Task<T>. Don't use for I/O (use async I/O instead)."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-10-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a download manager with Task<T>!\n\n1. Create 'async Task<int> DownloadFileAsync(string filename, int sizeKB)':\n   - Print 'Downloading [filename] ([sizeKB]KB)...'\n   - await Task.Delay(sizeKB * 10) to simulate download (bigger = slower)\n   - Print '[filename] complete!'\n   - Return sizeKB\n\n2. In main code:\n   - Start 4 downloads simultaneously (different sizes: 50KB, 150KB, 100KB, 200KB)\n   - Store in List<Task<int>>\n   - Use Task.WhenAll to wait for ALL downloads\n   - Sum the results to get total KB downloaded\n   - Calculate and display total MB (KB / 1024.0)\n\n3. BONUS: Use Task.WhenAny to detect which file finishes FIRST",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading.Tasks;\n\nasync Task<int> DownloadFileAsync(string filename, int sizeKB)\n{\n    // Implement download simulation\n}\n\nConsole.WriteLine(\"Starting downloads...\");\n\n// Create list of download tasks\nList<Task<int>> downloads = new List<Task<int>>();\n\ndownloads.Add(DownloadFileAsync(\"file1.zip\", 50));\ndownloads.Add(DownloadFileAsync(\"file2.zip\", 150));\ndownloads.Add(DownloadFileAsync(\"file3.zip\", 100));\ndownloads.Add(DownloadFileAsync(\"file4.zip\", 200));\n\n// Wait for all\nint[] sizes = await Task.WhenAll(downloads);\n\n// Calculate total\nint totalKB = sizes.Sum();\ndouble totalMB = totalKB / 1024.0;\n\nConsole.WriteLine(\"Total downloaded: \" + totalKB + \"KB (\" + totalMB + \"MB)\");",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\nusing System.Threading.Tasks;\n\nasync Task<int> DownloadFileAsync(string filename, int sizeKB)\n{\n    Console.WriteLine(\"Downloading \" + filename + \" (\" + sizeKB + \"KB)...\");\n    await Task.Delay(sizeKB * 10);\n    Console.WriteLine(filename + \" complete!\");\n    return sizeKB;\n}\n\nConsole.WriteLine(\"Starting downloads...\");\n\nList<Task<int>> downloads = new List<Task<int>>();\n\ndownloads.Add(DownloadFileAsync(\"file1.zip\", 50));\ndownloads.Add(DownloadFileAsync(\"file2.zip\", 150));\ndownloads.Add(DownloadFileAsync(\"file3.zip\", 100));\ndownloads.Add(DownloadFileAsync(\"file4.zip\", 200));\n\nint[] sizes = await Task.WhenAll(downloads);\n\nint totalKB = sizes.Sum();\ndouble totalMB = totalKB / 1024.0;\n\nConsole.WriteLine(\"\\nAll downloads complete!\");\nConsole.WriteLine(\"Total downloaded: \" + totalKB + \"KB (\" + totalMB.ToString(\"F2\") + \"MB)\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Downloading\"",
                  "expectedOutput": "Downloading",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"complete\"",
                  "expectedOutput": "complete",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Total downloaded\"",
                  "expectedOutput": "Total downloaded",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Return Task<int>: 'async Task<int> Method()'. Store tasks: 'List<Task<int>> list'. Wait for all: 'int[] results = await Task.WhenAll(list)'. Sum array: 'results.Sum()'."
                },
                {
                  "level": 2,
                  "text": "Awaiting in loop: 'foreach (var t in tasks) await t' is SEQUENTIAL! Use 'await Task.WhenAll(tasks)' for parallel. Awaiting one-by-one defeats the purpose of async."
                },
                {
                  "level": 3,
                  "text": "Not storing task before await: 'await Method1(); await Method2();' is sequential. Start both first: 'var t1 = Method1(); var t2 = Method2(); await Task.WhenAll(t1, t2);' for parallel!"
                },
                {
                  "level": 4,
                  "text": "Using .Result: 'task.Result' BLOCKS the thread! Use 'await task' instead. '.Result' can cause deadlocks in UI/ASP.NET apps."
                },
                {
                  "level": 5,
                  "text": "Task.WhenAny result: WhenAny returns the TASK, not the result! Must await again: 'Task<int> firstTask = await Task.WhenAny(t1, t2); int result = await firstTask;'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Awaiting in loop",
                  "consequence": "'foreach (var t in tasks) await t' is SEQUENTIAL! Use 'await Task.WhenAll(tasks)' for parallel. Awaiting one-by-one defeats the purpose of async.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not storing task before await",
                  "consequence": "'await Method1(); await Method2();' is sequential. Start both first: 'var t1 = Method1(); var t2 = Method2(); await Task.WhenAll(t1, t2);' for parallel!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using .Result",
                  "consequence": "'task.Result' BLOCKS the thread! Use 'await task' instead. '.Result' can cause deadlocks in UI/ASP.NET apps.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Task.WhenAny result",
                  "consequence": "WhenAny returns the TASK, not the result! Must await again: 'Task<int> firstTask = await Task.WhenAny(t1, t2); int result = await firstTask;'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Task.WhenAll Exception Aggregation (CRITICAL!)",
                  "consequence": "When multiple tasks fail, Task.WhenAll throws ONLY THE FIRST exception! Other exceptions are SILENTLY LOST unless you check Task.Exception.InnerExceptions. Example: if 3 of 5 API calls fail, you only see the first error!",
                  "correction": "To see ALL exceptions: wrap in try/catch, then check 'task.Exception?.InnerExceptions' or handle the AggregateException. Pattern: 'try { await Task.WhenAll(tasks); } catch { foreach (var t in tasks.Where(t => t.IsFaulted)) { Log(t.Exception); } }'. Or use 'Task.WhenAll(tasks).ContinueWith(t => t.Exception?.Flatten())' to aggregate all failures."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-10-04",
          "title": "Common Async Patterns & Best Practices",
          "moduleId": "module-10",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "You've learned async/await! But how do you use it WELL? Here are battle-tested patterns:\n\n1. ASYNC ALL THE WAY: If you call async, you should be async. Don't block with .Result or .Wait()!\n\n2. CONFIGURE AWAIT: In libraries, use 'ConfigureAwait(false)' to prevent deadlocks\n\n3. CANCELLATION: Long operations should support cancellation with CancellationToken\n\n4. ERROR HANDLING: Use try/catch around await - exceptions propagate normally!\n\n5. PARALLEL VS SEQUENTIAL:\n   - Sequential: await each task one by one\n   - Parallel: Start all, then Task.WhenAll\n\n6. CPU vs I/O:\n   - I/O bound: Use async/await (file, network, database)\n   - CPU bound: Use Task.Run for background processing\n\nThink: Async is like driving a car - you need to know not just HOW, but WHEN and WHERE to use each technique!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing System.Net.Http;\n\n// PATTERN 1: Error handling in async\nasync Task<string> FetchDataAsync()\n{\n    try\n    {\n        using HttpClient client = new HttpClient();  // Modern using declaration\n        return await client.GetStringAsync(\"https://api.example.com/data\");\n    }\n    catch (HttpRequestException ex)\n    {\n        Console.WriteLine(\"Network error: \" + ex.Message);\n        return \"Error occurred\";\n    }\n}\n\n// PATTERN 2: Cancellation with CancellationToken\nasync Task LongRunningTaskAsync(CancellationToken cancellationToken)\n{\n    for (int i = 0; i < 10; i++)\n    {\n        // Check if cancellation requested\n        cancellationToken.ThrowIfCancellationRequested();\n        \n        Console.WriteLine(\"Working... \" + i);\n        await Task.Delay(500, cancellationToken);\n    }\n    Console.WriteLine(\"Task completed!\");\n}\n\n// Using cancellation\nCancellationTokenSource cts = new CancellationTokenSource();\nTask task = LongRunningTaskAsync(cts.Token);\n\ncts.CancelAfter(2000);  // Cancel after 2 seconds\n\ntry\n{\n    await task;\n}\ncatch (OperationCanceledException)\n{\n    Console.WriteLine(\"Task was cancelled!\");\n}\n\n// PATTERN 3: Timeout pattern\nasync Task<string> GetDataWithTimeoutAsync(int timeoutMs)\n{\n    using CancellationTokenSource cts = new CancellationTokenSource();  // Modern using declaration\n    cts.CancelAfter(timeoutMs);\n    \n    try\n    {\n        return await FetchDataAsync();  // Your async operation\n    }\n    catch (OperationCanceledException)\n    {\n        return \"Operation timed out!\";  // cts disposed at end of method scope\n    }\n}\n\n// PATTERN 4: Progress reporting\nasync Task ProcessWithProgressAsync(IProgress<int> progress)\n{\n    for (int i = 0; i <= 100; i += 10)\n    {\n        await Task.Delay(200);\n        progress?.Report(i);  // Report progress\n    }\n}\n\n// Using progress\nvar progress = new Progress<int>(percent => \n{\n    Console.WriteLine(\"Progress: \" + percent + \"%\");\n});\n\nawait ProcessWithProgressAsync(progress);\n\n// PATTERN 5: Retry logic\nasync Task<string> RetryAsync(Func<Task<string>> operation, int maxRetries)\n{\n    for (int i = 0; i < maxRetries; i++)\n    {\n        try\n        {\n            return await operation();\n        }\n        catch (Exception ex)\n        {\n            if (i == maxRetries - 1) throw;  // Last attempt, rethrow\n            Console.WriteLine(\"Attempt \" + (i + 1) + \" failed, retrying...\");\n            await Task.Delay(1000 * (i + 1));  // Exponential backoff\n        }\n    }\n    throw new Exception(\"All retries failed\");\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`CancellationToken`**: Pass to async methods to support cancellation. Check with 'token.ThrowIfCancellationRequested()'. Create with CancellationTokenSource. Essential for long operations!\n\n**`ConfigureAwait(false)`**: In library code: 'await task.ConfigureAwait(false)' prevents deadlocks. In app code (UI/ASP.NET), usually not needed. Advanced topic!\n\n**`IProgress<T>`**: Interface for reporting progress. Create with 'new Progress<T>(callback)'. Call 'progress.Report(value)' in async method. Useful for long operations with UI updates.\n\n**`Async error handling`**: Use try/catch around await! Exceptions from awaited tasks propagate normally. Task.WhenAll aggregates exceptions - check task.Exception for all errors."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-10-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a robust file processor with cancellation and progress!\n\n1. Create 'async Task ProcessFilesAsync(int fileCount, CancellationToken cancellationToken, IProgress<int> progress)':\n   - Loop from 0 to fileCount\n   - For each file:\n     - Check cancellation: cancellationToken.ThrowIfCancellationRequested()\n     - Print 'Processing file [i]...'\n     - await Task.Delay(500, cancellationToken)\n     - Report progress: progress?.Report((i + 1) * 100 / fileCount)\n   - Print 'All files processed!'\n\n2. In main code:\n   - Create CancellationTokenSource\n   - Create Progress<int> that prints progress percentage\n   - Start processing 10 files\n   - Cancel after 3 seconds with cts.CancelAfter(3000)\n   - Wrap in try/catch to handle OperationCanceledException\n   - Print appropriate message if cancelled or completed",
              "starterCode": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nasync Task ProcessFilesAsync(int fileCount, CancellationToken cancellationToken, IProgress<int> progress)\n{\n    for (int i = 0; i < fileCount; i++)\n    {\n        // Check cancellation\n        \n        // Process file\n        Console.WriteLine(\"Processing file \" + (i + 1) + \"...\");\n        await Task.Delay(500, cancellationToken);\n        \n        // Report progress\n        int percentComplete = (i + 1) * 100 / fileCount;\n        progress?.Report(percentComplete);\n    }\n    Console.WriteLine(\"All files processed!\");\n}\n\n// Create cancellation source\nCancellationTokenSource cts = new CancellationTokenSource();\n\n// Create progress reporter\nvar progress = new Progress<int>(percent =>\n{\n    Console.WriteLine(\"Progress: \" + percent + \"%\");\n});\n\n// Start processing\nTask task = ProcessFilesAsync(10, cts.Token, progress);\n\n// Cancel after 3 seconds\ncts.CancelAfter(3000);\n\ntry\n{\n    await task;\n    Console.WriteLine(\"Processing completed successfully!\");\n}\ncatch (OperationCanceledException)\n{\n    Console.WriteLine(\"Processing was cancelled!\");\n}",
              "solution": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nasync Task ProcessFilesAsync(int fileCount, CancellationToken cancellationToken, IProgress<int> progress)\n{\n    for (int i = 0; i < fileCount; i++)\n    {\n        cancellationToken.ThrowIfCancellationRequested();\n        \n        Console.WriteLine(\"Processing file \" + (i + 1) + \"...\");\n        await Task.Delay(500, cancellationToken);\n        \n        int percentComplete = (i + 1) * 100 / fileCount;\n        progress?.Report(percentComplete);\n    }\n    Console.WriteLine(\"All files processed!\");\n}\n\nCancellationTokenSource cts = new CancellationTokenSource();\n\nvar progress = new Progress<int>(percent =>\n{\n    Console.WriteLine(\"Progress: \" + percent + \"%\");\n});\n\nTask task = ProcessFilesAsync(10, cts.Token, progress);\n\ncts.CancelAfter(3000);\n\ntry\n{\n    await task;\n    Console.WriteLine(\"Processing completed successfully!\");\n}\ncatch (OperationCanceledException)\n{\n    Console.WriteLine(\"\\nProcessing was cancelled!\");\n}\n\ncts.Dispose();",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Processing file\"",
                  "expectedOutput": "Processing file",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Progress\"",
                  "expectedOutput": "Progress",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"cancelled\"",
                  "expectedOutput": "cancelled",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "CancellationToken: check with 'token.ThrowIfCancellationRequested()'. Progress: 'progress?.Report(value)'. Cancel: 'cts.CancelAfter(ms)'. Catch OperationCanceledException!"
                },
                {
                  "level": 2,
                  "text": "Not checking cancellation token: If you accept CancellationToken but never check it, cancellation won't work! Call ThrowIfCancellationRequested() regularly, especially in loops."
                },
                {
                  "level": 3,
                  "text": "Forgetting to dispose CancellationTokenSource: CTS implements IDisposable. Always dispose: 'cts.Dispose()' or use 'using'. Leaking these can cause memory issues."
                },
                {
                  "level": 4,
                  "text": "Progress deadlocks in UI: Progress<T> marshals to original context (usually UI thread). If UI thread is blocked, progress updates queue up. Always await, never block!"
                },
                {
                  "level": 5,
                  "text": "Swallowing OperationCanceledException: Don't catch and ignore this! It's expected behavior. Catch it only to clean up or log, then let it propagate (or handle gracefully)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not checking cancellation token",
                  "consequence": "If you accept CancellationToken but never check it, cancellation won't work! Call ThrowIfCancellationRequested() regularly, especially in loops.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to dispose CancellationTokenSource",
                  "consequence": "CTS implements IDisposable. Always dispose: 'cts.Dispose()' or use 'using'. Leaking these can cause memory issues.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Progress deadlocks in UI",
                  "consequence": "Progress<T> marshals to original context (usually UI thread). If UI thread is blocked, progress updates queue up. Always await, never block!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Swallowing OperationCanceledException",
                  "consequence": "Don't catch and ignore this! It's expected behavior. Catch it only to clean up or log, then let it propagate (or handle gracefully).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-10-05",
          "title": "Thread Safety with the Lock Type (C# 13)",
          "moduleId": "module-10",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a single bathroom in a busy office:\n\n- Only ONE person can use it at a time\n- When you enter, you LOCK the door\n- Others must WAIT until you unlock and exit\n- Without locking, chaos! (Multiple people entering simultaneously!)\n\nThat's thread synchronization!\n\nWHY DO WE NEED LOCKS?\n- Multiple threads can access shared data simultaneously\n- Without synchronization = race conditions, corrupted data!\n- Lock ensures only ONE thread executes critical code at a time\n\nOLD WAY (Before C# 13):\n- Use 'object' as a lock: private readonly object _lock = new();\n- Works, but it's a workaround (object wasn't designed for this!)\n\nNEW WAY (C# 13):\n- Dedicated Lock type: private readonly Lock _lock = new();\n- Purpose-built for synchronization\n- Cleaner API, compiler optimizations, better intent!\n\nThink: Lock = 'The bathroom door lock that ensures only one person (thread) can enter at a time!'"
            },
            {
              "type": "THEORY",
              "title": "The New System.Threading.Lock Type",
              "content": "## C# 13 Lock Type - What's New?\n\n**Why a dedicated Lock type?**\n1. **Clearer intent**: `Lock` explicitly says 'this is for synchronization'\n2. **Compiler optimizations**: The compiler can generate more efficient code\n3. **Better API**: Purpose-built methods like `EnterScope()`\n4. **Type safety**: Can't accidentally use wrong object as lock\n\n**The old approach (still works, but outdated):**\n```csharp\nprivate readonly object _syncLock = new();\nlock (_syncLock) { /* critical section */ }\n```\n\n**The new C# 13 approach:**\n```csharp\nprivate readonly Lock _lock = new();\nlock (_lock) { /* critical section - optimized! */ }\n```\n\n**EnterScope() pattern:**\n```csharp\nusing (_lock.EnterScope())\n{\n    // Critical section - automatically released!\n}\n```\n\n**When to use locks:**\n- Accessing shared mutable state from multiple threads\n- Incrementing counters, modifying collections\n- Any read-modify-write operation\n\n**Best practices:**\n- Keep critical sections SHORT\n- Always use `readonly` for lock objects\n- Don't lock on `this` or public objects\n- Prefer `Lock` over `object` in new C# 13+ code"
            },
            {
              "type": "EXAMPLE",
              "title": "Modern Thread Safety with Lock (C# 13)",
              "content": "C# 13 introduces the dedicated Lock type for cleaner, more efficient synchronization.",
              "code": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\n// ===== PROBLEM: Race condition without lock =====\nclass UnsafeCounter\n{\n    private int _count = 0;\n    \n    public void Increment()\n    {\n        // DANGER! Not thread-safe!\n        // Multiple threads can read same value,\n        // increment it, and write back - losing updates!\n        _count++;\n    }\n    \n    public int Count => _count;\n}\n\n// ===== OLD WAY: Using object as lock =====\nclass OldStyleCounter\n{\n    private int _count = 0;\n    private readonly object _syncLock = new();  // Object as lock\n    \n    public void Increment()\n    {\n        lock (_syncLock)  // Only one thread at a time\n        {\n            _count++;  // Now thread-safe!\n        }\n    }\n    \n    public int Count\n    {\n        get\n        {\n            lock (_syncLock)\n            {\n                return _count;\n            }\n        }\n    }\n}\n\n// ===== NEW WAY: C# 13 dedicated Lock type =====\nclass ModernCounter\n{\n    private int _count = 0;\n    private readonly Lock _lock = new();  // Purpose-built Lock type!\n    \n    public void Increment()\n    {\n        lock (_lock)  // Compiler optimized!\n        {\n            _count++;\n        }\n    }\n    \n    // Alternative: EnterScope() pattern\n    public void IncrementWithScope()\n    {\n        using (_lock.EnterScope())  // Auto-released when scope exits\n        {\n            _count++;\n        }\n    }\n    \n    public int Count\n    {\n        get\n        {\n            lock (_lock)\n            {\n                return _count;\n            }\n        }\n    }\n}\n\n// ===== DEMONSTRATION =====\nvar counter = new ModernCounter();\nvar tasks = new List<Task>();\n\nConsole.WriteLine(\"Starting 100 tasks, each incrementing 1000 times...\");\n\nfor (int i = 0; i < 100; i++)\n{\n    tasks.Add(Task.Run(() =>\n    {\n        for (int j = 0; j < 1000; j++)\n        {\n            counter.Increment();\n        }\n    }));\n}\n\nawait Task.WhenAll(tasks);\n\nConsole.WriteLine($\"Final count: {counter.Count}\");\nConsole.WriteLine($\"Expected: 100000\");\nConsole.WriteLine(counter.Count == 100000 ? \"SUCCESS! Lock prevented race conditions!\" : \"ERROR: Race condition occurred!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Lock vs Other Synchronization Options",
              "content": "## When to Use What?\n\n**Lock (C# 13) / lock statement:**\n- Simple mutual exclusion\n- Short critical sections\n- Most common choice for thread safety\n\n**SemaphoreSlim:**\n- Limit concurrent access (e.g., max 5 threads)\n- Async-friendly with WaitAsync()\n\n**ReaderWriterLockSlim:**\n- Many readers, few writers scenario\n- Readers don't block each other\n\n**Interlocked:**\n- Simple atomic operations (increment, compare-exchange)\n- No lock overhead for single operations\n- Example: `Interlocked.Increment(ref _count);`\n\n**Monitor:**\n- More control than lock (TryEnter, Wait, Pulse)\n- lock statement is syntactic sugar for Monitor\n\n**Concurrent collections:**\n- ConcurrentDictionary, ConcurrentQueue, etc.\n- Built-in thread safety for collections\n\n**Rule of thumb:**\n- Start with `Lock` (C# 13) or `lock` for simple cases\n- Use `Interlocked` for single atomic operations\n- Use concurrent collections for thread-safe data structures\n- Consider other primitives for complex scenarios"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-10-05-challenge-01",
              "title": "Thread-Safe Bank Account",
              "description": "Build a thread-safe bank account using the C# 13 Lock type.",
              "instructions": "Create a thread-safe BankAccount class!\n\n1. Create 'BankAccount' class with:\n   - private decimal _balance field\n   - private readonly Lock _lock field (C# 13 Lock type)\n   - public decimal Balance property (thread-safe read)\n   - public void Deposit(decimal amount) method (thread-safe)\n   - public bool Withdraw(decimal amount) method (thread-safe, return false if insufficient funds)\n\n2. In main code:\n   - Create account with initial balance of 1000\n   - Start 10 tasks that each deposit 100 (total +1000)\n   - Start 10 tasks that each withdraw 50 (total -500)\n   - Wait for all tasks\n   - Print final balance (should be 1500)\n\nUse 'lock (_lock)' or '_lock.EnterScope()' to protect critical sections!",
              "starterCode": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing System.Collections.Generic;\n\nclass BankAccount\n{\n    private decimal _balance;\n    private readonly Lock _lock = new();\n    \n    public BankAccount(decimal initialBalance)\n    {\n        _balance = initialBalance;\n    }\n    \n    public decimal Balance\n    {\n        get\n        {\n            // TODO: Make thread-safe\n            return _balance;\n        }\n    }\n    \n    public void Deposit(decimal amount)\n    {\n        // TODO: Make thread-safe\n        _balance += amount;\n        Console.WriteLine($\"Deposited {amount}, Balance: {_balance}\");\n    }\n    \n    public bool Withdraw(decimal amount)\n    {\n        // TODO: Make thread-safe, check for sufficient funds\n        if (_balance >= amount)\n        {\n            _balance -= amount;\n            Console.WriteLine($\"Withdrew {amount}, Balance: {_balance}\");\n            return true;\n        }\n        return false;\n    }\n}\n\nvar account = new BankAccount(1000);\nvar tasks = new List<Task>();\n\nConsole.WriteLine($\"Initial balance: {account.Balance}\");\n\n// Start deposit tasks\nfor (int i = 0; i < 10; i++)\n{\n    tasks.Add(Task.Run(() => account.Deposit(100)));\n}\n\n// Start withdraw tasks\nfor (int i = 0; i < 10; i++)\n{\n    tasks.Add(Task.Run(() => account.Withdraw(50)));\n}\n\nawait Task.WhenAll(tasks);\n\nConsole.WriteLine($\"\\nFinal balance: {account.Balance}\");\nConsole.WriteLine($\"Expected: 1500\");",
              "solution": "using System;\nusing System.Threading;\nusing System.Threading.Tasks;\nusing System.Collections.Generic;\n\nclass BankAccount\n{\n    private decimal _balance;\n    private readonly Lock _lock = new();\n    \n    public BankAccount(decimal initialBalance)\n    {\n        _balance = initialBalance;\n    }\n    \n    public decimal Balance\n    {\n        get\n        {\n            lock (_lock)\n            {\n                return _balance;\n            }\n        }\n    }\n    \n    public void Deposit(decimal amount)\n    {\n        lock (_lock)\n        {\n            _balance += amount;\n            Console.WriteLine($\"Deposited {amount}, Balance: {_balance}\");\n        }\n    }\n    \n    public bool Withdraw(decimal amount)\n    {\n        lock (_lock)\n        {\n            if (_balance >= amount)\n            {\n                _balance -= amount;\n                Console.WriteLine($\"Withdrew {amount}, Balance: {_balance}\");\n                return true;\n            }\n            Console.WriteLine($\"Insufficient funds for {amount}\");\n            return false;\n        }\n    }\n}\n\nvar account = new BankAccount(1000);\nvar tasks = new List<Task>();\n\nConsole.WriteLine($\"Initial balance: {account.Balance}\");\nConsole.WriteLine(\"Starting concurrent operations...\\n\");\n\nfor (int i = 0; i < 10; i++)\n{\n    tasks.Add(Task.Run(() => account.Deposit(100)));\n}\n\nfor (int i = 0; i < 10; i++)\n{\n    tasks.Add(Task.Run(() => account.Withdraw(50)));\n}\n\nawait Task.WhenAll(tasks);\n\nConsole.WriteLine($\"\\nFinal balance: {account.Balance}\");\nConsole.WriteLine($\"Expected: 1500\");\nConsole.WriteLine(account.Balance == 1500 ? \"SUCCESS!\" : \"Race condition detected!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain initial balance",
                  "expectedOutput": "Initial balance",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain deposit operations",
                  "expectedOutput": "Deposited",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain final balance",
                  "expectedOutput": "Final balance",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Final balance should be 1500",
                  "expectedOutput": "1500",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "id": "hint-1",
                  "text": "Lock syntax: 'lock (_lock) { /* code */ }'. All reads AND writes to _balance must be inside lock blocks. The Lock type is in System.Threading namespace.",
                  "order": 1
                },
                {
                  "id": "hint-2",
                  "text": "EnterScope alternative: 'using (_lock.EnterScope()) { /* code */ }'. The lock is automatically released when the using block exits, even if exception occurs.",
                  "order": 2
                },
                {
                  "id": "hint-3",
                  "text": "Don't forget the Balance getter! Reading _balance outside a lock can return stale/torn values. ALWAYS protect shared mutable state, even for reads.",
                  "order": 3
                },
                {
                  "id": "hint-4",
                  "text": "Withdraw check-then-act: The balance check AND subtraction must be in the SAME lock block. If you check outside, another thread might withdraw between check and action!",
                  "order": 4
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not locking read operations",
                  "consequence": "Reading shared state without lock can return stale or torn (partially updated) values! Always lock both reads AND writes to shared mutable state.",
                  "correction": "Wrap the Balance getter in lock (_lock) { return _balance; }"
                },
                {
                  "mistake": "Check-then-act outside single lock",
                  "consequence": "If you check balance in one lock block and withdraw in another, the balance could change between check and action! This is a classic race condition.",
                  "correction": "Put the entire check-and-withdraw logic in a single lock block: lock (_lock) { if (_balance >= amount) { _balance -= amount; } }"
                },
                {
                  "mistake": "Using old object lock syntax in C# 13",
                  "consequence": "While 'object _lock = new()' still works, it misses compiler optimizations and doesn't clearly communicate intent. The Lock type is purpose-built for synchronization.",
                  "correction": "Use 'private readonly Lock _lock = new();' in C# 13+ for cleaner code and better performance."
                },
                {
                  "mistake": "Locking on 'this' or public objects",
                  "consequence": "External code could lock on the same object, causing deadlocks! Never lock on 'this', typeof(Type), or public fields. Always use private lock objects.",
                  "correction": "Always use: 'private readonly Lock _lock = new();' - private and readonly ensures only your code can use it."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        }
      ]
    },
    {
      "id": "module-11",
      "title": "ASP.NET Core & Web APIs",
      "description": "Build web applications and RESTful APIs using ASP.NET Core with minimal APIs, routing, and HTTP handling.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-11-01",
          "title": "What is ASP.NET Core? (The Web Application Factory)",
          "moduleId": "module-11",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a restaurant:\n• KITCHEN prepares food (your business logic)\n• WAITERS take orders and deliver food (HTTP handles requests/responses)\n• MENU lists what's available (your API endpoints)\n• CUSTOMERS make requests (web browsers, mobile apps, other services)\n\nThat's ASP.NET Core! It's a framework for building WEB APPLICATIONS and APIS:\n\nWEB API = Application Programming Interface for the web\n• Not a visual website (no HTML/CSS)\n• Returns DATA (JSON, XML)\n• Other apps consume your API (mobile apps, frontend frameworks, other services)\n\nASP.NET Core 8 (latest) features:\n• MINIMAL APIs - Simple, lightweight endpoint definitions\n• FAST - One of the fastest web frameworks\n• CROSS-PLATFORM - Runs on Windows, Linux, Mac\n• BUILT-IN features: Logging, DI, Configuration\n\nThink: ASP.NET Core = 'The factory that creates web services that speak HTTP and return data!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// MINIMAL API in ASP.NET Core 8 (.NET 8)\n// File: Program.cs\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\n// ENDPOINT 1: Simple GET request\napp.MapGet(\"/\", () => \"Hello from ASP.NET Core!\");\n\n// ENDPOINT 2: GET with route parameter\napp.MapGet(\"/hello/{name}\", (string name) => \n{\n    return $\"Hello, {name}!\";\n});\n\n// ENDPOINT 3: Returning JSON object\napp.MapGet(\"/api/user\", () => \n{\n    return new { Id = 1, Name = \"Alice\", Email = \"alice@example.com\" };\n});\n\n// ENDPOINT 4: List of data\napp.MapGet(\"/api/products\", () => \n{\n    var products = new[]\n    {\n        new { Id = 1, Name = \"Laptop\", Price = 999.99 },\n        new { Id = 2, Name = \"Mouse\", Price = 29.99 },\n        new { Id = 3, Name = \"Keyboard\", Price = 79.99 }\n    };\n    return products;\n});\n\n// ENDPOINT 5: Query parameters\napp.MapGet(\"/api/search\", (string? query) => \n{\n    if (string.IsNullOrEmpty(query))\n        return Results.BadRequest(\"Query parameter required!\");\n    \n    return Results.Ok($\"Searching for: {query}\");\n});\n\napp.Run();  // Start the web server!\n\n// Access in browser:\n// http://localhost:5000/\n// http://localhost:5000/hello/Bob\n// http://localhost:5000/api/user\n// http://localhost:5000/api/products\n// http://localhost:5000/api/search?query=laptop",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`WebApplication.CreateBuilder(args)`**: Creates the web application builder. Configures services, logging, configuration. This is the foundation of your app.\n\n**`app.MapGet(route, handler)`**: Defines a GET endpoint. Route is URL pattern (\\\"/api/users\\\"). Handler is lambda that returns response. ASP.NET Core automatically converts to JSON!\n\n**`Route parameters: {name}`**: Curly braces in route = parameter! /hello/{name} matches /hello/Bob. Parameter value passed to handler: (string name) => ...\n\n**`app.Run()`**: Starts the web server! Listens for HTTP requests. Runs until stopped (Ctrl+C). This MUST be the last line!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create your first ASP.NET Core API!\n\n1. Create web application builder and app\n\n2. Create these endpoints:\n   - GET / -> Return \"Welcome to my API!\"\n   - GET /api/time -> Return current DateTime as JSON\n   - GET /api/greet/{name} -> Return greeting with name\n   - GET /api/math/add?a=5&b=3 -> Return sum of two numbers\n   - GET /api/products -> Return array of 3 product objects (Id, Name, Price)\n\n3. Run the application with app.Run()\n\nNOTE: For the learning platform, simulate endpoint behavior by printing what each would return!",
              "starterCode": "using Microsoft.AspNetCore.Builder;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\n// Endpoint 1: Root\napp.MapGet(\"/\", () => /* return value */);\n\n// Endpoint 2: Current time\napp.MapGet(\"/api/time\", () => \n{\n    // Return DateTime.Now as anonymous object\n});\n\n// Endpoint 3: Greet with name parameter\napp.MapGet(\"/api/greet/{name}\", (string name) => \n{\n    // Return greeting\n});\n\n// Endpoint 4: Add two numbers from query\napp.MapGet(\"/api/math/add\", (int a, int b) => \n{\n    // Return sum\n});\n\n// Endpoint 5: Product list\napp.MapGet(\"/api/products\", () => \n{\n    // Return array of products\n});\n\nConsole.WriteLine(\"API endpoints created!\");\nConsole.WriteLine(\"Endpoints available:\");\nConsole.WriteLine(\"  GET /\");\nConsole.WriteLine(\"  GET /api/time\");\nConsole.WriteLine(\"  GET /api/greet/{name}\");\nConsole.WriteLine(\"  GET /api/math/add?a=5&b=3\");\nConsole.WriteLine(\"  GET /api/products\");",
              "solution": "using Microsoft.AspNetCore.Builder;\nusing System;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\napp.MapGet(\"/\", () => \"Welcome to my API!\");\n\napp.MapGet(\"/api/time\", () => \n{\n    return new { CurrentTime = DateTime.Now };\n});\n\napp.MapGet(\"/api/greet/{name}\", (string name) => \n{\n    return $\"Hello, {name}! Welcome to the API.\";\n});\n\napp.MapGet(\"/api/math/add\", (int a, int b) => \n{\n    return new { A = a, B = b, Sum = a + b };\n});\n\napp.MapGet(\"/api/products\", () => \n{\n    var products = new[]\n    {\n        new { Id = 1, Name = \"Laptop\", Price = 999.99 },\n        new { Id = 2, Name = \"Mouse\", Price = 29.99 },\n        new { Id = 3, Name = \"Keyboard\", Price = 79.99 }\n    };\n    return products;\n});\n\nConsole.WriteLine(\"API endpoints created!\");\nConsole.WriteLine(\"Endpoints available:\");\nConsole.WriteLine(\"  GET /\");\nConsole.WriteLine(\"  GET /api/time\");\nConsole.WriteLine(\"  GET /api/greet/Bob\");\nConsole.WriteLine(\"  GET /api/math/add?a=5&b=3\");\nConsole.WriteLine(\"  GET /api/products\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"API endpoints\"",
                  "expectedOutput": "API endpoints",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"available\"",
                  "expectedOutput": "available",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"/api/\"",
                  "expectedOutput": "/api/",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create builder and app. MapGet: app.MapGet(route, handler). Route params: /api/{param}. Query params: (int a, int b) from ?a=5&b=3. Return objects - auto-converted to JSON!"
                },
                {
                  "level": 2,
                  "text": "Forgetting app.Run(): Without app.Run() at the end, server doesn't start! It MUST be the last line in Program.cs. Server won't listen for requests without it."
                },
                {
                  "level": 3,
                  "text": "Route casing: Routes are case-INSENSITIVE by default! /API/Products and /api/products are the same. But parameters ARE case-sensitive in C# handler!"
                },
                {
                  "level": 4,
                  "text": "Missing using statements: Need 'using Microsoft.AspNetCore.Builder;' and others. If IDE shows red underlines, you're missing package references or usings!"
                },
                {
                  "level": 5,
                  "text": "Query parameter types: Query params auto-bind to handler parameters! ?a=5&b=3 with (int a, int b) works automatically. Wrong type (string when expecting int) = 400 Bad Request."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting app.Run()",
                  "consequence": "Without app.Run() at the end, server doesn't start! It MUST be the last line in Program.cs. Server won't listen for requests without it.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Route casing",
                  "consequence": "Routes are case-INSENSITIVE by default! /API/Products and /api/products are the same. But parameters ARE case-sensitive in C# handler!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Missing using statements",
                  "consequence": "Need 'using Microsoft.AspNetCore.Builder;' and others. If IDE shows red underlines, you're missing package references or usings!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Query parameter types",
                  "consequence": "Query params auto-bind to handler parameters! ?a=5&b=3 with (int a, int b) works automatically. Wrong type (string when expecting int) = 400 Bad Request.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-11-02",
          "title": "Building Your First Minimal API (The Data Menu)",
          "moduleId": "module-11",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a food delivery app:\n• BROWSE menu (GET /api/menu)\n• VIEW item details (GET /api/menu/5)\n• ADD to cart (POST /api/cart)\n• UPDATE quantity (PUT /api/cart/3)\n• REMOVE from cart (DELETE /api/cart/3)\n\nEach of these is an API ENDPOINT! Together they form your API.\n\nMINIMAL API (ASP.NET Core 8 style):\n• NO controllers needed!\n• Define endpoints directly in Program.cs\n• Lambda functions handle requests\n• Less boilerplate, more productivity\n\nIn-memory data store:\n• For learning, use List<T> as database\n• In production, you'd use real database (next module!)\n\nThink: Minimal API = 'Quick, simple way to expose data and functionality over HTTP!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\n// IN-MEMORY DATA (simulates database)\nclass Todo\n{\n    public int Id { get; set; }\n    public string? Title { get; set; }\n    public bool IsComplete { get; set; }\n}\n\nvar todos = new List<Todo>\n{\n    new Todo { Id = 1, Title = \"Learn C#\", IsComplete = true },\n    new Todo { Id = 2, Title = \"Build API\", IsComplete = false },\n    new Todo { Id = 3, Title = \"Deploy app\", IsComplete = false }\n};\n\n// GET all todos\napp.MapGet(\"/api/todos\", () => todos);\n\n// GET single todo by ID\napp.MapGet(\"/api/todos/{id}\", (int id) =>\n{\n    var todo = todos.FirstOrDefault(t => t.Id == id);\n    return todo is not null ? Results.Ok(todo) : Results.NotFound();\n});\n\n// GET completed todos only\napp.MapGet(\"/api/todos/completed\", () => \n{\n    return todos.Where(t => t.IsComplete);\n});\n\n// Count todos\napp.MapGet(\"/api/todos/count\", () => \n{\n    return new { Total = todos.Count, Completed = todos.Count(t => t.IsComplete) };\n});\n\napp.Run();\n\n// Try these URLs:\n// http://localhost:5000/api/todos\n// http://localhost:5000/api/todos/1\n// http://localhost:5000/api/todos/completed\n// http://localhost:5000/api/todos/count",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Results.Ok(value)`**: Returns 200 OK status with data. 'Results' class has helpers: Ok, NotFound, BadRequest, Created, NoContent. Proper HTTP status codes!\n\n**`Results.NotFound()`**: Returns 404 Not Found status. Use when resource doesn't exist. Better than returning null!\n\n**`FirstOrDefault() with null check`**: LINQ method returns first match or null. Use 'is not null' pattern matching to check. Modern C# syntax!\n\n**`In-memory data store`**: List<T> simulates database for learning. Changes persist during app lifetime. Restarting app resets data. Use real DB in production!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a Book Library API!\n\n1. Create a 'Book' class:\n   - int Id\n   - string Title\n   - string Author\n   - int Year\n   - bool IsAvailable\n\n2. Create in-memory List with 4-5 books\n\n3. Create these endpoints:\n   - GET /api/books -> Return all books\n   - GET /api/books/{id} -> Return single book (use Results.Ok or Results.NotFound)\n   - GET /api/books/available -> Return only available books\n   - GET /api/books/author/{author} -> Return books by specific author\n   - GET /api/books/stats -> Return statistics (total books, available, unavailable)\n\n4. Print endpoint list when API starts",
              "starterCode": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass Book\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Author { get; set; }\n    public int Year { get; set; }\n    public bool IsAvailable { get; set; }\n}\n\nvar books = new List<Book>\n{\n    // Add 4-5 books\n};\n\n// GET all books\napp.MapGet(\"/api/books\", () => books);\n\n// GET book by ID\napp.MapGet(\"/api/books/{id}\", (int id) =>\n{\n    // Find and return book or NotFound\n});\n\n// GET available books\napp.MapGet(\"/api/books/available\", () =>\n{\n    // Filter available books\n});\n\n// GET books by author\napp.MapGet(\"/api/books/author/{author}\", (string author) =>\n{\n    // Filter by author\n});\n\n// GET statistics\napp.MapGet(\"/api/books/stats\", () =>\n{\n    // Return stats object\n});\n\nConsole.WriteLine(\"Book Library API Ready!\");",
              "solution": "using Microsoft.AspNetCore.Builder;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass Book\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Author { get; set; }\n    public int Year { get; set; }\n    public bool IsAvailable { get; set; }\n}\n\nvar books = new List<Book>\n{\n    new Book { Id = 1, Title = \"1984\", Author = \"Orwell\", Year = 1949, IsAvailable = true },\n    new Book { Id = 2, Title = \"To Kill a Mockingbird\", Author = \"Lee\", Year = 1960, IsAvailable = false },\n    new Book { Id = 3, Title = \"Animal Farm\", Author = \"Orwell\", Year = 1945, IsAvailable = true },\n    new Book { Id = 4, Title = \"The Great Gatsby\", Author = \"Fitzgerald\", Year = 1925, IsAvailable = true }\n};\n\napp.MapGet(\"/api/books\", () => books);\n\napp.MapGet(\"/api/books/{id}\", (int id) =>\n{\n    var book = books.FirstOrDefault(b => b.Id == id);\n    return book is not null ? Results.Ok(book) : Results.NotFound();\n});\n\napp.MapGet(\"/api/books/available\", () =>\n{\n    return books.Where(b => b.IsAvailable);\n});\n\napp.MapGet(\"/api/books/author/{author}\", (string author) =>\n{\n    return books.Where(b => b.Author.Equals(author, StringComparison.OrdinalIgnoreCase));\n});\n\napp.MapGet(\"/api/books/stats\", () =>\n{\n    return new \n    { \n        Total = books.Count, \n        Available = books.Count(b => b.IsAvailable),\n        Unavailable = books.Count(b => !b.IsAvailable)\n    };\n});\n\nConsole.WriteLine(\"Book Library API Ready!\");\nConsole.WriteLine(\"Endpoints:\");\nConsole.WriteLine(\"  GET /api/books\");\nConsole.WriteLine(\"  GET /api/books/{id}\");\nConsole.WriteLine(\"  GET /api/books/available\");\nConsole.WriteLine(\"  GET /api/books/author/{author}\");\nConsole.WriteLine(\"  GET /api/books/stats\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Book Library\"",
                  "expectedOutput": "Book Library",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Ready\"",
                  "expectedOutput": "Ready",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Endpoints\"",
                  "expectedOutput": "Endpoints",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Class inside Program.cs: 'class Book { properties }'. List: 'new List<Book> { new Book { ... } }'. Find: '.FirstOrDefault()'. Filter: '.Where()'. Return: 'Results.Ok()' or 'Results.NotFound()'."
                },
                {
                  "level": 2,
                  "text": "Route order matters: /api/books/available MUST come BEFORE /api/books/{id}! Otherwise {id} matches \\\"available\\\" as ID. Specific routes before parameterized ones!"
                },
                {
                  "level": 3,
                  "text": "Case sensitivity in string compare: author == \\\"Orwell\\\" won't match \\\"orwell\\\"! Use .Equals(author, StringComparison.OrdinalIgnoreCase) for case-insensitive matching."
                },
                {
                  "level": 4,
                  "text": "Null reference on FirstOrDefault: Always check 'is not null' before using! FirstOrDefault returns null if not found. Accessing properties on null = NullReferenceException."
                },
                {
                  "level": 5,
                  "text": "Forgetting to return Results: Just returning 'null' gives 204 No Content! Use 'Results.NotFound()' for proper 404 status. HTTP status codes matter for API consumers!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Route order matters",
                  "consequence": "/api/books/available MUST come BEFORE /api/books/{id}! Otherwise {id} matches \\\"available\\\" as ID. Specific routes before parameterized ones!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Case sensitivity in string compare",
                  "consequence": "author == \\\"Orwell\\\" won't match \\\"orwell\\\"! Use .Equals(author, StringComparison.OrdinalIgnoreCase) for case-insensitive matching.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Null reference on FirstOrDefault",
                  "consequence": "Always check 'is not null' before using! FirstOrDefault returns null if not found. Accessing properties on null = NullReferenceException.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to return Results",
                  "consequence": "Just returning 'null' gives 204 No Content! Use 'Results.NotFound()' for proper 404 status. HTTP status codes matter for API consumers!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-11-03",
          "title": "Routing (MapGet, MapPost, MapPut, MapDelete)",
          "moduleId": "module-11",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a file cabinet with different actions:\n• READ a file (GET) - Just look, don't change\n• CREATE new file (POST) - Add new document\n• UPDATE existing file (PUT) - Replace entire file\n• DELETE file (DELETE) - Remove it\n\nThese are HTTP METHODS (or VERBS)! Each has a purpose:\n\nGET = Read data (no changes)\nPOST = Create new resource\nPUT = Update existing resource (full update)\nDELETE = Remove resource\nPATCH = Partial update (advanced)\n\nREST API pattern:\n• GET /api/products - List all\n• GET /api/products/5 - Get one\n• POST /api/products - Create new\n• PUT /api/products/5 - Update\n• DELETE /api/products/5 - Delete\n\nASP.NET Core mapping:\n• app.MapGet() - GET requests\n• app.MapPost() - POST requests\n• app.MapPut() - PUT requests\n• app.MapDelete() - DELETE requests\n\nThink: Different HTTP methods = Different actions on same resource!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass Product\n{\n    public int Id { get; set; }\n    public string? Name { get; set; }\n    public decimal Price { get; set; }\n}\n\nvar products = new List<Product>\n{\n    new Product { Id = 1, Name = \"Laptop\", Price = 999.99m },\n    new Product { Id = 2, Name = \"Mouse\", Price = 29.99m }\n};\n\nint nextId = 3;\n\n// GET - Read all\napp.MapGet(\"/api/products\", () => products);\n\n// GET - Read one\napp.MapGet(\"/api/products/{id}\", (int id) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    return product is not null ? Results.Ok(product) : Results.NotFound();\n});\n\n// POST - Create new\napp.MapPost(\"/api/products\", (Product product) =>\n{\n    product.Id = nextId++;\n    products.Add(product);\n    return Results.Created($\"/api/products/{product.Id}\", product);\n});\n\n// PUT - Update existing\napp.MapPut(\"/api/products/{id}\", (int id, Product updatedProduct) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    if (product is null) return Results.NotFound();\n    \n    product.Name = updatedProduct.Name;\n    product.Price = updatedProduct.Price;\n    return Results.Ok(product);\n});\n\n// DELETE - Remove\napp.MapDelete(\"/api/products/{id}\", (int id) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    if (product is null) return Results.NotFound();\n    \n    products.Remove(product);\n    return Results.NoContent();\n});\n\napp.Run();",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`app.MapPost(route, handler)`**: Handles POST requests (create). Handler receives request body as parameter. ASP.NET Core auto-deserializes JSON to object!\n\n**`Results.Created(location, value)`**: Returns 201 Created status. First param is URL of new resource. Second is the created object. Standard for POST!\n\n**`app.MapPut(route, handler)`**: Handles PUT requests (update). Typically receives ID in route and updated object in body: (int id, Product product) => ...\n\n**`Results.NoContent()`**: Returns 204 No Content. Common for DELETE - operation succeeded but no data to return."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a complete CRUD API for Tasks!\n\n1. Create 'TaskItem' class:\n   - int Id\n   - string Title\n   - string Description\n   - bool IsCompleted\n\n2. Create in-memory list with 2 initial tasks\n\n3. Implement ALL CRUD operations:\n   - GET /api/tasks - Return all tasks\n   - GET /api/tasks/{id} - Return single task\n   - POST /api/tasks - Create new task (auto-assign ID)\n   - PUT /api/tasks/{id} - Update task\n   - DELETE /api/tasks/{id} - Delete task\n\n4. For POST: use nextId counter for auto-incrementing IDs\n\n5. Print available endpoints when API starts",
              "starterCode": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass TaskItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Description { get; set; }\n    public bool IsCompleted { get; set; }\n}\n\nvar tasks = new List<TaskItem>\n{\n    new TaskItem { Id = 1, Title = \"Learn ASP.NET\", Description = \"Study web APIs\", IsCompleted = false },\n    new TaskItem { Id = 2, Title = \"Build project\", Description = \"Create todo API\", IsCompleted = false }\n};\n\nint nextId = 3;\n\n// GET all\napp.MapGet(\"/api/tasks\", () => tasks);\n\n// GET by ID\napp.MapGet(\"/api/tasks/{id}\", (int id) =>\n{\n    // Find and return task or NotFound\n});\n\n// POST - Create\napp.MapPost(\"/api/tasks\", (TaskItem task) =>\n{\n    // Assign ID, add to list, return Created\n});\n\n// PUT - Update\napp.MapPut(\"/api/tasks/{id}\", (int id, TaskItem updatedTask) =>\n{\n    // Find, update properties, return Ok or NotFound\n});\n\n// DELETE\napp.MapDelete(\"/api/tasks/{id}\", (int id) =>\n{\n    // Find, remove, return NoContent or NotFound\n});\n\nConsole.WriteLine(\"Task API Ready!\");",
              "solution": "using Microsoft.AspNetCore.Builder;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass TaskItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Description { get; set; }\n    public bool IsCompleted { get; set; }\n}\n\nvar tasks = new List<TaskItem>\n{\n    new TaskItem { Id = 1, Title = \"Learn ASP.NET\", Description = \"Study web APIs\", IsCompleted = false },\n    new TaskItem { Id = 2, Title = \"Build project\", Description = \"Create todo API\", IsCompleted = false }\n};\n\nint nextId = 3;\n\napp.MapGet(\"/api/tasks\", () => tasks);\n\napp.MapGet(\"/api/tasks/{id}\", (int id) =>\n{\n    var task = tasks.FirstOrDefault(t => t.Id == id);\n    return task is not null ? Results.Ok(task) : Results.NotFound();\n});\n\napp.MapPost(\"/api/tasks\", (TaskItem task) =>\n{\n    task.Id = nextId++;\n    tasks.Add(task);\n    return Results.Created($\"/api/tasks/{task.Id}\", task);\n});\n\napp.MapPut(\"/api/tasks/{id}\", (int id, TaskItem updatedTask) =>\n{\n    var task = tasks.FirstOrDefault(t => t.Id == id);\n    if (task is null) return Results.NotFound();\n    \n    task.Title = updatedTask.Title;\n    task.Description = updatedTask.Description;\n    task.IsCompleted = updatedTask.IsCompleted;\n    return Results.Ok(task);\n});\n\napp.MapDelete(\"/api/tasks/{id}\", (int id) =>\n{\n    var task = tasks.FirstOrDefault(t => t.Id == id);\n    if (task is null) return Results.NotFound();\n    \n    tasks.Remove(task);\n    return Results.NoContent();\n});\n\nConsole.WriteLine(\"Task API Ready!\");\nConsole.WriteLine(\"CRUD Endpoints:\");\nConsole.WriteLine(\"  GET    /api/tasks\");\nConsole.WriteLine(\"  GET    /api/tasks/{id}\");\nConsole.WriteLine(\"  POST   /api/tasks\");\nConsole.WriteLine(\"  PUT    /api/tasks/{id}\");\nConsole.WriteLine(\"  DELETE /api/tasks/{id}\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Task API\"",
                  "expectedOutput": "Task API",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"CRUD Endpoints\"",
                  "expectedOutput": "CRUD Endpoints",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"POST\"",
                  "expectedOutput": "POST",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"PUT\"",
                  "expectedOutput": "PUT",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"DELETE\"",
                  "expectedOutput": "DELETE",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "MapPost: 'app.MapPost(route, (Object obj) => ...)'. Assign ID before adding! MapPut: update properties one by one. MapDelete: .Remove() from list. Return proper Results: Created, Ok, NoContent, NotFound."
                },
                {
                  "level": 2,
                  "text": "Not assigning ID in POST: Client shouldn't provide ID for new items! Server assigns it: 'task.Id = nextId++'. Then add to list. ID assignment is server's job!"
                },
                {
                  "level": 3,
                  "text": "Modifying wrong object in PUT: Don't modify 'updatedTask' parameter! Find existing item in list, then update ITS properties. Otherwise changes aren't persisted."
                },
                {
                  "level": 4,
                  "text": "Forgetting to remove in DELETE: Must call 'list.Remove(item)'! Just returning NoContent() doesn't delete it. Actually remove from collection!"
                },
                {
                  "level": 5,
                  "text": "Using same route for different methods: Same route with different methods is FINE! GET /api/tasks and POST /api/tasks are different endpoints. Method matters, not just URL!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not assigning ID in POST",
                  "consequence": "Client shouldn't provide ID for new items! Server assigns it: 'task.Id = nextId++'. Then add to list. ID assignment is server's job!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Modifying wrong object in PUT",
                  "consequence": "Don't modify 'updatedTask' parameter! Find existing item in list, then update ITS properties. Otherwise changes aren't persisted.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to remove in DELETE",
                  "consequence": "Must call 'list.Remove(item)'! Just returning NoContent() doesn't delete it. Actually remove from collection!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using same route for different methods",
                  "consequence": "Same route with different methods is FINE! GET /api/tasks and POST /api/tasks are different endpoints. Method matters, not just URL!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-11-04",
          "title": "Dependency Injection (The Supply Manager)",
          "moduleId": "module-11",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a chef in a restaurant:\n\nBAD WAY (creating dependencies yourself):\n• Chef grows vegetables\n• Chef raises chickens\n• Chef makes plates\n• Chef builds oven\n• THEN cooks!\n\nGOOD WAY (dependencies provided):\n• Kitchen manager PROVIDES ingredients\n• Kitchen manager PROVIDES tools\n• Chef just COOKS!\n\nThat's DEPENDENCY INJECTION (DI)!\n\nDependency = Something your code needs to work (database, logger, email service)\n\nInstead of creating dependencies yourself:\n• You DECLARE what you need (interface or class type)\n• ASP.NET Core PROVIDES it (injects it)\n• You just USE it!\n\nBenefits:\n• TESTABLE - Swap real database for fake one in tests\n• FLEXIBLE - Change implementations easily\n• CLEAN - No 'new' everywhere!\n\nThink: DI = 'Don't create what you need. Ask for it, and it will be provided!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// STEP 1: Define interface (contract)\ninterface IProductRepository\n{\n    List<Product> GetAll();\n    Product? GetById(int id);\n    void Add(Product product);\n}\n\n// STEP 2: Implement interface\nclass ProductRepository : IProductRepository\n{\n    private readonly List<Product> _products = new()\n    {\n        new Product { Id = 1, Name = \"Laptop\", Price = 999.99m },\n        new Product { Id = 2, Name = \"Mouse\", Price = 29.99m }\n    };\n    \n    public List<Product> GetAll() => _products;\n    public Product? GetById(int id) => _products.FirstOrDefault(p => p.Id == id);\n    public void Add(Product product) => _products.Add(product);\n}\n\nclass Product\n{\n    public int Id { get; set; }\n    public string? Name { get; set; }\n    public decimal Price { get; set; }\n}\n\n// STEP 3: Register service with DI container\nbuilder.Services.AddSingleton<IProductRepository, ProductRepository>();\n\nvar app = builder.Build();\n\n// STEP 4: Inject into endpoint handlers\napp.MapGet(\"/api/products\", (IProductRepository repo) =>\n{\n    return repo.GetAll();  // DI provides the repo!\n});\n\napp.MapGet(\"/api/products/{id}\", (int id, IProductRepository repo) =>\n{\n    var product = repo.GetById(id);\n    return product is not null ? Results.Ok(product) : Results.NotFound();\n});\n\napp.MapPost(\"/api/products\", (Product product, IProductRepository repo) =>\n{\n    repo.Add(product);\n    return Results.Created($\"/api/products/{product.Id}\", product);\n});\n\napp.Run();\n\n// DI automatically provides IProductRepository to ALL endpoints!\n// Same instance shared across all requests (Singleton lifetime)",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`builder.Services.AddSingleton<I, T>()`**: Registers service with DI. ONE instance created, shared by ALL requests. Use for stateless services. <Interface, Implementation> pattern.\n\n**`builder.Services.AddScoped<I, T>()`**: NEW instance per HTTP request. Shared within single request. Use for database contexts. Disposed after request ends.\n\n**`builder.Services.AddTransient<I, T>()`**: NEW instance EVERY TIME requested. Use for lightweight, stateless services. Most isolated but potentially more overhead.\n\n**`Injecting into handlers`**: Add service as parameter to handler: (IService service) => ... ASP.NET Core automatically provides it! Can mix with route/query params."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a TODO API with Dependency Injection!\n\n1. Create 'TodoItem' class (Id, Title, IsCompleted)\n\n2. Create 'ITodoRepository' interface:\n   - List<TodoItem> GetAll()\n   - TodoItem? GetById(int id)\n   - void Add(TodoItem item)\n   - void Update(int id, TodoItem item)\n   - void Delete(int id)\n\n3. Create 'TodoRepository' class implementing ITodoRepository:\n   - Use in-memory List<TodoItem>\n   - Implement all methods\n\n4. Register with DI: builder.Services.AddSingleton<ITodoRepository, TodoRepository>()\n\n5. Create endpoints that inject ITodoRepository:\n   - GET /api/todos\n   - GET /api/todos/{id}\n   - POST /api/todos\n   - PUT /api/todos/{id}\n   - DELETE /api/todos/{id}\n\n6. Print \"DI-based Todo API Ready!\"",
              "starterCode": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nclass TodoItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public bool IsCompleted { get; set; }\n}\n\ninterface ITodoRepository\n{\n    // Define methods\n}\n\nclass TodoRepository : ITodoRepository\n{\n    private readonly List<TodoItem> _todos = new()\n    {\n        new TodoItem { Id = 1, Title = \"Learn DI\", IsCompleted = false }\n    };\n    private int _nextId = 2;\n    \n    // Implement interface methods\n}\n\n// Register with DI\nbuilder.Services.AddSingleton<ITodoRepository, TodoRepository>();\n\nvar app = builder.Build();\n\n// Create endpoints with DI injection\napp.MapGet(\"/api/todos\", (ITodoRepository repo) =>\n{\n    // Use repo\n});\n\n// Implement other endpoints...\n\nConsole.WriteLine(\"DI-based Todo API Ready!\");",
              "solution": "using Microsoft.AspNetCore.Builder;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nclass TodoItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public bool IsCompleted { get; set; }\n}\n\ninterface ITodoRepository\n{\n    List<TodoItem> GetAll();\n    TodoItem? GetById(int id);\n    void Add(TodoItem item);\n    void Update(int id, TodoItem item);\n    void Delete(int id);\n}\n\nclass TodoRepository : ITodoRepository\n{\n    private readonly List<TodoItem> _todos = new()\n    {\n        new TodoItem { Id = 1, Title = \"Learn DI\", IsCompleted = false }\n    };\n    private int _nextId = 2;\n    \n    public List<TodoItem> GetAll() => _todos;\n    \n    public TodoItem? GetById(int id) => _todos.FirstOrDefault(t => t.Id == id);\n    \n    public void Add(TodoItem item)\n    {\n        item.Id = _nextId++;\n        _todos.Add(item);\n    }\n    \n    public void Update(int id, TodoItem item)\n    {\n        var todo = GetById(id);\n        if (todo is not null)\n        {\n            todo.Title = item.Title;\n            todo.IsCompleted = item.IsCompleted;\n        }\n    }\n    \n    public void Delete(int id)\n    {\n        var todo = GetById(id);\n        if (todo is not null) _todos.Remove(todo);\n    }\n}\n\nbuilder.Services.AddSingleton<ITodoRepository, TodoRepository>();\n\nvar app = builder.Build();\n\napp.MapGet(\"/api/todos\", (ITodoRepository repo) => repo.GetAll());\n\napp.MapGet(\"/api/todos/{id}\", (int id, ITodoRepository repo) =>\n{\n    var todo = repo.GetById(id);\n    return todo is not null ? Results.Ok(todo) : Results.NotFound();\n});\n\napp.MapPost(\"/api/todos\", (TodoItem item, ITodoRepository repo) =>\n{\n    repo.Add(item);\n    return Results.Created($\"/api/todos/{item.Id}\", item);\n});\n\napp.MapPut(\"/api/todos/{id}\", (int id, TodoItem item, ITodoRepository repo) =>\n{\n    var existing = repo.GetById(id);\n    if (existing is null) return Results.NotFound();\n    repo.Update(id, item);\n    return Results.Ok(existing);\n});\n\napp.MapDelete(\"/api/todos/{id}\", (int id, ITodoRepository repo) =>\n{\n    var existing = repo.GetById(id);\n    if (existing is null) return Results.NotFound();\n    repo.Delete(id);\n    return Results.NoContent();\n});\n\nConsole.WriteLine(\"DI-based Todo API Ready!\");\nConsole.WriteLine(\"Using Dependency Injection for clean architecture!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"DI-based\"",
                  "expectedOutput": "DI-based",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Todo API\"",
                  "expectedOutput": "Todo API",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Ready\"",
                  "expectedOutput": "Ready",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Define interface with methods. Implement in class. Register: 'builder.Services.AddSingleton<IInterface, Implementation>()'. Inject: add as parameter '(IInterface service) => ...'."
                },
                {
                  "level": 2,
                  "text": "Registering after builder.Build(): Must register services BEFORE 'var app = builder.Build()'! After Build(), it's too late. Services go in 'builder.Services', not 'app'."
                },
                {
                  "level": 3,
                  "text": "Using implementation type in endpoints: Inject INTERFACE, not implementation! Use '(IRepository repo)' not '(Repository repo)'. Interface = flexibility!"
                },
                {
                  "level": 4,
                  "text": "Wrong lifetime choice: Singleton = one instance forever (careful with state!). Scoped = per request (good for DB contexts). Transient = every time (safe but overhead)."
                },
                {
                  "level": 5,
                  "text": "Forgetting to register: If you inject IService but didn't register it, you get runtime error: 'Unable to resolve service'. Must register in builder.Services first!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Registering after builder.Build()",
                  "consequence": "Must register services BEFORE 'var app = builder.Build()'! After Build(), it's too late. Services go in 'builder.Services', not 'app'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using implementation type in endpoints",
                  "consequence": "Inject INTERFACE, not implementation! Use '(IRepository repo)' not '(Repository repo)'. Interface = flexibility!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Wrong lifetime choice",
                  "consequence": "Singleton = one instance forever (careful with state!). Scoped = per request (good for DB contexts). Transient = every time (safe but overhead).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting to register",
                  "consequence": "If you inject IService but didn't register it, you get runtime error: 'Unable to resolve service'. Must register in builder.Services first!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Captive Dependencies (CRITICAL!)",
                  "consequence": "Injecting a Scoped service into a Singleton creates a 'captive dependency' - the Scoped service becomes effectively Singleton! Example: If DbContext (Scoped) is injected into a Singleton service, the SAME DbContext instance is reused across ALL requests, causing data corruption, stale data, and threading issues!",
                  "correction": "Never inject Scoped services into Singletons! Either: (1) Make both Scoped, (2) Inject IServiceScopeFactory into Singleton and create scope manually, or (3) Use AddDbContextFactory instead of AddDbContext."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-11-05",
          "title": "Returning Data & Status Codes (Speaking HTTP)",
          "moduleId": "module-11",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine calling a restaurant:\n\nYou: \"Do you have a table for 4?\"\n\nGOOD responses:\n✅ \"Yes, table 12 is ready!\" (200 OK with data)\n✅ \"Sorry, we're fully booked\" (404 Not Found)\n✅ \"Invalid number, we don't have table for -1 people!\" (400 Bad Request)\n\nBAD response:\n❌ \"Umm... maybe? I dunno\" (Unclear status)\n\nHTTP STATUS CODES are how APIs communicate results:\n\n2xx SUCCESS:\n• 200 OK - Request succeeded, here's data\n• 201 Created - New resource created\n• 204 No Content - Success, but no data to return\n\n4xx CLIENT ERROR (user's fault):\n• 400 Bad Request - Invalid input\n• 404 Not Found - Resource doesn't exist\n• 401 Unauthorized - Need to log in\n\n5xx SERVER ERROR (our fault):\n• 500 Internal Server Error - Something broke\n\nThink: Status codes = 'The universal language of HTTP. Speak it correctly!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass User\n{\n    public int Id { get; set; }\n    public string? Name { get; set; }\n    public string? Email { get; set; }\n    public int Age { get; set; }\n}\n\nvar users = new List<User>\n{\n    new User { Id = 1, Name = \"Alice\", Email = \"alice@example.com\", Age = 30 }\n};\n\nint nextId = 2;\n\n// 200 OK - Standard success\napp.MapGet(\"/api/users\", () => \n{\n    return Results.Ok(users);  // Explicit 200\n    // OR just: return users;  // Implicit 200\n});\n\n// 200 OK or 404 Not Found\napp.MapGet(\"/api/users/{id}\", (int id) =>\n{\n    var user = users.FirstOrDefault(u => u.Id == id);\n    return user is not null \n        ? Results.Ok(user)        // 200 with data\n        : Results.NotFound();     // 404\n});\n\n// 201 Created - New resource\napp.MapPost(\"/api/users\", (User user) =>\n{\n    // Validation\n    if (string.IsNullOrEmpty(user.Name))\n        return Results.BadRequest(\"Name is required!\");  // 400\n    \n    if (user.Age < 0 || user.Age > 120)\n        return Results.BadRequest(\"Invalid age!\");  // 400\n    \n    user.Id = nextId++;\n    users.Add(user);\n    \n    // 201 with location header and created object\n    return Results.Created($\"/api/users/{user.Id}\", user);\n});\n\n// 200 OK or 404 Not Found\napp.MapPut(\"/api/users/{id}\", (int id, User updatedUser) =>\n{\n    var user = users.FirstOrDefault(u => u.Id == id);\n    if (user is null) return Results.NotFound();  // 404\n    \n    // Validation\n    if (updatedUser.Age < 0)\n        return Results.BadRequest(\"Age cannot be negative!\");  // 400\n    \n    user.Name = updatedUser.Name;\n    user.Email = updatedUser.Email;\n    user.Age = updatedUser.Age;\n    \n    return Results.Ok(user);  // 200 with updated data\n});\n\n// 204 No Content or 404 Not Found\napp.MapDelete(\"/api/users/{id}\", (int id) =>\n{\n    var user = users.FirstOrDefault(u => u.Id == id);\n    if (user is null) return Results.NotFound();  // 404\n    \n    users.Remove(user);\n    return Results.NoContent();  // 204 - success, no data\n});\n\n// Custom status code\napp.MapGet(\"/api/admin\", () =>\n{\n    return Results.StatusCode(403);  // 403 Forbidden\n});\n\napp.Run();",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Results.Ok(value)`**: Returns 200 OK with data. Most common success response. Can also just 'return value' for implicit 200.\n\n**`Results.Created(uri, value)`**: Returns 201 Created. First param is URL of new resource. Used for POST. Tells client where to find the new item!\n\n**`Results.BadRequest(message)`**: Returns 400 Bad Request. Use when client sends invalid data. Include helpful error message!\n\n**`Results.NotFound()`**: Returns 404 Not Found. Resource doesn't exist. Don't return null - use proper 404!\n\n**`Results.NoContent()`**: Returns 204 No Content. Success but no data to return. Common for DELETE operations.\n\n**`Results.StatusCode(code)`**: Returns custom status code. For less common codes: 403 Forbidden, 409 Conflict, 422 Unprocessable Entity, etc."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a Product API with proper status codes and validation!\n\n1. Create 'Product' class (Id, Name, Price, Stock)\n\n2. Create endpoints with PROPER status codes:\n\n   GET /api/products -> 200 OK with all products\n   \n   GET /api/products/{id} -> 200 OK if found, 404 if not\n   \n   POST /api/products -> Validate:\n     - Name required (400 if missing)\n     - Price must be > 0 (400 if not)\n     - Stock must be >= 0 (400 if negative)\n     - If valid: 201 Created with location\n   \n   PUT /api/products/{id} -> Validate same as POST:\n     - 404 if product not found\n     - 400 if validation fails\n     - 200 OK with updated product if success\n   \n   DELETE /api/products/{id} -> 404 if not found, 204 if deleted\n\n3. Return helpful error messages for 400 responses!",
              "starterCode": "using Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n    public int Stock { get; set; }\n}\n\nvar products = new List<Product>\n{\n    new Product { Id = 1, Name = \"Laptop\", Price = 999.99m, Stock = 10 }\n};\nint nextId = 2;\n\napp.MapGet(\"/api/products\", () => Results.Ok(products));\n\napp.MapGet(\"/api/products/{id}\", (int id) =>\n{\n    // Find and return 200 or 404\n});\n\napp.MapPost(\"/api/products\", (Product product) =>\n{\n    // Validate Name\n    // Validate Price\n    // Validate Stock\n    // If valid, add and return 201\n});\n\napp.MapPut(\"/api/products/{id}\", (int id, Product updated) =>\n{\n    // Find product (404 if not found)\n    // Validate input (400 if invalid)\n    // Update and return 200\n});\n\napp.MapDelete(\"/api/products/{id}\", (int id) =>\n{\n    // Find and delete, return 204 or 404\n});\n\nConsole.WriteLine(\"Product API with proper status codes!\");",
              "solution": "using Microsoft.AspNetCore.Builder;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n    public int Stock { get; set; }\n}\n\nvar products = new List<Product>\n{\n    new Product { Id = 1, Name = \"Laptop\", Price = 999.99m, Stock = 10 }\n};\nint nextId = 2;\n\napp.MapGet(\"/api/products\", () => Results.Ok(products));\n\napp.MapGet(\"/api/products/{id}\", (int id) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    return product is not null ? Results.Ok(product) : Results.NotFound();\n});\n\napp.MapPost(\"/api/products\", (Product product) =>\n{\n    if (string.IsNullOrEmpty(product.Name))\n        return Results.BadRequest(\"Product name is required!\");\n    \n    if (product.Price <= 0)\n        return Results.BadRequest(\"Price must be greater than 0!\");\n    \n    if (product.Stock < 0)\n        return Results.BadRequest(\"Stock cannot be negative!\");\n    \n    product.Id = nextId++;\n    products.Add(product);\n    return Results.Created($\"/api/products/{product.Id}\", product);\n});\n\napp.MapPut(\"/api/products/{id}\", (int id, Product updated) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    if (product is null) return Results.NotFound();\n    \n    if (string.IsNullOrEmpty(updated.Name))\n        return Results.BadRequest(\"Product name is required!\");\n    \n    if (updated.Price <= 0)\n        return Results.BadRequest(\"Price must be greater than 0!\");\n    \n    if (updated.Stock < 0)\n        return Results.BadRequest(\"Stock cannot be negative!\");\n    \n    product.Name = updated.Name;\n    product.Price = updated.Price;\n    product.Stock = updated.Stock;\n    \n    return Results.Ok(product);\n});\n\napp.MapDelete(\"/api/products/{id}\", (int id) =>\n{\n    var product = products.FirstOrDefault(p => p.Id == id);\n    if (product is null) return Results.NotFound();\n    \n    products.Remove(product);\n    return Results.NoContent();\n});\n\nConsole.WriteLine(\"Product API with proper status codes!\");\nConsole.WriteLine(\"Returns: 200 OK, 201 Created, 204 No Content, 400 Bad Request, 404 Not Found\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Product API\"",
                  "expectedOutput": "Product API",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"status codes\"",
                  "expectedOutput": "status codes",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"200\"",
                  "expectedOutput": "200",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"201\"",
                  "expectedOutput": "201",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"400\"",
                  "expectedOutput": "400",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"404\"",
                  "expectedOutput": "404",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Validation: check conditions, return Results.BadRequest(\"message\") if invalid. Not found: Results.NotFound(). Success: Results.Ok(data) or Results.Created(uri, data) or Results.NoContent()."
                },
                {
                  "level": 2,
                  "text": "Returning wrong status for errors: Don't return 200 OK for errors! Validation failure = 400 Bad Request. Resource not found = 404. Use correct codes!"
                },
                {
                  "level": 3,
                  "text": "Not including error messages: Results.BadRequest() with no message is unhelpful! Always include message: Results.BadRequest(\\\"Name is required!\\\"). Help the client fix the issue!"
                },
                {
                  "level": 4,
                  "text": "Using 200 for POST: POST should return 201 Created, not 200! Use Results.Created() with location URI. It's the HTTP standard for resource creation."
                },
                {
                  "level": 5,
                  "text": "Returning null instead of 404: Don't 'return null' - it gives 204 No Content! Use 'Results.NotFound()' for proper 404 status. Status codes communicate meaning!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Returning wrong status for errors",
                  "consequence": "Don't return 200 OK for errors! Validation failure = 400 Bad Request. Resource not found = 404. Use correct codes!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not including error messages",
                  "consequence": "Results.BadRequest() with no message is unhelpful! Always include message: Results.BadRequest(\\\"Name is required!\\\"). Help the client fix the issue!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using 200 for POST",
                  "consequence": "POST should return 201 Created, not 200! Use Results.Created() with location URI. It's the HTTP standard for resource creation.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Returning null instead of 404",
                  "consequence": "Don't 'return null' - it gives 204 No Content! Use 'Results.NotFound()' for proper 404 status. Status codes communicate meaning!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-11-06",
          "title": "Authentication & Authorization (The Security Guard)",
          "moduleId": "module-11",
          "order": 6,
          "estimatedMinutes": 25,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a concert venue:\n\nAUTHENTICATION = 'Who are you?'\n• Checking your ID at the entrance\n• Proving your identity (username + password, or ticket)\n• Result: You ARE who you claim to be\n\nAUTHORIZATION = 'What can you do?'\n• VIP pass gets backstage access\n• General admission stays in crowd\n• Result: You have PERMISSION for specific areas\n\nASP.NET Core offers:\n1. ASP.NET Core Identity - Full user management (registration, login, passwords)\n2. JWT Bearer Tokens - Stateless API authentication\n3. Cookie Authentication - Session-based for web apps\n4. External Providers - Google, Microsoft, GitHub login (OAuth/OpenID Connect)\n\nMODERN APPROACH:\n• APIs use JWT tokens (stateless, scalable)\n• Web apps use cookies + Identity\n• Both use [Authorize] attribute for protection\n\nThink: 'Authentication = Login check, Authorization = Permission check!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// ===== JWT AUTHENTICATION SETUP =====\n// Install: dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer\n\nusing Microsoft.AspNetCore.Authentication.JwtBearer;\nusing Microsoft.IdentityModel.Tokens;\nusing System.Text;\nusing System.Security.Claims;\nusing System.IdentityModel.Tokens.Jwt;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// Configure JWT Authentication\nbuilder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)\n    .AddJwtBearer(options =>\n    {\n        options.TokenValidationParameters = new TokenValidationParameters\n        {\n            ValidateIssuer = true,\n            ValidateAudience = true,\n            ValidateLifetime = true,\n            ValidateIssuerSigningKey = true,\n            ValidIssuer = builder.Configuration[\"Jwt:Issuer\"],\n            ValidAudience = builder.Configuration[\"Jwt:Audience\"],\n            IssuerSigningKey = new SymmetricSecurityKey(\n                Encoding.UTF8.GetBytes(builder.Configuration[\"Jwt:Key\"]!))\n        };\n    });\n\nbuilder.Services.AddAuthorization();\n\nvar app = builder.Build();\n\napp.UseAuthentication();  // Must come BEFORE UseAuthorization!\napp.UseAuthorization();\n\n// ===== LOGIN ENDPOINT - Issues JWT Token =====\napp.MapPost(\"/login\", (LoginRequest request) =>\n{\n    // In production: Validate against database with hashed passwords!\n    if (request.Username == \"admin\" && request.Password == \"password123\")\n    {\n        var claims = new[]\n        {\n            new Claim(ClaimTypes.Name, request.Username),\n            new Claim(ClaimTypes.Role, \"Admin\"),\n            new Claim(\"UserId\", \"1\")\n        };\n        \n        var key = new SymmetricSecurityKey(\n            Encoding.UTF8.GetBytes(builder.Configuration[\"Jwt:Key\"]!));\n        var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);\n        \n        var token = new JwtSecurityToken(\n            issuer: builder.Configuration[\"Jwt:Issuer\"],\n            audience: builder.Configuration[\"Jwt:Audience\"],\n            claims: claims,\n            expires: DateTime.Now.AddHours(1),\n            signingCredentials: creds\n        );\n        \n        return Results.Ok(new { token = new JwtSecurityTokenHandler().WriteToken(token) });\n    }\n    \n    return Results.Unauthorized();\n});\n\nrecord LoginRequest(string Username, string Password);\n\n// ===== PROTECTED ENDPOINTS =====\n\n// Any authenticated user\napp.MapGet(\"/api/profile\", (ClaimsPrincipal user) =>\n{\n    var name = user.Identity?.Name;\n    var userId = user.FindFirst(\"UserId\")?.Value;\n    return Results.Ok(new { name, userId });\n}).RequireAuthorization();  // <-- Requires valid JWT token!\n\n// Specific role required\napp.MapGet(\"/api/admin/dashboard\", () =>\n{\n    return Results.Ok(new { message = \"Welcome, Admin!\" });\n}).RequireAuthorization(policy => policy.RequireRole(\"Admin\"));\n\n// Custom policy\nbuilder.Services.AddAuthorizationBuilder()\n    .AddPolicy(\"MinimumAge\", policy => \n        policy.RequireClaim(\"Age\").RequireAssertion(context =>\n            int.Parse(context.User.FindFirst(\"Age\")?.Value ?? \"0\") >= 18));\n\n// Public endpoint (no auth needed)\napp.MapGet(\"/api/public\", () => \"Anyone can see this!\");\n\napp.Run();\n\nConsole.WriteLine(\"JWT Auth setup complete!\");\nConsole.WriteLine(\"1. POST /login with username/password → get token\");\nConsole.WriteLine(\"2. Include token in header: Authorization: Bearer <token>\");\nConsole.WriteLine(\"3. Access protected endpoints!\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`AddAuthentication(JwtBearerDefaults.AuthenticationScheme)`**: Configures JWT as the default authentication. Options include: Cookie, JwtBearer, OpenIdConnect, or custom schemes.\n\n**`TokenValidationParameters`**: Rules for validating JWT tokens. ValidateIssuer/Audience ensure token is for YOUR app. ValidateLifetime checks expiration. IssuerSigningKey verifies signature.\n\n**`UseAuthentication() + UseAuthorization()`**: Middleware order matters! Authentication MUST come before Authorization. Add after UseRouting(), before endpoint mapping.\n\n**`.RequireAuthorization()`**: Protects endpoints. No parameters = any authenticated user. With policy: `RequireAuthorization(policy => policy.RequireRole(\"Admin\"))`.\n\n**`ClaimsPrincipal user`**: Injected parameter containing user info from token. Access claims: `user.FindFirst(\"ClaimType\")?.Value`. Get name: `user.Identity?.Name`.\n\n**`[Authorize]` attribute**: Alternative to RequireAuthorization(). Use on controllers/methods: `[Authorize(Roles = \"Admin\")]` or `[Authorize(Policy = \"CustomPolicy\")]`."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-11-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a protected API with JWT authentication!\n\n1. Set up JWT authentication in Program.cs:\n   - Add authentication services\n   - Configure token validation parameters\n   - Add authorization services\n\n2. Create endpoints:\n   - POST /login - Issues JWT token for valid credentials\n   - GET /api/public - Accessible to everyone\n   - GET /api/protected - Requires authentication\n   - GET /api/admin - Requires 'Admin' role\n\n3. In the login endpoint:\n   - Validate credentials (use hardcoded for demo)\n   - Create claims (Name, Role, custom claims)\n   - Generate and return JWT token\n\n4. Access user info in protected endpoints:\n   - Read claims from ClaimsPrincipal\n   - Return personalized response\n\nRemember: UseAuthentication() BEFORE UseAuthorization()!",
              "starterCode": "using Microsoft.AspNetCore.Authentication.JwtBearer;\nusing Microsoft.IdentityModel.Tokens;\nusing System.Text;\nusing System.Security.Claims;\nusing System.IdentityModel.Tokens.Jwt;\n\nvar builder = WebApplication.CreateBuilder(args);\n\n// TODO: Add JWT authentication\n// builder.Services.AddAuthentication(...)\n\nbuilder.Services.AddAuthorization();\n\nvar app = builder.Build();\n\n// TODO: Add middleware (correct order!)\n// app.UseAuthentication();\n// app.UseAuthorization();\n\n// Login endpoint\napp.MapPost(\"/login\", (LoginRequest request) =>\n{\n    // TODO: Validate and issue token\n    return Results.Unauthorized();\n});\n\nrecord LoginRequest(string Username, string Password);\n\n// Public endpoint\napp.MapGet(\"/api/public\", () => \"Public data\");\n\n// Protected endpoint\napp.MapGet(\"/api/protected\", (ClaimsPrincipal user) =>\n{\n    // TODO: Return user info\n    return Results.Ok();\n}); // TODO: .RequireAuthorization()\n\n// Admin endpoint\napp.MapGet(\"/api/admin\", () => \"Admin only!\");\n// TODO: .RequireAuthorization(policy => policy.RequireRole(\"Admin\"))\n\nConsole.WriteLine(\"Auth endpoints defined!\");",
              "solution": "using Microsoft.AspNetCore.Authentication.JwtBearer;\nusing Microsoft.IdentityModel.Tokens;\nusing System.Text;\nusing System.Security.Claims;\nusing System.IdentityModel.Tokens.Jwt;\n\nvar builder = WebApplication.CreateBuilder(args);\n\nvar jwtKey = \"SuperSecretKey12345678901234567890\"; // 32+ chars for HS256\nvar jwtIssuer = \"MyApp\";\nvar jwtAudience = \"MyAppUsers\";\n\nbuilder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme)\n    .AddJwtBearer(options =>\n    {\n        options.TokenValidationParameters = new TokenValidationParameters\n        {\n            ValidateIssuer = true,\n            ValidateAudience = true,\n            ValidateLifetime = true,\n            ValidateIssuerSigningKey = true,\n            ValidIssuer = jwtIssuer,\n            ValidAudience = jwtAudience,\n            IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(jwtKey))\n        };\n    });\n\nbuilder.Services.AddAuthorization();\n\nvar app = builder.Build();\n\napp.UseAuthentication();\napp.UseAuthorization();\n\napp.MapPost(\"/login\", (LoginRequest request) =>\n{\n    if (request.Username == \"admin\" && request.Password == \"password\")\n    {\n        var claims = new[]\n        {\n            new Claim(ClaimTypes.Name, request.Username),\n            new Claim(ClaimTypes.Role, \"Admin\"),\n            new Claim(\"UserId\", \"1\")\n        };\n        \n        var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(jwtKey));\n        var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha256);\n        \n        var token = new JwtSecurityToken(\n            issuer: jwtIssuer,\n            audience: jwtAudience,\n            claims: claims,\n            expires: DateTime.Now.AddHours(1),\n            signingCredentials: creds\n        );\n        \n        return Results.Ok(new { token = new JwtSecurityTokenHandler().WriteToken(token) });\n    }\n    return Results.Unauthorized();\n});\n\nrecord LoginRequest(string Username, string Password);\n\napp.MapGet(\"/api/public\", () => \"Public data - anyone can see!\");\n\napp.MapGet(\"/api/protected\", (ClaimsPrincipal user) =>\n{\n    var name = user.Identity?.Name;\n    var userId = user.FindFirst(\"UserId\")?.Value;\n    return Results.Ok(new { message = $\"Hello {name}!\", userId });\n}).RequireAuthorization();\n\napp.MapGet(\"/api/admin\", () => \"Admin dashboard data!\")\n    .RequireAuthorization(policy => policy.RequireRole(\"Admin\"));\n\nConsole.WriteLine(\"JWT Auth API configured!\");\nConsole.WriteLine(\"POST /login → Get token\");\nConsole.WriteLine(\"GET /api/public → No auth needed\");\nConsole.WriteLine(\"GET /api/protected → Auth required\");\nConsole.WriteLine(\"GET /api/admin → Admin role required\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should show auth configuration",
                  "expectedOutput": "Auth",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should mention endpoints",
                  "expectedOutput": "/login",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Authentication setup: 'builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme).AddJwtBearer(options => { ... });'"
                },
                {
                  "level": 2,
                  "text": "Middleware order is CRITICAL: UseAuthentication() MUST come BEFORE UseAuthorization(). Wrong order = authorization always fails!"
                },
                {
                  "level": 3,
                  "text": "JWT key must be 32+ characters for HmacSha256! Shorter keys cause 'key too small' error."
                },
                {
                  "level": 4,
                  "text": "Add claims to token: 'new Claim(ClaimTypes.Role, \"Admin\")'. Access in endpoints: 'user.FindFirst(ClaimTypes.Role)?.Value'."
                },
                {
                  "level": 5,
                  "text": "Protect endpoints: '.RequireAuthorization()' for any auth user, '.RequireAuthorization(p => p.RequireRole(\"Admin\"))' for specific role."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Wrong middleware order",
                  "consequence": "UseAuthorization() before UseAuthentication() = every request unauthorized! Authentication populates User, Authorization checks it.",
                  "correction": "Always: UseAuthentication() THEN UseAuthorization(). Think: 'Who are you?' BEFORE 'What can you do?'"
                },
                {
                  "mistake": "JWT key too short",
                  "consequence": "Key under 32 characters throws 'IDX10653: The encryption key is too small'. HmacSha256 requires 256 bits = 32 bytes minimum.",
                  "correction": "Use 32+ character key: 'SuperSecretKey12345678901234567890'. In production, use configuration or secrets manager!"
                },
                {
                  "mistake": "Storing JWT in localStorage (XSS vulnerability!)",
                  "consequence": "JavaScript can read localStorage! XSS attack = stolen tokens. Attacker impersonates users.",
                  "correction": "Store tokens in httpOnly cookies (server sets, JS can't read). Or use short-lived tokens with refresh tokens."
                },
                {
                  "mistake": "Not validating token claims properly",
                  "consequence": "Trusting all claims without verification! Attacker modifies token claims (if not validating signature properly).",
                  "correction": "Always set ValidateIssuer, ValidateAudience, ValidateIssuerSigningKey to true. Never skip signature validation!"
                },
                {
                  "mistake": "Hardcoding credentials and secrets",
                  "consequence": "Secrets in source code = compromised when code is shared. Anyone with repo access has your keys!",
                  "correction": "Use Configuration (appsettings.json), Environment Variables, or Azure Key Vault / AWS Secrets Manager for production secrets."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-12",
      "title": "File I/O, Databases & Caching",
      "description": "Work with databases using Entity Framework Core, learn ORM patterns, compiled models for performance, and modern caching with HybridCache.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-12-01",
          "title": "Why Databases? (Beyond Text Files)",
          "moduleId": "module-12",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine storing customer data in text files:\n\nfile1.txt: 'John, john@email.com, 25'\nfile2.txt: 'Jane, jane@email.com, 30'\n\nPROBLEMS:\n• Want to find all customers over 25? Read EVERY file!\n• Want to update Jane's email? Find the right file, rewrite it!\n• Two programs edit the same file? DATA CORRUPTION!\n• App crashes while writing? FILE CORRUPTED!\n• Store 1 million customers? 1 MILLION FILES!\n\nDATABASES solve this:\n\n✅ FAST SEARCHING - Find data in milliseconds (indexes!)\n✅ TRANSACTIONS - All-or-nothing updates (no corruption!)\n✅ CONCURRENT ACCESS - Multiple users safely\n✅ RELATIONSHIPS - Connect related data (customers → orders)\n✅ DATA INTEGRITY - Enforce rules (email must be unique)\n✅ SCALABILITY - Handle millions of records\n\nCommon databases:\n• SQL Server (Microsoft)\n• PostgreSQL (open source)\n• MySQL (open source)\n• SQLite (embedded, file-based)\n\nThink: Database = 'Professional, high-performance data storage with superpowers!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// WITHOUT DATABASE - text file storage (bad!)\nusing System.IO;\nusing System.Collections.Generic;\n\nclass Customer\n{\n    public string Name;\n    public string Email;\n}\n\n// Writing to text file\nvoid SaveCustomer(Customer customer)\n{\n    File.AppendAllText(\"customers.txt\", \n        $\"{customer.Name},{customer.Email}\\n\");\n}\n\n// Reading from text file (slow!)\nList<Customer> LoadCustomers()\n{\n    var customers = new List<Customer>();\n    var lines = File.ReadAllLines(\"customers.txt\");\n    \n    foreach (var line in lines)\n    {\n        var parts = line.Split(',');\n        customers.Add(new Customer \n        { \n            Name = parts[0], \n            Email = parts[1] \n        });\n    }\n    return customers;\n}\n\n// Finding customer (read ENTIRE file!)\nCustomer? FindByEmail(string email)\n{\n    var customers = LoadCustomers();  // Read ALL data!\n    return customers.FirstOrDefault(c => c.Email == email);\n}\n\n// WITH DATABASE (next lessons!) - pseudocode\n/*\nvar customer = dbContext.Customers\n    .Where(c => c.Email == \"john@email.com\")\n    .FirstOrDefault();  // Database finds it instantly!\n\n// Update\ncustomer.Email = \"newemail@example.com\";\ndbContext.SaveChanges();  // Transaction ensures safety!\n*/\n\n// Database features you get:\n// - Indexes for fast searching\n// - Transactions (all-or-nothing)\n// - Constraints (email MUST be unique)\n// - Relationships (Customer has many Orders)\n// - Concurrent access (multiple users safely)\n// - Query optimization (database is smart!)",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Text file problems`**: Text files: slow search (read everything), no transactions (corruption risk), no relationships, no concurrency. Fine for config, terrible for data!\n\n**`Database advantages`**: Databases: indexed (fast!), transactional (safe!), relational (connected data!), concurrent (multi-user!), scalable (millions of rows!).\n\n**`SQL vs NoSQL`**: SQL (relational): tables, rows, columns, relationships. NoSQL (document/key-value): flexible schema. We'll learn SQL (most common for business apps).\n\n**`Database types`**: SQL Server (enterprise), PostgreSQL (open-source powerhouse), MySQL (popular web), SQLite (embedded, no server). Each has strengths!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Understand the limitations of file-based storage!\n\n1. Create a 'Product' class (Id, Name, Price)\n\n2. Create a list of 5 products\n\n3. Simulate file storage:\n   - 'Save' products by printing each as CSV line\n   - Print: \\\"Saving to file: [Id],[Name],[Price]\\\"\n\n4. Simulate file search:\n   - To find product by ID, print \\\"Reading entire file...\\\"\n   - Loop through ALL products to find match\n   - Print how many products were checked\n\n5. Explain the problems:\n   - Print why this is slow for 1 million products\n   - Print why concurrent writes are dangerous\n   - Print what databases solve\n\nThis demonstrates WHY we need databases!",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n}\n\n// Create sample data\nvar products = new List<Product>\n{\n    new Product { Id = 1, Name = \"Laptop\", Price = 999.99m },\n    // Add 4 more\n};\n\n// Simulate saving to file\nConsole.WriteLine(\"=== SIMULATING FILE STORAGE ===\");\nforeach (var p in products)\n{\n    Console.WriteLine($\"Saving to file: {p.Id},{p.Name},{p.Price}\");\n}\n\n// Simulate searching (inefficient!)\nConsole.WriteLine(\"\\n=== SEARCHING FOR PRODUCT ID 3 ===\");\nConsole.WriteLine(\"Reading entire file...\");\n\nint searchId = 3;\nint checked = 0;\nProduct? found = null;\n\nforeach (var p in products)\n{\n    checked++;\n    if (p.Id == searchId)\n    {\n        found = p;\n        break;\n    }\n}\n\nConsole.WriteLine($\"Checked {checked} products\");\nif (found != null)\n    Console.WriteLine($\"Found: {found.Name}\");\n\n// Explain problems\nConsole.WriteLine(\"\\n=== WHY THIS IS BAD ===\");\nConsole.WriteLine(\"Problem 1: With 1 million products, searching reads ALL 1 million!\");\nConsole.WriteLine(\"Problem 2: Two users writing at once = file corruption!\");\nConsole.WriteLine(\"Problem 3: No relationships (can't link products to orders easily)\");\nConsole.WriteLine(\"\\nSOLUTION: Use a DATABASE!\");",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n}\n\nvar products = new List<Product>\n{\n    new Product { Id = 1, Name = \"Laptop\", Price = 999.99m },\n    new Product { Id = 2, Name = \"Mouse\", Price = 29.99m },\n    new Product { Id = 3, Name = \"Keyboard\", Price = 79.99m },\n    new Product { Id = 4, Name = \"Monitor\", Price = 299.99m },\n    new Product { Id = 5, Name = \"Webcam\", Price = 89.99m }\n};\n\nConsole.WriteLine(\"=== SIMULATING FILE STORAGE ===\");\nforeach (var p in products)\n{\n    Console.WriteLine($\"Saving to file: {p.Id},{p.Name},{p.Price}\");\n}\n\nConsole.WriteLine(\"\\n=== SEARCHING FOR PRODUCT ID 3 ===\");\nConsole.WriteLine(\"Reading entire file...\");\n\nint searchId = 3;\nint checked = 0;\nProduct? found = null;\n\nforeach (var p in products)\n{\n    checked++;\n    Console.WriteLine($\"Checking product {p.Id}...\");\n    if (p.Id == searchId)\n    {\n        found = p;\n        break;\n    }\n}\n\nConsole.WriteLine($\"\\nChecked {checked} products to find ID {searchId}\");\nif (found != null)\n    Console.WriteLine($\"Found: {found.Name}\");\n\nConsole.WriteLine(\"\\n=== WHY FILE STORAGE IS BAD ===\");\nConsole.WriteLine(\"❌ Problem 1: Slow - Must read entire file for every search!\");\nConsole.WriteLine(\"❌ Problem 2: Not scalable - 1 million products = 1 million lines to scan!\");\nConsole.WriteLine(\"❌ Problem 3: Corruption - Concurrent writes can corrupt the file!\");\nConsole.WriteLine(\"❌ Problem 4: No relationships - Can't easily link products to orders!\");\nConsole.WriteLine(\"❌ Problem 5: No validation - Can't enforce 'email must be unique'!\");\nConsole.WriteLine(\"\\n✅ SOLUTION: Databases solve ALL of these problems!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"SIMULATING\"",
                  "expectedOutput": "SIMULATING",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"SEARCHING\"",
                  "expectedOutput": "SEARCHING",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"WHY\"",
                  "expectedOutput": "WHY",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"BAD\"",
                  "expectedOutput": "BAD",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"SOLUTION\"",
                  "expectedOutput": "SOLUTION",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"DATABASE\"",
                  "expectedOutput": "DATABASE",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Loop through products to save. Loop through again to search (simulate reading file). Count how many checked. Print problems: speed, scale, corruption, relationships."
                },
                {
                  "level": 2,
                  "text": "Thinking files are fine: For simple config or logs, files are OK! But for application DATA (users, products, orders), files are terrible. Always use database for data!"
                },
                {
                  "level": 3,
                  "text": "Not understanding indexes: Files have no indexes - must read everything! Databases create indexes on columns (like book index). Find \\\"Smith\\\" in millions of names = instant!"
                },
                {
                  "level": 4,
                  "text": "Ignoring concurrency: Single-user app? Files might work. Multi-user? Files = disaster. Databases handle thousands of concurrent users safely with locking/transactions."
                },
                {
                  "level": 5,
                  "text": "Missing transactions: If app crashes mid-write to file, file is corrupted! Databases use transactions: changes are all-or-nothing (atomic). Crash? Database rolls back, stays consistent!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Thinking files are fine",
                  "consequence": "For simple config or logs, files are OK! But for application DATA (users, products, orders), files are terrible. Always use database for data!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not understanding indexes",
                  "consequence": "Files have no indexes - must read everything! Databases create indexes on columns (like book index). Find \\\"Smith\\\" in millions of names = instant!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Ignoring concurrency",
                  "consequence": "Single-user app? Files might work. Multi-user? Files = disaster. Databases handle thousands of concurrent users safely with locking/transactions.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Missing transactions",
                  "consequence": "If app crashes mid-write to file, file is corrupted! Databases use transactions: changes are all-or-nothing (atomic). Crash? Database rolls back, stays consistent!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-02",
          "title": "What is an ORM? (The Translator Analogy)",
          "moduleId": "module-12",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're American visiting France:\n\nWITHOUT TRANSLATOR:\nYou: (trying French) \\\"Je... veux... uh... café?\\\"\nBarista: \\\"Quoi?\\\"\nYou: (frustrated, pointing)\n\nWITH TRANSLATOR:\nYou: \\\"I'd like a coffee, please\\\"\nTranslator: \\\"Il aimerait un café, s'il vous plaît\\\"\nBarista: \\\"Voilà!\\\" (hands coffee)\n\nThat's an ORM (Object-Relational Mapper)!\n\nWITHOUT ORM (raw SQL):\n```csharp\nstring sql = \\\"SELECT * FROM Customers WHERE Age > 25\\\";\nvar command = connection.CreateCommand();\ncommand.CommandText = sql;\nvar reader = command.ExecuteReader();\nwhile (reader.Read())\n{\n    var customer = new Customer \n    { \n        Id = (int)reader[\\\"Id\\\"],\n        Name = (string)reader[\\\"Name\\\"]\n    };\n}\n```\nCOMPLEX! SQL strings, manual mapping, error-prone!\n\nWITH ORM (Entity Framework Core):\n```csharp\nvar customers = dbContext.Customers\n    .Where(c => c.Age > 25)\n    .ToList();\n```\nSIMPLE! C# LINQ, automatic mapping, type-safe!\n\nThink: ORM = 'Translator between C# objects and database tables. You speak C#, ORM speaks SQL!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// ORM CONCEPT - Entity Framework Core\n\n// 1. DEFINE YOUR CLASSES (entities)\nclass Customer\n{\n    public int Id { get; set; }  // Primary key\n    public string Name { get; set; }\n    public string Email { get; set; }\n    public int Age { get; set; }\n}\n\nclass Order\n{\n    public int Id { get; set; }\n    public int CustomerId { get; set; }  // Foreign key\n    public decimal Total { get; set; }\n    public DateTime OrderDate { get; set; }\n    \n    // Navigation property (relationship!)\n    public Customer Customer { get; set; }\n}\n\n// 2. WHAT ORM DOES BEHIND THE SCENES\n// You write:\nvar youngCustomers = dbContext.Customers\n    .Where(c => c.Age < 30)\n    .ToList();\n\n// ORM translates to SQL:\n// SELECT * FROM Customers WHERE Age < 30\n\n// You write:\nvar customer = new Customer \n{ \n    Name = \"John\", \n    Email = \"john@example.com\", \n    Age = 25 \n};\ndbContext.Customers.Add(customer);\ndbContext.SaveChanges();\n\n// ORM translates to SQL:\n// INSERT INTO Customers (Name, Email, Age) \n// VALUES ('John', 'john@example.com', 25)\n\n// You write:\nvar customer = dbContext.Customers.Find(1);\ncustomer.Email = \"newemail@example.com\";\ndbContext.SaveChanges();\n\n// ORM translates to SQL:\n// UPDATE Customers \n// SET Email = 'newemail@example.com' \n// WHERE Id = 1\n\n// BENEFITS OF ORM:\n// ✅ Type safety - compile-time errors, not runtime!\n// ✅ LINQ queries - familiar C# syntax\n// ✅ Auto-mapping - no manual reader[\"column\"] code\n// ✅ Relationships - navigate Customer.Orders easily\n// ✅ Change tracking - EF knows what changed!\n// ✅ Database agnostic - switch SQL Server to PostgreSQL easily",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`ORM = Object-Relational Mapper`**: Bridges gap between OOP (objects, classes) and relational databases (tables, rows). Translates C# to SQL automatically!\n\n**`Entity`**: C# class that maps to database table. Properties = table columns. Customer class → Customers table. One object = one row!\n\n**`DbContext`**: The 'portal' to database. Contains DbSet<T> properties for each table. Tracks changes. Generates SQL. Your main EF class!\n\n**`LINQ to SQL`**: Write LINQ queries on DbSet. ORM converts to SQL! .Where(), .Select(), .OrderBy() all become SELECT, WHERE, ORDER BY in SQL."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Understand ORM translation!\n\n1. Create a 'Book' class:\n   - int Id\n   - string Title\n   - string Author\n   - decimal Price\n   - int Year\n\n2. Create sample LINQ queries and show what SQL they would generate:\n\n   Query 1: Find all books by \\\"Orwell\\\"\n   - C# LINQ: books.Where(b => b.Author == \\\"Orwell\\\")\n   - Print equivalent SQL\n\n   Query 2: Find books over $20, sorted by price\n   - C# LINQ: books.Where(b => b.Price > 20).OrderBy(b => b.Price)\n   - Print equivalent SQL\n\n   Query 3: Get titles of books from 2020+\n   - C# LINQ: books.Where(b => b.Year >= 2020).Select(b => b.Title)\n   - Print equivalent SQL\n\n3. Show benefits of ORM:\n   - Print why type safety matters\n   - Print why LINQ is better than SQL strings\n   - Print relationship navigation benefit",
              "starterCode": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Book\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Author { get; set; }\n    public decimal Price { get; set; }\n    public int Year { get; set; }\n}\n\nConsole.WriteLine(\"=== ORM TRANSLATION EXAMPLES ===\");\n\n// Query 1\nConsole.WriteLine(\"\\nQuery 1: Find books by Orwell\");\nConsole.WriteLine(\"C# LINQ: books.Where(b => b.Author == \\\"Orwell\\\")\");\nConsole.WriteLine(\"SQL: SELECT * FROM Books WHERE Author = 'Orwell'\");\n\n// Query 2\nConsole.WriteLine(\"\\nQuery 2: Books over $20, sorted by price\");\nConsole.WriteLine(\"C# LINQ: /* write LINQ query */\");\nConsole.WriteLine(\"SQL: /* write equivalent SQL */\");\n\n// Query 3\nConsole.WriteLine(\"\\nQuery 3: Titles of books from 2020+\");\nConsole.WriteLine(\"C# LINQ: /* write LINQ query */\");\nConsole.WriteLine(\"SQL: /* write equivalent SQL */\");\n\n// Benefits\nConsole.WriteLine(\"\\n=== WHY ORM IS BETTER ===\");\nConsole.WriteLine(\"✅ Type safety: Compiler catches 'b.Autor' typo! SQL strings = runtime error!\");\n// Add more benefits",
              "solution": "using System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Book\n{\n    public int Id { get; set; }\n    public string Title { get; set; }\n    public string Author { get; set; }\n    public decimal Price { get; set; }\n    public int Year { get; set; }\n}\n\nConsole.WriteLine(\"=== ORM TRANSLATION EXAMPLES ===\");\n\nConsole.WriteLine(\"\\nQuery 1: Find books by Orwell\");\nConsole.WriteLine(\"C# LINQ: books.Where(b => b.Author == \\\"Orwell\\\")\");\nConsole.WriteLine(\"SQL:     SELECT * FROM Books WHERE Author = 'Orwell'\");\n\nConsole.WriteLine(\"\\nQuery 2: Books over $20, sorted by price\");\nConsole.WriteLine(\"C# LINQ: books.Where(b => b.Price > 20).OrderBy(b => b.Price)\");\nConsole.WriteLine(\"SQL:     SELECT * FROM Books WHERE Price > 20 ORDER BY Price\");\n\nConsole.WriteLine(\"\\nQuery 3: Titles of books from 2020+\");\nConsole.WriteLine(\"C# LINQ: books.Where(b => b.Year >= 2020).Select(b => b.Title)\");\nConsole.WriteLine(\"SQL:     SELECT Title FROM Books WHERE Year >= 2020\");\n\nConsole.WriteLine(\"\\n=== WHY ORM (Entity Framework) IS BETTER ===\");\nConsole.WriteLine(\"✅ Type Safety: Compiler catches typos! 'b.Autor' = compile error. SQL string typo = runtime crash!\");\nConsole.WriteLine(\"✅ LINQ Familiarity: Same syntax as collections! No learning SQL for basic queries.\");\nConsole.WriteLine(\"✅ Refactoring: Rename 'Title' to 'BookTitle'? IDE updates all LINQ! SQL strings = manual find/replace.\");\nConsole.WriteLine(\"✅ Relationships: 'customer.Orders' just works! No manual JOINs for basic navigation.\");\nConsole.WriteLine(\"✅ Change Tracking: EF knows what changed. Just modify object and SaveChanges()!\");\nConsole.WriteLine(\"✅ Database Agnostic: Switch SQL Server → PostgreSQL? Change connection string. LINQ stays same!\");\nConsole.WriteLine(\"\\nORM = Productivity + Safety + Maintainability!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"ORM TRANSLATION\"",
                  "expectedOutput": "ORM TRANSLATION",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"C# LINQ\"",
                  "expectedOutput": "C# LINQ",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"SQL\"",
                  "expectedOutput": "SQL",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"WHY\"",
                  "expectedOutput": "WHY",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"BETTER\"",
                  "expectedOutput": "BETTER",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"Type Safety\"",
                  "expectedOutput": "Type Safety",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Show LINQ query, then equivalent SQL. LINQ: .Where(condition).OrderBy(field).Select(field). SQL: SELECT field FROM table WHERE condition ORDER BY field."
                },
                {
                  "level": 2,
                  "text": "Thinking ORM is slower: Yes, hand-optimized SQL CAN be faster. But for 95% of queries, ORM is fast enough! And developer productivity matters more than microseconds."
                },
                {
                  "level": 3,
                  "text": "Using ORM for everything: Complex reports with 10 joins? Sometimes raw SQL is clearer! ORMs excel at CRUD operations. Use SQL for complex analytics."
                },
                {
                  "level": 4,
                  "text": "Not understanding SQL: ORM doesn't mean 'never learn SQL!' You should understand what SQL is generated. Use logging to see queries. Debug performance issues!"
                },
                {
                  "level": 5,
                  "text": "Lazy loading traps: ORM can cause N+1 query problem! Loading 100 customers, then customer.Orders for each = 101 queries! Use .Include() to eager load (next lessons)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Thinking ORM is slower",
                  "consequence": "Yes, hand-optimized SQL CAN be faster. But for 95% of queries, ORM is fast enough! And developer productivity matters more than microseconds.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using ORM for everything",
                  "consequence": "Complex reports with 10 joins? Sometimes raw SQL is clearer! ORMs excel at CRUD operations. Use SQL for complex analytics.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not understanding SQL",
                  "consequence": "ORM doesn't mean 'never learn SQL!' You should understand what SQL is generated. Use logging to see queries. Debug performance issues!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Lazy loading traps",
                  "consequence": "ORM can cause N+1 query problem! Loading 100 customers, then customer.Orders for each = 101 queries! Use .Include() to eager load (next lessons).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-03",
          "title": "Entity Framework Core Basics",
          "moduleId": "module-12",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Entity Framework Core is Microsoft's modern ORM (Object-Relational Mapper):\n\nThink of it as a SMART ASSISTANT for database work:\n\nYou: 'I need all customers from New York'\nEF Core: Generates SQL, executes it, returns C# objects\n\nYou: 'Save this new customer'\nEF Core: Generates INSERT statement, handles it\n\nYou: 'This customer's email changed'\nEF Core: Tracks the change, generates UPDATE on SaveChanges()\n\nKEY EF CORE FEATURES:\n• Complex types (value objects)\n• Bulk operations (ExecuteDelete/ExecuteUpdate)\n• JSON columns (store JSON in database)\n• Excellent performance\n• Primitive collections support\n\nSETUP:\n1. Install packages (Microsoft.EntityFrameworkCore, provider like .Sqlite)\n2. Create entity classes\n3. Create DbContext class\n4. Configure connection\n5. Create database with migrations\n\nThink: EF Core = 'Modern, fast, feature-rich bridge between C# and databases!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// ENTITY FRAMEWORK CORE SETUP\n\n// 1. INSTALL PACKAGES (via NuGet or dotnet CLI):\n// dotnet add package Microsoft.EntityFrameworkCore.Sqlite\n// dotnet add package Microsoft.EntityFrameworkCore.Design\n\nusing Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n// 2. DEFINE ENTITIES\nclass Product\n{\n    public int Id { get; set; }  // Primary Key (by convention)\n    public string Name { get; set; } = string.Empty;\n    public decimal Price { get; set; }\n    public int Stock { get; set; }\n}\n\n// 3. CREATE DBCONTEXT\nclass AppDbContext : DbContext\n{\n    // DbSet = table in database\n    public DbSet<Product> Products { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        // SQLite database (file-based, great for learning!)\n        optionsBuilder.UseSqlite(\"Data Source=app.db\");\n    }\n}\n\n// 4. USING EF CORE\nusing var context = new AppDbContext();  // Modern using declaration\n\n// ENSURE DATABASE EXISTS\ncontext.Database.EnsureCreated();\n\n// CREATE (INSERT)\nvar product = new Product \n{ \n    Name = \"Laptop\", \n    Price = 999.99m, \n    Stock = 10 \n};\ncontext.Products.Add(product);\ncontext.SaveChanges();  // Executes SQL INSERT\n\nConsole.WriteLine(\"Product added with ID: \" + product.Id);\n\n// READ (SELECT)\nvar allProducts = context.Products.ToList();\nvar expensiveProducts = context.Products\n    .Where(p => p.Price > 500)\n    .ToList();\n\n// UPDATE\nvar productToUpdate = context.Products.First();\nproductToUpdate.Price = 899.99m;\ncontext.SaveChanges();  // Executes SQL UPDATE\n\n// DELETE\nvar productToDelete = context.Products.Find(1);  // Find by primary key\nif (productToDelete != null)\n{\n    context.Products.Remove(productToDelete);\n    context.SaveChanges();  // Executes SQL DELETE\n}\n// context disposed at end of scope",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`DbContext : DbContext`**: Your DbContext inherits from EF's DbContext. Represents a session with database. Contains DbSet<T> properties for tables.\n\n**`DbSet<T>`**: Represents a table. DbSet<Product> Products = Products table. Use LINQ on DbSet to query. Add/Remove to modify.\n\n**`OnConfiguring()`**: Configure database provider and connection string. UseSqlite(), UseSqlServer(), UseNpgsql() (PostgreSQL). Override in your DbContext.\n\n**`SaveChanges()`**: Persists ALL tracked changes to database! Add, modify, remove objects, then call SaveChanges() ONCE. Batches SQL statements efficiently."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create your first Entity Framework Core application!\n\n1. Define a 'Student' entity:\n   - int Id (primary key)\n   - string Name\n   - int Age\n   - string Major\n\n2. Create 'SchoolDbContext' inheriting DbContext:\n   - DbSet<Student> Students property\n   - OnConfiguring: use SQLite (\\\"Data Source=school.db\\\")\n\n3. Simulate EF Core operations (print SQL commands that would execute):\n   - Create context\n   - Add 3 students\n   - Print: \\\"SQL: INSERT INTO Students...\\\"\n   - Query students over age 20\n   - Print: \\\"SQL: SELECT * FROM Students WHERE Age > 20\\\"\n   - Update first student's major\n   - Print: \\\"SQL: UPDATE Students SET Major = ...\\\"\n   - Delete a student\n   - Print: \\\"SQL: DELETE FROM Students WHERE Id = ...\\\"\n\nThis shows EF Core's CRUD operations!",
              "starterCode": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Student\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public int Age { get; set; }\n    public string Major { get; set; }\n}\n\nclass SchoolDbContext : DbContext\n{\n    public DbSet<Student> Students { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=school.db\");\n    }\n}\n\nConsole.WriteLine(\"=== ENTITY FRAMEWORK CORE SIMULATION ===\");\n\n// Simulate CREATE\nConsole.WriteLine(\"\\n[CREATE] Adding students...\");\nvar student1 = new Student { Name = \"Alice\", Age = 22, Major = \"Computer Science\" };\nvar student2 = new Student { Name = \"Bob\", Age = 19, Major = \"Mathematics\" };\nvar student3 = new Student { Name = \"Charlie\", Age = 23, Major = \"Physics\" };\n\nConsole.WriteLine(\"SQL: INSERT INTO Students (Name, Age, Major) VALUES ('Alice', 22, 'Computer Science')\");\nConsole.WriteLine(\"SQL: INSERT INTO Students (Name, Age, Major) VALUES ('Bob', 19, 'Mathematics')\");\nConsole.WriteLine(\"SQL: INSERT INTO Students (Name, Age, Major) VALUES ('Charlie', 23, 'Physics')\");\nConsole.WriteLine(\"3 students added!\");\n\n// Simulate READ\nConsole.WriteLine(\"\\n[READ] Querying students over age 20...\");\nConsole.WriteLine(\"SQL: SELECT * FROM Students WHERE Age > 20\");\nConsole.WriteLine(\"Found: Alice (22), Charlie (23)\");\n\n// Simulate UPDATE\nConsole.WriteLine(\"\\n[UPDATE] Changing Alice's major...\");\nConsole.WriteLine(\"SQL: UPDATE Students SET Major = 'Data Science' WHERE Id = 1\");\nConsole.WriteLine(\"Updated!\");\n\n// Simulate DELETE\nConsole.WriteLine(\"\\n[DELETE] Removing student with ID 2...\");\nConsole.WriteLine(\"SQL: DELETE FROM Students WHERE Id = 2\");\nConsole.WriteLine(\"Deleted!\");",
              "solution": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Student\n{\n    public int Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public int Age { get; set; }\n    public string Major { get; set; } = string.Empty;\n}\n\nclass SchoolDbContext : DbContext\n{\n    public DbSet<Student> Students { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=school.db\");\n    }\n}\n\nConsole.WriteLine(\"=== ENTITY FRAMEWORK CORE SIMULATION ===\");\nConsole.WriteLine(\"Demonstrating CRUD operations with EF Core\\n\");\n\nConsole.WriteLine(\"[CREATE] Adding students...\");\nvar student1 = new Student { Id = 1, Name = \"Alice\", Age = 22, Major = \"Computer Science\" };\nvar student2 = new Student { Id = 2, Name = \"Bob\", Age = 19, Major = \"Mathematics\" };\nvar student3 = new Student { Id = 3, Name = \"Charlie\", Age = 23, Major = \"Physics\" };\n\nConsole.WriteLine(\"  context.Students.Add(student1);\");\nConsole.WriteLine(\"  context.Students.Add(student2);\");\nConsole.WriteLine(\"  context.Students.Add(student3);\");\nConsole.WriteLine(\"  context.SaveChanges();\");\nConsole.WriteLine(\"\\n  Generated SQL:\");\nConsole.WriteLine(\"    INSERT INTO Students (Name, Age, Major) VALUES ('Alice', 22, 'Computer Science')\");\nConsole.WriteLine(\"    INSERT INTO Students (Name, Age, Major) VALUES ('Bob', 19, 'Mathematics')\");\nConsole.WriteLine(\"    INSERT INTO Students (Name, Age, Major) VALUES ('Charlie', 23, 'Physics')\");\nConsole.WriteLine(\"  ✓ 3 students added!\\n\");\n\nConsole.WriteLine(\"[READ] Querying students over age 20...\");\nConsole.WriteLine(\"  var adults = context.Students.Where(s => s.Age > 20).ToList();\");\nConsole.WriteLine(\"\\n  Generated SQL:\");\nConsole.WriteLine(\"    SELECT * FROM Students WHERE Age > 20\");\nConsole.WriteLine(\"  ✓ Found: Alice (22), Charlie (23)\\n\");\n\nConsole.WriteLine(\"[UPDATE] Changing Alice's major...\");\nConsole.WriteLine(\"  var alice = context.Students.Find(1);\");\nConsole.WriteLine(\"  alice.Major = 'Data Science';\");\nConsole.WriteLine(\"  context.SaveChanges();\");\nConsole.WriteLine(\"\\n  Generated SQL:\");\nConsole.WriteLine(\"    UPDATE Students SET Major = 'Data Science' WHERE Id = 1\");\nConsole.WriteLine(\"  ✓ Updated!\\n\");\n\nConsole.WriteLine(\"[DELETE] Removing student with ID 2...\");\nConsole.WriteLine(\"  var bob = context.Students.Find(2);\");\nConsole.WriteLine(\"  context.Students.Remove(bob);\");\nConsole.WriteLine(\"  context.SaveChanges();\");\nConsole.WriteLine(\"\\n  Generated SQL:\");\nConsole.WriteLine(\"    DELETE FROM Students WHERE Id = 2\");\nConsole.WriteLine(\"  ✓ Deleted!\\n\");\n\nConsole.WriteLine(\"=== EF CORE TRACKS CHANGES AUTOMATICALLY ===\");\nConsole.WriteLine(\"You modify objects in C# → EF Core generates SQL → Database updated!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"ENTITY FRAMEWORK\"",
                  "expectedOutput": "ENTITY FRAMEWORK",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"CREATE\"",
                  "expectedOutput": "CREATE",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"READ\"",
                  "expectedOutput": "READ",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"UPDATE\"",
                  "expectedOutput": "UPDATE",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"DELETE\"",
                  "expectedOutput": "DELETE",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"SQL\"",
                  "expectedOutput": "SQL",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "DbContext: inherit from DbContext. DbSet<T>: represents table. OnConfiguring: setup connection. CRUD: Add(), Where(), modify object, Remove(). SaveChanges() executes SQL!"
                },
                {
                  "level": 2,
                  "text": "Forgetting SaveChanges(): Add/Remove/modify objects doesn't touch database! Must call context.SaveChanges() to persist. No SaveChanges() = no database changes!"
                },
                {
                  "level": 3,
                  "text": "Not disposing context: DbContext implements IDisposable! Always use 'using' statement or call Dispose(). Otherwise connection leaks!"
                },
                {
                  "level": 4,
                  "text": "Id property confusion: By convention, 'Id' or '[ClassName]Id' is primary key. EF auto-increments it on Insert. Don't set Id yourself when inserting!"
                },
                {
                  "level": 5,
                  "text": "EnsureCreated vs Migrations: EnsureCreated() creates DB but CAN'T update schema! Use Migrations in real apps. EnsureCreated() is only for learning/testing!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting SaveChanges()",
                  "consequence": "Add/Remove/modify objects doesn't touch database! Must call context.SaveChanges() to persist. No SaveChanges() = no database changes!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not disposing context",
                  "consequence": "DbContext implements IDisposable! Always use 'using' statement or call Dispose(). Otherwise connection leaks!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Id property confusion",
                  "consequence": "By convention, 'Id' or '[ClassName]Id' is primary key. EF auto-increments it on Insert. Don't set Id yourself when inserting!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Using EnsureCreated() in Real Projects (NEVER DO THIS!)",
                  "consequence": "EnsureCreated() is a DEAD END for real applications! It creates the DB once but CANNOT update schema - ever! If you add a column, change a relationship, or modify any entity, EnsureCreated() will NOT apply those changes. Your only options become: (1) Delete entire database and lose all data, or (2) Manual SQL alterations. Neither is acceptable in production!",
                  "correction": "ALWAYS use Migrations in any project that will go to production or needs schema updates: 'dotnet ef migrations add InitialCreate' then 'dotnet ef database update'. EnsureCreated() is ONLY acceptable for: (1) Learning tutorials like this one, (2) Throwaway prototypes, (3) Unit tests with in-memory databases. The moment you think 'this might be real', switch to migrations immediately!"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-04",
          "title": "Code-First Design (Databases from C# Classes)",
          "moduleId": "module-12",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "There are TWO ways to build a database app:\n\nDATABASE-FIRST (old way):\n1. Create database tables in SQL\n2. Generate C# classes from database\n3. Hope they stay in sync!\n\nCODE-FIRST (modern way):\n1. Write C# classes\n2. EF Core generates database from classes!\n3. Classes are source of truth\n\nCode-First is like building a house from blueprints:\n• Blueprint = C# class\n• House = Database table\n• Change blueprint → Rebuild house automatically!\n\nBENEFITS:\n✅ Version control - Classes in Git, database changes tracked!\n✅ Refactoring - Rename property? Database updates!\n✅ Portable - Same classes work with SQL Server, PostgreSQL, etc.\n✅ Testable - Use in-memory database for tests\n\nThink: Code-First = 'Your C# code IS the database schema. Database generated from code!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\n\n// STEP 1: DEFINE ENTITIES (classes)\nclass Customer\n{\n    public int Id { get; set; }  // Primary key (convention)\n    \n    [Required]  // NOT NULL in database\n    [MaxLength(100)]  // VARCHAR(100)\n    public string Name { get; set; } = string.Empty;\n    \n    [Required]\n    [EmailAddress]  // Validation attribute\n    public string Email { get; set; } = string.Empty;\n    \n    public int Age { get; set; }\n    \n    // Navigation property - RELATIONSHIP!\n    public List<Order> Orders { get; set; } = new();\n}\n\nclass Order\n{\n    public int Id { get; set; }\n    \n    public int CustomerId { get; set; }  // Foreign key\n    \n    [Column(TypeName = \"decimal(18,2)\")]  // Precision for money\n    public decimal Total { get; set; }\n    \n    public DateTime OrderDate { get; set; }\n    \n    // Navigation property\n    public Customer Customer { get; set; } = null!;\n}\n\n// STEP 2: DBCONTEXT\nclass StoreDbContext : DbContext\n{\n    public DbSet<Customer> Customers { get; set; }\n    public DbSet<Order> Orders { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=store.db\");\n    }\n    \n    // STEP 3: Configure relationships (Fluent API)\n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        // Configure Customer\n        modelBuilder.Entity<Customer>()\n            .HasKey(c => c.Id);\n        \n        modelBuilder.Entity<Customer>()\n            .HasMany(c => c.Orders)  // Customer has many Orders\n            .WithOne(o => o.Customer)  // Each Order has one Customer\n            .HasForeignKey(o => o.CustomerId);\n        \n        // Seed data (initial data)\n        modelBuilder.Entity<Customer>().HasData(\n            new Customer { Id = 1, Name = \"John Doe\", Email = \"john@example.com\", Age = 30 }\n        );\n    }\n}\n\n// STEP 4: CREATE DATABASE\nusing var context = new StoreDbContext();  // Modern using declaration\ncontext.Database.EnsureDeleted();  // Delete if exists (learning only!)\ncontext.Database.EnsureCreated();  // Create from classes!\n\nConsole.WriteLine(\"Database created from C# classes!\");\nConsole.WriteLine(\"Tables: Customers, Orders\");\nConsole.WriteLine(\"Relationship: Customer 1-to-Many Orders\");\n// context disposed at end of scope",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Data Annotations`**: [Required], [MaxLength], [Column], [Key] - Attributes on properties configure database! [Required] = NOT NULL. [MaxLength(50)] = VARCHAR(50).\n\n**`Navigation properties`**: public List<Order> Orders - Represents relationship! Customer has many Orders. EF creates foreign key automatically.\n\n**`OnModelCreating()`**: Fluent API configuration. More powerful than attributes! Configure relationships, indexes, constraints. Override in DbContext.\n\n**`HasMany().WithOne()`**: Fluent API for 1-to-Many relationship. HasMany(c => c.Orders) on Customer. WithOne(o => o.Customer) on Order. Defines both sides!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a Blog database with Code-First!\n\n1. Create 'BlogPost' entity:\n   - int Id\n   - string Title ([Required], [MaxLength(200)])\n   - string Content ([Required])\n   - DateTime PublishedDate\n   - int AuthorId (foreign key)\n   - Author Author (navigation property)\n\n2. Create 'Author' entity:\n   - int Id\n   - string Name ([Required], [MaxLength(100)])\n   - string Email ([Required])\n   - List<BlogPost> BlogPosts (navigation property)\n\n3. Create 'BlogDbContext':\n   - DbSet<BlogPost> BlogPosts\n   - DbSet<Author> Authors\n   - Configure relationship in OnModelCreating:\n     - Author has many BlogPosts\n     - BlogPost has one Author\n   - Seed one author\n\n4. Print the schema that would be created:\n   - Table names\n   - Column names and types\n   - Relationships\n\nThis shows Code-First design!",
              "starterCode": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel.DataAnnotations.Schema;\n\nclass BlogPost\n{\n    public int Id { get; set; }\n    \n    [Required]\n    [MaxLength(200)]\n    public string Title { get; set; } = string.Empty;\n    \n    [Required]\n    public string Content { get; set; } = string.Empty;\n    \n    public DateTime PublishedDate { get; set; }\n    \n    public int AuthorId { get; set; }\n    public Author Author { get; set; } = null!;\n}\n\nclass Author\n{\n    public int Id { get; set; }\n    \n    [Required]\n    [MaxLength(100)]\n    public string Name { get; set; } = string.Empty;\n    \n    [Required]\n    public string Email { get; set; } = string.Empty;\n    \n    public List<BlogPost> BlogPosts { get; set; } = new();\n}\n\nclass BlogDbContext : DbContext\n{\n    public DbSet<BlogPost> BlogPosts { get; set; }\n    public DbSet<Author> Authors { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=blog.db\");\n    }\n    \n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        // Configure relationship\n        modelBuilder.Entity<Author>()\n            .HasMany(a => a.BlogPosts)\n            .WithOne(b => b.Author)\n            .HasForeignKey(b => b.AuthorId);\n        \n        // Seed data\n        modelBuilder.Entity<Author>().HasData(\n            new Author { Id = 1, Name = \"Jane Smith\", Email = \"jane@example.com\" }\n        );\n    }\n}\n\nConsole.WriteLine(\"=== CODE-FIRST DATABASE SCHEMA ===\");\nConsole.WriteLine(\"\\nTable: Authors\");\nConsole.WriteLine(\"  - Id (INT, PRIMARY KEY)\");\nConsole.WriteLine(\"  - Name (VARCHAR(100), NOT NULL)\");\nConsole.WriteLine(\"  - Email (VARCHAR, NOT NULL)\");\n\nConsole.WriteLine(\"\\nTable: BlogPosts\");\nConsole.WriteLine(\"  - Id (INT, PRIMARY KEY)\");\nConsole.WriteLine(\"  - Title (VARCHAR(200), NOT NULL)\");\nConsole.WriteLine(\"  - Content (TEXT, NOT NULL)\");\nConsole.WriteLine(\"  - PublishedDate (DATETIME)\");\nConsole.WriteLine(\"  - AuthorId (INT, FOREIGN KEY → Authors.Id)\");\n\nConsole.WriteLine(\"\\nRelationship:\");\nConsole.WriteLine(\"  Author 1-to-Many BlogPosts\");",
              "solution": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.ComponentModel.DataAnnotations;\nusing System.ComponentModel.DataAnnotations.Schema;\n\nclass BlogPost\n{\n    public int Id { get; set; }\n    \n    [Required]\n    [MaxLength(200)]\n    public string Title { get; set; } = string.Empty;\n    \n    [Required]\n    public string Content { get; set; } = string.Empty;\n    \n    public DateTime PublishedDate { get; set; }\n    \n    public int AuthorId { get; set; }\n    public Author Author { get; set; } = null!;\n}\n\nclass Author\n{\n    public int Id { get; set; }\n    \n    [Required]\n    [MaxLength(100)]\n    public string Name { get; set; } = string.Empty;\n    \n    [Required]\n    public string Email { get; set; } = string.Empty;\n    \n    public List<BlogPost> BlogPosts { get; set; } = new();\n}\n\nclass BlogDbContext : DbContext\n{\n    public DbSet<BlogPost> BlogPosts { get; set; }\n    public DbSet<Author> Authors { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=blog.db\");\n    }\n    \n    protected override void OnModelCreating(ModelBuilder modelBuilder)\n    {\n        modelBuilder.Entity<Author>()\n            .HasMany(a => a.BlogPosts)\n            .WithOne(b => b.Author)\n            .HasForeignKey(b => b.AuthorId);\n        \n        modelBuilder.Entity<Author>().HasData(\n            new Author { Id = 1, Name = \"Jane Smith\", Email = \"jane@example.com\" }\n        );\n    }\n}\n\nConsole.WriteLine(\"=== CODE-FIRST DATABASE SCHEMA ===\");\nConsole.WriteLine(\"Database generated from C# classes!\\n\");\n\nConsole.WriteLine(\"Table: Authors\");\nConsole.WriteLine(\"  Columns:\");\nConsole.WriteLine(\"    - Id (INT, PRIMARY KEY, AUTO-INCREMENT)\");\nConsole.WriteLine(\"    - Name (VARCHAR(100), NOT NULL)\");\nConsole.WriteLine(\"    - Email (VARCHAR, NOT NULL)\");\n\nConsole.WriteLine(\"\\nTable: BlogPosts\");\nConsole.WriteLine(\"  Columns:\");\nConsole.WriteLine(\"    - Id (INT, PRIMARY KEY, AUTO-INCREMENT)\");\nConsole.WriteLine(\"    - Title (VARCHAR(200), NOT NULL)\");\nConsole.WriteLine(\"    - Content (TEXT, NOT NULL)\");\nConsole.WriteLine(\"    - PublishedDate (DATETIME)\");\nConsole.WriteLine(\"    - AuthorId (INT, FOREIGN KEY → Authors.Id)\");\n\nConsole.WriteLine(\"\\nRelationships:\");\nConsole.WriteLine(\"  ✓ Author HAS MANY BlogPosts (1-to-Many)\");\nConsole.WriteLine(\"  ✓ BlogPost BELONGS TO one Author\");\n\nConsole.WriteLine(\"\\nSeed Data:\");\nConsole.WriteLine(\"  ✓ Author: Jane Smith (jane@example.com)\");\n\nConsole.WriteLine(\"\\n=== BENEFITS OF CODE-FIRST ===\");\nConsole.WriteLine(\"✅ C# classes = Source of truth\");\nConsole.WriteLine(\"✅ Database auto-generated from classes\");\nConsole.WriteLine(\"✅ Refactor code → Database updates via migrations\");\nConsole.WriteLine(\"✅ Version control friendly (classes in Git!)\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"CODE-FIRST\"",
                  "expectedOutput": "CODE-FIRST",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Authors\"",
                  "expectedOutput": "Authors",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"BlogPosts\"",
                  "expectedOutput": "BlogPosts",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Relationship\"",
                  "expectedOutput": "Relationship",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"BENEFITS\"",
                  "expectedOutput": "BENEFITS",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Attributes: [Required], [MaxLength(n)]. Navigation: List<T> for many, single property for one. OnModelCreating: HasMany().WithOne().HasForeignKey(). HasData() seeds initial data."
                },
                {
                  "level": 2,
                  "text": "Missing null-forgiving operator: Navigation properties like 'public Author Author' need '= null!' in modern C#. Otherwise nullable warnings. Or make nullable: 'Author?'."
                },
                {
                  "level": 3,
                  "text": "Forgetting inverse navigation: Define BOTH sides of relationship! Customer has List<Order>, Order has Customer. EF uses both to create proper foreign key."
                },
                {
                  "level": 4,
                  "text": "Attributes vs Fluent API: Simple configs = attributes. Complex = Fluent API. Can mix both! Fluent API overrides attributes if both used."
                },
                {
                  "level": 5,
                  "text": "EnsureCreated limitations: Can't modify schema after creation! Use Migrations in real apps. EnsureCreated() is learning/testing only. No schema updates possible!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Missing null-forgiving operator",
                  "consequence": "Navigation properties like 'public Author Author' need '= null!' in modern C#. Otherwise nullable warnings. Or make nullable: 'Author?'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting inverse navigation",
                  "consequence": "Define BOTH sides of relationship! Customer has List<Order>, Order has Customer. EF uses both to create proper foreign key.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Attributes vs Fluent API",
                  "consequence": "Simple configs = attributes. Complex = Fluent API. Can mix both! Fluent API overrides attributes if both used.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "EnsureCreated() is a Schema Dead End",
                  "consequence": "Once you use EnsureCreated(), you're LOCKED to that schema! Adding new properties, changing types, or modifying relationships will be IGNORED. Your code and database will drift apart silently, causing runtime errors when properties don't match columns!",
                  "correction": "Use EF Core Migrations from day one in any project beyond tutorials: 'dotnet ef migrations add [Name]' creates versioned schema changes. Migrations can be applied, rolled back, and version-controlled. EnsureCreated() should only appear in learning exercises or unit test setup."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-05",
          "title": "DbContext & DbSet (Your Database Connection)",
          "moduleId": "module-12",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a library:\n\nLIBRARY BUILDING = DbContext\n• The entire library facility\n• Entry point to all resources\n• Handles check-in/check-out (SaveChanges)\n• Tracks what you borrowed (Change Tracking)\n\nBOOKSHELVES = DbSet<T>\n• Fiction shelf = DbSet<FictionBook>\n• Science shelf = DbSet<ScienceBook>\n• Each shelf (DbSet) contains books (entities) of one type\n\nDbContext responsibilities:\n• CONNECTION management\n• CHANGE TRACKING (remembers what you modified)\n• QUERY TRANSLATION (LINQ → SQL)\n• TRANSACTION management\n• CACHING (reduce database trips)\n\nDbSet<T> is a COLLECTION that:\n• Represents a table\n• Queryable with LINQ\n• Track additions/removals\n\nThink: DbContext = 'Your database session', DbSet = 'A specific table'!"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public decimal Price { get; set; }\n}\n\nclass AppDbContext : DbContext\n{\n    // DbSet = Table\n    public DbSet<Product> Products { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=app.db\");\n    }\n}\n\n// USING DbContext - Modern using declaration (C# 8+)\nusing var context = new AppDbContext();  // Disposed at end of scope\n\ncontext.Database.EnsureCreated();\n\n// CHANGE TRACKING\nvar product = new Product { Name = \"Laptop\", Price = 999.99m };\ncontext.Products.Add(product);  // Tracked as 'Added'\n\nConsole.WriteLine(\"State: \" + context.Entry(product).State);  // Added\n\ncontext.SaveChanges();  // Persist to database\nConsole.WriteLine(\"State: \" + context.Entry(product).State);  // Unchanged\n\n// QUERYING DbSet\nvar allProducts = context.Products.ToList();  // SELECT *\nvar expensive = context.Products\n    .Where(p => p.Price > 500)\n    .OrderBy(p => p.Name)\n    .ToList();  // SELECT ... WHERE ... ORDER BY\n\n// MODIFYING TRACKED ENTITY\nvar firstProduct = context.Products.First();\nfirstProduct.Price = 899.99m;  // EF tracks this change!\n\nConsole.WriteLine(\"Modified state: \" + context.Entry(firstProduct).State);\ncontext.SaveChanges();  // UPDATE\n\n// REMOVING\nvar toRemove = context.Products.Find(1);  // Find by primary key\nif (toRemove != null)\n{\n    context.Products.Remove(toRemove);  // Marked as Deleted\n    context.SaveChanges();  // DELETE\n}\n\n// DbContext TRACKING STATUS\nConsole.WriteLine(\"Total tracked: \" + context.ChangeTracker.Entries().Count());\n\n// context is DISPOSED at end of scope (connection closed)\n// 'using var' is the modern C# 8+ way - cleaner, same behavior!",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`using var context = new DbContext();`**: Modern C# 8+ using declaration. DbContext implements IDisposable. The 'using var' ensures disposal at end of scope (closes connection, releases resources). Cleaner than the old braces style!\n\n**`context.Entry(entity).State`**: Check entity state: Unchanged, Added, Modified, Deleted, Detached. EF tracks state automatically when you modify objects!\n\n**`DbSet operations`**: Add(), Remove(), Find(key), ToList(), Where(), etc. DbSet implements IQueryable<T> - full LINQ support!\n\n**`context.SaveChanges()`**: Persists ALL tracked changes. Batches INSERT, UPDATE, DELETE into single transaction. Call once after all changes!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Demonstrate DbContext change tracking!\n\n1. Create 'Task' entity (Id, Title, IsCompleted)\n\n2. Create 'TaskDbContext' with DbSet<Task>\n\n3. Simulate change tracking states:\n   - Create new task, add to context\n   - Print state (should be 'Added')\n   - 'Save' and print state (now 'Unchanged')\n   - Modify task title\n   - Print state (now 'Modified')\n   - Mark for removal\n   - Print state (now 'Deleted')\n\n4. Show DbContext responsibilities:\n   - Print: Connection management\n   - Print: Change tracking\n   - Print: Query translation\n   - Print: Transaction management\n\n5. Emphasize 'using' statement importance!",
              "starterCode": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Linq;\n\nclass TaskItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; } = string.Empty;\n    public bool IsCompleted { get; set; }\n}\n\nclass TaskDbContext : DbContext\n{\n    public DbSet<TaskItem> Tasks { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=tasks.db\");\n    }\n}\n\nConsole.WriteLine(\"=== DbContext CHANGE TRACKING DEMO ===\");\n\n// Simulate tracking\nvar task = new TaskItem { Title = \"Learn EF Core\", IsCompleted = false };\n\nConsole.WriteLine(\"\\n[1] NEW TASK CREATED\");\nConsole.WriteLine(\"Task object created in memory\");\nConsole.WriteLine(\"State: Not tracked (Detached)\");\n\nConsole.WriteLine(\"\\n[2] ADDED TO DbContext\");\nConsole.WriteLine(\"context.Tasks.Add(task)\");\nConsole.WriteLine(\"State: Added (will INSERT on SaveChanges)\");\n\nConsole.WriteLine(\"\\n[3] SAVED TO DATABASE\");\nConsole.WriteLine(\"context.SaveChanges()\");\nConsole.WriteLine(\"State: Unchanged (in sync with database)\");\n\nConsole.WriteLine(\"\\n[4] MODIFIED\");\nConsole.WriteLine(\"task.Title = 'Master EF Core'\");\nConsole.WriteLine(\"State: Modified (will UPDATE on SaveChanges)\");\n\nConsole.WriteLine(\"\\n[5] MARKED FOR DELETION\");\nConsole.WriteLine(\"context.Tasks.Remove(task)\");\nConsole.WriteLine(\"State: Deleted (will DELETE on SaveChanges)\");\n\nConsole.WriteLine(\"\\n=== DbContext RESPONSIBILITIES ===\");\nConsole.WriteLine(\"✓ Connection Management: Opens/closes database connection\");\nConsole.WriteLine(\"✓ Change Tracking: Remembers Added/Modified/Deleted\");\nConsole.WriteLine(\"✓ Query Translation: Converts LINQ to SQL\");\nConsole.WriteLine(\"✓ Transaction: SaveChanges() is atomic (all-or-nothing)\");\n\nConsole.WriteLine(\"\\n⚠️  IMPORTANT: Always use 'using' with DbContext!\");\nConsole.WriteLine(\"   using var context = new DbContext();  // Modern C# 8+ syntax\");",
              "solution": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Linq;\n\nclass TaskItem\n{\n    public int Id { get; set; }\n    public string Title { get; set; } = string.Empty;\n    public bool IsCompleted { get; set; }\n}\n\nclass TaskDbContext : DbContext\n{\n    public DbSet<TaskItem> Tasks { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=tasks.db\");\n    }\n}\n\nConsole.WriteLine(\"=== DbContext CHANGE TRACKING DEMONSTRATION ===\");\nConsole.WriteLine(\"Showing how EF Core tracks entity states\\n\");\n\nvar task = new TaskItem { Title = \"Learn EF Core\", IsCompleted = false };\n\nConsole.WriteLine(\"[1] NEW TASK CREATED\");\nConsole.WriteLine(\"    var task = new TaskItem { Title = 'Learn EF Core' };\");\nConsole.WriteLine(\"    State: Detached (not tracked by DbContext)\");\nConsole.WriteLine(\"    Database: No changes yet\\n\");\n\nConsole.WriteLine(\"[2] ADDED TO DbContext\");\nConsole.WriteLine(\"    context.Tasks.Add(task);\");\nConsole.WriteLine(\"    State: Added\");\nConsole.WriteLine(\"    Database: Will INSERT on SaveChanges()\\n\");\n\nConsole.WriteLine(\"[3] SAVED TO DATABASE\");\nConsole.WriteLine(\"    context.SaveChanges();\");\nConsole.WriteLine(\"    State: Unchanged\");\nConsole.WriteLine(\"    Database: Row inserted, EF in sync\\n\");\n\nConsole.WriteLine(\"[4] PROPERTY MODIFIED\");\nConsole.WriteLine(\"    task.Title = 'Master EF Core';\");\nConsole.WriteLine(\"    State: Modified (EF detected the change!)\");\nConsole.WriteLine(\"    Database: Will UPDATE on SaveChanges()\\n\");\n\nConsole.WriteLine(\"[5] MARKED FOR DELETION\");\nConsole.WriteLine(\"    context.Tasks.Remove(task);\");\nConsole.WriteLine(\"    State: Deleted\");\nConsole.WriteLine(\"    Database: Will DELETE on SaveChanges()\\n\");\n\nConsole.WriteLine(\"=== DbContext RESPONSIBILITIES ===\");\nConsole.WriteLine(\"✓ Connection Management:\");\nConsole.WriteLine(\"    Opens connection when needed, closes on Dispose\");\nConsole.WriteLine(\"\\n✓ Change Tracking:\");\nConsole.WriteLine(\"    Tracks: Unchanged, Added, Modified, Deleted states\");\nConsole.WriteLine(\"    Automatically detects property changes!\");\nConsole.WriteLine(\"\\n✓ Query Translation:\");\nConsole.WriteLine(\"    LINQ: context.Tasks.Where(t => t.IsCompleted)\");\nConsole.WriteLine(\"    SQL:  SELECT * FROM Tasks WHERE IsCompleted = 1\");\nConsole.WriteLine(\"\\n✓ Transaction Management:\");\nConsole.WriteLine(\"    SaveChanges() wraps in transaction (atomic!)\");\nConsole.WriteLine(\"    All changes succeed OR all fail (consistency!)\\n\");\n\nConsole.WriteLine(\"=== CRITICAL: Always Dispose! ===\");\nConsole.WriteLine(\"✓ MODERN:  using var context = new DbContext();  // C# 8+\");\nConsole.WriteLine(\"✓ CLASSIC: using (var context = new DbContext()) { ... }\");\nConsole.WriteLine(\"✗ WRONG:   var context = new DbContext(); (never disposed!)\");\nConsole.WriteLine(\"\\nWithout dispose: Connection leaks, memory leaks, locks!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"CHANGE TRACKING\"",
                  "expectedOutput": "CHANGE TRACKING",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Added\"",
                  "expectedOutput": "Added",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Modified\"",
                  "expectedOutput": "Modified",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Deleted\"",
                  "expectedOutput": "Deleted",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"RESPONSIBILITIES\"",
                  "expectedOutput": "RESPONSIBILITIES",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"Dispose\"",
                  "expectedOutput": "Dispose",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "DbContext: session with database. DbSet<T>: represents table. Change tracking: Added, Modified, Deleted, Unchanged. SaveChanges(): persists all. Always use 'using' statement!"
                },
                {
                  "level": 2,
                  "text": "Not disposing DbContext: Leads to connection leaks! Always use 'using' statement or manually call Dispose(). DbContext is meant for SHORT-LIVED use."
                },
                {
                  "level": 3,
                  "text": "Long-lived DbContext: Don't keep DbContext alive for entire app! Create per request (web) or per operation. Change tracking gets stale, memory grows."
                },
                {
                  "level": 4,
                  "text": "Detached entities: Entities not tracked by context = Detached. Can't SaveChanges() on detached! Must Add() or Attach() first."
                },
                {
                  "level": 5,
                  "text": "Multiple SaveChanges: SaveChanges() can be called multiple times, but creates multiple transactions. Batch changes, call SaveChanges() ONCE at end!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Not disposing DbContext",
                  "consequence": "Leads to connection leaks! Always use 'using' statement or manually call Dispose(). DbContext is meant for SHORT-LIVED use.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Long-lived DbContext",
                  "consequence": "Don't keep DbContext alive for entire app! Create per request (web) or per operation. Change tracking gets stale, memory grows.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Detached entities",
                  "consequence": "Entities not tracked by context = Detached. Can't SaveChanges() on detached! Must Add() or Attach() first.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Multiple SaveChanges",
                  "consequence": "SaveChanges() can be called multiple times, but creates multiple transactions. Batch changes, call SaveChanges() ONCE at end!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-06",
          "title": "Migrations & Bulk Operations",
          "moduleId": "module-12",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "MIGRATIONS = Version control for your database schema!\n\nImagine building a house:\n• Version 1: Foundation only\n• Version 2: Add walls\n• Version 3: Add roof\n• Version 4: Add windows\n\nEach step is a MIGRATION:\n• Records what changed\n• Can go forward (apply) or backward (rollback)\n• Track schema evolution in code!\n\nBULK OPERATIONS (NEW in EF Core 7/8):\nOLD way (slow):\n```csharp\nforeach (var product in products)\n{\n    product.Price *= 1.1;  // 10% increase\n}\ncontext.SaveChanges();  // Loads each, updates each - SLOW!\n```\n\nNEW way (fast):\n```csharp\ncontext.Products\n    .Where(p => p.Category == \"Electronics\")\n    .ExecuteUpdate(p => p.SetProperty(x => x.Price, x => x.Price * 1.1));\n// Single UPDATE statement - FAST!\n```\n\nThink: Migrations = 'Git for database schema', Bulk = 'Update 1000 rows in one SQL statement!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Linq;\n\n// MIGRATIONS (Commands)\n// dotnet ef migrations add InitialCreate\n// dotnet ef database update\n// dotnet ef migrations add AddPriceColumn\n// dotnet ef database update\n\nclass Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public decimal Price { get; set; }\n    public string Category { get; set; } = string.Empty;\n}\n\nclass AppDbContext : DbContext\n{\n    public DbSet<Product> Products { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=app.db\");\n    }\n}\n\nusing var context = new AppDbContext();  // Modern using declaration\n\ncontext.Database.EnsureCreated();\n\n// Seed data\nif (!context.Products.Any())\n{\n    context.Products.AddRange(\n        new Product { Name = \"Laptop\", Price = 1000, Category = \"Electronics\" },\n        new Product { Name = \"Mouse\", Price = 30, Category = \"Electronics\" },\n        new Product { Name = \"Desk\", Price = 200, Category = \"Furniture\" }\n    );\n    context.SaveChanges();\n}\n\n// BULK UPDATE (EF Core 7+)\nConsole.WriteLine(\"=== BULK UPDATE ===\");\nint updated = context.Products\n    .Where(p => p.Category == \"Electronics\")\n    .ExecuteUpdate(setters => setters\n        .SetProperty(p => p.Price, p => p.Price * 1.1m));\n\nConsole.WriteLine($\"Updated {updated} products with single SQL!\");\n// Generated SQL: UPDATE Products SET Price = Price * 1.1 WHERE Category = 'Electronics'\n\n// BULK DELETE (EF Core 7+)\nConsole.WriteLine(\"\\n=== BULK DELETE ===\");\nint deleted = context.Products\n    .Where(p => p.Price < 50)\n    .ExecuteDelete();\n\nConsole.WriteLine($\"Deleted {deleted} products\");\n// Generated SQL: DELETE FROM Products WHERE Price < 50\n\n// TRADITIONAL UPDATE (for comparison - slower!)\nvar products = context.Products.Where(p => p.Category == \"Furniture\").ToList();\nforeach (var p in products)\n{\n    p.Price *= 1.05m;  // 5% increase\n}\ncontext.SaveChanges();  // Separate UPDATE for each!\n// context disposed at end of scope\n\n// MIGRATION WORKFLOW:\n// 1. Change your entity classes (add/remove properties)\n// 2. Run: dotnet ef migrations add DescriptiveName\n// 3. Review generated migration code\n// 4. Run: dotnet ef database update\n// 5. Database schema updated!\n\n// MIGRATION COMMANDS:\n// List migrations: dotnet ef migrations list\n// Remove last:     dotnet ef migrations remove\n// Rollback:        dotnet ef database update PreviousMigration\n// Generate SQL:    dotnet ef migrations script",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`ExecuteUpdate()`**: EF Core 7+ feature. Updates multiple rows with single SQL! SetProperty(prop, value). Returns number of affected rows. WAY faster than load-modify-save!\n\n**`ExecuteDelete()`**: EF Core 7+ feature. Deletes multiple rows with single SQL! No loading into memory. Executes immediately (not on SaveChanges!).\n\n**`Migrations add`**: dotnet ef migrations add Name - Creates migration file with Up() and Down() methods. Snapshot of schema changes.\n\n**`database update`**: dotnet ef database update - Applies pending migrations to database. Updates schema to match code!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Demonstrate migrations and bulk operations!\n\n1. Create 'Employee' entity:\n   - int Id\n   - string Name\n   - decimal Salary\n   - string Department\n\n2. Create 'CompanyDbContext'\n\n3. Show migration workflow (print commands):\n   - Print: dotnet ef migrations add InitialCreate\n   - Print: dotnet ef database update\n   - Print: (Add new property 'bool IsActive')\n   - Print: dotnet ef migrations add AddIsActive\n   - Print: dotnet ef database update\n\n4. Simulate bulk operations:\n   - BULK UPDATE: Give 10% raise to 'Engineering' department\n   - Print SQL that would execute\n   - BULK DELETE: Remove employees with salary < 30000\n   - Print SQL that would execute\n\n5. Compare with traditional approach:\n   - Show foreach loop version (slow)\n   - Show bulk version (fast)\n   - Explain performance difference",
              "starterCode": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Linq;\n\nclass Employee\n{\n    public int Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public decimal Salary { get; set; }\n    public string Department { get; set; } = string.Empty;\n}\n\nclass CompanyDbContext : DbContext\n{\n    public DbSet<Employee> Employees { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=company.db\");\n    }\n}\n\nConsole.WriteLine(\"=== MIGRATIONS WORKFLOW ===\");\nConsole.WriteLine(\"\\n1. Create initial entities and DbContext\");\nConsole.WriteLine(\"   Command: dotnet ef migrations add InitialCreate\");\nConsole.WriteLine(\"   Result: Creates Migrations/InitialCreate.cs\");\n\nConsole.WriteLine(\"\\n2. Apply migration to database\");\nConsole.WriteLine(\"   Command: dotnet ef database update\");\nConsole.WriteLine(\"   Result: Database created with Employees table\");\n\nConsole.WriteLine(\"\\n3. Add new property to Employee class\");\nConsole.WriteLine(\"   Code: public bool IsActive { get; set; }\");\n\nConsole.WriteLine(\"\\n4. Create migration for new property\");\nConsole.WriteLine(\"   Command: dotnet ef migrations add AddIsActive\");\nConsole.WriteLine(\"   Result: Migration file for schema change\");\n\nConsole.WriteLine(\"\\n5. Apply the migration\");\nConsole.WriteLine(\"   Command: dotnet ef database update\");\nConsole.WriteLine(\"   Result: IsActive column added to Employees table\");\n\nConsole.WriteLine(\"\\n=== BULK OPERATIONS (EF Core 7+) ===\");\n\nConsole.WriteLine(\"\\nBULK UPDATE: 10% raise for Engineering\");\nConsole.WriteLine(\"Code:\");\nConsole.WriteLine(\"  context.Employees\");\nConsole.WriteLine(\"    .Where(e => e.Department == 'Engineering')\");\nConsole.WriteLine(\"    .ExecuteUpdate(s => s.SetProperty(e => e.Salary, e => e.Salary * 1.1m));\");\nConsole.WriteLine(\"\\nGenerated SQL:\");\nConsole.WriteLine(\"  UPDATE Employees SET Salary = Salary * 1.1 WHERE Department = 'Engineering'\");\nConsole.WriteLine(\"✓ FAST: Single SQL statement!\");\n\nConsole.WriteLine(\"\\nBULK DELETE: Remove low-salary employees\");\nConsole.WriteLine(\"Code:\");\nConsole.WriteLine(\"  context.Employees.Where(e => e.Salary < 30000).ExecuteDelete();\");\nConsole.WriteLine(\"\\nGenerated SQL:\");\nConsole.WriteLine(\"  DELETE FROM Employees WHERE Salary < 30000\");\nConsole.WriteLine(\"✓ FAST: Single SQL statement!\");\n\nConsole.WriteLine(\"\\n=== PERFORMANCE COMPARISON ===\");\nConsole.WriteLine(\"\\nTRADITIONAL (Slow):\");\nConsole.WriteLine(\"  var employees = context.Employees.Where(e => ...).ToList();\");\nConsole.WriteLine(\"  foreach (var e in employees) { e.Salary *= 1.1; }\");\nConsole.WriteLine(\"  context.SaveChanges();\");\nConsole.WriteLine(\"  Result: 1000 employees = 1000 UPDATE statements!\");\n\nConsole.WriteLine(\"\\nBULK (Fast):\");\nConsole.WriteLine(\"  context.Employees.Where(e => ...).ExecuteUpdate(...);\");\nConsole.WriteLine(\"  Result: 1000 employees = 1 UPDATE statement!\");\nConsole.WriteLine(\"  Performance: 100x-1000x faster for large datasets!\");",
              "solution": "using Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Linq;\n\nclass Employee\n{\n    public int Id { get; set; }\n    public string Name { get; set; } = string.Empty;\n    public decimal Salary { get; set; }\n    public string Department { get; set; } = string.Empty;\n}\n\nclass CompanyDbContext : DbContext\n{\n    public DbSet<Employee> Employees { get; set; }\n    \n    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)\n    {\n        optionsBuilder.UseSqlite(\"Data Source=company.db\");\n    }\n}\n\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  EF CORE: MIGRATIONS & BULK OPERATIONS\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\n\nConsole.WriteLine(\"=== PART 1: MIGRATIONS WORKFLOW ===\");\nConsole.WriteLine(\"\\nStep 1: Create Initial Schema\");\nConsole.WriteLine(\"  → dotnet ef migrations add InitialCreate\");\nConsole.WriteLine(\"  Creates: Migrations/20240115120000_InitialCreate.cs\");\nConsole.WriteLine(\"  Contains: Up() creates Employees table, Down() drops it\\n\");\n\nConsole.WriteLine(\"Step 2: Apply to Database\");\nConsole.WriteLine(\"  → dotnet ef database update\");\nConsole.WriteLine(\"  Result: Database created with schema from code\\n\");\n\nConsole.WriteLine(\"Step 3: Evolve Schema (Add property)\");\nConsole.WriteLine(\"  Code change: public bool IsActive { get; set; }\");\nConsole.WriteLine(\"  → dotnet ef migrations add AddIsActive\");\nConsole.WriteLine(\"  Creates: New migration file\\n\");\n\nConsole.WriteLine(\"Step 4: Apply New Migration\");\nConsole.WriteLine(\"  → dotnet ef database update\");\nConsole.WriteLine(\"  Result: IsActive column added to table\");\nConsole.WriteLine(\"  ✓ Database schema evolves with code!\");\n\nConsole.WriteLine(\"\\n=== PART 2: BULK OPERATIONS (EF Core 7+) ===\");\n\nConsole.WriteLine(\"\\n[BULK UPDATE] 10% raise for Engineering department\");\nConsole.WriteLine(\"\\n  OLD WAY (Slow):\");\nConsole.WriteLine(\"    var engineers = context.Employees\");\nConsole.WriteLine(\"                          .Where(e => e.Department == 'Engineering')\");\nConsole.WriteLine(\"                          .ToList();  // Load into memory\");\nConsole.WriteLine(\"    foreach (var e in engineers)\");\nConsole.WriteLine(\"        e.Salary *= 1.1m;\");\nConsole.WriteLine(\"    context.SaveChanges();  // N UPDATE statements!\");\nConsole.WriteLine(\"    Performance: 1000 rows = 1000 database round-trips\\n\");\n\nConsole.WriteLine(\"  NEW WAY (Fast):\");\nConsole.WriteLine(\"    context.Employees\");\nConsole.WriteLine(\"        .Where(e => e.Department == 'Engineering')\");\nConsole.WriteLine(\"        .ExecuteUpdate(s => s.SetProperty(e => e.Salary, e => e.Salary * 1.1m));\");\nConsole.WriteLine(\"\\n    Generated SQL:\");\nConsole.WriteLine(\"      UPDATE Employees \");\nConsole.WriteLine(\"      SET Salary = Salary * 1.1 \");\nConsole.WriteLine(\"      WHERE Department = 'Engineering'\");\nConsole.WriteLine(\"\\n    Performance: 1000 rows = 1 database statement!\");\nConsole.WriteLine(\"    ✓ 100x-1000x FASTER!\\n\");\n\nConsole.WriteLine(\"[BULK DELETE] Remove employees with salary < $30,000\");\nConsole.WriteLine(\"\\n  Code:\");\nConsole.WriteLine(\"    int deleted = context.Employees\");\nConsole.WriteLine(\"        .Where(e => e.Salary < 30000)\");\nConsole.WriteLine(\"        .ExecuteDelete();\");\nConsole.WriteLine(\"\\n  Generated SQL:\");\nConsole.WriteLine(\"    DELETE FROM Employees WHERE Salary < 30000\");\nConsole.WriteLine(\"\\n  ✓ Single SQL statement, no loading into memory!\");\n\nConsole.WriteLine(\"\\n=== KEY BENEFITS ===\");\nConsole.WriteLine(\"\\nMigrations:\");\nConsole.WriteLine(\"  ✓ Version control for database schema\");\nConsole.WriteLine(\"  ✓ Rollback capability (go to previous version)\");\nConsole.WriteLine(\"  ✓ Team-friendly (migrations in source control)\");\nConsole.WriteLine(\"  ✓ Deployment automation (apply on production)\");\n\nConsole.WriteLine(\"\\nBulk Operations:\");\nConsole.WriteLine(\"  ✓ Massive performance gains (100x+)\");\nConsole.WriteLine(\"  ✓ Less memory usage (no loading into C#)\");\nConsole.WriteLine(\"  ✓ Atomic operations (all-or-nothing)\");\nConsole.WriteLine(\"  ✓ Database-side execution (efficient!)\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"MIGRATIONS\"",
                  "expectedOutput": "MIGRATIONS",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"BULK OPERATIONS\"",
                  "expectedOutput": "BULK OPERATIONS",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"ExecuteUpdate\"",
                  "expectedOutput": "ExecuteUpdate",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"ExecuteDelete\"",
                  "expectedOutput": "ExecuteDelete",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"dotnet ef\"",
                  "expectedOutput": "dotnet ef",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"FASTER\"",
                  "expectedOutput": "FASTER",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Migrations: dotnet ef migrations add Name, dotnet ef database update. Bulk: .ExecuteUpdate(s => s.SetProperty()), .ExecuteDelete(). Bulk = single SQL, traditional = N SQL statements!"
                },
                {
                  "level": 2,
                  "text": "Migrations without EF tools: Must install 'dotnet ef' CLI tool! Run 'dotnet tool install --global dotnet-ef'. Also need Microsoft.EntityFrameworkCore.Design package!"
                },
                {
                  "level": 3,
                  "text": "Production migration: Don't use EnsureCreated() in production! Use migrations. EnsureCreated() can't update schema. Migrations = professional approach."
                },
                {
                  "level": 4,
                  "text": "Bulk operations and tracking: ExecuteUpdate/Delete DON'T update change tracker! If entities loaded, they're now stale. Either reload or don't mix bulk with tracking."
                },
                {
                  "level": 5,
                  "text": "ExecuteUpdate syntax: SetProperty takes TWO lambdas: property selector AND value expression. 's => s.SetProperty(e => e.Price, e => e.Price * 1.1)'. Easy to forget second lambda!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Migrations without EF tools",
                  "consequence": "Must install 'dotnet ef' CLI tool! Run 'dotnet tool install --global dotnet-ef'. Also need Microsoft.EntityFrameworkCore.Design package!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "EnsureCreated() in Production (Career-Ending Mistake!)",
                  "consequence": "Using EnsureCreated() in production is a TRAP! It works initially, but when you need to add a column or fix a relationship, you'll discover you can't update the schema without destroying all data. Teams have lost weeks of work to this mistake!",
                  "correction": "Production apps MUST use Migrations: 'dotnet ef migrations add [Name]' → 'dotnet ef database update'. Migrations provide: version-controlled schema history, rollback capability, team collaboration, CI/CD integration. EnsureCreated() has NONE of these. Treat EnsureCreated() like 'Console.WriteLine debugging' - fine for learning, never for production."
                },
                {
                  "mistake": "Bulk operations and tracking",
                  "consequence": "ExecuteUpdate/Delete DON'T update change tracker! If entities loaded, they're now stale. Either reload or don't mix bulk with tracking.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "ExecuteUpdate syntax",
                  "consequence": "SetProperty takes TWO lambdas: property selector AND value expression. 's => s.SetProperty(e => e.Price, e => e.Price * 1.1)'. Easy to forget second lambda!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-07",
          "title": "EF Core Compiled Models (Startup Performance)",
          "moduleId": "module-12",
          "order": 7,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine opening a restaurant:\n\nWITHOUT COMPILED MODELS:\nEvery morning, chef rebuilds the entire menu from scratch:\n- Reads all recipes\n- Calculates ingredients\n- Sets up stations\n- 30 minutes before serving!\n\nWITH COMPILED MODELS:\nChef pre-builds menu once, stores it:\n- Opens restaurant\n- Menu already ready\n- Serves immediately!\n\nEF Core normally builds your model at startup:\n- Scans all entity classes\n- Discovers relationships\n- Configures conventions\n- For 500 entities = SLOW startup!\n\nCompiled Models do this at BUILD time:\n- Model pre-generated as C# code\n- Startup just loads the code\n- 10x faster for large models!\n\nThink: Compiled Models = 'Pre-cooked model, just reheat and serve!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates Compiled Models.",
              "code": "// === STEP 1: Generate Compiled Model ===\n// Run in terminal:\n// dotnet ef dbcontext optimize --output-dir CompiledModels --namespace MyApp.CompiledModels\n\n// This generates files like:\n// CompiledModels/\n//   MyDbContextModel.cs\n//   ProductEntityType.cs\n//   OrderEntityType.cs\n//   ... (one file per entity)\n\n// === STEP 2: Use in DbContext ===\npublic class AppDbContext : DbContext\n{\n    public DbSet<Product> Products { get; set; }\n    public DbSet<Order> Orders { get; set; }\n    \n    protected override void OnConfiguring(\n        DbContextOptionsBuilder options)\n    {\n        options\n            // Use the compiled model!\n            .UseModel(MyApp.CompiledModels.AppDbContextModel.Instance)\n            .UseSqlServer(connectionString);\n    }\n}\n\n// === EF CORE 10: Even easier with source generation ===\n// Just add attribute - model generated at build time!\n[CompiledModel]\npublic class AppDbContext : DbContext\n{\n    public DbSet<Product> Products { get; set; }\n    public DbSet<Order> Orders { get; set; }\n    \n    // No OnConfiguring needed for compiled model!\n    // EF Core 10 source generator handles it!\n}\n\n// === PERFORMANCE COMPARISON ===\n// Model with 449 entities, 6390 properties, 720 relationships:\n//\n// Without Compiled Model: ~2000ms startup\n// With Compiled Model:    ~200ms startup\n// Improvement:            10x FASTER!\n\n// === WHEN TO USE ===\n// USE: Large models (100+ entities)\n// USE: Microservices (fast cold start critical)\n// USE: Serverless (Azure Functions, AWS Lambda)\n// SKIP: Small apps (overhead not worth it)\n// SKIP: Rapid prototyping (regenerate after changes)",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`dotnet ef dbcontext optimize`**: CLI command that generates compiled model. Scans your DbContext, generates C# code representing the model. Run after schema changes!\n\n**`--output-dir CompiledModels`**: Where to put generated files. These are source files added to your project.\n\n**`.UseModel(Model.Instance)`**: Tells EF to use pre-built model instead of discovering at runtime. Massive startup speedup.\n\n**`[CompiledModel]` (EF Core 10)`**: Source generator attribute. Automatically generates model at build time. No CLI needed!\n\n**Limitations**: Must regenerate after entity changes. No lazy-loading proxies. Worth it only for large models or cold-start sensitive apps."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-07-challenge-01",
              "title": "Practice Challenge",
              "description": "Understand EF Core Compiled Models workflow.",
              "instructions": "Demonstrate the Compiled Models workflow!\n\n1. Show the CLI command to generate compiled models\n2. Show how to configure DbContext to use compiled model\n3. Show the EF Core 10 [CompiledModel] attribute approach\n4. Print performance comparison\n5. List when to use (and when NOT to use)\n6. Show the files that get generated\n\nExplain why this matters for microservices and serverless!",
              "starterCode": "Console.WriteLine(\"=== EF CORE COMPILED MODELS ===\");\n\nConsole.WriteLine(\"\\nSTEP 1: Generate Compiled Model\");\n// TODO: Show CLI command\n\nConsole.WriteLine(\"\\nSTEP 2: Configure DbContext\");\n// TODO: Show UseModel configuration\n\nConsole.WriteLine(\"\\nSTEP 3: EF Core 10 - Source Generator\");\n// TODO: Show [CompiledModel] attribute\n\nConsole.WriteLine(\"\\nPERFORMANCE IMPACT:\");\n// TODO: Show before/after times\n\nConsole.WriteLine(\"\\nWHEN TO USE:\");\n// TODO: List use cases",
              "solution": "Console.WriteLine(\"=== EF CORE COMPILED MODELS ===\");\nConsole.WriteLine(\"Pre-build your EF model for 10x faster startup!\");\n\nConsole.WriteLine(\"\\n--- STEP 1: Generate Compiled Model ---\");\nConsole.WriteLine(\"Run this CLI command:\");\nConsole.WriteLine(@\"\n  dotnet ef dbcontext optimize \\\n    --output-dir CompiledModels \\\n    --namespace MyApp.CompiledModels\n\");\nConsole.WriteLine(\"This generates C# files:\");\nConsole.WriteLine(\"  CompiledModels/\");\nConsole.WriteLine(\"    AppDbContextModel.cs      (main model)\");\nConsole.WriteLine(\"    ProductEntityType.cs       (per entity)\");\nConsole.WriteLine(\"    OrderEntityType.cs\");\nConsole.WriteLine(\"    CustomerEntityType.cs\");\n\nConsole.WriteLine(\"\\n--- STEP 2: Configure DbContext ---\");\nConsole.WriteLine(@\"\npublic class AppDbContext : DbContext\n{\n    protected override void OnConfiguring(\n        DbContextOptionsBuilder options)\n    {\n        options\n            // Use pre-built model!\n            .UseModel(CompiledModels.AppDbContextModel.Instance)\n            .UseSqlServer(connectionString);\n    }\n}\n\");\n\nConsole.WriteLine(\"\\n--- STEP 3: EF Core 10 - Even Easier! ---\");\nConsole.WriteLine(@\"\n// Just add the attribute - done!\n[CompiledModel]\npublic class AppDbContext : DbContext\n{\n    public DbSet<Product> Products { get; set; }\n    // Model generated at BUILD time automatically!\n}\n\");\n\nConsole.WriteLine(\"\\n--- PERFORMANCE IMPACT ---\");\nConsole.WriteLine(\"Large model (449 entities, 6390 properties):\");\nConsole.WriteLine(\"+---------------------------+----------+\");\nConsole.WriteLine(\"| Method                    | Startup  |\");\nConsole.WriteLine(\"+---------------------------+----------+\");\nConsole.WriteLine(\"| Runtime model building    | ~2000 ms |\");\nConsole.WriteLine(\"| Compiled model            | ~200 ms  |\");\nConsole.WriteLine(\"+---------------------------+----------+\");\nConsole.WriteLine(\"= 10x FASTER startup!\");\n\nConsole.WriteLine(\"\\n--- WHEN TO USE ---\");\nConsole.WriteLine(\"USE Compiled Models when:\");\nConsole.WriteLine(\"  + Large models (100+ entities)\");\nConsole.WriteLine(\"  + Microservices (scaling needs fast cold starts)\");\nConsole.WriteLine(\"  + Serverless (Azure Functions, AWS Lambda)\");\nConsole.WriteLine(\"  + Container orchestration (Kubernetes pods)\");\n\nConsole.WriteLine(\"\\nSKIP Compiled Models when:\");\nConsole.WriteLine(\"  - Small models (< 50 entities)\");\nConsole.WriteLine(\"  - Rapid prototyping (must regenerate after changes)\");\nConsole.WriteLine(\"  - Need lazy-loading proxies (not supported)\");\n\nConsole.WriteLine(\"\\n--- REMEMBER ---\");\nConsole.WriteLine(\"After changing entities: RE-RUN 'dotnet ef dbcontext optimize'!\");\nConsole.WriteLine(\"Or use [CompiledModel] attribute for automatic regeneration.\");",
              "language": "csharp",
              "testCases": [
                {"id": "test-1", "description": "Output contains 'COMPILED MODELS'", "expectedOutput": "COMPILED MODELS", "isVisible": true},
                {"id": "test-2", "description": "Output contains 'dotnet ef'", "expectedOutput": "dotnet ef", "isVisible": true},
                {"id": "test-3", "description": "Output contains 'UseModel'", "expectedOutput": "UseModel", "isVisible": true},
                {"id": "test-4", "description": "Output contains 'PERFORMANCE'", "expectedOutput": "PERFORMANCE", "isVisible": true},
                {"id": "test-5", "description": "Output contains '10x'", "expectedOutput": "10x", "isVisible": true},
                {"id": "test-6", "description": "Output contains 'Serverless'", "expectedOutput": "Serverless", "isVisible": true}
              ],
              "hints": [
                {"level": 1, "text": "CLI: 'dotnet ef dbcontext optimize --output-dir CompiledModels'. DbContext: options.UseModel(Model.Instance). EF10: [CompiledModel] attribute."},
                {"level": 2, "text": "Performance gains are only significant for large models (100+ entities). Small apps won't see much difference."},
                {"level": 3, "text": "Must regenerate after entity changes! If you add a property, run 'dotnet ef dbcontext optimize' again."},
                {"level": 4, "text": "EF Core 10's [CompiledModel] uses source generators - regenerates automatically at build time."},
                {"level": 5, "text": "Limitations: No lazy-loading proxies, no change-tracking proxies. Most apps don't use these anyway."}
              ],
              "commonMistakes": [
                {"mistake": "Using on small models", "consequence": "Compiled models add complexity. For < 50 entities, startup is already fast. Overhead not worth it.", "correction": "Only use for large models, microservices, or serverless where cold start matters."},
                {"mistake": "Forgetting to regenerate", "consequence": "After changing entities, old compiled model doesn't match! Runtime errors or missing data.", "correction": "Run 'dotnet ef dbcontext optimize' after any entity changes. Or use [CompiledModel] attribute for auto-regen."},
                {"mistake": "Expecting query speedup", "consequence": "Compiled models only speed up STARTUP, not queries. Queries still use same SQL generation.", "correction": "For query performance, use indexes, compiled queries, or AsNoTracking()."},
                {"mistake": "Using with lazy loading", "consequence": "Compiled models don't support lazy-loading proxies. Proxies require runtime model building.", "correction": "Use eager loading (.Include()) or explicit loading instead."}
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-12-08",
          "title": "HybridCache (Modern Caching)",
          "moduleId": "module-12",
          "order": 8,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine a library with TWO storage systems:\n\nL1 CACHE (In-Memory):\n- Librarian's desk drawer\n- Super fast access\n- Small capacity\n- Only this librarian sees it\n\nL2 CACHE (Distributed - Redis):\n- Central storage room\n- Slower but bigger\n- ALL librarians share it\n- Survives if one librarian goes home\n\nHybridCache combines BOTH:\n1. Check desk drawer (L1) - instant!\n2. If not there, check storage room (L2)\n3. If not there, fetch from warehouse (database)\n4. Store in BOTH caches for next time\n\nHybridCache in modern .NET:\n- One API for both caching levels\n- Automatic stampede protection\n- Tag-based invalidation\n- Replaces IMemoryCache + IDistributedCache juggling\n\nThink: HybridCache = 'The smart librarian who checks everywhere automatically!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates HybridCache.",
              "code": "// === SETUP ===\n// Program.cs\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add HybridCache with Redis as L2\nbuilder.Services.AddHybridCache(options =>\n{\n    options.MaximumPayloadBytes = 1024 * 1024; // 1MB max\n    options.MaximumKeyLength = 256;\n});\n\n// Add Redis as distributed cache backend\nbuilder.Services.AddStackExchangeRedisCache(options =>\n{\n    options.Configuration = \"localhost:6379\";\n});\n\n// === USAGE ===\npublic class ProductService\n{\n    private readonly HybridCache _cache;\n    private readonly AppDbContext _db;\n    \n    public ProductService(HybridCache cache, AppDbContext db)\n    {\n        _cache = cache;\n        _db = db;\n    }\n    \n    public async Task<Product?> GetProductAsync(int id)\n    {\n        // GetOrCreateAsync: check cache, or run factory\n        return await _cache.GetOrCreateAsync(\n            $\"product:{id}\",  // Cache key\n            async token => await _db.Products.FindAsync(id, token),\n            new HybridCacheEntryOptions\n            {\n                Expiration = TimeSpan.FromMinutes(5),\n                LocalCacheExpiration = TimeSpan.FromMinutes(1)\n            }\n        );\n    }\n}\n\n// === TAGGING (New in .NET 10!) ===\npublic async Task<List<Product>> GetCategoryProductsAsync(string category)\n{\n    return await _cache.GetOrCreateAsync(\n        $\"products:category:{category}\",\n        async token => await _db.Products\n            .Where(p => p.Category == category)\n            .ToListAsync(token),\n        new HybridCacheEntryOptions\n        {\n            Expiration = TimeSpan.FromMinutes(10)\n        },\n        tags: new[] { \"products\", $\"category:{category}\" }  // Tags!\n    );\n}\n\n// Invalidate all products when catalog changes\npublic async Task InvalidateProductCacheAsync()\n{\n    await _cache.RemoveByTagAsync(\"products\");  // Remove ALL tagged entries!\n}\n\n// === STAMPEDE PROTECTION (Automatic!) ===\n// 1000 requests hit cache miss simultaneously?\n// OLD: 1000 database queries (stampede!)\n// HybridCache: Only 1 query, 999 wait for result\n\n// === COMPARISON ===\n// IMemoryCache: Fast, local only, no sharing\n// IDistributedCache: Shared, slower, no local tier\n// HybridCache: BOTH! Fast local + shared distributed",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`AddHybridCache()`**: Registers HybridCache in DI. Automatically uses IDistributedCache if configured (Redis, SQL Server, etc.).\n\n**`GetOrCreateAsync(key, factory)`**: The core method. Checks L1 (memory), then L2 (distributed), then runs factory. Stores result in both caches.\n\n**`HybridCacheEntryOptions`**: Configure per-entry. Expiration (total TTL), LocalCacheExpiration (L1 TTL), Flags (skip local/distributed).\n\n**`tags: [\"tag1\", \"tag2\"]`**: New in .NET 10! Tag entries for bulk invalidation. RemoveByTagAsync(\"tag\") removes all entries with that tag.\n\n**Stampede protection**: Built-in! Multiple concurrent requests for same key = only one factory call. Others wait for result. No thundering herd!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-12-08-challenge-01",
              "title": "Practice Challenge",
              "description": "Implement HybridCache patterns.",
              "instructions": "Demonstrate HybridCache usage!\n\n1. Show Program.cs setup with Redis backend\n2. Show GetOrCreateAsync usage in a service\n3. Demonstrate tagging for cache invalidation\n4. Explain stampede protection\n5. Compare to IMemoryCache and IDistributedCache\n6. Show when to use each caching approach\n\nThis is the modern way to cache in .NET!",
              "starterCode": "Console.WriteLine(\"=== HYBRIDCACHE (MODERN CACHING) ===\");\n\nConsole.WriteLine(\"\\n--- SETUP ---\");\n// TODO: Show Program.cs configuration\n\nConsole.WriteLine(\"\\n--- USAGE ---\");\n// TODO: Show GetOrCreateAsync\n\nConsole.WriteLine(\"\\n--- TAGGING ---\");\n// TODO: Show tag-based invalidation\n\nConsole.WriteLine(\"\\n--- STAMPEDE PROTECTION ---\");\n// TODO: Explain automatic protection\n\nConsole.WriteLine(\"\\n--- COMPARISON ---\");\n// TODO: Compare caching approaches",
              "solution": "Console.WriteLine(\"=== HYBRIDCACHE (MODERN CACHING) ===\");\nConsole.WriteLine(\"Two-level caching: L1 (memory) + L2 (distributed)\");\n\nConsole.WriteLine(\"\\n--- SETUP (Program.cs) ---\");\nConsole.WriteLine(@\"\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add HybridCache\nbuilder.Services.AddHybridCache(options =>\n{\n    options.MaximumPayloadBytes = 1024 * 1024; // 1MB\n});\n\n// Add Redis as L2 (distributed) cache\nbuilder.Services.AddStackExchangeRedisCache(options =>\n{\n    options.Configuration = \"\"localhost:6379\"\";\n});\n\");\n\nConsole.WriteLine(\"\\n--- USAGE (Service) ---\");\nConsole.WriteLine(@\"\npublic class ProductService(HybridCache cache, AppDbContext db)\n{\n    public async Task<Product?> GetProductAsync(int id)\n    {\n        return await cache.GetOrCreateAsync(\n            $\"\"product:{id}\"\",  // Key\n            async token => await db.Products.FindAsync(id, token),\n            new HybridCacheEntryOptions\n            {\n                Expiration = TimeSpan.FromMinutes(5),      // Total TTL\n                LocalCacheExpiration = TimeSpan.FromMinutes(1) // L1 TTL\n            }\n        );\n    }\n}\n\");\n\nConsole.WriteLine(\"\\n--- TAGGING (.NET 10 Feature!) ---\");\nConsole.WriteLine(@\"\n// Add with tags\nawait cache.GetOrCreateAsync(\n    \"\"products:electronics\"\",\n    async token => await db.Products.Where(p => p.Category == \"\"Electronics\"\").ToListAsync(),\n    options,\n    tags: new[] { \"\"products\"\", \"\"category:electronics\"\" }\n);\n\n// Invalidate ALL products at once!\nawait cache.RemoveByTagAsync(\"\"products\"\");\n\n// Or just one category\nawait cache.RemoveByTagAsync(\"\"category:electronics\"\");\n\");\n\nConsole.WriteLine(\"\\n--- STAMPEDE PROTECTION ---\");\nConsole.WriteLine(\"Scenario: Cache miss, 1000 concurrent requests\");\nConsole.WriteLine(\"\");\nConsole.WriteLine(\"WITHOUT HybridCache:\");\nConsole.WriteLine(\"  1000 database queries simultaneously! (stampede)\");\nConsole.WriteLine(\"\");\nConsole.WriteLine(\"WITH HybridCache:\");\nConsole.WriteLine(\"  1 database query, 999 requests wait for result\");\nConsole.WriteLine(\"  Automatic! No extra code needed.\");\n\nConsole.WriteLine(\"\\n--- COMPARISON ---\");\nConsole.WriteLine(\"+---------------------+--------+-----------+----------+\");\nConsole.WriteLine(\"| Feature             | Memory | Distrib.  | Hybrid   |\");\nConsole.WriteLine(\"+---------------------+--------+-----------+----------+\");\nConsole.WriteLine(\"| Speed               | Fast   | Slower    | Fast     |\");\nConsole.WriteLine(\"| Shared across pods  | No     | Yes       | Yes      |\");\nConsole.WriteLine(\"| Survives restart    | No     | Yes       | Yes (L2) |\");\nConsole.WriteLine(\"| Stampede protection | No     | No        | YES!     |\");\nConsole.WriteLine(\"| Tagging             | No     | No        | YES!     |\");\nConsole.WriteLine(\"+---------------------+--------+-----------+----------+\");\n\nConsole.WriteLine(\"\\n--- WHEN TO USE ---\");\nConsole.WriteLine(\"IMemoryCache: Single server, simple caching\");\nConsole.WriteLine(\"IDistributedCache: Multi-server, need sharing\");\nConsole.WriteLine(\"HybridCache: The modern default! Best of both worlds.\");",
              "language": "csharp",
              "testCases": [
                {"id": "test-1", "description": "Output contains 'HYBRIDCACHE'", "expectedOutput": "HYBRIDCACHE", "isVisible": true},
                {"id": "test-2", "description": "Output contains 'GetOrCreateAsync'", "expectedOutput": "GetOrCreateAsync", "isVisible": true},
                {"id": "test-3", "description": "Output contains 'TAGGING'", "expectedOutput": "TAGGING", "isVisible": true},
                {"id": "test-4", "description": "Output contains 'STAMPEDE'", "expectedOutput": "STAMPEDE", "isVisible": true},
                {"id": "test-5", "description": "Output contains 'RemoveByTagAsync'", "expectedOutput": "RemoveByTagAsync", "isVisible": true},
                {"id": "test-6", "description": "Output contains 'L1'", "expectedOutput": "L1", "isVisible": true}
              ],
              "hints": [
                {"level": 1, "text": "Setup: AddHybridCache() + AddStackExchangeRedisCache(). Usage: cache.GetOrCreateAsync(key, factory, options). Tagging: tags parameter + RemoveByTagAsync()."},
                {"level": 2, "text": "HybridCache checks L1 (memory) first, then L2 (Redis), then runs factory. Stores in both levels automatically."},
                {"level": 3, "text": "Stampede protection: Multiple callers for same key = one factory call. Others await the result. Built-in, no code needed!"},
                {"level": 4, "text": "LocalCacheExpiration vs Expiration: LocalCacheExpiration is L1 TTL (shorter), Expiration is total TTL. L1 expires faster for freshness."},
                {"level": 5, "text": "Use tagging for related data: tag all user data with 'user:{id}', then RemoveByTagAsync('user:{id}') on user update."}
              ],
              "commonMistakes": [
                {"mistake": "Not configuring distributed cache", "consequence": "HybridCache works without L2, but you lose shared caching and survive-restart benefits.", "correction": "Add AddStackExchangeRedisCache() or similar for L2 distributed cache."},
                {"mistake": "Short expiration everywhere", "consequence": "Cache hits drop, database load stays high. Defeats purpose of caching.", "correction": "Use appropriate TTLs. Products: minutes-hours. User sessions: shorter. Static content: longer."},
                {"mistake": "Not using tags", "consequence": "Must invalidate keys one by one. Hard to invalidate related data together.", "correction": "Use tags for related data groups. RemoveByTagAsync() invalidates all at once."},
                {"mistake": "Caching user-specific data globally", "consequence": "User A sees User B's data! Security and privacy violation.", "correction": "Include user ID in cache key: 'user:{userId}:profile' not just 'profile'."}
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-13",
      "title": "Building Interactive UIs with Blazor",
      "description": "Create modern web user interfaces using Blazor, writing interactive components with C# instead of JavaScript.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-13-01",
          "title": "What is Blazor? (C# in the Browser!)",
          "moduleId": "module-13",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine building a website:\n\nOLD WAY:\n• HTML for structure\n• CSS for styling\n• JavaScript for interactivity\n• C# on server (backend only)\n\nBLAZOR WAY:\n• HTML for structure\n• CSS for styling\n• C# for interactivity! (No JavaScript required!)\n• C# everywhere - frontend AND backend!\n\nBlazor = Write interactive web UIs using C# instead of JavaScript!\n\nThink of it like:\n• React/Vue/Angular = JavaScript frameworks\n• Blazor = C# framework (same power, different language!)\n\nBlazor lets you:\n✅ Use C# skills for web development\n✅ Share code between client and server\n✅ Build SPAs (Single Page Applications)\n✅ Rich interactivity without JavaScript\n✅ Component-based architecture\n\nTwo main hosting models:\n1. Blazor Server - C# runs on server, UI updates over SignalR\n2. Blazor WebAssembly - C# runs IN BROWSER via WebAssembly\n3. Blazor Auto (.NET 8) - Best of both!\n\nThink: Blazor = 'Build modern web apps with C#, not JavaScript!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// BLAZOR COMPONENT (.razor file)\n// Counter.razor\n\n<h3>Counter Example</h3>\n\n<p>Current count: @currentCount</p>\n\n<button class=\"btn btn-primary\" @onclick=\"IncrementCount\">Click me</button>\n\n@code {\n    private int currentCount = 0;\n\n    private void IncrementCount()\n    {\n        currentCount++;  // C# code!\n    }\n}\n\n// WHAT MAKES THIS SPECIAL?\n// 1. HTML markup at top\n// 2. @code block with C# logic\n// 3. @onclick binds to C# method (not JavaScript!)\n// 4. @currentCount displays C# variable\n\n// COMPARISON TO JAVASCRIPT FRAMEWORKS\n\n// React (JavaScript):\n/*\nimport { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  );\n}\n*/\n\n// Blazor (C#):\n/*\n<p>Count: @count</p>\n<button @onclick=\"() => count++\">Click me</button>\n\n@code {\n    private int count = 0;\n}\n*/\n\n// BENEFITS OF BLAZOR\n// ✅ One language (C#) for everything\n// ✅ Full .NET ecosystem (NuGet, LINQ, async/await)\n// ✅ Type safety (compile-time errors!)\n// ✅ Great tooling (Visual Studio, Rider)\n// ✅ Code sharing (models, logic, validation)\n// ✅ No JavaScript transpiling/bundling complexity",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`.razor file`**: Blazor components use .razor extension. Mix HTML markup with C# code. Top part = markup, @code block = C# logic.\n\n**`@variable`**: @ symbol in markup accesses C# variables/expressions. @currentCount displays the value. @DateTime.Now.Year shows current year.\n\n**`@onclick=\"MethodName\"`**: Event binding with @. @onclick for clicks, @onchange for input changes. Binds to C# methods, not JavaScript!\n\n**`@code { }`**: Contains C# logic for component. Define fields, properties, methods here. Private by default. This is your component's brain!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create your first Blazor component!\n\n1. Create a 'Greeting' component structure:\n   - Title: \"Welcome to Blazor!\"\n   - Display current year using @DateTime.Now.Year\n   - Input field for user's name\n   - Button \"Greet Me\"\n   - When clicked, display \"Hello, [name]! Welcome to Blazor!\"\n\n2. Component should have:\n   - HTML markup section\n   - @code block with:\n     - string name field\n     - string greeting field\n     - GreetUser() method that sets greeting\n\n3. Print the complete component structure\n\nThis demonstrates Blazor's syntax and interactivity!",
              "starterCode": "// Greeting.razor\n\n<h3>Welcome to Blazor!</h3>\n\n<p>Year: @DateTime.Now.Year</p>\n\n<div>\n    <label>Your Name:</label>\n    <!-- Input field here -->\n</div>\n\n<button @onclick=\"GreetUser\">Greet Me</button>\n\n<p>@greeting</p>\n\n@code {\n    private string name = \"\";\n    private string greeting = \"\";\n    \n    private void GreetUser()\n    {\n        // Set greeting message\n    }\n}",
              "solution": "// Greeting.razor\nusing System;\n\nConsole.WriteLine(@\"\n=== BLAZOR COMPONENT EXAMPLE ===\");\nConsole.WriteLine(@\"\n<h3>Welcome to Blazor!</h3>\n\n<p>Year: @DateTime.Now.Year</p>\n\n<div>\n    <label>Your Name:</label>\n    <input @bind=\"\"name\"\" placeholder=\"\"Enter your name\"\" />\n</div>\n\n<button class=\"\"btn btn-primary\"\" @onclick=\"\"GreetUser\"\">Greet Me</button>\n\n@if (!string.IsNullOrEmpty(greeting))\n{\n    <div class=\"\"alert alert-success\"\">\n        <p>@greeting</p>\n    </div>\n}\n\n@code {\n    private string name = \"\"\"\";\n    private string greeting = \"\"\"\";\n    \n    private void GreetUser()\n    {\n        if (!string.IsNullOrEmpty(name))\n        {\n            greeting = $\"\"Hello, {name}! Welcome to Blazor!\"\";\n        }\n        else\n        {\n            greeting = \"\"Please enter your name first!\"\";\n        }\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== HOW IT WORKS ===\");\nConsole.WriteLine(\"1. @bind=\\\"name\\\" creates two-way data binding\");\nConsole.WriteLine(\"2. User types → name variable updates automatically\");\nConsole.WriteLine(\"3. @onclick=\\\"GreetUser\\\" calls C# method on click\");\nConsole.WriteLine(\"4. GreetUser() updates greeting variable\");\nConsole.WriteLine(\"5. @greeting displays the message (re-renders automatically!)\");\nConsole.WriteLine(\"\\n✓ All logic in C#, no JavaScript needed!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"BLAZOR COMPONENT\"",
                  "expectedOutput": "BLAZOR COMPONENT",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"Welcome to Blazor\"",
                  "expectedOutput": "Welcome to Blazor",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"@code\"",
                  "expectedOutput": "@code",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"GreetUser\"",
                  "expectedOutput": "GreetUser",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "@bind for two-way binding on input. @onclick for button click. Use string interpolation in C# method. @if for conditional rendering. All C# code goes in @code block!"
                },
                {
                  "level": 2,
                  "text": "Forgetting @ symbol: In markup, use @ to access C# variables! Just 'currentCount' won't work, need '@currentCount'. @ tells Blazor 'this is C#!'"
                },
                {
                  "level": 3,
                  "text": "JavaScript thinking: Don't add .js files or write JavaScript! Blazor uses C# for everything. @onclick calls C# methods, not JS functions."
                },
                {
                  "level": 4,
                  "text": "Quotes in @onclick: Use @onclick=\"MethodName\" (no parentheses unless passing parameters). For lambda: @onclick=\"() => count++\" with quotes around entire expression."
                },
                {
                  "level": 5,
                  "text": "Component naming: Component files must start with uppercase letter! Counter.razor (correct), counter.razor (wrong). This is C# convention."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting @ symbol",
                  "consequence": "In markup, use @ to access C# variables! Just 'currentCount' won't work, need '@currentCount'. @ tells Blazor 'this is C#!'",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "JavaScript thinking",
                  "consequence": "Don't add .js files or write JavaScript! Blazor uses C# for everything. @onclick calls C# methods, not JS functions.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Quotes in @onclick",
                  "consequence": "Use @onclick=\"MethodName\" (no parentheses unless passing parameters). For lambda: @onclick=\"() => count++\" with quotes around entire expression.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Component naming",
                  "consequence": "Component files must start with uppercase letter! Counter.razor (correct), counter.razor (wrong). This is C# convention.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-02",
          "title": "Blazor Rendering Modes (.NET 8)",
          "moduleId": "module-13",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine watching a movie:\n\nSTREAMING (Blazor Server):\n• Movie plays on Netflix server\n• Only video frames sent to your screen\n• Fast startup, low download\n• Need constant internet connection\n\nDOWNLOADED (Blazor WebAssembly):\n• Download entire movie to device\n• Plays offline on your device\n• Large download, but works offline\n• Device does all the work\n\nSMART MODE (Blazor Auto - .NET 8 NEW!):\n• Starts streaming immediately (fast!)\n• Downloads in background\n• Switches to local playback when ready\n• Best of both worlds!\n\n.NET 8 introduces UNIFIED RENDERING:\n• Static SSR (Server-Side Rendering)\n• Interactive Server\n• Interactive WebAssembly  \n• Interactive Auto (new!)\n\nChoose per component or page!\n\nThink: Rendering mode = 'WHERE does C# code run - server or browser?'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// .NET 8 RENDERING MODES\n\n// 1. STATIC SERVER-SIDE RENDERING (SSR)\n// Default - no interactivity, fast SEO\n@page \"/products\"\n@rendermode RenderMode.Static\n\n<h3>Product List</h3>\n@foreach (var product in products)\n{\n    <p>@product.Name</p>\n}\n\n// 2. INTERACTIVE SERVER\n// C# runs on server, UI updates via SignalR\n@page \"/counter\"\n@rendermode InteractiveServer\n\n<button @onclick=\"IncrementCount\">Count: @count</button>\n\n@code {\n    private int count = 0;\n    private void IncrementCount() => count++;\n}\n\n// 3. INTERACTIVE WEBASSEMBLY\n// C# runs in browser via WebAssembly\n@page \"/calculator\"\n@rendermode InteractiveWebAssembly\n\n<button @onclick=\"Calculate\">Calculate</button>\n\n// 4. INTERACTIVE AUTO (.NET 8 - BEST!)\n// Starts with Server, switches to WASM when ready\n@page \"/dashboard\"\n@rendermode InteractiveAuto\n\n<RealTimeChart />  // Server initially, then WASM\n\n// COMPARISON TABLE\n/*\n                    Server      WebAssembly     Auto (.NET 8)\nC# runs on:         Server      Browser         Both\nInitial load:       Fast        Slow            Fast\nOffline:            No          Yes             Yes*\nScalability:        Lower       Higher          Best\nLatency:            Network     None            Hybrid\nBest for:           Forms       SPAs            Everything\n*/\n\n// CONFIGURING IN PROGRAM.CS (.NET 8)\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add Blazor components with all render modes\nbuilder.Services.AddRazorComponents()\n    .AddInteractiveServerComponents()\n    .AddInteractiveWebAssemblyComponents();\n\nvar app = builder.Build();\n\n// Map Blazor with all render modes enabled\napp.MapRazorComponents<App>()\n    .AddInteractiveServerRenderMode()\n    .AddInteractiveWebAssemblyRenderMode()\n    .AddInteractiveAutoRenderMode();",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`@rendermode InteractiveServer`**: .NET 8 syntax for render mode. C# runs on server. UI updates over SignalR connection. Low initial payload, requires connection.\n\n**`@rendermode InteractiveWebAssembly`**: C# compiles to WebAssembly, runs in browser. Large download, but fully client-side. Works offline after load!\n\n**`@rendermode InteractiveAuto`**: NEW in .NET 8! Starts with Server (fast), downloads WASM in background, seamlessly switches. Best user experience!\n\n**`Static SSR`**: No interactivity, pure HTML. Like traditional web pages. Fast, SEO-friendly. Use for content pages, blogs, documentation."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Understand Blazor rendering modes!\n\n1. Create examples showing when to use each mode:\n\n   STATIC SSR:\n   - Product catalog page\n   - Blog posts\n   - Why: Fast, SEO, no interactivity needed\n\n   INTERACTIVE SERVER:\n   - Admin dashboard\n   - Form with validation\n   - Why: Complex logic on server, small payload\n\n   INTERACTIVE WEBASSEMBLY:\n   - Image editor\n   - Game\n   - Why: Works offline, no server calls\n\n   INTERACTIVE AUTO:\n   - E-commerce site\n   - Social media feed\n   - Why: Fast start, then offline capability\n\n2. Print comparison table\n3. Show .NET 8 configuration code\n4. Explain trade-offs",
              "starterCode": "using System;\n\nConsole.WriteLine(\"=== BLAZOR RENDERING MODES (.NET 8) ===\");\n\nConsole.WriteLine(\"\\n1. STATIC SSR (Server-Side Rendering)\");\nConsole.WriteLine(\"   Use case: Product catalog, blog posts\");\nConsole.WriteLine(\"   Code: @rendermode RenderMode.Static\");\nConsole.WriteLine(\"   Pros: Fast, SEO-friendly, low server load\");\nConsole.WriteLine(\"   Cons: No interactivity\");\n\n// Add other modes...\n\nConsole.WriteLine(\"\\n=== COMPARISON TABLE ===\");\nConsole.WriteLine(\"Feature          | Server  | WASM    | Auto\");\nConsole.WriteLine(\"-----------------|---------|---------|--------\");\n// Fill in comparison\n\nConsole.WriteLine(\"\\n=== .NET 8 CONFIGURATION ===\");\nConsole.WriteLine(\"builder.Services.AddRazorComponents()\");\n// Show configuration",
              "solution": "using System;\n\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  BLAZOR RENDERING MODES (.NET 8)\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\n\nConsole.WriteLine(\"1. STATIC SSR (Server-Side Rendering)\");\nConsole.WriteLine(\"   Code: @rendermode RenderMode.Static\");\nConsole.WriteLine(\"   ✓ Use for: Product catalogs, blogs, documentation\");\nConsole.WriteLine(\"   ✓ Pros: Fastest load, best SEO, minimal server resources\");\nConsole.WriteLine(\"   ✗ Cons: No interactivity (like traditional HTML)\");\nConsole.WriteLine(\"   Example: Public product listing page\\n\");\n\nConsole.WriteLine(\"2. INTERACTIVE SERVER\");\nConsole.WriteLine(\"   Code: @rendermode InteractiveServer\");\nConsole.WriteLine(\"   ✓ Use for: Admin dashboards, forms, real-time updates\");\nConsole.WriteLine(\"   ✓ Pros: Small payload, complex logic on server, secure\");\nConsole.WriteLine(\"   ✗ Cons: Requires connection, server load per user\");\nConsole.WriteLine(\"   Example: Admin panel with real-time data\\n\");\n\nConsole.WriteLine(\"3. INTERACTIVE WEBASSEMBLY\");\nConsole.WriteLine(\"   Code: @rendermode InteractiveWebAssembly\");\nConsole.WriteLine(\"   ✓ Use for: Image editors, games, offline apps\");\nConsole.WriteLine(\"   ✓ Pros: Works offline, no server calls, scales infinitely\");\nConsole.WriteLine(\"   ✗ Cons: Large download (5-10MB), slow initial load\");\nConsole.WriteLine(\"   Example: Photo editing tool\\n\");\n\nConsole.WriteLine(\"4. INTERACTIVE AUTO (.NET 8 - RECOMMENDED!)\");\nConsole.WriteLine(\"   Code: @rendermode InteractiveAuto\");\nConsole.WriteLine(\"   ✓ Use for: E-commerce, SPAs, social media\");\nConsole.WriteLine(\"   ✓ Pros: Fast start (Server), then offline (WASM), best UX\");\nConsole.WriteLine(\"   ✗ Cons: More complex setup\");\nConsole.WriteLine(\"   Example: Modern web application\\n\");\n\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  COMPARISON TABLE\");\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"Feature          | Static | Server  | WASM    | Auto\");\nConsole.WriteLine(\"-----------------|--------|---------|---------|--------\");\nConsole.WriteLine(\"Initial Load     | ⚡⚡⚡  | ⚡⚡    | 🐌      | ⚡⚡\");\nConsole.WriteLine(\"Interactivity    | ❌     | ✅      | ✅      | ✅\");\nConsole.WriteLine(\"Offline Support  | ❌     | ❌      | ✅      | ✅\");\nConsole.WriteLine(\"Server Load      | Low    | High    | None    | Medium\");\nConsole.WriteLine(\"SEO              | ⭐⭐⭐ | ⭐⭐    | ⭐      | ⭐⭐\");\nConsole.WriteLine(\"Download Size    | 0 KB   | ~100KB  | 5-10MB  | ~100KB\");\n\nConsole.WriteLine(\"\\n═══════════════════════════════════════════\");\nConsole.WriteLine(\"  .NET 8 CONFIGURATION\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\nConsole.WriteLine(\"// Program.cs\");\nConsole.WriteLine(\"var builder = WebApplication.CreateBuilder(args);\");\nConsole.WriteLine(\"\");\nConsole.WriteLine(\"// Enable all render modes\");\nConsole.WriteLine(\"builder.Services.AddRazorComponents()\");\nConsole.WriteLine(\"    .AddInteractiveServerComponents()\");\nConsole.WriteLine(\"    .AddInteractiveWebAssemblyComponents();\");\nConsole.WriteLine(\"\");\nConsole.WriteLine(\"var app = builder.Build();\");\nConsole.WriteLine(\"\");\nConsole.WriteLine(\"// Map with all render modes\");\nConsole.WriteLine(\"app.MapRazorComponents<App>()\");\nConsole.WriteLine(\"    .AddInteractiveServerRenderMode()\");\nConsole.WriteLine(\"    .AddInteractiveWebAssemblyRenderMode()\");\nConsole.WriteLine(\"    .AddInteractiveAutoRenderMode();\");\n\nConsole.WriteLine(\"\\n🎯 RECOMMENDATION: Use InteractiveAuto for most apps!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"STATIC SSR\"",
                  "expectedOutput": "STATIC SSR",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"INTERACTIVE SERVER\"",
                  "expectedOutput": "INTERACTIVE SERVER",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"WEBASSEMBLY\"",
                  "expectedOutput": "WEBASSEMBLY",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"AUTO\"",
                  "expectedOutput": "AUTO",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"COMPARISON\"",
                  "expectedOutput": "COMPARISON",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \".NET 8\"",
                  "expectedOutput": ".NET 8",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Static = no interactivity. Server = C# on server. WASM = C# in browser. Auto = starts Server, becomes WASM. Choose based on: speed, interactivity, offline needs."
                },
                {
                  "level": 2,
                  "text": "Using wrong mode: Static SSR for interactive app = no @onclick works! Must use Interactive* modes for interactivity. Static is like traditional HTML."
                },
                {
                  "level": 3,
                  "text": "WASM download size: WebAssembly downloads .NET runtime + your app (5-10MB!). First load is slow. Use Auto mode to start fast, switch to WASM later."
                },
                {
                  "level": 4,
                  "text": "Server scalability: InteractiveServer creates SignalR connection per user. 10,000 users = 10,000 connections! WASM scales better (runs in browser)."
                },
                {
                  "level": 5,
                  "text": "Mixing modes: Can use different modes for different components! Product list (Static), shopping cart (Server), image editor (WASM). Mix and match!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Using wrong mode",
                  "consequence": "Static SSR for interactive app = no @onclick works! Must use Interactive* modes for interactivity. Static is like traditional HTML.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "WASM download size",
                  "consequence": "WebAssembly downloads .NET runtime + your app (5-10MB!). First load is slow. Use Auto mode to start fast, switch to WASM later.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Server scalability",
                  "consequence": "InteractiveServer creates SignalR connection per user. 10,000 users = 10,000 connections! WASM scales better (runs in browser).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Mixing modes",
                  "consequence": "Can use different modes for different components! Product list (Static), shopping cart (Server), image editor (WASM). Mix and match!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-03",
          "title": "Creating Razor Components (Building Blocks)",
          "moduleId": "module-13",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Components are like LEGO blocks:\n\n• Each block (component) is self-contained\n• Blocks snap together to build complex structures\n• Reuse the same block many times\n• Each block has its own logic and appearance\n\nButton.razor = reusable button component\nCard.razor = reusable card component  \nNavBar.razor = reusable navigation\n\nComponents have:\n• MARKUP (HTML) - What it looks like\n• LOGIC (@code) - How it behaves\n• PARAMETERS - Customization options\n• EVENTS - Communication with parents\n\nThink: Component = 'Self-contained, reusable UI piece with its own HTML, CSS, and C# logic!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// SIMPLE COMPONENT\n// Alert.razor\n<div class=\"alert alert-info\">\n    <p>@Message</p>\n</div>\n\n@code {\n    [Parameter]\n    public string Message { get; set; } = \"\";\n}\n\n// USING THE COMPONENT\n// Home.razor\n<Alert Message=\"Welcome to Blazor!\" />\n<Alert Message=\"This is reusable!\" />\n\n// COMPONENT WITH LOGIC\n// Counter.razor\n<div class=\"counter-box\">\n    <h4>@Title</h4>\n    <p>Count: @currentCount</p>\n    <button @onclick=\"Increment\">+</button>\n    <button @onclick=\"Decrement\">-</button>\n    <button @onclick=\"Reset\">Reset</button>\n</div>\n\n@code {\n    [Parameter]\n    public string Title { get; set; } = \"Counter\";\n    \n    [Parameter]\n    public int InitialValue { get; set; } = 0;\n    \n    private int currentCount;\n    \n    protected override void OnInitialized()\n    {\n        currentCount = InitialValue;\n    }\n    \n    private void Increment() => currentCount++;\n    private void Decrement() => currentCount--;\n    private void Reset() => currentCount = InitialValue;\n}\n\n// USING WITH PARAMETERS\n<Counter Title=\"Score\" InitialValue=\"100\" />\n<Counter Title=\"Lives\" InitialValue=\"3\" />\n\n// COMPONENT LIFECYCLE\n/*\n1. OnInitialized() - Component created\n2. OnParametersSet() - Parameters received\n3. Render - UI drawn\n4. OnAfterRender() - After render complete\n5. Dispose() - Component destroyed\n*/",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`[Parameter]`**: Makes property a component parameter. Can be set from parent: <MyComponent Title=\"Hello\" />. Must be public property with [Parameter] attribute.\n\n**`OnInitialized()`**: Lifecycle method called once when component created. Use for initialization, loading data. Override with 'protected override void OnInitialized()'.\n\n**`<ComponentName />`**: Use component in parent. Self-closing if no child content. Pass parameters as attributes: <Alert Message=\"text\" />.\n\n**`Component file structure`**: .razor file with: HTML markup at top, @code block at bottom. Component name MUST match filename! Alert.razor contains Alert component."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a reusable ProductCard component!\n\n1. ProductCard.razor component:\n   - Parameters: string Name, decimal Price, string ImageUrl, bool InStock\n   - Display product in card layout\n   - Show \"In Stock\" or \"Out of Stock\" badge\n   - Button \"Add to Cart\" (only enabled if InStock)\n   - OnAddToCart event callback\n\n2. Create ProductList component that uses ProductCard:\n   - Display 3 ProductCard components\n   - Handle AddToCart event\n   - Show count of items in cart\n\n3. Print both component structures\n\nThis demonstrates component reusability!",
              "starterCode": "// ProductCard.razor\n<div class=\"card\">\n    <img src=\"@ImageUrl\" alt=\"@Name\" />\n    <h4>@Name</h4>\n    <p class=\"price\">$@Price</p>\n    \n    @if (InStock)\n    {\n        <span class=\"badge-success\">In Stock</span>\n        <button @onclick=\"HandleAddToCart\">Add to Cart</button>\n    }\n    else\n    {\n        <span class=\"badge-danger\">Out of Stock</span>\n    }\n</div>\n\n@code {\n    [Parameter]\n    public string Name { get; set; } = \"\";\n    \n    [Parameter]\n    public decimal Price { get; set; }\n    \n    [Parameter]\n    public string ImageUrl { get; set; } = \"\";\n    \n    [Parameter]\n    public bool InStock { get; set; }\n    \n    [Parameter]\n    public EventCallback OnAddToCart { get; set; }\n    \n    private async Task HandleAddToCart()\n    {\n        await OnAddToCart.InvokeAsync();\n    }\n}\n\n// ProductList.razor\n<h3>Our Products</h3>\n\n<div class=\"product-grid\">\n    <ProductCard \n        Name=\"Laptop\" \n        Price=\"999.99m\" \n        ImageUrl=\"laptop.jpg\"\n        InStock=\"true\"\n        OnAddToCart=\"() => AddToCart(\\\"Laptop\\\")\" />\n    \n    <!-- Add 2 more ProductCard components -->\n</div>\n\n<p>Cart Items: @cartCount</p>\n\n@code {\n    private int cartCount = 0;\n    \n    private void AddToCart(string productName)\n    {\n        cartCount++;\n        // In real app: add to cart service\n    }\n}",
              "solution": "using System;\n\nConsole.WriteLine(@\"\n=== PRODUCTCARD COMPONENT ===\");\nConsole.WriteLine(@\"\n// ProductCard.razor\n<div class=\"\"card\"\">\n    <img src=\"\"@ImageUrl\"\" alt=\"\"@Name\"\" style=\"\"width:100%\"\" />\n    <div class=\"\"card-body\"\">\n        <h4>@Name</h4>\n        <p class=\"\"price\"\" style=\"\"font-size:1.5em\"\">$@Price.ToString(\\\"\"F2\\\"\")</p>\n        \n        @if (InStock)\n        {\n            <span class=\"\"badge bg-success\"\">✓ In Stock</span>\n            <button class=\"\"btn btn-primary\"\" @onclick=\"\"HandleAddToCart\"\">Add to Cart</button>\n        }\n        else\n        {\n            <span class=\"\"badge bg-danger\"\">✗ Out of Stock</span>\n            <button class=\"\"btn btn-secondary\"\" disabled>Unavailable</button>\n        }\n    </div>\n</div>\n\n@code {\n    [Parameter]\n    public string Name { get; set; } = \"\"\"\";\n    \n    [Parameter]\n    public decimal Price { get; set; }\n    \n    [Parameter]\n    public string ImageUrl { get; set; } = \"\"\"\";\n    \n    [Parameter]\n    public bool InStock { get; set; }\n    \n    [Parameter]\n    public EventCallback<string> OnAddToCart { get; set; }\n    \n    private async Task HandleAddToCart()\n    {\n        await OnAddToCart.InvokeAsync(Name);\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== PRODUCTLIST COMPONENT ===\");\nConsole.WriteLine(@\"\n// ProductList.razor\n<div class=\"\"container\"\">\n    <h3>Our Products</h3>\n    \n    <div class=\"\"alert alert-info\"\">\n        <strong>Cart Items: @cartCount</strong>\n    </div>\n    \n    <div class=\"\"row\"\">\n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Laptop\"\" \n                Price=\"\"999.99m\"\" \n                ImageUrl=\"\"laptop.jpg\"\"\n                InStock=\"\"true\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n        \n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Mouse\"\" \n                Price=\"\"29.99m\"\" \n                ImageUrl=\"\"mouse.jpg\"\"\n                InStock=\"\"true\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n        \n        <div class=\"\"col-md-4\"\">\n            <ProductCard \n                Name=\"\"Monitor\"\" \n                Price=\"\"399.99m\"\" \n                ImageUrl=\"\"monitor.jpg\"\"\n                InStock=\"\"false\"\"\n                OnAddToCart=\"\"AddToCart\"\" />\n        </div>\n    </div>\n</div>\n\n@code {\n    private int cartCount = 0;\n    private List<string> cartItems = new();\n    \n    private void AddToCart(string productName)\n    {\n        cartCount++;\n        cartItems.Add(productName);\n        Console.WriteLine($\"\"Added {productName} to cart! Total: {cartCount}\"\");\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== KEY CONCEPTS ===\");\nConsole.WriteLine(\"✓ [Parameter] - Makes property configurable from parent\");\nConsole.WriteLine(\"✓ EventCallback - Parent can respond to child events\");\nConsole.WriteLine(\"✓ Component reuse - Same ProductCard, different data\");\nConsole.WriteLine(\"✓ Conditional rendering - @if for In Stock badge\");\nConsole.WriteLine(\"\\n✓ ONE component definition → MANY instances!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"ProductCard\"",
                  "expectedOutput": "ProductCard",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"ProductList\"",
                  "expectedOutput": "ProductList",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"[Parameter]\"",
                  "expectedOutput": "[Parameter]",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"EventCallback\"",
                  "expectedOutput": "EventCallback",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"InStock\"",
                  "expectedOutput": "InStock",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "[Parameter] for inputs. EventCallback<T> for events. @if for conditional rendering. Pass parameters as attributes. await callback.InvokeAsync() to trigger parent method."
                },
                {
                  "level": 2,
                  "text": "Parameter must be public: [Parameter] on private property doesn't work! Must be 'public string Name { get; set; }'. Public + [Parameter] attribute required."
                },
                {
                  "level": 3,
                  "text": "Forgetting @: In markup, '@Name' accesses parameter. Just 'Name' without @ is treated as literal text! Always use @ for C# variables/properties."
                },
                {
                  "level": 4,
                  "text": "EventCallback type: EventCallback (no data) or EventCallback<T> (with data). Use InvokeAsync() to trigger: 'await OnClick.InvokeAsync(value);'."
                },
                {
                  "level": 5,
                  "text": "Component filename mismatch: Alert.razor must contain component named Alert. Filename and component name MUST match exactly (case-sensitive!)."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Parameter must be public",
                  "consequence": "[Parameter] on private property doesn't work! Must be 'public string Name { get; set; }'. Public + [Parameter] attribute required.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting @",
                  "consequence": "In markup, '@Name' accesses parameter. Just 'Name' without @ is treated as literal text! Always use @ for C# variables/properties.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "EventCallback type",
                  "consequence": "EventCallback (no data) or EventCallback<T> (with data). Use InvokeAsync() to trigger: 'await OnClick.InvokeAsync(value);'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Component filename mismatch",
                  "consequence": "Alert.razor must contain component named Alert. Filename and component name MUST match exactly (case-sensitive!).",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-04",
          "title": "Component Parameters (Customization)",
          "moduleId": "module-13",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Parameters are like function arguments for components!\n\nFunction with parameters:\nvoid Greet(string name, int age) { }\n\nComponent with parameters:\n<Person Name=\"Alice\" Age=\"30\" />\n\nParameters let you:\n✅ Customize component behavior\n✅ Pass data from parent to child\n✅ Make components reusable\n✅ Configure appearance/logic\n\nTypes of parameters:\n• Simple values (string, int, bool)\n• Complex objects (Product, Customer)\n• Collections (List<T>, arrays)\n• Event callbacks (EventCallback<T>)\n• RenderFragments (child content)\n\nThink: Parameters = 'The inputs that make your component flexible and reusable!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// SIMPLE PARAMETERS\n@code {\n    [Parameter]\n    public string Title { get; set; } = \"Default Title\";\n    \n    [Parameter]\n    public int Count { get; set; } = 0;\n    \n    [Parameter]\n    public bool IsVisible { get; set; } = true;\n}\n\n// COMPLEX OBJECT PARAMETER\npublic class Product {\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n}\n\n@code {\n    [Parameter]\n    public Product ProductData { get; set; }\n}\n<p>@ProductData.Name: $@ProductData.Price</p>\n\n// COLLECTION PARAMETER\n@code {\n    [Parameter]\n    public List<string> Items { get; set; } = new();\n}\n@foreach (var item in Items) {\n    <li>@item</li>\n}\n\n// EVENT CALLBACK PARAMETER\n@code {\n    [Parameter]\n    public EventCallback<int> OnValueChanged { get; set; }\n    \n    private async Task NotifyParent(int value) {\n        await OnValueChanged.InvokeAsync(value);\n    }\n}\n\n// CHILD CONTENT (RENDERFRAGMENT)\n@code {\n    [Parameter]\n    public RenderFragment ChildContent { get; set; }\n}\n<div class=\"card\">\n    @ChildContent\n</div>\n// Usage: <Card><p>This goes inside!</p></Card>\n\n// CASCADING PARAMETERS\n<CascadingValue Value=\"@currentUser\">\n    <ChildComponent />  // Receives currentUser automatically\n</CascadingValue>\n\n@code {\n    [CascadingParameter]\n    public User CurrentUser { get; set; }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`[Parameter] public Type Name { get; set; }`**: Standard parameter. Must be public with [Parameter] attribute. Can set default value with = \"default\". Passed from parent component.\n\n**`EventCallback<T>`**: Parameter for events. T is data type passed to parent. Use InvokeAsync(value) to trigger. EventCallback (no <T>) for no data.\n\n**`RenderFragment`**: Special parameter type for child content. Lets parent pass HTML/components as parameter. Name it 'ChildContent' for default slot.\n\n**`[CascadingParameter]`**: Receives value from CascadingValue ancestor. No need to pass through every level! Useful for themes, user context, etc."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a flexible Button component with many parameters!\n\n1. CustomButton.razor:\n   - [Parameter] string Text\n   - [Parameter] string Color (\"primary\", \"danger\", \"success\")\n   - [Parameter] bool IsDisabled\n   - [Parameter] EventCallback OnClick\n   - Apply Bootstrap classes based on Color\n   - Disable if IsDisabled\n\n2. ButtonGroup.razor that uses CustomButton:\n   - Create 3 buttons: Save (success), Delete (danger), Cancel (primary)\n   - Track which button was clicked\n   - Display last action\n\n3. Demonstrate parameter flexibility\n\nPrint both components!",
              "starterCode": "// CustomButton.razor\n<button \n    class=\"btn btn-@Color\" \n    disabled=\"@IsDisabled\"\n    @onclick=\"HandleClick\">\n    @Text\n</button>\n\n@code {\n    [Parameter]\n    public string Text { get; set; } = \"Button\";\n    \n    [Parameter]\n    public string Color { get; set; } = \"primary\";\n    \n    [Parameter]\n    public bool IsDisabled { get; set; } = false;\n    \n    [Parameter]\n    public EventCallback OnClick { get; set; }\n    \n    private async Task HandleClick()\n    {\n        if (!IsDisabled)\n            await OnClick.InvokeAsync();\n    }\n}\n\n// ButtonGroup.razor\n<div>\n    <h4>Actions</h4>\n    \n    <CustomButton \n        Text=\"Save\" \n        Color=\"success\" \n        OnClick=\"() => HandleAction(\\\"Save\\\")\" />\n    \n    <!-- Add Delete and Cancel buttons -->\n    \n    <p class=\"mt-3\">Last Action: @lastAction</p>\n</div>\n\n@code {\n    private string lastAction = \"None\";\n    \n    private void HandleAction(string action)\n    {\n        lastAction = action;\n    }\n}",
              "solution": "using System;\n\nConsole.WriteLine(@\"\n=== CUSTOMBUTTON COMPONENT ===\");\nConsole.WriteLine(@\"\n// CustomButton.razor\n<button \n    class=\"\"btn btn-@Color @(IsDisabled ? \\\"\"disabled\\\"\" : \"\"\"\")\"\" \n    disabled=\"\"@IsDisabled\"\"\n    @onclick=\"\"HandleClick\"\"\n    style=\"\"margin: 5px;\"\">\n    @Text\n</button>\n\n@code {\n    [Parameter]\n    public string Text { get; set; } = \"\"Button\"\";\n    \n    [Parameter]\n    public string Color { get; set; } = \"\"primary\"\";\n    \n    [Parameter]\n    public bool IsDisabled { get; set; } = false;\n    \n    [Parameter]\n    public EventCallback<string> OnClick { get; set; }\n    \n    private async Task HandleClick()\n    {\n        if (!IsDisabled)\n        {\n            Console.WriteLine($\"\"Button '{Text}' clicked!\"\");\n            await OnClick.InvokeAsync(Text);\n        }\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== BUTTONGROUP COMPONENT ===\");\nConsole.WriteLine(@\"\n// ButtonGroup.razor\n<div class=\"\"button-group-demo\"\">\n    <h4>Action Buttons</h4>\n    \n    <div class=\"\"btn-group\"\">\n        <CustomButton \n            Text=\"\"Save\"\" \n            Color=\"\"success\" \n            IsDisabled=\"\"false\"\n            OnClick=\"\"HandleAction\"\" />\n        \n        <CustomButton \n            Text=\"\"Delete\"\" \n            Color=\"\"danger\" \n            IsDisabled=\"\"false\"\n            OnClick=\"\"HandleAction\"\" />\n        \n        <CustomButton \n            Text=\"\"Cancel\"\" \n            Color=\"\"secondary\" \n            IsDisabled=\"\"false\"\n            OnClick=\"\"HandleAction\"\" />\n        \n        <CustomButton \n            Text=\"\"Disabled\"\" \n            Color=\"\"primary\" \n            IsDisabled=\"\"true\"\n            OnClick=\"\"HandleAction\"\" />\n    </div>\n    \n    <div class=\"\"alert alert-info mt-3\"\">\n        <strong>Last Action:</strong> @lastAction\n    </div>\n    \n    @if (actionCount > 0)\n    {\n        <p><small>Total actions: @actionCount</small></p>\n    }\n</div>\n\n@code {\n    private string lastAction = \"\"None\"\";\n    private int actionCount = 0;\n    \n    private void HandleAction(string buttonText)\n    {\n        lastAction = buttonText;\n        actionCount++;\n        Console.WriteLine($\"\"Action performed: {buttonText} (Total: {actionCount})\"\");\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== PARAMETER BENEFITS ===\");\nConsole.WriteLine(\"✓ ONE CustomButton component\");\nConsole.WriteLine(\"✓ MULTIPLE instances with different:\");\nConsole.WriteLine(\"  - Text (\\\"Save\\\", \\\"Delete\\\", \\\"Cancel\\\")\");\nConsole.WriteLine(\"  - Color (success, danger, secondary)\");\nConsole.WriteLine(\"  - IsDisabled (true/false)\");\nConsole.WriteLine(\"  - OnClick (different actions)\");\nConsole.WriteLine(\"\\n✓ Reusability + Flexibility = Powerful components!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"CustomButton\"",
                  "expectedOutput": "CustomButton",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"ButtonGroup\"",
                  "expectedOutput": "ButtonGroup",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"[Parameter]\"",
                  "expectedOutput": "[Parameter]",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Color\"",
                  "expectedOutput": "Color",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"IsDisabled\"",
                  "expectedOutput": "IsDisabled",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"OnClick\"",
                  "expectedOutput": "OnClick",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "[Parameter] makes property configurable. EventCallback<T> for passing data back. Invoke with await callback.InvokeAsync(data). Bootstrap: btn-primary, btn-success, btn-danger."
                },
                {
                  "level": 2,
                  "text": "Required parameters: No built-in [Required] for Blazor parameters! Check in OnParametersSet(): 'if (string.IsNullOrEmpty(Name)) throw new ArgumentNullException();'."
                },
                {
                  "level": 3,
                  "text": "Parameter change detection: OnParametersSet() called when parent changes parameters. Use to react: 'protected override void OnParametersSet() { UpdateData(); }'."
                },
                {
                  "level": 4,
                  "text": "Two-way binding: For @bind, need [Parameter] Value AND [Parameter] ValueChanged EventCallback<T>. Or use @bind-Value syntax. Naming convention matters!"
                },
                {
                  "level": 5,
                  "text": "Default values: Set default in property initializer or constructor, NOT in OnInitialized! Property initializer: 'public string Color { get; set; } = \"primary\";'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Required parameters",
                  "consequence": "No built-in [Required] for Blazor parameters! Check in OnParametersSet(): 'if (string.IsNullOrEmpty(Name)) throw new ArgumentNullException();'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Parameter change detection",
                  "consequence": "OnParametersSet() called when parent changes parameters. Use to react: 'protected override void OnParametersSet() { UpdateData(); }'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Two-way binding",
                  "consequence": "For @bind, need [Parameter] Value AND [Parameter] ValueChanged EventCallback<T>. Or use @bind-Value syntax. Naming convention matters!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Default values",
                  "consequence": "Set default in property initializer or constructor, NOT in OnInitialized! Property initializer: 'public string Color { get; set; } = \"primary\";'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-05",
          "title": "Event Handling (@onclick, @onchange)",
          "moduleId": "module-13",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Events are like doorbells:\n\nUser clicks button = Someone rings doorbell\nYour C# method runs = You answer the door\n\nBlazor events:\n• @onclick - Button clicks, div clicks\n• @onchange - Input value changes\n• @oninput - Every keystroke\n• @onsubmit - Form submission\n• @onmouseover - Mouse hover\n\nEvent handling:\n1. User interacts (click, type, hover)\n2. Browser fires event\n3. Blazor calls your C# method\n4. Method updates state\n5. UI re-renders automatically!\n\nThink: Events = 'User does something → Your C# code responds!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// CLICK EVENTS\n<button @onclick=\"HandleClick\">Click Me</button>\n<button @onclick=\"() => count++\">Increment</button>\n<button @onclick=\"@(() => DoWork(5))\">Pass Parameter</button>\n\n@code {\n    private void HandleClick() {\n        Console.WriteLine(\"Button clicked!\");\n    }\n    \n    private void DoWork(int value) {\n        Console.WriteLine($\"Working with {value}\");\n    }\n}\n\n// CHANGE EVENTS\n<input @onchange=\"HandleNameChange\" />\n<select @onchange=\"HandleCategoryChange\">\n    <option>Category 1</option>\n</select>\n\n@code {\n    private void HandleNameChange(ChangeEventArgs e) {\n        string newValue = e.Value.ToString();\n        Console.WriteLine($\"Name changed to: {newValue}\");\n    }\n}\n\n// INPUT EVENTS (every keystroke)\n<input @oninput=\"HandleInput\" />\n<p>You typed: @currentInput</p>\n\n@code {\n    private string currentInput = \"\";\n    \n    private void HandleInput(ChangeEventArgs e) {\n        currentInput = e.Value.ToString();\n    }\n}\n\n// KEYBOARD EVENTS\n<input @onkeydown=\"HandleKeyDown\" @onkeyup=\"HandleKeyUp\" />\n\n@code {\n    private void HandleKeyDown(KeyboardEventArgs e) {\n        if (e.Key == \"Enter\") {\n            Console.WriteLine(\"Enter pressed!\");\n        }\n    }\n}\n\n// MOUSE EVENTS\n<div @onmouseover=\"() => isHovered = true\" \n     @onmouseout=\"() => isHovered = false\"\n     class=\"@(isHovered ? \\\"highlight\\\" : \\\"\\\")\">\n    Hover over me!\n</div>\n\n// FORM SUBMIT\n<EditForm Model=\"@person\" OnValidSubmit=\"HandleSubmit\">\n    <button type=\"submit\">Submit</button>\n</EditForm>\n\n@code {\n    private Person person = new();\n    \n    private void HandleSubmit() {\n        Console.WriteLine(\"Form submitted!\");\n    }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`@onclick=\"MethodName\"`**: Calls C# method on click. No parentheses if no parameters. For lambda: @onclick=\"() => code\". Event fires, method runs, UI updates.\n\n**`ChangeEventArgs`**: Event argument object. Use e.Value for new value. Different types: KeyboardEventArgs, MouseEventArgs, FocusEventArgs, etc.\n\n**`@oninput vs @onchange`**: @oninput fires on every keystroke. @onchange fires when input loses focus (blur). Use @oninput for live updates, @onchange for final value.\n\n**`Event with parameters`**: Use lambda to pass parameters: @onclick=\"() => Delete(item.Id)\". Or: @onclick=\"@(() => Process(item))\". Lambda wraps method call."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create an interactive task manager with events!\n\n1. TaskManager component:\n   - Input for task name (@oninput updates as you type)\n   - Button \"Add Task\" (@onclick)\n   - List of tasks\n   - Each task has:\n     - Checkbox (@onchange to mark complete)\n     - Delete button (@onclick)\n   - Show count of total and completed tasks\n\n2. Events to handle:\n   - Input change (live preview)\n   - Add task (button click)\n   - Toggle complete (checkbox change)\n   - Delete task (button click)\n\n3. Print component structure!",
              "starterCode": "// TaskManager.razor\n<div class=\"task-manager\">\n    <h3>Task Manager</h3>\n    \n    <div class=\"input-group\">\n        <input \n            @oninput=\"HandleTaskInput\" \n            @onkeydown=\"HandleKeyPress\"\n            placeholder=\"Enter task name\" />\n        <button @onclick=\"AddTask\">Add Task</button>\n    </div>\n    \n    <p>Preview: @currentTaskName</p>\n    \n    <ul>\n        @foreach (var task in tasks)\n        {\n            <li>\n                <input \n                    type=\"checkbox\" \n                    checked=\"@task.IsCompleted\"\n                    @onchange=\"() => ToggleTask(task.Id)\" />\n                <span class=\"@(task.IsCompleted ? \\\"completed\\\" : \\\"\\\")\">@task.Name</span>\n                <button @onclick=\"() => DeleteTask(task.Id)\">Delete</button>\n            </li>\n        }\n    </ul>\n    \n    <p>Total: @tasks.Count | Completed: @tasks.Count(t => t.IsCompleted)</p>\n</div>\n\n@code {\n    // Implement task management\n}",
              "solution": "Console.WriteLine(@\"\n// TaskManager.razor\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n<div class=\"\"task-manager\"\">\n    <h3>📝 Task Manager</h3>\n    \n    <div class=\"\"input-group mb-3\"\">\n        <input \n            class=\"\"form-control\"\"\n            @bind=\"\"currentTaskName\"\"\n            @onkeydown=\"\"HandleKeyPress\"\"\n            placeholder=\"\"Enter task name\"\" />\n        <button class=\"\"btn btn-primary\"\" @onclick=\"\"AddTask\"\">Add Task</button>\n    </div>\n    \n    <div class=\"\"alert alert-info\"\">\n        Preview: @(string.IsNullOrEmpty(currentTaskName) ? \"\"(empty)\"\" : currentTaskName)\n    </div>\n    \n    <ul class=\"\"list-group\"\">\n        @foreach (var task in tasks)\n        {\n            <li class=\"\"list-group-item\"\">\n                <input \n                    type=\"\"checkbox\"\" \n                    checked=\"\"@task.IsCompleted\"\"\n                    @onchange=\"\"() => ToggleTask(task.Id)\"\" />\n                <span class=\"\"@(task.IsCompleted ? \\\"\"text-decoration-line-through\\\"\" : \"\"\"\")\"\">\n                    @task.Name\n                </span>\n                <button \n                    class=\"\"btn btn-sm btn-danger float-end\"\" \n                    @onclick=\"\"() => DeleteTask(task.Id)\"\">Delete</button>\n            </li>\n        }\n    </ul>\n    \n    <div class=\"\"mt-3\"\">\n        <strong>Total: @tasks.Count</strong> | \n        <strong>Completed: @tasks.Count(t => t.IsCompleted)</strong> |\n        <strong>Remaining: @tasks.Count(t => !t.IsCompleted)</strong>\n    </div>\n</div>\n\n@code {\n    private class TaskItem {\n        public int Id { get; set; }\n        public string Name { get; set; } = \"\"\"\";\n        public bool IsCompleted { get; set; }\n    }\n    \n    private List<TaskItem> tasks = new();\n    private string currentTaskName = \"\"\"\";\n    private int nextId = 1;\n    \n    private void AddTask() {\n        if (!string.IsNullOrWhiteSpace(currentTaskName)) {\n            tasks.Add(new TaskItem { \n                Id = nextId++, \n                Name = currentTaskName, \n                IsCompleted = false \n            });\n            currentTaskName = \"\"\"\";\n            Console.WriteLine($\"\"Task added! Total: {tasks.Count}\"\");\n        }\n    }\n    \n    private void HandleKeyPress(KeyboardEventArgs e) {\n        if (e.Key == \"\"Enter\"\") {\n            AddTask();\n        }\n    }\n    \n    private void ToggleTask(int taskId) {\n        var task = tasks.FirstOrDefault(t => t.Id == taskId);\n        if (task != null) {\n            task.IsCompleted = !task.IsCompleted;\n            Console.WriteLine($\"\"{task.Name}: {(task.IsCompleted ? \\\"\"Completed\\\"\" : \\\"\"Incomplete\\\"\")}\"\");\n        }\n    }\n    \n    private void DeleteTask(int taskId) {\n        var task = tasks.FirstOrDefault(t => t.Id == taskId);\n        if (task != null) {\n            tasks.Remove(task);\n            Console.WriteLine($\"\"Deleted: {task.Name}\"\");\n        }\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== EVENTS DEMONSTRATED ===\");\nConsole.WriteLine(\"✓ @bind - Two-way binding for input\");\nConsole.WriteLine(\"✓ @onkeydown - Enter key to add task\");\nConsole.WriteLine(\"✓ @onclick - Add and Delete buttons\");\nConsole.WriteLine(\"✓ @onchange - Checkbox toggle\");\nConsole.WriteLine(\"✓ Lambda with parameters: () => DeleteTask(id)\");\nConsole.WriteLine(\"\\n✓ All events → C# methods → UI updates!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"TaskManager\"",
                  "expectedOutput": "TaskManager",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"@onclick\"",
                  "expectedOutput": "@onclick",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"@onchange\"",
                  "expectedOutput": "@onchange",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"@bind\"",
                  "expectedOutput": "@bind",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"ToggleTask\"",
                  "expectedOutput": "ToggleTask",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"DeleteTask\"",
                  "expectedOutput": "DeleteTask",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "@onclick for buttons. @onchange for checkbox. @bind for two-way input binding. @onkeydown to detect Enter key. Use lambdas to pass parameters: () => Method(id)."
                },
                {
                  "level": 2,
                  "text": "Event propagation: @onclick on parent and child? Both fire! Use @onclick:stopPropagation to prevent bubbling. Or handle in only one place."
                },
                {
                  "level": 3,
                  "text": "Async event handlers: Can use async methods! '@onclick=\"HandleClickAsync\"' with 'private async Task HandleClickAsync()'. Blazor awaits automatically."
                },
                {
                  "level": 4,
                  "text": "Event args: Different events have different args! ChangeEventArgs for input/select, MouseEventArgs for mouse, KeyboardEventArgs for keyboard. Check e.Key, e.Button, etc."
                },
                {
                  "level": 5,
                  "text": "Lambda scope: Variables in lambda must be in scope! '@onclick=\"() => Delete(item.Id)\"' in foreach works. Outside foreach, 'item' not available!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Event propagation",
                  "consequence": "@onclick on parent and child? Both fire! Use @onclick:stopPropagation to prevent bubbling. Or handle in only one place.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Async event handlers",
                  "consequence": "Can use async methods! '@onclick=\"HandleClickAsync\"' with 'private async Task HandleClickAsync()'. Blazor awaits automatically.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Event args",
                  "consequence": "Different events have different args! ChangeEventArgs for input/select, MouseEventArgs for mouse, KeyboardEventArgs for keyboard. Check e.Key, e.Button, etc.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Lambda scope",
                  "consequence": "Variables in lambda must be in scope! '@onclick=\"() => Delete(item.Id)\"' in foreach works. Outside foreach, 'item' not available!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-06",
          "title": "Data Binding (@bind Directive)",
          "moduleId": "module-13",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Data binding is like a two-way mirror:\n\nONE-WAY (display only):\nC# variable → @variable → Shows in UI\nIf variable changes, UI updates\n\nTWO-WAY (@bind):\nC# variable ⟷ @bind ⟷ Input field\nVariable changes → UI updates\nUser types → Variable updates\nIt's AUTOMATIC!\n\nWithout @bind:\n<input value=\"@name\" @oninput=\"e => name = e.Value.ToString()\" />\n\nWith @bind:\n<input @bind=\"name\" />\n\nMuch simpler! Blazor handles sync automatically.\n\nThink: @bind = 'Keep C# variable and UI input perfectly in sync, both ways!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// SIMPLE BINDING\n<input @bind=\"name\" />\n<p>Hello, @name!</p>\n\n@code {\n    private string name = \"\";\n}\n\n// BINDING WITH DIFFERENT TYPES\n<input @bind=\"age\" type=\"number\" />\n<input @bind=\"birthDate\" type=\"date\" />\n<input type=\"checkbox\" @bind=\"isActive\" />\n<select @bind=\"category\">\n    <option>Electronics</option>\n    <option>Clothing</option>\n</select>\n\n@code {\n    private int age;\n    private DateTime birthDate = DateTime.Now;\n    private bool isActive;\n    private string category = \"Electronics\";\n}\n\n// BINDING EVENTS\n<input @bind=\"searchTerm\" @bind:event=\"oninput\" />\n// Updates on every keystroke!\n\n<input @bind=\"email\" @bind:event=\"onchange\" />\n// Updates when focus lost (default)\n\n// BINDING WITH FORMATTING\n<input @bind=\"price\" @bind:format=\"C2\" />\n// Displays as currency: $99.99\n\n<input @bind=\"date\" @bind:format=\"yyyy-MM-dd\" />\n// Custom date format\n\n// COMPONENT TWO-WAY BINDING\n// Parent:\n<Counter @bind-Count=\"myCount\" />\n<p>Parent knows: @myCount</p>\n\n// Counter component:\n@code {\n    [Parameter]\n    public int Count { get; set; }\n    \n    [Parameter]\n    public EventCallback<int> CountChanged { get; set; }\n    \n    private async Task IncrementCount() {\n        Count++;\n        await CountChanged.InvokeAsync(Count);\n    }\n}\n// Naming: Count + CountChanged",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`@bind=\"variable\"`**: Two-way binding. Variable ↔ input. User types → variable updates. Variable changes → input updates. Automatic sync!\n\n**`@bind:event=\"oninput\"`**: Control when binding updates. 'oninput' = every keystroke. 'onchange' = on blur (default for text inputs). Choose based on performance needs.\n\n**`@bind:format`**: Format display value. 'C2' = currency. 'yyyy-MM-dd' = date format. 'P' = percentage. Format doesn't change underlying value, just display.\n\n**`@bind-PropertyName`**: Component two-way binding. Requires: [Parameter] Property AND [Parameter] PropertyChanged EventCallback. @bind-Count binds to Count parameter."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create a User Profile Editor with full data binding!\n\n1. UserProfile model:\n   - string Name\n   - string Email\n   - int Age\n   - DateTime JoinDate\n   - bool IsActive\n   - string Bio (textarea)\n\n2. ProfileEditor component:\n   - Input for Name (@bind, updates live)\n   - Input for Email\n   - Number input for Age\n   - Date input for JoinDate\n   - Checkbox for IsActive\n   - Textarea for Bio\n   - Display preview card showing all values\n   - Show character count for Bio (live update)\n\n3. Demonstrate @bind:event=\"oninput\" for live updates\n\nPrint complete component!",
              "starterCode": "// ProfileEditor.razor\n<div class=\"profile-editor\">\n    <h3>Edit Profile</h3>\n    \n    <div class=\"form-group\">\n        <label>Name:</label>\n        <input @bind=\"profile.Name\" @bind:event=\"oninput\" class=\"form-control\" />\n    </div>\n    \n    <!-- Add other inputs -->\n    \n    <h4>Preview</h4>\n    <div class=\"card\">\n        <h5>@profile.Name</h5>\n        <p>Email: @profile.Email</p>\n        <!-- Show other fields -->\n    </div>\n</div>\n\n@code {\n    private class UserProfile {\n        public string Name { get; set; } = \"\";\n        // Add other properties\n    }\n    \n    private UserProfile profile = new();\n}",
              "solution": "Console.WriteLine(@\"\n// ProfileEditor.razor\nusing System;\n\n<div class=\"\"profile-editor container\"\">\n    <div class=\"\"row\"\">\n        <div class=\"\"col-md-6\"\">\n            <h3>✏️ Edit Profile</h3>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Name:</label>\n                <input @bind=\"\"profile.Name\"\" @bind:event=\"\"oninput\"\" \n                       class=\"\"form-control\"\" placeholder=\"\"Enter your name\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Email:</label>\n                <input @bind=\"\"profile.Email\"\" type=\"\"email\"\" \n                       class=\"\"form-control\"\" placeholder=\"\"your@email.com\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Age:</label>\n                <input @bind=\"\"profile.Age\"\" type=\"\"number\"\" \n                       class=\"\"form-control\"\" min=\"\"0\"\" max=\"\"120\"\" />\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Join Date:</label>\n                <input @bind=\"\"profile.JoinDate\"\" type=\"\"date\"\" \n                       class=\"\"form-control\"\" />\n            </div>\n            \n            <div class=\"\"mb-3 form-check\"\">\n                <input @bind=\"\"profile.IsActive\"\" type=\"\"checkbox\"\" \n                       class=\"\"form-check-input\"\" id=\"\"activeCheck\"\" />\n                <label class=\"\"form-check-label\"\" for=\"\"activeCheck\"\">Active Member</label>\n            </div>\n            \n            <div class=\"\"mb-3\"\">\n                <label class=\"\"form-label\"\">Bio:</label>\n                <textarea @bind=\"\"profile.Bio\"\" @bind:event=\"\"oninput\"\"\n                          class=\"\"form-control\"\" rows=\"\"4\"\" \n                          placeholder=\"\"Tell us about yourself...\"\">\n                </textarea>\n                <small class=\"\"text-muted\"\">Characters: @profile.Bio.Length / 500</small>\n            </div>\n        </div>\n        \n        <div class=\"\"col-md-6\"\">\n            <h3>👁️ Live Preview</h3>\n            <div class=\"\"card\"\">\n                <div class=\"\"card-body\"\">\n                    <h5 class=\"\"card-title\"\">@(string.IsNullOrEmpty(profile.Name) ? \"\"(No name)\"\" : profile.Name)</h5>\n                    \n                    <p class=\"\"card-text\"\">\n                        <strong>Email:</strong> @(string.IsNullOrEmpty(profile.Email) ? \"\"(Not provided)\"\" : profile.Email)<br/>\n                        <strong>Age:</strong> @profile.Age years<br/>\n                        <strong>Member Since:</strong> @profile.JoinDate.ToString(\"\"MMM dd, yyyy\"\")<br/>\n                        <strong>Status:</strong> \n                        <span class=\"\"badge bg-@(profile.IsActive ? \\\"\"success\\\"\" : \\\"\"secondary\\\"\")\"\">\n                            @(profile.IsActive ? \"\"Active\"\" : \"\"Inactive\"\")\n                        </span>\n                    </p>\n                    \n                    @if (!string.IsNullOrEmpty(profile.Bio))\n                    {\n                        <hr />\n                        <p class=\"\"card-text\"\">\n                            <strong>Bio:</strong><br/>\n                            @profile.Bio\n                        </p>\n                    }\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n@code {\n    private class UserProfile {\n        public string Name { get; set; } = \"\"\"\";\n        public string Email { get; set; } = \"\"\"\";\n        public int Age { get; set; } = 18;\n        public DateTime JoinDate { get; set; } = DateTime.Now;\n        public bool IsActive { get; set; } = true;\n        public string Bio { get; set; } = \"\"\"\";\n    }\n    \n    private UserProfile profile = new();\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== DATA BINDING FEATURES ===\");\nConsole.WriteLine(\"✓ @bind for two-way sync\");\nConsole.WriteLine(\"✓ @bind:event=\\\"oninput\\\" for live updates\");\nConsole.WriteLine(\"✓ Works with: string, int, DateTime, bool\");\nConsole.WriteLine(\"✓ Input, textarea, checkbox, select all supported\");\nConsole.WriteLine(\"✓ Live preview updates as you type!\");\nConsole.WriteLine(\"\\n✓ No manual event handlers needed!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"ProfileEditor\"",
                  "expectedOutput": "ProfileEditor",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"@bind\"",
                  "expectedOutput": "@bind",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"@bind:event\"",
                  "expectedOutput": "@bind:event",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Live Preview\"",
                  "expectedOutput": "Live Preview",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"two-way\"",
                  "expectedOutput": "two-way",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "@bind=\"variable\" for two-way binding. @bind:event=\"oninput\" for live updates. Works with strings, numbers, dates, bools. Automatic sync both ways!"
                },
                {
                  "level": 2,
                  "text": "Type mismatch: @bind with type=\"number\" on string? Won't work! Variable type must match input type. int with number, string with text, bool with checkbox."
                },
                {
                  "level": 3,
                  "text": "Format vs culture: @bind:format=\"C\" uses current culture! En-US = $, En-GB = £. Be aware for international apps. Use @bind:culture to specify."
                },
                {
                  "level": 4,
                  "text": "Binding performance: @bind:event=\"oninput\" on large list? Slow! Updates on every keystroke. Use onchange (default) for better performance when possible."
                },
                {
                  "level": 5,
                  "text": "Component binding naming: For @bind-Count, need Count AND CountChanged (exact naming!). If mismatch, binding won't work. Convention: Property + PropertyChanged."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Type mismatch",
                  "consequence": "@bind with type=\"number\" on string? Won't work! Variable type must match input type. int with number, string with text, bool with checkbox.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Format vs culture",
                  "consequence": "@bind:format=\"C\" uses current culture! En-US = $, En-GB = £. Be aware for international apps. Use @bind:culture to specify.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Binding performance",
                  "consequence": "@bind:event=\"oninput\" on large list? Slow! Updates on every keystroke. Use onchange (default) for better performance when possible.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Component binding naming",
                  "consequence": "For @bind-Count, need Count AND CountChanged (exact naming!). If mismatch, binding won't work. Convention: Property + PropertyChanged.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-13-07",
          "title": "QuickGrid Component (.NET 8 Feature)",
          "moduleId": "module-13",
          "order": 7,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "QuickGrid is like an Excel spreadsheet for your data:\n\nWithout QuickGrid (manual):\n• Build table HTML yourself\n• Write sorting logic\n• Write filtering code\n• Write paging manually\n• Handle loading states\n• 200+ lines of code!\n\nWith QuickGrid (.NET 8):\n• <QuickGrid Items=\"@products\" />\n• Add columns\n• Sorting? Built-in!\n• Filtering? Built-in!\n• Paging? Built-in!\n• 20 lines of code!\n\nQuickGrid features:\n✅ Sorting (click column headers)\n✅ Filtering\n✅ Pagination\n✅ Virtualization (huge datasets)\n✅ Custom templates\n✅ Responsive\n\nThink: QuickGrid = 'Professional data grid with superpowers, included free in .NET 8!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// INSTALL: Microsoft.AspNetCore.Components.QuickGrid\n// (Included in .NET 8 templates!)\n\nusing Microsoft.AspNetCore.Components.QuickGrid;\n\n// BASIC QUICKGRID\n<QuickGrid Items=\"@products\">\n    <PropertyColumn Property=\"@(p => p.Name)\" Sortable=\"true\" />\n    <PropertyColumn Property=\"@(p => p.Price)\" Format=\"C2\" Sortable=\"true\" />\n    <PropertyColumn Property=\"@(p => p.Stock)\" />\n</QuickGrid>\n\n@code {\n    private List<Product> products = new() {\n        new Product { Name = \"Laptop\", Price = 999.99m, Stock = 5 },\n        new Product { Name = \"Mouse\", Price = 29.99m, Stock = 50 }\n    };\n}\n\n// ADVANCED WITH CUSTOM COLUMNS\n<QuickGrid Items=\"@products\" Class=\"table table-striped\">\n    <PropertyColumn Property=\"@(p => p.Name)\" Title=\"Product\" />\n    \n    <TemplateColumn Title=\"Price\">\n        <span class=\"@(context.Price > 500 ? \"text-danger\" : \"text-success\")\">\n            $@context.Price\n        </span>\n    </TemplateColumn>\n    \n    <TemplateColumn Title=\"Actions\">\n        <button @onclick=\"() => Edit(context)\">Edit</button>\n        <button @onclick=\"() => Delete(context)\">Delete</button>\n    </TemplateColumn>\n</QuickGrid>\n\n// WITH PAGINATION\n<QuickGrid Items=\"@products\" Pagination=\"@pagination\">\n    <PropertyColumn Property=\"@(p => p.Name)\" />\n</QuickGrid>\n<Paginator State=\"@pagination\" />\n\n@code {\n    private PaginationState pagination = new PaginationState { ItemsPerPage = 10 };\n}\n\n// WITH IASYNCQUERYABLE (DATABASE)\n<QuickGrid Items=\"@context.Products.AsQueryable()\">\n    // Queries database efficiently!\n</QuickGrid>\n\n// FILTERING\n<input @bind=\"searchTerm\" @bind:event=\"oninput\" placeholder=\"Search...\" />\n<QuickGrid Items=\"@FilteredProducts\">\n    <PropertyColumn Property=\"@(p => p.Name)\" />\n</QuickGrid>\n\n@code {\n    private string searchTerm = \"\";\n    private IQueryable<Product> FilteredProducts => \n        products.AsQueryable()\n                .Where(p => p.Name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase));\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`<QuickGrid Items=\"@collection\">`**: Main component. Items = IQueryable<T> or IEnumerable<T>. IQueryable is better (database queries optimized!). Renders HTML table.\n\n**`<PropertyColumn Property=\"@(p => p.Name)\" />`**: Column for a property. Lambda selects property. Sortable=\"true\" enables sorting. Format=\"C2\" for currency, \"P\" for percent.\n\n**`<TemplateColumn>`**: Custom column content. Access item via 'context'. Full control: buttons, badges, conditional styling. Use for actions, custom rendering.\n\n**`Pagination=\"@state\"`**: Enable paging. Create PaginationState with ItemsPerPage. Use <Paginator State=\"@state\" /> to show page controls. Efficient for large datasets!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-13-07-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a Product Inventory Manager with QuickGrid!\n\n1. Product model:\n   - int Id\n   - string Name\n   - decimal Price\n   - int Stock\n   - string Category\n   - bool IsAvailable\n\n2. Create QuickGrid with:\n   - Property columns: Name (sortable), Category, Stock\n   - Template column for Price (red if > $500, green otherwise)\n   - Template column for Status (badge: In Stock / Low Stock / Out)\n   - Template column for Actions (Edit, Delete buttons)\n   - Enable sorting on Name and Price\n\n3. Add search filter input\n4. Add pagination (10 items per page)\n5. Show total products count\n\nPrint complete component!",
              "starterCode": "using Microsoft.AspNetCore.Components.QuickGrid;\n\n// ProductInventory.razor\n<div>\n    <h3>📦 Product Inventory</h3>\n    \n    <input @bind=\"searchTerm\" placeholder=\"Search products...\" />\n    \n    <QuickGrid Items=\"@FilteredProducts\">\n        <PropertyColumn Property=\"@(p => p.Name)\" Sortable=\"true\" />\n        <!-- Add other columns -->\n    </QuickGrid>\n    \n    <p>Total Products: @products.Count</p>\n</div>\n\n@code {\n    private class Product {\n        public int Id { get; set; }\n        public string Name { get; set; }\n        public decimal Price { get; set; }\n        public int Stock { get; set; }\n        public string Category { get; set; }\n    }\n    \n    private List<Product> products = new();\n    private string searchTerm = \"\";\n}",
              "solution": "Console.WriteLine(@\"\n// ProductInventory.razor\nusing Microsoft.AspNetCore.Components.QuickGrid;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\n<div class=\"\"container\"\">\n    <h3>📦 Product Inventory Manager</h3>\n    \n    <div class=\"\"mb-3\"\">\n        <input class=\"\"form-control\"\" \n               @bind=\"\"searchTerm\"\" \n               @bind:event=\"\"oninput\"\"\n               placeholder=\"\"🔍 Search products...\"\" />\n    </div>\n    \n    <QuickGrid Items=\"\"@FilteredProducts\"\" Class=\"\"table table-hover\"\" Pagination=\"\"@pagination\"\">\n        <PropertyColumn Property=\"\"@(p => p.Name)\"\" Title=\"\"Product Name\"\" Sortable=\"\"true\"\" />\n        \n        <PropertyColumn Property=\"\"@(p => p.Category)\"\" Title=\"\"Category\"\" Sortable=\"\"true\"\" />\n        \n        <TemplateColumn Title=\"\"Price\"\" Sortable=\"\"true\"\" SortBy=\"\"@(GridSort<Product>.ByAscending(p => p.Price))\"\">\n            <span class=\"\"@(context.Price > 500 ? \\\"\"text-danger fw-bold\\\"\" : \\\"\"text-success\\\"\")\"\">\n                $@context.Price.ToString(\\\"\"F2\\\"\")\n            </span>\n        </TemplateColumn>\n        \n        <TemplateColumn Title=\"\"Stock Status\"\">\n            @if (context.Stock == 0)\n            {\n                <span class=\"\"badge bg-danger\"\">Out of Stock</span>\n            }\n            else if (context.Stock < 10)\n            {\n                <span class=\"\"badge bg-warning\"\">Low Stock (@context.Stock)</span>\n            }\n            else\n            {\n                <span class=\"\"badge bg-success\"\">In Stock (@context.Stock)</span>\n            }\n        </TemplateColumn>\n        \n        <TemplateColumn Title=\"\"Available\"\">\n            @if (context.IsAvailable)\n            {\n                <span class=\"\"text-success\"\">✓</span>\n            }\n            else\n            {\n                <span class=\"\"text-danger\"\">✗</span>\n            }\n        </TemplateColumn>\n        \n        <TemplateColumn Title=\"\"Actions\"\">\n            <button class=\"\"btn btn-sm btn-primary\"\" @onclick=\"\"() => EditProduct(context.Id)\"\">Edit</button>\n            <button class=\"\"btn btn-sm btn-danger\"\" @onclick=\"\"() => DeleteProduct(context.Id)\"\">Delete</button>\n        </TemplateColumn>\n    </QuickGrid>\n    \n    <Paginator State=\"\"@pagination\"\" />\n    \n    <div class=\"\"mt-3\"\">\n        <strong>Total Products: @products.Count</strong> | \n        <strong>Showing: @FilteredProducts.Count()</strong>\n    </div>\n</div>\n\n@code {\n    private class Product {\n        public int Id { get; set; }\n        public string Name { get; set; } = \"\"\"\";\n        public decimal Price { get; set; }\n        public int Stock { get; set; }\n        public string Category { get; set; } = \"\"\"\";\n        public bool IsAvailable { get; set; }\n    }\n    \n    private List<Product> products = new() {\n        new Product { Id = 1, Name = \"\"Laptop\"\", Price = 999.99m, Stock = 5, Category = \"\"Electronics\"\", IsAvailable = true },\n        new Product { Id = 2, Name = \"\"Mouse\"\", Price = 29.99m, Stock = 50, Category = \"\"Electronics\"\", IsAvailable = true },\n        new Product { Id = 3, Name = \"\"Monitor\"\", Price = 399.99m, Stock = 0, Category = \"\"Electronics\"\", IsAvailable = false },\n        new Product { Id = 4, Name = \"\"Keyboard\"\", Price = 79.99m, Stock = 8, Category = \"\"Electronics\"\", IsAvailable = true },\n        new Product { Id = 5, Name = \"\"Desk\"\", Price = 299.99m, Stock = 15, Category = \"\"Furniture\"\", IsAvailable = true }\n    };\n    \n    private string searchTerm = \"\"\"\";\n    private PaginationState pagination = new PaginationState { ItemsPerPage = 10 };\n    \n    private IQueryable<Product> FilteredProducts =>\n        products.AsQueryable()\n                .Where(p => string.IsNullOrEmpty(searchTerm) || \n                           p.Name.Contains(searchTerm, StringComparison.OrdinalIgnoreCase) ||\n                           p.Category.Contains(searchTerm, StringComparison.OrdinalIgnoreCase));\n    \n    private void EditProduct(int id) {\n        Console.WriteLine($\"\"Edit product {id}\"\");\n    }\n    \n    private void DeleteProduct(int id) {\n        var product = products.FirstOrDefault(p => p.Id == id);\n        if (product != null) {\n            products.Remove(product);\n            Console.WriteLine($\"\"Deleted: {product.Name}\"\");\n        }\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== QUICKGRID BENEFITS ===\");\nConsole.WriteLine(\"✓ Built-in sorting (click column headers)\");\nConsole.WriteLine(\"✓ Pagination with Paginator component\");\nConsole.WriteLine(\"✓ Custom templates for complex columns\");\nConsole.WriteLine(\"✓ Conditional styling (colors, badges)\");\nConsole.WriteLine(\"✓ Action buttons (Edit, Delete)\");\nConsole.WriteLine(\"✓ Responsive table layout\");\nConsole.WriteLine(\"\\n✓ Professional data grid with minimal code!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"QuickGrid\"",
                  "expectedOutput": "QuickGrid",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"PropertyColumn\"",
                  "expectedOutput": "PropertyColumn",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"TemplateColumn\"",
                  "expectedOutput": "TemplateColumn",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Pagination\"",
                  "expectedOutput": "Pagination",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"Sortable\"",
                  "expectedOutput": "Sortable",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "PropertyColumn for simple properties. TemplateColumn for custom content. Sortable=\"true\" enables sorting. Use 'context' in templates to access row item. Pagination with PaginationState."
                },
                {
                  "level": 2,
                  "text": "IQueryable vs IEnumerable: Use IQueryable when possible (especially with EF Core)! Sorting/paging happens in database. IEnumerable loads all data first (slow!)."
                },
                {
                  "level": 3,
                  "text": "Missing NuGet package: QuickGrid requires Microsoft.AspNetCore.Components.QuickGrid package. In .NET 8+ templates, it's included. Older projects need manual install."
                },
                {
                  "level": 4,
                  "text": "Context in templates: Inside TemplateColumn, use 'context' to access current row item! '@context.Name', '@context.Price'. Don't forget 'context.'!"
                },
                {
                  "level": 5,
                  "text": "Pagination state: Must create PaginationState instance and pass to both QuickGrid AND Paginator! If mismatch, pagination breaks. Same instance for both!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "IQueryable vs IEnumerable",
                  "consequence": "Use IQueryable when possible (especially with EF Core)! Sorting/paging happens in database. IEnumerable loads all data first (slow!).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Missing NuGet package",
                  "consequence": "QuickGrid requires Microsoft.AspNetCore.Components.QuickGrid package. In .NET 8+ templates, it's included. Older projects need manual install.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Context in templates",
                  "consequence": "Inside TemplateColumn, use 'context' to access current row item! '@context.Name', '@context.Price'. Don't forget 'context.'!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Pagination state",
                  "consequence": "Must create PaginationState instance and pass to both QuickGrid AND Paginator! If mismatch, pagination breaks. Same instance for both!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-14",
      "title": "Blazor, .NET Aspire & Deployment",
      "description": "Build interactive web UIs with Blazor, orchestrate distributed apps with .NET Aspire (service discovery, dashboards, telemetry), and deploy to Azure.",
      "difficulty": "beginner",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-14-01",
          "title": "Connecting Blazor to API (Frontend + Backend)",
          "moduleId": "module-14",
          "order": 1,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Full Stack = Frontend + Backend working together:\n\nFRONTEND (Blazor):\n• The restaurant customer\n• Sees menu, orders food\n• Nice UI, interactive\n\nBACKEND (ASP.NET Core API):\n• The kitchen\n• Prepares the food\n• Database, business logic\n\nHttpClient = The waiter who connects them!\n\nBlazer ← HttpClient → API ← EF Core → Database\n\nBlazor calls API:\n1. User clicks button\n2. Blazor makes HTTP request\n3. API processes (database query)\n4. API sends JSON response\n5. Blazor displays data\n\nThink: HttpClient = 'The bridge between your beautiful UI and powerful backend!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// API (Backend) - Program.cs\nvar builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddDbContext<AppDbContext>();\n\nvar app = builder.Build();\n\n// CORS for Blazor - DEVELOPMENT ONLY!\n// WARNING: AllowAnyOrigin() is insecure for production!\nif (app.Environment.IsDevelopment())\n{\n    app.UseCors(policy => policy\n        .AllowAnyOrigin()\n        .AllowAnyMethod()\n        .AllowAnyHeader());\n}\nelse\n{\n    // PRODUCTION: Restrict to specific origins\n    app.UseCors(policy => policy\n        .WithOrigins(\"https://yourapp.com\", \"https://www.yourapp.com\")\n        .AllowAnyMethod()\n        .AllowAnyHeader()\n        .AllowCredentials());  // For cookies/auth headers\n}\n\napp.MapGet(\"/api/products\", async (AppDbContext db) =>\n    await db.Products.ToListAsync());\n\napp.MapGet(\"/api/products/{id}\", async (int id, AppDbContext db) =>\n    await db.Products.FindAsync(id));\n\napp.Run();\n\n// BLAZOR (Frontend) - Using HttpClient\n@inject HttpClient Http\n\n<h3>Products</h3>\n\n@if (products == null)\n{\n    <p>Loading...</p>\n}\nelse\n{\n    <ul>\n        @foreach (var product in products)\n        {\n            <li>@product.Name - $@product.Price</li>\n        }\n    </ul>\n}\n\n@code {\n    private List<Product>? products;\n    \n    protected override async Task OnInitializedAsync()\n    {\n        // Call API!\n        products = await Http.GetFromJsonAsync<List<Product>>(\n            \"https://localhost:5001/api/products\");\n    }\n}\n\n// POST REQUEST\nprivate async Task CreateProduct(Product product)\n{\n    var response = await Http.PostAsJsonAsync(\n        \"https://localhost:5001/api/products\", product);\n    \n    if (response.IsSuccessStatusCode)\n    {\n        Console.WriteLine(\"Product created!\");\n    }\n}\n\n// PUT REQUEST\nprivate async Task UpdateProduct(int id, Product product)\n{\n    await Http.PutAsJsonAsync(\n        $\"https://localhost:5001/api/products/{id}\", product);\n}\n\n// DELETE REQUEST\nprivate async Task DeleteProduct(int id)\n{\n    await Http.DeleteAsync(\n        $\"https://localhost:5001/api/products/{id}\");\n}\n\n// ERROR HANDLING\ntry\n{\n    products = await Http.GetFromJsonAsync<List<Product>>(\n        \"https://localhost:5001/api/products\");\n}\ncatch (HttpRequestException ex)\n{\n    errorMessage = $\"API Error: {ex.Message}\";\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`@inject HttpClient Http`**: Injects HttpClient into component. Use 'Http' to make API calls. Configured in Program.cs with BaseAddress.\n\n**`GetFromJsonAsync<T>(url)`**: GET request, deserializes JSON to T. Returns T or null. Throws HttpRequestException on failure. Use try/catch!\n\n**`PostAsJsonAsync(url, data)`**: POST request, serializes data to JSON. Returns HttpResponseMessage. Check response.IsSuccessStatusCode for success.\n\n**`CORS configuration`**: API must enable CORS for Blazor WebAssembly! Use UseCors() in development with AllowAnyOrigin(). **SECURITY WARNING**: AllowAnyOrigin() is unsafe for production - any website could call your API! In production, use WithOrigins() to restrict to your specific frontend domains."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build a full-stack Todo app!\n\n1. API (backend):\n   - Todo model (Id, Title, IsCompleted)\n   - GET /api/todos (list all)\n   - POST /api/todos (create)\n   - PUT /api/todos/{id} (update)\n   - DELETE /api/todos/{id} (delete)\n   - Use in-memory list\n\n2. Blazor component (frontend):\n   - Inject HttpClient\n   - OnInitializedAsync: load todos\n   - Display list with checkboxes\n   - Input to add new todo\n   - Delete button for each\n   - Handle loading and errors\n\n3. Print both API and Blazor code!\n\nThis is your first full-stack app!",
              "starterCode": "// API - Program.cs\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\nvar todos = new List<Todo> {\n    new Todo { Id = 1, Title = \"Learn Blazor\", IsCompleted = false }\n};\n\napp.MapGet(\"/api/todos\", () => todos);\n\n// Add other endpoints...\n\napp.Run();\n\n// Blazor - TodoList.razor\n@inject HttpClient Http\n\n<h3>Todo List</h3>\n\n@if (todos == null)\n{\n    <p>Loading...</p>\n}\nelse\n{\n    <ul>\n        @foreach (var todo in todos)\n        {\n            <li>\n                <input type=\"checkbox\" @bind=\"todo.IsCompleted\" />\n                @todo.Title\n                <button @onclick=\"() => DeleteTodo(todo.Id)\">Delete</button>\n            </li>\n        }\n    </ul>\n}\n\n@code {\n    private List<Todo>? todos;\n    \n    protected override async Task OnInitializedAsync()\n    {\n        await LoadTodos();\n    }\n    \n    private async Task LoadTodos()\n    {\n        // Call API\n    }\n}",
              "solution": "Console.WriteLine(@\"\n=== API (BACKEND) - Program.cs ===\");\nConsole.WriteLine(@\"\nusing Microsoft.AspNetCore.Builder;\nusing System.Collections.Generic;\nusing System.Linq;\n\nvar builder = WebApplication.CreateBuilder(args);\nvar app = builder.Build();\n\n// Enable CORS for Blazor\napp.UseCors(policy => policy\n    .AllowAnyOrigin()\n    .AllowAnyMethod()\n    .AllowAnyHeader());\n\nclass Todo {\n    public int Id { get; set; }\n    public string Title { get; set; } = \"\"\"\";\n    public bool IsCompleted { get; set; }\n}\n\nvar todos = new List<Todo> {\n    new Todo { Id = 1, Title = \"\"Learn Blazor\"\", IsCompleted = false },\n    new Todo { Id = 2, Title = \"\"Build API\"\", IsCompleted = true }\n};\nint nextId = 3;\n\napp.MapGet(\"\"/api/todos\"\", () => todos);\n\napp.MapGet(\"\"/api/todos/{id}\"\", (int id) => {\n    var todo = todos.FirstOrDefault(t => t.Id == id);\n    return todo is not null ? Results.Ok(todo) : Results.NotFound();\n});\n\napp.MapPost(\"\"/api/todos\"\", (Todo todo) => {\n    todo.Id = nextId++;\n    todos.Add(todo);\n    return Results.Created($\"\"/api/todos/{todo.Id}\"\", todo);\n});\n\napp.MapPut(\"\"/api/todos/{id}\"\", (int id, Todo updated) => {\n    var todo = todos.FirstOrDefault(t => t.Id == id);\n    if (todo is null) return Results.NotFound();\n    \n    todo.Title = updated.Title;\n    todo.IsCompleted = updated.IsCompleted;\n    return Results.Ok(todo);\n});\n\napp.MapDelete(\"\"/api/todos/{id}\"\", (int id) => {\n    var todo = todos.FirstOrDefault(t => t.Id == id);\n    if (todo is null) return Results.NotFound();\n    \n    todos.Remove(todo);\n    return Results.NoContent();\n});\n\napp.Run();\n\"\");\n\nConsole.WriteLine(@\"\n=== BLAZOR (FRONTEND) - TodoList.razor ===\");\nConsole.WriteLine(@\"\n@inject HttpClient Http\n\n<div class=\"\"container\"\">\n    <h3>📝 Full-Stack Todo App</h3>\n    \n    @if (isLoading)\n    {\n        <div class=\"\"spinner-border\"\" role=\"\"status\"\"></div>\n        <span>Loading...</span>\n    }\n    else if (errorMessage != null)\n    {\n        <div class=\"\"alert alert-danger\"\">@errorMessage</div>\n    }\n    else\n    {\n        <div class=\"\"mb-3\"\">\n            <input @bind=\"\"newTodoTitle\"\" class=\"\"form-control\"\" placeholder=\"\"New todo...\"\" />\n            <button class=\"\"btn btn-primary\"\" @onclick=\"\"AddTodo\"\">Add</button>\n        </div>\n        \n        <ul class=\"\"list-group\"\">\n            @foreach (var todo in todos)\n            {\n                <li class=\"\"list-group-item\"\">\n                    <input \n                        type=\"\"checkbox\"\" \n                        checked=\"\"@todo.IsCompleted\"\n                        @onchange=\"\"() => ToggleTodo(todo)\"\" />\n                    <span class=\"\"@(todo.IsCompleted ? \\\"\"text-decoration-line-through\\\"\" : \"\"\"\")\"\">\n                        @todo.Title\n                    </span>\n                    <button \n                        class=\"\"btn btn-sm btn-danger float-end\"\" \n                        @onclick=\"\"() => DeleteTodo(todo.Id)\"\">Delete</button>\n                </li>\n            }\n        </ul>\n    }\n</div>\n\n@code {\n    private class Todo {\n        public int Id { get; set; }\n        public string Title { get; set; } = \"\"\"\";\n        public bool IsCompleted { get; set; }\n    }\n    \n    private List<Todo> todos = new();\n    private string newTodoTitle = \"\"\"\";\n    private bool isLoading = true;\n    private string? errorMessage;\n    \n    protected override async Task OnInitializedAsync()\n    {\n        await LoadTodos();\n    }\n    \n    private async Task LoadTodos()\n    {\n        try\n        {\n            isLoading = true;\n            todos = await Http.GetFromJsonAsync<List<Todo>>(\"\"https://localhost:5001/api/todos\"\") ?? new();\n            errorMessage = null;\n        }\n        catch (HttpRequestException ex)\n        {\n            errorMessage = $\"\"API Error: {ex.Message}\"\";\n        }\n        finally\n        {\n            isLoading = false;\n        }\n    }\n    \n    private async Task AddTodo()\n    {\n        if (string.IsNullOrWhiteSpace(newTodoTitle)) return;\n        \n        var newTodo = new Todo { Title = newTodoTitle, IsCompleted = false };\n        var response = await Http.PostAsJsonAsync(\"\"https://localhost:5001/api/todos\"\", newTodo);\n        \n        if (response.IsSuccessStatusCode)\n        {\n            newTodoTitle = \"\"\"\";\n            await LoadTodos();\n        }\n    }\n    \n    private async Task ToggleTodo(Todo todo)\n    {\n        todo.IsCompleted = !todo.IsCompleted;\n        await Http.PutAsJsonAsync($\"\"https://localhost:5001/api/todos/{todo.Id}\"\", todo);\n    }\n    \n    private async Task DeleteTodo(int id)\n    {\n        var response = await Http.DeleteAsync($\"\"https://localhost:5001/api/todos/{id}\"\");\n        if (response.IsSuccessStatusCode)\n        {\n            await LoadTodos();\n        }\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== FULL-STACK ARCHITECTURE ===\");\nConsole.WriteLine(\"Frontend (Blazor) → HttpClient → API → Database\");\nConsole.WriteLine(\"✓ Blazor: UI, user interaction\");\nConsole.WriteLine(\"✓ HttpClient: Communication layer\");\nConsole.WriteLine(\"✓ API: Business logic, data access\");\nConsole.WriteLine(\"✓ Separation of concerns!\");\nConsole.WriteLine(\"\\nYou're now a FULL-STACK developer!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"API\"",
                  "expectedOutput": "API",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"BACKEND\"",
                  "expectedOutput": "BACKEND",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"Blazor\"",
                  "expectedOutput": "Blazor",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"FRONTEND\"",
                  "expectedOutput": "FRONTEND",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"HttpClient\"",
                  "expectedOutput": "HttpClient",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"FULL-STACK\"",
                  "expectedOutput": "FULL-STACK",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "API: MapGet/Post/Put/Delete endpoints. Blazor: @inject HttpClient, GetFromJsonAsync<T>, PostAsJsonAsync, PutAsJsonAsync, DeleteAsync. Handle loading state and errors!"
                },
                {
                  "level": 2,
                  "text": "CORS errors: Blazor WebAssembly needs CORS enabled on API! Use app.UseCors() with AllowAnyOrigin(). Browser console shows 'CORS policy' error if missing."
                },
                {
                  "level": 3,
                  "text": "Base address: Configure HttpClient.BaseAddress in Program.cs! Otherwise, use full URLs in every request. BaseAddress = \"https://localhost:5001/\" lets you use relative URLs."
                },
                {
                  "level": 4,
                  "text": "Null reference: GetFromJsonAsync returns null if API not running! Always check: 'todos = await Http.Get...() ?? new();' or handle null explicitly."
                },
                {
                  "level": 5,
                  "text": "Forgetting await: HttpClient methods are async! Must use 'await'. Forgetting await = code continues before response arrives (race condition!). Always await HTTP calls!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "CORS errors",
                  "consequence": "Blazor WebAssembly needs CORS enabled on API! Use app.UseCors() with AllowAnyOrigin(). Browser console shows 'CORS policy' error if missing.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Base address",
                  "consequence": "Configure HttpClient.BaseAddress in Program.cs! Otherwise, use full URLs in every request. BaseAddress = \"https://localhost:5001/\" lets you use relative URLs.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Null reference",
                  "consequence": "GetFromJsonAsync returns null if API not running! Always check: 'todos = await Http.Get...() ?? new();' or handle null explicitly.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Forgetting await",
                  "consequence": "HttpClient methods are async! Must use 'await'. Forgetting await = code continues before response arrives (race condition!). Always await HTTP calls!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-14-02",
          "title": "Full CRUD Operations (Complete Data Management)",
          "moduleId": "module-14",
          "order": 2,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "CRUD = Create, Read, Update, Delete - The four essential database operations:\n\nRestaurant analogy:\n• CREATE: Add new dish to menu\n• READ: View menu\n• UPDATE: Change dish price\n• DELETE: Remove dish from menu\n\nFull-stack CRUD:\nBlazor UI → HTTP → API → EF Core → Database\n\n✅ CREATE: Form → POST → API → db.Add() → SaveChanges()\n✅ READ: Load → GET → API → db.ToList() → Display\n✅ UPDATE: Edit → PUT → API → db.Update() → SaveChanges()\n✅ DELETE: Button → DELETE → API → db.Remove() → SaveChanges()\n\nThink: CRUD = 'The foundation of every data-driven application!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// FULL CRUD API\napp.MapGet(\"/api/products\", async (AppDbContext db) =>\n    await db.Products.ToListAsync());\n\napp.MapGet(\"/api/products/{id}\", async (int id, AppDbContext db) =>\n    await db.Products.FindAsync(id));\n\napp.MapPost(\"/api/products\", async (Product product, AppDbContext db) => {\n    db.Products.Add(product);\n    await db.SaveChangesAsync();\n    return Results.Created($\"/api/products/{product.Id}\", product);\n});\n\napp.MapPut(\"/api/products/{id}\", async (int id, Product updated, AppDbContext db) => {\n    var product = await db.Products.FindAsync(id);\n    if (product is null) return Results.NotFound();\n    \n    product.Name = updated.Name;\n    product.Price = updated.Price;\n    await db.SaveChangesAsync();\n    return Results.Ok(product);\n});\n\napp.MapDelete(\"/api/products/{id}\", async (int id, AppDbContext db) => {\n    var product = await db.Products.FindAsync(id);\n    if (product is null) return Results.NotFound();\n    \n    db.Products.Remove(product);\n    await db.SaveChangesAsync();\n    return Results.NoContent();\n});\n\n// BLAZOR CRUD COMPONENT\n@inject HttpClient Http\n\n<h3>Product Manager</h3>\n\n<button @onclick=\"ShowCreateForm\">Add Product</button>\n\n@if (showForm)\n{\n    <EditForm Model=\"@currentProduct\" OnValidSubmit=\"SaveProduct\">\n        <InputText @bind-Value=\"currentProduct.Name\" />\n        <InputNumber @bind-Value=\"currentProduct.Price\" />\n        <button type=\"submit\">Save</button>\n        <button type=\"button\" @onclick=\"CancelForm\">Cancel</button>\n    </EditForm>\n}\n\n<table>\n    @foreach (var product in products)\n    {\n        <tr>\n            <td>@product.Name</td>\n            <td>$@product.Price</td>\n            <td>\n                <button @onclick=\"() => EditProduct(product)\">Edit</button>\n                <button @onclick=\"() => DeleteProduct(product.Id)\">Delete</button>\n            </td>\n        </tr>\n    }\n</table>\n\n@code {\n    private List<Product> products = new();\n    private Product currentProduct = new();\n    private bool showForm = false;\n    private bool isEditing = false;\n    \n    protected override async Task OnInitializedAsync() {\n        await LoadProducts();\n    }\n    \n    private async Task LoadProducts() {\n        products = await Http.GetFromJsonAsync<List<Product>>(\n            \"https://localhost:5001/api/products\") ?? new();\n    }\n    \n    private void ShowCreateForm() {\n        currentProduct = new Product();\n        isEditing = false;\n        showForm = true;\n    }\n    \n    private void EditProduct(Product product) {\n        currentProduct = new Product {\n            Id = product.Id,\n            Name = product.Name,\n            Price = product.Price\n        };\n        isEditing = true;\n        showForm = true;\n    }\n    \n    private async Task SaveProduct() {\n        if (isEditing) {\n            await Http.PutAsJsonAsync(\n                $\"https://localhost:5001/api/products/{currentProduct.Id}\", \n                currentProduct);\n        } else {\n            await Http.PostAsJsonAsync(\n                \"https://localhost:5001/api/products\", \n                currentProduct);\n        }\n        \n        showForm = false;\n        await LoadProducts();\n    }\n    \n    private async Task DeleteProduct(int id) {\n        await Http.DeleteAsync($\"https://localhost:5001/api/products/{id}\");\n        await LoadProducts();\n    }\n    \n    private void CancelForm() {\n        showForm = false;\n    }\n}",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`EditForm component`**: Blazor form with validation. Model=\"@object\" binds form. OnValidSubmit fires when valid. InputText, InputNumber are built-in inputs with validation.\n\n**`Create vs Update pattern`**: Use boolean flag (isEditing). If true: PUT existing. If false: POST new. Same form, different API call based on context.\n\n**`SaveChangesAsync()`**: EF Core persists changes to database. Call after Add/Update/Remove. Returns number of affected rows. Always await!\n\n**`Reload after changes`**: After Create/Update/Delete, reload data from API. Ensures UI shows latest database state. Call LoadProducts() after operations."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Build complete CRUD for a Book Library!\n\n1. Book model (Id, Title, Author, Year, ISBN)\n\n2. API with all CRUD endpoints:\n   - GET /api/books (list all)\n   - GET /api/books/{id} (single)\n   - POST /api/books (create)\n   - PUT /api/books/{id} (update)\n   - DELETE /api/books/{id} (delete)\n\n3. Blazor component:\n   - List books in table\n   - Add button → shows form\n   - Edit button for each book → populates form\n   - Delete button with confirmation\n   - Form with all fields\n   - Save/Cancel buttons\n   - Reload after operations\n\n4. Print complete API and Blazor code!",
              "starterCode": "// API\napp.MapGet(\"/api/books\", async (AppDbContext db) => {\n    // Return all books\n});\n\n// Add other CRUD endpoints...\n\n// Blazor - BookManager.razor\n@inject HttpClient Http\n\n<h3>Book Library</h3>\n\n@if (showForm)\n{\n    <EditForm Model=\"@currentBook\" OnValidSubmit=\"SaveBook\">\n        <!-- Form fields -->\n    </EditForm>\n}\n\n<!-- Table of books -->\n\n@code {\n    private List<Book> books = new();\n    private Book currentBook = new();\n    private bool showForm = false;\n    private bool isEditing = false;\n}",
              "solution": "Console.WriteLine(@\"\n=== FULL CRUD API ===\");\nConsole.WriteLine(@\"\nusing Microsoft.EntityFrameworkCore;\n\nvar builder = WebApplication.CreateBuilder(args);\nbuilder.Services.AddDbContext<AppDbContext>();\nvar app = builder.Build();\n\nclass Book {\n    public int Id { get; set; }\n    public string Title { get; set; } = \"\"\"\";\n    public string Author { get; set; } = \"\"\"\";\n    public int Year { get; set; }\n    public string ISBN { get; set; } = \"\"\"\";\n}\n\n// CREATE\napp.MapPost(\"\"/api/books\"\", async (Book book, AppDbContext db) => {\n    db.Books.Add(book);\n    await db.SaveChangesAsync();\n    return Results.Created($\"\"/api/books/{book.Id}\"\", book);\n});\n\n// READ - All\napp.MapGet(\"\"/api/books\"\", async (AppDbContext db) =>\n    await db.Books.ToListAsync());\n\n// READ - Single\napp.MapGet(\"\"/api/books/{id}\"\", async (int id, AppDbContext db) => {\n    var book = await db.Books.FindAsync(id);\n    return book is not null ? Results.Ok(book) : Results.NotFound();\n});\n\n// UPDATE\napp.MapPut(\"\"/api/books/{id}\"\", async (int id, Book updated, AppDbContext db) => {\n    var book = await db.Books.FindAsync(id);\n    if (book is null) return Results.NotFound();\n    \n    book.Title = updated.Title;\n    book.Author = updated.Author;\n    book.Year = updated.Year;\n    book.ISBN = updated.ISBN;\n    \n    await db.SaveChangesAsync();\n    return Results.Ok(book);\n});\n\n// DELETE\napp.MapDelete(\"\"/api/books/{id}\"\", async (int id, AppDbContext db) => {\n    var book = await db.Books.FindAsync(id);\n    if (book is null) return Results.NotFound();\n    \n    db.Books.Remove(book);\n    await db.SaveChangesAsync();\n    return Results.NoContent();\n});\n\napp.Run();\n\"\");\n\nConsole.WriteLine(@\"\n=== BLAZOR CRUD COMPONENT ===\");\nConsole.WriteLine(@\"\n// BookManager.razor\n@inject HttpClient Http\n\n<div class=\"\"container\"\">\n    <h3>📚 Book Library Manager</h3>\n    \n    <button class=\"\"btn btn-primary\"\" @onclick=\"\"ShowCreateForm\"\">➕ Add New Book</button>\n    \n    @if (showForm)\n    {\n        <div class=\"\"card mt-3\"\">\n            <div class=\"\"card-body\"\">\n                <h5>@(isEditing ? \"\"Edit Book\"\" : \"\"Add New Book\"\")</h5>\n                <EditForm Model=\"\"@currentBook\"\" OnValidSubmit=\"\"SaveBook\"\">\n                    <div class=\"\"mb-2\"\">\n                        <label>Title:</label>\n                        <InputText @bind-Value=\"\"currentBook.Title\"\" class=\"\"form-control\"\" />\n                    </div>\n                    <div class=\"\"mb-2\"\">\n                        <label>Author:</label>\n                        <InputText @bind-Value=\"\"currentBook.Author\"\" class=\"\"form-control\"\" />\n                    </div>\n                    <div class=\"\"mb-2\"\">\n                        <label>Year:</label>\n                        <InputNumber @bind-Value=\"\"currentBook.Year\"\" class=\"\"form-control\"\" />\n                    </div>\n                    <div class=\"\"mb-2\"\">\n                        <label>ISBN:</label>\n                        <InputText @bind-Value=\"\"currentBook.ISBN\"\" class=\"\"form-control\"\" />\n                    </div>\n                    <button type=\"\"submit\"\" class=\"\"btn btn-success\"\">💾 Save</button>\n                    <button type=\"\"button\"\" class=\"\"btn btn-secondary\"\" @onclick=\"\"CancelForm\"\">Cancel</button>\n                </EditForm>\n            </div>\n        </div>\n    }\n    \n    <table class=\"\"table table-striped mt-3\"\">\n        <thead>\n            <tr>\n                <th>Title</th>\n                <th>Author</th>\n                <th>Year</th>\n                <th>ISBN</th>\n                <th>Actions</th>\n            </tr>\n        </thead>\n        <tbody>\n            @foreach (var book in books)\n            {\n                <tr>\n                    <td>@book.Title</td>\n                    <td>@book.Author</td>\n                    <td>@book.Year</td>\n                    <td>@book.ISBN</td>\n                    <td>\n                        <button class=\"\"btn btn-sm btn-warning\"\" @onclick=\"\"() => EditBook(book)\"\">✏️ Edit</button>\n                        <button class=\"\"btn btn-sm btn-danger\"\" @onclick=\"\"() => DeleteBook(book.Id)\"\">🗑️ Delete</button>\n                    </td>\n                </tr>\n            }\n        </tbody>\n    </table>\n    \n    <p><strong>Total Books: @books.Count</strong></p>\n</div>\n\n@code {\n    private class Book {\n        public int Id { get; set; }\n        public string Title { get; set; } = \"\"\"\";\n        public string Author { get; set; } = \"\"\"\";\n        public int Year { get; set; }\n        public string ISBN { get; set; } = \"\"\"\";\n    }\n    \n    private List<Book> books = new();\n    private Book currentBook = new();\n    private bool showForm = false;\n    private bool isEditing = false;\n    \n    protected override async Task OnInitializedAsync() {\n        await LoadBooks();\n    }\n    \n    private async Task LoadBooks() {\n        books = await Http.GetFromJsonAsync<List<Book>>(\"\"https://localhost:5001/api/books\"\") ?? new();\n    }\n    \n    private void ShowCreateForm() {\n        currentBook = new Book();\n        isEditing = false;\n        showForm = true;\n    }\n    \n    private void EditBook(Book book) {\n        currentBook = new Book {\n            Id = book.Id,\n            Title = book.Title,\n            Author = book.Author,\n            Year = book.Year,\n            ISBN = book.ISBN\n        };\n        isEditing = true;\n        showForm = true;\n    }\n    \n    private async Task SaveBook() {\n        if (isEditing) {\n            await Http.PutAsJsonAsync($\"\"https://localhost:5001/api/books/{currentBook.Id}\"\", currentBook);\n        } else {\n            await Http.PostAsJsonAsync(\"\"https://localhost:5001/api/books\"\", currentBook);\n        }\n        \n        showForm = false;\n        await LoadBooks();\n    }\n    \n    private async Task DeleteBook(int id) {\n        if (confirm(\\\"\"Delete this book?\\\"\")) {\n            await Http.DeleteAsync($\"\"https://localhost:5001/api/books/{id}\"\");\n            await LoadBooks();\n        }\n    }\n    \n    private void CancelForm() {\n        showForm = false;\n    }\n}\n\"\");\n\nConsole.WriteLine(@\"\n=== CRUD COMPLETE! ===\");\nConsole.WriteLine(\"✓ CREATE: POST with form data\");\nConsole.WriteLine(\"✓ READ: GET for list and details\");\nConsole.WriteLine(\"✓ UPDATE: PUT with modified data\");\nConsole.WriteLine(\"✓ DELETE: DELETE by ID\");\nConsole.WriteLine(\"\\nYou've built a complete data management system!\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"CRUD\"",
                  "expectedOutput": "CRUD",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"CREATE\"",
                  "expectedOutput": "CREATE",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"READ\"",
                  "expectedOutput": "READ",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"UPDATE\"",
                  "expectedOutput": "UPDATE",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"DELETE\"",
                  "expectedOutput": "DELETE",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"EditForm\"",
                  "expectedOutput": "EditForm",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "API: MapPost (Create), MapGet (Read), MapPut (Update), MapDelete (Delete). Blazor: EditForm for input, HttpClient for requests, reload after changes. Track isEditing for Create vs Update."
                },
                {
                  "level": 2,
                  "text": "Modifying original object: When editing, create NEW object copy! Otherwise, changes appear immediately in UI before save. Clone object: 'new Book { Id = book.Id, ... }'."
                },
                {
                  "level": 3,
                  "text": "Not reloading data: After Create/Update/Delete, UI shows stale data! Always reload: 'await LoadBooks();' after operations. Otherwise, database and UI out of sync."
                },
                {
                  "level": 4,
                  "text": "Missing confirmation: DELETE without confirmation is dangerous! Users accidentally click. Add: 'if (confirm(\"Delete?\"))' or modal dialog before delete."
                },
                {
                  "level": 5,
                  "text": "Form validation: EditForm needs validation! Add DataAnnotations: [Required], [StringLength], etc. Or use OnInvalidSubmit to handle errors. Validate before API call!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Modifying original object",
                  "consequence": "When editing, create NEW object copy! Otherwise, changes appear immediately in UI before save. Clone object: 'new Book { Id = book.Id, ... }'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not reloading data",
                  "consequence": "After Create/Update/Delete, UI shows stale data! Always reload: 'await LoadBooks();' after operations. Otherwise, database and UI out of sync.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Missing confirmation",
                  "consequence": "DELETE without confirmation is dangerous! Users accidentally click. Add: 'if (confirm(\"Delete?\"))' or modal dialog before delete.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Form validation",
                  "consequence": "EditForm needs validation! Add DataAnnotations: [Required], [StringLength], etc. Or use OnInvalidSubmit to handle errors. Validate before API call!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-14-03",
          "title": ".NET Aspire (Modern Distributed Apps)",
          "moduleId": "module-14",
          "order": 3,
          "estimatedMinutes": 20,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine building a restaurant chain:\n\nOLD WAY (docker-compose):\n- Write YAML files for each service\n- Manually configure networking\n- No visibility into what's happening\n- Debug by reading logs from 5 terminals\n\n.NET ASPIRE WAY:\n- One orchestrator project\n- Automatic service discovery\n- Dashboard shows EVERYTHING\n- Click to see traces, logs, metrics\n\n.NET Aspire = 'The conductor for your microservices orchestra. It knows where everyone is, when they're playing, and shows you the whole performance in real-time!'\n\nKey components:\n• AppHost - The orchestrator (defines your apps)\n• ServiceDefaults - Shared config (health checks, telemetry)\n• Dashboard - Real-time observability\n• Service Discovery - Apps find each other automatically"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates .NET Aspire in action.",
              "code": "// === APPHOST PROJECT (Orchestrator) ===\n// MyApp.AppHost/Program.cs\n\nvar builder = DistributedApplication.CreateBuilder(args);\n\n// Add a Redis cache\nvar cache = builder.AddRedis(\"cache\");\n\n// Add PostgreSQL database\nvar postgres = builder.AddPostgres(\"postgres\")\n    .AddDatabase(\"ordersdb\");\n\n// Add API service (references cache + db)\nvar api = builder.AddProject<Projects.OrdersApi>(\"orders-api\")\n    .WithReference(cache)\n    .WithReference(postgres);\n\n// Add Blazor frontend (references API)\nbuilder.AddProject<Projects.WebFrontend>(\"web-frontend\")\n    .WithReference(api);\n\nbuilder.Build().Run();\n\n// === SERVICE DEFAULTS ===\n// MyApp.ServiceDefaults/Extensions.cs\npublic static IHostApplicationBuilder AddServiceDefaults(\n    this IHostApplicationBuilder builder)\n{\n    // OpenTelemetry (automatic tracing!)\n    builder.ConfigureOpenTelemetry();\n    \n    // Health checks\n    builder.AddDefaultHealthChecks();\n    \n    // Service discovery\n    builder.Services.AddServiceDiscovery();\n    \n    return builder;\n}\n\n// === API PROJECT ===\n// OrdersApi/Program.cs\nvar builder = WebApplication.CreateBuilder(args);\n\n// Add Aspire service defaults\nbuilder.AddServiceDefaults();\n\n// Add Redis cache (Aspire handles connection!)\nbuilder.AddRedisClient(\"cache\");\n\n// Add PostgreSQL via EF Core\nbuilder.AddNpgsqlDbContext<OrdersDbContext>(\"ordersdb\");\n\nvar app = builder.Build();\n\napp.MapDefaultEndpoints(); // Health checks\napp.MapGet(\"/orders\", async (OrdersDbContext db) =>\n    await db.Orders.ToListAsync());\n\napp.Run();\n\n// === BENEFITS ===\n// 1. No connection strings! Aspire injects them\n// 2. Service discovery: Use \"orders-api\" as hostname\n// 3. Dashboard: See all logs, traces, metrics\n// 4. Health checks: Automatic\n// 5. Telemetry: Built-in OpenTelemetry",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`DistributedApplication.CreateBuilder()`**: Creates Aspire orchestrator. This is like WebApplication.CreateBuilder() but for multiple services.\n\n**`builder.AddProject<T>(\"name\")`**: Adds a .NET project to orchestration. The name becomes the service discovery hostname.\n\n**`.WithReference()`**: Connects services. Aspire injects connection strings automatically. No more appsettings.json connection string juggling!\n\n**`builder.AddRedis/Postgres()`**: Adds containers automatically. Aspire downloads and runs them. In production, swap to Azure/AWS versions.\n\n**`AddServiceDefaults()`**: Shared configuration. Adds OpenTelemetry, health checks, service discovery. Every service gets consistent observability."
            },
            {
              "type": "KEY_POINT",
              "title": "Key Takeaways",
              "content": "## Why .NET Aspire?\n\n**Before Aspire:** docker-compose.yml + manual networking + multiple terminals + no visibility = pain\n\n**With Aspire:** One C# project + automatic service discovery + beautiful dashboard + built-in telemetry = joy\n\n**Dashboard features:**\n- Real-time logs from all services\n- Distributed traces (see request flow!)\n- Metrics and health status\n- AI-powered error analysis (Aspire 9.3+)\n\n**When to use:** Any app with 2+ services, databases, or caches. Aspire makes local development feel like production."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Create an Aspire-orchestrated application architecture.",
              "instructions": "Design a .NET Aspire application!\n\nPrint the code structure for:\n\n1. AppHost (orchestrator):\n   - Add Redis cache\n   - Add SQL Server database\n   - Add 'catalog-api' project with references\n   - Add 'web-store' frontend with API reference\n\n2. Catalog API service:\n   - AddServiceDefaults()\n   - AddSqlServerDbContext for products\n   - MapDefaultEndpoints()\n   - GET /products endpoint\n\n3. Explain the benefits:\n   - No hardcoded connection strings\n   - Automatic service discovery\n   - Dashboard observability\n   - One-click debugging\n\nShow how Aspire replaces docker-compose!",
              "starterCode": "Console.WriteLine(\"=== .NET ASPIRE ARCHITECTURE ===\");\n\nConsole.WriteLine(\"\\n--- APPHOST PROJECT (Orchestrator) ---\");\nConsole.WriteLine(@\"\nvar builder = DistributedApplication.CreateBuilder(args);\n\n// TODO: Add Redis cache\n// TODO: Add SQL Server\n// TODO: Add catalog-api with references\n// TODO: Add web-store frontend\n\nbuilder.Build().Run();\n\");\n\nConsole.WriteLine(\"\\n--- CATALOG API PROJECT ---\");\n// TODO: Show API setup with Aspire\n\nConsole.WriteLine(\"\\n--- BENEFITS vs DOCKER-COMPOSE ---\");\n// TODO: List benefits",
              "solution": "Console.WriteLine(\"=== .NET ASPIRE ARCHITECTURE ===\");\n\nConsole.WriteLine(\"\\n--- APPHOST PROJECT (Orchestrator) ---\");\nConsole.WriteLine(@\"\n// MyStore.AppHost/Program.cs\nvar builder = DistributedApplication.CreateBuilder(args);\n\n// Infrastructure\nvar cache = builder.AddRedis(\"\"cache\"\");\nvar sql = builder.AddSqlServer(\"\"sql\"\")\n    .AddDatabase(\"\"catalogdb\"\");\n\n// Services\nvar catalogApi = builder.AddProject<Projects.CatalogApi>(\"\"catalog-api\"\")\n    .WithReference(cache)\n    .WithReference(sql);\n\n// Frontend\nbuilder.AddProject<Projects.WebStore>(\"\"web-store\"\")\n    .WithReference(catalogApi);\n\nbuilder.Build().Run();\n\");\n\nConsole.WriteLine(\"\\n--- CATALOG API PROJECT ---\");\nConsole.WriteLine(@\"\n// CatalogApi/Program.cs\nvar builder = WebApplication.CreateBuilder(args);\n\n// Aspire defaults (telemetry, health, discovery)\nbuilder.AddServiceDefaults();\n\n// Database (connection injected by Aspire!)\nbuilder.AddSqlServerDbContext<CatalogContext>(\"\"catalogdb\"\");\n\n// Cache (connection injected by Aspire!)\nbuilder.AddRedisClient(\"\"cache\"\");\n\nvar app = builder.Build();\n\n// Health endpoints for dashboard\napp.MapDefaultEndpoints();\n\n// API endpoints\napp.MapGet(\"\"/products\"\", async (CatalogContext db) =>\n    await db.Products.ToListAsync());\n\napp.Run();\n\");\n\nConsole.WriteLine(\"\\n--- WEB STORE FRONTEND ---\");\nConsole.WriteLine(@\"\n// WebStore/Program.cs\nvar builder = WebApplication.CreateBuilder(args);\nbuilder.AddServiceDefaults();\n\n// HttpClient with service discovery!\nbuilder.Services.AddHttpClient<CatalogClient>(client =>\n{\n    // \"\"catalog-api\"\" resolved by Aspire!\n    client.BaseAddress = new Uri(\"\"http://catalog-api\"\");\n});\n\nbuilder.Build().Run();\n\");\n\nConsole.WriteLine(\"\\n=== BENEFITS vs DOCKER-COMPOSE ===\");\nConsole.WriteLine(\"DOCKER-COMPOSE:\");\nConsole.WriteLine(\"  - Write YAML by hand\");\nConsole.WriteLine(\"  - Configure networks manually\");\nConsole.WriteLine(\"  - Hardcode connection strings\");\nConsole.WriteLine(\"  - No observability dashboard\");\nConsole.WriteLine(\"  - Debug with 'docker logs' commands\");\n\nConsole.WriteLine(\"\\n.NET ASPIRE:\");\nConsole.WriteLine(\"  + Write C# code\");\nConsole.WriteLine(\"  + Automatic networking\");\nConsole.WriteLine(\"  + Connection strings injected\");\nConsole.WriteLine(\"  + Beautiful dashboard (logs, traces, metrics)\");\nConsole.WriteLine(\"  + Click-to-debug in Visual Studio\");\nConsole.WriteLine(\"  + OpenTelemetry built-in\");\nConsole.WriteLine(\"  + Service discovery: just use service names!\");\n\nConsole.WriteLine(\"\\n.NET Aspire is the MODERN way to build distributed apps!\");",
              "language": "csharp",
              "testCases": [
                {"id": "test-1", "description": "Output contains 'ASPIRE'", "expectedOutput": "ASPIRE", "isVisible": true},
                {"id": "test-2", "description": "Output contains 'APPHOST'", "expectedOutput": "APPHOST", "isVisible": true},
                {"id": "test-3", "description": "Output contains 'AddRedis'", "expectedOutput": "AddRedis", "isVisible": true},
                {"id": "test-4", "description": "Output contains 'WithReference'", "expectedOutput": "WithReference", "isVisible": true},
                {"id": "test-5", "description": "Output contains 'ServiceDefaults'", "expectedOutput": "ServiceDefaults", "isVisible": true},
                {"id": "test-6", "description": "Output contains 'BENEFITS'", "expectedOutput": "BENEFITS", "isVisible": true}
              ],
              "hints": [
                {"level": 1, "text": "AppHost: DistributedApplication.CreateBuilder(), AddRedis(), AddSqlServer().AddDatabase(), AddProject<T>().WithReference(). APIs: AddServiceDefaults(), AddSqlServerDbContext()."},
                {"level": 2, "text": "Service discovery: Use service names as hostnames! 'http://catalog-api' works because Aspire handles DNS."},
                {"level": 3, "text": "No connection strings: Aspire injects them via .WithReference(). Your code never hardcodes 'Server=localhost;Database=...'"},
                {"level": 4, "text": "Dashboard: Run AppHost, visit http://localhost:15888. See all services, logs, traces in one place!"},
                {"level": 5, "text": "Production: Replace AddRedis() with AddAzureRedis() or similar. Same code, different infrastructure."}
              ],
              "commonMistakes": [
                {"mistake": "Still using docker-compose", "consequence": "Docker-compose is manual, error-prone, no observability. Aspire does everything automatically with a dashboard.", "correction": "Use Aspire for local dev. Docker-compose only for legacy or non-.NET services."},
                {"mistake": "Hardcoding connection strings", "consequence": "Aspire injects connections via .WithReference(). Hardcoding defeats the purpose and breaks service discovery.", "correction": "Let Aspire manage connections. Use AddSqlServerDbContext('name') not AddDbContext with connection string."},
                {"mistake": "Forgetting AddServiceDefaults()", "consequence": "Lose OpenTelemetry, health checks, and service discovery. Dashboard won't show full telemetry.", "correction": "Every Aspire service needs AddServiceDefaults() and MapDefaultEndpoints()."},
                {"mistake": "Not using service discovery", "consequence": "Using localhost:5001 instead of 'catalog-api' breaks when deploying. Service discovery works everywhere.", "correction": "Use service names from AppHost as hostnames. Aspire resolves them automatically."}
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-14-04",
          "title": "Version Control with Git (Save Your Work!)",
          "moduleId": "module-14",
          "order": 4,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Git is like a time machine for your code:\n\nWithout Git:\n• MyProject_v1.zip\n• MyProject_v2_FINAL.zip\n• MyProject_v2_FINAL_ACTUALLY_FINAL.zip\n• Mess!\n\nWith Git:\n• Track every change\n• Go back to any version\n• Work on features in branches\n• Collaborate with team\n• Never lose work!\n\nKey concepts:\n• COMMIT: Save snapshot of code\n• BRANCH: Work on features separately\n• PUSH: Upload to GitHub/Azure\n• PULL: Download from GitHub/Azure\n\nThink: Git = 'Professional version control. Every project needs it!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// GIT BASICS\n\n// Initialize repository\ngit init\n\n// Check status\ngit status\n\n// Add files to staging\ngit add .\ngit add Program.cs\n\n// Commit changes\ngit commit -m \"Add product CRUD endpoints\"\n\n// View history\ngit log\ngit log --oneline\n\n// BRANCHING\ngit branch feature/add-auth  // Create branch\ngit checkout feature/add-auth  // Switch to branch\ngit checkout -b feature/new-ui  // Create and switch\n\n// Work on feature, then merge\ngit checkout main\ngit merge feature/add-auth\n\n// REMOTE (GitHub/Azure DevOps)\ngit remote add origin https://github.com/user/repo.git\ngit push -u origin main\ngit pull origin main\n\n// TYPICAL WORKFLOW\n// 1. Create feature branch\ngit checkout -b feature/user-profile\n\n// 2. Make changes, commit often\ngit add .\ngit commit -m \"Add user profile page\"\n\n// 3. Push to remote\ngit push origin feature/user-profile\n\n// 4. Create Pull Request on GitHub\n// 5. Review, merge to main\n\n// USEFUL COMMANDS\ngit diff  // See changes\ngit restore Program.cs  // Undo changes\ngit reset --soft HEAD~1  // Undo last commit\ngit stash  // Save work temporarily\ngit stash pop  // Restore stashed work",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`git add / git commit`**: 'git add' stages files. 'git commit' saves snapshot. Commit message describes change. Use present tense: 'Add feature' not 'Added feature'.\n\n**`git branch / git checkout`**: Branches = separate timelines. Work on feature without affecting main. Checkout switches branches. Merge brings changes together.\n\n**`git push / git pull`**: Push uploads commits to GitHub. Pull downloads from GitHub. Sync with team! Push often to back up work.\n\n**`.gitignore`**: File listing what to ignore. Add: bin/, obj/, *.user, .vs/. Don't commit build outputs or secrets!"
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-04-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Git workflow simulation!\n\nSimulate these Git commands (print what each does):\n\n1. git init - Initialize repository\n2. git add . - Stage all files\n3. git commit -m \"Initial commit\" - First commit\n4. git status - Check status\n5. git branch feature/add-books - Create feature branch\n6. git checkout feature/add-books - Switch to branch\n7. (Make changes)\n8. git add .\n9. git commit -m \"Add book CRUD\"\n10. git checkout main - Back to main\n11. git merge feature/add-books - Merge feature\n12. git push origin main - Push to GitHub\n\nExplain each step!",
              "starterCode": "Console.WriteLine(\"=== GIT WORKFLOW SIMULATION ===\");\n\nConsole.WriteLine(\"\\n1. git init\");\nConsole.WriteLine(\"   Creates new Git repository in current folder\");\nConsole.WriteLine(\"   Initializes .git folder to track changes\");\n\n// Add other steps...",
              "solution": "Console.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  GIT VERSION CONTROL WORKFLOW\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\n\nConsole.WriteLine(\"STEP 1: Initialize Repository\");\nConsole.WriteLine(\"  Command: git init\");\nConsole.WriteLine(\"  Creates .git folder\");\nConsole.WriteLine(\"  Repository ready to track changes\\n\");\n\nConsole.WriteLine(\"STEP 2: Stage Files\");\nConsole.WriteLine(\"  Command: git add .\");\nConsole.WriteLine(\"  Stages all files for commit\");\nConsole.WriteLine(\"  Files in 'staging area' ready to commit\\n\");\n\nConsole.WriteLine(\"STEP 3: First Commit\");\nConsole.WriteLine(\"  Command: git commit -m 'Initial commit'\");\nConsole.WriteLine(\"  Saves snapshot of code\");\nConsole.WriteLine(\"  Commit ID: abc123... (unique hash)\\n\");\n\nConsole.WriteLine(\"STEP 4: Check Status\");\nConsole.WriteLine(\"  Command: git status\");\nConsole.WriteLine(\"  Shows: current branch, staged/unstaged files\");\nConsole.WriteLine(\"  Output: 'On branch main, nothing to commit'\\n\");\n\nConsole.WriteLine(\"STEP 5: Create Feature Branch\");\nConsole.WriteLine(\"  Command: git branch feature/add-books\");\nConsole.WriteLine(\"  Creates new branch for book feature\");\nConsole.WriteLine(\"  Doesn't switch yet - still on main\\n\");\n\nConsole.WriteLine(\"STEP 6: Switch to Feature Branch\");\nConsole.WriteLine(\"  Command: git checkout feature/add-books\");\nConsole.WriteLine(\"  Now working on feature branch\");\nConsole.WriteLine(\"  Changes won't affect main branch\\n\");\n\nConsole.WriteLine(\"STEP 7: Make Changes\");\nConsole.WriteLine(\"  Edit files: BookController.cs, BookService.cs\");\nConsole.WriteLine(\"  Add new files: Book.cs, IBookRepository.cs\\n\");\n\nConsole.WriteLine(\"STEP 8: Stage Changes\");\nConsole.WriteLine(\"  Command: git add .\");\nConsole.WriteLine(\"  Stages all modified and new files\\n\");\n\nConsole.WriteLine(\"STEP 9: Commit Feature\");\nConsole.WriteLine(\"  Command: git commit -m 'Add book CRUD operations'\");\nConsole.WriteLine(\"  Saves book feature snapshot\");\nConsole.WriteLine(\"  Feature complete on branch!\\n\");\n\nConsole.WriteLine(\"STEP 10: Return to Main\");\nConsole.WriteLine(\"  Command: git checkout main\");\nConsole.WriteLine(\"  Switches back to main branch\");\nConsole.WriteLine(\"  Book files disappear (they're on feature branch)\\n\");\n\nConsole.WriteLine(\"STEP 11: Merge Feature\");\nConsole.WriteLine(\"  Command: git merge feature/add-books\");\nConsole.WriteLine(\"  Brings book feature into main\");\nConsole.WriteLine(\"  Book files now in main branch!\\n\");\n\nConsole.WriteLine(\"STEP 12: Push to GitHub\");\nConsole.WriteLine(\"  Command: git push origin main\");\nConsole.WriteLine(\"  Uploads main branch to GitHub\");\nConsole.WriteLine(\"  Team can see changes, code is backed up!\\n\");\n\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"✓ Professional Git workflow complete!\");\nConsole.WriteLine(\"✓ Feature developed in isolation\");\nConsole.WriteLine(\"✓ Merged to main when ready\");\nConsole.WriteLine(\"✓ Pushed to remote for backup/collaboration\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"git init\"",
                  "expectedOutput": "git init",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"git add\"",
                  "expectedOutput": "git add",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"git commit\"",
                  "expectedOutput": "git commit",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"branch\"",
                  "expectedOutput": "branch",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"merge\"",
                  "expectedOutput": "merge",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"push\"",
                  "expectedOutput": "push",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "git init → add → commit. Create branch, checkout, make changes, commit. Checkout main, merge branch. Push to remote. Learn: add, commit, branch, merge, push!"
                },
                {
                  "level": 2,
                  "text": "Committing without staging: 'git commit' commits STAGED files only! Must 'git add' first. 'git commit -am' stages and commits modified files (but not new files!)."
                },
                {
                  "level": 3,
                  "text": "Merge conflicts: If same file edited in two branches, merge creates conflict! Git marks conflicts in file. Resolve manually, then 'git add' and 'git commit'."
                },
                {
                  "level": 4,
                  "text": "Not pulling before push: Always 'git pull' before 'git push'! If remote has changes you don't have, push rejected. Pull first, resolve conflicts, then push."
                },
                {
                  "level": 5,
                  "text": "Committing secrets: NEVER commit passwords, API keys, connection strings! Use .gitignore for appsettings.json. Use environment variables or Azure Key Vault."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Committing without staging",
                  "consequence": "'git commit' commits STAGED files only! Must 'git add' first. 'git commit -am' stages and commits modified files (but not new files!).",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Merge conflicts",
                  "consequence": "If same file edited in two branches, merge creates conflict! Git marks conflicts in file. Resolve manually, then 'git add' and 'git commit'.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not pulling before push",
                  "consequence": "Always 'git pull' before 'git push'! If remote has changes you don't have, push rejected. Pull first, resolve conflicts, then push.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Committing secrets",
                  "consequence": "NEVER commit passwords, API keys, connection strings! Use .gitignore for appsettings.json. Use environment variables or Azure Key Vault.",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-14-05",
          "title": "Deploying to Azure (Go Live!)",
          "moduleId": "module-14",
          "order": 5,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Deployment = Making your app available on the internet!\n\nLocal development (localhost):\n• Only YOU can access\n• Runs on your computer\n• Lost when computer off\n\nProduction (Azure):\n• EVERYONE can access\n• Runs in Microsoft data center\n• Always available (99.9% uptime!)\n\nAzure services for .NET:\n• Azure App Service - Host web apps/APIs\n• Azure SQL Database - Cloud database\n• Azure Blob Storage - File storage\n• Azure Key Vault - Secrets management\n\nThink: Azure = 'Microsoft's cloud platform. Professional hosting for your apps!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// AZURE APP SERVICE DEPLOYMENT\n\n// 1. Install Azure CLI\n// Download from: https://aka.ms/installazurecli\n\n// 2. Login to Azure\naz login\n\n// 3. Create Resource Group\naz group create --name MyAppRG --location eastus\n\n// 4. Create App Service Plan\naz appservice plan create \\\n  --name MyAppPlan \\\n  --resource-group MyAppRG \\\n  --sku B1 \\\n  --is-linux\n\n// 5. Create Web App\naz webapp create \\\n  --name MyUniqueAppName \\\n  --resource-group MyAppRG \\\n  --plan MyAppPlan \\\n  --runtime \"DOTNET|8.0\"\n\n// 6. Deploy from Git\naz webapp deployment source config \\\n  --name MyUniqueAppName \\\n  --resource-group MyAppRG \\\n  --repo-url https://github.com/user/repo \\\n  --branch main \\\n  --manual-integration\n\n// OR DEPLOY VIA VISUAL STUDIO\n// Right-click project → Publish → Azure → App Service\n// Follow wizard!\n\n// CONNECTION STRING IN AZURE\n// App Service → Configuration → Connection Strings\n// Add: Name=DefaultConnection, Value=your-sql-connection\n\n// ENVIRONMENT VARIABLES\n// Configuration → Application Settings\n// Add settings (API keys, secrets)\n\n// AZURE SQL DATABASE\naz sql server create \\\n  --name myserver123 \\\n  --resource-group MyAppRG \\\n  --location eastus \\\n  --admin-user sqladmin \\\n  --admin-password YourPassword123!\n\naz sql db create \\\n  --name MyDatabase \\\n  --server myserver123 \\\n  --resource-group MyAppRG \\\n  --service-objective S0\n\n// Update connection string in App Service\n// Server=myserver123.database.windows.net;\n// Database=MyDatabase;\n// User Id=sqladmin;\n// Password=YourPassword123!;\n\n// MONITORING\n// Azure Portal → App Service → Monitoring → Logs\n// View application logs, errors, performance",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`az login`**: Azure CLI authentication. Opens browser to login. Required before running az commands. Use 'az account show' to verify.\n\n**`Resource Group`**: Container for resources. Group related resources: app, database, storage. Easy to manage/delete together. Like folder for cloud resources.\n\n**`App Service Plan`**: Defines compute resources. B1 = Basic tier. F1 = Free (limited). P1V2 = Premium. Plan determines price and performance.\n\n**`Connection strings`**: Store in Azure Configuration, NOT code! Access via Environment.GetEnvironmentVariable(). Azure encrypts at rest."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-05-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Azure deployment simulation!\n\nPrint complete deployment workflow:\n\n1. Prepare app for production:\n   - Update connection strings to use environment variables\n   - Add health check endpoint\n   - Configure logging\n\n2. Azure CLI commands:\n   - Create resource group\n   - Create App Service plan\n   - Create web app\n   - Deploy code\n\n3. Post-deployment:\n   - Configure connection strings in Azure\n   - Set environment variables\n   - Enable HTTPS only\n   - Configure custom domain (optional)\n\n4. Monitoring:\n   - Check application logs\n   - Set up alerts\n   - Monitor performance\n\nPrint step-by-step guide!",
              "starterCode": "Console.WriteLine(\"=== AZURE DEPLOYMENT GUIDE ===\");\n\nConsole.WriteLine(\"\\nSTEP 1: Prepare Application\");\nConsole.WriteLine(\"  Update appsettings.json\");\nConsole.WriteLine(\"  Add health check\");\n\n// Continue with other steps...",
              "solution": "Console.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  AZURE DEPLOYMENT COMPLETE GUIDE\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\n\nConsole.WriteLine(\"PHASE 1: PREPARE APPLICATION\");\nConsole.WriteLine(\"\\n1.1 Update Connection Strings\");\nConsole.WriteLine(\"  Code: var connString = Environment.GetEnvironmentVariable(\\\"ConnectionString\\\");\");\nConsole.WriteLine(\"  Don't hardcode in appsettings.json!\");\n\nConsole.WriteLine(\"\\n1.2 Add Health Check\");\nConsole.WriteLine(\"  Code: app.MapHealthChecks(\\\"/health\\\");\");\nConsole.WriteLine(\"  Azure uses this to verify app is running\");\n\nConsole.WriteLine(\"\\n1.3 Configure Logging\");\nConsole.WriteLine(\"  Code: builder.Logging.AddAzureWebAppDiagnostics();\");\nConsole.WriteLine(\"  Sends logs to Azure Portal\");\n\nConsole.WriteLine(\"\\n\\nPHASE 2: AZURE CLI DEPLOYMENT\");\nConsole.WriteLine(\"\\n2.1 Login to Azure\");\nConsole.WriteLine(\"  $ az login\");\nConsole.WriteLine(\"  Opens browser, authenticate with Microsoft account\");\n\nConsole.WriteLine(\"\\n2.2 Create Resource Group\");\nConsole.WriteLine(\"  $ az group create --name MyAppRG --location eastus\");\nConsole.WriteLine(\"  Container for all resources\");\n\nConsole.WriteLine(\"\\n2.3 Create App Service Plan\");\nConsole.WriteLine(\"  $ az appservice plan create \\\\\");\nConsole.WriteLine(\"      --name MyAppPlan \\\\\");\nConsole.WriteLine(\"      --resource-group MyAppRG \\\\\");\nConsole.WriteLine(\"      --sku B1\");\nConsole.WriteLine(\"  B1 = Basic tier ($55/month)\");\n\nConsole.WriteLine(\"\\n2.4 Create Web App\");\nConsole.WriteLine(\"  $ az webapp create \\\\\");\nConsole.WriteLine(\"      --name MyUniqueAppName123 \\\\\");\nConsole.WriteLine(\"      --resource-group MyAppRG \\\\\");\nConsole.WriteLine(\"      --plan MyAppPlan \\\\\");\nConsole.WriteLine(\"      --runtime \\\"DOTNET|8.0\\\"\");\nConsole.WriteLine(\"  URL: https://myuniqueappname123.azurewebsites.net\");\n\nConsole.WriteLine(\"\\n2.5 Deploy via Git\");\nConsole.WriteLine(\"  $ az webapp deployment source config \\\\\");\nConsole.WriteLine(\"      --name MyUniqueAppName123 \\\\\");\nConsole.WriteLine(\"      --resource-group MyAppRG \\\\\");\nConsole.WriteLine(\"      --repo-url https://github.com/user/repo \\\\\");\nConsole.WriteLine(\"      --branch main\");\nConsole.WriteLine(\"  Azure pulls from GitHub, builds, deploys!\");\n\nConsole.WriteLine(\"\\n\\nPHASE 3: CONFIGURE PRODUCTION SETTINGS\");\nConsole.WriteLine(\"\\n3.1 Set Connection String\");\nConsole.WriteLine(\"  Azure Portal → App Service → Configuration → Connection Strings\");\nConsole.WriteLine(\"  Name: DefaultConnection\");\nConsole.WriteLine(\"  Value: Server=...;Database=...;User Id=...;Password=...;\");\nConsole.WriteLine(\"  Type: SQLAzure\");\n\nConsole.WriteLine(\"\\n3.2 Configure App Settings\");\nConsole.WriteLine(\"  Configuration → Application Settings\");\nConsole.WriteLine(\"  Add: API_KEY, EMAIL_SERVICE_URL, etc.\");\n\nConsole.WriteLine(\"\\n3.3 Enable HTTPS Only\");\nConsole.WriteLine(\"  Settings → Configuration → General Settings\");\nConsole.WriteLine(\"  HTTPS Only: On\");\nConsole.WriteLine(\"  Redirects HTTP → HTTPS automatically\");\n\nConsole.WriteLine(\"\\n3.4 Configure Custom Domain (Optional)\");\nConsole.WriteLine(\"  Custom Domains → Add custom domain\");\nConsole.WriteLine(\"  Domain: www.myapp.com\");\nConsole.WriteLine(\"  Add DNS CNAME record\");\n\nConsole.WriteLine(\"\\n\\nPHASE 4: MONITORING & MAINTENANCE\");\nConsole.WriteLine(\"\\n4.1 View Logs\");\nConsole.WriteLine(\"  Monitoring → Log stream\");\nConsole.WriteLine(\"  Real-time application logs\");\n\nConsole.WriteLine(\"\\n4.2 Set Up Alerts\");\nConsole.WriteLine(\"  Monitoring → Alerts → New alert rule\");\nConsole.WriteLine(\"  Alert if: Response time > 2s, Error rate > 5%\");\n\nConsole.WriteLine(\"\\n4.3 Monitor Performance\");\nConsole.WriteLine(\"  Application Insights → Performance\");\nConsole.WriteLine(\"  Track requests, dependencies, exceptions\");\n\nConsole.WriteLine(\"\\n4.4 Scale Up/Out\");\nConsole.WriteLine(\"  Scale Up: Bigger machine (more CPU/RAM)\");\nConsole.WriteLine(\"  Scale Out: More instances (load balancing)\");\n\nConsole.WriteLine(\"\\n═══════════════════════════════════════════\");\nConsole.WriteLine(\"✓ App deployed to Azure!\");\nConsole.WriteLine(\"✓ Accessible worldwide\");\nConsole.WriteLine(\"✓ Secure (HTTPS, secrets in Key Vault)\");\nConsole.WriteLine(\"✓ Monitored (logs, alerts, Application Insights)\");\nConsole.WriteLine(\"\\n🎉 YOU'RE LIVE ON THE INTERNET! 🎉\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"Azure\"",
                  "expectedOutput": "Azure",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"deployment\"",
                  "expectedOutput": "deployment",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"App Service\"",
                  "expectedOutput": "App Service",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"Configuration\"",
                  "expectedOutput": "Configuration",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"Monitoring\"",
                  "expectedOutput": "Monitoring",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Azure CLI: az login, az group create, az appservice plan create, az webapp create. Configure in Portal: Connection strings, App settings, HTTPS. Monitor: Logs, alerts, Application Insights."
                },
                {
                  "level": 2,
                  "text": "Connection string in code: NEVER commit connection strings! Use Azure Configuration or Key Vault. Access via Environment.GetEnvironmentVariable(). Secrets in config, not code!"
                },
                {
                  "level": 3,
                  "text": "CORS not configured: Blazor WebAssembly needs CORS! Add in API: app.UseCors(policy => policy.AllowAnyOrigin()). Without it, browser blocks requests."
                },
                {
                  "level": 4,
                  "text": "Not using HTTPS: Always enable 'HTTPS Only' in Azure! HTTP is insecure. SSL certificate automatic with Azure. No excuse for HTTP in production!"
                },
                {
                  "level": 5,
                  "text": "Ignoring costs: Azure costs money! Start with B1 or F1 (free). Monitor costs in Cost Management. Scale down when not needed. Don't leave expensive resources running!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Connection string in code",
                  "consequence": "NEVER commit connection strings! Use Azure Configuration or Key Vault. Access via Environment.GetEnvironmentVariable(). Secrets in config, not code!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "CORS not configured",
                  "consequence": "Blazor WebAssembly needs CORS! Add in API: app.UseCors(policy => policy.AllowAnyOrigin()). Without it, browser blocks requests.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Not using HTTPS",
                  "consequence": "Always enable 'HTTPS Only' in Azure! HTTP is insecure. SSL certificate automatic with Azure. No excuse for HTTP in production!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Ignoring costs",
                  "consequence": "Azure costs money! Start with B1 or F1 (free). Monitor costs in Cost Management. Scale down when not needed. Don't leave expensive resources running!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-14-06",
          "title": "Next Steps (Your Journey Continues!)",
          "moduleId": "module-14",
          "order": 6,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Congratulations! You've completed the C# Learning Platform!\n\nYou now know:\n✅ C# fundamentals (variables, loops, methods)\n✅ Object-Oriented Programming (classes, inheritance, interfaces)\n✅ Error handling and debugging\n✅ LINQ for data querying\n✅ Async programming\n✅ ASP.NET Core APIs\n✅ Entity Framework Core + databases\n✅ Blazor for web UIs\n✅ Full-stack development\n✅ Git version control\n✅ Azure deployment\n\nYou're now a FULL-STACK .NET DEVELOPER!\n\nBut learning never stops. Here's what's next..."
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// YOUR LEARNING PATH CONTINUES:\n\n// DEEPEN YOUR SKILLS:\n// 1. Advanced C# Features\n//    - Delegates & Events\n//    - Reflection & Attributes\n//    - Expression Trees\n//    - Span<T> & Memory<T>\n\n// 2. Design Patterns\n//    - Repository Pattern\n//    - Unit of Work\n//    - Factory Pattern\n//    - Dependency Injection (advanced)\n\n// 3. Testing\n//    - Unit Testing (xUnit, NUnit)\n//    - Integration Testing\n//    - Mocking (Moq)\n//    - Test-Driven Development (TDD)\n\n// 4. Performance\n//    - Profiling & Optimization\n//    - Caching (Redis)\n//    - Message Queues (RabbitMQ, Azure Service Bus)\n//    - Microservices Architecture\n\n// 5. Security\n//    - Authentication (JWT, OAuth)\n//    - Authorization (Role/Policy-based)\n//    - OWASP Top 10\n//    - Secure coding practices\n\n// EXPLORE NEW TECHNOLOGIES:\n// - gRPC for high-performance APIs\n// - SignalR for real-time communication\n// - Azure Functions (serverless)\n// - Docker & Kubernetes\n// - .NET MAUI (cross-platform mobile)\n\n// BUILD PROJECTS:\n// - E-commerce site\n// - Social media platform\n// - Real-time chat app\n// - Task management system\n// - Portfolio website\n\n// JOIN THE COMMUNITY:\n// - GitHub: Contribute to open-source\n// - Stack Overflow: Ask & answer questions\n// - Twitter/X: Follow .NET developers\n// - Local meetups & conferences\n// - .NET Blog: devblogs.microsoft.com/dotnet",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`Continuous Learning`**: Technology evolves fast! New C# features every year. Follow Microsoft Docs, blogs, YouTube channels. Stay current!\n\n**`Build Projects`**: Best way to learn: BUILD! Start small, iterate. Share on GitHub. Projects > Tutorials for learning.\n\n**`Join Community`**: Developers help developers! Ask questions, share knowledge. Twitter, Discord, Stack Overflow. You're not alone!\n\n**`Get Certified`**: Microsoft certifications: AZ-204 (Azure Developer), AZ-900 (Azure Fundamentals). Validates skills, helps career."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-14-06-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create your learning roadmap!\n\nPrint a personalized plan with:\n\n1. What you've learned (review curriculum)\n2. Skills to deepen (pick 3 topics)\n3. Projects to build (3 project ideas)\n4. Resources to explore:\n   - Microsoft Learn paths\n   - YouTube channels\n   - Books to read\n   - Communities to join\n5. 30-day action plan\n6. 90-day goals\n7. 1-year vision\n\nThis is YOUR roadmap to mastery!",
              "starterCode": "Console.WriteLine(\"=== MY C# LEARNING ROADMAP ===\");\n\nConsole.WriteLine(\"\\nWHAT I'VE LEARNED:\");\nConsole.WriteLine(\"  ✓ C# fundamentals\");\nConsole.WriteLine(\"  ✓ OOP principles\");\n// List other topics...\n\nConsole.WriteLine(\"\\nNEXT SKILLS TO MASTER:\");\nConsole.WriteLine(\"  1. Testing (xUnit)\");\n// Add your choices...",
              "solution": "Console.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  YOUR C# MASTERY ROADMAP\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\n\nConsole.WriteLine(\"🎓 WHAT YOU'VE MASTERED:\");\nConsole.WriteLine(\"  ✓ C# Fundamentals (variables, loops, methods, classes)\");\nConsole.WriteLine(\"  ✓ Object-Oriented Programming (inheritance, polymorphism, interfaces)\");\nConsole.WriteLine(\"  ✓ Error Handling (try/catch, custom exceptions)\");\nConsole.WriteLine(\"  ✓ LINQ (querying, filtering, transforming data)\");\nConsole.WriteLine(\"  ✓ Async/Await (responsive applications)\");\nConsole.WriteLine(\"  ✓ ASP.NET Core (RESTful APIs, Minimal APIs)\");\nConsole.WriteLine(\"  ✓ Entity Framework Core (ORM, Code-First, migrations)\");\nConsole.WriteLine(\"  ✓ Blazor (interactive web UIs with C#)\");\nConsole.WriteLine(\"  ✓ Full-Stack Development (Frontend + Backend + Database)\");\nConsole.WriteLine(\"  ✓ Git (version control, branching, merging)\");\nConsole.WriteLine(\"  ✓ Azure (cloud deployment, App Service)\");\nConsole.WriteLine(\"\\n  🏆 YOU'RE A FULL-STACK .NET DEVELOPER!\\n\");\n\nConsole.WriteLine(\"📚 SKILLS TO DEEPEN (Choose 3):\");\nConsole.WriteLine(\"  1. Testing (xUnit, Integration Tests, TDD)\");\nConsole.WriteLine(\"  2. Authentication & Security (JWT, OAuth, Identity)\");\nConsole.WriteLine(\"  3. Performance Optimization (Caching, Profiling)\");\nConsole.WriteLine(\"  4. Design Patterns (Repository, Factory, Strategy)\");\nConsole.WriteLine(\"  5. Microservices (Docker, Kubernetes, Service Bus)\");\nConsole.WriteLine(\"  6. Real-time Features (SignalR)\");\nConsole.WriteLine(\"  7. Mobile Development (.NET MAUI)\");\nConsole.WriteLine(\"  8. Advanced EF Core (Raw SQL, Global Filters, Interceptors)\\n\");\n\nConsole.WriteLine(\"💡 PROJECTS TO BUILD:\");\nConsole.WriteLine(\"  1. E-Commerce Platform\");\nConsole.WriteLine(\"     - Product catalog, shopping cart, payment\");\nConsole.WriteLine(\"     - Blazor frontend, API backend, SQL database\");\nConsole.WriteLine(\"     - Deploy to Azure\");\nConsole.WriteLine(\"\\n  2. Real-Time Chat Application\");\nConsole.WriteLine(\"     - SignalR for real-time messages\");\nConsole.WriteLine(\"     - User authentication\");\nConsole.WriteLine(\"     - Message history with EF Core\");\nConsole.WriteLine(\"\\n  3. Task Management System (like Jira)\");\nConsole.WriteLine(\"     - Boards, lists, cards\");\nConsole.WriteLine(\"     - Drag-and-drop (Blazor)\");\nConsole.WriteLine(\"     - Team collaboration features\\n\");\n\nConsole.WriteLine(\"📖 LEARNING RESOURCES:\");\nConsole.WriteLine(\"\\n  Microsoft Learn (FREE!):\");\nConsole.WriteLine(\"  - learn.microsoft.com/training\");\nConsole.WriteLine(\"  - Paths: ASP.NET Core, Blazor, Azure\");\nConsole.WriteLine(\"\\n  YouTube Channels:\");\nConsole.WriteLine(\"  - IAmTimCorey (C# fundamentals & best practices)\");\nConsole.WriteLine(\"  - Nick Chapsas (Advanced C# & performance)\");\nConsole.WriteLine(\"  - dotnet (Official Microsoft channel)\");\nConsole.WriteLine(\"\\n  Books:\");\nConsole.WriteLine(\"  - 'C# 12 and .NET 8' by Mark J. Price\");\nConsole.WriteLine(\"  - 'Clean Code' by Robert C. Martin\");\nConsole.WriteLine(\"  - 'Designing Data-Intensive Applications' by Martin Kleppmann\");\nConsole.WriteLine(\"\\n  Communities:\");\nConsole.WriteLine(\"  - r/dotnet on Reddit\");\nConsole.WriteLine(\"  - .NET Discord Server\");\nConsole.WriteLine(\"  - Stack Overflow (ask & answer!)\");\nConsole.WriteLine(\"  - Twitter/X: #dotnet, #csharp\\n\");\n\nConsole.WriteLine(\"🎯 30-DAY ACTION PLAN:\");\nConsole.WriteLine(\"  Week 1: Build simple CRUD API with tests\");\nConsole.WriteLine(\"  Week 2: Add JWT authentication\");\nConsole.WriteLine(\"  Week 3: Create Blazor frontend\");\nConsole.WriteLine(\"  Week 4: Deploy to Azure, add CI/CD\\n\");\n\nConsole.WriteLine(\"🚀 90-DAY GOALS:\");\nConsole.WriteLine(\"  - Complete 1 major project\");\nConsole.WriteLine(\"  - Contribute to 1 open-source project\");\nConsole.WriteLine(\"  - Answer 10 Stack Overflow questions\");\nConsole.WriteLine(\"  - Learn 1 advanced topic deeply\");\nConsole.WriteLine(\"  - Blog about your learning\\n\");\n\nConsole.WriteLine(\"🌟 1-YEAR VISION:\");\nConsole.WriteLine(\"  - Portfolio with 3+ impressive projects\");\nConsole.WriteLine(\"  - Microsoft certification (AZ-204 or similar)\");\nConsole.WriteLine(\"  - Active in developer community\");\nConsole.WriteLine(\"  - Confident applying for .NET developer roles\");\nConsole.WriteLine(\"  - Mentoring other beginners\\n\");\n\nConsole.WriteLine(\"═══════════════════════════════════════════\");\nConsole.WriteLine(\"  FINAL WORDS\");\nConsole.WriteLine(\"═══════════════════════════════════════════\\n\");\nConsole.WriteLine(\"You've come from absolute beginner to full-stack developer.\");\nConsole.WriteLine(\"That's an incredible achievement!\");\nConsole.WriteLine(\"\\nRemember:\");\nConsole.WriteLine(\"  ✓ Learning is a journey, not a destination\");\nConsole.WriteLine(\"  ✓ Build projects - they're your best teacher\");\nConsole.WriteLine(\"  ✓ Share your knowledge - teaching solidifies learning\");\nConsole.WriteLine(\"  ✓ Don't compare your chapter 1 to someone's chapter 20\");\nConsole.WriteLine(\"  ✓ The developer community is welcoming - ask questions!\");\nConsole.WriteLine(\"\\nThe C# and .NET ecosystem is vast and exciting.\");\nConsole.WriteLine(\"You now have the foundation to explore any direction.\");\nConsole.WriteLine(\"\\nKeep coding, keep learning, keep building.\");\nConsole.WriteLine(\"\\n🎉 CONGRATULATIONS ON COMPLETING THE COURSE! 🎉\");\nConsole.WriteLine(\"\\nNow go build something amazing! 🚀\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain \"ROADMAP\"",
                  "expectedOutput": "ROADMAP",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should contain \"MASTERED\"",
                  "expectedOutput": "MASTERED",
                  "isVisible": true
                },
                {
                  "id": "test-3",
                  "description": "Output should contain \"PROJECTS\"",
                  "expectedOutput": "PROJECTS",
                  "isVisible": true
                },
                {
                  "id": "test-4",
                  "description": "Output should contain \"RESOURCES\"",
                  "expectedOutput": "RESOURCES",
                  "isVisible": true
                },
                {
                  "id": "test-5",
                  "description": "Output should contain \"GOALS\"",
                  "expectedOutput": "GOALS",
                  "isVisible": true
                },
                {
                  "id": "test-6",
                  "description": "Output should contain \"CONGRATULATIONS\"",
                  "expectedOutput": "CONGRATULATIONS",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Reflect on journey. Plan next steps. Set goals (30/90/365 days). List resources. Choose projects. Join community. Keep learning!"
                },
                {
                  "level": 2,
                  "text": "Tutorial hell: Don't just watch tutorials! BUILD projects. Learning-by-doing is 10x more effective. Stop watching, start coding!"
                },
                {
                  "level": 3,
                  "text": "Imposter syndrome: Every developer feels this! Even experts. It's normal. Keep building, you know more than you think!"
                },
                {
                  "level": 4,
                  "text": "Analysis paralysis: Don't endlessly research 'best practices'. Start building, refactor later. Progress > Perfection."
                },
                {
                  "level": 5,
                  "text": "Isolated learning: Join communities! Pair programming, code reviews, discussions teach more than solo study. Connect with other developers!"
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Tutorial hell",
                  "consequence": "Don't just watch tutorials! BUILD projects. Learning-by-doing is 10x more effective. Stop watching, start coding!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Imposter syndrome",
                  "consequence": "Every developer feels this! Even experts. It's normal. Keep building, you know more than you think!",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Analysis paralysis",
                  "consequence": "Don't endlessly research 'best practices'. Start building, refactor later. Progress > Perfection.",
                  "correction": "Review the correct syntax and best practices for this concept."
                },
                {
                  "mistake": "Isolated learning",
                  "consequence": "Join communities! Pair programming, code reviews, discussions teach more than solo study. Connect with other developers!",
                  "correction": "Review the correct syntax and best practices for this concept."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    },
    {
      "id": "module-15",
      "title": "Unit Testing with xUnit",
      "description": "Master unit testing fundamentals with xUnit, mocking dependencies with Moq/NSubstitute, and integration testing patterns for robust, maintainable code.",
      "difficulty": "intermediate",
      "estimatedHours": 2,
      "lessons": [
        {
          "id": "lesson-15-01",
          "title": "xUnit Testing Fundamentals (The Quality Check)",
          "moduleId": "module-15",
          "order": 1,
          "estimatedMinutes": 20,
          "difficulty": "intermediate",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine you're a chef. Before serving a dish to customers, you TASTE it first!\n\nThat's what UNIT TESTING is:\n• UNIT = One small piece of code (a method, a class)\n• TEST = Code that checks if that piece works correctly\n• xUnit = Popular testing framework for .NET\n\nWhy test?\n• Find bugs BEFORE users do\n• Refactor safely - tests catch breaking changes\n• Document behavior - tests show how code should work\n• Confidence - deploy knowing things work!\n\nANATOMY OF A TEST (AAA Pattern):\n1. ARRANGE - Set up test data and conditions\n2. ACT - Call the method being tested\n3. ASSERT - Verify the result is correct\n\nThink: 'Unit tests are automated quality checks that run in milliseconds!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// STEP 1: Install xUnit packages\n// dotnet add package xunit\n// dotnet add package xunit.runner.visualstudio\n// dotnet add package Microsoft.NET.Test.Sdk\n\nusing Xunit;\n\n// ===== THE CODE TO TEST =====\npublic class Calculator\n{\n    public int Add(int a, int b) => a + b;\n    public int Subtract(int a, int b) => a - b;\n    public int Divide(int a, int b)\n    {\n        if (b == 0) throw new DivideByZeroException();\n        return a / b;\n    }\n}\n\n// ===== THE TESTS =====\npublic class CalculatorTests\n{\n    // [Fact] = A single test case\n    [Fact]\n    public void Add_TwoPositiveNumbers_ReturnsSum()\n    {\n        // ARRANGE\n        var calculator = new Calculator();\n        \n        // ACT\n        int result = calculator.Add(3, 5);\n        \n        // ASSERT\n        Assert.Equal(8, result);\n    }\n    \n    [Fact]\n    public void Add_NegativeNumbers_ReturnsCorrectSum()\n    {\n        var calculator = new Calculator();\n        Assert.Equal(-8, calculator.Add(-3, -5));\n    }\n    \n    // [Theory] + [InlineData] = Parameterized tests\n    [Theory]\n    [InlineData(10, 5, 5)]\n    [InlineData(100, 25, 75)]\n    [InlineData(0, 0, 0)]\n    public void Subtract_VariousInputs_ReturnsCorrectDifference(\n        int a, int b, int expected)\n    {\n        var calculator = new Calculator();\n        Assert.Equal(expected, calculator.Subtract(a, b));\n    }\n    \n    // Testing exceptions\n    [Fact]\n    public void Divide_ByZero_ThrowsException()\n    {\n        var calculator = new Calculator();\n        \n        // Assert.Throws checks that an exception is thrown\n        Assert.Throws<DivideByZeroException>(\n            () => calculator.Divide(10, 0)\n        );\n    }\n}\n\n// ===== COMMON ASSERTIONS =====\n// Assert.Equal(expected, actual)      - Values match\n// Assert.NotEqual(expected, actual)   - Values don't match\n// Assert.True(condition)              - Condition is true\n// Assert.False(condition)             - Condition is false\n// Assert.Null(object)                 - Object is null\n// Assert.NotNull(object)              - Object is not null\n// Assert.Throws<T>(() => code)        - Code throws exception\n// Assert.Contains(item, collection)   - Collection contains item\n// Assert.Empty(collection)            - Collection is empty\n\n// Run tests: dotnet test\nConsole.WriteLine(\"Run tests with: dotnet test\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`[Fact]`**: Marks a method as a test. Method must be public, void (or Task for async), with no parameters. xUnit discovers and runs all [Fact] methods.\n\n**`[Theory] + [InlineData]`**: Parameterized tests! Run the same test with different inputs. Each [InlineData] creates a separate test case. Great for testing multiple scenarios efficiently.\n\n**`Assert.Equal(expected, actual)`**: Core assertion. IMPORTANT: expected comes FIRST! 'Assert.Equal(5, result)' not 'Assert.Equal(result, 5)'. Wrong order = confusing failure messages.\n\n**`Assert.Throws<TException>(() => code)`**: Verifies that code throws a specific exception. If no exception or wrong type, test fails. Use lambda to wrap the throwing code.\n\n**`Test naming: Method_Scenario_Expected`**: Convention: 'Add_TwoPositiveNumbers_ReturnsSum'. Clear names document behavior and make failures obvious."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-15-01-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create unit tests for a StringHelper class!\n\n1. Create a StringHelper class with methods:\n   - Reverse(string s) - Reverses a string\n   - IsPalindrome(string s) - True if string reads same forwards/backwards\n   - CountWords(string s) - Counts words separated by spaces\n\n2. Write tests for each method:\n   - Test Reverse with normal string\n   - Test IsPalindrome with 'racecar' (true) and 'hello' (false)\n   - Test CountWords with 'hello world' (2 words)\n   - Test edge case: empty string\n\nUse [Fact] for single tests, [Theory] for multiple inputs!",
              "starterCode": "using Xunit;\n\npublic class StringHelper\n{\n    public string Reverse(string s)\n    {\n        // Implement: reverse the string\n        return new string(s.Reverse().ToArray());\n    }\n    \n    public bool IsPalindrome(string s)\n    {\n        // Implement: check if palindrome\n        return s == Reverse(s);\n    }\n    \n    public int CountWords(string s)\n    {\n        // Implement: count words\n        if (string.IsNullOrWhiteSpace(s)) return 0;\n        return s.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length;\n    }\n}\n\npublic class StringHelperTests\n{\n    [Fact]\n    public void Reverse_NormalString_ReversesCorrectly()\n    {\n        // Arrange\n        var helper = new StringHelper();\n        \n        // Act\n        string result = helper.Reverse(\"hello\");\n        \n        // Assert\n        Assert.Equal(/* expected */, result);\n    }\n    \n    [Theory]\n    [InlineData(\"racecar\", true)]\n    [InlineData(\"hello\", false)]\n    public void IsPalindrome_VariousInputs_ReturnsCorrectResult(\n        string input, bool expected)\n    {\n        // Write test\n    }\n    \n    // Add more tests for CountWords and edge cases!\n}",
              "solution": "using Xunit;\n\npublic class StringHelper\n{\n    public string Reverse(string s)\n    {\n        return new string(s.Reverse().ToArray());\n    }\n    \n    public bool IsPalindrome(string s)\n    {\n        return s.ToLower() == Reverse(s.ToLower());\n    }\n    \n    public int CountWords(string s)\n    {\n        if (string.IsNullOrWhiteSpace(s)) return 0;\n        return s.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length;\n    }\n}\n\npublic class StringHelperTests\n{\n    [Fact]\n    public void Reverse_NormalString_ReversesCorrectly()\n    {\n        var helper = new StringHelper();\n        string result = helper.Reverse(\"hello\");\n        Assert.Equal(\"olleh\", result);\n    }\n    \n    [Theory]\n    [InlineData(\"racecar\", true)]\n    [InlineData(\"hello\", false)]\n    [InlineData(\"Racecar\", true)]\n    public void IsPalindrome_VariousInputs_ReturnsCorrectResult(\n        string input, bool expected)\n    {\n        var helper = new StringHelper();\n        Assert.Equal(expected, helper.IsPalindrome(input));\n    }\n    \n    [Theory]\n    [InlineData(\"hello world\", 2)]\n    [InlineData(\"one\", 1)]\n    [InlineData(\"a b c d e\", 5)]\n    public void CountWords_VariousInputs_ReturnsCorrectCount(\n        string input, int expected)\n    {\n        var helper = new StringHelper();\n        Assert.Equal(expected, helper.CountWords(input));\n    }\n    \n    [Fact]\n    public void CountWords_EmptyString_ReturnsZero()\n    {\n        var helper = new StringHelper();\n        Assert.Equal(0, helper.CountWords(\"\"));\n    }\n    \n    [Fact]\n    public void Reverse_EmptyString_ReturnsEmpty()\n    {\n        var helper = new StringHelper();\n        Assert.Equal(\"\", helper.Reverse(\"\"));\n    }\n}\n\nConsole.WriteLine(\"Tests defined! Run with: dotnet test\");\nConsole.WriteLine(\"Test: Reverse('hello') = 'olleh'\");\nConsole.WriteLine(\"Test: IsPalindrome('racecar') = true\");\nConsole.WriteLine(\"Test: CountWords('hello world') = 2\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain test definition",
                  "expectedOutput": "Test",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should show Reverse test",
                  "expectedOutput": "Reverse",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "AAA Pattern: Arrange (setup), Act (call method), Assert (verify). Every test follows this structure!"
                },
                {
                  "level": 2,
                  "text": "[Fact] for single test cases. [Theory] with [InlineData] for multiple inputs testing same logic."
                },
                {
                  "level": 3,
                  "text": "Assert.Equal(expected, actual): EXPECTED FIRST! Common mistake is reversing the order."
                },
                {
                  "level": 4,
                  "text": "Edge cases matter! Test empty strings, nulls, single characters. These often reveal bugs."
                },
                {
                  "level": 5,
                  "text": "Test naming: Method_Scenario_Expected. Example: 'CountWords_EmptyString_ReturnsZero'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Wrong Assert.Equal order",
                  "consequence": "Assert.Equal(actual, expected) produces confusing failure messages! 'Expected: [your result], Actual: [what you expected]'. Always put expected FIRST.",
                  "correction": "Use Assert.Equal(expected, actual). Think: 'I expect THIS, and the actual result is THAT'."
                },
                {
                  "mistake": "Not testing edge cases",
                  "consequence": "Code works for 'hello' but crashes on empty string or null! Real apps receive unexpected inputs. Edge cases reveal bugs.",
                  "correction": "Always test: empty string, null, single element, very large inputs, negative numbers, boundary values."
                },
                {
                  "mistake": "Testing implementation instead of behavior",
                  "consequence": "Tests break when you refactor! If you test 'list has 3 items after calling private method X', refactoring X breaks tests. Test PUBLIC behavior.",
                  "correction": "Test WHAT code does, not HOW it does it. Test inputs and outputs, not internal implementation details."
                },
                {
                  "mistake": "Multiple asserts per test (without good reason)",
                  "consequence": "First failure stops the test! Other assertions never run. Hard to know full scope of failure.",
                  "correction": "Prefer one logical assertion per test. Multiple asserts OK if testing one cohesive thing (like all properties of returned object)."
                }
              ],
              "difficulty": "intermediate"
            }
          ]
        },
        {
          "id": "lesson-15-02",
          "title": "Mocking Dependencies (Fake Collaborators)",
          "moduleId": "module-15",
          "order": 2,
          "estimatedMinutes": 20,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Imagine testing a car's engine. You don't need the ACTUAL wheels, fuel tank, and exhaust - you just need to verify the engine works!\n\nSame with code:\n• Your class (Engine) depends on other classes (Database, EmailService, PaymentAPI)\n• In tests, you don't want REAL database calls or emails sent!\n• Use MOCKS - fake versions that simulate dependencies\n\nMOCKING FRAMEWORKS:\n• Moq - Most popular, fluent API, Setup().Returns()\n• NSubstitute - Clean syntax, Substitute.For<T>()\n• FakeItEasy - Easy to read, A.Fake<T>()\n\nWHY MOCK?\n• Isolate unit under test\n• Control dependency behavior\n• Avoid side effects (real DB, emails, payments)\n• Test edge cases (simulate errors, timeouts)\n• Fast tests (no network/disk I/O)\n\nThink: 'Mocks are stunt doubles - they look like the real thing but are safe for testing!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// Install: dotnet add package Moq\nusing Moq;\nusing Xunit;\n\n// ===== INTERFACES (Dependencies) =====\npublic interface IEmailService\n{\n    bool SendEmail(string to, string subject, string body);\n}\n\npublic interface IUserRepository\n{\n    User GetById(int id);\n    void Save(User user);\n}\n\npublic class User\n{\n    public int Id { get; set; }\n    public string Email { get; set; }\n    public bool IsVerified { get; set; }\n}\n\n// ===== CLASS UNDER TEST =====\npublic class UserService\n{\n    private readonly IUserRepository _repo;\n    private readonly IEmailService _email;\n    \n    public UserService(IUserRepository repo, IEmailService email)\n    {\n        _repo = repo;\n        _email = email;\n    }\n    \n    public bool VerifyUser(int userId)\n    {\n        var user = _repo.GetById(userId);\n        if (user == null) return false;\n        \n        user.IsVerified = true;\n        _repo.Save(user);\n        _email.SendEmail(user.Email, \"Verified!\", \"Your account is verified.\");\n        \n        return true;\n    }\n}\n\n// ===== TESTS WITH MOCKS =====\npublic class UserServiceTests\n{\n    [Fact]\n    public void VerifyUser_ValidUser_SetsVerifiedAndSendsEmail()\n    {\n        // ARRANGE - Create mocks\n        var mockRepo = new Mock<IUserRepository>();\n        var mockEmail = new Mock<IEmailService>();\n        \n        var testUser = new User { Id = 1, Email = \"test@test.com\" };\n        \n        // Setup mock behavior\n        mockRepo.Setup(r => r.GetById(1)).Returns(testUser);\n        mockEmail.Setup(e => e.SendEmail(\n            It.IsAny<string>(),\n            It.IsAny<string>(),\n            It.IsAny<string>()\n        )).Returns(true);\n        \n        // Create service with mocks\n        var service = new UserService(mockRepo.Object, mockEmail.Object);\n        \n        // ACT\n        bool result = service.VerifyUser(1);\n        \n        // ASSERT\n        Assert.True(result);\n        Assert.True(testUser.IsVerified);  // User was modified\n        \n        // Verify mock was called correctly\n        mockRepo.Verify(r => r.Save(testUser), Times.Once);\n        mockEmail.Verify(e => e.SendEmail(\n            \"test@test.com\",\n            \"Verified!\",\n            It.IsAny<string>()\n        ), Times.Once);\n    }\n    \n    [Fact]\n    public void VerifyUser_UserNotFound_ReturnsFalse()\n    {\n        var mockRepo = new Mock<IUserRepository>();\n        var mockEmail = new Mock<IEmailService>();\n        \n        // Setup: GetById returns null\n        mockRepo.Setup(r => r.GetById(999)).Returns((User)null);\n        \n        var service = new UserService(mockRepo.Object, mockEmail.Object);\n        \n        bool result = service.VerifyUser(999);\n        \n        Assert.False(result);\n        // Verify Save was NEVER called\n        mockRepo.Verify(r => r.Save(It.IsAny<User>()), Times.Never);\n    }\n}\n\nConsole.WriteLine(\"Mock examples defined!\");\nConsole.WriteLine(\"Key Moq methods:\");\nConsole.WriteLine(\"  mock.Setup(x => x.Method()).Returns(value)\");\nConsole.WriteLine(\"  mock.Verify(x => x.Method(), Times.Once)\");\nConsole.WriteLine(\"  mock.Object - get the mocked instance\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`new Mock<IInterface>()`**: Creates a mock object that implements the interface. All methods return default values unless you Setup() them.\n\n**`mock.Setup(x => x.Method(params)).Returns(value)`**: Configure what the mock returns when a method is called. Use It.IsAny<T>() for 'any argument of type T'.\n\n**`mock.Object`**: Gets the actual mock instance to inject into your class. This is what you pass to constructors.\n\n**`mock.Verify(x => x.Method(), Times.Once)`**: Verify that a method was called. Times options: Once, Never, Exactly(n), AtLeast(n), AtMost(n). Fails if condition not met.\n\n**`It.IsAny<T>()`**: Match any argument of type T. Use in Setup or Verify. Example: 'It.IsAny<string>()' matches any string.\n\n**`It.Is<T>(predicate)`**: Match arguments that satisfy a condition. Example: 'It.Is<int>(x => x > 0)' matches positive integers."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-15-02-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create tests with mocks for an OrderService!\n\n1. Define interfaces:\n   - IInventoryService: bool CheckStock(string productId, int quantity)\n   - IPaymentService: bool ProcessPayment(decimal amount)\n\n2. Create OrderService class:\n   - Constructor takes IInventoryService and IPaymentService\n   - Method: PlaceOrder(string productId, int quantity, decimal price)\n   - Returns true if stock available AND payment succeeds\n   - Returns false if no stock OR payment fails\n\n3. Write tests using Moq:\n   - Test successful order (stock OK, payment OK)\n   - Test failed order (no stock)\n   - Test failed order (payment fails)\n   - Verify each service was called correctly\n\nUse Setup(), Returns(), Verify()!",
              "starterCode": "using Moq;\nusing Xunit;\n\npublic interface IInventoryService\n{\n    bool CheckStock(string productId, int quantity);\n}\n\npublic interface IPaymentService\n{\n    bool ProcessPayment(decimal amount);\n}\n\npublic class OrderService\n{\n    private readonly IInventoryService _inventory;\n    private readonly IPaymentService _payment;\n    \n    public OrderService(IInventoryService inventory, IPaymentService payment)\n    {\n        _inventory = inventory;\n        _payment = payment;\n    }\n    \n    public bool PlaceOrder(string productId, int quantity, decimal price)\n    {\n        // Implement: check stock, then process payment\n        // Return true only if BOTH succeed\n        return false; // TODO\n    }\n}\n\npublic class OrderServiceTests\n{\n    [Fact]\n    public void PlaceOrder_StockAvailablePaymentSucceeds_ReturnsTrue()\n    {\n        // Arrange - create mocks\n        var mockInventory = new Mock<IInventoryService>();\n        var mockPayment = new Mock<IPaymentService>();\n        \n        // Setup mock behavior\n        mockInventory.Setup(i => i.CheckStock(\"PROD1\", 2)).Returns(true);\n        // Setup payment mock...\n        \n        var service = new OrderService(mockInventory.Object, mockPayment.Object);\n        \n        // Act\n        bool result = service.PlaceOrder(\"PROD1\", 2, 99.99m);\n        \n        // Assert\n        Assert.True(result);\n        // Verify both services were called...\n    }\n    \n    // Add more tests for failure cases!\n}",
              "solution": "using Moq;\nusing Xunit;\n\npublic interface IInventoryService\n{\n    bool CheckStock(string productId, int quantity);\n}\n\npublic interface IPaymentService\n{\n    bool ProcessPayment(decimal amount);\n}\n\npublic class OrderService\n{\n    private readonly IInventoryService _inventory;\n    private readonly IPaymentService _payment;\n    \n    public OrderService(IInventoryService inventory, IPaymentService payment)\n    {\n        _inventory = inventory;\n        _payment = payment;\n    }\n    \n    public bool PlaceOrder(string productId, int quantity, decimal price)\n    {\n        if (!_inventory.CheckStock(productId, quantity))\n            return false;\n        \n        return _payment.ProcessPayment(price * quantity);\n    }\n}\n\npublic class OrderServiceTests\n{\n    [Fact]\n    public void PlaceOrder_StockAvailablePaymentSucceeds_ReturnsTrue()\n    {\n        var mockInventory = new Mock<IInventoryService>();\n        var mockPayment = new Mock<IPaymentService>();\n        \n        mockInventory.Setup(i => i.CheckStock(\"PROD1\", 2)).Returns(true);\n        mockPayment.Setup(p => p.ProcessPayment(199.98m)).Returns(true);\n        \n        var service = new OrderService(mockInventory.Object, mockPayment.Object);\n        \n        bool result = service.PlaceOrder(\"PROD1\", 2, 99.99m);\n        \n        Assert.True(result);\n        mockInventory.Verify(i => i.CheckStock(\"PROD1\", 2), Times.Once);\n        mockPayment.Verify(p => p.ProcessPayment(199.98m), Times.Once);\n    }\n    \n    [Fact]\n    public void PlaceOrder_NoStock_ReturnsFalse()\n    {\n        var mockInventory = new Mock<IInventoryService>();\n        var mockPayment = new Mock<IPaymentService>();\n        \n        mockInventory.Setup(i => i.CheckStock(It.IsAny<string>(), It.IsAny<int>())).Returns(false);\n        \n        var service = new OrderService(mockInventory.Object, mockPayment.Object);\n        \n        bool result = service.PlaceOrder(\"PROD1\", 100, 99.99m);\n        \n        Assert.False(result);\n        mockPayment.Verify(p => p.ProcessPayment(It.IsAny<decimal>()), Times.Never);\n    }\n    \n    [Fact]\n    public void PlaceOrder_PaymentFails_ReturnsFalse()\n    {\n        var mockInventory = new Mock<IInventoryService>();\n        var mockPayment = new Mock<IPaymentService>();\n        \n        mockInventory.Setup(i => i.CheckStock(\"PROD1\", 1)).Returns(true);\n        mockPayment.Setup(p => p.ProcessPayment(It.IsAny<decimal>())).Returns(false);\n        \n        var service = new OrderService(mockInventory.Object, mockPayment.Object);\n        \n        bool result = service.PlaceOrder(\"PROD1\", 1, 50m);\n        \n        Assert.False(result);\n    }\n}\n\nConsole.WriteLine(\"OrderService tests with mocks defined!\");\nConsole.WriteLine(\"Tests cover: success, no stock, payment failure\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain test definitions",
                  "expectedOutput": "OrderService",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should mention mocks",
                  "expectedOutput": "mock",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "Create mock: 'var mock = new Mock<IInterface>()'. Get instance: 'mock.Object'."
                },
                {
                  "level": 2,
                  "text": "Setup returns: 'mock.Setup(x => x.Method(args)).Returns(value)'. Use It.IsAny<T>() for any argument."
                },
                {
                  "level": 3,
                  "text": "Verify calls: 'mock.Verify(x => x.Method(args), Times.Once)'. Use Times.Never to verify NOT called."
                },
                {
                  "level": 4,
                  "text": "Test failure paths too! When stock fails, payment should NOT be called (Times.Never)."
                },
                {
                  "level": 5,
                  "text": "It.Is<T>(predicate) for conditional matching: 'It.Is<decimal>(x => x > 0)' matches positive decimals."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Forgetting mock.Object",
                  "consequence": "Passing 'mock' instead of 'mock.Object' to constructor! Mock<T> is the wrapper, .Object is the actual instance that implements T.",
                  "correction": "Always use mock.Object when injecting: 'new Service(mock.Object)' not 'new Service(mock)'."
                },
                {
                  "mistake": "Over-mocking",
                  "consequence": "Mocking everything including simple classes! Mocks add complexity. Only mock: external services, I/O, slow operations, things with side effects.",
                  "correction": "Don't mock simple value objects or classes with no dependencies. Only mock interfaces/abstractions for external concerns."
                },
                {
                  "mistake": "Setup without matching arguments",
                  "consequence": "Setup(x => x.Method(5)).Returns(true) but calling Method(10)! The mock returns default (false), test fails mysteriously.",
                  "correction": "Ensure Setup arguments match what code actually passes. Use It.IsAny<T>() when argument doesn't matter."
                },
                {
                  "mistake": "Not verifying important calls",
                  "consequence": "Test passes but critical method was never called! Setup returns values but Verify confirms calls actually happened.",
                  "correction": "Use Verify() for important side effects: 'mockRepo.Verify(r => r.Save(user), Times.Once)'. Especially for void methods!"
                }
              ],
              "difficulty": "advanced"
            }
          ]
        },
        {
          "id": "lesson-15-03",
          "title": "Integration Testing & Test Organization",
          "moduleId": "module-15",
          "order": 3,
          "estimatedMinutes": 15,
          "difficulty": "advanced",
          "contentSections": [
            {
              "type": "ANALOGY",
              "title": "Understanding the Concept",
              "content": "Unit tests check INDIVIDUAL parts work. But do they work TOGETHER?\n\nImagine testing a bicycle:\n• UNIT TESTS: Test brake pads, gears, wheels separately\n• INTEGRATION TESTS: Test brakes + wheels together - does braking actually stop the bike?\n\nTYPES OF TESTS:\n1. UNIT TESTS (70-80%)\n   - Test one class in isolation\n   - Fast, run in milliseconds\n   - Mock all dependencies\n\n2. INTEGRATION TESTS (15-20%)\n   - Test multiple components together\n   - May use real database (in-memory)\n   - Slower but more realistic\n\n3. END-TO-END TESTS (5-10%)\n   - Test entire application\n   - Real browser, real API calls\n   - Slowest but highest confidence\n\nTEST PYRAMID:\n   /\\\\    E2E (few)\n  /  \\\\\n /____\\\\  Integration (some)\n/______\\\\  Unit (many)\n\nThink: 'Unit tests for speed, integration tests for confidence, E2E tests for critical paths!'"
            },
            {
              "type": "EXAMPLE",
              "title": "Code Example",
              "content": "This example demonstrates the concepts in action.",
              "code": "// ===== PROJECT STRUCTURE =====\n// src/\n//   MyApp/\n//     Services/\n//       UserService.cs\n//     Data/\n//       AppDbContext.cs\n// tests/\n//   MyApp.Tests/\n//     Unit/\n//       UserServiceTests.cs\n//     Integration/\n//       UserServiceIntegrationTests.cs\n\nusing Xunit;\nusing Microsoft.EntityFrameworkCore;\n\n// ===== THE DBCONTEXT =====\npublic class AppDbContext : DbContext\n{\n    public AppDbContext(DbContextOptions<AppDbContext> options) \n        : base(options) { }\n    \n    public DbSet<User> Users { get; set; }\n}\n\npublic class User\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public string Email { get; set; }\n}\n\npublic class UserService\n{\n    private readonly AppDbContext _context;\n    \n    public UserService(AppDbContext context)\n    {\n        _context = context;\n    }\n    \n    public User CreateUser(string name, string email)\n    {\n        var user = new User { Name = name, Email = email };\n        _context.Users.Add(user);\n        _context.SaveChanges();\n        return user;\n    }\n    \n    public User GetByEmail(string email)\n    {\n        return _context.Users.FirstOrDefault(u => u.Email == email);\n    }\n}\n\n// ===== INTEGRATION TESTS with In-Memory Database =====\npublic class UserServiceIntegrationTests : IDisposable\n{\n    private readonly AppDbContext _context;\n    private readonly UserService _service;\n    \n    public UserServiceIntegrationTests()\n    {\n        // Use in-memory database for tests\n        var options = new DbContextOptionsBuilder<AppDbContext>()\n            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())\n            .Options;\n        \n        _context = new AppDbContext(options);\n        _service = new UserService(_context);\n    }\n    \n    [Fact]\n    public void CreateUser_ValidData_PersistsToDatabase()\n    {\n        // Act\n        var user = _service.CreateUser(\"John\", \"john@test.com\");\n        \n        // Assert - Actually query the database!\n        var dbUser = _context.Users.Find(user.Id);\n        Assert.NotNull(dbUser);\n        Assert.Equal(\"John\", dbUser.Name);\n    }\n    \n    [Fact]\n    public void GetByEmail_UserExists_ReturnsUser()\n    {\n        // Arrange - Create user first\n        _service.CreateUser(\"Jane\", \"jane@test.com\");\n        \n        // Act\n        var found = _service.GetByEmail(\"jane@test.com\");\n        \n        // Assert\n        Assert.NotNull(found);\n        Assert.Equal(\"Jane\", found.Name);\n    }\n    \n    [Fact]\n    public void GetByEmail_UserNotExists_ReturnsNull()\n    {\n        var found = _service.GetByEmail(\"nobody@test.com\");\n        Assert.Null(found);\n    }\n    \n    // IDisposable - cleanup after each test\n    public void Dispose()\n    {\n        _context.Dispose();\n    }\n}\n\n// ===== TEST ORGANIZATION TIPS =====\n// 1. Mirror source structure in test project\n// 2. One test class per class being tested\n// 3. Use folders: Unit/, Integration/, E2E/\n// 4. Naming: [ClassName]Tests.cs\n// 5. Use IClassFixture<T> for shared setup across tests\n\nConsole.WriteLine(\"Integration test patterns defined!\");\nConsole.WriteLine(\"Key: Use in-memory database for EF Core integration tests\");\nConsole.WriteLine(\"IDisposable ensures cleanup between tests\");",
              "language": "csharp"
            },
            {
              "type": "THEORY",
              "title": "Syntax Breakdown",
              "content": "## Breaking Down the Syntax\n\n**`UseInMemoryDatabase(name)`**: EF Core in-memory provider for testing. Fast, no external DB needed. Use unique name (Guid) per test to ensure isolation.\n\n**`IDisposable`**: Implement Dispose() for cleanup. xUnit calls Dispose() after each test method. Perfect for cleaning up DbContext, connections, files.\n\n**`[Collection(name)]`**: Share fixtures across test classes. Tests in same collection don't run in parallel. Useful for shared database state.\n\n**`IClassFixture<T>`**: Shared setup/teardown for all tests in a class. Create expensive resources once, share across tests. Fixture disposed after all tests complete.\n\n**`IAsyncLifetime`**: Async setup/teardown. Use InitializeAsync() and DisposeAsync() for async operations like database seeding.\n\n**`[Trait(name, value)]`**: Categorize tests. Example: [Trait(\"Category\", \"Integration\")]. Filter in test runner: 'dotnet test --filter Category=Integration'."
            }
          ],
          "challenges": [
            {
              "type": "FREE_CODING",
              "id": "lesson-15-03-challenge-01",
              "title": "Practice Challenge",
              "description": "Apply what you've learned in this interactive coding challenge.",
              "instructions": "Create integration tests for a ProductRepository!\n\n1. Create Product class: Id, Name, Price, InStock (bool)\n\n2. Create ProductRepository class:\n   - Constructor takes DbContext\n   - AddProduct(Product) - adds to database\n   - GetInStock() - returns products where InStock = true\n   - GetByPriceRange(min, max) - returns products in price range\n\n3. Write integration tests using in-memory database:\n   - Test AddProduct persists correctly\n   - Test GetInStock returns only in-stock products\n   - Test GetByPriceRange filters correctly\n   - Implement IDisposable for cleanup\n\nUse UseInMemoryDatabase and seed test data!",
              "starterCode": "using Xunit;\nusing Microsoft.EntityFrameworkCore;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic class Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n    public bool InStock { get; set; }\n}\n\npublic class ProductDbContext : DbContext\n{\n    public ProductDbContext(DbContextOptions<ProductDbContext> options) \n        : base(options) { }\n    \n    public DbSet<Product> Products { get; set; }\n}\n\npublic class ProductRepository\n{\n    private readonly ProductDbContext _context;\n    \n    public ProductRepository(ProductDbContext context)\n    {\n        _context = context;\n    }\n    \n    public void AddProduct(Product product)\n    {\n        // Implement\n    }\n    \n    public List<Product> GetInStock()\n    {\n        // Implement: return products where InStock = true\n        return new List<Product>();\n    }\n    \n    public List<Product> GetByPriceRange(decimal min, decimal max)\n    {\n        // Implement: return products in price range\n        return new List<Product>();\n    }\n}\n\npublic class ProductRepositoryIntegrationTests : IDisposable\n{\n    private readonly ProductDbContext _context;\n    private readonly ProductRepository _repo;\n    \n    public ProductRepositoryIntegrationTests()\n    {\n        // Setup in-memory database\n        var options = new DbContextOptionsBuilder<ProductDbContext>()\n            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())\n            .Options;\n        \n        _context = new ProductDbContext(options);\n        _repo = new ProductRepository(_context);\n    }\n    \n    [Fact]\n    public void AddProduct_ValidProduct_PersistsToDatabase()\n    {\n        // Write test\n    }\n    \n    public void Dispose()\n    {\n        _context.Dispose();\n    }\n}",
              "solution": "using Xunit;\nusing Microsoft.EntityFrameworkCore;\nusing System;\nusing System.Collections.Generic;\nusing System.Linq;\n\npublic class Product\n{\n    public int Id { get; set; }\n    public string Name { get; set; }\n    public decimal Price { get; set; }\n    public bool InStock { get; set; }\n}\n\npublic class ProductDbContext : DbContext\n{\n    public ProductDbContext(DbContextOptions<ProductDbContext> options) \n        : base(options) { }\n    \n    public DbSet<Product> Products { get; set; }\n}\n\npublic class ProductRepository\n{\n    private readonly ProductDbContext _context;\n    \n    public ProductRepository(ProductDbContext context)\n    {\n        _context = context;\n    }\n    \n    public void AddProduct(Product product)\n    {\n        _context.Products.Add(product);\n        _context.SaveChanges();\n    }\n    \n    public List<Product> GetInStock()\n    {\n        return _context.Products.Where(p => p.InStock).ToList();\n    }\n    \n    public List<Product> GetByPriceRange(decimal min, decimal max)\n    {\n        return _context.Products\n            .Where(p => p.Price >= min && p.Price <= max)\n            .ToList();\n    }\n}\n\npublic class ProductRepositoryIntegrationTests : IDisposable\n{\n    private readonly ProductDbContext _context;\n    private readonly ProductRepository _repo;\n    \n    public ProductRepositoryIntegrationTests()\n    {\n        var options = new DbContextOptionsBuilder<ProductDbContext>()\n            .UseInMemoryDatabase(databaseName: Guid.NewGuid().ToString())\n            .Options;\n        \n        _context = new ProductDbContext(options);\n        _repo = new ProductRepository(_context);\n    }\n    \n    [Fact]\n    public void AddProduct_ValidProduct_PersistsToDatabase()\n    {\n        var product = new Product { Name = \"Laptop\", Price = 999m, InStock = true };\n        \n        _repo.AddProduct(product);\n        \n        var dbProduct = _context.Products.First();\n        Assert.Equal(\"Laptop\", dbProduct.Name);\n        Assert.Equal(999m, dbProduct.Price);\n    }\n    \n    [Fact]\n    public void GetInStock_MixedProducts_ReturnsOnlyInStock()\n    {\n        _repo.AddProduct(new Product { Name = \"A\", Price = 10, InStock = true });\n        _repo.AddProduct(new Product { Name = \"B\", Price = 20, InStock = false });\n        _repo.AddProduct(new Product { Name = \"C\", Price = 30, InStock = true });\n        \n        var inStock = _repo.GetInStock();\n        \n        Assert.Equal(2, inStock.Count);\n        Assert.All(inStock, p => Assert.True(p.InStock));\n    }\n    \n    [Fact]\n    public void GetByPriceRange_ProductsExist_FiltersCorrectly()\n    {\n        _repo.AddProduct(new Product { Name = \"Cheap\", Price = 10, InStock = true });\n        _repo.AddProduct(new Product { Name = \"Mid\", Price = 50, InStock = true });\n        _repo.AddProduct(new Product { Name = \"Expensive\", Price = 100, InStock = true });\n        \n        var result = _repo.GetByPriceRange(20, 80);\n        \n        Assert.Single(result);\n        Assert.Equal(\"Mid\", result[0].Name);\n    }\n    \n    public void Dispose()\n    {\n        _context.Dispose();\n    }\n}\n\nConsole.WriteLine(\"Integration tests with in-memory DB defined!\");\nConsole.WriteLine(\"Tests: AddProduct, GetInStock, GetByPriceRange\");",
              "language": "csharp",
              "testCases": [
                {
                  "id": "test-1",
                  "description": "Output should contain integration tests",
                  "expectedOutput": "Integration",
                  "isVisible": true
                },
                {
                  "id": "test-2",
                  "description": "Output should mention products",
                  "expectedOutput": "Product",
                  "isVisible": true
                }
              ],
              "hints": [
                {
                  "level": 1,
                  "text": "UseInMemoryDatabase with unique name: 'databaseName: Guid.NewGuid().ToString()' ensures test isolation."
                },
                {
                  "level": 2,
                  "text": "Implement IDisposable and call _context.Dispose() to clean up after tests."
                },
                {
                  "level": 3,
                  "text": "Seed test data in tests, not constructor. Each test should set up its own data for isolation."
                },
                {
                  "level": 4,
                  "text": "Assert.All() checks all items in collection: 'Assert.All(list, item => Assert.True(item.Property))'."
                },
                {
                  "level": 5,
                  "text": "Use [Trait] to categorize: '[Trait(\"Category\", \"Integration\")]' then filter with 'dotnet test --filter Category=Integration'."
                }
              ],
              "commonMistakes": [
                {
                  "mistake": "Same database name for all tests",
                  "consequence": "Tests share data and affect each other! Test A adds user, Test B expects empty database but finds user. Flaky, order-dependent tests.",
                  "correction": "Use Guid.NewGuid().ToString() for database name. Each test gets isolated database."
                },
                {
                  "mistake": "Not disposing DbContext",
                  "consequence": "Memory leaks, connection exhaustion. In-memory OK but bad habit for real databases.",
                  "correction": "Implement IDisposable, call _context.Dispose() in Dispose() method."
                },
                {
                  "mistake": "Testing EF Core instead of your code",
                  "consequence": "Tests verify LINQ works, not your business logic. 'Assert.Equal(1, context.Users.Count())' tests EF, not your service.",
                  "correction": "Test YOUR code's behavior. Mock DbContext in unit tests, use in-memory only for integration tests of actual database interactions."
                },
                {
                  "mistake": "Too many integration tests",
                  "consequence": "Slow test suite! Integration tests with DB are 10-100x slower than unit tests. Test pyramid inverted.",
                  "correction": "Integration tests for critical paths and DB-specific logic. Unit tests with mocks for business logic."
                }
              ],
              "difficulty": "advanced"
            }
          ]
        }
      ]
    }
  ]
}