{
  "type": "FREE_CODING",
  "id": "18.2-challenge-0",
  "title": "Create Notification Protocol",
  "description": "Design a notification model for push notifications and in-app alerts.",
  "instructions": "Create a Serverpod protocol file for a Notification model that:\n\n1. Has fields for: id, userId, title, body, notificationType (enum), relatedEntityId, relatedEntityType\n2. Tracks read status with isRead boolean and readAt timestamp\n3. Supports different notification types: message, like, comment, follow, system\n4. Includes createdAt timestamp\n5. Has appropriate indexes for querying user notifications\n6. Create the NotificationType enum in a separate definition",
  "language": "yaml",
  "testCases": [],
  "hints": [
    {
      "level": 1,
      "text": "Use 'relation(parent=user_profiles)' to create a foreign key to the user table"
    },
    {
      "level": 2,
      "text": "Make relatedEntityId and relatedEntityType optional with '?' since system notifications may not relate to a specific entity"
    },
    {
      "level": 3,
      "text": "Create a composite index on userId + isRead + createdAt for efficient unread notification queries"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Not indexing the userId field",
      "consequence": "Slow queries when fetching user notifications, especially as the table grows",
      "correction": "Always index foreign key fields that are frequently queried"
    },
    {
      "mistake": "Using a string for notificationType instead of an enum",
      "consequence": "No type safety, possible typos, harder to refactor",
      "correction": "Define an enum for fixed sets of values to get type checking and autocomplete"
    }
  ],
  "difficulty": "intermediate"
}