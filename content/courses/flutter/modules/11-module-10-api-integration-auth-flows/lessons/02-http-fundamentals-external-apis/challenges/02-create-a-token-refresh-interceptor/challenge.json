{
  "type": "CODE",
  "id": "10.2-challenge-2",
  "title": "Create a Token Refresh Interceptor",
  "description": "Build an interceptor that automatically refreshes expired JWT tokens.",
  "instructions": "Implement a TokenRefreshInterceptor that:\n1. Detects 401 Unauthorized responses\n2. Calls a refreshToken() function to get a new token\n3. Updates the failed request with the new token\n4. Retries the original request\n5. If refresh fails, calls onRefreshFailed callback\n6. Prevents multiple simultaneous refresh attempts (use a lock)",
  "language": "dart",
  "testCases": [],
  "hints": [
    {
      "level": 1,
      "text": "Use a boolean flag (_isRefreshing) to track if a refresh is in progress."
    },
    {
      "level": 2,
      "text": "When multiple requests fail with 401 at the same time, queue them using Completers and complete them all after refresh succeeds."
    },
    {
      "level": 3,
      "text": "Use dio.fetch(requestOptions) to retry the failed request with the updated Authorization header."
    }
  ]
}