{
  "type": "FREE_CODING",
  "id": "18.6-challenge-1",
  "title": "Media Gallery Endpoint",
  "description": "Create an endpoint to list a user's uploaded media with filtering and pagination.",
  "instructions": "Implement a media gallery endpoint that:\n\n1. Lists the authenticated user's media files\n2. Supports filtering by media type (image, video, audio)\n3. Supports filtering by date range\n4. Returns paginated results with cursor-based pagination\n5. Includes thumbnail URLs for quick loading\n6. Supports sorting by date or size\n7. Returns total counts for each media type",
  "language": "dart",
  "testCases": [],
  "hints": [
    {
      "level": 1,
      "text": "Use compound cursor with both sort value and ID for stable pagination"
    },
    {
      "level": 2,
      "text": "Cache the total count separately or use database-specific COUNT OVER() for efficiency"
    },
    {
      "level": 3,
      "text": "Use GROUP BY with aggregate functions for storage statistics by type"
    }
  ],
  "commonMistakes": [
    {
      "mistake": "Using offset-based pagination instead of cursor-based",
      "consequence": "Duplicate or missing items when data changes between page loads",
      "correction": "Use cursor-based pagination with compound key (sort value + ID)"
    },
    {
      "mistake": "Counting all rows on every request",
      "consequence": "Slow performance on large galleries",
      "correction": "Consider caching counts or using approximate counts for large datasets"
    }
  ],
  "difficulty": "intermediate"
}