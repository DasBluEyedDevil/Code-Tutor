---
type: "EXAMPLE"
title: "Creating Your First Endpoint"
---

Let's create a complete UserEndpoint with all standard operations.

**File: my_project_server/lib/src/endpoints/user_endpoint.dart**


```dart
import 'package:serverpod/serverpod.dart';
import '../generated/protocol.dart';

/// Endpoint for user-related operations.
///
/// All methods are automatically exposed to the Flutter client.
/// The endpoint name becomes: client.user.methodName()
class UserEndpoint extends Endpoint {

  /// Get a user by their ID.
  ///
  /// Parameters:
  ///   - session: Provided by Serverpod, contains auth and db access
  ///   - userId: The ID of the user to retrieve
  ///
  /// Returns the User if found, null otherwise.
  Future<User?> getUser(Session session, int userId) async {
    // Use the database through the session
    return await User.db.findById(session, userId);
  }

  /// Get all users (with optional pagination).
  ///
  /// Parameters:
  ///   - session: Provided by Serverpod
  ///   - limit: Maximum users to return (default 50)
  ///   - offset: Number of users to skip (for pagination)
  Future<List<User>> getAllUsers(
    Session session, {
    int limit = 50,
    int offset = 0,
  }) async {
    return await User.db.find(
      session,
      limit: limit,
      offset: offset,
      orderBy: (t) => t.createdAt,
      orderDescending: true,
    );
  }

  /// Create a new user.
  ///
  /// The User object comes from the Flutter client, fully typed.
  /// Serverpod handles all JSON deserialization automatically.
  Future<User> createUser(Session session, User user) async {
    // Insert the user into the database
    // The id will be auto-generated by PostgreSQL
    return await User.db.insertRow(session, user);
  }

  /// Update an existing user.
  ///
  /// Returns the updated User.
  /// Throws if the user doesn't exist.
  Future<User> updateUser(Session session, User user) async {
    if (user.id == null) {
      throw Exception('Cannot update user without id');
    }

    return await User.db.updateRow(session, user);
  }

  /// Delete a user by ID.
  ///
  /// Returns true if deleted, false if user didn't exist.
  Future<bool> deleteUser(Session session, int userId) async {
    final rowsDeleted = await User.db.deleteWhere(
      session,
      where: (t) => t.id.equals(userId),
    );
    return rowsDeleted > 0;
  }

  /// Find users by email domain.
  ///
  /// Example: getUsersByDomain('gmail.com') returns all Gmail users.
  Future<List<User>> getUsersByDomain(
    Session session,
    String domain,
  ) async {
    return await User.db.find(
      session,
      where: (t) => t.email.like('%@$domain'),
    );
  }

  /// Count total users.
  Future<int> countUsers(Session session) async {
    return await User.db.count(session);
  }
}
```
