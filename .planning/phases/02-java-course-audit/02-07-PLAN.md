---
phase: 02-java-course-audit
plan: 07
type: execute
wave: 3
depends_on: ["02-02", "02-03", "02-04", "02-05", "02-06"]
files_modified:
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/content/*.md
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/challenges/**
  - content/courses/java/modules/16-capstone-project-task-manager-application/module.json
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/lesson.json
autonomous: true

must_haves:
  truths:
    - "Module 16 capstone offers TWO paths: Thymeleaf (simpler) and React (advanced)"
    - "The capstone backend (Spring Boot 4.0.x) is SHARED between both paths"
    - "Thymeleaf path lessons exist with complete content for building the frontend"
    - "React path reuses existing React lessons with clear 'choose your path' guidance"
    - "Deployment lesson uses eclipse-temurin:25 and Railway"
    - "All capstone code uses IO.println and Java 25 patterns"
    - "Students can complete the capstone with either frontend choice"
  artifacts:
    - path: "content/courses/java/modules/16-capstone-project-task-manager-application/"
      provides: "Dual-path capstone module"
      contains: "Thymeleaf"
    - path: "content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-*/content/"
      provides: "Thymeleaf OR React frontend lesson (path choice)"
  key_links:
    - from: "Capstone Lesson 01 (Requirements)"
      to: "Two frontend paths"
      via: "Clear choose-your-path guidance"
      pattern: "Thymeleaf|React"
    - from: "Capstone deployment lesson"
      to: "Railway deployment"
      via: "Dockerfile and deployment config"
      pattern: "eclipse-temurin:25"
---

<objective>
Restructure Module 16 (Capstone Project) to offer dual frontend paths: Thymeleaf (simpler, pure Java stack) and React (advanced, full-stack). Update all capstone content to target Spring Boot 4.0.x and Java 25, with deployment to Railway.

Purpose: The user decided to offer BOTH Thymeleaf and React capstone variants. The current capstone is entirely React-based (9 lessons). The restructure preserves the shared Spring Boot backend while creating parallel frontend paths so students can choose based on their comfort level.

Output: Module 16 restructured with shared backend lessons, parallel frontend lessons (Thymeleaf + React), and updated deployment.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-java-course-audit/02-CONTEXT.md
@.planning/phases/02-java-course-audit/02-RESEARCH.md
@.planning/phases/02-java-course-audit/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure capstone backend lessons and add path choice</name>
  <files>
    content/courses/java/modules/16-capstone-project-task-manager-application/module.json
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/01-lesson-161-project-requirements-architecture/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/02-lesson-162-backend-setup-data-layer/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/03-lesson-163-rest-api-development/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/04-lesson-164-authentication-implementation/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/05-lesson-165-business-logic-validation/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/*/challenges/**
  </files>
  <action>
    The capstone currently has 9 lessons. The restructure plan:

    **Lessons 01-05: SHARED (backend -- both paths use these)**
    - Lesson 01: Project Requirements and Architecture
    - Lesson 02: Backend Setup and Data Layer
    - Lesson 03: REST API Development
    - Lesson 04: Authentication Implementation
    - Lesson 05: Business Logic and Validation

    **Lesson 06: FORK POINT (choose your frontend)**
    - Currently: "React Frontend Development"
    - Restructure to: "Choose Your Frontend Path"

    **Lessons 07-08: PATH-SPECIFIC (parallel content)**
    - Currently: Lesson 07 is "Frontend-Backend Integration" (React), Lesson 08 is "Testing"
    - Restructure to have both Thymeleaf and React variants

    **Lesson 09: SHARED (deployment -- both paths converge)**
    - Currently: "Deployment to Production"

    **Step 1: Update Lessons 01-05 (shared backend):**

    For each of Lessons 01-05:
    1. Read all content/*.md files
    2. Replace System.out.println with IO.println
    3. Update all Spring Boot references to 4.0.x
    4. Update Java references to Java 25
    5. Update Docker references to eclipse-temurin:25

    **Lesson 01 (Requirements/Architecture) -- ADD DUAL PATH INTRO:**
    - Add or update a content section that explains:
      "This capstone project has a shared Spring Boot backend and two frontend options:
       - **Thymeleaf Path** (recommended for beginners): Server-side rendered HTML templates. Pure Java stack, no JavaScript framework needed. Simpler but produces a fully functional web app.
       - **React Path** (for those who completed Module 13): Single-page application with React. More complex but modern full-stack architecture.
       Both paths produce a deployable Task Manager application. Choose the one that matches your comfort level."
    - Update architecture diagram/description to show both paths sharing the same REST API

    **Lesson 04 (Authentication):**
    - Verify JWT implementation uses current Spring Security 7 patterns (from Module 12 updates)
    - Replace @MockBean with @MockitoBean if present

    **For all challenges in Lessons 01-05:**
    - Update solution.java: IO.println, Spring Boot 4.0.x, Java 25
    - Update challenge.json instructions
    - Update Dockerfiles to eclipse-temurin:25

    Commit: "feat(02-07): update capstone backend lessons to Spring Boot 4.0.x, add dual-path introduction"
  </action>
  <verify>
    - `grep -r "System.out.println" content/courses/java/modules/16-capstone-project-task-manager-application/lessons/01-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/02-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/03-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/04-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/05-* | wc -l` returns 0
    - Lesson 01 content mentions both "Thymeleaf" and "React" as frontend options
    - All challenge.json files are valid JSON
  </verify>
  <done>Capstone backend lessons (01-05) updated to Spring Boot 4.0.x and Java 25. Dual frontend path clearly introduced in Lesson 01 requirements. All shared backend code uses IO.println.</done>
</task>

<task type="auto">
  <name>Task 2: Create Thymeleaf frontend path and update React path in capstone</name>
  <files>
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-lesson-166-react-frontend-development/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/07-lesson-167-frontend-backend-integration/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/08-lesson-168-testing-the-application/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/09-lesson-169-deployment-to-production/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/module.json
  </files>
  <action>
    **Restructure Lessons 06-09 to support dual paths:**

    The approach: rather than creating separate directories for each path (which would break the linear lesson structure), each frontend lesson will contain BOTH paths with clear "Thymeleaf Path" and "React Path" headers. Students read only their chosen path's sections.

    **Lesson 06 -- Rewrite as "Frontend Development: Choose Your Path":**

    Update lesson.json title to "Frontend Development: Choose Your Path"

    Create content sections:
    1. THEORY: "Two Approaches to Web Frontends" -- explains server-side (Thymeleaf) vs client-side (React) rendering. Brief comparison. Students pick one.

    2. THEORY (Thymeleaf Path): "Building with Thymeleaf"
       - Add Spring Boot Thymeleaf dependency (`spring-boot-starter-thymeleaf`)
       - Create base layout template (HTML + Thymeleaf tags)
       - Build task list page: `th:each` to iterate tasks, `th:text` for display
       - Build task form: `th:action`, `th:object`, form binding
       - Build task detail page
       - Style with simple CSS (no framework needed, or use Tailwind CDN for quick styling)
       - All Java code uses IO.println

    3. THEORY (React Path): "Building with React"
       - Keep existing React frontend content but UPDATE:
         - Verify React patterns for React 19.x
         - Use functional components with hooks (no class components)
         - Fetch calls to Spring Boot REST API
         - Update any Spring Boot version references
       - Replace System.out.println with IO.println in any Java snippets

    **Lesson 07 -- "Connecting Frontend to Backend":**

    Update content with BOTH paths:
    1. Thymeleaf path: Spring MVC controllers returning Thymeleaf views, form submission handling, CSRF token inclusion, redirect after POST
    2. React path: CORS configuration, API endpoint integration, JWT token storage, Axios/fetch interceptors

    Update all Java code to IO.println

    **Lesson 08 -- "Testing the Application":**
    - Backend testing is SHARED (both paths)
    - Replace @MockBean with @MockitoBean
    - Add brief section on testing Thymeleaf views (MockMvc with content assertions)
    - Keep React testing section
    - Replace System.out.println with IO.println

    **Lesson 09 -- "Deployment to Production":**
    - Deployment is mostly SHARED (same Spring Boot app either way)
    - Thymeleaf path: Thymeleaf templates are packaged IN the Spring Boot jar (simpler deployment -- single artifact)
    - React path: Needs either separate frontend deploy or Spring Boot serving static React build
    - Update Dockerfile to eclipse-temurin:25
    - Update Railway deployment instructions for Spring Boot 4.0.x
    - Use the verified Dockerfile pattern from RESEARCH.md
    - Replace System.out.println with IO.println

    **Update module.json:**
    - Update description to mention both frontend paths
    - Update lesson count if any lessons were added

    **For ALL challenges in Lessons 06-09:**
    - Update solution.java files: IO.println, Spring Boot 4.0.x
    - Add Thymeleaf-specific challenges where appropriate (at least 1-2)
    - Update challenge.json instructions with path-specific notes
    - Update Dockerfile challenges to eclipse-temurin:25

    Commit: "feat(02-07): create dual-path capstone (Thymeleaf + React), deployment to Railway"
  </action>
  <verify>
    - `grep -r "System.out.println" content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/07-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/08-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/09-* | wc -l` returns 0
    - `grep -ri "Thymeleaf" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "React" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "eclipse-temurin:25" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "@MockBean" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns 0
    - All challenge.json files are valid JSON
    - Lesson 06 title in lesson.json reflects the path choice
  </verify>
  <done>Capstone module restructured with dual frontend paths. Thymeleaf content created. React content updated. Both paths share the same Spring Boot 4.0.x backend. Deployment lesson uses eclipse-temurin:25 and Railway. Module complete and deployable via either path.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Capstone Module 16 supports BOTH Thymeleaf and React paths
2. Shared backend (Lessons 01-05) uses Spring Boot 4.0.x and IO.println
3. Frontend lessons (06-07) contain both Thymeleaf and React content
4. Testing lesson uses @MockitoBean
5. Deployment uses eclipse-temurin:25 and Railway
6. All 20 challenges updated
7. Module.json reflects dual-path structure
</verification>

<success_criteria>
- JAVA-04 satisfied: A deployable capstone project exists that a student can build and deploy after completing the course (TWO paths available)
- JAVA-01 satisfied for Module 16: IO.println throughout
- Students can choose Thymeleaf (simpler) or React (advanced) and complete a full capstone
</success_criteria>

<output>
After completion, create `.planning/phases/02-java-course-audit/02-07-SUMMARY.md`
</output>
