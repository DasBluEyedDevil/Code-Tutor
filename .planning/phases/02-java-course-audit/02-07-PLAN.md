---
phase: 02-java-course-audit
plan: 07
type: execute
wave: 3
depends_on: ["02-02", "02-03", "02-04", "02-05", "02-06"]
files_modified:
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/content/*.md
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/challenges/**
  - content/courses/java/modules/16-capstone-project-task-manager-application/module.json
  - content/courses/java/modules/16-capstone-project-task-manager-application/**/lesson.json
autonomous: true

must_haves:
  truths:
    - "Module 16 capstone offers TWO paths: Thymeleaf (simpler) and React (advanced)"
    - "The capstone backend (Spring Boot 4.0.x) is SHARED between both paths"
    - "Capstone Lesson 06 contains complete Thymeleaf tutorial content teaching th:each, th:text, th:if, th:action, th:object, form binding, fragments, and layouts"
    - "Capstone Lesson 06 contains complete React path content with React 19.x patterns"
    - "Deployment lesson uses eclipse-temurin:25 and Railway"
    - "All capstone code uses IO.println and Java 25 patterns"
  artifacts:
    - path: "content/courses/java/modules/16-capstone-project-task-manager-application/"
      provides: "Dual-path capstone module"
      contains: "Thymeleaf"
    - path: "content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-*/content/"
      provides: "Self-contained Thymeleaf tutorial AND React frontend lesson (path choice)"
      contains: "th:each"
  key_links:
    - from: "Capstone Lesson 01 (Requirements)"
      to: "Two frontend paths"
      via: "Clear choose-your-path guidance"
      pattern: "Thymeleaf|React"
    - from: "Capstone Lesson 06 (Thymeleaf path)"
      to: "Thymeleaf fundamentals"
      via: "In-context tutorial teaching all Thymeleaf syntax needed for the capstone"
      pattern: "th:each|th:text|th:if|th:action|th:object|fragments"
    - from: "Capstone deployment lesson"
      to: "Railway deployment"
      via: "Dockerfile and deployment config"
      pattern: "eclipse-temurin:25"
---

<objective>
Restructure Module 16 (Capstone Project) to offer dual frontend paths: Thymeleaf (simpler, pure Java stack) and React (advanced, full-stack). The Thymeleaf path includes a COMPLETE Thymeleaf tutorial within the capstone lesson itself, so students learn Thymeleaf by building with it -- no separate Thymeleaf module is needed. Update all capstone content to target Spring Boot 4.0.x and Java 25, with deployment to Railway.

Purpose: The user decided to offer BOTH Thymeleaf and React capstone variants. The current capstone is entirely React-based (9 lessons). The restructure preserves the shared Spring Boot backend while creating parallel frontend paths so students can choose based on their comfort level. The Thymeleaf path is self-contained: students who never saw Thymeleaf before can follow it because it teaches every concept in-context while building the capstone.

Output: Module 16 restructured with shared backend lessons, parallel frontend lessons (Thymeleaf tutorial + React), and updated deployment.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-java-course-audit/02-CONTEXT.md
@.planning/phases/02-java-course-audit/02-RESEARCH.md
@.planning/phases/02-java-course-audit/02-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure capstone backend lessons and add path choice</name>
  <files>
    content/courses/java/modules/16-capstone-project-task-manager-application/module.json
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/01-lesson-161-project-requirements-architecture/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/02-lesson-162-backend-setup-data-layer/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/03-lesson-163-rest-api-development/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/04-lesson-164-authentication-implementation/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/05-lesson-165-business-logic-validation/content/*.md
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/*/challenges/**
  </files>
  <action>
    The capstone currently has 9 lessons. The restructure plan:

    **Lessons 01-05: SHARED (backend -- both paths use these)**
    - Lesson 01: Project Requirements and Architecture
    - Lesson 02: Backend Setup and Data Layer
    - Lesson 03: REST API Development
    - Lesson 04: Authentication Implementation
    - Lesson 05: Business Logic and Validation

    **Lesson 06: FORK POINT (choose your frontend)**
    - Currently: "React Frontend Development"
    - Restructure to: "Choose Your Frontend Path"

    **Lessons 07-08: PATH-SPECIFIC (parallel content)**
    - Currently: Lesson 07 is "Frontend-Backend Integration" (React), Lesson 08 is "Testing"
    - Restructure to have both Thymeleaf and React variants

    **Lesson 09: SHARED (deployment -- both paths converge)**
    - Currently: "Deployment to Production"

    **Step 1: Update Lessons 01-05 (shared backend):**

    For each of Lessons 01-05:
    1. Read all content/*.md files
    2. Replace System.out.println with IO.println
    3. Update all Spring Boot references to 4.0.x
    4. Update Java references to Java 25
    5. Update Docker references to eclipse-temurin:25

    **Lesson 01 (Requirements/Architecture) -- ADD DUAL PATH INTRO:**
    - Add or update a content section that explains:
      "This capstone project has a shared Spring Boot backend and two frontend options:
       - **Thymeleaf Path** (recommended for beginners): Server-side rendered HTML templates. Pure Java stack, no JavaScript framework needed. Simpler but produces a fully functional web app. No prior Thymeleaf experience needed -- Lesson 06 teaches you everything from scratch.
       - **React Path** (for those who completed Module 13): Single-page application with React. More complex but modern full-stack architecture.
       Both paths produce a deployable Task Manager application. Choose the one that matches your comfort level."
    - Update architecture diagram/description to show both paths sharing the same REST API

    **Lesson 04 (Authentication):**
    - Verify JWT implementation uses current Spring Security 7 patterns (from Module 12 updates)
    - Replace @MockBean with @MockitoBean if present

    **For all challenges in Lessons 01-05:**
    - Update solution.java: IO.println, Spring Boot 4.0.x, Java 25
    - Update challenge.json instructions
    - Update Dockerfiles to eclipse-temurin:25

    Commit: "feat(02-07): update capstone backend lessons to Spring Boot 4.0.x, add dual-path introduction"
  </action>
  <verify>
    - `grep -r "System.out.println" content/courses/java/modules/16-capstone-project-task-manager-application/lessons/01-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/02-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/03-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/04-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/05-* | wc -l` returns 0
    - Lesson 01 content mentions both "Thymeleaf" and "React" as frontend options
    - All challenge.json files are valid JSON
  </verify>
  <done>Capstone backend lessons (01-05) updated to Spring Boot 4.0.x and Java 25. Dual frontend path clearly introduced in Lesson 01 requirements. All shared backend code uses IO.println.</done>
</task>

<task type="auto">
  <name>Task 2: Create self-contained Thymeleaf tutorial in capstone Lesson 06 and update React path</name>
  <files>
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-lesson-166-react-frontend-development/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/07-lesson-167-frontend-backend-integration/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/08-lesson-168-testing-the-application/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/lessons/09-lesson-169-deployment-to-production/ (update)
    content/courses/java/modules/16-capstone-project-task-manager-application/module.json
  </files>
  <action>
    **Restructure Lessons 06-09 to support dual paths:**

    The approach: rather than creating separate directories for each path (which would break the linear lesson structure), each frontend lesson will contain BOTH paths with clear "Thymeleaf Path" and "React Path" headers. Students read only their chosen path's sections.

    **Lesson 06 -- Rewrite as "Frontend Development: Choose Your Path":**

    Update lesson.json title to "Frontend Development: Choose Your Path"

    Create content sections:

    1. THEORY: "Two Approaches to Web Frontends" -- explains server-side (Thymeleaf) vs client-side (React) rendering. Brief comparison. Students pick one.

    2. THEORY (Thymeleaf Path): "Building with Thymeleaf -- A Complete Guide"

       This section serves as a SELF-CONTAINED Thymeleaf tutorial. Students choosing this path have never seen Thymeleaf before. Teach EVERY concept they need, in the context of building the Task Manager frontend:

       **Part A: Thymeleaf Fundamentals (teach BEFORE building)**
       - What is Thymeleaf? Server-side template engine that processes HTML on the server before sending to the browser. Analogy: "Like a mail merge -- you write the template once, and Thymeleaf fills in the blanks with your data."
       - Add `spring-boot-starter-thymeleaf` dependency to build.gradle/pom.xml
       - How Thymeleaf works with Spring Boot: Controller returns a view name, Spring resolves it to `src/main/resources/templates/{name}.html`, Thymeleaf processes the template with the model data
       - Template file location: `src/main/resources/templates/`
       - Static assets location: `src/main/resources/static/`

       **Part B: Core Thymeleaf Syntax (teach each with a small example, THEN use in capstone)**
       - `th:text` -- Display dynamic text: `<span th:text="${task.title}">Placeholder</span>`. Explain: the "Placeholder" text is what shows in the raw HTML file (useful for designers), but Thymeleaf replaces it with the actual data at runtime.
       - `th:each` -- Loop over collections: `<tr th:each="task : ${tasks}">`. Explain iteration variable scoping. Show how to display index with `${taskStat.index}`.
       - `th:if` / `th:unless` -- Conditional rendering: `<div th:if="${tasks.empty}">No tasks yet</div>`. Explain truthiness rules.
       - `th:href` / `th:src` -- Dynamic URLs: `<a th:href="@{/tasks/{id}(id=${task.id})}">View</a>`. Explain the `@{...}` URL syntax and path variable substitution.
       - `th:action` -- Form submission targets: `<form th:action="@{/tasks}" method="post">`. How this connects to Spring MVC @PostMapping controllers.
       - `th:object` + `th:field` -- Form binding: `<form th:object="${taskForm}">` with `<input th:field="*{title}"/>`. Explain how Spring binds form fields to Java object properties. Show the backing object (a simple Java class or record).
       - `th:class` / `th:classappend` -- Dynamic CSS classes: `<span th:classappend="${task.completed} ? 'done' : ''">`.
       - `th:fragment` -- Reusable template fragments: Define a nav bar once, include everywhere. `<div th:fragment="navbar">...</div>` and `<div th:replace="~{fragments/layout :: navbar}">`.
       - Layout composition with fragments: Create a base layout with `th:fragment="content"` placeholder, then individual pages that insert into the layout. This gives header/footer/nav consistency across all pages.

       **Part C: Building the Task Manager Frontend with Thymeleaf**
       Now that students know the syntax, build the actual capstone pages:
       - Create Spring MVC controllers: `@Controller` class with `@GetMapping` and `@PostMapping` methods that return view names and populate the `Model`
       - Create base layout template (`layout.html`) with Thymeleaf fragments for header, nav, footer, and a content placeholder
       - Build task list page (`tasks.html`): Uses `th:each` to iterate tasks, `th:text` for display, `th:if` for empty state, `th:href` for links to detail/edit
       - Build task form page (`task-form.html`): Uses `th:action`, `th:object`, `th:field` for creating/editing tasks. Include validation error display with `th:errors`
       - Build task detail page (`task-detail.html`): Shows single task with `th:text`, links to edit/delete
       - Style with simple CSS (provide a basic stylesheet in `static/css/style.css` -- clean and functional, or use Tailwind CDN for quick styling)
       - All Java controller code uses IO.println for any logging

    3. THEORY (React Path): "Building with React"
       - Keep existing React frontend content but UPDATE:
         - Verify React patterns for React 19.x
         - Use functional components with hooks (no class components)
         - Fetch calls to Spring Boot REST API
         - Update any Spring Boot version references
       - Replace System.out.println with IO.println in any Java snippets

    **Lesson 07 -- "Connecting Frontend to Backend":**

    Update content with BOTH paths:
    1. Thymeleaf path: Spring MVC controllers returning Thymeleaf views, form submission handling, CSRF token inclusion (Thymeleaf handles this automatically with `th:action`), redirect after POST (`return "redirect:/tasks"`), flash attributes for success/error messages, `@Valid` + BindingResult for server-side validation display
    2. React path: CORS configuration, API endpoint integration, JWT token storage, Axios/fetch interceptors

    Update all Java code to IO.println

    **Lesson 08 -- "Testing the Application":**
    - Backend testing is SHARED (both paths)
    - Replace @MockBean with @MockitoBean
    - Add brief section on testing Thymeleaf views (MockMvc with `.andExpect(view().name("tasks"))` and `.andExpect(model().attributeExists("tasks"))` assertions)
    - Keep React testing section
    - Replace System.out.println with IO.println

    **Lesson 09 -- "Deployment to Production":**
    - Deployment is mostly SHARED (same Spring Boot app either way)
    - Thymeleaf path: Thymeleaf templates are packaged IN the Spring Boot jar (simpler deployment -- single artifact). Note: "This is one of the big advantages of the Thymeleaf path -- your entire app is one JAR file."
    - React path: Needs either separate frontend deploy or Spring Boot serving static React build
    - Update Dockerfile to eclipse-temurin:25
    - Update Railway deployment instructions for Spring Boot 4.0.x
    - Use the verified Dockerfile pattern from RESEARCH.md
    - Replace System.out.println with IO.println

    **Update module.json:**
    - Update description to mention both frontend paths
    - Update lesson count if any lessons were added

    **For ALL challenges in Lessons 06-09:**
    - Update solution.java files: IO.println, Spring Boot 4.0.x
    - Add Thymeleaf-specific challenges where appropriate (at least 1-2)
    - Update challenge.json instructions with path-specific notes
    - Update Dockerfile challenges to eclipse-temurin:25

    Commit: "feat(02-07): create dual-path capstone with self-contained Thymeleaf tutorial and React path, deployment to Railway"
  </action>
  <verify>
    - `grep -r "System.out.println" content/courses/java/modules/16-capstone-project-task-manager-application/lessons/06-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/07-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/08-* content/courses/java/modules/16-capstone-project-task-manager-application/lessons/09-* | wc -l` returns 0
    - `grep -ri "th:each" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0 (Thymeleaf syntax is taught)
    - `grep -ri "th:text" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "th:action" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "th:object" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "th:if" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "th:fragment" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "Thymeleaf" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "React" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "eclipse-temurin:25" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns > 0
    - `grep -ri "@MockBean" content/courses/java/modules/16-capstone-project-task-manager-application/ | wc -l` returns 0
    - All challenge.json files are valid JSON
    - Lesson 06 title in lesson.json reflects the path choice
  </verify>
  <done>Capstone module restructured with dual frontend paths. Thymeleaf path includes a COMPLETE in-context tutorial covering th:each, th:text, th:if, th:action, th:object, form binding, fragments, and layouts -- students learn Thymeleaf by building the capstone. React content updated for React 19.x. Both paths share the same Spring Boot 4.0.x backend. Deployment lesson uses eclipse-temurin:25 and Railway. Module complete and deployable via either path.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Capstone Module 16 supports BOTH Thymeleaf and React paths
2. Shared backend (Lessons 01-05) uses Spring Boot 4.0.x and IO.println
3. Lesson 06 contains complete Thymeleaf fundamentals tutorial (th:each, th:text, th:if, th:action, th:object, form binding, fragments/layouts) taught in-context
4. Lesson 06 contains complete React path with React 19.x patterns
5. Frontend lessons (06-07) contain both Thymeleaf and React content
6. Testing lesson uses @MockitoBean
7. Deployment uses eclipse-temurin:25 and Railway
8. All challenges updated
9. Module.json reflects dual-path structure
</verification>

<success_criteria>
- JAVA-04 satisfied: A deployable capstone project exists that a student can build and deploy after completing the course (TWO paths available)
- JAVA-01 satisfied for Module 16: IO.println throughout
- Students can choose Thymeleaf (simpler) or React (advanced) and complete a full capstone
- Thymeleaf path is self-contained: no prior Thymeleaf knowledge required, all syntax taught within capstone Lesson 06
</success_criteria>

<output>
After completion, create `.planning/phases/02-java-course-audit/02-07-SUMMARY.md`
</output>
