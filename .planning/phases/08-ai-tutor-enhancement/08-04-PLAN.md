---
phase: 08-ai-tutor-enhancement
plan: 04
type: execute
wave: 3
depends_on: [08-01, 08-02, 08-03]
files_modified:
  - docs/tutor-validation-report.md
autonomous: false

must_haves:
  truths:
    - Tutor tested against sample challenges from all 6 courses
    - Socratic method verified (tutor asks questions, not gives answers)
    - Lesson context injection verified (tutor references lesson content)
    - Progressive hints verified (3 levels work correctly)
    - Debug assistance verified (error context triggers helpful responses)
    - Human approves tutor quality for production
  artifacts:
    - path: docs/tutor-validation-report.md
      provides: Validation results for all 6 courses
      contains: "Socratic method", "lesson context", "progressive hints", "debug assistance"
    - path: .planning/phases/08-ai-tutor-enhancement/validation-samples/
      provides: Sample test conversations
      pattern: "*.md"
  key_links:
    - from: Test scenarios
      to: Tutor responses
      via: Manual verification
      pattern: "asks guiding questions|references lesson|provides hint level"
---

<objective>
Validate the enhanced AI tutor against sample challenges from all 6 courses and verify all TUTR requirements are met.

Purpose: Before shipping the enhanced tutor, we must verify it behaves correctly across all course types (Java, JavaScript, C#, Flutter, Kotlin, Python). Each course has different concepts, syntax, and challenge types.
Output: Validation report documenting test results, issues found, and human approval for production.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/REQUIREMENTS.md

## TUTR Requirements to Validate

**TUTR-01**: Tutor uses Socratic method — guides discovery with questions, not direct answers
- Test: Ask "How do I write a for loop?" → Should ask "What are you trying to repeat?" not give code

**TUTR-02**: Tutor receives full lesson content as context (not just lesson title)
- Test: Ask about specific concept → Should reference theory/examples from current lesson

**TUTR-03**: Tutor provides progressive hints (3 levels: nudge, guidance, solution)
- Test: Click "I need a hint" → Level 1 (nudge)
- Test: Click "More help" → Level 2 (guidance)
- Test: Click "More help" again → Level 3 (partial solution)

**TUTR-04**: Tutor helps debug code errors with contextual suggestions tied to lesson concepts
- Test: Submit code with error → Ask for help → Should connect error to lesson theory

**TUTR-05**: ONNX Runtime GenAI upgraded from 0.5.2 to current stable
- Already validated in 08-01

## Course-Specific Test Scenarios

Each course needs testing with representative challenge types:

**Java**: OOP concept (inheritance), Stream API, Spring Boot configuration
**JavaScript**: Async/await, DOM manipulation, React component
**C#**: LINQ query, Async/await, ASP.NET Core middleware
**Flutter**: Widget composition, State management, Riverpod provider
**Kotlin**: Null safety, Coroutines, Ktor routing
**Python**: List comprehension, Decorators, FastAPI endpoint

## Test Script Template

For each course, test these interactions:
1. Concept question → Verify Socratic response
2. Hint request → Verify progressive disclosure
3. Code with error → Verify debug assistance
4. Challenge help → Verify lesson context reference
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create validation test script and documentation template</name>
  <files>docs/tutor-validation-report.md</files>
  <action>
Create a validation report template at docs/tutor-validation-report.md:

```markdown
# AI Tutor Validation Report

**Phase**: 08 - AI Tutor Enhancement  
**Date**: {date}  
**Validator**: {human tester}  
**Tutor Version**: Enhanced (Socratic + Context + Progressive Hints)

---

## Summary

| Requirement | Status | Notes |
|-------------|--------|-------|
| TUTR-01: Socratic Method | ⬜ | |
| TUTR-02: Lesson Context | ⬜ | |
| TUTR-03: Progressive Hints | ⬜ | |
| TUTR-04: Debug Assistance | ⬜ | |
| TUTR-05: ONNX Upgrade | ✅ | Completed in 08-01 |

---

## Test Environment

- **Application**: Code Tutor Desktop (WPF)
- **Model**: Phi-4 (gpu-int4-rtn-block-32)
- **ONNX Runtime**: 0.11.4
- **Test Courses**: All 6 (Java, JavaScript, C#, Flutter, Kotlin, Python)

---

## Course-by-Course Validation

### Java Course

**Test Lesson**: Module 04 - Inheritance (or similar OOP lesson)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "What's inheritance?" | Asks "What do you think 'is-a' means?" | | ⬜ |
| Hint Level 1 | Click "I need a hint" | Nudge about parent/child relationship | | ⬜ |
| Hint Level 2 | Click "More help" | Guidance with extends keyword | | ⬜ |
| Hint Level 3 | Click "More help" | Partial code with gaps | | ⬜ |
| Debug Help | Code with ClassCastException | References lesson on type safety | | ⬜ |

**Issues Found**:
- 

---

### JavaScript Course

**Test Lesson**: Module 07 - Async/Await (or similar)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "How do promises work?" | Asks "What happens while waiting?" | | ⬜ |
| Hint Level 1 | Click "I need a hint" | Nudge about async keyword | | ⬜ |
| Debug Help | Code with unhandled rejection | References error handling lesson | | ⬜ |

**Issues Found**:
- 

---

### C# Course

**Test Lesson**: Module 10 - LINQ (or similar)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "What's LINQ?" | Asks "How do you filter lists now?" | | ⬜ |
| Lesson Context | "Why use Where() here?" | References lesson examples | | ⬜ |

**Issues Found**:
- 

---

### Flutter Course

**Test Lesson**: Module 06 - Riverpod State (or similar)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "How does Riverpod work?" | Asks "Where does your data live?" | | ⬜ |
| Debug Help | Widget not rebuilding | References provider scope lesson | | ⬜ |

**Issues Found**:
- 

---

### Kotlin Course

**Test Lesson**: Module 04 - Null Safety (or similar)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "What's the ? operator?" | Asks "When might a value be missing?" | | ⬜ |
| Debug Help | NullPointerException | References null safety lesson | | ⬜ |

**Issues Found**:
- 

---

### Python Course

**Test Lesson**: Module 11 - List Comprehensions (or similar)

| Test Case | Input | Expected | Actual | Pass |
|-----------|-------|----------|--------|------|
| Socratic Question | "How do list comprehensions work?" | Asks "What pattern do you see?" | | ⬜ |
| Hint Level 1 | Click "I need a hint" | Nudge about for-in pattern | | ⬜ |

**Issues Found**:
- 

---

## Cross-Cutting Concerns

### Socratic Method Consistency

✅ **Passing**: Tutor consistently asks guiding questions  
⚠️ **Inconsistent**: Some responses give direct answers  
❌ **Failing**: Tutor regularly gives solutions without guidance

**Evidence**:
- 

### Lesson Context Awareness

✅ **Passing**: Tutor references current lesson content  
⚠️ **Partial**: Tutor mentions lesson but not specific content  
❌ **Failing**: Tutor ignores lesson context

**Evidence**:
- 

### Progressive Hint Quality

**Level 1 (Nudge)**: 
- ✅ Appropriate: Hints point in right direction without revealing
- ❌ Too revealing: Gives away solution

**Level 2 (Guidance)**:
- ✅ Appropriate: Explains approach with partial code
- ❌ Too vague: Doesn't help enough

**Level 3 (Partial Solution)**:
- ✅ Appropriate: Shows structure with clear gaps
- ❌ Complete solution: Does all the work

### Debug Assistance Quality

✅ **Passing**: Connects errors to lesson concepts  
⚠️ **Generic**: Explains error but not lesson connection  
❌ **Failing**: Doesn't help with debugging

---

## Issues and Action Items

| # | Issue | Severity | Course | Action |
|---|-------|----------|--------|--------|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

---

## Human Approval

**Approved for production**: ⬜ Yes / ⬜ No (with fixes) / ⬜ No (needs significant work)

**Approval Notes**:

**Approved by**: _________________  
**Date**: _________________

---

## Appendix: Sample Conversations

### Example 1: Good Socratic Response

**Course**:  
**Student**:  
**Tutor**:  
**Analysis**: 

### Example 2: Good Progressive Hint

**Course**:  
**Hint Level**:  
**Tutor Response**:  
**Analysis**: 

### Example 3: Good Debug Assistance

**Course**:  
**Error**:  
**Tutor Response**:  
**Analysis**: 
```

This template will be filled in during human validation.
  </action>
  <verify>Test-Path docs/tutor-validation-report.md</verify>
  <done>Validation report template created with test cases for all 6 courses</done>
</task>

<task type="auto">
  <name>Task 2: Create sample test scenarios document</name>
  <files>.planning/phases/08-ai-tutor-enhancement/validation-samples/test-scenarios.md</files>
  <action>
Create detailed test scenarios at .planning/phases/08-ai-tutor-enhancement/validation-samples/test-scenarios.md:

```markdown
# AI Tutor Test Scenarios

## How to Use This Document

For each course, navigate to the specified lesson and run through the test cases.
Copy the tutor's responses into the validation report.

---

## Java Course

### Test Location
- **Module**: 04 - Object-Oriented Programming Part 1
- **Lesson**: 04 - Inheritance: Building Family Trees
- **Challenge**: Inheritance challenge (if available)

### Test Cases

#### 1. Socratic Concept Question
**Student Input**: "I'm confused about inheritance. How does it work?"

**What to Look For**:
- ❌ Bad: "Inheritance is when a class extends another class using the extends keyword..."
- ✅ Good: "Think about real life - what traits might you inherit from your parents? In code, what might one class inherit from another?"

#### 2. Progressive Hints
**Step 1**: Click "I need a hint"  
**Expected**: Nudge like "Consider what the child class gets from the parent"

**Step 2**: Click "More help"  
**Expected**: Guidance like "The child class inherits all non-private fields and methods. What keyword establishes this relationship?"

**Step 3**: Click "More help" again  
**Expected**: Partial solution like:
```java
public class Child extends Parent {
    // Child automatically has Parent's public/protected members
    // Add child-specific code here
}
```

#### 3. Debug Assistance
**Setup**: Write code with error:
```java
Parent p = new Child();
Child c = p; // This will cause ClassCastException
```

**Student Input**: "Help with error" or "I'm getting an error"

**What to Look For**:
- References lesson content about type safety
- Asks "What type is `p` at compile time?"
- Guides toward casting solution without giving it immediately

---

## JavaScript Course

### Test Location
- **Module**: 08 - Asynchronous JavaScript
- **Lesson**: 03 - Async/Await: Writing Async Code That Looks Sync

### Test Cases

#### 1. Socratic Concept Question
**Student Input**: "What does await do?"

**What to Look For**:
- ✅ Good: "What happens when you call a function that returns a Promise? What would you like to happen?"

#### 2. Debug Assistance
**Setup**: Code with missing await:
```javascript
async function getData() {
    const result = fetch('/api/data'); // Missing await
    console.log(result); // Logs Promise, not data
}
```

**Student Input**: "Why is my result a Promise?"

**What to Look For**:
- References async/await lesson
- Asks "What does fetch return? What keyword waits for it?"

---

## C# Course

### Test Location
- **Module**: 10 - LINQ and Functional Patterns
- **Lesson**: 03 - Filtering and Projecting Data

### Test Cases

#### 1. Lesson Context Awareness
**Student Input**: "When should I use Where vs First?"

**What to Look For**:
- References specific examples from lesson
- Mentions filtering vs finding single item

#### 2. Progressive Hint
**Challenge**: Write LINQ query to filter active users

**Hint Level 1**: "What condition defines an 'active' user in your data?"
**Hint Level 2**: "You need to check the IsActive property. The Where method takes a lambda."
**Hint Level 3**: "Try: `users.Where(u => u.IsActive)`"

---

## Flutter Course

### Test Location
- **Module**: 06 - State Management with Riverpod
- **Lesson**: 04 - Creating Your First Provider

### Test Cases

#### 1. Socratic Concept Question
**Student Input**: "What's a provider?"

**What to Look For**:
- ✅ Good: "Where does your app currently store data that multiple widgets need?"

#### 2. Debug Assistance
**Setup**: Widget not rebuilding when state changes

**Student Input**: "My UI doesn't update when I change the state"

**What to Look For**:
- References provider scope lesson
- Asks about where provider is created vs where it's used

---

## Kotlin Course

### Test Location
- **Module**: 04 - Null Safety and Smart Casting
- **Lesson**: 02 - The Billion Dollar Mistake: Null Safety in Kotlin

### Test Cases

#### 1. Socratic Concept Question
**Student Input**: "Why does Kotlin have ? and !!?"

**What to Look For**:
- ✅ Good: "What happens in other languages when you call a method on null? What would be safer?"

#### 2. Debug Assistance
**Setup**: Code with null pointer risk:
```kotlin
val name: String? = getName()
println(name.length) // Compile error or NPE
```

**Student Input**: "Help with this error"

**What to Look For**:
- References null safety lesson
- Explains safe call operator (?.) vs not-null assertion (!!)

---

## Python Course

### Test Location
- **Module**: 11 - Classes and Objects
- **Lesson**: 07 - Modern Dataclasses with slots=True

### Test Cases

#### 1. Socratic Concept Question
**Student Input**: "What's the difference between a class and an object?"

**What to Look For**:
- ✅ Good: "Think about a cookie cutter vs the cookies. Which is the class and which are objects?"

#### 2. Progressive Hint
**Challenge**: Create a dataclass with validation

**Hint Level 1**: "What data does your class need to store?"
**Hint Level 2**: "Use @dataclass decorator. For validation, consider __post_init__."
**Hint Level 3**: 
```python
@dataclass
class User:
    name: str
    age: int
    
    def __post_init__(self):
        if self.age < 0:
            raise ValueError("Age must be positive")
```

---

## Quick Validation Checklist

For each course, verify:
- [ ] Socratic method: Tutor asks at least one guiding question
- [ ] Lesson context: Tutor references specific lesson content
- [ ] Progressive hints: All 3 levels provide appropriate help
- [ ] Debug assistance: Error help connects to lesson concepts
- [ ] Response quality: Helpful, encouraging, not overwhelming
```

Create the directory if needed.
  </action>
  <verify>Test-Path .planning/phases/08-ai-tutor-enhancement/validation-samples/test-scenarios.md</verify>
  <done>Test scenarios document created with detailed test cases for all 6 courses</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Execute validation tests and document results</name>
  <what-built>
Validation framework with report template and detailed test scenarios for all 6 courses.
  </what-built>
  <how-to-verify>
Execute the validation tests and fill in the report:

### Setup
1. Launch Code Tutor application with enhanced tutor
2. Ensure Phi-4 model is loaded
3. Open docs/tutor-validation-report.md for recording results

### Test Execution (per course)

**Java Course**:
1. Navigate to Module 04, Lesson 04 (Inheritance)
2. Run Test Case 1: Ask "How does inheritance work?"
   - [ ] Record response in report
   - [ ] Mark pass/fail for Socratic method
3. Run Test Case 2: Progressive hints
   - [ ] Click "I need a hint" → record response
   - [ ] Click "More help" → record response  
   - [ ] Click "More help" → record response
4. Run Test Case 3: Debug assistance (if challenge available)
   - [ ] Submit code with intentional error
   - [ ] Ask for help → record response

**Repeat for JavaScript, C#, Flutter, Kotlin, Python courses** using the test scenarios document.

### Evaluation Criteria

**Socratic Method (TUTR-01)**:
- ✅ Pass: Tutor asks guiding questions before giving information
- ⚠️ Partial: Mix of questions and direct answers
- ❌ Fail: Mostly direct answers without guidance

**Lesson Context (TUTR-02)**:
- ✅ Pass: Tutor references specific lesson content (theory, examples)
- ⚠️ Partial: Mentions lesson title but not content
- ❌ Fail: Generic response ignoring lesson

**Progressive Hints (TUTR-03)**:
- ✅ Pass: All 3 levels appropriate (nudge → guidance → partial)
- ⚠️ Partial: Some levels too revealing or too vague
- ❌ Fail: Hints don't progress or immediately give solutions

**Debug Assistance (TUTR-04)**:
- ✅ Pass: Connects error to lesson concepts with guiding questions
- ⚠️ Partial: Explains error but no lesson connection
- ❌ Fail: Just gives fix without explanation

### Final Approval

After testing all 6 courses:
1. Fill in Issues and Action Items table
2. Check overall requirements status
3. Make approval decision
4. Sign and date the report
  </how-to-verify>
  <resume-signal>Type "approved" with summary of results, or "issues" with problems found that need fixing</resume-signal>
</task>

<task type="auto">
  <name>Task 4: Update STATE.md with completion status</name>
  <files>.planning/STATE.md</files>
  <action>
After human validation is complete, update .planning/STATE.md:

1. Update Current Position section:
   - Phase: 8 of 9 (AI Tutor Enhancement)
   - Plan: 4 of 4 in current phase
   - Status: Phase complete (pending human approval)
   - Last activity: Date of validation completion

2. Add decisions from Phase 8:
   - [08-01]: ONNX Runtime GenAI upgraded to 0.11.4
   - [08-02]: Socratic system prompt with full lesson context injection
   - [08-03]: Progressive hint system with 3 levels (Nudge, Guidance, Partial Solution)
   - [08-04]: Tutor validated across all 6 courses, human approved

3. Update Pending Todos if any issues were deferred.

4. Clear any Phase 8 blockers/concerns that are resolved.
  </action>
  <verify>(Select-String -Path .planning/STATE.md -Pattern "Phase 8.*complete|08-04.*validated").Count -gt 0</verify>
  <done>STATE.md updated with Phase 8 completion status and decisions</done>
</task>

</tasks>

<verification>
Overall phase checks:
- [ ] Validation report template created
- [ ] Test scenarios documented for all 6 courses
- [ ] Human executed tests and filled in report
- [ ] All TUTR requirements evaluated (TUTR-01 through TUTR-05)
- [ ] Issues documented with severity and action items
- [ ] Human approval recorded in report
- [ ] STATE.md updated with Phase 8 completion
</verification>

<success_criteria>
- Tutor validated against sample challenges from all 6 courses
- Socratic method verified (asks questions, doesn't give direct answers)
- Lesson context injection verified (references lesson theory/examples)
- Progressive hints verified (3 levels work as designed)
- Debug assistance verified (connects errors to lesson concepts)
- Validation report documents all test results
- Human approves tutor quality for production
- STATE.md updated with Phase 8 completion
</success_criteria>

<output>
After completion, create `.planning/phases/08-ai-tutor-enhancement/08-04-SUMMARY.md`
</output>
