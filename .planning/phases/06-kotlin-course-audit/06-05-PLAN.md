---
phase: 06-kotlin-course-audit
plan: 05
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - content/courses/kotlin/modules/13-gradle-mastery-for-kotlin-developers/lessons/*/content/*.md
  - content/courses/kotlin/modules/14-functional-kotlin-with-arrow/lessons/*/content/*.md
  - content/courses/kotlin/modules/15-the-k2-era-modern-kotlin-tooling/lessons/*/content/*.md
autonomous: true

must_haves:
  truths:
    - "M13 Gradle content uses Kotlin DSL and version catalogs (libs.versions.toml) patterns current for Gradle 8.12+"
    - "M14 Arrow 2.2.x content uses current Raise DSL patterns and does NOT use deprecated context receivers"
    - "M15 K2 Era content is accurate about K2 compiler status (default since 2.0, not experimental)"
    - "M15 L05 context receivers lesson is rewritten to teach context parameters (Beta since 2.2) as primary approach"
    - "All 17 lessons across M13-M15 are accurate against current tooling"
  artifacts:
    - path: "content/courses/kotlin/modules/14-functional-kotlin-with-arrow/lessons/*/content/*.md"
      provides: "Arrow 2.2.x with context parameters migration"
    - path: "content/courses/kotlin/modules/15-the-k2-era-modern-kotlin-tooling/lessons/*/content/*.md"
      provides: "K2 Era content with context parameters lesson rewritten"
  key_links:
    - from: "M15 L05 context parameters"
      to: "M14 Arrow Raise examples"
      via: "Both use context parameters syntax"
      pattern: "context\\("
    - from: "M13 Gradle"
      to: "M15 K2 tooling"
      via: "Gradle builds use K2 compiler plugin"
      pattern: "kotlin.*plugin|compilerOptions"
---

<objective>
Verify Modules 13-15 (17 lessons, ~200 content files) against Gradle 8.12+, Arrow 2.2.x, and K2 compiler tooling. Critically, rewrite the deprecated context receivers content (M15 L05) to teach context parameters, and update Arrow Raise examples (M14) to use the new syntax.

Purpose: KTLN-01 requires accuracy against Kotlin 2.0+ with K2. The context receivers deprecation is the most significant API change in the Kotlin course -- teaching deprecated syntax would actively mislead students. The Arrow module directly depends on this fix. Gradle mastery is the build foundation for the entire KMP stack.
Output: Verified M13-M15 content with context receivers -> context parameters migration complete.
</objective>

<execution_context>
@C:\Users\dasbl\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dasbl\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-kotlin-course-audit/06-RESEARCH.md
@.planning/phases/06-kotlin-course-audit/06-01-SUMMARY.md
@content/version-manifest.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Accuracy pass M13 Gradle + M14 Arrow (12 lessons)</name>
  <files>
    content/courses/kotlin/modules/13-gradle-mastery-for-kotlin-developers/lessons/*/content/*.md
    content/courses/kotlin/modules/14-functional-kotlin-with-arrow/lessons/*/content/*.md
  </files>
  <action>
    Read all content files across M13-M14 (12 lessons, ~155 content files).

    **M13 Gradle Mastery (6 lessons):**
    - Kotlin DSL: build.gradle.kts syntax, plugins { } block, dependencies { } block -- verify current patterns
    - Version catalogs: gradle/libs.versions.toml format -- verify current TOML syntax and Gradle 8.x conventions
    - Multiplatform builds: KMP plugin configuration `kotlin { androidTarget { } iosTarget { } jvm { } }` -- verify current DSL
    - Custom plugins: Convention plugins or precompiled script plugins -- verify current approach
    - Dependency management: implementation, api, compileOnly -- verify current configuration names
    - Build caching, incremental compilation: Verify advice matches Gradle 8.12+ behavior
    - Kotlin compiler options: `compilerOptions { }` block (not old `kotlinOptions { }` which is deprecated)
    - No deprecated Groovy DSL patterns (build.gradle vs build.gradle.kts)
    - No deprecated Gradle API (project.convention, etc.)

    **M14 Arrow 2.2.x Functional Kotlin (6 lessons):**
    - Either<L, R>: Verify current syntax (fold, map, flatMap, getOrElse)
    - Option<A>: Verify current syntax (Some, None, fold)
    - Raise DSL: This is the CRITICAL area. Arrow 2.2.0 provides context parameters API.
      - Check each lesson for `context(Raise<Error>)` syntax -- this is OLD context receivers, deprecated
      - Replace with `context(raise: Raise<Error>)` syntax -- this is NEW context parameters
      - If Arrow examples use `arrow.core.raise.Raise`, check if they should use `arrow.core.raise.context.Raise` (the new context parameters package)
      - However: if Arrow 2.2.0 still supports the old import path with backward compat, note it but teach the new way
    - Railway-oriented programming: Verify either/result chaining patterns
    - Validated: If NonEmptyList/Validated patterns used, verify current Arrow API (Nel, Validated deprecated -> use Either + zipOrAccumulate)
    - No Arrow 1.x patterns (old IO monad, old Resource, old Schedule)

    **Context receivers -> context parameters migration in M14:**
    For any M14 code examples using `context(Raise<...>)` (without parameter name):
    1. Update to `context(raise: Raise<...>)` (with explicit parameter name)
    2. Update function bodies to use `raise.raise(error)` instead of implicit `raise(error)`
    3. Add a brief note where first encountered: "Arrow 2.2+ uses context parameters (Kotlin 2.2 Beta feature). Earlier Arrow versions used context receivers (deprecated since Kotlin 2.0.20)."
    4. If both old and new styles exist in the lesson, consolidate to new style only

    Fix inaccuracies in-place.
  </action>
  <verify>
    Report: X lessons reviewed, Y corrections applied.
    Grep M13 for deprecated Gradle patterns: "kotlinOptions", "buildscript {", "apply plugin".
    Grep M14 for old context receiver syntax: `context(Raise` without a parameter name (should all have `context(raise: Raise` or similar).
    Verify M14 uses Arrow 2.2.x import patterns.
  </verify>
  <done>
    All 12 lessons in M13-M14 verified against Gradle 8.12+ and Arrow 2.2.x. Context receivers replaced with context parameters in Arrow Raise examples. Gradle patterns use Kotlin DSL and version catalogs.
  </done>
</task>

<task type="auto">
  <name>Task 2: Accuracy pass M15 K2 Era + context parameters lesson rewrite (5 lessons)</name>
  <files>
    content/courses/kotlin/modules/15-the-k2-era-modern-kotlin-tooling/lessons/*/content/*.md
  </files>
  <action>
    Read all content files across M15 (5 lessons, ~45 content files).

    **M15 K2 Era accuracy checks:**
    - L01 K2 Compiler: K2 is the DEFAULT compiler since Kotlin 2.0 (not experimental, not opt-in). Verify lesson doesn't describe K2 as experimental or requiring opt-in. It should describe K2 as the standard compiler with performance improvements and new analysis engine.
    - L02 K2 Migration: Verify migration guidance is current. If lesson describes migrating FROM K1 to K2, frame it as historical context (most projects should already be on K2). Check for outdated compiler flags (-Xuse-k2 was the old opt-in flag, no longer needed).
    - L03 KSP: Verify KSP (Kotlin Symbol Processing) is described as the replacement for KAPT (deprecated). Verify ksp plugin configuration matches current patterns. KAPT should be described as legacy.
    - L04 KSP continued or related tooling: Verify patterns match current KSP API.

    **L05 Context Parameters Rewrite (CRITICAL):**
    Research identified this lesson teaches deprecated context receivers. This is the single most impactful content fix in the Kotlin course.

    Rewrite strategy:
    1. **Rename the lesson** in lesson.json: From whatever current title is (likely "Context Receivers") to "Context Parameters: The Future of Kotlin"
    2. **Lead with context parameters** (the current/future approach):
       - Explain what context parameters solve (implicit dependencies, cleaner DSLs)
       - Syntax: `context(name: Type)` -- parameters have explicit names
       - Access: `name.method()` -- explicit qualification required
       - Feature status: Beta since Kotlin 2.2, expected stable in future release
       - Enable with: `-Xcontext-parameters` compiler flag (or `compilerOptions { freeCompilerArgs.add("-Xcontext-parameters") }`)
       - Show 2-3 practical examples: logging context, database context, scope-limited operations
    3. **Include migration section** (context receivers -> context parameters):
       - Old syntax: `context(Type)` -- implicit, no names
       - New syntax: `context(name: Type)` -- explicit names
       - Key difference: context parameters require explicit qualification (name.method() vs just method())
       - This is a compile-time migration -- old syntax emits deprecation warnings
    4. **Brief historical note** (2-3 sentences max):
       - Context receivers were experimental, deprecated in Kotlin 2.0.20
       - Context parameters are the replacement, Beta since Kotlin 2.2
       - Both are compile-time features with zero runtime overhead
    5. **Remove all deprecated context receiver code** as the primary teaching material. Old syntax appears ONLY in the migration comparison section.

    If there are existing examples using `context(Logger, Database)`:
    - Replace with `context(logger: Logger, db: Database)`
    - Update function bodies: `info("msg")` -> `logger.info("msg")`, `query(...)` -> `db.query(...)`

    Fix all inaccuracies in-place.
  </action>
  <verify>
    Report: X lessons reviewed, Y corrections applied.
    Read M15 L05 and verify context parameters are the primary teaching approach.
    Grep M15 for deprecated patterns: "-Xuse-k2" (old K2 opt-in flag), "context(Type)" without parameter name (outside migration section).
    Verify M15 L01 does not describe K2 as experimental.
    Verify M15 L03 describes KAPT as deprecated and KSP as the standard.
  </verify>
  <done>
    All 5 M15 lessons verified against K2 compiler status and current tooling. L05 context receivers lesson rewritten to teach context parameters as primary approach with migration guidance. K2 described as default compiler. KSP described as KAPT replacement.
  </done>
</task>

</tasks>

<verification>
1. All 17 lessons across M13-M15 reviewed for tooling accuracy
2. Gradle uses Kotlin DSL and version catalogs (no deprecated Groovy or kotlinOptions)
3. Arrow Raise examples use context parameters syntax (not deprecated context receivers)
4. M15 L05 teaches context parameters as primary approach with brief legacy migration section
5. K2 compiler described as default (not experimental)
6. KSP is standard, KAPT is legacy
</verification>

<success_criteria>
- KTLN-01 fully addressed: All 128 lessons across M01-M15 verified through Plans 02-05
- Context receivers -> context parameters migration complete (most impactful API fix)
- Gradle 8.12+ patterns verified
- Arrow 2.2.x patterns verified
- K2/KSP tooling current
</success_criteria>

<output>
After completion, create `.planning/phases/06-kotlin-course-audit/06-05-SUMMARY.md`
</output>
