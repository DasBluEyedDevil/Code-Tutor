---
phase: 01-foundation-and-content-normalization
plan: 03
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - content/courses/javascript/modules/**/content/*.md
  - content/courses/csharp/modules/**/content/*.md
  - content/courses/kotlin/modules/**/content/*.md
  - content/courses/flutter/modules/**/content/*.md
  - content/courses/java/modules/**/content/*.md
  - content/courses/python/modules/**/content/*.md
  - content/courses/javascript/modules/*/
  - content/courses/flutter/modules/*/
  - content/courses/kotlin/modules/*/
  - content/courses/java/modules/*/lessons/*/
  - content/courses/python/modules/*/lessons/*/
  - native-app.Tests/E2E/ContentValidation/CourseContentValidationTests.cs
autonomous: true

must_haves:
  truths:
    - "Every content section markdown file uses one of the 6 standard type names in its YAML frontmatter: THEORY, EXAMPLE, KEY_POINT, ANALOGY, WARNING, LEGACY_COMPARISON"
    - "No content section file has a non-standard type (CODE, CONCEPT, ARCHITECTURE, REAL_WORLD, DEEP_DIVE, EXPERIMENT)"
    - "Content section files within each lesson are numbered sequentially with no gaps (01, 02, 03, ...)"
    - "Module directories follow {NN}-{topic-slug} naming convention with no redundant module-N prefixes"
    - "Module and lesson directory numbering is sequential with no gaps across all 6 courses"
    - "E2E validation tests reflect the updated standard type list"
  artifacts:
    - path: "native-app.Tests/E2E/ContentValidation/CourseContentValidationTests.cs"
      provides: "Updated validSectionTypes list matching standard types"
      contains: "THEORY"
  key_links:
    - from: "content/courses/**/content/*.md"
      to: "native-app-wpf/Views/LessonPage.xaml.cs"
      via: "YAML frontmatter type field matched case-insensitively in switch statement"
      pattern: "type:\\s*(THEORY|EXAMPLE|KEY_POINT|ANALOGY|WARNING|LEGACY_COMPARISON)"
    - from: "native-app.Tests/E2E/ContentValidation/CourseContentValidationTests.cs"
      to: "content/courses/**/content/*.md"
      via: "validSectionTypes list checked against all content files"
      pattern: "validSectionTypes"
---

<objective>
Migrate all 185 non-standard content section types to standard names, fix content section file numbering gaps, clean up module/lesson directory naming conventions, and update E2E tests.

Purpose: NORM-02 requires all content sections use standardized type names. NORM-03 requires sequential numbering with no gaps. Currently 185 content files use non-standard types (CODE, CONCEPT, ARCHITECTURE, REAL_WORLD, DEEP_DIVE, EXPERIMENT) that either render through the generic default renderer or will break rendering after migration. Module directories in JavaScript/Flutter/Kotlin have redundant naming patterns. This plan normalizes all of it.

Output: All 185 non-standard content sections migrated to standard types, all numbering sequential, all directory names cleaned up, E2E tests updated.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-content-normalization/01-CONTEXT.md
@.planning/phases/01-foundation-and-content-normalization/01-RESEARCH.md
@.planning/phases/01-foundation-and-content-normalization/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate non-standard content section types to standard names</name>
  <files>
    content/courses/javascript/modules/**/content/*.md
    content/courses/csharp/modules/**/content/*.md
    content/courses/kotlin/modules/**/content/*.md
    content/courses/flutter/modules/**/content/*.md
  </files>
  <action>
    Write and execute a Node.js script that reads every content section markdown file across all 6 courses, parses the YAML frontmatter, and migrates non-standard types.

    **Migration rules (from RESEARCH.md verified counts):**
    - `CODE` (109 files, all in JavaScript) -> `EXAMPLE`
    - `CONCEPT` (33 files, all in JavaScript) -> `THEORY`
    - `ARCHITECTURE` (11 files, all in C#) -> `THEORY`
    - `REAL_WORLD` (8 files, all in C#) -> `ANALOGY`
    - `DEEP_DIVE` (5 files, all in C#) -> `THEORY`
    - `EXPERIMENT` (19 files, in Kotlin/Flutter) -> `EXAMPLE`

    **For CODE -> EXAMPLE and EXPERIMENT -> EXAMPLE migrations specifically:**
    The app's `CodeExampleSection` control may expect specific content formatting. Read 3-5 existing EXAMPLE sections from the same course to understand the expected format. If the CODE/EXPERIMENT sections have a code block in markdown but no `code` field in frontmatter, verify the CodeExampleSection control handles markdown-embedded code. If it requires a `code` field in frontmatter, add it by extracting the first code block from the markdown content.

    **For all migrations:**
    - Only change the `type:` field in YAML frontmatter (e.g., `type: CODE` -> `type: EXAMPLE`)
    - Do NOT change the body content unless the target type requires specific formatting (see CODE->EXAMPLE note above)
    - Log every change: `{filepath}: type changed from {old} to {new}`

    **Also scan for any other non-standard types** not in the known list above. If found, log them and decide based on content whether they map to THEORY, EXAMPLE, or another standard type.

    Delete the script after execution.

    Commit: "feat(01-03): migrate 185 non-standard content section types to standard names"
  </action>
  <verify>
    - Run a quick verification script that reads all `content/courses/**/content/*.md` files, parses YAML frontmatter, extracts `type:` field, and reports any type NOT in [THEORY, EXAMPLE, KEY_POINT, ANALOGY, WARNING, LEGACY_COMPARISON]
    - Zero non-standard types found
    - Log shows exactly which files were modified and what the old/new types were
  </verify>
  <done>All 185+ non-standard content section files now use one of the 6 standard type names. No non-standard types remain in any course.</done>
</task>

<task type="auto">
  <name>Task 2: Fix numbering gaps and clean up directory naming</name>
  <files>
    content/courses/javascript/modules/*/
    content/courses/flutter/modules/*/
    content/courses/kotlin/modules/*/
    content/courses/java/modules/*/lessons/*/
    content/courses/python/modules/*/lessons/*/
    content/courses/csharp/modules/*/lessons/*/
    content/courses/**/content/*.md
    native-app.Tests/E2E/ContentValidation/CourseContentValidationTests.cs
  </files>
  <action>
    This task has 3 sub-parts. Execute them in order.

    **Part A: Clean up module directory names to {NN}-{topic-slug} convention**

    Write and execute a Node.js script that renames module directories. The standard is `{NN}-{topic-slug}` (Java, Python, C# already follow this).

    Directories that need renaming:
    - **JavaScript** modules: Remove redundant `module-N-` prefix. E.g., `01-module-1-the-absolute-basics-the-what` -> `01-the-absolute-basics`. Keep the NN prefix and simplify the slug (drop "the-what", "the-boxes", etc. suffixes if they are overly verbose -- use judgment to keep slugs descriptive but concise).
    - **Flutter** modules: Remove redundant `module-N-` infix and replace generic names. E.g., `01-module-0-flutter-development` -> `01-dart-fundamentals` (or derive a meaningful slug from the module.json title). `02-module-1-flutter-development` -> `02-dart-programming-basics` (derive from title). The modules with good names like `06-module-5-mvvm-architecture-with-riverpod` just need the `module-5-` prefix removed -> `06-mvvm-architecture-with-riverpod`.
    - **Kotlin** modules: Clean up mixed naming. E.g., `05-module-04a-coroutines-flows` -> `05-coroutines-and-flows`, `08-module-06a-persistence-with-sqldelight` -> `08-persistence-with-sqldelight`, etc.

    Read each module's `module.json` title field to derive the slug when the current directory name is generic or redundant. The slug should be lowercase, hyphenated, 2-5 words max.

    IMPORTANT: Because module display order depends on directory name sort, the NN prefix MUST stay consistent. Do NOT change the numeric prefix -- only clean the slug portion after the prefix.

    After renaming, update any references to the old directory paths (the lesson.json moduleId was already standardized in Plan 02, so that is fine -- but verify no other files reference directory names).

    **Part B: Fix lesson directory numbering gaps**

    Write and execute a script that checks each module's lessons directory for sequential numbering. The lesson directory prefix (e.g., `01-`, `02-`) must be sequential with no gaps.

    For each course, for each module:
    1. List all lesson directories, sorted by current prefix
    2. Check for gaps (e.g., 01, 02, 04 -- gap at 03)
    3. If gaps found, rename directories to close the gap (04 -> 03, etc.)
    4. After renaming, update the `order` field in each lesson.json to match the new sequential number

    SKIP Python Module 14 -- it has duplicate prefixes and will be restructured in Plan 04.

    **Part C: Fix content section file numbering gaps within lessons**

    For each lesson's `content/` directory:
    1. List all markdown files sorted by current prefix
    2. Check for sequential numbering (01, 02, 03, ...)
    3. If gaps found, rename files to close gaps

    **Part D: Update E2E validation tests**

    Modify `native-app.Tests/E2E/ContentValidation/CourseContentValidationTests.cs`:
    - Update the `validSectionTypes` list (around line 163) to match the 6 standard types: `THEORY, EXAMPLE, KEY_POINT, ANALOGY, WARNING, LEGACY_COMPARISON`
    - Remove the old non-standard types from the valid list: `INTRODUCTION, TIP, NOTE, EXERCISE, SUMMARY, EXPERIMENT`
    - Update the difficulty validation (around line 362) to include `beginner-to-advanced` as a valid value

    Delete all migration scripts after execution.

    Commit: "feat(01-03): clean up directory naming, fix numbering gaps, update E2E tests"
  </action>
  <verify>
    - Run verification script across all 6 courses:
      1. Every module directory follows `{NN}-{slug}` pattern (no `module-N-` infixes)
      2. Within each module, lesson directories are sequentially numbered (01, 02, 03, ... no gaps)
      3. Within each lesson, content files are sequentially numbered (01, 02, 03, ... no gaps)
    - Run `dotnet test --filter "FullyQualifiedName~ContentValidation"` from native-app.Tests -- all content validation tests should pass (or at least no failures related to section types or difficulty values)
    - `git diff --stat` shows the scope of changes is reasonable
  </verify>
  <done>All module directories follow {NN}-{topic-slug} convention. All numbering is sequential with no gaps (except Python Module 14 which is deferred to Plan 04). E2E tests pass with updated standard types.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Zero non-standard content section types remain in any course
2. All module directories follow `{NN}-{topic-slug}` naming (no redundant module-N infixes)
3. Lesson numbering within each module is sequential (verified by script)
4. Content section file numbering within each lesson is sequential
5. `dotnet test --filter "FullyQualifiedName~ContentValidation"` passes (section type and difficulty validations)
6. No migration scripts remain in the repository
</verification>

<success_criteria>
- NORM-02 satisfied: All content sections use standardized type names recognized by the app
- NORM-03 partially satisfied: Module and lesson numbering is sequential with no gaps (Python Module 14 deferred to Plan 04)
- E2E tests updated to validate against the new standard
- Directory naming is consistent across all 6 courses
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-content-normalization/01-03-SUMMARY.md`
</output>
