---
phase: 01-foundation-and-content-normalization
plan: 04
type: execute
wave: 3
depends_on: ["01-02"]
files_modified:
  - content/courses/python/modules/14-http-web-apis/
  - content/courses/python/modules/15-*/
  - content/courses/python/modules/16-*/
  - content/courses/python/modules/17-*/
  - content/courses/python/modules/18-*/
  - content/courses/python/modules/19-*/
  - content/courses/python/modules/20-*/
  - content/courses/python/modules/21-*/
  - content/courses/python/modules/22-*/
  - content/courses/python/modules/23-*/
  - content/courses/python/modules/24-*/
  - content/courses/python/modules/25-*/
  - content/courses/python/course.json
autonomous: true

must_haves:
  truths:
    - "Python Module 14 (26 lessons covering HTTP/FastAPI/Databases/Auth/Django) has been split into 3-4 focused modules"
    - "No duplicate lesson directory prefixes exist in any Python module"
    - "Duplicate lessons (8 pairs with same prefix) have been merged or deduplicated"
    - "All resulting modules have sequential lesson numbering with no gaps"
    - "All lesson.json files in restructured modules have correct moduleId references"
    - "All module and lesson IDs follow the standardized format from Plan 02"
    - "Modules after the split point are renumbered sequentially"
  artifacts:
    - path: "content/courses/python/modules/14-*/module.json"
      provides: "First split module (HTTP and FastAPI)"
      contains: "module-14"
    - path: "content/courses/python/modules/15-*/module.json"
      provides: "Second split module (Databases)"
      contains: "module-15"
  key_links:
    - from: "content/courses/python/modules/*/lessons/*/lesson.json"
      to: "content/courses/python/modules/*/module.json"
      via: "moduleId field references parent module id"
      pattern: "moduleId.*module-\\d{2}"
---

<objective>
Restructure Python Module 14 (26 lessons covering HTTP/FastAPI/Databases/Auth/Django) into 3-4 focused modules, resolve all 8 duplicate lesson pairs, and renumber all downstream Python modules.

Purpose: NORM-04 requires Python Module 14 be restructured with duplicate lessons resolved and coherent progression restored. The current module has 26 entries with 16 having duplicate directory prefixes (8 pairs where two different AI sessions generated content for the same slot). This is the most complex restructuring in Phase 1.

Output: Python Module 14 split into focused modules, duplicates merged, all downstream modules renumbered, all IDs and references updated.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-and-content-normalization/01-CONTEXT.md
@.planning/phases/01-foundation-and-content-normalization/01-RESEARCH.md
@.planning/phases/01-foundation-and-content-normalization/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Analyze duplicate lessons and determine merge/split decisions</name>
  <files>content/courses/python/modules/14-http-web-apis/lessons/*/lesson.json, content/courses/python/modules/14-http-web-apis/lessons/*/content/*.md</files>
  <action>
    Read the content of ALL 26 lessons in Python Module 14 to make informed merge/split decisions. For each lesson, read the lesson.json AND at least the first content section (01-theory.md or similar) to understand what the lesson actually teaches.

    **The 8 duplicate pairs to analyze:**
    1. `02-data-validation-with-pydantic` vs `04-pydantic-v2-deep-dive` -- likely merge: one covers basics, one goes deep
    2. `02-fastapi-fundamentals` vs `03-modern-apis-with-fastapi` -- likely merge or keep both with clear progression
    3. `03-alternative-building-apis-with-flask` -- outlier Flask lesson (move to FastAPI module as comparison)
    4. `04-fastapi-routes-and-models` vs `05-fastapi-advanced-patterns` -- likely keep both (different scope)
    5. `05-dependency-injection-in-fastapi` -- keep (unique topic)
    6. `06-fastapi-async-sqlalchemy-20` vs `06-mini-project-fastapi-crud-api` -- keep both (one is learning, one is project)
    7. `11-authentication-and-api-security` vs `11-jwt-authentication` -- likely merge
    8. `12-api-testing-and-documentation` vs `12-oauth2-with-fastapi` -- keep both (different topics, just duplicate prefix)
    9. `13-mini-project-complete-blog-api-with-authentication` vs `13-why-django` -- keep both (project vs new topic intro)

    **Recommended split (from RESEARCH.md, but verify with actual content):**
    - Module 14: HTTP and FastAPI (~8 lessons): HTTP basics, Pydantic, FastAPI fundamentals, routes/models, dependency injection, advanced patterns, Flask comparison, mini-project
    - Module 15: Databases (~5 lessons): SQLAlchemy ORM, Alembic migrations, SQLite, PostgreSQL, FastAPI+async SQLAlchemy
    - Module 16: Authentication and Security (~4 lessons): Password hashing, JWT, OAuth2, API security
    - Module 17: Django (~5 lessons): Why Django, models/admin, views/templates, DRF basics, async views

    For each duplicate pair, read both lessons and decide:
    - **Merge**: Combine best parts into one lesson (when both cover same topic at same level)
    - **Keep both**: Assign to different modules or sequential positions (when they cover different aspects)
    - **Remove one**: Delete the weaker version (only if one is clearly a subset of the other)

    Document ALL decisions before making changes. Write a brief analysis to stdout explaining each merge/split decision.
  </action>
  <verify>
    - All 26 lessons have been read and analyzed
    - Each duplicate pair has a documented decision (merge/keep/remove)
    - The proposed module split has been finalized with lesson assignments
    - The total lesson count after dedup is ~22 (26 minus ~4 merged/removed)
  </verify>
  <done>All duplicate pairs analyzed, merge/split decisions documented, and module split plan finalized with specific lesson assignments for each new module.</done>
</task>

<task type="auto">
  <name>Task 2: Execute the restructuring -- split, merge, renumber</name>
  <files>
    content/courses/python/modules/14-http-web-apis/
    content/courses/python/modules/15-sharing-your-work/ (and all subsequent)
    content/courses/python/course.json
  </files>
  <action>
    Execute the restructuring plan from Task 1. This involves filesystem operations and JSON updates.

    **Step A: Create new module directories**
    Based on the split plan from Task 1, create new module directories:
    - `14-http-and-fastapi/` (or similar slug derived from content)
    - `15-databases/`
    - `16-authentication-and-security/`
    - `17-django/`

    Create a `module.json` for each new module with:
    - id: `module-14`, `module-15`, `module-16`, `module-17` respectively
    - title: Descriptive title matching the module's focus
    - description: Brief description of what the module covers
    - difficulty: Appropriate level (intermediate for HTTP/FastAPI, intermediate-advanced for databases/auth/Django)
    - estimatedHours: Estimate based on lesson count (~2 hours per lesson as baseline)

    **Step B: Move lessons into new modules**
    Move each lesson directory from the old Module 14 into the appropriate new module based on Task 1's assignment. Create the `lessons/` subdirectory in each new module first.

    **Step C: Merge duplicate lessons**
    For each pair that was decided as "merge" in Task 1:
    1. Read both lesson's content sections
    2. Combine: take the stronger theory/examples from each, merge into a single coherent lesson
    3. Update the lesson.json with the merged lesson's metadata
    4. Remove the duplicate lesson directory

    **Step D: Renumber lessons within each new module**
    Within each new module, renumber lesson directories sequentially: `01-{slug}`, `02-{slug}`, etc. Update each lesson.json:
    - `id`: `lesson-{MM}-{LL}` (MM = new module number, LL = new lesson number)
    - `moduleId`: `module-{MM}` (matching parent module)
    - `order`: sequential integer matching position

    **Step E: Renumber all downstream Python modules**
    The old modules 15-22 must shift up to account for the split. The old Module 14 (1 module) becomes Modules 14-17 (4 modules), so everything after shifts by +3.

    Old -> New mapping:
    - 14-http-web-apis -> 14, 15, 16, 17 (the split)
    - 15-sharing-your-work -> 18-sharing-your-work
    - 16-professional-cli-tools-with-typer -> 19-professional-cli-tools-with-typer
    - 17-exception-groups-structured-concurrency -> 20-exception-groups-structured-concurrency
    - 18-advanced-pytest-test-architecture -> 21-advanced-pytest-test-architecture
    - 19-django-fundamentals -> REMOVE (content moved into the new Module 17 Django split)
    - 20-postgresql-advanced-database-patterns -> 22-postgresql-advanced-database-patterns (or merge into Module 15 databases if content overlaps)
    - 21-authentication-security -> REMOVE (content moved into Module 16 auth split)
    - 22-capstone-complete-personal-finance-tracker -> keep as final module

    WAIT -- before executing this, check whether modules 19 (django-fundamentals), 20 (postgresql-advanced-database-patterns), and 21 (authentication-security) overlap with the lessons being split from Module 14. Read their content first:
    - If Module 19 (Django Fundamentals) duplicates the Django lessons from Module 14, merge the unique parts into the new Django module and remove 19.
    - If Module 20 (PostgreSQL) duplicates the database lessons from Module 14, merge unique parts into the new Databases module and remove 20.
    - If Module 21 (Authentication Security) duplicates the auth lessons from Module 14, merge unique parts into the new Auth module and remove 21.

    For each rename/move:
    - Rename the directory (change prefix number)
    - Update module.json `id` to new `module-{NN}`
    - Update all lesson.json files within: `id` to `lesson-{NN}-{LL}`, `moduleId` to `module-{NN}`

    **Step F: Delete old Module 14 directory**
    After all lessons have been moved to new modules, remove the empty `14-http-web-apis/` directory.

    Commit: "feat(01-04): restructure Python Module 14 into focused modules, resolve duplicates"
  </action>
  <verify>
    - No directory has duplicate prefixes in any Python module
    - All new module directories have valid module.json files
    - All lesson.json files have correct moduleId matching their parent module
    - All lesson IDs follow `lesson-{MM}-{LL}` pattern with correct module numbers
    - Module numbering is sequential from 01 to final module (no gaps)
    - `ls content/courses/python/modules/` shows all modules in clean sequential order
    - The capstone module is the final module
    - Run the JSON validation script from Plan 02 against the Python course specifically to verify all schemas still pass
  </verify>
  <done>Python Module 14 split into 3-4 focused modules. All duplicates resolved. All downstream modules renumbered. All IDs and references correct. Capstone is the final module.</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Python course has coherent module progression with no mega-modules
2. No duplicate directory prefixes in any Python module
3. All Python lesson.json files have correct moduleId and lesson-{MM}-{LL} IDs
4. All Python module.json files have correct module-{NN} IDs
5. Module numbering is sequential (01, 02, ..., N) with no gaps
6. Capstone project is the final module
7. Content from duplicate lessons has been preserved (best parts merged)
</verification>

<success_criteria>
- NORM-04 satisfied: Python Module 14 restructured -- duplicate lessons resolved, coherent progression restored
- The Python course now has ~25 modules (was 22, with Module 14 splitting into 4 and some later modules potentially merging)
- Each module covers a focused topic area
- Lesson progression within each new module is logical (basics before advanced)
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-and-content-normalization/01-04-SUMMARY.md`
</output>
